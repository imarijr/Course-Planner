/*! jQuery v3.4.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],E=C.document,r=Object.getPrototypeOf,s=t.slice,g=t.concat,u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.4.1",k=function(e,t){return new k.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function d(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}k.fn=k.prototype={jquery:f,constructor:k,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(n){return this.pushStack(k.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},k.extend=k.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,a[t]=k.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},k.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){b(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0;if(d(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(d(Object(e))?k.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(d(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g.apply([],a)},guid:1,support:y}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=t[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var h=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,k="sizzle"+1*new Date,m=n.document,S=0,r=0,p=ue(),x=ue(),N=ue(),A=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",$=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",F=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp($),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(m.childNodes),m.childNodes),t[m.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&((e?e.ownerDocument||e:m)!==C&&T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!A[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&U.test(t)){(s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=k),o=(l=h(t)).length;while(o--)l[o]="#"+s+" "+xe(l[o]);c=l.join(","),f=ee.test(t)&&ye(e.parentNode)||e}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){A(t,!0)}finally{s===k&&e.removeAttribute("id")}}}return g(t.replace(B,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[k]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:m;return r!==C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),m!==C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=k,!C.getElementsByName||!C.getElementsByName(k).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){a.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+k+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||v.push(".#.+[+~]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",$)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e===C||e.ownerDocument===m&&y(m,e)?-1:t===C||t.ownerDocument===m&&y(m,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===C?-1:t===C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]===m?-1:s[r]===m?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&T(e),d.matchesSelector&&E&&!A[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){A(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!==C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=p[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&p(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(F," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[S,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[S,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[k]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace(B,"$1"));return s[k]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[S,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[k]||(e[k]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===S&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[k]&&(v=Ce(v)),y&&!y[k]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[k]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(B,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(B," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=N[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[k]?i.push(a):o.push(a);(a=N(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=S+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t===C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument===C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(S=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(S=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=k.split("").sort(D).join("")===k,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);k.find=h,k.expr=h.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=h.uniqueSort,k.text=h.getText,k.isXMLDoc=h.isXML,k.contains=h.contains,k.escapeSelector=h.escape;var T=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&k(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},N=k.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?k.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?k.grep(e,function(e){return e===n!==r}):"string"!=typeof n?k.grep(e,function(e){return-1<i.call(n,e)!==r}):k.filter(n,e,r)}k.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?k.find.matchesSelector(r,e)?[r]:[]:k.find.matches(e,k.grep(t,function(e){return 1===e.nodeType}))},k.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(k(e).filter(function(){for(t=0;t<r;t++)if(k.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)k.find(e,i[t],n);return 1<r?k.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&N.test(e)?k(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),D.test(r[1])&&k.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,q=k(E);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}k.fn.extend({has:function(e){var t=k(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(k.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&k(e);if(!N.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&k.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?k.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(k(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return"undefined"!=typeof e.contentDocument?e.contentDocument:(A(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},function(r,i){k.fn[r]=function(e,t){var n=k.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=k.filter(t,n)),1<this.length&&(O[r]||k.uniqueSort(n),H.test(r)&&n.reverse()),this.pushStack(n)}});var R=/[^\x20\t\r\n\f]+/g;function M(e){return e}function I(e){throw e}function W(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}k.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},k.each(e.match(R)||[],function(e,t){n[t]=!0}),n):k.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){k.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return k.each(arguments,function(e,t){var n;while(-1<(n=k.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<k.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},k.extend({Deferred:function(e){var o=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return k.Deferred(function(r){k.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,M,s),l(u,o,I,s)):(u++,t.call(e,l(u,o,M,s),l(u,o,I,s),l(u,o,M,o.notifyWith))):(a!==M&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==I&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(k.Deferred.getStackHook&&(t.stackTrace=k.Deferred.getStackHook()),C.setTimeout(t))}}return k.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:M,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:M)),o[2][3].add(l(0,e,m(n)?n:I))}).promise()},promise:function(e){return null!=e?k.extend(e,a):a}},s={};return k.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=k.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(W(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)W(i[t],a(t),o.reject);return o.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&$.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){C.setTimeout(function(){throw e})};var F=k.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),k.ready()}k.fn.ready=function(e){return F.then(e)["catch"](function(e){k.readyException(e)}),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0)!==e&&0<--k.readyWait||F.resolveWith(E,[k])}}),k.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(k.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var _=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)_(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(k(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},z=/^-ms-/,U=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function V(e){return e.replace(z,"ms-").replace(U,X)}var G=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=k.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[V(t)]=n;else for(r in t)i[V(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(V):(t=V(t))in r?[t]:t.match(R)||[]).length;while(n--)delete r[t[n]]}(void 0===t||k.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var Q=new Y,J=new Y,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function ee(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:K.test(i)?JSON.parse(i):i)}catch(e){}J.set(e,t,n)}else n=void 0;return n}k.extend({hasData:function(e){return J.hasData(e)||Q.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),k.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=J.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=V(r.slice(5)),ee(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){J.set(this,n)}):_(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=J.get(o,n))?t:void 0!==(t=ee(o,n))?t:void 0;this.each(function(){J.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){J.remove(this,e)})}}),k.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=k.queue(e,t),r=n.length,i=n.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){k.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:k.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),k.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?k.queue(this[0],t):void 0===n?this:this.each(function(){var e=k.queue(this,t,n);k._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&k.dequeue(this,t)})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=k.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],ie=E.documentElement,oe=function(e){return k.contains(e.ownerDocument,e)},ae={composed:!0};ie.getRootNode&&(oe=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===k.css(e,"display")},ue=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function le(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return k.css(e,t,"")},u=s(),l=n&&n[3]||(k.cssNumber[t]?"":"px"),c=e.nodeType&&(k.cssNumber[t]||"px"!==l&&+u)&&ne.exec(k.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)k.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,k.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ce={};function fe(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Q.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&se(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ce[s])||(o=a.body.appendChild(a.createElement(s)),u=k.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ce[s]=u)))):"none"!==n&&(l[c]="none",Q.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}k.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){se(this)?k(this).show():k(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?k.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var me,xe,be=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))k.merge(p,o.nodeType?[o]:o);else if(be.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+k.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;k.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<k.inArray(o,r))i&&i.push(o);else if(l=oe(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}me=E.createDocumentFragment().appendChild(E.createElement("div")),(xe=E.createElement("input")).setAttribute("type","radio"),xe.setAttribute("checked","checked"),xe.setAttribute("name","t"),me.appendChild(xe),y.checkClone=me.cloneNode(!0).cloneNode(!0).lastChild.checked,me.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!me.cloneNode(!0).lastChild.defaultValue;var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Se(){return!1}function Ne(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Se;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return k().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=k.guid++)),e.each(function(){k.event.add(this,t,i,r,n)})}function De(e,i,o){o?(Q.set(e,i,!1),k.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Q.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(k.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Q.set(this,i,r),t=o(this,i),this[i](),r!==(n=Q.get(this,i))||t?Q.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Q.set(this,i,{value:k.event.trigger(k.extend(r[0],k.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,i)&&k.event.add(e,i,ke)}k.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.get(t);if(v){n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(ie,i),n.guid||(n.guid=k.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof k&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(R)||[""]).length;while(l--)d=g=(s=Ee.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=k.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=k.event.special[d]||{},c=k.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),k.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.hasData(e)&&Q.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(R)||[""]).length;while(l--)if(d=g=(s=Ee.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=k.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||k.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)k.event.remove(e,d+t[l],n,r,!0);k.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=k.event.fix(e),u=new Array(arguments.length),l=(Q.get(this,"events")||{})[s.type]||[],c=k.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){a=k.event.handlers.call(this,s,l),t=0;while((i=a[t++])&&!s.isPropagationStopped()){s.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!s.isImmediatePropagationStopped())s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<k(i,this).index(l):k.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click",ke),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Q.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},function(e,t){k.event.special[e]={setup:function(){return De(this,e,Ne),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){k.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||k.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),k.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,k(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each(function(){k.event.remove(this,e,n,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qe=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),a=Q.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)k.event.add(t,i,l[i][n]);J.hasData(e)&&(s=J.access(e),u=k.extend({},s),J.set(t,u))}}function Ie(n,r,i,o){r=g.apply([],r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Le.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Ie(t,r,i,o)});if(f&&(t=(e=we(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=k.map(ve(e,"script"),Pe)).length;c<f;c++)u=e,c!==p&&(u=k.clone(u,!0,!0),s&&k.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,k.map(a,Re),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Q.access(u,"globalEval")&&k.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?k._evalUrl&&!u.noModule&&k._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):b(u.textContent.replace(He,""),u,l))}return n}function We(e,t,n){for(var r,i=t?k.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(ve(r)),r.parentNode&&(n&&oe(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}k.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=oe(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Me(o[r],a[r]);else Me(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=k.event.special,o=0;void 0!==(n=e[o]);o++)if(G(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),k.fn.extend({detach:function(e){return We(this,e,!0)},remove:function(e){return We(this,e)},text:function(e){return _(this,function(e){return void 0===e?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ie(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)})},prepend:function(){return Ie(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return k.clone(this,e,t)})},html:function(e){return _(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(k.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Ie(this,arguments,function(e){var t=this.parentNode;k.inArray(this,n)<0&&(k.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){k.fn[e]=function(e){for(var t,n=[],r=k(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),k(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var $e=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Fe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Be=new RegExp(re.join("|"),"i");function _e(e,t,n){var r,i,o,a,s=e.style;return(n=n||Fe(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe(e)||(a=k.style(e,t)),!y.pixelBoxStyles()&&$e.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(s).appendChild(u);var e=C.getComputedStyle(u);n="1%"!==e.top,a=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),r=36===t(e.width),u.style.position="absolute",i=12===t(u.offsetWidth/3),ie.removeChild(s),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s=E.createElement("div"),u=E.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),i}}))}();var Ue=["Webkit","Moz","ms"],Xe=E.createElement("div").style,Ve={};function Ge(e){var t=k.cssProps[e]||Ve[e];return t||(e in Xe?e:Ve[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Ue.length;while(n--)if((e=Ue[n]+t)in Xe)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Qe=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"};function Ze(e,t,n){var r=ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=k.css(e,n+re[a],!0,i)),r?("content"===n&&(u-=k.css(e,"padding"+re[a],!0,i)),"margin"!==n&&(u-=k.css(e,"border"+re[a]+"Width",!0,i))):(u+=k.css(e,"padding"+re[a],!0,i),"padding"!==n?u+=k.css(e,"border"+re[a]+"Width",!0,i):s+=k.css(e,"border"+re[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function tt(e,t,n){var r=Fe(e),i=(!y.boxSizingReliable()||n)&&"border-box"===k.css(e,"boxSizing",!1,r),o=i,a=_e(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===k.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===k.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+et(e,t,n||(i?"border":"content"),o,r,a)+"px"}function nt(e,t,n,r,i){return new nt.prototype.init(e,t,n,r,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_e(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=V(t),u=Qe.test(t),l=e.style;if(u||(t=Ge(s)),a=k.cssHooks[t]||k.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=ne.exec(n))&&i[1]&&(n=le(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=V(t);return Qe.test(t)||(t=Ge(s)),(a=k.cssHooks[t]||k.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=_e(e,t,r)),"normal"===i&&t in Ke&&(i=Ke[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],function(e,u){k.cssHooks[u]={get:function(e,t,n){if(t)return!Ye.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,u,n):ue(e,Je,function(){return tt(e,u,n)})},set:function(e,t,n){var r,i=Fe(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===k.css(e,"boxSizing",!1,i),s=n?et(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-et(e,u,"border",!1,i)-.5)),s&&(r=ne.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=k.css(e,u)),Ze(0,t,s)}}}),k.cssHooks.marginLeft=ze(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(_e(e,"marginLeft"))||e.getBoundingClientRect().left-ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(i,o){k.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+re[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(k.cssHooks[i+o].set=Ze)}),k.fn.extend({css:function(e,t){return _(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Fe(e),i=t.length;a<i;a++)o[t[a]]=k.css(e,t[a],!1,r);return o}return void 0!==n?k.style(e,t,n):k.css(e,t)},e,t,1<arguments.length)}}),((k.Tween=nt).prototype={constructor:nt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}}).init.prototype=nt.prototype,(nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||!k.cssHooks[e.prop]&&null==e.elem.style[Ge(e.prop)]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=nt.prototype.init,k.fx.step={};var rt,it,ot,at,st=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function lt(){it&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(lt):C.setTimeout(lt,k.fx.interval),k.fx.tick())}function ct(){return C.setTimeout(function(){rt=void 0}),rt=Date.now()}function ft(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=re[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function pt(e,t,n){for(var r,i=(dt.tweeners[t]||[]).concat(dt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function dt(o,e,t){var n,a,r=0,i=dt.prefilters.length,s=k.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=rt||ct(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},t),originalProperties:e,originalOptions:t,startTime:rt||ct(),duration:t.duration,tweens:[],createTween:function(e,t){var n=k.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=V(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=k.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=dt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(k._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return k.map(c,pt,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),k.fx.timer(k.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}k.Animation=k.extend(dt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(R);for(var n,r=0,i=e.length;r<i;r++)n=e[r],dt.tweeners[n]=dt.tweeners[n]||[],dt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&se(e),v=Q.get(e,"fxshow");for(r in n.queue||(null==(a=k._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,k.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],st.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||k.style(e,r)}if((u=!k.isEmptyObject(t))||!k.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Q.get(e,"display")),"none"===(c=k.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=k.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===k.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Q.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&fe([e],!0),p.done(function(){for(r in g||fe([e]),Q.remove(e,"fxshow"),d)k.style(e,r,d[r])})),u=pt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?dt.prefilters.unshift(e):dt.prefilters.push(e)}}),k.speed=function(e,t,n){var r=e&&"object"==typeof e?k.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(e,t,n,r){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=k.isEmptyObject(t),o=k.speed(e,n,r),a=function(){var e=dt(this,k.extend({},t),o);(i||Q.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=k.timers,r=Q.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&ut.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||k.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Q.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=k.timers,o=n?n.length:0;for(t.finish=!0,k.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),k.each(["toggle","show","hide"],function(e,r){var i=k.fn[r];k.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ft(r,!0),e,t,n)}}),k.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){k.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),k.timers=[],k.fx.tick=function(){var e,t=0,n=k.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||k.fx.stop(),rt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){it||(it=!0,lt())},k.fx.stop=function(){it=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(r,e){return r=k.fx&&k.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},ot=E.createElement("input"),at=E.createElement("select").appendChild(E.createElement("option")),ot.type="checkbox",y.checkOn=""!==ot.value,y.optSelected=at.selected,(ot=E.createElement("input")).value="t",ot.type="radio",y.radioValue="t"===ot.value;var ht,gt=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return _(this,k.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}}),k.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?k.prop(e,t,n):(1===o&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?ht:void 0)),void 0!==n?null===n?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=k.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(R);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ht={set:function(e,t,n){return!1===t?k.removeAttr(e,n):e.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var a=gt[t]||k.find.attr;gt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=gt[o],gt[o]=r,r=null!=a(e,t,n)?o:null,gt[o]=i),r}});var vt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;function mt(e){return(e.match(R)||[]).join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}k.fn.extend({prop:function(e,t){return _(this,k.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[k.propFix[e]||e]})}}),k.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).addClass(t.call(this,e,xt(this)))});if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).removeClass(t.call(this,e,xt(this)))});if(!arguments.length)return this.attr("class","");if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){k(this).toggleClass(i.call(this,e,xt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=k(this),r=bt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=xt(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+mt(xt(n))+" ").indexOf(t))return!0;return!1}});var wt=/\r/g;k.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,k(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=k.map(t,function(e){return null==e?"":e+""})),(r=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=k.valHooks[t.type]||k.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(wt,""):null==e?"":e:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:mt(k.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=k(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=k.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<k.inArray(k.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<k.inArray(k(e).val(),t)}},y.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var Tt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!Tt.test(d+k.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[k.expando]?e:new k.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:k.makeArray(t,[e]),c=k.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,Tt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Q.get(o,"events")||{})[e.type]&&Q.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&G(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!G(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),k.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Ct),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Ct),k.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=k.extend(new k.Event,n,{type:e,isSimulated:!0});k.event.trigger(r,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return k.event.trigger(e,t,n,!0)}}),y.focusin||k.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){k.event.simulate(r,e.target,k.event.fix(e))};k.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=Q.access(e,r);t||e.addEventListener(n,i,!0),Q.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Q.access(e,r)-1;t?Q.access(e,r,t):(e.removeEventListener(n,i,!0),Q.remove(e,r))}}});var Et=C.location,kt=Date.now(),St=/\?/;k.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+e),t};var Nt=/\[\]$/,At=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function qt(n,e,r,i){var t;if(Array.isArray(e))k.each(e,function(e,t){r||Nt.test(n)?i(n,t):qt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)qt(n+"["+t+"]",e[t],r,i)}k.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,function(){i(this.name,this.value)});else for(n in e)qt(n,e[n],t,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&jt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:n.replace(At,"\r\n")}}).get()}});var Lt=/%20/g,Ht=/#.*$/,Ot=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,Mt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Ft=E.createElement("a");function Bt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(R)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function _t(t,i,o,a){var s={},u=t===Wt;function l(e){var r;return s[e]=!0,k.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function zt(e,t){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&k.extend(!0,e,r),e}Ft.href=Et.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,k.ajaxSettings),t):zt(k.ajaxSettings,e)},ajaxPrefilter:Bt(It),ajaxTransport:Bt(Wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=k.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?k(y):k.event,x=k.Deferred(),b=k.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Pt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace(Mt,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(R)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Ft.protocol+"//"+Ft.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=k.param(v.data,v.traditional)),_t(It,v,t,T),h)return T;for(i in(g=k.event&&v.global)&&0==k.active++&&k.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Rt.test(v.type),f=v.url.replace(Ht,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Lt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(St.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Ot,"$1"),o=(St.test(f)?"&":"?")+"_="+kt+++o),v.url=f+o),v.ifModified&&(k.lastModified[f]&&T.setRequestHeader("If-Modified-Since",k.lastModified[f]),k.etag[f]&&T.setRequestHeader("If-None-Match",k.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+$t+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=_t(Wt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(k.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(k.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--k.active||k.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return k.get(e,t,n,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],function(e,i){k[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),k.ajax(k.extend({url:e,type:i,dataType:r,data:t,success:n},k.isPlainObject(e)&&e))}}),k._evalUrl=function(e,t){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t)}})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){k(this).wrapInner(n.call(this,e))}):this.each(function(){var e=k(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){k(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Xt=k.ajaxSettings.xhr();y.cors=!!Xt&&"withCredentials"in Xt,y.ajax=Xt=!!Xt,k.ajaxTransport(function(i){var o,a;if(y.cors||Xt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Ut[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),k.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),k.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=k("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Vt,Gt=[],Yt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||k.expando+"_"+kt++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Yt,"$1"+r):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||k.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?k(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Vt=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),k.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=D.exec(e))?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=mt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?k("<div>").append(k.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}}),k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length},k.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=k.css(e,"position"),c=k(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=k.css(e,"top"),u=k.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,k.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){k.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===k.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(r,"marginTop",!0),left:t.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===k.css(e,"position"))e=e.offsetParent;return e||ie})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;k.fn[t]=function(e){return _(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),k.each(["top","left"],function(e,n){k.cssHooks[n]=ze(y.pixelPosition,function(e,t){if(t)return t=_e(e,n),$e.test(t)?k(e).position()[n]+"px":t})}),k.each({Height:"height",Width:"width"},function(a,s){k.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){k.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return _(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?k.css(e,t,i):k.style(e,t,n,i)},s,n?e:void 0,n)}})}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){k.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),k.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),k.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=A,k.isFunction=m,k.isWindow=x,k.camelCase=V,k.type=w,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return k});var Qt=C.jQuery,Jt=C.$;return k.noConflict=function(e){return C.$===k&&(C.$=Jt),e&&C.jQuery===k&&(C.jQuery=Qt),k},e||(C.jQuery=C.$=k),k});

/**
 * State-based routing for AngularJS 1.x
 * NOTICE: This monolithic bundle also bundles the @uirouter/core code.
 *         This causes it to be incompatible with plugins that depend on @uirouter/core.
 *         We recommend switching to the ui-router-core.js and ui-router-angularjs.js bundles instead.
 *         For more information, see https://ui-router.github.io/blog/uirouter-for-angularjs-umd-bundles
 * @version v1.0.25
 * @link https://ui-router.github.io
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('angular')) :
    typeof define === 'function' && define.amd ? define(['exports', 'angular'], factory) :
    (global = global || self, factory(global['@uirouter/angularjs'] = {}, global.angular));
}(this, (function (exports, ng_from_import) { 'use strict';

    /** @publicapi @module ng1 */ /** */
    /** @hidden */ var ng_from_global = angular;
    /** @hidden */ var ng = ng_from_import && ng_from_import.module ? ng_from_import : ng_from_global;

    /**
     * Higher order functions
     *
     * These utility functions are exported, but are subject to change without notice.
     *
     * @module common_hof
     */ /** */
    var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
        for (var r = Array(s), k = 0, i = 0; i < il; i++)
            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
                r[k] = a[j];
        return r;
    };
    /**
     * Returns a new function for [Partial Application](https://en.wikipedia.org/wiki/Partial_application) of the original function.
     *
     * Given a function with N parameters, returns a new function that supports partial application.
     * The new function accepts anywhere from 1 to N parameters.  When that function is called with M parameters,
     * where M is less than N, it returns a new function that accepts the remaining parameters.  It continues to
     * accept more parameters until all N parameters have been supplied.
     *
     *
     * This contrived example uses a partially applied function as an predicate, which returns true
     * if an object is found in both arrays.
     * @example
     * ```
     * // returns true if an object is in both of the two arrays
     * function inBoth(array1, array2, object) {
     *   return array1.indexOf(object) !== -1 &&
     *          array2.indexOf(object) !== 1;
     * }
     * let obj1, obj2, obj3, obj4, obj5, obj6, obj7
     * let foos = [obj1, obj3]
     * let bars = [obj3, obj4, obj5]
     *
     * // A curried "copy" of inBoth
     * let curriedInBoth = curry(inBoth);
     * // Partially apply both the array1 and array2
     * let inFoosAndBars = curriedInBoth(foos, bars);
     *
     * // Supply the final argument; since all arguments are
     * // supplied, the original inBoth function is then called.
     * let obj1InBoth = inFoosAndBars(obj1); // false
     *
     * // Use the inFoosAndBars as a predicate.
     * // Filter, on each iteration, supplies the final argument
     * let allObjs = [ obj1, obj2, obj3, obj4, obj5, obj6, obj7 ];
     * let foundInBoth = allObjs.filter(inFoosAndBars); // [ obj3 ]
     *
     * ```
     *
     * @param fn
     * @returns {*|function(): (*|any)}
     */
    function curry(fn) {
        return function curried() {
            if (arguments.length >= fn.length) {
                return fn.apply(this, arguments);
            }
            var args = Array.prototype.slice.call(arguments);
            return curried.bind.apply(curried, __spreadArrays([this], args));
        };
    }
    /**
     * Given a varargs list of functions, returns a function that composes the argument functions, right-to-left
     * given: f(x), g(x), h(x)
     * let composed = compose(f,g,h)
     * then, composed is: f(g(h(x)))
     */
    function compose() {
        var args = arguments;
        var start = args.length - 1;
        return function () {
            var i = start, result = args[start].apply(this, arguments);
            while (i--)
                result = args[i].call(this, result);
            return result;
        };
    }
    /**
     * Given a varargs list of functions, returns a function that is composes the argument functions, left-to-right
     * given: f(x), g(x), h(x)
     * let piped = pipe(f,g,h);
     * then, piped is: h(g(f(x)))
     */
    function pipe() {
        var funcs = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            funcs[_i] = arguments[_i];
        }
        return compose.apply(null, [].slice.call(arguments).reverse());
    }
    /**
     * Given a property name, returns a function that returns that property from an object
     * let obj = { foo: 1, name: "blarg" };
     * let getName = prop("name");
     * getName(obj) === "blarg"
     */
    var prop = function (name) { return function (obj) { return obj && obj[name]; }; };
    /**
     * Given a property name and a value, returns a function that returns a boolean based on whether
     * the passed object has a property that matches the value
     * let obj = { foo: 1, name: "blarg" };
     * let getName = propEq("name", "blarg");
     * getName(obj) === true
     */
    var propEq = curry(function (name, _val, obj) { return obj && obj[name] === _val; });
    /**
     * Given a dotted property name, returns a function that returns a nested property from an object, or undefined
     * let obj = { id: 1, nestedObj: { foo: 1, name: "blarg" }, };
     * let getName = prop("nestedObj.name");
     * getName(obj) === "blarg"
     * let propNotFound = prop("this.property.doesnt.exist");
     * propNotFound(obj) === undefined
     */
    var parse = function (name) { return pipe.apply(null, name.split('.').map(prop)); };
    /**
     * Given a function that returns a truthy or falsey value, returns a
     * function that returns the opposite (falsey or truthy) value given the same inputs
     */
    var not = function (fn) { return function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        return !fn.apply(null, args);
    }; };
    /**
     * Given two functions that return truthy or falsey values, returns a function that returns truthy
     * if both functions return truthy for the given arguments
     */
    function and(fn1, fn2) {
        return function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return fn1.apply(null, args) && fn2.apply(null, args);
        };
    }
    /**
     * Given two functions that return truthy or falsey values, returns a function that returns truthy
     * if at least one of the functions returns truthy for the given arguments
     */
    function or(fn1, fn2) {
        return function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return fn1.apply(null, args) || fn2.apply(null, args);
        };
    }
    /**
     * Check if all the elements of an array match a predicate function
     *
     * @param fn1 a predicate function `fn1`
     * @returns a function which takes an array and returns true if `fn1` is true for all elements of the array
     */
    var all = function (fn1) { return function (arr) { return arr.reduce(function (b, x) { return b && !!fn1(x); }, true); }; };
    // tslint:disable-next-line:variable-name
    var any = function (fn1) { return function (arr) { return arr.reduce(function (b, x) { return b || !!fn1(x); }, false); }; };
    /** Given a class, returns a Predicate function that returns true if the object is of that class */
    var is = function (ctor) { return function (obj) {
        return (obj != null && obj.constructor === ctor) || obj instanceof ctor;
    }; };
    /** Given a value, returns a Predicate function that returns true if another value is === equal to the original value */
    var eq = function (value) { return function (other) { return value === other; }; };
    /** Given a value, returns a function which returns the value */
    var val = function (v) { return function () { return v; }; };
    function invoke(fnName, args) {
        return function (obj) { return obj[fnName].apply(obj, args); };
    }
    /**
     * Sorta like Pattern Matching (a functional programming conditional construct)
     *
     * See http://c2.com/cgi/wiki?PatternMatching
     *
     * This is a conditional construct which allows a series of predicates and output functions
     * to be checked and then applied.  Each predicate receives the input.  If the predicate
     * returns truthy, then its matching output function (mapping function) is provided with
     * the input and, then the result is returned.
     *
     * Each combination (2-tuple) of predicate + output function should be placed in an array
     * of size 2: [ predicate, mapFn ]
     *
     * These 2-tuples should be put in an outer array.
     *
     * @example
     * ```
     *
     * // Here's a 2-tuple where the first element is the isString predicate
     * // and the second element is a function that returns a description of the input
     * let firstTuple = [ angular.isString, (input) => `Heres your string ${input}` ];
     *
     * // Second tuple: predicate "isNumber", mapfn returns a description
     * let secondTuple = [ angular.isNumber, (input) => `(${input}) That's a number!` ];
     *
     * let third = [ (input) => input === null,  (input) => `Oh, null...` ];
     *
     * let fourth = [ (input) => input === undefined,  (input) => `notdefined` ];
     *
     * let descriptionOf = pattern([ firstTuple, secondTuple, third, fourth ]);
     *
     * console.log(descriptionOf(undefined)); // 'notdefined'
     * console.log(descriptionOf(55)); // '(55) That's a number!'
     * console.log(descriptionOf("foo")); // 'Here's your string foo'
     * ```
     *
     * @param struct A 2D array.  Each element of the array should be an array, a 2-tuple,
     * with a Predicate and a mapping/output function
     * @returns {function(any): *}
     */
    function pattern(struct) {
        return function (x) {
            for (var i = 0; i < struct.length; i++) {
                if (struct[i][0](x))
                    return struct[i][1](x);
            }
        };
    }

    /** Predicates
     *
     * These predicates return true/false based on the input.
     * Although these functions are exported, they are subject to change without notice.
     *
     * @module common_predicates
     */ /** */
    var toStr = Object.prototype.toString;
    var tis = function (t) { return function (x) { return typeof x === t; }; };
    var isUndefined = tis('undefined');
    var isDefined = not(isUndefined);
    var isNull = function (o) { return o === null; };
    var isNullOrUndefined = or(isNull, isUndefined);
    var isFunction = tis('function');
    var isNumber = tis('number');
    var isString = tis('string');
    var isObject = function (x) { return x !== null && typeof x === 'object'; };
    var isArray = Array.isArray;
    var isDate = (function (x) { return toStr.call(x) === '[object Date]'; });
    var isRegExp = (function (x) { return toStr.call(x) === '[object RegExp]'; });
    /**
     * Predicate which checks if a value is injectable
     *
     * A value is "injectable" if it is a function, or if it is an ng1 array-notation-style array
     * where all the elements in the array are Strings, except the last one, which is a Function
     */
    function isInjectable(val) {
        if (isArray(val) && val.length) {
            var head = val.slice(0, -1), tail = val.slice(-1);
            return !(head.filter(not(isString)).length || tail.filter(not(isFunction)).length);
        }
        return isFunction(val);
    }
    /**
     * Predicate which checks if a value looks like a Promise
     *
     * It is probably a Promise if it's an object, and it has a `then` property which is a Function
     */
    var isPromise = and(isObject, pipe(prop('then'), isFunction));

    var noImpl = function (fnname) { return function () {
        throw new Error("No implementation for " + fnname + ". The framework specific code did not implement this method.");
    }; };
    var makeStub = function (service, methods) {
        return methods.reduce(function (acc, key) { return ((acc[key] = noImpl(service + "." + key + "()")), acc); }, {});
    };
    var services = {
        $q: undefined,
        $injector: undefined,
    };

    var __spreadArrays$1 = (undefined && undefined.__spreadArrays) || function () {
        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
        for (var r = Array(s), k = 0, i = 0; i < il; i++)
            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
                r[k] = a[j];
        return r;
    };
    var root = (typeof self === 'object' && self.self === self && self) ||
        (typeof global === 'object' && global.global === global && global) ||
        undefined;
    var angular$1 = root.angular || {};
    var fromJson = angular$1.fromJson || JSON.parse.bind(JSON);
    var toJson = angular$1.toJson || JSON.stringify.bind(JSON);
    var forEach = angular$1.forEach || _forEach;
    var extend = Object.assign || _extend;
    var equals = angular$1.equals || _equals;
    function identity(x) {
        return x;
    }
    function noop() { }
    /**
     * Builds proxy functions on the `to` object which pass through to the `from` object.
     *
     * For each key in `fnNames`, creates a proxy function on the `to` object.
     * The proxy function calls the real function on the `from` object.
     *
     *
     * #### Example:
     * This example creates an new class instance whose functions are prebound to the new'd object.
     * ```js
     * class Foo {
     *   constructor(data) {
     *     // Binds all functions from Foo.prototype to 'this',
     *     // then copies them to 'this'
     *     bindFunctions(Foo.prototype, this, this);
     *     this.data = data;
     *   }
     *
     *   log() {
     *     console.log(this.data);
     *   }
     * }
     *
     * let myFoo = new Foo([1,2,3]);
     * var logit = myFoo.log;
     * logit(); // logs [1, 2, 3] from the myFoo 'this' instance
     * ```
     *
     * #### Example:
     * This example creates a bound version of a service function, and copies it to another object
     * ```
     *
     * var SomeService = {
     *   this.data = [3, 4, 5];
     *   this.log = function() {
     *     console.log(this.data);
     *   }
     * }
     *
     * // Constructor fn
     * function OtherThing() {
     *   // Binds all functions from SomeService to SomeService,
     *   // then copies them to 'this'
     *   bindFunctions(SomeService, this, SomeService);
     * }
     *
     * let myOtherThing = new OtherThing();
     * myOtherThing.log(); // logs [3, 4, 5] from SomeService's 'this'
     * ```
     *
     * @param source A function that returns the source object which contains the original functions to be bound
     * @param target A function that returns the target object which will receive the bound functions
     * @param bind A function that returns the object which the functions will be bound to
     * @param fnNames The function names which will be bound (Defaults to all the functions found on the 'from' object)
     * @param latebind If true, the binding of the function is delayed until the first time it's invoked
     */
    function createProxyFunctions(source, target, bind, fnNames, latebind) {
        if (latebind === void 0) { latebind = false; }
        var bindFunction = function (fnName) { return source()[fnName].bind(bind()); };
        var makeLateRebindFn = function (fnName) {
            return function lateRebindFunction() {
                target[fnName] = bindFunction(fnName);
                return target[fnName].apply(null, arguments);
            };
        };
        fnNames = fnNames || Object.keys(source());
        return fnNames.reduce(function (acc, name) {
            acc[name] = latebind ? makeLateRebindFn(name) : bindFunction(name);
            return acc;
        }, target);
    }
    /**
     * prototypal inheritance helper.
     * Creates a new object which has `parent` object as its prototype, and then copies the properties from `extra` onto it
     */
    var inherit = function (parent, extra) { return extend(Object.create(parent), extra); };
    /** Given an array, returns true if the object is found in the array, (using indexOf) */
    var inArray = curry(_inArray);
    function _inArray(array, obj) {
        return array.indexOf(obj) !== -1;
    }
    /**
     * Given an array, and an item, if the item is found in the array, it removes it (in-place).
     * The same array is returned
     */
    var removeFrom = curry(_removeFrom);
    function _removeFrom(array, obj) {
        var idx = array.indexOf(obj);
        if (idx >= 0)
            array.splice(idx, 1);
        return array;
    }
    /** pushes a values to an array and returns the value */
    var pushTo = curry(_pushTo);
    function _pushTo(arr, val) {
        return arr.push(val), val;
    }
    /** Given an array of (deregistration) functions, calls all functions and removes each one from the source array */
    var deregAll = function (functions) {
        return functions.slice().forEach(function (fn) {
            typeof fn === 'function' && fn();
            removeFrom(functions, fn);
        });
    };
    /**
     * Applies a set of defaults to an options object.  The options object is filtered
     * to only those properties of the objects in the defaultsList.
     * Earlier objects in the defaultsList take precedence when applying defaults.
     */
    function defaults(opts) {
        var defaultsList = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            defaultsList[_i - 1] = arguments[_i];
        }
        var defaultVals = extend.apply(void 0, __spreadArrays$1([{}], defaultsList.reverse()));
        return extend(defaultVals, pick(opts || {}, Object.keys(defaultVals)));
    }
    /** Reduce function that merges each element of the list into a single object, using extend */
    var mergeR = function (memo, item) { return extend(memo, item); };
    /**
     * Finds the common ancestor path between two states.
     *
     * @param {Object} first The first state.
     * @param {Object} second The second state.
     * @return {Array} Returns an array of state names in descending order, not including the root.
     */
    function ancestors(first, second) {
        var path = [];
        // tslint:disable-next-line:forin
        for (var n in first.path) {
            if (first.path[n] !== second.path[n])
                break;
            path.push(first.path[n]);
        }
        return path;
    }
    /**
     * Return a copy of the object only containing the whitelisted properties.
     *
     * #### Example:
     * ```
     * var foo = { a: 1, b: 2, c: 3 };
     * var ab = pick(foo, ['a', 'b']); // { a: 1, b: 2 }
     * ```
     * @param obj the source object
     * @param propNames an Array of strings, which are the whitelisted property names
     */
    function pick(obj, propNames) {
        var objCopy = {};
        for (var _prop in obj) {
            if (propNames.indexOf(_prop) !== -1) {
                objCopy[_prop] = obj[_prop];
            }
        }
        return objCopy;
    }
    /**
     * Return a copy of the object omitting the blacklisted properties.
     *
     * @example
     * ```
     *
     * var foo = { a: 1, b: 2, c: 3 };
     * var ab = omit(foo, ['a', 'b']); // { c: 3 }
     * ```
     * @param obj the source object
     * @param propNames an Array of strings, which are the blacklisted property names
     */
    function omit(obj, propNames) {
        return Object.keys(obj)
            .filter(not(inArray(propNames)))
            .reduce(function (acc, key) { return ((acc[key] = obj[key]), acc); }, {});
    }
    /**
     * Maps an array, or object to a property (by name)
     */
    function pluck(collection, propName) {
        return map(collection, prop(propName));
    }
    /** Filters an Array or an Object's properties based on a predicate */
    function filter(collection, callback) {
        var arr = isArray(collection), result = arr ? [] : {};
        var accept = arr ? function (x) { return result.push(x); } : function (x, key) { return (result[key] = x); };
        forEach(collection, function (item, i) {
            if (callback(item, i))
                accept(item, i);
        });
        return result;
    }
    /** Finds an object from an array, or a property of an object, that matches a predicate */
    function find(collection, callback) {
        var result;
        forEach(collection, function (item, i) {
            if (result)
                return;
            if (callback(item, i))
                result = item;
        });
        return result;
    }
    /** Given an object, returns a new object, where each property is transformed by the callback function */
    var mapObj = map;
    /** Maps an array or object properties using a callback function */
    function map(collection, callback, target) {
        target = target || (isArray(collection) ? [] : {});
        forEach(collection, function (item, i) { return (target[i] = callback(item, i)); });
        return target;
    }
    /**
     * Given an object, return its enumerable property values
     *
     * @example
     * ```
     *
     * let foo = { a: 1, b: 2, c: 3 }
     * let vals = values(foo); // [ 1, 2, 3 ]
     * ```
     */
    var values = function (obj) { return Object.keys(obj).map(function (key) { return obj[key]; }); };
    /**
     * Reduce function that returns true if all of the values are truthy.
     *
     * @example
     * ```
     *
     * let vals = [ 1, true, {}, "hello world"];
     * vals.reduce(allTrueR, true); // true
     *
     * vals.push(0);
     * vals.reduce(allTrueR, true); // false
     * ```
     */
    var allTrueR = function (memo, elem) { return memo && elem; };
    /**
     * Reduce function that returns true if any of the values are truthy.
     *
     *  * @example
     * ```
     *
     * let vals = [ 0, null, undefined ];
     * vals.reduce(anyTrueR, true); // false
     *
     * vals.push("hello world");
     * vals.reduce(anyTrueR, true); // true
     * ```
     */
    var anyTrueR = function (memo, elem) { return memo || elem; };
    /**
     * Reduce function which un-nests a single level of arrays
     * @example
     * ```
     *
     * let input = [ [ "a", "b" ], [ "c", "d" ], [ [ "double", "nested" ] ] ];
     * input.reduce(unnestR, []) // [ "a", "b", "c", "d", [ "double, "nested" ] ]
     * ```
     */
    var unnestR = function (memo, elem) { return memo.concat(elem); };
    /**
     * Reduce function which recursively un-nests all arrays
     *
     * @example
     * ```
     *
     * let input = [ [ "a", "b" ], [ "c", "d" ], [ [ "double", "nested" ] ] ];
     * input.reduce(unnestR, []) // [ "a", "b", "c", "d", "double, "nested" ]
     * ```
     */
    var flattenR = function (memo, elem) {
        return isArray(elem) ? memo.concat(elem.reduce(flattenR, [])) : pushR(memo, elem);
    };
    /**
     * Reduce function that pushes an object to an array, then returns the array.
     * Mostly just for [[flattenR]] and [[uniqR]]
     */
    function pushR(arr, obj) {
        arr.push(obj);
        return arr;
    }
    /** Reduce function that filters out duplicates */
    var uniqR = function (acc, token) { return (inArray(acc, token) ? acc : pushR(acc, token)); };
    /**
     * Return a new array with a single level of arrays unnested.
     *
     * @example
     * ```
     *
     * let input = [ [ "a", "b" ], [ "c", "d" ], [ [ "double", "nested" ] ] ];
     * unnest(input) // [ "a", "b", "c", "d", [ "double, "nested" ] ]
     * ```
     */
    var unnest = function (arr) { return arr.reduce(unnestR, []); };
    /**
     * Return a completely flattened version of an array.
     *
     * @example
     * ```
     *
     * let input = [ [ "a", "b" ], [ "c", "d" ], [ [ "double", "nested" ] ] ];
     * flatten(input) // [ "a", "b", "c", "d", "double, "nested" ]
     * ```
     */
    var flatten = function (arr) { return arr.reduce(flattenR, []); };
    /**
     * Given a .filter Predicate, builds a .filter Predicate which throws an error if any elements do not pass.
     * @example
     * ```
     *
     * let isNumber = (obj) => typeof(obj) === 'number';
     * let allNumbers = [ 1, 2, 3, 4, 5 ];
     * allNumbers.filter(assertPredicate(isNumber)); //OK
     *
     * let oneString = [ 1, 2, 3, 4, "5" ];
     * oneString.filter(assertPredicate(isNumber, "Not all numbers")); // throws Error(""Not all numbers"");
     * ```
     */
    var assertPredicate = assertFn;
    /**
     * Given a .map function, builds a .map function which throws an error if any mapped elements do not pass a truthyness test.
     * @example
     * ```
     *
     * var data = { foo: 1, bar: 2 };
     *
     * let keys = [ 'foo', 'bar' ]
     * let values = keys.map(assertMap(key => data[key], "Key not found"));
     * // values is [1, 2]
     *
     * let keys = [ 'foo', 'bar', 'baz' ]
     * let values = keys.map(assertMap(key => data[key], "Key not found"));
     * // throws Error("Key not found")
     * ```
     */
    var assertMap = assertFn;
    function assertFn(predicateOrMap, errMsg) {
        if (errMsg === void 0) { errMsg = 'assert failure'; }
        return function (obj) {
            var result = predicateOrMap(obj);
            if (!result) {
                throw new Error(isFunction(errMsg) ? errMsg(obj) : errMsg);
            }
            return result;
        };
    }
    /**
     * Like _.pairs: Given an object, returns an array of key/value pairs
     *
     * @example
     * ```
     *
     * pairs({ foo: "FOO", bar: "BAR }) // [ [ "foo", "FOO" ], [ "bar": "BAR" ] ]
     * ```
     */
    var pairs = function (obj) { return Object.keys(obj).map(function (key) { return [key, obj[key]]; }); };
    /**
     * Given two or more parallel arrays, returns an array of tuples where
     * each tuple is composed of [ a[i], b[i], ... z[i] ]
     *
     * @example
     * ```
     *
     * let foo = [ 0, 2, 4, 6 ];
     * let bar = [ 1, 3, 5, 7 ];
     * let baz = [ 10, 30, 50, 70 ];
     * arrayTuples(foo, bar);       // [ [0, 1], [2, 3], [4, 5], [6, 7] ]
     * arrayTuples(foo, bar, baz);  // [ [0, 1, 10], [2, 3, 30], [4, 5, 50], [6, 7, 70] ]
     * ```
     */
    function arrayTuples() {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (args.length === 0)
            return [];
        var maxArrayLen = args.reduce(function (min, arr) { return Math.min(arr.length, min); }, 9007199254740991); // aka 2^53  1 aka Number.MAX_SAFE_INTEGER
        var result = [];
        var _loop_1 = function (i) {
            // This is a hot function
            // Unroll when there are 1-4 arguments
            switch (args.length) {
                case 1:
                    result.push([args[0][i]]);
                    break;
                case 2:
                    result.push([args[0][i], args[1][i]]);
                    break;
                case 3:
                    result.push([args[0][i], args[1][i], args[2][i]]);
                    break;
                case 4:
                    result.push([args[0][i], args[1][i], args[2][i], args[3][i]]);
                    break;
                default:
                    result.push(args.map(function (array) { return array[i]; }));
                    break;
            }
        };
        for (var i = 0; i < maxArrayLen; i++) {
            _loop_1(i);
        }
        return result;
    }
    /**
     * Reduce function which builds an object from an array of [key, value] pairs.
     *
     * Each iteration sets the key/val pair on the memo object, then returns the memo for the next iteration.
     *
     * Each keyValueTuple should be an array with values [ key: string, value: any ]
     *
     * @example
     * ```
     *
     * var pairs = [ ["fookey", "fooval"], ["barkey", "barval"] ]
     *
     * var pairsToObj = pairs.reduce((memo, pair) => applyPairs(memo, pair), {})
     * // pairsToObj == { fookey: "fooval", barkey: "barval" }
     *
     * // Or, more simply:
     * var pairsToObj = pairs.reduce(applyPairs, {})
     * // pairsToObj == { fookey: "fooval", barkey: "barval" }
     * ```
     */
    function applyPairs(memo, keyValTuple) {
        var key, value;
        if (isArray(keyValTuple))
            key = keyValTuple[0], value = keyValTuple[1];
        if (!isString(key))
            throw new Error('invalid parameters to applyPairs');
        memo[key] = value;
        return memo;
    }
    /** Get the last element of an array */
    function tail(arr) {
        return (arr.length && arr[arr.length - 1]) || undefined;
    }
    /**
     * shallow copy from src to dest
     */
    function copy(src, dest) {
        if (dest)
            Object.keys(dest).forEach(function (key) { return delete dest[key]; });
        if (!dest)
            dest = {};
        return extend(dest, src);
    }
    /** Naive forEach implementation works with Objects or Arrays */
    function _forEach(obj, cb, _this) {
        if (isArray(obj))
            return obj.forEach(cb, _this);
        Object.keys(obj).forEach(function (key) { return cb(obj[key], key); });
    }
    function _extend(toObj) {
        for (var i = 1; i < arguments.length; i++) {
            var obj = arguments[i];
            if (!obj)
                continue;
            var keys = Object.keys(obj);
            for (var j = 0; j < keys.length; j++) {
                toObj[keys[j]] = obj[keys[j]];
            }
        }
        return toObj;
    }
    function _equals(o1, o2) {
        if (o1 === o2)
            return true;
        if (o1 === null || o2 === null)
            return false;
        if (o1 !== o1 && o2 !== o2)
            return true; // NaN === NaN
        var t1 = typeof o1, t2 = typeof o2;
        if (t1 !== t2 || t1 !== 'object')
            return false;
        var tup = [o1, o2];
        if (all(isArray)(tup))
            return _arraysEq(o1, o2);
        if (all(isDate)(tup))
            return o1.getTime() === o2.getTime();
        if (all(isRegExp)(tup))
            return o1.toString() === o2.toString();
        if (all(isFunction)(tup))
            return true; // meh
        var predicates = [isFunction, isArray, isDate, isRegExp];
        if (predicates.map(any).reduce(function (b, fn) { return b || !!fn(tup); }, false))
            return false;
        var keys = {};
        // tslint:disable-next-line:forin
        for (var key in o1) {
            if (!_equals(o1[key], o2[key]))
                return false;
            keys[key] = true;
        }
        for (var key in o2) {
            if (!keys[key])
                return false;
        }
        return true;
    }
    function _arraysEq(a1, a2) {
        if (a1.length !== a2.length)
            return false;
        return arrayTuples(a1, a2).reduce(function (b, t) { return b && _equals(t[0], t[1]); }, true);
    }
    // issue #2676
    var silenceUncaughtInPromise = function (promise) { return promise.catch(function (e) { return 0; }) && promise; };
    var silentRejection = function (error) { return silenceUncaughtInPromise(services.$q.reject(error)); };

    /** @publicapi @module core */
    /**
     * Matches state names using glob-like pattern strings.
     *
     * Globs can be used in specific APIs including:
     *
     * - [[StateService.is]]
     * - [[StateService.includes]]
     * - The first argument to Hook Registration functions like [[TransitionService.onStart]]
     *    - [[HookMatchCriteria]] and [[HookMatchCriterion]]
     *
     * A `Glob` string is a pattern which matches state names.
     * Nested state names are split into segments (separated by a dot) when processing.
     * The state named `foo.bar.baz` is split into three segments ['foo', 'bar', 'baz']
     *
     * Globs work according to the following rules:
     *
     * ### Exact match:
     *
     * The glob `'A.B'` matches the state named exactly `'A.B'`.
     *
     * | Glob        |Matches states named|Does not match state named|
     * |:------------|:--------------------|:---------------------|
     * | `'A'`       | `'A'`               | `'B'` , `'A.C'`      |
     * | `'A.B'`     | `'A.B'`             | `'A'` , `'A.B.C'`    |
     * | `'foo'`     | `'foo'`             | `'FOO'` , `'foo.bar'`|
     *
     * ### Single star (`*`)
     *
     * A single star (`*`) is a wildcard that matches exactly one segment.
     *
     * | Glob        |Matches states named  |Does not match state named |
     * |:------------|:---------------------|:--------------------------|
     * | `'*'`       | `'A'` , `'Z'`        | `'A.B'` , `'Z.Y.X'`       |
     * | `'A.*'`     | `'A.B'` , `'A.C'`    | `'A'` , `'A.B.C'`         |
     * | `'A.*.*'`   | `'A.B.C'` , `'A.X.Y'`| `'A'`, `'A.B'` , `'Z.Y.X'`|
     *
     * ### Double star (`**`)
     *
     * A double star (`'**'`) is a wildcard that matches *zero or more segments*
     *
     * | Glob        |Matches states named                           |Does not match state named         |
     * |:------------|:----------------------------------------------|:----------------------------------|
     * | `'**'`      | `'A'` , `'A.B'`, `'Z.Y.X'`                    | (matches all states)              |
     * | `'A.**'`    | `'A'` , `'A.B'` , `'A.C.X'`                   | `'Z.Y.X'`                         |
     * | `'**.X'`    | `'X'` , `'A.X'` , `'Z.Y.X'`                   | `'A'` , `'A.login.Z'`             |
     * | `'A.**.X'`  | `'A.X'` , `'A.B.X'` , `'A.B.C.X'`             | `'A'` , `'A.B.C'`                 |
     *
     */
    var Glob = /** @class */ (function () {
        function Glob(text) {
            this.text = text;
            this.glob = text.split('.');
            var regexpString = this.text
                .split('.')
                .map(function (seg) {
                if (seg === '**')
                    return '(?:|(?:\\.[^.]*)*)';
                if (seg === '*')
                    return '\\.[^.]*';
                return '\\.' + seg;
            })
                .join('');
            this.regexp = new RegExp('^' + regexpString + '$');
        }
        /** Returns true if the string has glob-like characters in it */
        Glob.is = function (text) {
            return !!/[!,*]+/.exec(text);
        };
        /** Returns a glob from the string, or null if the string isn't Glob-like */
        Glob.fromString = function (text) {
            return Glob.is(text) ? new Glob(text) : null;
        };
        Glob.prototype.matches = function (name) {
            return this.regexp.test('.' + name);
        };
        return Glob;
    }());

    /** @publicapi @module common */ /** */
    var Queue = /** @class */ (function () {
        function Queue(_items, _limit) {
            if (_items === void 0) { _items = []; }
            if (_limit === void 0) { _limit = null; }
            this._items = _items;
            this._limit = _limit;
            this._evictListeners = [];
            this.onEvict = pushTo(this._evictListeners);
        }
        Queue.prototype.enqueue = function (item) {
            var items = this._items;
            items.push(item);
            if (this._limit && items.length > this._limit)
                this.evict();
            return item;
        };
        Queue.prototype.evict = function () {
            var item = this._items.shift();
            this._evictListeners.forEach(function (fn) { return fn(item); });
            return item;
        };
        Queue.prototype.dequeue = function () {
            if (this.size())
                return this._items.splice(0, 1)[0];
        };
        Queue.prototype.clear = function () {
            var current = this._items;
            this._items = [];
            return current;
        };
        Queue.prototype.size = function () {
            return this._items.length;
        };
        Queue.prototype.remove = function (item) {
            var idx = this._items.indexOf(item);
            return idx > -1 && this._items.splice(idx, 1)[0];
        };
        Queue.prototype.peekTail = function () {
            return this._items[this._items.length - 1];
        };
        Queue.prototype.peekHead = function () {
            if (this.size())
                return this._items[0];
        };
        return Queue;
    }());

    /** @publicapi @module transition */ /** */

    (function (RejectType) {
        /**
         * A new transition superseded this one.
         *
         * While this transition was running, a new transition started.
         * This transition is cancelled because it was superseded by new transition.
         */
        RejectType[RejectType["SUPERSEDED"] = 2] = "SUPERSEDED";
        /**
         * The transition was aborted
         *
         * The transition was aborted by a hook which returned `false`
         */
        RejectType[RejectType["ABORTED"] = 3] = "ABORTED";
        /**
         * The transition was invalid
         *
         * The transition was never started because it was invalid
         */
        RejectType[RejectType["INVALID"] = 4] = "INVALID";
        /**
         * The transition was ignored
         *
         * The transition was ignored because it would have no effect.
         *
         * Either:
         *
         * - The transition is targeting the current state and parameter values
         * - The transition is targeting the same state and parameter values as the currently running transition.
         */
        RejectType[RejectType["IGNORED"] = 5] = "IGNORED";
        /**
         * The transition errored.
         *
         * This generally means a hook threw an error or returned a rejected promise
         */
        RejectType[RejectType["ERROR"] = 6] = "ERROR";
    })(exports.RejectType || (exports.RejectType = {}));
    /** @hidden */
    var id = 0;
    var Rejection = /** @class */ (function () {
        function Rejection(type, message, detail) {
            /** @hidden */
            this.$id = id++;
            this.type = type;
            this.message = message;
            this.detail = detail;
        }
        /** Returns true if the obj is a rejected promise created from the `asPromise` factory */
        Rejection.isRejectionPromise = function (obj) {
            return obj && typeof obj.then === 'function' && is(Rejection)(obj._transitionRejection);
        };
        /** Returns a Rejection due to transition superseded */
        Rejection.superseded = function (detail, options) {
            var message = 'The transition has been superseded by a different transition';
            var rejection = new Rejection(exports.RejectType.SUPERSEDED, message, detail);
            if (options && options.redirected) {
                rejection.redirected = true;
            }
            return rejection;
        };
        /** Returns a Rejection due to redirected transition */
        Rejection.redirected = function (detail) {
            return Rejection.superseded(detail, { redirected: true });
        };
        /** Returns a Rejection due to invalid transition */
        Rejection.invalid = function (detail) {
            var message = 'This transition is invalid';
            return new Rejection(exports.RejectType.INVALID, message, detail);
        };
        /** Returns a Rejection due to ignored transition */
        Rejection.ignored = function (detail) {
            var message = 'The transition was ignored';
            return new Rejection(exports.RejectType.IGNORED, message, detail);
        };
        /** Returns a Rejection due to aborted transition */
        Rejection.aborted = function (detail) {
            var message = 'The transition has been aborted';
            return new Rejection(exports.RejectType.ABORTED, message, detail);
        };
        /** Returns a Rejection due to aborted transition */
        Rejection.errored = function (detail) {
            var message = 'The transition errored';
            return new Rejection(exports.RejectType.ERROR, message, detail);
        };
        /**
         * Returns a Rejection
         *
         * Normalizes a value as a Rejection.
         * If the value is already a Rejection, returns it.
         * Otherwise, wraps and returns the value as a Rejection (Rejection type: ERROR).
         *
         * @returns `detail` if it is already a `Rejection`, else returns an ERROR Rejection.
         */
        Rejection.normalize = function (detail) {
            return is(Rejection)(detail) ? detail : Rejection.errored(detail);
        };
        Rejection.prototype.toString = function () {
            var detailString = function (d) { return (d && d.toString !== Object.prototype.toString ? d.toString() : stringify(d)); };
            var detail = detailString(this.detail);
            var _a = this, $id = _a.$id, type = _a.type, message = _a.message;
            return "Transition Rejection($id: " + $id + " type: " + type + ", message: " + message + ", detail: " + detail + ")";
        };
        Rejection.prototype.toPromise = function () {
            return extend(silentRejection(this), { _transitionRejection: this });
        };
        return Rejection;
    }());

    /**
     * Functions that manipulate strings
     *
     * Although these functions are exported, they are subject to change without notice.
     *
     * @module common_strings
     */ /** */
    /**
     * Returns a string shortened to a maximum length
     *
     * If the string is already less than the `max` length, return the string.
     * Else return the string, shortened to `max - 3` and append three dots ("...").
     *
     * @param max the maximum length of the string to return
     * @param str the input string
     */
    function maxLength(max, str) {
        if (str.length <= max)
            return str;
        return str.substr(0, max - 3) + '...';
    }
    /**
     * Returns a string, with spaces added to the end, up to a desired str length
     *
     * If the string is already longer than the desired length, return the string.
     * Else returns the string, with extra spaces on the end, such that it reaches `length` characters.
     *
     * @param length the desired length of the string to return
     * @param str the input string
     */
    function padString(length, str) {
        while (str.length < length)
            str += ' ';
        return str;
    }
    function kebobString(camelCase) {
        return camelCase
            .replace(/^([A-Z])/, function ($1) { return $1.toLowerCase(); }) // replace first char
            .replace(/([A-Z])/g, function ($1) { return '-' + $1.toLowerCase(); }); // replace rest
    }
    function functionToString(fn) {
        var fnStr = fnToString(fn);
        var namedFunctionMatch = fnStr.match(/^(function [^ ]+\([^)]*\))/);
        var toStr = namedFunctionMatch ? namedFunctionMatch[1] : fnStr;
        var fnName = fn['name'] || '';
        if (fnName && toStr.match(/function \(/)) {
            return 'function ' + fnName + toStr.substr(9);
        }
        return toStr;
    }
    function fnToString(fn) {
        var _fn = isArray(fn) ? fn.slice(-1)[0] : fn;
        return (_fn && _fn.toString()) || 'undefined';
    }
    var isRejection = Rejection.isRejectionPromise;
    var hasToString = function (obj) {
        return isObject(obj) && !isArray(obj) && obj.constructor !== Object && isFunction(obj.toString);
    };
    var stringifyPattern = pattern([
        [isUndefined, val('undefined')],
        [isNull, val('null')],
        [isPromise, val('[Promise]')],
        [isRejection, function (x) { return x._transitionRejection.toString(); }],
        [hasToString, function (x) { return x.toString(); }],
        [isInjectable, functionToString],
        [val(true), identity],
    ]);
    function stringify(o) {
        var seen = [];
        function format(value) {
            if (isObject(value)) {
                if (seen.indexOf(value) !== -1)
                    return '[circular ref]';
                seen.push(value);
            }
            return stringifyPattern(value);
        }
        if (isUndefined(o)) {
            // Workaround for IE & Edge Spec incompatibility where replacer function would not be called when JSON.stringify
            // is given `undefined` as value. To work around that, we simply detect `undefined` and bail out early by
            // manually stringifying it.
            return format(o);
        }
        return JSON.stringify(o, function (key, value) { return format(value); }).replace(/\\"/g, '"');
    }
    /** Returns a function that splits a string on a character or substring */
    var beforeAfterSubstr = function (char) { return function (str) {
        if (!str)
            return ['', ''];
        var idx = str.indexOf(char);
        if (idx === -1)
            return [str, ''];
        return [str.substr(0, idx), str.substr(idx + 1)];
    }; };
    var hostRegex = new RegExp('^(?:[a-z]+:)?//[^/]+/');
    var stripLastPathElement = function (str) { return str.replace(/\/[^/]*$/, ''); };
    var splitHash = beforeAfterSubstr('#');
    var splitQuery = beforeAfterSubstr('?');
    var splitEqual = beforeAfterSubstr('=');
    var trimHashVal = function (str) { return (str ? str.replace(/^#/, '') : ''); };
    /**
     * Splits on a delimiter, but returns the delimiters in the array
     *
     * #### Example:
     * ```js
     * var splitOnSlashes = splitOnDelim('/');
     * splitOnSlashes("/foo"); // ["/", "foo"]
     * splitOnSlashes("/foo/"); // ["/", "foo", "/"]
     * ```
     */
    function splitOnDelim(delim) {
        var re = new RegExp('(' + delim + ')', 'g');
        return function (str) { return str.split(re).filter(identity); };
    }
    /**
     * Reduce fn that joins neighboring strings
     *
     * Given an array of strings, returns a new array
     * where all neighboring strings have been joined.
     *
     * #### Example:
     * ```js
     * let arr = ["foo", "bar", 1, "baz", "", "qux" ];
     * arr.reduce(joinNeighborsR, []) // ["foobar", 1, "bazqux" ]
     * ```
     */
    function joinNeighborsR(acc, x) {
        if (isString(tail(acc)) && isString(x))
            return acc.slice(0, -1).concat(tail(acc) + x);
        return pushR(acc, x);
    }

    /** workaround for missing console object in IE9 when dev tools haven't been opened o_O */
    var noopConsoleStub = { log: noop, error: noop, table: noop };
    function ie9Console(console) {
        var bound = function (fn) { return Function.prototype.bind.call(fn, console); };
        return {
            log: bound(console.log),
            error: bound(console.log),
            table: bound(console.log),
        };
    }
    function fallbackConsole(console) {
        var log = console.log.bind(console);
        var error = console.error ? console.error.bind(console) : log;
        var table = console.table ? console.table.bind(console) : log;
        return { log: log, error: error, table: table };
    }
    function getSafeConsole() {
        // @ts-ignore
        var isIE9 = typeof document !== 'undefined' && document.documentMode && document.documentMode === 9;
        if (isIE9) {
            return window && window.console ? ie9Console(window.console) : noopConsoleStub;
        }
        else if (!console.table || !console.error) {
            return fallbackConsole(console);
        }
        else {
            return console;
        }
    }
    var safeConsole = getSafeConsole();

    /**
     * # Transition tracing (debug)
     *
     * Enable transition tracing to print transition information to the console,
     * in order to help debug your application.
     * Tracing logs detailed information about each Transition to your console.
     *
     * To enable tracing, import the [[Trace]] singleton and enable one or more categories.
     *
     * ### ES6
     * ```js
     * import {trace} from "@uirouter/core";
     * trace.enable(1, 5); // TRANSITION and VIEWCONFIG
     * ```
     *
     * ### CJS
     * ```js
     * let trace = require("@uirouter/core").trace;
     * trace.enable("TRANSITION", "VIEWCONFIG");
     * ```
     *
     * ### Globals
     * ```js
     * let trace = window["@uirouter/core"].trace;
     * trace.enable(); // Trace everything (very verbose)
     * ```
     *
     * ### Angular 1:
     * ```js
     * app.run($trace => $trace.enable());
     * ```
     *
     * @publicapi @module trace
     */
    /** @hidden */
    function uiViewString(uiview) {
        if (!uiview)
            return 'ui-view (defunct)';
        var state = uiview.creationContext ? uiview.creationContext.name || '(root)' : '(none)';
        return "[ui-view#" + uiview.id + " " + uiview.$type + ":" + uiview.fqn + " (" + uiview.name + "@" + state + ")]";
    }
    /** @hidden */
    var viewConfigString = function (viewConfig) {
        var view = viewConfig.viewDecl;
        var state = view.$context.name || '(root)';
        return "[View#" + viewConfig.$id + " from '" + state + "' state]: target ui-view: '" + view.$uiViewName + "@" + view.$uiViewContextAnchor + "'";
    };
    /** @hidden */
    function normalizedCat(input) {
        return isNumber(input) ? exports.Category[input] : exports.Category[exports.Category[input]];
    }
    /**
     * Trace categories Enum
     *
     * Enable or disable a category using [[Trace.enable]] or [[Trace.disable]]
     *
     * `trace.enable(Category.TRANSITION)`
     *
     * These can also be provided using a matching string, or position ordinal
     *
     * `trace.enable("TRANSITION")`
     *
     * `trace.enable(1)`
     */

    (function (Category) {
        Category[Category["RESOLVE"] = 0] = "RESOLVE";
        Category[Category["TRANSITION"] = 1] = "TRANSITION";
        Category[Category["HOOK"] = 2] = "HOOK";
        Category[Category["UIVIEW"] = 3] = "UIVIEW";
        Category[Category["VIEWCONFIG"] = 4] = "VIEWCONFIG";
    })(exports.Category || (exports.Category = {}));
    /** @hidden */
    var _tid = parse('$id');
    /** @hidden */
    var _rid = parse('router.$id');
    /** @hidden */
    var transLbl = function (trans) { return "Transition #" + _tid(trans) + "-" + _rid(trans); };
    /**
     * Prints UI-Router Transition trace information to the console.
     */
    var Trace = /** @class */ (function () {
        /** @hidden */
        function Trace() {
            /** @hidden */
            this._enabled = {};
            this.approximateDigests = 0;
        }
        /** @hidden */
        Trace.prototype._set = function (enabled, categories) {
            var _this = this;
            if (!categories.length) {
                categories = Object.keys(exports.Category)
                    .map(function (k) { return parseInt(k, 10); })
                    .filter(function (k) { return !isNaN(k); })
                    .map(function (key) { return exports.Category[key]; });
            }
            categories.map(normalizedCat).forEach(function (category) { return (_this._enabled[category] = enabled); });
        };
        Trace.prototype.enable = function () {
            var categories = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                categories[_i] = arguments[_i];
            }
            this._set(true, categories);
        };
        Trace.prototype.disable = function () {
            var categories = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                categories[_i] = arguments[_i];
            }
            this._set(false, categories);
        };
        /**
         * Retrieves the enabled stateus of a [[Category]]
         *
         * ```js
         * trace.enabled("VIEWCONFIG"); // true or false
         * ```
         *
         * @returns boolean true if the category is enabled
         */
        Trace.prototype.enabled = function (category) {
            return !!this._enabled[normalizedCat(category)];
        };
        /** @internalapi called by ui-router code */
        Trace.prototype.traceTransitionStart = function (trans) {
            if (!this.enabled(exports.Category.TRANSITION))
                return;
            safeConsole.log(transLbl(trans) + ": Started  -> " + stringify(trans));
        };
        /** @internalapi called by ui-router code */
        Trace.prototype.traceTransitionIgnored = function (trans) {
            if (!this.enabled(exports.Category.TRANSITION))
                return;
            safeConsole.log(transLbl(trans) + ": Ignored  <> " + stringify(trans));
        };
        /** @internalapi called by ui-router code */
        Trace.prototype.traceHookInvocation = function (step, trans, options) {
            if (!this.enabled(exports.Category.HOOK))
                return;
            var event = parse('traceData.hookType')(options) || 'internal', context = parse('traceData.context.state.name')(options) || parse('traceData.context')(options) || 'unknown', name = functionToString(step.registeredHook.callback);
            safeConsole.log(transLbl(trans) + ":   Hook -> " + event + " context: " + context + ", " + maxLength(200, name));
        };
        /** @internalapi called by ui-router code */
        Trace.prototype.traceHookResult = function (hookResult, trans, transitionOptions) {
            if (!this.enabled(exports.Category.HOOK))
                return;
            safeConsole.log(transLbl(trans) + ":   <- Hook returned: " + maxLength(200, stringify(hookResult)));
        };
        /** @internalapi called by ui-router code */
        Trace.prototype.traceResolvePath = function (path, when, trans) {
            if (!this.enabled(exports.Category.RESOLVE))
                return;
            safeConsole.log(transLbl(trans) + ":         Resolving " + path + " (" + when + ")");
        };
        /** @internalapi called by ui-router code */
        Trace.prototype.traceResolvableResolved = function (resolvable, trans) {
            if (!this.enabled(exports.Category.RESOLVE))
                return;
            safeConsole.log(transLbl(trans) + ":               <- Resolved  " + resolvable + " to: " + maxLength(200, stringify(resolvable.data)));
        };
        /** @internalapi called by ui-router code */
        Trace.prototype.traceError = function (reason, trans) {
            if (!this.enabled(exports.Category.TRANSITION))
                return;
            safeConsole.log(transLbl(trans) + ": <- Rejected " + stringify(trans) + ", reason: " + reason);
        };
        /** @internalapi called by ui-router code */
        Trace.prototype.traceSuccess = function (finalState, trans) {
            if (!this.enabled(exports.Category.TRANSITION))
                return;
            safeConsole.log(transLbl(trans) + ": <- Success  " + stringify(trans) + ", final state: " + finalState.name);
        };
        /** @internalapi called by ui-router code */
        Trace.prototype.traceUIViewEvent = function (event, viewData, extra) {
            if (extra === void 0) { extra = ''; }
            if (!this.enabled(exports.Category.UIVIEW))
                return;
            safeConsole.log("ui-view: " + padString(30, event) + " " + uiViewString(viewData) + extra);
        };
        /** @internalapi called by ui-router code */
        Trace.prototype.traceUIViewConfigUpdated = function (viewData, context) {
            if (!this.enabled(exports.Category.UIVIEW))
                return;
            this.traceUIViewEvent('Updating', viewData, " with ViewConfig from context='" + context + "'");
        };
        /** @internalapi called by ui-router code */
        Trace.prototype.traceUIViewFill = function (viewData, html) {
            if (!this.enabled(exports.Category.UIVIEW))
                return;
            this.traceUIViewEvent('Fill', viewData, " with: " + maxLength(200, html));
        };
        /** @internalapi called by ui-router code */
        Trace.prototype.traceViewSync = function (pairs) {
            if (!this.enabled(exports.Category.VIEWCONFIG))
                return;
            var uivheader = 'uiview component fqn';
            var cfgheader = 'view config state (view name)';
            var mapping = pairs
                .map(function (_a) {
                var _b;
                var uiView = _a.uiView, viewConfig = _a.viewConfig;
                var uiv = uiView && uiView.fqn;
                var cfg = viewConfig && viewConfig.viewDecl.$context.name + ": (" + viewConfig.viewDecl.$name + ")";
                return _b = {}, _b[uivheader] = uiv, _b[cfgheader] = cfg, _b;
            })
                .sort(function (a, b) { return (a[uivheader] || '').localeCompare(b[uivheader] || ''); });
            safeConsole.table(mapping);
        };
        /** @internalapi called by ui-router code */
        Trace.prototype.traceViewServiceEvent = function (event, viewConfig) {
            if (!this.enabled(exports.Category.VIEWCONFIG))
                return;
            safeConsole.log("VIEWCONFIG: " + event + " " + viewConfigString(viewConfig));
        };
        /** @internalapi called by ui-router code */
        Trace.prototype.traceViewServiceUIViewEvent = function (event, viewData) {
            if (!this.enabled(exports.Category.VIEWCONFIG))
                return;
            safeConsole.log("VIEWCONFIG: " + event + " " + uiViewString(viewData));
        };
        return Trace;
    }());
    /**
     * The [[Trace]] singleton
     *
     * #### Example:
     * ```js
     * import {trace} from "@uirouter/core";
     * trace.enable(1, 5);
     * ```
     */
    var trace = new Trace();

    /** @publicapi @module params */ /** */
    /**
     * An internal class which implements [[ParamTypeDefinition]].
     *
     * A [[ParamTypeDefinition]] is a plain javascript object used to register custom parameter types.
     * When a param type definition is registered, an instance of this class is created internally.
     *
     * This class has naive implementations for all the [[ParamTypeDefinition]] methods.
     *
     * Used by [[UrlMatcher]] when matching or formatting URLs, or comparing and validating parameter values.
     *
     * #### Example:
     * ```js
     * var paramTypeDef = {
     *   decode: function(val) { return parseInt(val, 10); },
     *   encode: function(val) { return val && val.toString(); },
     *   equals: function(a, b) { return this.is(a) && a === b; },
     *   is: function(val) { return angular.isNumber(val) && isFinite(val) && val % 1 === 0; },
     *   pattern: /\d+/
     * }
     *
     * var paramType = new ParamType(paramTypeDef);
     * ```
     * @internalapi
     */
    var ParamType = /** @class */ (function () {
        /**
         * @param def  A configuration object which contains the custom type definition.  The object's
         *        properties will override the default methods and/or pattern in `ParamType`'s public interface.
         * @returns a new ParamType object
         */
        function ParamType(def) {
            /** @inheritdoc */
            this.pattern = /.*/;
            /** @inheritdoc */
            this.inherit = true;
            extend(this, def);
        }
        // consider these four methods to be "abstract methods" that should be overridden
        /** @inheritdoc */
        ParamType.prototype.is = function (val, key) {
            return true;
        };
        /** @inheritdoc */
        ParamType.prototype.encode = function (val, key) {
            return val;
        };
        /** @inheritdoc */
        ParamType.prototype.decode = function (val, key) {
            return val;
        };
        /** @inheritdoc */
        ParamType.prototype.equals = function (a, b) {
            // tslint:disable-next-line:triple-equals
            return a == b;
        };
        ParamType.prototype.$subPattern = function () {
            var sub = this.pattern.toString();
            return sub.substr(1, sub.length - 2);
        };
        ParamType.prototype.toString = function () {
            return "{ParamType:" + this.name + "}";
        };
        /** Given an encoded string, or a decoded object, returns a decoded object */
        ParamType.prototype.$normalize = function (val) {
            return this.is(val) ? val : this.decode(val);
        };
        /**
         * Wraps an existing custom ParamType as an array of ParamType, depending on 'mode'.
         * e.g.:
         * - urlmatcher pattern "/path?{queryParam[]:int}"
         * - url: "/path?queryParam=1&queryParam=2
         * - $stateParams.queryParam will be [1, 2]
         * if `mode` is "auto", then
         * - url: "/path?queryParam=1 will create $stateParams.queryParam: 1
         * - url: "/path?queryParam=1&queryParam=2 will create $stateParams.queryParam: [1, 2]
         */
        ParamType.prototype.$asArray = function (mode, isSearch) {
            if (!mode)
                return this;
            if (mode === 'auto' && !isSearch)
                throw new Error("'auto' array mode is for query parameters only");
            return new ArrayType(this, mode);
        };
        return ParamType;
    }());
    /**
     * Wraps up a `ParamType` object to handle array values.
     * @internalapi
     */
    function ArrayType(type, mode) {
        var _this = this;
        // Wrap non-array value as array
        function arrayWrap(val) {
            return isArray(val) ? val : isDefined(val) ? [val] : [];
        }
        // Unwrap array value for "auto" mode. Return undefined for empty array.
        function arrayUnwrap(val) {
            switch (val.length) {
                case 0:
                    return undefined;
                case 1:
                    return mode === 'auto' ? val[0] : val;
                default:
                    return val;
            }
        }
        // Wraps type (.is/.encode/.decode) functions to operate on each value of an array
        function arrayHandler(callback, allTruthyMode) {
            return function handleArray(val) {
                if (isArray(val) && val.length === 0)
                    return val;
                var arr = arrayWrap(val);
                var result = map(arr, callback);
                return allTruthyMode === true ? filter(result, function (x) { return !x; }).length === 0 : arrayUnwrap(result);
            };
        }
        // Wraps type (.equals) functions to operate on each value of an array
        function arrayEqualsHandler(callback) {
            return function handleArray(val1, val2) {
                var left = arrayWrap(val1), right = arrayWrap(val2);
                if (left.length !== right.length)
                    return false;
                for (var i = 0; i < left.length; i++) {
                    if (!callback(left[i], right[i]))
                        return false;
                }
                return true;
            };
        }
        ['encode', 'decode', 'equals', '$normalize'].forEach(function (name) {
            var paramTypeFn = type[name].bind(type);
            var wrapperFn = name === 'equals' ? arrayEqualsHandler : arrayHandler;
            _this[name] = wrapperFn(paramTypeFn);
        });
        extend(this, {
            dynamic: type.dynamic,
            name: type.name,
            pattern: type.pattern,
            inherit: type.inherit,
            raw: type.raw,
            is: arrayHandler(type.is.bind(type), true),
            $arrayMode: mode,
        });
    }

    /** @publicapi @module params */ /** */
    /** @hidden */
    var hasOwn = Object.prototype.hasOwnProperty;
    /** @hidden */
    var isShorthand = function (cfg) {
        return ['value', 'type', 'squash', 'array', 'dynamic'].filter(hasOwn.bind(cfg || {})).length === 0;
    };
    /** @internalapi */

    (function (DefType) {
        DefType[DefType["PATH"] = 0] = "PATH";
        DefType[DefType["SEARCH"] = 1] = "SEARCH";
        DefType[DefType["CONFIG"] = 2] = "CONFIG";
    })(exports.DefType || (exports.DefType = {}));
    /** @internalapi */
    function getParamDeclaration(paramName, location, state) {
        var noReloadOnSearch = (state.reloadOnSearch === false && location === exports.DefType.SEARCH) || undefined;
        var dynamic = find([state.dynamic, noReloadOnSearch], isDefined);
        var defaultConfig = isDefined(dynamic) ? { dynamic: dynamic } : {};
        var paramConfig = unwrapShorthand(state && state.params && state.params[paramName]);
        return extend(defaultConfig, paramConfig);
    }
    /** @hidden */
    function unwrapShorthand(cfg) {
        cfg = isShorthand(cfg) ? { value: cfg } : cfg;
        getStaticDefaultValue['__cacheable'] = true;
        function getStaticDefaultValue() {
            return cfg.value;
        }
        var $$fn = isInjectable(cfg.value) ? cfg.value : getStaticDefaultValue;
        return extend(cfg, { $$fn: $$fn });
    }
    /** @hidden */
    function getType(cfg, urlType, location, id, paramTypes) {
        if (cfg.type && urlType && urlType.name !== 'string')
            throw new Error("Param '" + id + "' has two type configurations.");
        if (cfg.type && urlType && urlType.name === 'string' && paramTypes.type(cfg.type))
            return paramTypes.type(cfg.type);
        if (urlType)
            return urlType;
        if (!cfg.type) {
            var type = location === exports.DefType.CONFIG
                ? 'any'
                : location === exports.DefType.PATH
                    ? 'path'
                    : location === exports.DefType.SEARCH
                        ? 'query'
                        : 'string';
            return paramTypes.type(type);
        }
        return cfg.type instanceof ParamType ? cfg.type : paramTypes.type(cfg.type);
    }
    /**
     * @internalapi
     * returns false, true, or the squash value to indicate the "default parameter url squash policy".
     */
    function getSquashPolicy(config, isOptional, defaultPolicy) {
        var squash = config.squash;
        if (!isOptional || squash === false)
            return false;
        if (!isDefined(squash) || squash == null)
            return defaultPolicy;
        if (squash === true || isString(squash))
            return squash;
        throw new Error("Invalid squash policy: '" + squash + "'. Valid policies: false, true, or arbitrary string");
    }
    /** @internalapi */
    function getReplace(config, arrayMode, isOptional, squash) {
        var defaultPolicy = [
            { from: '', to: isOptional || arrayMode ? undefined : '' },
            { from: null, to: isOptional || arrayMode ? undefined : '' },
        ];
        var replace = isArray(config.replace) ? config.replace : [];
        if (isString(squash))
            replace.push({ from: squash, to: undefined });
        var configuredKeys = map(replace, prop('from'));
        return filter(defaultPolicy, function (item) { return configuredKeys.indexOf(item.from) === -1; }).concat(replace);
    }
    /** @internalapi */
    var Param = /** @class */ (function () {
        function Param(id, type, location, urlConfig, state) {
            var config = getParamDeclaration(id, location, state);
            type = getType(config, type, location, id, urlConfig.paramTypes);
            var arrayMode = getArrayMode();
            type = arrayMode ? type.$asArray(arrayMode, location === exports.DefType.SEARCH) : type;
            var isOptional = config.value !== undefined || location === exports.DefType.SEARCH;
            var dynamic = isDefined(config.dynamic) ? !!config.dynamic : !!type.dynamic;
            var raw = isDefined(config.raw) ? !!config.raw : !!type.raw;
            var squash = getSquashPolicy(config, isOptional, urlConfig.defaultSquashPolicy());
            var replace = getReplace(config, arrayMode, isOptional, squash);
            var inherit = isDefined(config.inherit) ? !!config.inherit : !!type.inherit;
            // array config: param name (param[]) overrides default settings.  explicit config overrides param name.
            function getArrayMode() {
                var arrayDefaults = { array: location === exports.DefType.SEARCH ? 'auto' : false };
                var arrayParamNomenclature = id.match(/\[\]$/) ? { array: true } : {};
                return extend(arrayDefaults, arrayParamNomenclature, config).array;
            }
            extend(this, { id: id, type: type, location: location, isOptional: isOptional, dynamic: dynamic, raw: raw, squash: squash, replace: replace, inherit: inherit, array: arrayMode, config: config });
        }
        Param.values = function (params, values) {
            if (values === void 0) { values = {}; }
            var paramValues = {};
            for (var _i = 0, params_1 = params; _i < params_1.length; _i++) {
                var param = params_1[_i];
                paramValues[param.id] = param.value(values[param.id]);
            }
            return paramValues;
        };
        /**
         * Finds [[Param]] objects which have different param values
         *
         * Filters a list of [[Param]] objects to only those whose parameter values differ in two param value objects
         *
         * @param params: The list of Param objects to filter
         * @param values1: The first set of parameter values
         * @param values2: the second set of parameter values
         *
         * @returns any Param objects whose values were different between values1 and values2
         */
        Param.changed = function (params, values1, values2) {
            if (values1 === void 0) { values1 = {}; }
            if (values2 === void 0) { values2 = {}; }
            return params.filter(function (param) { return !param.type.equals(values1[param.id], values2[param.id]); });
        };
        /**
         * Checks if two param value objects are equal (for a set of [[Param]] objects)
         *
         * @param params The list of [[Param]] objects to check
         * @param values1 The first set of param values
         * @param values2 The second set of param values
         *
         * @returns true if the param values in values1 and values2 are equal
         */
        Param.equals = function (params, values1, values2) {
            if (values1 === void 0) { values1 = {}; }
            if (values2 === void 0) { values2 = {}; }
            return Param.changed(params, values1, values2).length === 0;
        };
        /** Returns true if a the parameter values are valid, according to the Param definitions */
        Param.validates = function (params, values) {
            if (values === void 0) { values = {}; }
            return params.map(function (param) { return param.validates(values[param.id]); }).reduce(allTrueR, true);
        };
        Param.prototype.isDefaultValue = function (value) {
            return this.isOptional && this.type.equals(this.value(), value);
        };
        /**
         * [Internal] Gets the decoded representation of a value if the value is defined, otherwise, returns the
         * default value, which may be the result of an injectable function.
         */
        Param.prototype.value = function (value) {
            var _this = this;
            /**
             * [Internal] Get the default value of a parameter, which may be an injectable function.
             */
            var getDefaultValue = function () {
                if (_this._defaultValueCache)
                    return _this._defaultValueCache.defaultValue;
                if (!services.$injector)
                    throw new Error('Injectable functions cannot be called at configuration time');
                var defaultValue = services.$injector.invoke(_this.config.$$fn);
                if (defaultValue !== null && defaultValue !== undefined && !_this.type.is(defaultValue))
                    throw new Error("Default value (" + defaultValue + ") for parameter '" + _this.id + "' is not an instance of ParamType (" + _this.type.name + ")");
                if (_this.config.$$fn['__cacheable']) {
                    _this._defaultValueCache = { defaultValue: defaultValue };
                }
                return defaultValue;
            };
            var replaceSpecialValues = function (val) {
                for (var _i = 0, _a = _this.replace; _i < _a.length; _i++) {
                    var tuple = _a[_i];
                    if (tuple.from === val)
                        return tuple.to;
                }
                return val;
            };
            value = replaceSpecialValues(value);
            return isUndefined(value) ? getDefaultValue() : this.type.$normalize(value);
        };
        Param.prototype.isSearch = function () {
            return this.location === exports.DefType.SEARCH;
        };
        Param.prototype.validates = function (value) {
            // There was no parameter value, but the param is optional
            if ((isUndefined(value) || value === null) && this.isOptional)
                return true;
            // The value was not of the correct ParamType, and could not be decoded to the correct ParamType
            var normalized = this.type.$normalize(value);
            if (!this.type.is(normalized))
                return false;
            // The value was of the correct type, but when encoded, did not match the ParamType's regexp
            var encoded = this.type.encode(normalized);
            return !(isString(encoded) && !this.type.pattern.exec(encoded));
        };
        Param.prototype.toString = function () {
            return "{Param:" + this.id + " " + this.type + " squash: '" + this.squash + "' optional: " + this.isOptional + "}";
        };
        return Param;
    }());

    /** @publicapi @module params */ /** */
    /**
     * A registry for parameter types.
     *
     * This registry manages the built-in (and custom) parameter types.
     *
     * The built-in parameter types are:
     *
     * - [[string]]
     * - [[path]]
     * - [[query]]
     * - [[hash]]
     * - [[int]]
     * - [[bool]]
     * - [[date]]
     * - [[json]]
     * - [[any]]
     *
     * To register custom parameter types, use [[UrlConfig.type]], i.e.,
     *
     * ```js
     * router.urlService.config.type(customType)
     * ```
     */
    var ParamTypes = /** @class */ (function () {
        /** @internalapi */
        function ParamTypes() {
            /** @hidden */
            this.enqueue = true;
            /** @hidden */
            this.typeQueue = [];
            /** @internalapi */
            this.defaultTypes = pick(ParamTypes.prototype, [
                'hash',
                'string',
                'query',
                'path',
                'int',
                'bool',
                'date',
                'json',
                'any',
            ]);
            // Register default types. Store them in the prototype of this.types.
            var makeType = function (definition, name) { return new ParamType(extend({ name: name }, definition)); };
            this.types = inherit(map(this.defaultTypes, makeType), {});
        }
        /** @internalapi */
        ParamTypes.prototype.dispose = function () {
            this.types = {};
        };
        /**
         * Registers a parameter type
         *
         * End users should call [[UrlMatcherFactory.type]], which delegates to this method.
         */
        ParamTypes.prototype.type = function (name, definition, definitionFn) {
            if (!isDefined(definition))
                return this.types[name];
            if (this.types.hasOwnProperty(name))
                throw new Error("A type named '" + name + "' has already been defined.");
            this.types[name] = new ParamType(extend({ name: name }, definition));
            if (definitionFn) {
                this.typeQueue.push({ name: name, def: definitionFn });
                if (!this.enqueue)
                    this._flushTypeQueue();
            }
            return this;
        };
        /** @internalapi */
        ParamTypes.prototype._flushTypeQueue = function () {
            while (this.typeQueue.length) {
                var type = this.typeQueue.shift();
                if (type.pattern)
                    throw new Error("You cannot override a type's .pattern at runtime.");
                extend(this.types[type.name], services.$injector.invoke(type.def));
            }
        };
        return ParamTypes;
    }());
    /** @hidden */
    function initDefaultTypes() {
        var makeDefaultType = function (def) {
            var valToString = function (val) { return (val != null ? val.toString() : val); };
            var defaultTypeBase = {
                encode: valToString,
                decode: valToString,
                is: is(String),
                pattern: /.*/,
                // tslint:disable-next-line:triple-equals
                equals: function (a, b) { return a == b; },
            };
            return extend({}, defaultTypeBase, def);
        };
        // Default Parameter Type Definitions
        extend(ParamTypes.prototype, {
            string: makeDefaultType({}),
            path: makeDefaultType({
                pattern: /[^/]*/,
            }),
            query: makeDefaultType({}),
            hash: makeDefaultType({
                inherit: false,
            }),
            int: makeDefaultType({
                decode: function (val) { return parseInt(val, 10); },
                is: function (val) {
                    return !isNullOrUndefined(val) && this.decode(val.toString()) === val;
                },
                pattern: /-?\d+/,
            }),
            bool: makeDefaultType({
                encode: function (val) { return (val && 1) || 0; },
                decode: function (val) { return parseInt(val, 10) !== 0; },
                is: is(Boolean),
                pattern: /0|1/,
            }),
            date: makeDefaultType({
                encode: function (val) {
                    return !this.is(val)
                        ? undefined
                        : [val.getFullYear(), ('0' + (val.getMonth() + 1)).slice(-2), ('0' + val.getDate()).slice(-2)].join('-');
                },
                decode: function (val) {
                    if (this.is(val))
                        return val;
                    var match = this.capture.exec(val);
                    return match ? new Date(match[1], match[2] - 1, match[3]) : undefined;
                },
                is: function (val) { return val instanceof Date && !isNaN(val.valueOf()); },
                equals: function (l, r) {
                    return ['getFullYear', 'getMonth', 'getDate'].reduce(function (acc, fn) { return acc && l[fn]() === r[fn](); }, true);
                },
                pattern: /[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,
                capture: /([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/,
            }),
            json: makeDefaultType({
                encode: toJson,
                decode: fromJson,
                is: is(Object),
                equals: equals,
                pattern: /[^/]*/,
            }),
            // does not encode/decode
            any: makeDefaultType({
                encode: identity,
                decode: identity,
                is: function () { return true; },
                equals: equals,
            }),
        });
    }
    initDefaultTypes();

    /** @publicapi @module params */ /** */
    /** @internalapi */
    var StateParams = /** @class */ (function () {
        function StateParams(params) {
            if (params === void 0) { params = {}; }
            extend(this, params);
        }
        /**
         * Merges a set of parameters with all parameters inherited between the common parents of the
         * current state and a given destination state.
         *
         * @param {Object} newParams The set of parameters which will be composited with inherited params.
         * @param {Object} $current Internal definition of object representing the current state.
         * @param {Object} $to Internal definition of object representing state to transition to.
         */
        StateParams.prototype.$inherit = function (newParams, $current, $to) {
            var parentParams;
            var parents = ancestors($current, $to), inherited = {}, inheritList = [];
            for (var i in parents) {
                if (!parents[i] || !parents[i].params)
                    continue;
                parentParams = Object.keys(parents[i].params);
                if (!parentParams.length)
                    continue;
                for (var j in parentParams) {
                    if (inheritList.indexOf(parentParams[j]) >= 0)
                        continue;
                    inheritList.push(parentParams[j]);
                    inherited[parentParams[j]] = this[parentParams[j]];
                }
            }
            return extend({}, inherited, newParams);
        };
        return StateParams;
    }());

    /** @internalapi @module path */ /** */
    /**
     * A node in a [[TreeChanges]] path
     *
     * For a [[TreeChanges]] path, this class holds the stateful information for a single node in the path.
     * Each PathNode corresponds to a state being entered, exited, or retained.
     * The stateful information includes parameter values and resolve data.
     */
    var PathNode = /** @class */ (function () {
        function PathNode(stateOrNode) {
            if (stateOrNode instanceof PathNode) {
                var node = stateOrNode;
                this.state = node.state;
                this.paramSchema = node.paramSchema.slice();
                this.paramValues = extend({}, node.paramValues);
                this.resolvables = node.resolvables.slice();
                this.views = node.views && node.views.slice();
            }
            else {
                var state = stateOrNode;
                this.state = state;
                this.paramSchema = state.parameters({ inherit: false });
                this.paramValues = {};
                this.resolvables = state.resolvables.map(function (res) { return res.clone(); });
            }
        }
        PathNode.prototype.clone = function () {
            return new PathNode(this);
        };
        /** Sets [[paramValues]] for the node, from the values of an object hash */
        PathNode.prototype.applyRawParams = function (params) {
            var getParamVal = function (paramDef) { return [paramDef.id, paramDef.value(params[paramDef.id])]; };
            this.paramValues = this.paramSchema.reduce(function (memo, pDef) { return applyPairs(memo, getParamVal(pDef)); }, {});
            return this;
        };
        /** Gets a specific [[Param]] metadata that belongs to the node */
        PathNode.prototype.parameter = function (name) {
            return find(this.paramSchema, propEq('id', name));
        };
        /**
         * @returns true if the state and parameter values for another PathNode are
         * equal to the state and param values for this PathNode
         */
        PathNode.prototype.equals = function (node, paramsFn) {
            var diff = this.diff(node, paramsFn);
            return diff && diff.length === 0;
        };
        /**
         * Finds Params with different parameter values on another PathNode.
         *
         * Given another node (of the same state), finds the parameter values which differ.
         * Returns the [[Param]] (schema objects) whose parameter values differ.
         *
         * Given another node for a different state, returns `false`
         *
         * @param node The node to compare to
         * @param paramsFn A function that returns which parameters should be compared.
         * @returns The [[Param]]s which differ, or null if the two nodes are for different states
         */
        PathNode.prototype.diff = function (node, paramsFn) {
            if (this.state !== node.state)
                return false;
            var params = paramsFn ? paramsFn(this) : this.paramSchema;
            return Param.changed(params, this.paramValues, node.paramValues);
        };
        /**
         * Returns a clone of the PathNode
         * @deprecated use instance method `node.clone()`
         */
        PathNode.clone = function (node) { return node.clone(); };
        return PathNode;
    }());

    /** @publicapi @module state */ /** */
    /**
     * Encapsulate the target (destination) state/params/options of a [[Transition]].
     *
     * This class is frequently used to redirect a transition to a new destination.
     *
     * See:
     *
     * - [[HookResult]]
     * - [[TransitionHookFn]]
     * - [[TransitionService.onStart]]
     *
     * To create a `TargetState`, use [[StateService.target]].
     *
     * ---
     *
     * This class wraps:
     *
     * 1) an identifier for a state
     * 2) a set of parameters
     * 3) and transition options
     * 4) the registered state object (the [[StateDeclaration]])
     *
     * Many UI-Router APIs such as [[StateService.go]] take a [[StateOrName]] argument which can
     * either be a *state object* (a [[StateDeclaration]] or [[StateObject]]) or a *state name* (a string).
     * The `TargetState` class normalizes those options.
     *
     * A `TargetState` may be valid (the state being targeted exists in the registry)
     * or invalid (the state being targeted is not registered).
     */
    var TargetState = /** @class */ (function () {
        /**
         * The TargetState constructor
         *
         * Note: Do not construct a `TargetState` manually.
         * To create a `TargetState`, use the [[StateService.target]] factory method.
         *
         * @param _stateRegistry The StateRegistry to use to look up the _definition
         * @param _identifier An identifier for a state.
         *    Either a fully-qualified state name, or the object used to define the state.
         * @param _params Parameters for the target state
         * @param _options Transition options.
         *
         * @internalapi
         */
        function TargetState(_stateRegistry, _identifier, _params, _options) {
            this._stateRegistry = _stateRegistry;
            this._identifier = _identifier;
            this._identifier = _identifier;
            this._params = extend({}, _params || {});
            this._options = extend({}, _options || {});
            this._definition = _stateRegistry.matcher.find(_identifier, this._options.relative);
        }
        /** The name of the state this object targets */
        TargetState.prototype.name = function () {
            return (this._definition && this._definition.name) || this._identifier;
        };
        /** The identifier used when creating this TargetState */
        TargetState.prototype.identifier = function () {
            return this._identifier;
        };
        /** The target parameter values */
        TargetState.prototype.params = function () {
            return this._params;
        };
        /** The internal state object (if it was found) */
        TargetState.prototype.$state = function () {
            return this._definition;
        };
        /** The internal state declaration (if it was found) */
        TargetState.prototype.state = function () {
            return this._definition && this._definition.self;
        };
        /** The target options */
        TargetState.prototype.options = function () {
            return this._options;
        };
        /** True if the target state was found */
        TargetState.prototype.exists = function () {
            return !!(this._definition && this._definition.self);
        };
        /** True if the object is valid */
        TargetState.prototype.valid = function () {
            return !this.error();
        };
        /** If the object is invalid, returns the reason why */
        TargetState.prototype.error = function () {
            var base = this.options().relative;
            if (!this._definition && !!base) {
                var stateName = base.name ? base.name : base;
                return "Could not resolve '" + this.name() + "' from state '" + stateName + "'";
            }
            if (!this._definition)
                return "No such state '" + this.name() + "'";
            if (!this._definition.self)
                return "State '" + this.name() + "' has an invalid definition";
        };
        TargetState.prototype.toString = function () {
            return "'" + this.name() + "'" + stringify(this.params());
        };
        /**
         * Returns a copy of this TargetState which targets a different state.
         * The new TargetState has the same parameter values and transition options.
         *
         * @param state The new state that should be targeted
         */
        TargetState.prototype.withState = function (state) {
            return new TargetState(this._stateRegistry, state, this._params, this._options);
        };
        /**
         * Returns a copy of this TargetState, using the specified parameter values.
         *
         * @param params the new parameter values to use
         * @param replace When false (default) the new parameter values will be merged with the current values.
         *                When true the parameter values will be used instead of the current values.
         */
        TargetState.prototype.withParams = function (params, replace) {
            if (replace === void 0) { replace = false; }
            var newParams = replace ? params : extend({}, this._params, params);
            return new TargetState(this._stateRegistry, this._identifier, newParams, this._options);
        };
        /**
         * Returns a copy of this TargetState, using the specified Transition Options.
         *
         * @param options the new options to use
         * @param replace When false (default) the new options will be merged with the current options.
         *                When true the options will be used instead of the current options.
         */
        TargetState.prototype.withOptions = function (options, replace) {
            if (replace === void 0) { replace = false; }
            var newOpts = replace ? options : extend({}, this._options, options);
            return new TargetState(this._stateRegistry, this._identifier, this._params, newOpts);
        };
        /** Returns true if the object has a state property that might be a state or state name */
        TargetState.isDef = function (obj) { return obj && obj.state && (isString(obj.state) || isString(obj.state.name)); };
        return TargetState;
    }());

    /** @internalapi @module path */ /** */
    /**
     * This class contains functions which convert TargetStates, Nodes and paths from one type to another.
     */
    var PathUtils = /** @class */ (function () {
        function PathUtils() {
        }
        /** Given a PathNode[], create an TargetState */
        PathUtils.makeTargetState = function (registry, path) {
            var state = tail(path).state;
            return new TargetState(registry, state, path.map(prop('paramValues')).reduce(mergeR, {}), {});
        };
        PathUtils.buildPath = function (targetState) {
            var toParams = targetState.params();
            return targetState.$state().path.map(function (state) { return new PathNode(state).applyRawParams(toParams); });
        };
        /** Given a fromPath: PathNode[] and a TargetState, builds a toPath: PathNode[] */
        PathUtils.buildToPath = function (fromPath, targetState) {
            var toPath = PathUtils.buildPath(targetState);
            if (targetState.options().inherit) {
                return PathUtils.inheritParams(fromPath, toPath, Object.keys(targetState.params()));
            }
            return toPath;
        };
        /**
         * Creates ViewConfig objects and adds to nodes.
         *
         * On each [[PathNode]], creates ViewConfig objects from the views: property of the node's state
         */
        PathUtils.applyViewConfigs = function ($view, path, states) {
            // Only apply the viewConfigs to the nodes for the given states
            path
                .filter(function (node) { return inArray(states, node.state); })
                .forEach(function (node) {
                var viewDecls = values(node.state.views || {});
                var subPath = PathUtils.subPath(path, function (n) { return n === node; });
                var viewConfigs = viewDecls.map(function (view) { return $view.createViewConfig(subPath, view); });
                node.views = viewConfigs.reduce(unnestR, []);
            });
        };
        /**
         * Given a fromPath and a toPath, returns a new to path which inherits parameters from the fromPath
         *
         * For a parameter in a node to be inherited from the from path:
         * - The toPath's node must have a matching node in the fromPath (by state).
         * - The parameter name must not be found in the toKeys parameter array.
         *
         * Note: the keys provided in toKeys are intended to be those param keys explicitly specified by some
         * caller, for instance, $state.transitionTo(..., toParams).  If a key was found in toParams,
         * it is not inherited from the fromPath.
         */
        PathUtils.inheritParams = function (fromPath, toPath, toKeys) {
            if (toKeys === void 0) { toKeys = []; }
            function nodeParamVals(path, state) {
                var node = find(path, propEq('state', state));
                return extend({}, node && node.paramValues);
            }
            var noInherit = fromPath
                .map(function (node) { return node.paramSchema; })
                .reduce(unnestR, [])
                .filter(function (param) { return !param.inherit; })
                .map(prop('id'));
            /**
             * Given an [[PathNode]] "toNode", return a new [[PathNode]] with param values inherited from the
             * matching node in fromPath.  Only inherit keys that aren't found in "toKeys" from the node in "fromPath""
             */
            function makeInheritedParamsNode(toNode) {
                // All param values for the node (may include default key/vals, when key was not found in toParams)
                var toParamVals = extend({}, toNode && toNode.paramValues);
                // limited to only those keys found in toParams
                var incomingParamVals = pick(toParamVals, toKeys);
                toParamVals = omit(toParamVals, toKeys);
                var fromParamVals = omit(nodeParamVals(fromPath, toNode.state) || {}, noInherit);
                // extend toParamVals with any fromParamVals, then override any of those those with incomingParamVals
                var ownParamVals = extend(toParamVals, fromParamVals, incomingParamVals);
                return new PathNode(toNode.state).applyRawParams(ownParamVals);
            }
            // The param keys specified by the incoming toParams
            return toPath.map(makeInheritedParamsNode);
        };
        /**
         * Computes the tree changes (entering, exiting) between a fromPath and toPath.
         */
        PathUtils.treeChanges = function (fromPath, toPath, reloadState) {
            var max = Math.min(fromPath.length, toPath.length);
            var keep = 0;
            var nodesMatch = function (node1, node2) { return node1.equals(node2, PathUtils.nonDynamicParams); };
            while (keep < max && fromPath[keep].state !== reloadState && nodesMatch(fromPath[keep], toPath[keep])) {
                keep++;
            }
            /** Given a retained node, return a new node which uses the to node's param values */
            function applyToParams(retainedNode, idx) {
                var cloned = retainedNode.clone();
                cloned.paramValues = toPath[idx].paramValues;
                return cloned;
            }
            var from, retained, exiting, entering, to;
            from = fromPath;
            retained = from.slice(0, keep);
            exiting = from.slice(keep);
            // Create a new retained path (with shallow copies of nodes) which have the params of the toPath mapped
            var retainedWithToParams = retained.map(applyToParams);
            entering = toPath.slice(keep);
            to = retainedWithToParams.concat(entering);
            return { from: from, to: to, retained: retained, retainedWithToParams: retainedWithToParams, exiting: exiting, entering: entering };
        };
        /**
         * Returns a new path which is: the subpath of the first path which matches the second path.
         *
         * The new path starts from root and contains any nodes that match the nodes in the second path.
         * It stops before the first non-matching node.
         *
         * Nodes are compared using their state property and their parameter values.
         * If a `paramsFn` is provided, only the [[Param]] returned by the function will be considered when comparing nodes.
         *
         * @param pathA the first path
         * @param pathB the second path
         * @param paramsFn a function which returns the parameters to consider when comparing
         *
         * @returns an array of PathNodes from the first path which match the nodes in the second path
         */
        PathUtils.matching = function (pathA, pathB, paramsFn) {
            var done = false;
            var tuples = arrayTuples(pathA, pathB);
            return tuples.reduce(function (matching, _a) {
                var nodeA = _a[0], nodeB = _a[1];
                done = done || !nodeA.equals(nodeB, paramsFn);
                return done ? matching : matching.concat(nodeA);
            }, []);
        };
        /**
         * Returns true if two paths are identical.
         *
         * @param pathA
         * @param pathB
         * @param paramsFn a function which returns the parameters to consider when comparing
         * @returns true if the the states and parameter values for both paths are identical
         */
        PathUtils.equals = function (pathA, pathB, paramsFn) {
            return pathA.length === pathB.length && PathUtils.matching(pathA, pathB, paramsFn).length === pathA.length;
        };
        /**
         * Return a subpath of a path, which stops at the first matching node
         *
         * Given an array of nodes, returns a subset of the array starting from the first node,
         * stopping when the first node matches the predicate.
         *
         * @param path a path of [[PathNode]]s
         * @param predicate a [[Predicate]] fn that matches [[PathNode]]s
         * @returns a subpath up to the matching node, or undefined if no match is found
         */
        PathUtils.subPath = function (path, predicate) {
            var node = find(path, predicate);
            var elementIdx = path.indexOf(node);
            return elementIdx === -1 ? undefined : path.slice(0, elementIdx + 1);
        };
        PathUtils.nonDynamicParams = function (node) {
            return node.state.parameters({ inherit: false }).filter(function (param) { return !param.dynamic; });
        };
        /** Gets the raw parameter values from a path */
        PathUtils.paramValues = function (path) { return path.reduce(function (acc, node) { return extend(acc, node.paramValues); }, {}); };
        return PathUtils;
    }());

    /** @internalapi */
    var resolvePolicies = {
        when: {
            LAZY: 'LAZY',
            EAGER: 'EAGER',
        },
        async: {
            WAIT: 'WAIT',
            NOWAIT: 'NOWAIT',
        },
    };

    /** @publicapi @module resolve */ /** */
    // TODO: explicitly make this user configurable
    var defaultResolvePolicy = {
        when: 'LAZY',
        async: 'WAIT',
    };
    /**
     * The basic building block for the resolve system.
     *
     * Resolvables encapsulate a state's resolve's resolveFn, the resolveFn's declared dependencies, the wrapped (.promise),
     * and the unwrapped-when-complete (.data) result of the resolveFn.
     *
     * Resolvable.get() either retrieves the Resolvable's existing promise, or else invokes resolve() (which invokes the
     * resolveFn) and returns the resulting promise.
     *
     * Resolvable.get() and Resolvable.resolve() both execute within a context path, which is passed as the first
     * parameter to those fns.
     */
    var Resolvable = /** @class */ (function () {
        function Resolvable(arg1, resolveFn, deps, policy, data) {
            this.resolved = false;
            this.promise = undefined;
            if (arg1 instanceof Resolvable) {
                extend(this, arg1);
            }
            else if (isFunction(resolveFn)) {
                if (isNullOrUndefined(arg1))
                    throw new Error('new Resolvable(): token argument is required');
                if (!isFunction(resolveFn))
                    throw new Error('new Resolvable(): resolveFn argument must be a function');
                this.token = arg1;
                this.policy = policy;
                this.resolveFn = resolveFn;
                this.deps = deps || [];
                this.data = data;
                this.resolved = data !== undefined;
                this.promise = this.resolved ? services.$q.when(this.data) : undefined;
            }
            else if (isObject(arg1) && arg1.token && (arg1.hasOwnProperty('resolveFn') || arg1.hasOwnProperty('data'))) {
                var literal = arg1;
                return new Resolvable(literal.token, literal.resolveFn, literal.deps, literal.policy, literal.data);
            }
        }
        Resolvable.prototype.getPolicy = function (state) {
            var thisPolicy = this.policy || {};
            var statePolicy = (state && state.resolvePolicy) || {};
            return {
                when: thisPolicy.when || statePolicy.when || defaultResolvePolicy.when,
                async: thisPolicy.async || statePolicy.async || defaultResolvePolicy.async,
            };
        };
        /**
         * Asynchronously resolve this Resolvable's data
         *
         * Given a ResolveContext that this Resolvable is found in:
         * Wait for this Resolvable's dependencies, then invoke this Resolvable's function
         * and update the Resolvable's state
         */
        Resolvable.prototype.resolve = function (resolveContext, trans) {
            var _this = this;
            var $q = services.$q;
            // Gets all dependencies from ResolveContext and wait for them to be resolved
            var getResolvableDependencies = function () {
                return $q.all(resolveContext.getDependencies(_this).map(function (resolvable) { return resolvable.get(resolveContext, trans); }));
            };
            // Invokes the resolve function passing the resolved dependencies as arguments
            var invokeResolveFn = function (resolvedDeps) { return _this.resolveFn.apply(null, resolvedDeps); };
            var node = resolveContext.findNode(this);
            var state = node && node.state;
            var asyncPolicy = this.getPolicy(state).async;
            var customAsyncPolicy = isFunction(asyncPolicy) ? asyncPolicy : identity;
            // After the final value has been resolved, update the state of the Resolvable
            var applyResolvedValue = function (resolvedValue) {
                _this.data = resolvedValue;
                _this.resolved = true;
                _this.resolveFn = null;
                trace.traceResolvableResolved(_this, trans);
                return _this.data;
            };
            // Sets the promise property first, then getsResolvableDependencies in the context of the promise chain. Always waits one tick.
            return (this.promise = $q
                .when()
                .then(getResolvableDependencies)
                .then(invokeResolveFn)
                .then(customAsyncPolicy)
                .then(applyResolvedValue));
        };
        /**
         * Gets a promise for this Resolvable's data.
         *
         * Fetches the data and returns a promise.
         * Returns the existing promise if it has already been fetched once.
         */
        Resolvable.prototype.get = function (resolveContext, trans) {
            return this.promise || this.resolve(resolveContext, trans);
        };
        Resolvable.prototype.toString = function () {
            return "Resolvable(token: " + stringify(this.token) + ", requires: [" + this.deps.map(stringify) + "])";
        };
        Resolvable.prototype.clone = function () {
            return new Resolvable(this);
        };
        Resolvable.fromData = function (token, data) { return new Resolvable(token, function () { return data; }, null, null, data); };
        return Resolvable;
    }());

    /** @publicapi @module resolve */ /** */
    var whens = resolvePolicies.when;
    var ALL_WHENS = [whens.EAGER, whens.LAZY];
    var EAGER_WHENS = [whens.EAGER];
    // tslint:disable-next-line:no-inferrable-types
    var NATIVE_INJECTOR_TOKEN = 'Native Injector';
    /**
     * Encapsulates Dependency Injection for a path of nodes
     *
     * UI-Router states are organized as a tree.
     * A nested state has a path of ancestors to the root of the tree.
     * When a state is being activated, each element in the path is wrapped as a [[PathNode]].
     * A `PathNode` is a stateful object that holds things like parameters and resolvables for the state being activated.
     *
     * The ResolveContext closes over the [[PathNode]]s, and provides DI for the last node in the path.
     */
    var ResolveContext = /** @class */ (function () {
        function ResolveContext(_path) {
            this._path = _path;
        }
        /** Gets all the tokens found in the resolve context, de-duplicated */
        ResolveContext.prototype.getTokens = function () {
            return this._path.reduce(function (acc, node) { return acc.concat(node.resolvables.map(function (r) { return r.token; })); }, []).reduce(uniqR, []);
        };
        /**
         * Gets the Resolvable that matches the token
         *
         * Gets the last Resolvable that matches the token in this context, or undefined.
         * Throws an error if it doesn't exist in the ResolveContext
         */
        ResolveContext.prototype.getResolvable = function (token) {
            var matching = this._path
                .map(function (node) { return node.resolvables; })
                .reduce(unnestR, [])
                .filter(function (r) { return r.token === token; });
            return tail(matching);
        };
        /** Returns the [[ResolvePolicy]] for the given [[Resolvable]] */
        ResolveContext.prototype.getPolicy = function (resolvable) {
            var node = this.findNode(resolvable);
            return resolvable.getPolicy(node.state);
        };
        /**
         * Returns a ResolveContext that includes a portion of this one
         *
         * Given a state, this method creates a new ResolveContext from this one.
         * The new context starts at the first node (root) and stops at the node for the `state` parameter.
         *
         * #### Why
         *
         * When a transition is created, the nodes in the "To Path" are injected from a ResolveContext.
         * A ResolveContext closes over a path of [[PathNode]]s and processes the resolvables.
         * The "To State" can inject values from its own resolvables, as well as those from all its ancestor state's (node's).
         * This method is used to create a narrower context when injecting ancestor nodes.
         *
         * @example
         * `let ABCD = new ResolveContext([A, B, C, D]);`
         *
         * Given a path `[A, B, C, D]`, where `A`, `B`, `C` and `D` are nodes for states `a`, `b`, `c`, `d`:
         * When injecting `D`, `D` should have access to all resolvables from `A`, `B`, `C`, `D`.
         * However, `B` should only be able to access resolvables from `A`, `B`.
         *
         * When resolving for the `B` node, first take the full "To Path" Context `[A,B,C,D]` and limit to the subpath `[A,B]`.
         * `let AB = ABCD.subcontext(a)`
         */
        ResolveContext.prototype.subContext = function (state) {
            return new ResolveContext(PathUtils.subPath(this._path, function (node) { return node.state === state; }));
        };
        /**
         * Adds Resolvables to the node that matches the state
         *
         * This adds a [[Resolvable]] (generally one created on the fly; not declared on a [[StateDeclaration.resolve]] block).
         * The resolvable is added to the node matching the `state` parameter.
         *
         * These new resolvables are not automatically fetched.
         * The calling code should either fetch them, fetch something that depends on them,
         * or rely on [[resolvePath]] being called when some state is being entered.
         *
         * Note: each resolvable's [[ResolvePolicy]] is merged with the state's policy, and the global default.
         *
         * @param newResolvables the new Resolvables
         * @param state Used to find the node to put the resolvable on
         */
        ResolveContext.prototype.addResolvables = function (newResolvables, state) {
            var node = find(this._path, propEq('state', state));
            var keys = newResolvables.map(function (r) { return r.token; });
            node.resolvables = node.resolvables.filter(function (r) { return keys.indexOf(r.token) === -1; }).concat(newResolvables);
        };
        /**
         * Returns a promise for an array of resolved path Element promises
         *
         * @param when
         * @param trans
         * @returns {Promise<any>|any}
         */
        ResolveContext.prototype.resolvePath = function (when, trans) {
            var _this = this;
            if (when === void 0) { when = 'LAZY'; }
            // This option determines which 'when' policy Resolvables we are about to fetch.
            var whenOption = inArray(ALL_WHENS, when) ? when : 'LAZY';
            // If the caller specified EAGER, only the EAGER Resolvables are fetched.
            // if the caller specified LAZY, both EAGER and LAZY Resolvables are fetched.`
            var matchedWhens = whenOption === resolvePolicies.when.EAGER ? EAGER_WHENS : ALL_WHENS;
            // get the subpath to the state argument, if provided
            trace.traceResolvePath(this._path, when, trans);
            var matchesPolicy = function (acceptedVals, whenOrAsync) { return function (resolvable) {
                return inArray(acceptedVals, _this.getPolicy(resolvable)[whenOrAsync]);
            }; };
            // Trigger all the (matching) Resolvables in the path
            // Reduce all the "WAIT" Resolvables into an array
            var promises = this._path.reduce(function (acc, node) {
                var nodeResolvables = node.resolvables.filter(matchesPolicy(matchedWhens, 'when'));
                var nowait = nodeResolvables.filter(matchesPolicy(['NOWAIT'], 'async'));
                var wait = nodeResolvables.filter(not(matchesPolicy(['NOWAIT'], 'async')));
                // For the matching Resolvables, start their async fetch process.
                var subContext = _this.subContext(node.state);
                var getResult = function (r) {
                    return r
                        .get(subContext, trans)
                        // Return a tuple that includes the Resolvable's token
                        .then(function (value) { return ({ token: r.token, value: value }); });
                };
                nowait.forEach(getResult);
                return acc.concat(wait.map(getResult));
            }, []);
            // Wait for all the "WAIT" resolvables
            return services.$q.all(promises);
        };
        ResolveContext.prototype.injector = function () {
            return this._injector || (this._injector = new UIInjectorImpl(this));
        };
        ResolveContext.prototype.findNode = function (resolvable) {
            return find(this._path, function (node) { return inArray(node.resolvables, resolvable); });
        };
        /**
         * Gets the async dependencies of a Resolvable
         *
         * Given a Resolvable, returns its dependencies as a Resolvable[]
         */
        ResolveContext.prototype.getDependencies = function (resolvable) {
            var _this = this;
            var node = this.findNode(resolvable);
            // Find which other resolvables are "visible" to the `resolvable` argument
            // subpath stopping at resolvable's node, or the whole path (if the resolvable isn't in the path)
            var subPath = PathUtils.subPath(this._path, function (x) { return x === node; }) || this._path;
            var availableResolvables = subPath
                .reduce(function (acc, _node) { return acc.concat(_node.resolvables); }, []) // all of subpath's resolvables
                .filter(function (res) { return res !== resolvable; }); // filter out the `resolvable` argument
            var getDependency = function (token) {
                var matching = availableResolvables.filter(function (r) { return r.token === token; });
                if (matching.length)
                    return tail(matching);
                var fromInjector = _this.injector().getNative(token);
                if (isUndefined(fromInjector)) {
                    throw new Error('Could not find Dependency Injection token: ' + stringify(token));
                }
                return new Resolvable(token, function () { return fromInjector; }, [], fromInjector);
            };
            return resolvable.deps.map(getDependency);
        };
        return ResolveContext;
    }());
    /** @internalapi */
    var UIInjectorImpl = /** @class */ (function () {
        function UIInjectorImpl(context) {
            this.context = context;
            this.native = this.get(NATIVE_INJECTOR_TOKEN) || services.$injector;
        }
        UIInjectorImpl.prototype.get = function (token) {
            var resolvable = this.context.getResolvable(token);
            if (resolvable) {
                if (this.context.getPolicy(resolvable).async === 'NOWAIT') {
                    return resolvable.get(this.context);
                }
                if (!resolvable.resolved) {
                    throw new Error('Resolvable async .get() not complete:' + stringify(resolvable.token));
                }
                return resolvable.data;
            }
            return this.getNative(token);
        };
        UIInjectorImpl.prototype.getAsync = function (token) {
            var resolvable = this.context.getResolvable(token);
            if (resolvable)
                return resolvable.get(this.context);
            return services.$q.when(this.native.get(token));
        };
        UIInjectorImpl.prototype.getNative = function (token) {
            return this.native && this.native.get(token);
        };
        return UIInjectorImpl;
    }());

    /** @publicapi @module state */ /** */
    var parseUrl = function (url) {
        if (!isString(url))
            return false;
        var root = url.charAt(0) === '^';
        return { val: root ? url.substring(1) : url, root: root };
    };
    function nameBuilder(state) {
        return state.name;
    }
    function selfBuilder(state) {
        state.self.$$state = function () { return state; };
        return state.self;
    }
    function dataBuilder(state) {
        if (state.parent && state.parent.data) {
            state.data = state.self.data = inherit(state.parent.data, state.data);
        }
        return state.data;
    }
    var getUrlBuilder = function ($urlMatcherFactoryProvider, root) {
        return function urlBuilder(stateObject) {
            var stateDec = stateObject.self;
            // For future states, i.e., states whose name ends with `.**`,
            // match anything that starts with the url prefix
            if (stateDec && stateDec.url && stateDec.name && stateDec.name.match(/\.\*\*$/)) {
                var newStateDec = {};
                copy(stateDec, newStateDec);
                newStateDec.url += '{remainder:any}'; // match any path (.*)
                stateDec = newStateDec;
            }
            var parent = stateObject.parent;
            var parsed = parseUrl(stateDec.url);
            var url = !parsed ? stateDec.url : $urlMatcherFactoryProvider.compile(parsed.val, { state: stateDec });
            if (!url)
                return null;
            if (!$urlMatcherFactoryProvider.isMatcher(url))
                throw new Error("Invalid url '" + url + "' in state '" + stateObject + "'");
            return parsed && parsed.root ? url : ((parent && parent.navigable) || root()).url.append(url);
        };
    };
    var getNavigableBuilder = function (isRoot) {
        return function navigableBuilder(state) {
            return !isRoot(state) && state.url ? state : state.parent ? state.parent.navigable : null;
        };
    };
    var getParamsBuilder = function (paramFactory) {
        return function paramsBuilder(state) {
            var makeConfigParam = function (config, id) { return paramFactory.fromConfig(id, null, state.self); };
            var urlParams = (state.url && state.url.parameters({ inherit: false })) || [];
            var nonUrlParams = values(mapObj(omit(state.params || {}, urlParams.map(prop('id'))), makeConfigParam));
            return urlParams
                .concat(nonUrlParams)
                .map(function (p) { return [p.id, p]; })
                .reduce(applyPairs, {});
        };
    };
    function pathBuilder(state) {
        return state.parent ? state.parent.path.concat(state) : /*root*/ [state];
    }
    function includesBuilder(state) {
        var includes = state.parent ? extend({}, state.parent.includes) : {};
        includes[state.name] = true;
        return includes;
    }
    /**
     * This is a [[StateBuilder.builder]] function for the `resolve:` block on a [[StateDeclaration]].
     *
     * When the [[StateBuilder]] builds a [[StateObject]] object from a raw [[StateDeclaration]], this builder
     * validates the `resolve` property and converts it to a [[Resolvable]] array.
     *
     * resolve: input value can be:
     *
     * {
     *   // analyzed but not injected
     *   myFooResolve: function() { return "myFooData"; },
     *
     *   // function.toString() parsed, "DependencyName" dep as string (not min-safe)
     *   myBarResolve: function(DependencyName) { return DependencyName.fetchSomethingAsPromise() },
     *
     *   // Array split; "DependencyName" dep as string
     *   myBazResolve: [ "DependencyName", function(dep) { return dep.fetchSomethingAsPromise() },
     *
     *   // Array split; DependencyType dep as token (compared using ===)
     *   myQuxResolve: [ DependencyType, function(dep) { return dep.fetchSometingAsPromise() },
     *
     *   // val.$inject used as deps
     *   // where:
     *   //     corgeResolve.$inject = ["DependencyName"];
     *   //     function corgeResolve(dep) { dep.fetchSometingAsPromise() }
     *   // then "DependencyName" dep as string
     *   myCorgeResolve: corgeResolve,
     *
     *  // inject service by name
     *  // When a string is found, desugar creating a resolve that injects the named service
     *   myGraultResolve: "SomeService"
     * }
     *
     * or:
     *
     * [
     *   new Resolvable("myFooResolve", function() { return "myFooData" }),
     *   new Resolvable("myBarResolve", function(dep) { return dep.fetchSomethingAsPromise() }, [ "DependencyName" ]),
     *   { provide: "myBazResolve", useFactory: function(dep) { dep.fetchSomethingAsPromise() }, deps: [ "DependencyName" ] }
     * ]
     */
    function resolvablesBuilder(state) {
        /** convert resolve: {} and resolvePolicy: {} objects to an array of tuples */
        var objects2Tuples = function (resolveObj, resolvePolicies) {
            return Object.keys(resolveObj || {}).map(function (token) { return ({
                token: token,
                val: resolveObj[token],
                deps: undefined,
                policy: resolvePolicies[token],
            }); });
        };
        /** fetch DI annotations from a function or ng1-style array */
        var annotate = function (fn) {
            var $injector = services.$injector;
            // ng1 doesn't have an $injector until runtime.
            // If the $injector doesn't exist, use "deferred" literal as a
            // marker indicating they should be annotated when runtime starts
            return fn['$inject'] || ($injector && $injector.annotate(fn, $injector.strictDi)) || 'deferred';
        };
        /** true if the object has both `token` and `resolveFn`, and is probably a [[ResolveLiteral]] */
        var isResolveLiteral = function (obj) { return !!(obj.token && obj.resolveFn); };
        /** true if the object looks like a provide literal, or a ng2 Provider */
        var isLikeNg2Provider = function (obj) {
            return !!((obj.provide || obj.token) && (obj.useValue || obj.useFactory || obj.useExisting || obj.useClass));
        };
        /** true if the object looks like a tuple from obj2Tuples */
        var isTupleFromObj = function (obj) {
            return !!(obj && obj.val && (isString(obj.val) || isArray(obj.val) || isFunction(obj.val)));
        };
        /** extracts the token from a Provider or provide literal */
        var getToken = function (p) { return p.provide || p.token; };
        // prettier-ignore: Given a literal resolve or provider object, returns a Resolvable
        var literal2Resolvable = pattern([
            [prop('resolveFn'), function (p) { return new Resolvable(getToken(p), p.resolveFn, p.deps, p.policy); }],
            [prop('useFactory'), function (p) { return new Resolvable(getToken(p), p.useFactory, p.deps || p.dependencies, p.policy); }],
            [prop('useClass'), function (p) { return new Resolvable(getToken(p), function () { return new p.useClass(); }, [], p.policy); }],
            [prop('useValue'), function (p) { return new Resolvable(getToken(p), function () { return p.useValue; }, [], p.policy, p.useValue); }],
            [prop('useExisting'), function (p) { return new Resolvable(getToken(p), identity, [p.useExisting], p.policy); }],
        ]);
        // prettier-ignore
        var tuple2Resolvable = pattern([
            [pipe(prop('val'), isString), function (tuple) { return new Resolvable(tuple.token, identity, [tuple.val], tuple.policy); }],
            [pipe(prop('val'), isArray), function (tuple) { return new Resolvable(tuple.token, tail(tuple.val), tuple.val.slice(0, -1), tuple.policy); }],
            [pipe(prop('val'), isFunction), function (tuple) { return new Resolvable(tuple.token, tuple.val, annotate(tuple.val), tuple.policy); }],
        ]);
        // prettier-ignore
        var item2Resolvable = pattern([
            [is(Resolvable), function (r) { return r; }],
            [isResolveLiteral, literal2Resolvable],
            [isLikeNg2Provider, literal2Resolvable],
            [isTupleFromObj, tuple2Resolvable],
            [val(true), function (obj) { throw new Error('Invalid resolve value: ' + stringify(obj)); },],
        ]);
        // If resolveBlock is already an array, use it as-is.
        // Otherwise, assume it's an object and convert to an Array of tuples
        var decl = state.resolve;
        var items = isArray(decl) ? decl : objects2Tuples(decl, state.resolvePolicy || {});
        return items.map(item2Resolvable);
    }
    /**
     * @internalapi A internal global service
     *
     * StateBuilder is a factory for the internal [[StateObject]] objects.
     *
     * When you register a state with the [[StateRegistry]], you register a plain old javascript object which
     * conforms to the [[StateDeclaration]] interface.  This factory takes that object and builds the corresponding
     * [[StateObject]] object, which has an API and is used internally.
     *
     * Custom properties or API may be added to the internal [[StateObject]] object by registering a decorator function
     * using the [[builder]] method.
     */
    var StateBuilder = /** @class */ (function () {
        function StateBuilder(matcher, urlMatcherFactory) {
            this.matcher = matcher;
            var self = this;
            var root = function () { return matcher.find(''); };
            var isRoot = function (state) { return state.name === ''; };
            function parentBuilder(state) {
                if (isRoot(state))
                    return null;
                return matcher.find(self.parentName(state)) || root();
            }
            this.builders = {
                name: [nameBuilder],
                self: [selfBuilder],
                parent: [parentBuilder],
                data: [dataBuilder],
                // Build a URLMatcher if necessary, either via a relative or absolute URL
                url: [getUrlBuilder(urlMatcherFactory, root)],
                // Keep track of the closest ancestor state that has a URL (i.e. is navigable)
                navigable: [getNavigableBuilder(isRoot)],
                params: [getParamsBuilder(urlMatcherFactory.paramFactory)],
                // Each framework-specific ui-router implementation should define its own `views` builder
                // e.g., src/ng1/statebuilders/views.ts
                views: [],
                // Keep a full path from the root down to this state as this is needed for state activation.
                path: [pathBuilder],
                // Speed up $state.includes() as it's used a lot
                includes: [includesBuilder],
                resolvables: [resolvablesBuilder],
            };
        }
        /**
         * Registers a [[BuilderFunction]] for a specific [[StateObject]] property (e.g., `parent`, `url`, or `path`).
         * More than one BuilderFunction can be registered for a given property.
         *
         * The BuilderFunction(s) will be used to define the property on any subsequently built [[StateObject]] objects.
         *
         * @param name The name of the State property being registered for.
         * @param fn The BuilderFunction which will be used to build the State property
         * @returns a function which deregisters the BuilderFunction
         */
        StateBuilder.prototype.builder = function (name, fn) {
            var builders = this.builders;
            var array = builders[name] || [];
            // Backwards compat: if only one builder exists, return it, else return whole arary.
            if (isString(name) && !isDefined(fn))
                return array.length > 1 ? array : array[0];
            if (!isString(name) || !isFunction(fn))
                return;
            builders[name] = array;
            builders[name].push(fn);
            return function () { return builders[name].splice(builders[name].indexOf(fn, 1)) && null; };
        };
        /**
         * Builds all of the properties on an essentially blank State object, returning a State object which has all its
         * properties and API built.
         *
         * @param state an uninitialized State object
         * @returns the built State object
         */
        StateBuilder.prototype.build = function (state) {
            var _a = this, matcher = _a.matcher, builders = _a.builders;
            var parent = this.parentName(state);
            if (parent && !matcher.find(parent, undefined, false)) {
                return null;
            }
            for (var key in builders) {
                if (!builders.hasOwnProperty(key))
                    continue;
                var chain = builders[key].reduce(function (parentFn, step) { return function (_state) { return step(_state, parentFn); }; }, noop);
                state[key] = chain(state);
            }
            return state;
        };
        StateBuilder.prototype.parentName = function (state) {
            // name = 'foo.bar.baz.**'
            var name = state.name || '';
            // segments = ['foo', 'bar', 'baz', '.**']
            var segments = name.split('.');
            // segments = ['foo', 'bar', 'baz']
            var lastSegment = segments.pop();
            // segments = ['foo', 'bar'] (ignore .** segment for future states)
            if (lastSegment === '**')
                segments.pop();
            if (segments.length) {
                if (state.parent) {
                    throw new Error("States that specify the 'parent:' property should not have a '.' in their name (" + name + ")");
                }
                // 'foo.bar'
                return segments.join('.');
            }
            if (!state.parent)
                return '';
            return isString(state.parent) ? state.parent : state.parent.name;
        };
        StateBuilder.prototype.name = function (state) {
            var name = state.name;
            if (name.indexOf('.') !== -1 || !state.parent)
                return name;
            var parentName = isString(state.parent) ? state.parent : state.parent.name;
            return parentName ? parentName + '.' + name : name;
        };
        return StateBuilder;
    }());

    /**
     * Internal representation of a UI-Router state.
     *
     * Instances of this class are created when a [[StateDeclaration]] is registered with the [[StateRegistry]].
     *
     * A registered [[StateDeclaration]] is augmented with a getter ([[StateDeclaration.$$state]]) which returns the corresponding [[StateObject]] object.
     *
     * This class prototypally inherits from the corresponding [[StateDeclaration]].
     * Each of its own properties (i.e., `hasOwnProperty`) are built using builders from the [[StateBuilder]].
     */
    var StateObject = /** @class */ (function () {
        /** @deprecated use State.create() */
        function StateObject(config) {
            return StateObject.create(config || {});
        }
        /**
         * Create a state object to put the private/internal implementation details onto.
         * The object's prototype chain looks like:
         * (Internal State Object) -> (Copy of State.prototype) -> (State Declaration object) -> (State Declaration's prototype...)
         *
         * @param stateDecl the user-supplied State Declaration
         * @returns {StateObject} an internal State object
         */
        StateObject.create = function (stateDecl) {
            stateDecl = StateObject.isStateClass(stateDecl) ? new stateDecl() : stateDecl;
            var state = inherit(inherit(stateDecl, StateObject.prototype));
            stateDecl.$$state = function () { return state; };
            state.self = stateDecl;
            state.__stateObjectCache = {
                nameGlob: Glob.fromString(state.name),
            };
            return state;
        };
        /**
         * Returns true if the provided parameter is the same state.
         *
         * Compares the identity of the state against the passed value, which is either an object
         * reference to the actual `State` instance, the original definition object passed to
         * `$stateProvider.state()`, or the fully-qualified name.
         *
         * @param ref Can be one of (a) a `State` instance, (b) an object that was passed
         *        into `$stateProvider.state()`, (c) the fully-qualified name of a state as a string.
         * @returns Returns `true` if `ref` matches the current `State` instance.
         */
        StateObject.prototype.is = function (ref) {
            return this === ref || this.self === ref || this.fqn() === ref;
        };
        /**
         * @deprecated this does not properly handle dot notation
         * @returns Returns a dot-separated name of the state.
         */
        StateObject.prototype.fqn = function () {
            if (!this.parent || !(this.parent instanceof this.constructor))
                return this.name;
            var name = this.parent.fqn();
            return name ? name + '.' + this.name : this.name;
        };
        /**
         * Returns the root node of this state's tree.
         *
         * @returns The root of this state's tree.
         */
        StateObject.prototype.root = function () {
            return (this.parent && this.parent.root()) || this;
        };
        /**
         * Gets the state's `Param` objects
         *
         * Gets the list of [[Param]] objects owned by the state.
         * If `opts.inherit` is true, it also includes the ancestor states' [[Param]] objects.
         * If `opts.matchingKeys` exists, returns only `Param`s whose `id` is a key on the `matchingKeys` object
         *
         * @param opts options
         */
        StateObject.prototype.parameters = function (opts) {
            opts = defaults(opts, { inherit: true, matchingKeys: null });
            var inherited = (opts.inherit && this.parent && this.parent.parameters()) || [];
            return inherited
                .concat(values(this.params))
                .filter(function (param) { return !opts.matchingKeys || opts.matchingKeys.hasOwnProperty(param.id); });
        };
        /**
         * Returns a single [[Param]] that is owned by the state
         *
         * If `opts.inherit` is true, it also searches the ancestor states` [[Param]]s.
         * @param id the name of the [[Param]] to return
         * @param opts options
         */
        StateObject.prototype.parameter = function (id, opts) {
            if (opts === void 0) { opts = {}; }
            return ((this.url && this.url.parameter(id, opts)) ||
                find(values(this.params), propEq('id', id)) ||
                (opts.inherit && this.parent && this.parent.parameter(id)));
        };
        StateObject.prototype.toString = function () {
            return this.fqn();
        };
        /** Predicate which returns true if the object is an class with @State() decorator */
        StateObject.isStateClass = function (stateDecl) {
            return isFunction(stateDecl) && stateDecl['__uiRouterState'] === true;
        };
        /** Predicate which returns true if the object is an internal [[StateObject]] object */
        StateObject.isState = function (obj) { return isObject(obj['__stateObjectCache']); };
        return StateObject;
    }());

    /** @publicapi @module state */ /** */
    var StateMatcher = /** @class */ (function () {
        function StateMatcher(_states) {
            this._states = _states;
        }
        StateMatcher.prototype.isRelative = function (stateName) {
            stateName = stateName || '';
            return stateName.indexOf('.') === 0 || stateName.indexOf('^') === 0;
        };
        StateMatcher.prototype.find = function (stateOrName, base, matchGlob) {
            if (matchGlob === void 0) { matchGlob = true; }
            if (!stateOrName && stateOrName !== '')
                return undefined;
            var isStr = isString(stateOrName);
            var name = isStr ? stateOrName : stateOrName.name;
            if (this.isRelative(name))
                name = this.resolvePath(name, base);
            var state = this._states[name];
            if (state && (isStr || (!isStr && (state === stateOrName || state.self === stateOrName)))) {
                return state;
            }
            else if (isStr && matchGlob) {
                var _states = values(this._states);
                var matches = _states.filter(function (_state) { return _state.__stateObjectCache.nameGlob && _state.__stateObjectCache.nameGlob.matches(name); });
                if (matches.length > 1) {
                    safeConsole.error("stateMatcher.find: Found multiple matches for " + name + " using glob: ", matches.map(function (match) { return match.name; }));
                }
                return matches[0];
            }
            return undefined;
        };
        StateMatcher.prototype.resolvePath = function (name, base) {
            if (!base)
                throw new Error("No reference point given for path '" + name + "'");
            var baseState = this.find(base);
            var splitName = name.split('.');
            var pathLength = splitName.length;
            var i = 0, current = baseState;
            for (; i < pathLength; i++) {
                if (splitName[i] === '' && i === 0) {
                    current = baseState;
                    continue;
                }
                if (splitName[i] === '^') {
                    if (!current.parent)
                        throw new Error("Path '" + name + "' not valid for state '" + baseState.name + "'");
                    current = current.parent;
                    continue;
                }
                break;
            }
            var relName = splitName.slice(i).join('.');
            return current.name + (current.name && relName ? '.' : '') + relName;
        };
        return StateMatcher;
    }());

    /** @publicapi @module state */ /** */
    /** @internalapi */
    var StateQueueManager = /** @class */ (function () {
        function StateQueueManager(router, states, builder, listeners) {
            this.router = router;
            this.states = states;
            this.builder = builder;
            this.listeners = listeners;
            this.queue = [];
        }
        /** @internalapi */
        StateQueueManager.prototype.dispose = function () {
            this.queue = [];
        };
        StateQueueManager.prototype.register = function (stateDecl) {
            var queue = this.queue;
            var state = StateObject.create(stateDecl);
            var name = state.name;
            if (!isString(name))
                throw new Error('State must have a valid name');
            if (this.states.hasOwnProperty(name) || inArray(queue.map(prop('name')), name))
                throw new Error("State '" + name + "' is already defined");
            queue.push(state);
            this.flush();
            return state;
        };
        StateQueueManager.prototype.flush = function () {
            var _this = this;
            var _a = this, queue = _a.queue, states = _a.states, builder = _a.builder;
            var registered = [], // states that got registered
            orphans = [], // states that don't yet have a parent registered
            previousQueueLength = {}; // keep track of how long the queue when an orphan was first encountered
            var getState = function (name) { return _this.states.hasOwnProperty(name) && _this.states[name]; };
            var notifyListeners = function () {
                if (registered.length) {
                    _this.listeners.forEach(function (listener) { return listener('registered', registered.map(function (s) { return s.self; })); });
                }
            };
            while (queue.length > 0) {
                var state = queue.shift();
                var name_1 = state.name;
                var result = builder.build(state);
                var orphanIdx = orphans.indexOf(state);
                if (result) {
                    var existingState = getState(name_1);
                    if (existingState && existingState.name === name_1) {
                        throw new Error("State '" + name_1 + "' is already defined");
                    }
                    var existingFutureState = getState(name_1 + '.**');
                    if (existingFutureState) {
                        // Remove future state of the same name
                        this.router.stateRegistry.deregister(existingFutureState);
                    }
                    states[name_1] = state;
                    this.attachRoute(state);
                    if (orphanIdx >= 0)
                        orphans.splice(orphanIdx, 1);
                    registered.push(state);
                    continue;
                }
                var prev = previousQueueLength[name_1];
                previousQueueLength[name_1] = queue.length;
                if (orphanIdx >= 0 && prev === queue.length) {
                    // Wait until two consecutive iterations where no additional states were dequeued successfully.
                    // throw new Error(`Cannot register orphaned state '${name}'`);
                    queue.push(state);
                    notifyListeners();
                    return states;
                }
                else if (orphanIdx < 0) {
                    orphans.push(state);
                }
                queue.push(state);
            }
            notifyListeners();
            return states;
        };
        StateQueueManager.prototype.attachRoute = function (state) {
            if (state.abstract || !state.url)
                return;
            var rulesApi = this.router.urlService.rules;
            rulesApi.rule(rulesApi.urlRuleFactory.create(state));
        };
        return StateQueueManager;
    }());

    /** @publicapi @module state */ /** */
    var StateRegistry = /** @class */ (function () {
        /** @internalapi */
        function StateRegistry(router) {
            this.router = router;
            this.states = {};
            this.listeners = [];
            this.matcher = new StateMatcher(this.states);
            this.builder = new StateBuilder(this.matcher, router.urlMatcherFactory);
            this.stateQueue = new StateQueueManager(router, this.states, this.builder, this.listeners);
            this._registerRoot();
        }
        /** @internalapi */
        StateRegistry.prototype._registerRoot = function () {
            var rootStateDef = {
                name: '',
                url: '^',
                views: null,
                params: {
                    '#': { value: null, type: 'hash', dynamic: true },
                },
                abstract: true,
            };
            var _root = (this._root = this.stateQueue.register(rootStateDef));
            _root.navigable = null;
        };
        /** @internalapi */
        StateRegistry.prototype.dispose = function () {
            var _this = this;
            this.stateQueue.dispose();
            this.listeners = [];
            this.get().forEach(function (state) { return _this.get(state) && _this.deregister(state); });
        };
        /**
         * Listen for a State Registry events
         *
         * Adds a callback that is invoked when states are registered or deregistered with the StateRegistry.
         *
         * #### Example:
         * ```js
         * let allStates = registry.get();
         *
         * // Later, invoke deregisterFn() to remove the listener
         * let deregisterFn = registry.onStatesChanged((event, states) => {
         *   switch(event) {
         *     case: 'registered':
         *       states.forEach(state => allStates.push(state));
         *       break;
         *     case: 'deregistered':
         *       states.forEach(state => {
         *         let idx = allStates.indexOf(state);
         *         if (idx !== -1) allStates.splice(idx, 1);
         *       });
         *       break;
         *   }
         * });
         * ```
         *
         * @param listener a callback function invoked when the registered states changes.
         *        The function receives two parameters, `event` and `state`.
         *        See [[StateRegistryListener]]
         * @return a function that deregisters the listener
         */
        StateRegistry.prototype.onStatesChanged = function (listener) {
            this.listeners.push(listener);
            return function deregisterListener() {
                removeFrom(this.listeners)(listener);
            }.bind(this);
        };
        /**
         * Gets the implicit root state
         *
         * Gets the root of the state tree.
         * The root state is implicitly created by UI-Router.
         * Note: this returns the internal [[StateObject]] representation, not a [[StateDeclaration]]
         *
         * @return the root [[StateObject]]
         */
        StateRegistry.prototype.root = function () {
            return this._root;
        };
        /**
         * Adds a state to the registry
         *
         * Registers a [[StateDeclaration]] or queues it for registration.
         *
         * Note: a state will be queued if the state's parent isn't yet registered.
         *
         * @param stateDefinition the definition of the state to register.
         * @returns the internal [[StateObject]] object.
         *          If the state was successfully registered, then the object is fully built (See: [[StateBuilder]]).
         *          If the state was only queued, then the object is not fully built.
         */
        StateRegistry.prototype.register = function (stateDefinition) {
            return this.stateQueue.register(stateDefinition);
        };
        /** @hidden */
        StateRegistry.prototype._deregisterTree = function (state) {
            var _this = this;
            var all = this.get().map(function (s) { return s.$$state(); });
            var getChildren = function (states) {
                var _children = all.filter(function (s) { return states.indexOf(s.parent) !== -1; });
                return _children.length === 0 ? _children : _children.concat(getChildren(_children));
            };
            var children = getChildren([state]);
            var deregistered = [state].concat(children).reverse();
            deregistered.forEach(function (_state) {
                var rulesApi = _this.router.urlService.rules;
                // Remove URL rule
                rulesApi
                    .rules()
                    .filter(propEq('state', _state))
                    .forEach(function (rule) { return rulesApi.removeRule(rule); });
                // Remove state from registry
                delete _this.states[_state.name];
            });
            return deregistered;
        };
        /**
         * Removes a state from the registry
         *
         * This removes a state from the registry.
         * If the state has children, they are are also removed from the registry.
         *
         * @param stateOrName the state's name or object representation
         * @returns {StateObject[]} a list of removed states
         */
        StateRegistry.prototype.deregister = function (stateOrName) {
            var _state = this.get(stateOrName);
            if (!_state)
                throw new Error("Can't deregister state; not found: " + stateOrName);
            var deregisteredStates = this._deregisterTree(_state.$$state());
            this.listeners.forEach(function (listener) { return listener('deregistered', deregisteredStates.map(function (s) { return s.self; })); });
            return deregisteredStates;
        };
        StateRegistry.prototype.get = function (stateOrName, base) {
            var _this = this;
            if (arguments.length === 0)
                return Object.keys(this.states).map(function (name) { return _this.states[name].self; });
            var found = this.matcher.find(stateOrName, base);
            return (found && found.self) || null;
        };
        StateRegistry.prototype.decorator = function (name, func) {
            return this.builder.builder(name, func);
        };
        return StateRegistry;
    }());

    (function (TransitionHookPhase) {
        TransitionHookPhase[TransitionHookPhase["CREATE"] = 0] = "CREATE";
        TransitionHookPhase[TransitionHookPhase["BEFORE"] = 1] = "BEFORE";
        TransitionHookPhase[TransitionHookPhase["RUN"] = 2] = "RUN";
        TransitionHookPhase[TransitionHookPhase["SUCCESS"] = 3] = "SUCCESS";
        TransitionHookPhase[TransitionHookPhase["ERROR"] = 4] = "ERROR";
    })(exports.TransitionHookPhase || (exports.TransitionHookPhase = {}));

    (function (TransitionHookScope) {
        TransitionHookScope[TransitionHookScope["TRANSITION"] = 0] = "TRANSITION";
        TransitionHookScope[TransitionHookScope["STATE"] = 1] = "STATE";
    })(exports.TransitionHookScope || (exports.TransitionHookScope = {}));

    /** @publicapi @module transition */ /** */
    var defaultOptions = {
        current: noop,
        transition: null,
        traceData: {},
        bind: null,
    };
    /** @hidden */
    var TransitionHook = /** @class */ (function () {
        function TransitionHook(transition, stateContext, registeredHook, options) {
            var _this = this;
            this.transition = transition;
            this.stateContext = stateContext;
            this.registeredHook = registeredHook;
            this.options = options;
            this.isSuperseded = function () { return _this.type.hookPhase === exports.TransitionHookPhase.RUN && !_this.options.transition.isActive(); };
            this.options = defaults(options, defaultOptions);
            this.type = registeredHook.eventType;
        }
        /**
         * Chains together an array of TransitionHooks.
         *
         * Given a list of [[TransitionHook]] objects, chains them together.
         * Each hook is invoked after the previous one completes.
         *
         * #### Example:
         * ```js
         * var hooks: TransitionHook[] = getHooks();
         * let promise: Promise<any> = TransitionHook.chain(hooks);
         *
         * promise.then(handleSuccess, handleError);
         * ```
         *
         * @param hooks the list of hooks to chain together
         * @param waitFor if provided, the chain is `.then()`'ed off this promise
         * @returns a `Promise` for sequentially invoking the hooks (in order)
         */
        TransitionHook.chain = function (hooks, waitFor) {
            // Chain the next hook off the previous
            var createHookChainR = function (prev, nextHook) { return prev.then(function () { return nextHook.invokeHook(); }); };
            return hooks.reduce(createHookChainR, waitFor || services.$q.when());
        };
        /**
         * Invokes all the provided TransitionHooks, in order.
         * Each hook's return value is checked.
         * If any hook returns a promise, then the rest of the hooks are chained off that promise, and the promise is returned.
         * If no hook returns a promise, then all hooks are processed synchronously.
         *
         * @param hooks the list of TransitionHooks to invoke
         * @param doneCallback a callback that is invoked after all the hooks have successfully completed
         *
         * @returns a promise for the async result, or the result of the callback
         */
        TransitionHook.invokeHooks = function (hooks, doneCallback) {
            for (var idx = 0; idx < hooks.length; idx++) {
                var hookResult = hooks[idx].invokeHook();
                if (isPromise(hookResult)) {
                    var remainingHooks = hooks.slice(idx + 1);
                    return TransitionHook.chain(remainingHooks, hookResult).then(doneCallback);
                }
            }
            return doneCallback();
        };
        /**
         * Run all TransitionHooks, ignoring their return value.
         */
        TransitionHook.runAllHooks = function (hooks) {
            hooks.forEach(function (hook) { return hook.invokeHook(); });
        };
        TransitionHook.prototype.logError = function (err) {
            this.transition.router.stateService.defaultErrorHandler()(err);
        };
        TransitionHook.prototype.invokeHook = function () {
            var _this = this;
            var hook = this.registeredHook;
            if (hook._deregistered)
                return;
            var notCurrent = this.getNotCurrentRejection();
            if (notCurrent)
                return notCurrent;
            var options = this.options;
            trace.traceHookInvocation(this, this.transition, options);
            var invokeCallback = function () { return hook.callback.call(options.bind, _this.transition, _this.stateContext); };
            var normalizeErr = function (err) { return Rejection.normalize(err).toPromise(); };
            var handleError = function (err) { return hook.eventType.getErrorHandler(_this)(err); };
            var handleResult = function (result) { return hook.eventType.getResultHandler(_this)(result); };
            try {
                var result = invokeCallback();
                if (!this.type.synchronous && isPromise(result)) {
                    return result.catch(normalizeErr).then(handleResult, handleError);
                }
                else {
                    return handleResult(result);
                }
            }
            catch (err) {
                // If callback throws (synchronously)
                return handleError(Rejection.normalize(err));
            }
            finally {
                if (hook.invokeLimit && ++hook.invokeCount >= hook.invokeLimit) {
                    hook.deregister();
                }
            }
        };
        /**
         * This method handles the return value of a Transition Hook.
         *
         * A hook can return false (cancel), a TargetState (redirect),
         * or a promise (which may later resolve to false or a redirect)
         *
         * This also handles "transition superseded" -- when a new transition
         * was started while the hook was still running
         */
        TransitionHook.prototype.handleHookResult = function (result) {
            var _this = this;
            var notCurrent = this.getNotCurrentRejection();
            if (notCurrent)
                return notCurrent;
            // Hook returned a promise
            if (isPromise(result)) {
                // Wait for the promise, then reprocess with the resulting value
                return result.then(function (val) { return _this.handleHookResult(val); });
            }
            trace.traceHookResult(result, this.transition, this.options);
            // Hook returned false
            if (result === false) {
                // Abort this Transition
                return Rejection.aborted('Hook aborted transition').toPromise();
            }
            var isTargetState = is(TargetState);
            // hook returned a TargetState
            if (isTargetState(result)) {
                // Halt the current Transition and redirect (a new Transition) to the TargetState.
                return Rejection.redirected(result).toPromise();
            }
        };
        /**
         * Return a Rejection promise if the transition is no longer current due
         * to a stopped router (disposed), or a new transition has started and superseded this one.
         */
        TransitionHook.prototype.getNotCurrentRejection = function () {
            var router = this.transition.router;
            // The router is stopped
            if (router._disposed) {
                return Rejection.aborted("UIRouter instance #" + router.$id + " has been stopped (disposed)").toPromise();
            }
            if (this.transition._aborted) {
                return Rejection.aborted().toPromise();
            }
            // This transition is no longer current.
            // Another transition started while this hook was still running.
            if (this.isSuperseded()) {
                // Abort this transition
                return Rejection.superseded(this.options.current()).toPromise();
            }
        };
        TransitionHook.prototype.toString = function () {
            var _a = this, options = _a.options, registeredHook = _a.registeredHook;
            var event = parse('traceData.hookType')(options) || 'internal', context = parse('traceData.context.state.name')(options) || parse('traceData.context')(options) || 'unknown', name = fnToString(registeredHook.callback);
            return event + " context: " + context + ", " + maxLength(200, name);
        };
        /**
         * These GetResultHandler(s) are used by [[invokeHook]] below
         * Each HookType chooses a GetResultHandler (See: [[TransitionService._defineCoreEvents]])
         */
        TransitionHook.HANDLE_RESULT = function (hook) { return function (result) {
            return hook.handleHookResult(result);
        }; };
        /**
         * If the result is a promise rejection, log it.
         * Otherwise, ignore the result.
         */
        TransitionHook.LOG_REJECTED_RESULT = function (hook) { return function (result) {
            isPromise(result) && result.catch(function (err) { return hook.logError(Rejection.normalize(err)); });
            return undefined;
        }; };
        /**
         * These GetErrorHandler(s) are used by [[invokeHook]] below
         * Each HookType chooses a GetErrorHandler (See: [[TransitionService._defineCoreEvents]])
         */
        TransitionHook.LOG_ERROR = function (hook) { return function (error) { return hook.logError(error); }; };
        TransitionHook.REJECT_ERROR = function (hook) { return function (error) { return silentRejection(error); }; };
        TransitionHook.THROW_ERROR = function (hook) { return function (error) {
            throw error;
        }; };
        return TransitionHook;
    }());

    /** @publicapi @module transition */ /** */
    /**
     * Determines if the given state matches the matchCriteria
     *
     * @hidden
     *
     * @param state a State Object to test against
     * @param criterion
     * - If a string, matchState uses the string as a glob-matcher against the state name
     * - If an array (of strings), matchState uses each string in the array as a glob-matchers against the state name
     *   and returns a positive match if any of the globs match.
     * - If a function, matchState calls the function with the state and returns true if the function's result is truthy.
     * @returns {boolean}
     */
    function matchState(state, criterion, transition) {
        var toMatch = isString(criterion) ? [criterion] : criterion;
        function matchGlobs(_state) {
            var globStrings = toMatch;
            for (var i = 0; i < globStrings.length; i++) {
                var glob = new Glob(globStrings[i]);
                if ((glob && glob.matches(_state.name)) || (!glob && globStrings[i] === _state.name)) {
                    return true;
                }
            }
            return false;
        }
        var matchFn = (isFunction(toMatch) ? toMatch : matchGlobs);
        return !!matchFn(state, transition);
    }
    /**
     * @internalapi
     * The registration data for a registered transition hook
     */
    var RegisteredHook = /** @class */ (function () {
        function RegisteredHook(tranSvc, eventType, callback, matchCriteria, removeHookFromRegistry, options) {
            if (options === void 0) { options = {}; }
            this.tranSvc = tranSvc;
            this.eventType = eventType;
            this.callback = callback;
            this.matchCriteria = matchCriteria;
            this.removeHookFromRegistry = removeHookFromRegistry;
            this.invokeCount = 0;
            this._deregistered = false;
            this.priority = options.priority || 0;
            this.bind = options.bind || null;
            this.invokeLimit = options.invokeLimit;
        }
        /**
         * Gets the matching [[PathNode]]s
         *
         * Given an array of [[PathNode]]s, and a [[HookMatchCriterion]], returns an array containing
         * the [[PathNode]]s that the criteria matches, or `null` if there were no matching nodes.
         *
         * Returning `null` is significant to distinguish between the default
         * "match-all criterion value" of `true` compared to a `() => true` function,
         * when the nodes is an empty array.
         *
         * This is useful to allow a transition match criteria of `entering: true`
         * to still match a transition, even when `entering === []`.  Contrast that
         * with `entering: (state) => true` which only matches when a state is actually
         * being entered.
         */
        RegisteredHook.prototype._matchingNodes = function (nodes, criterion, transition) {
            if (criterion === true)
                return nodes;
            var matching = nodes.filter(function (node) { return matchState(node.state, criterion, transition); });
            return matching.length ? matching : null;
        };
        /**
         * Gets the default match criteria (all `true`)
         *
         * Returns an object which has all the criteria match paths as keys and `true` as values, i.e.:
         *
         * ```js
         * {
         *   to: true,
         *   from: true,
         *   entering: true,
         *   exiting: true,
         *   retained: true,
         * }
         */
        RegisteredHook.prototype._getDefaultMatchCriteria = function () {
            return mapObj(this.tranSvc._pluginapi._getPathTypes(), function () { return true; });
        };
        /**
         * Gets matching nodes as [[IMatchingNodes]]
         *
         * Create a IMatchingNodes object from the TransitionHookTypes that is roughly equivalent to:
         *
         * ```js
         * let matches: IMatchingNodes = {
         *   to:       _matchingNodes([tail(treeChanges.to)],   mc.to),
         *   from:     _matchingNodes([tail(treeChanges.from)], mc.from),
         *   exiting:  _matchingNodes(treeChanges.exiting,      mc.exiting),
         *   retained: _matchingNodes(treeChanges.retained,     mc.retained),
         *   entering: _matchingNodes(treeChanges.entering,     mc.entering),
         * };
         * ```
         */
        RegisteredHook.prototype._getMatchingNodes = function (treeChanges, transition) {
            var _this = this;
            var criteria = extend(this._getDefaultMatchCriteria(), this.matchCriteria);
            var paths = values(this.tranSvc._pluginapi._getPathTypes());
            return paths.reduce(function (mn, pathtype) {
                // STATE scope criteria matches against every node in the path.
                // TRANSITION scope criteria matches against only the last node in the path
                var isStateHook = pathtype.scope === exports.TransitionHookScope.STATE;
                var path = treeChanges[pathtype.name] || [];
                var nodes = isStateHook ? path : [tail(path)];
                mn[pathtype.name] = _this._matchingNodes(nodes, criteria[pathtype.name], transition);
                return mn;
            }, {});
        };
        /**
         * Determines if this hook's [[matchCriteria]] match the given [[TreeChanges]]
         *
         * @returns an IMatchingNodes object, or null. If an IMatchingNodes object is returned, its values
         * are the matching [[PathNode]]s for each [[HookMatchCriterion]] (to, from, exiting, retained, entering)
         */
        RegisteredHook.prototype.matches = function (treeChanges, transition) {
            var matches = this._getMatchingNodes(treeChanges, transition);
            // Check if all the criteria matched the TreeChanges object
            var allMatched = values(matches).every(identity);
            return allMatched ? matches : null;
        };
        RegisteredHook.prototype.deregister = function () {
            this.removeHookFromRegistry(this);
            this._deregistered = true;
        };
        return RegisteredHook;
    }());
    /** @hidden Return a registration function of the requested type. */
    function makeEvent(registry, transitionService, eventType) {
        // Create the object which holds the registered transition hooks.
        var _registeredHooks = (registry._registeredHooks = registry._registeredHooks || {});
        var hooks = (_registeredHooks[eventType.name] = []);
        var removeHookFn = removeFrom(hooks);
        // Create hook registration function on the IHookRegistry for the event
        registry[eventType.name] = hookRegistrationFn;
        function hookRegistrationFn(matchObject, callback, options) {
            if (options === void 0) { options = {}; }
            var registeredHook = new RegisteredHook(transitionService, eventType, callback, matchObject, removeHookFn, options);
            hooks.push(registeredHook);
            return registeredHook.deregister.bind(registeredHook);
        }
        return hookRegistrationFn;
    }

    /** @publicapi @module transition */ /** */
    /**
     * This class returns applicable TransitionHooks for a specific Transition instance.
     *
     * Hooks ([[RegisteredHook]]) may be registered globally, e.g., $transitions.onEnter(...), or locally, e.g.
     * myTransition.onEnter(...).  The HookBuilder finds matching RegisteredHooks (where the match criteria is
     * determined by the type of hook)
     *
     * The HookBuilder also converts RegisteredHooks objects to TransitionHook objects, which are used to run a Transition.
     *
     * The HookBuilder constructor is given the $transitions service and a Transition instance.  Thus, a HookBuilder
     * instance may only be used for one specific Transition object. (side note: the _treeChanges accessor is private
     * in the Transition class, so we must also provide the Transition's _treeChanges)
     *
     */
    var HookBuilder = /** @class */ (function () {
        function HookBuilder(transition) {
            this.transition = transition;
        }
        HookBuilder.prototype.buildHooksForPhase = function (phase) {
            var _this = this;
            var $transitions = this.transition.router.transitionService;
            return $transitions._pluginapi
                ._getEvents(phase)
                .map(function (type) { return _this.buildHooks(type); })
                .reduce(unnestR, [])
                .filter(identity);
        };
        /**
         * Returns an array of newly built TransitionHook objects.
         *
         * - Finds all RegisteredHooks registered for the given `hookType` which matched the transition's [[TreeChanges]].
         * - Finds [[PathNode]] (or `PathNode[]`) to use as the TransitionHook context(s)
         * - For each of the [[PathNode]]s, creates a TransitionHook
         *
         * @param hookType the type of the hook registration function, e.g., 'onEnter', 'onFinish'.
         */
        HookBuilder.prototype.buildHooks = function (hookType) {
            var transition = this.transition;
            var treeChanges = transition.treeChanges();
            // Find all the matching registered hooks for a given hook type
            var matchingHooks = this.getMatchingHooks(hookType, treeChanges, transition);
            if (!matchingHooks)
                return [];
            var baseHookOptions = {
                transition: transition,
                current: transition.options().current,
            };
            var makeTransitionHooks = function (hook) {
                // Fetch the Nodes that caused this hook to match.
                var matches = hook.matches(treeChanges, transition);
                // Select the PathNode[] that will be used as TransitionHook context objects
                var matchingNodes = matches[hookType.criteriaMatchPath.name];
                // Return an array of HookTuples
                return matchingNodes.map(function (node) {
                    var _options = extend({
                        bind: hook.bind,
                        traceData: { hookType: hookType.name, context: node },
                    }, baseHookOptions);
                    var state = hookType.criteriaMatchPath.scope === exports.TransitionHookScope.STATE ? node.state.self : null;
                    var transitionHook = new TransitionHook(transition, state, hook, _options);
                    return { hook: hook, node: node, transitionHook: transitionHook };
                });
            };
            return matchingHooks
                .map(makeTransitionHooks)
                .reduce(unnestR, [])
                .sort(tupleSort(hookType.reverseSort))
                .map(function (tuple) { return tuple.transitionHook; });
        };
        /**
         * Finds all RegisteredHooks from:
         * - The Transition object instance hook registry
         * - The TransitionService ($transitions) global hook registry
         *
         * which matched:
         * - the eventType
         * - the matchCriteria (to, from, exiting, retained, entering)
         *
         * @returns an array of matched [[RegisteredHook]]s
         */
        HookBuilder.prototype.getMatchingHooks = function (hookType, treeChanges, transition) {
            var isCreate = hookType.hookPhase === exports.TransitionHookPhase.CREATE;
            // Instance and Global hook registries
            var $transitions = this.transition.router.transitionService;
            var registries = isCreate ? [$transitions] : [this.transition, $transitions];
            return registries
                .map(function (reg) { return reg.getHooks(hookType.name); }) // Get named hooks from registries
                .filter(assertPredicate(isArray, "broken event named: " + hookType.name)) // Sanity check
                .reduce(unnestR, []) // Un-nest RegisteredHook[][] to RegisteredHook[] array
                .filter(function (hook) { return hook.matches(treeChanges, transition); }); // Only those satisfying matchCriteria
        };
        return HookBuilder;
    }());
    /**
     * A factory for a sort function for HookTuples.
     *
     * The sort function first compares the PathNode depth (how deep in the state tree a node is), then compares
     * the EventHook priority.
     *
     * @param reverseDepthSort a boolean, when true, reverses the sort order for the node depth
     * @returns a tuple sort function
     */
    function tupleSort(reverseDepthSort) {
        if (reverseDepthSort === void 0) { reverseDepthSort = false; }
        return function nodeDepthThenPriority(l, r) {
            var factor = reverseDepthSort ? -1 : 1;
            var depthDelta = (l.node.state.path.length - r.node.state.path.length) * factor;
            return depthDelta !== 0 ? depthDelta : r.hook.priority - l.hook.priority;
        };
    }

    /** @publicapi @module transition */ /** */
    /** @hidden */
    var stateSelf = prop('self');
    /**
     * Represents a transition between two states.
     *
     * When navigating to a state, we are transitioning **from** the current state **to** the new state.
     *
     * This object contains all contextual information about the to/from states, parameters, resolves.
     * It has information about all states being entered and exited as a result of the transition.
     */
    var Transition = /** @class */ (function () {
        /**
         * Creates a new Transition object.
         *
         * If the target state is not valid, an error is thrown.
         *
         * @internalapi
         *
         * @param fromPath The path of [[PathNode]]s from which the transition is leaving.  The last node in the `fromPath`
         *        encapsulates the "from state".
         * @param targetState The target state and parameters being transitioned to (also, the transition options)
         * @param router The [[UIRouter]] instance
         */
        function Transition(fromPath, targetState, router) {
            var _this = this;
            /** @hidden */
            this._deferred = services.$q.defer();
            /**
             * This promise is resolved or rejected based on the outcome of the Transition.
             *
             * When the transition is successful, the promise is resolved
             * When the transition is unsuccessful, the promise is rejected with the [[Rejection]] or javascript error
             */
            this.promise = this._deferred.promise;
            /** @hidden Holds the hook registration functions such as those passed to Transition.onStart() */
            this._registeredHooks = {};
            /** @hidden */
            this._hookBuilder = new HookBuilder(this);
            /** Checks if this transition is currently active/running. */
            this.isActive = function () { return _this.router.globals.transition === _this; };
            this.router = router;
            this._targetState = targetState;
            if (!targetState.valid()) {
                throw new Error(targetState.error());
            }
            // current() is assumed to come from targetState.options, but provide a naive implementation otherwise.
            this._options = extend({ current: val(this) }, targetState.options());
            this.$id = router.transitionService._transitionCount++;
            var toPath = PathUtils.buildToPath(fromPath, targetState);
            this._treeChanges = PathUtils.treeChanges(fromPath, toPath, this._options.reloadState);
            this.createTransitionHookRegFns();
            var onCreateHooks = this._hookBuilder.buildHooksForPhase(exports.TransitionHookPhase.CREATE);
            TransitionHook.invokeHooks(onCreateHooks, function () { return null; });
            this.applyViewConfigs(router);
        }
        /** @hidden */
        Transition.prototype.onBefore = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        Transition.prototype.onStart = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        Transition.prototype.onExit = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        Transition.prototype.onRetain = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        Transition.prototype.onEnter = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        Transition.prototype.onFinish = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        Transition.prototype.onSuccess = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        Transition.prototype.onError = function (criteria, callback, options) {
            return;
        };
        /** @hidden
         * Creates the transition-level hook registration functions
         * (which can then be used to register hooks)
         */
        Transition.prototype.createTransitionHookRegFns = function () {
            var _this = this;
            this.router.transitionService._pluginapi
                ._getEvents()
                .filter(function (type) { return type.hookPhase !== exports.TransitionHookPhase.CREATE; })
                .forEach(function (type) { return makeEvent(_this, _this.router.transitionService, type); });
        };
        /** @internalapi */
        Transition.prototype.getHooks = function (hookName) {
            return this._registeredHooks[hookName];
        };
        Transition.prototype.applyViewConfigs = function (router) {
            var enteringStates = this._treeChanges.entering.map(function (node) { return node.state; });
            PathUtils.applyViewConfigs(router.transitionService.$view, this._treeChanges.to, enteringStates);
        };
        /**
         * @internalapi
         *
         * @returns the internal from [State] object
         */
        Transition.prototype.$from = function () {
            return tail(this._treeChanges.from).state;
        };
        /**
         * @internalapi
         *
         * @returns the internal to [State] object
         */
        Transition.prototype.$to = function () {
            return tail(this._treeChanges.to).state;
        };
        /**
         * Returns the "from state"
         *
         * Returns the state that the transition is coming *from*.
         *
         * @returns The state declaration object for the Transition's ("from state").
         */
        Transition.prototype.from = function () {
            return this.$from().self;
        };
        /**
         * Returns the "to state"
         *
         * Returns the state that the transition is going *to*.
         *
         * @returns The state declaration object for the Transition's target state ("to state").
         */
        Transition.prototype.to = function () {
            return this.$to().self;
        };
        /**
         * Gets the Target State
         *
         * A transition's [[TargetState]] encapsulates the [[to]] state, the [[params]], and the [[options]] as a single object.
         *
         * @returns the [[TargetState]] of this Transition
         */
        Transition.prototype.targetState = function () {
            return this._targetState;
        };
        /**
         * Determines whether two transitions are equivalent.
         * @deprecated
         */
        Transition.prototype.is = function (compare) {
            if (compare instanceof Transition) {
                // TODO: Also compare parameters
                return this.is({ to: compare.$to().name, from: compare.$from().name });
            }
            return !((compare.to && !matchState(this.$to(), compare.to, this)) ||
                (compare.from && !matchState(this.$from(), compare.from, this)));
        };
        Transition.prototype.params = function (pathname) {
            if (pathname === void 0) { pathname = 'to'; }
            return Object.freeze(this._treeChanges[pathname].map(prop('paramValues')).reduce(mergeR, {}));
        };
        Transition.prototype.paramsChanged = function () {
            var fromParams = this.params('from');
            var toParams = this.params('to');
            // All the parameters declared on both the "to" and "from" paths
            var allParamDescriptors = []
                .concat(this._treeChanges.to)
                .concat(this._treeChanges.from)
                .map(function (pathNode) { return pathNode.paramSchema; })
                .reduce(flattenR, [])
                .reduce(uniqR, []);
            var changedParamDescriptors = Param.changed(allParamDescriptors, fromParams, toParams);
            return changedParamDescriptors.reduce(function (changedValues, descriptor) {
                changedValues[descriptor.id] = toParams[descriptor.id];
                return changedValues;
            }, {});
        };
        /**
         * Creates a [[UIInjector]] Dependency Injector
         *
         * Returns a Dependency Injector for the Transition's target state (to state).
         * The injector provides resolve values which the target state has access to.
         *
         * The `UIInjector` can also provide values from the native root/global injector (ng1/ng2).
         *
         * #### Example:
         * ```js
         * .onEnter({ entering: 'myState' }, trans => {
         *   var myResolveValue = trans.injector().get('myResolve');
         *   // Inject a global service from the global/native injector (if it exists)
         *   var MyService = trans.injector().get('MyService');
         * })
         * ```
         *
         * In some cases (such as `onBefore`), you may need access to some resolve data but it has not yet been fetched.
         * You can use [[UIInjector.getAsync]] to get a promise for the data.
         * #### Example:
         * ```js
         * .onBefore({}, trans => {
         *   return trans.injector().getAsync('myResolve').then(myResolveValue =>
         *     return myResolveValue !== 'ABORT';
         *   });
         * });
         * ```
         *
         * If a `state` is provided, the injector that is returned will be limited to resolve values that the provided state has access to.
         * This can be useful if both a parent state `foo` and a child state `foo.bar` have both defined a resolve such as `data`.
         * #### Example:
         * ```js
         * .onEnter({ to: 'foo.bar' }, trans => {
         *   // returns result of `foo` state's `myResolve` resolve
         *   // even though `foo.bar` also has a `myResolve` resolve
         *   var fooData = trans.injector('foo').get('myResolve');
         * });
         * ```
         *
         * If you need resolve data from the exiting states, pass `'from'` as `pathName`.
         * The resolve data from the `from` path will be returned.
         * #### Example:
         * ```js
         * .onExit({ exiting: 'foo.bar' }, trans => {
         *   // Gets the resolve value of `myResolve` from the state being exited
         *   var fooData = trans.injector(null, 'from').get('myResolve');
         * });
         * ```
         *
         *
         * @param state Limits the resolves provided to only the resolves the provided state has access to.
         * @param pathName Default: `'to'`: Chooses the path for which to create the injector. Use this to access resolves for `exiting` states.
         *
         * @returns a [[UIInjector]]
         */
        Transition.prototype.injector = function (state, pathName) {
            if (pathName === void 0) { pathName = 'to'; }
            var path = this._treeChanges[pathName];
            if (state)
                path = PathUtils.subPath(path, function (node) { return node.state === state || node.state.name === state; });
            return new ResolveContext(path).injector();
        };
        /**
         * Gets all available resolve tokens (keys)
         *
         * This method can be used in conjunction with [[injector]] to inspect the resolve values
         * available to the Transition.
         *
         * This returns all the tokens defined on [[StateDeclaration.resolve]] blocks, for the states
         * in the Transition's [[TreeChanges.to]] path.
         *
         * #### Example:
         * This example logs all resolve values
         * ```js
         * let tokens = trans.getResolveTokens();
         * tokens.forEach(token => console.log(token + " = " + trans.injector().get(token)));
         * ```
         *
         * #### Example:
         * This example creates promises for each resolve value.
         * This triggers fetches of resolves (if any have not yet been fetched).
         * When all promises have all settled, it logs the resolve values.
         * ```js
         * let tokens = trans.getResolveTokens();
         * let promise = tokens.map(token => trans.injector().getAsync(token));
         * Promise.all(promises).then(values => console.log("Resolved values: " + values));
         * ```
         *
         * Note: Angular 1 users whould use `$q.all()`
         *
         * @param pathname resolve context's path name (e.g., `to` or `from`)
         *
         * @returns an array of resolve tokens (keys)
         */
        Transition.prototype.getResolveTokens = function (pathname) {
            if (pathname === void 0) { pathname = 'to'; }
            return new ResolveContext(this._treeChanges[pathname]).getTokens();
        };
        /**
         * Dynamically adds a new [[Resolvable]] (i.e., [[StateDeclaration.resolve]]) to this transition.
         *
         * Allows a transition hook to dynamically add a Resolvable to this Transition.
         *
         * Use the [[Transition.injector]] to retrieve the resolved data in subsequent hooks ([[UIInjector.get]]).
         *
         * If a `state` argument is provided, the Resolvable is processed when that state is being entered.
         * If no `state` is provided then the root state is used.
         * If the given `state` has already been entered, the Resolvable is processed when any child state is entered.
         * If no child states will be entered, the Resolvable is processed during the `onFinish` phase of the Transition.
         *
         * The `state` argument also scopes the resolved data.
         * The resolved data is available from the injector for that `state` and any children states.
         *
         * #### Example:
         * ```js
         * transitionService.onBefore({}, transition => {
         *   transition.addResolvable({
         *     token: 'myResolve',
         *     deps: ['MyService'],
         *     resolveFn: myService => myService.getData()
         *   });
         * });
         * ```
         *
         * @param resolvable a [[ResolvableLiteral]] object (or a [[Resolvable]])
         * @param state the state in the "to path" which should receive the new resolve (otherwise, the root state)
         */
        Transition.prototype.addResolvable = function (resolvable, state) {
            if (state === void 0) { state = ''; }
            resolvable = is(Resolvable)(resolvable) ? resolvable : new Resolvable(resolvable);
            var stateName = typeof state === 'string' ? state : state.name;
            var topath = this._treeChanges.to;
            var targetNode = find(topath, function (node) { return node.state.name === stateName; });
            var resolveContext = new ResolveContext(topath);
            resolveContext.addResolvables([resolvable], targetNode.state);
        };
        /**
         * Gets the transition from which this transition was redirected.
         *
         * If the current transition is a redirect, this method returns the transition that was redirected.
         *
         * #### Example:
         * ```js
         * let transitionA = $state.go('A').transition
         * transitionA.onStart({}, () => $state.target('B'));
         * $transitions.onSuccess({ to: 'B' }, (trans) => {
         *   trans.to().name === 'B'; // true
         *   trans.redirectedFrom() === transitionA; // true
         * });
         * ```
         *
         * @returns The previous Transition, or null if this Transition is not the result of a redirection
         */
        Transition.prototype.redirectedFrom = function () {
            return this._options.redirectedFrom || null;
        };
        /**
         * Gets the original transition in a redirect chain
         *
         * A transition might belong to a long chain of multiple redirects.
         * This method walks the [[redirectedFrom]] chain back to the original (first) transition in the chain.
         *
         * #### Example:
         * ```js
         * // states
         * registry.register({ name: 'A', redirectTo: 'B' });
         * registry.register({ name: 'B', redirectTo: 'C' });
         * registry.register({ name: 'C', redirectTo: 'D' });
         * registry.register({ name: 'D' });
         *
         * let transitionA = $state.go('A').transition
         *
         * $transitions.onSuccess({ to: 'D' }, (trans) => {
         *   trans.to().name === 'D'; // true
         *   trans.redirectedFrom().to().name === 'C'; // true
         *   trans.originalTransition() === transitionA; // true
         *   trans.originalTransition().to().name === 'A'; // true
         * });
         * ```
         *
         * @returns The original Transition that started a redirect chain
         */
        Transition.prototype.originalTransition = function () {
            var rf = this.redirectedFrom();
            return (rf && rf.originalTransition()) || this;
        };
        /**
         * Get the transition options
         *
         * @returns the options for this Transition.
         */
        Transition.prototype.options = function () {
            return this._options;
        };
        /**
         * Gets the states being entered.
         *
         * @returns an array of states that will be entered during this transition.
         */
        Transition.prototype.entering = function () {
            return map(this._treeChanges.entering, prop('state')).map(stateSelf);
        };
        /**
         * Gets the states being exited.
         *
         * @returns an array of states that will be exited during this transition.
         */
        Transition.prototype.exiting = function () {
            return map(this._treeChanges.exiting, prop('state'))
                .map(stateSelf)
                .reverse();
        };
        /**
         * Gets the states being retained.
         *
         * @returns an array of states that are already entered from a previous Transition, that will not be
         *    exited during this Transition
         */
        Transition.prototype.retained = function () {
            return map(this._treeChanges.retained, prop('state')).map(stateSelf);
        };
        /**
         * Get the [[ViewConfig]]s associated with this Transition
         *
         * Each state can define one or more views (template/controller), which are encapsulated as `ViewConfig` objects.
         * This method fetches the `ViewConfigs` for a given path in the Transition (e.g., "to" or "entering").
         *
         * @param pathname the name of the path to fetch views for:
         *   (`'to'`, `'from'`, `'entering'`, `'exiting'`, `'retained'`)
         * @param state If provided, only returns the `ViewConfig`s for a single state in the path
         *
         * @returns a list of ViewConfig objects for the given path.
         */
        Transition.prototype.views = function (pathname, state) {
            if (pathname === void 0) { pathname = 'entering'; }
            var path = this._treeChanges[pathname];
            path = !state ? path : path.filter(propEq('state', state));
            return path
                .map(prop('views'))
                .filter(identity)
                .reduce(unnestR, []);
        };
        Transition.prototype.treeChanges = function (pathname) {
            return pathname ? this._treeChanges[pathname] : this._treeChanges;
        };
        /**
         * Creates a new transition that is a redirection of the current one.
         *
         * This transition can be returned from a [[TransitionService]] hook to
         * redirect a transition to a new state and/or set of parameters.
         *
         * @internalapi
         *
         * @returns Returns a new [[Transition]] instance.
         */
        Transition.prototype.redirect = function (targetState) {
            var redirects = 1, trans = this;
            // tslint:disable-next-line:no-conditional-assignment
            while ((trans = trans.redirectedFrom()) != null) {
                if (++redirects > 20)
                    throw new Error("Too many consecutive Transition redirects (20+)");
            }
            var redirectOpts = { redirectedFrom: this, source: 'redirect' };
            // If the original transition was caused by URL sync, then use { location: 'replace' }
            // on the new transition (unless the target state explicitly specifies location: false).
            // This causes the original url to be replaced with the url for the redirect target
            // so the original url disappears from the browser history.
            if (this.options().source === 'url' && targetState.options().location !== false) {
                redirectOpts.location = 'replace';
            }
            var newOptions = extend({}, this.options(), targetState.options(), redirectOpts);
            targetState = targetState.withOptions(newOptions, true);
            var newTransition = this.router.transitionService.create(this._treeChanges.from, targetState);
            var originalEnteringNodes = this._treeChanges.entering;
            var redirectEnteringNodes = newTransition._treeChanges.entering;
            // --- Re-use resolve data from original transition ---
            // When redirecting from a parent state to a child state where the parent parameter values haven't changed
            // (because of the redirect), the resolves fetched by the original transition are still valid in the
            // redirected transition.
            //
            // This allows you to define a redirect on a parent state which depends on an async resolve value.
            // You can wait for the resolve, then redirect to a child state based on the result.
            // The redirected transition does not have to re-fetch the resolve.
            // ---------------------------------------------------------
            var nodeIsReloading = function (reloadState) { return function (node) {
                return reloadState && node.state.includes[reloadState.name];
            }; };
            // Find any "entering" nodes in the redirect path that match the original path and aren't being reloaded
            var matchingEnteringNodes = PathUtils.matching(redirectEnteringNodes, originalEnteringNodes, PathUtils.nonDynamicParams).filter(not(nodeIsReloading(targetState.options().reloadState)));
            // Use the existing (possibly pre-resolved) resolvables for the matching entering nodes.
            matchingEnteringNodes.forEach(function (node, idx) {
                node.resolvables = originalEnteringNodes[idx].resolvables;
            });
            return newTransition;
        };
        /** @hidden If a transition doesn't exit/enter any states, returns any [[Param]] whose value changed */
        Transition.prototype._changedParams = function () {
            var tc = this._treeChanges;
            /** Return undefined if it's not a "dynamic" transition, for the following reasons */
            // If user explicitly wants a reload
            if (this._options.reload)
                return undefined;
            // If any states are exiting or entering
            if (tc.exiting.length || tc.entering.length)
                return undefined;
            // If to/from path lengths differ
            if (tc.to.length !== tc.from.length)
                return undefined;
            // If the to/from paths are different
            var pathsDiffer = arrayTuples(tc.to, tc.from)
                .map(function (tuple) { return tuple[0].state !== tuple[1].state; })
                .reduce(anyTrueR, false);
            if (pathsDiffer)
                return undefined;
            // Find any parameter values that differ
            var nodeSchemas = tc.to.map(function (node) { return node.paramSchema; });
            var _a = [tc.to, tc.from].map(function (path) { return path.map(function (x) { return x.paramValues; }); }), toValues = _a[0], fromValues = _a[1];
            var tuples = arrayTuples(nodeSchemas, toValues, fromValues);
            return tuples.map(function (_a) {
                var schema = _a[0], toVals = _a[1], fromVals = _a[2];
                return Param.changed(schema, toVals, fromVals);
            }).reduce(unnestR, []);
        };
        /**
         * Returns true if the transition is dynamic.
         *
         * A transition is dynamic if no states are entered nor exited, but at least one dynamic parameter has changed.
         *
         * @returns true if the Transition is dynamic
         */
        Transition.prototype.dynamic = function () {
            var changes = this._changedParams();
            return !changes ? false : changes.map(function (x) { return x.dynamic; }).reduce(anyTrueR, false);
        };
        /**
         * Returns true if the transition is ignored.
         *
         * A transition is ignored if no states are entered nor exited, and no parameter values have changed.
         *
         * @returns true if the Transition is ignored.
         */
        Transition.prototype.ignored = function () {
            return !!this._ignoredReason();
        };
        /** @hidden */
        Transition.prototype._ignoredReason = function () {
            var pending = this.router.globals.transition;
            var reloadState = this._options.reloadState;
            var same = function (pathA, pathB) {
                if (pathA.length !== pathB.length)
                    return false;
                var matching = PathUtils.matching(pathA, pathB);
                return pathA.length === matching.filter(function (node) { return !reloadState || !node.state.includes[reloadState.name]; }).length;
            };
            var newTC = this.treeChanges();
            var pendTC = pending && pending.treeChanges();
            if (pendTC && same(pendTC.to, newTC.to) && same(pendTC.exiting, newTC.exiting))
                return 'SameAsPending';
            if (newTC.exiting.length === 0 && newTC.entering.length === 0 && same(newTC.from, newTC.to))
                return 'SameAsCurrent';
        };
        /**
         * Runs the transition
         *
         * This method is generally called from the [[StateService.transitionTo]]
         *
         * @internalapi
         *
         * @returns a promise for a successful transition.
         */
        Transition.prototype.run = function () {
            var _this = this;
            var runAllHooks = TransitionHook.runAllHooks;
            // Gets transition hooks array for the given phase
            var getHooksFor = function (phase) { return _this._hookBuilder.buildHooksForPhase(phase); };
            // When the chain is complete, then resolve or reject the deferred
            var transitionSuccess = function () {
                trace.traceSuccess(_this.$to(), _this);
                _this.success = true;
                _this._deferred.resolve(_this.to());
                runAllHooks(getHooksFor(exports.TransitionHookPhase.SUCCESS));
            };
            var transitionError = function (reason) {
                trace.traceError(reason, _this);
                _this.success = false;
                _this._deferred.reject(reason);
                _this._error = reason;
                runAllHooks(getHooksFor(exports.TransitionHookPhase.ERROR));
            };
            var runTransition = function () {
                // Wait to build the RUN hook chain until the BEFORE hooks are done
                // This allows a BEFORE hook to dynamically add additional RUN hooks via the Transition object.
                var allRunHooks = getHooksFor(exports.TransitionHookPhase.RUN);
                var done = function () { return services.$q.when(undefined); };
                return TransitionHook.invokeHooks(allRunHooks, done);
            };
            var startTransition = function () {
                var globals = _this.router.globals;
                globals.lastStartedTransitionId = _this.$id;
                globals.transition = _this;
                globals.transitionHistory.enqueue(_this);
                trace.traceTransitionStart(_this);
                return services.$q.when(undefined);
            };
            var allBeforeHooks = getHooksFor(exports.TransitionHookPhase.BEFORE);
            TransitionHook.invokeHooks(allBeforeHooks, startTransition)
                .then(runTransition)
                .then(transitionSuccess, transitionError);
            return this.promise;
        };
        /**
         * Checks if the Transition is valid
         *
         * @returns true if the Transition is valid
         */
        Transition.prototype.valid = function () {
            return !this.error() || this.success !== undefined;
        };
        /**
         * Aborts this transition
         *
         * Imperative API to abort a Transition.
         * This only applies to Transitions that are not yet complete.
         */
        Transition.prototype.abort = function () {
            // Do not set flag if the transition is already complete
            if (isUndefined(this.success)) {
                this._aborted = true;
            }
        };
        /**
         * The Transition error reason.
         *
         * If the transition is invalid (and could not be run), returns the reason the transition is invalid.
         * If the transition was valid and ran, but was not successful, returns the reason the transition failed.
         *
         * @returns a transition rejection explaining why the transition is invalid, or the reason the transition failed.
         */
        Transition.prototype.error = function () {
            var state = this.$to();
            if (state.self.abstract) {
                return Rejection.invalid("Cannot transition to abstract state '" + state.name + "'");
            }
            var paramDefs = state.parameters();
            var values = this.params();
            var invalidParams = paramDefs.filter(function (param) { return !param.validates(values[param.id]); });
            if (invalidParams.length) {
                var invalidValues = invalidParams.map(function (param) { return "[" + param.id + ":" + stringify(values[param.id]) + "]"; }).join(', ');
                var detail = "The following parameter values are not valid for state '" + state.name + "': " + invalidValues;
                return Rejection.invalid(detail);
            }
            if (this.success === false)
                return this._error;
        };
        /**
         * A string representation of the Transition
         *
         * @returns A string representation of the Transition
         */
        Transition.prototype.toString = function () {
            var fromStateOrName = this.from();
            var toStateOrName = this.to();
            var avoidEmptyHash = function (params) {
                return params['#'] !== null && params['#'] !== undefined ? params : omit(params, ['#']);
            };
            // (X) means the to state is invalid.
            var id = this.$id, from = isObject(fromStateOrName) ? fromStateOrName.name : fromStateOrName, fromParams = stringify(avoidEmptyHash(this._treeChanges.from.map(prop('paramValues')).reduce(mergeR, {}))), toValid = this.valid() ? '' : '(X) ', to = isObject(toStateOrName) ? toStateOrName.name : toStateOrName, toParams = stringify(avoidEmptyHash(this.params()));
            return "Transition#" + id + "( '" + from + "'" + fromParams + " -> " + toValid + "'" + to + "'" + toParams + " )";
        };
        /** @hidden */
        Transition.diToken = Transition;
        return Transition;
    }());

    /** @publicapi @module url */ /** */
    /** @hidden */
    function quoteRegExp(str, param) {
        var surroundPattern = ['', ''], result = str.replace(/[\\\[\]\^$*+?.()|{}]/g, '\\$&');
        if (!param)
            return result;
        switch (param.squash) {
            case false:
                surroundPattern = ['(', ')' + (param.isOptional ? '?' : '')];
                break;
            case true:
                result = result.replace(/\/$/, '');
                surroundPattern = ['(?:/(', ')|/)?'];
                break;
            default:
                surroundPattern = ["(" + param.squash + "|", ')?'];
                break;
        }
        return result + surroundPattern[0] + param.type.pattern.source + surroundPattern[1];
    }
    /** @hidden */
    var memoizeTo = function (obj, _prop, fn) { return (obj[_prop] = obj[_prop] || fn()); };
    /** @hidden */
    var splitOnSlash = splitOnDelim('/');
    /** @hidden */
    var defaultConfig = {
        state: { params: {} },
        strict: true,
        caseInsensitive: true,
    };
    /**
     * Matches URLs against patterns.
     *
     * Matches URLs against patterns and extracts named parameters from the path or the search
     * part of the URL.
     *
     * A URL pattern consists of a path pattern, optionally followed by '?' and a list of search (query)
     * parameters. Multiple search parameter names are separated by '&'. Search parameters
     * do not influence whether or not a URL is matched, but their values are passed through into
     * the matched parameters returned by [[UrlMatcher.exec]].
     *
     * - *Path parameters* are defined using curly brace placeholders (`/somepath/{param}`)
     * or colon placeholders (`/somePath/:param`).
     *
     * - *A parameter RegExp* may be defined for a param after a colon
     * (`/somePath/{param:[a-zA-Z0-9]+}`) in a curly brace placeholder.
     * The regexp must match for the url to be matched.
     * Should the regexp itself contain curly braces, they must be in matched pairs or escaped with a backslash.
     *
     * Note: a RegExp parameter will encode its value using either [[ParamTypes.path]] or [[ParamTypes.query]].
     *
     * - *Custom parameter types* may also be specified after a colon (`/somePath/{param:int}`) in curly brace parameters.
     *   See [[UrlMatcherFactory.type]] for more information.
     *
     * - *Catch-all parameters* are defined using an asterisk placeholder (`/somepath/*catchallparam`).
     *   A catch-all * parameter value will contain the remainder of the URL.
     *
     * ---
     *
     * Parameter names may contain only word characters (latin letters, digits, and underscore) and
     * must be unique within the pattern (across both path and search parameters).
     * A path parameter matches any number of characters other than '/'. For catch-all
     * placeholders the path parameter matches any number of characters.
     *
     * Examples:
     *
     * * `'/hello/'` - Matches only if the path is exactly '/hello/'. There is no special treatment for
     *   trailing slashes, and patterns have to match the entire path, not just a prefix.
     * * `'/user/:id'` - Matches '/user/bob' or '/user/1234!!!' or even '/user/' but not '/user' or
     *   '/user/bob/details'. The second path segment will be captured as the parameter 'id'.
     * * `'/user/{id}'` - Same as the previous example, but using curly brace syntax.
     * * `'/user/{id:[^/]*}'` - Same as the previous example.
     * * `'/user/{id:[0-9a-fA-F]{1,8}}'` - Similar to the previous example, but only matches if the id
     *   parameter consists of 1 to 8 hex digits.
     * * `'/files/{path:.*}'` - Matches any URL starting with '/files/' and captures the rest of the
     *   path into the parameter 'path'.
     * * `'/files/*path'` - ditto.
     * * `'/calendar/{start:date}'` - Matches "/calendar/2014-11-12" (because the pattern defined
     *   in the built-in  `date` ParamType matches `2014-11-12`) and provides a Date object in $stateParams.start
     *
     */
    var UrlMatcher = /** @class */ (function () {
        /**
         * @param pattern The pattern to compile into a matcher.
         * @param paramTypes The [[ParamTypes]] registry
         * @param paramFactory A [[ParamFactory]] object
         * @param config  A [[UrlMatcherCompileConfig]] configuration object
         */
        function UrlMatcher(pattern, paramTypes, paramFactory, config) {
            var _this = this;
            /** @hidden */
            this._cache = { path: [this] };
            /** @hidden */
            this._children = [];
            /** @hidden */
            this._params = [];
            /** @hidden */
            this._segments = [];
            /** @hidden */
            this._compiled = [];
            this.config = config = defaults(config, defaultConfig);
            this.pattern = pattern;
            // Find all placeholders and create a compiled pattern, using either classic or curly syntax:
            //   '*' name
            //   ':' name
            //   '{' name '}'
            //   '{' name ':' regexp '}'
            // The regular expression is somewhat complicated due to the need to allow curly braces
            // inside the regular expression. The placeholder regexp breaks down as follows:
            //    ([:*])([\w\[\]]+)              - classic placeholder ($1 / $2) (search version has - for snake-case)
            //    \{([\w\[\]]+)(?:\:\s*( ... ))?\}  - curly brace placeholder ($3) with optional regexp/type ... ($4) (search version has - for snake-case
            //    (?: ... | ... | ... )+         - the regexp consists of any number of atoms, an atom being either
            //    [^{}\\]+                       - anything other than curly braces or backslash
            //    \\.                            - a backslash escape
            //    \{(?:[^{}\\]+|\\.)*\}          - a matched set of curly braces containing other atoms
            var placeholder = /([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g;
            var searchPlaceholder = /([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g;
            var patterns = [];
            var last = 0;
            var matchArray;
            var checkParamErrors = function (id) {
                if (!UrlMatcher.nameValidator.test(id))
                    throw new Error("Invalid parameter name '" + id + "' in pattern '" + pattern + "'");
                if (find(_this._params, propEq('id', id)))
                    throw new Error("Duplicate parameter name '" + id + "' in pattern '" + pattern + "'");
            };
            // Split into static segments separated by path parameter placeholders.
            // The number of segments is always 1 more than the number of parameters.
            var matchDetails = function (m, isSearch) {
                // IE[78] returns '' for unmatched groups instead of null
                var id = m[2] || m[3];
                var regexp = isSearch ? m[4] : m[4] || (m[1] === '*' ? '[\\s\\S]*' : null);
                var makeRegexpType = function (str) {
                    return inherit(paramTypes.type(isSearch ? 'query' : 'path'), {
                        pattern: new RegExp(str, _this.config.caseInsensitive ? 'i' : undefined),
                    });
                };
                return {
                    id: id,
                    regexp: regexp,
                    segment: pattern.substring(last, m.index),
                    type: !regexp ? null : paramTypes.type(regexp) || makeRegexpType(regexp),
                };
            };
            var details;
            var segment;
            // tslint:disable-next-line:no-conditional-assignment
            while ((matchArray = placeholder.exec(pattern))) {
                details = matchDetails(matchArray, false);
                if (details.segment.indexOf('?') >= 0)
                    break; // we're into the search part
                checkParamErrors(details.id);
                this._params.push(paramFactory.fromPath(details.id, details.type, config.state));
                this._segments.push(details.segment);
                patterns.push([details.segment, tail(this._params)]);
                last = placeholder.lastIndex;
            }
            segment = pattern.substring(last);
            // Find any search parameter names and remove them from the last segment
            var i = segment.indexOf('?');
            if (i >= 0) {
                var search = segment.substring(i);
                segment = segment.substring(0, i);
                if (search.length > 0) {
                    last = 0;
                    // tslint:disable-next-line:no-conditional-assignment
                    while ((matchArray = searchPlaceholder.exec(search))) {
                        details = matchDetails(matchArray, true);
                        checkParamErrors(details.id);
                        this._params.push(paramFactory.fromSearch(details.id, details.type, config.state));
                        last = placeholder.lastIndex;
                        // check if ?&
                    }
                }
            }
            this._segments.push(segment);
            this._compiled = patterns.map(function (_pattern) { return quoteRegExp.apply(null, _pattern); }).concat(quoteRegExp(segment));
        }
        /** @hidden */
        UrlMatcher.encodeDashes = function (str) {
            // Replace dashes with encoded "\-"
            return encodeURIComponent(str).replace(/-/g, function (c) {
                return "%5C%" + c
                    .charCodeAt(0)
                    .toString(16)
                    .toUpperCase();
            });
        };
        /** @hidden Given a matcher, return an array with the matcher's path segments and path params, in order */
        UrlMatcher.pathSegmentsAndParams = function (matcher) {
            var staticSegments = matcher._segments;
            var pathParams = matcher._params.filter(function (p) { return p.location === exports.DefType.PATH; });
            return arrayTuples(staticSegments, pathParams.concat(undefined))
                .reduce(unnestR, [])
                .filter(function (x) { return x !== '' && isDefined(x); });
        };
        /** @hidden Given a matcher, return an array with the matcher's query params */
        UrlMatcher.queryParams = function (matcher) {
            return matcher._params.filter(function (p) { return p.location === exports.DefType.SEARCH; });
        };
        /**
         * Compare two UrlMatchers
         *
         * This comparison function converts a UrlMatcher into static and dynamic path segments.
         * Each static path segment is a static string between a path separator (slash character).
         * Each dynamic segment is a path parameter.
         *
         * The comparison function sorts static segments before dynamic ones.
         */
        UrlMatcher.compare = function (a, b) {
            /**
             * Turn a UrlMatcher and all its parent matchers into an array
             * of slash literals '/', string literals, and Param objects
             *
             * This example matcher matches strings like "/foo/:param/tail":
             * var matcher = $umf.compile("/foo").append($umf.compile("/:param")).append($umf.compile("/")).append($umf.compile("tail"));
             * var result = segments(matcher); // [ '/', 'foo', '/', Param, '/', 'tail' ]
             *
             * Caches the result as `matcher._cache.segments`
             */
            var segments = function (matcher) {
                return (matcher._cache.segments =
                    matcher._cache.segments ||
                        matcher._cache.path
                            .map(UrlMatcher.pathSegmentsAndParams)
                            .reduce(unnestR, [])
                            .reduce(joinNeighborsR, [])
                            .map(function (x) { return (isString(x) ? splitOnSlash(x) : x); })
                            .reduce(unnestR, []));
            };
            /**
             * Gets the sort weight for each segment of a UrlMatcher
             *
             * Caches the result as `matcher._cache.weights`
             */
            var weights = function (matcher) {
                return (matcher._cache.weights =
                    matcher._cache.weights ||
                        segments(matcher).map(function (segment) {
                            // Sort slashes first, then static strings, the Params
                            if (segment === '/')
                                return 1;
                            if (isString(segment))
                                return 2;
                            if (segment instanceof Param)
                                return 3;
                        }));
            };
            /**
             * Pads shorter array in-place (mutates)
             */
            var padArrays = function (l, r, padVal) {
                var len = Math.max(l.length, r.length);
                while (l.length < len)
                    l.push(padVal);
                while (r.length < len)
                    r.push(padVal);
            };
            var weightsA = weights(a), weightsB = weights(b);
            padArrays(weightsA, weightsB, 0);
            var _pairs = arrayTuples(weightsA, weightsB);
            var cmp, i;
            for (i = 0; i < _pairs.length; i++) {
                cmp = _pairs[i][0] - _pairs[i][1];
                if (cmp !== 0)
                    return cmp;
            }
            return 0;
        };
        /**
         * Creates a new concatenated UrlMatcher
         *
         * Builds a new UrlMatcher by appending another UrlMatcher to this one.
         *
         * @param url A `UrlMatcher` instance to append as a child of the current `UrlMatcher`.
         */
        UrlMatcher.prototype.append = function (url) {
            this._children.push(url);
            url._cache = {
                path: this._cache.path.concat(url),
                parent: this,
                pattern: null,
            };
            return url;
        };
        /** @hidden */
        UrlMatcher.prototype.isRoot = function () {
            return this._cache.path[0] === this;
        };
        /** Returns the input pattern string */
        UrlMatcher.prototype.toString = function () {
            return this.pattern;
        };
        /**
         * Tests the specified url/path against this matcher.
         *
         * Tests if the given url matches this matcher's pattern, and returns an object containing the captured
         * parameter values.  Returns null if the path does not match.
         *
         * The returned object contains the values
         * of any search parameters that are mentioned in the pattern, but their value may be null if
         * they are not present in `search`. This means that search parameters are always treated
         * as optional.
         *
         * #### Example:
         * ```js
         * new UrlMatcher('/user/{id}?q&r').exec('/user/bob', {
         *   x: '1', q: 'hello'
         * });
         * // returns { id: 'bob', q: 'hello', r: null }
         * ```
         *
         * @param path    The URL path to match, e.g. `$location.path()`.
         * @param search  URL search parameters, e.g. `$location.search()`.
         * @param hash    URL hash e.g. `$location.hash()`.
         * @param options
         *
         * @returns The captured parameter values.
         */
        UrlMatcher.prototype.exec = function (path, search, hash, options) {
            var _this = this;
            if (search === void 0) { search = {}; }
            var match = memoizeTo(this._cache, 'pattern', function () {
                return new RegExp([
                    '^',
                    unnest(_this._cache.path.map(prop('_compiled'))).join(''),
                    _this.config.strict === false ? '/?' : '',
                    '$',
                ].join(''), _this.config.caseInsensitive ? 'i' : undefined);
            }).exec(path);
            if (!match)
                return null;
            // options = defaults(options, { isolate: false });
            var allParams = this.parameters(), pathParams = allParams.filter(function (param) { return !param.isSearch(); }), searchParams = allParams.filter(function (param) { return param.isSearch(); }), nPathSegments = this._cache.path.map(function (urlm) { return urlm._segments.length - 1; }).reduce(function (a, x) { return a + x; }), values = {};
            if (nPathSegments !== match.length - 1)
                throw new Error("Unbalanced capture group in route '" + this.pattern + "'");
            function decodePathArray(paramVal) {
                var reverseString = function (str) {
                    return str
                        .split('')
                        .reverse()
                        .join('');
                };
                var unquoteDashes = function (str) { return str.replace(/\\-/g, '-'); };
                var split = reverseString(paramVal).split(/-(?!\\)/);
                var allReversed = map(split, reverseString);
                return map(allReversed, unquoteDashes).reverse();
            }
            for (var i = 0; i < nPathSegments; i++) {
                var param = pathParams[i];
                var value = match[i + 1];
                // if the param value matches a pre-replace pair, replace the value before decoding.
                for (var j = 0; j < param.replace.length; j++) {
                    if (param.replace[j].from === value)
                        value = param.replace[j].to;
                }
                if (value && param.array === true)
                    value = decodePathArray(value);
                if (isDefined(value))
                    value = param.type.decode(value);
                values[param.id] = param.value(value);
            }
            searchParams.forEach(function (param) {
                var value = search[param.id];
                for (var j = 0; j < param.replace.length; j++) {
                    if (param.replace[j].from === value)
                        value = param.replace[j].to;
                }
                if (isDefined(value))
                    value = param.type.decode(value);
                values[param.id] = param.value(value);
            });
            if (hash)
                values['#'] = hash;
            return values;
        };
        /**
         * @hidden
         * Returns all the [[Param]] objects of all path and search parameters of this pattern in order of appearance.
         *
         * @returns {Array.<Param>}  An array of [[Param]] objects. Must be treated as read-only. If the
         *    pattern has no parameters, an empty array is returned.
         */
        UrlMatcher.prototype.parameters = function (opts) {
            if (opts === void 0) { opts = {}; }
            if (opts.inherit === false)
                return this._params;
            return unnest(this._cache.path.map(function (matcher) { return matcher._params; }));
        };
        /**
         * @hidden
         * Returns a single parameter from this UrlMatcher by id
         *
         * @param id
         * @param opts
         * @returns {T|Param|any|boolean|UrlMatcher|null}
         */
        UrlMatcher.prototype.parameter = function (id, opts) {
            var _this = this;
            if (opts === void 0) { opts = {}; }
            var findParam = function () {
                for (var _i = 0, _a = _this._params; _i < _a.length; _i++) {
                    var param = _a[_i];
                    if (param.id === id)
                        return param;
                }
            };
            var parent = this._cache.parent;
            return findParam() || (opts.inherit !== false && parent && parent.parameter(id, opts)) || null;
        };
        /**
         * Validates the input parameter values against this UrlMatcher
         *
         * Checks an object hash of parameters to validate their correctness according to the parameter
         * types of this `UrlMatcher`.
         *
         * @param params The object hash of parameters to validate.
         * @returns Returns `true` if `params` validates, otherwise `false`.
         */
        UrlMatcher.prototype.validates = function (params) {
            var validParamVal = function (param, val) { return !param || param.validates(val); };
            params = params || {};
            // I'm not sure why this checks only the param keys passed in, and not all the params known to the matcher
            var paramSchema = this.parameters().filter(function (paramDef) { return params.hasOwnProperty(paramDef.id); });
            return paramSchema.map(function (paramDef) { return validParamVal(paramDef, params[paramDef.id]); }).reduce(allTrueR, true);
        };
        /**
         * Given a set of parameter values, creates a URL from this UrlMatcher.
         *
         * Creates a URL that matches this pattern by substituting the specified values
         * for the path and search parameters.
         *
         * #### Example:
         * ```js
         * new UrlMatcher('/user/{id}?q').format({ id:'bob', q:'yes' });
         * // returns '/user/bob?q=yes'
         * ```
         *
         * @param values  the values to substitute for the parameters in this pattern.
         * @returns the formatted URL (path and optionally search part).
         */
        UrlMatcher.prototype.format = function (values) {
            if (values === void 0) { values = {}; }
            // Build the full path of UrlMatchers (including all parent UrlMatchers)
            var urlMatchers = this._cache.path;
            // Extract all the static segments and Params (processed as ParamDetails)
            // into an ordered array
            var pathSegmentsAndParams = urlMatchers
                .map(UrlMatcher.pathSegmentsAndParams)
                .reduce(unnestR, [])
                .map(function (x) { return (isString(x) ? x : getDetails(x)); });
            // Extract the query params into a separate array
            var queryParams = urlMatchers
                .map(UrlMatcher.queryParams)
                .reduce(unnestR, [])
                .map(getDetails);
            var isInvalid = function (param) { return param.isValid === false; };
            if (pathSegmentsAndParams.concat(queryParams).filter(isInvalid).length) {
                return null;
            }
            /**
             * Given a Param, applies the parameter value, then returns detailed information about it
             */
            function getDetails(param) {
                // Normalize to typed value
                var value = param.value(values[param.id]);
                var isValid = param.validates(value);
                var isDefaultValue = param.isDefaultValue(value);
                // Check if we're in squash mode for the parameter
                var squash = isDefaultValue ? param.squash : false;
                // Allow the Parameter's Type to encode the value
                var encoded = param.type.encode(value);
                return { param: param, value: value, isValid: isValid, isDefaultValue: isDefaultValue, squash: squash, encoded: encoded };
            }
            // Build up the path-portion from the list of static segments and parameters
            var pathString = pathSegmentsAndParams.reduce(function (acc, x) {
                // The element is a static segment (a raw string); just append it
                if (isString(x))
                    return acc + x;
                // Otherwise, it's a ParamDetails.
                var squash = x.squash, encoded = x.encoded, param = x.param;
                // If squash is === true, try to remove a slash from the path
                if (squash === true)
                    return acc.match(/\/$/) ? acc.slice(0, -1) : acc;
                // If squash is a string, use the string for the param value
                if (isString(squash))
                    return acc + squash;
                if (squash !== false)
                    return acc; // ?
                if (encoded == null)
                    return acc;
                // If this parameter value is an array, encode the value using encodeDashes
                if (isArray(encoded))
                    return acc + map(encoded, UrlMatcher.encodeDashes).join('-');
                // If the parameter type is "raw", then do not encodeURIComponent
                if (param.raw)
                    return acc + encoded;
                // Encode the value
                return acc + encodeURIComponent(encoded);
            }, '');
            // Build the query string by applying parameter values (array or regular)
            // then mapping to key=value, then flattening and joining using "&"
            var queryString = queryParams
                .map(function (paramDetails) {
                var param = paramDetails.param, squash = paramDetails.squash, encoded = paramDetails.encoded, isDefaultValue = paramDetails.isDefaultValue;
                if (encoded == null || (isDefaultValue && squash !== false))
                    return;
                if (!isArray(encoded))
                    encoded = [encoded];
                if (encoded.length === 0)
                    return;
                if (!param.raw)
                    encoded = map(encoded, encodeURIComponent);
                return encoded.map(function (val) { return param.id + "=" + val; });
            })
                .filter(identity)
                .reduce(unnestR, [])
                .join('&');
            // Concat the pathstring with the queryString (if exists) and the hashString (if exists)
            return pathString + (queryString ? "?" + queryString : '') + (values['#'] ? '#' + values['#'] : '');
        };
        /** @hidden */
        UrlMatcher.nameValidator = /^\w+([-.]+\w+)*(?:\[\])?$/;
        return UrlMatcher;
    }());

    var __assign = (undefined && undefined.__assign) || function () {
        __assign = Object.assign || function(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                    t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };
    /** @internalapi */
    var ParamFactory = /** @class */ (function () {
        function ParamFactory(router) {
            this.router = router;
        }
        ParamFactory.prototype.fromConfig = function (id, type, state) {
            return new Param(id, type, exports.DefType.CONFIG, this.router.urlService.config, state);
        };
        ParamFactory.prototype.fromPath = function (id, type, state) {
            return new Param(id, type, exports.DefType.PATH, this.router.urlService.config, state);
        };
        ParamFactory.prototype.fromSearch = function (id, type, state) {
            return new Param(id, type, exports.DefType.SEARCH, this.router.urlService.config, state);
        };
        return ParamFactory;
    }());
    /**
     * Factory for [[UrlMatcher]] instances.
     *
     * The factory is available to ng1 services as
     * `$urlMatcherFactory` or ng1 providers as `$urlMatcherFactoryProvider`.
     *
     * @internalapi
     */
    var UrlMatcherFactory = /** @class */ (function () {
        // TODO: move implementations to UrlConfig (urlService.config)
        function UrlMatcherFactory(/** @hidden */ router) {
            var _this = this;
            this.router = router;
            /** @internalapi Creates a new [[Param]] for a given location (DefType) */
            this.paramFactory = new ParamFactory(this.router);
            /** @deprecated use [[UrlConfig.caseInsensitive]] */
            this.caseInsensitive = function (value) { return _this.router.urlService.config.caseInsensitive(value); };
            /** @deprecated use [[UrlConfig.defaultSquashPolicy]] */
            this.defaultSquashPolicy = function (value) { return _this.router.urlService.config.defaultSquashPolicy(value); };
            /** @deprecated use [[UrlConfig.strictMode]] */
            this.strictMode = function (value) { return _this.router.urlService.config.strictMode(value); };
            /** @deprecated use [[UrlConfig.type]] */
            this.type = function (name, definition, definitionFn) {
                return _this.router.urlService.config.type(name, definition, definitionFn) || _this;
            };
            extend(this, { UrlMatcher: UrlMatcher, Param: Param });
        }
        /**
         * Creates a [[UrlMatcher]] for the specified pattern.
         *
         * @param pattern  The URL pattern.
         * @param config  The config object hash.
         * @returns The UrlMatcher.
         */
        UrlMatcherFactory.prototype.compile = function (pattern, config) {
            var urlConfig = this.router.urlService.config;
            // backward-compatible support for config.params -> config.state.params
            var params = config && !config.state && config.params;
            config = params ? __assign({ state: { params: params } }, config) : config;
            var globalConfig = { strict: urlConfig._isStrictMode, caseInsensitive: urlConfig._isCaseInsensitive };
            return new UrlMatcher(pattern, urlConfig.paramTypes, this.paramFactory, extend(globalConfig, config));
        };
        /**
         * Returns true if the specified object is a [[UrlMatcher]], or false otherwise.
         *
         * @param object  The object to perform the type check against.
         * @returns `true` if the object matches the `UrlMatcher` interface, by
         *          implementing all the same methods.
         */
        UrlMatcherFactory.prototype.isMatcher = function (object) {
            // TODO: typeof?
            if (!isObject(object))
                return false;
            var result = true;
            forEach(UrlMatcher.prototype, function (val, name) {
                if (isFunction(val))
                    result = result && (isDefined(object[name]) && isFunction(object[name]));
            });
            return result;
        };
        /** @hidden */
        UrlMatcherFactory.prototype.$get = function () {
            var urlConfig = this.router.urlService.config;
            urlConfig.paramTypes.enqueue = false;
            urlConfig.paramTypes._flushTypeQueue();
            return this;
        };
        return UrlMatcherFactory;
    }());

    /** @publicapi @module url */ /** */
    /**
     * Creates a [[UrlRule]]
     *
     * Creates a [[UrlRule]] from a:
     *
     * - `string`
     * - [[UrlMatcher]]
     * - `RegExp`
     * - [[StateObject]]
     * @internalapi
     */
    var UrlRuleFactory = /** @class */ (function () {
        function UrlRuleFactory(router) {
            this.router = router;
        }
        UrlRuleFactory.prototype.compile = function (str) {
            return this.router.urlMatcherFactory.compile(str);
        };
        UrlRuleFactory.prototype.create = function (what, handler) {
            var _this = this;
            var isState = StateObject.isState;
            var makeRule = pattern([
                [isString, function (_what) { return makeRule(_this.compile(_what)); }],
                [is(UrlMatcher), function (_what) { return _this.fromUrlMatcher(_what, handler); }],
                [isState, function (_what) { return _this.fromState(_what, _this.router); }],
                [is(RegExp), function (_what) { return _this.fromRegExp(_what, handler); }],
                [isFunction, function (_what) { return new BaseUrlRule(_what, handler); }],
            ]);
            var rule = makeRule(what);
            if (!rule)
                throw new Error("invalid 'what' in when()");
            return rule;
        };
        /**
         * A UrlRule which matches based on a UrlMatcher
         *
         * The `handler` may be either a `string`, a [[UrlRuleHandlerFn]] or another [[UrlMatcher]]
         *
         * ## Handler as a function
         *
         * If `handler` is a function, the function is invoked with:
         *
         * - matched parameter values ([[RawParams]] from [[UrlMatcher.exec]])
         * - url: the current Url ([[UrlParts]])
         * - router: the router object ([[UIRouter]])
         *
         * #### Example:
         * ```js
         * var urlMatcher = $umf.compile("/foo/:fooId/:barId");
         * var rule = factory.fromUrlMatcher(urlMatcher, match => "/home/" + match.fooId + "/" + match.barId);
         * var match = rule.match('/foo/123/456'); // results in { fooId: '123', barId: '456' }
         * var result = rule.handler(match); // '/home/123/456'
         * ```
         *
         * ## Handler as UrlMatcher
         *
         * If `handler` is a UrlMatcher, the handler matcher is used to create the new url.
         * The `handler` UrlMatcher is formatted using the matched param from the first matcher.
         * The url is replaced with the result.
         *
         * #### Example:
         * ```js
         * var urlMatcher = $umf.compile("/foo/:fooId/:barId");
         * var handler = $umf.compile("/home/:fooId/:barId");
         * var rule = factory.fromUrlMatcher(urlMatcher, handler);
         * var match = rule.match('/foo/123/456'); // results in { fooId: '123', barId: '456' }
         * var result = rule.handler(match); // '/home/123/456'
         * ```
         */
        UrlRuleFactory.prototype.fromUrlMatcher = function (urlMatcher, handler) {
            var _handler = handler;
            if (isString(handler))
                handler = this.router.urlMatcherFactory.compile(handler);
            if (is(UrlMatcher)(handler))
                _handler = function (match) { return handler.format(match); };
            function matchUrlParamters(url) {
                var params = urlMatcher.exec(url.path, url.search, url.hash);
                return urlMatcher.validates(params) && params;
            }
            // Prioritize URLs, lowest to highest:
            // - Some optional URL parameters, but none matched
            // - No optional parameters in URL
            // - Some optional parameters, some matched
            // - Some optional parameters, all matched
            function matchPriority(params) {
                var optional = urlMatcher.parameters().filter(function (param) { return param.isOptional; });
                if (!optional.length)
                    return 0.000001;
                var matched = optional.filter(function (param) { return params[param.id]; });
                return matched.length / optional.length;
            }
            var details = { urlMatcher: urlMatcher, matchPriority: matchPriority, type: 'URLMATCHER' };
            return extend(new BaseUrlRule(matchUrlParamters, _handler), details);
        };
        /**
         * A UrlRule which matches a state by its url
         *
         * #### Example:
         * ```js
         * var rule = factory.fromState($state.get('foo'), router);
         * var match = rule.match('/foo/123/456'); // results in { fooId: '123', barId: '456' }
         * var result = rule.handler(match);
         * // Starts a transition to 'foo' with params: { fooId: '123', barId: '456' }
         * ```
         */
        UrlRuleFactory.prototype.fromState = function (state, router) {
            /**
             * Handles match by transitioning to matched state
             *
             * First checks if the router should start a new transition.
             * A new transition is not required if the current state's URL
             * and the new URL are already identical
             */
            var handler = function (match) {
                var $state = router.stateService;
                var globals = router.globals;
                if ($state.href(state, match) !== $state.href(globals.current, globals.params)) {
                    $state.transitionTo(state, match, { inherit: true, source: 'url' });
                }
            };
            var details = { state: state, type: 'STATE' };
            return extend(this.fromUrlMatcher(state.url, handler), details);
        };
        /**
         * A UrlRule which matches based on a regular expression
         *
         * The `handler` may be either a [[UrlRuleHandlerFn]] or a string.
         *
         * ## Handler as a function
         *
         * If `handler` is a function, the function is invoked with:
         *
         * - regexp match array (from `regexp`)
         * - url: the current Url ([[UrlParts]])
         * - router: the router object ([[UIRouter]])
         *
         * #### Example:
         * ```js
         * var rule = factory.fromRegExp(/^\/foo\/(bar|baz)$/, match => "/home/" + match[1])
         * var match = rule.match('/foo/bar'); // results in [ '/foo/bar', 'bar' ]
         * var result = rule.handler(match); // '/home/bar'
         * ```
         *
         * ## Handler as string
         *
         * If `handler` is a string, the url is *replaced by the string* when the Rule is invoked.
         * The string is first interpolated using `string.replace()` style pattern.
         *
         * #### Example:
         * ```js
         * var rule = factory.fromRegExp(/^\/foo\/(bar|baz)$/, "/home/$1")
         * var match = rule.match('/foo/bar'); // results in [ '/foo/bar', 'bar' ]
         * var result = rule.handler(match); // '/home/bar'
         * ```
         */
        UrlRuleFactory.prototype.fromRegExp = function (regexp, handler) {
            if (regexp.global || regexp.sticky)
                throw new Error('Rule RegExp must not be global or sticky');
            /**
             * If handler is a string, the url will be replaced by the string.
             * If the string has any String.replace() style variables in it (like `$2`),
             * they will be replaced by the captures from [[match]]
             */
            var redirectUrlTo = function (match) {
                // Interpolates matched values into $1 $2, etc using a String.replace()-style pattern
                return handler.replace(/\$(\$|\d{1,2})/, function (m, what) { return match[what === '$' ? 0 : Number(what)]; });
            };
            var _handler = isString(handler) ? redirectUrlTo : handler;
            var matchParamsFromRegexp = function (url) { return regexp.exec(url.path); };
            var details = { regexp: regexp, type: 'REGEXP' };
            return extend(new BaseUrlRule(matchParamsFromRegexp, _handler), details);
        };
        UrlRuleFactory.isUrlRule = function (obj) { return obj && ['type', 'match', 'handler'].every(function (key) { return isDefined(obj[key]); }); };
        return UrlRuleFactory;
    }());
    /**
     * A base rule which calls `match`
     *
     * The value from the `match` function is passed through to the `handler`.
     * @internalapi
     */
    var BaseUrlRule = /** @class */ (function () {
        function BaseUrlRule(match, handler) {
            var _this = this;
            this.match = match;
            this.type = 'RAW';
            this.matchPriority = function (match) { return 0 - _this.$id; };
            this.handler = handler || identity;
        }
        return BaseUrlRule;
    }());

    /** @publicapi @module url */ /** */
    /** @hidden */
    function appendBasePath(url, isHtml5, absolute, baseHref) {
        if (baseHref === '/')
            return url;
        if (isHtml5)
            return stripLastPathElement(baseHref) + url;
        if (absolute)
            return baseHref.slice(1) + url;
        return url;
    }
    /**
     * Updates URL and responds to URL changes
     *
     * ### Deprecation warning:
     * This class is now considered to be an internal API
     * Use the [[UrlService]] instead.
     * For configuring URL rules, use the [[UrlRules]] which can be found as [[UrlService.rules]].
     *
     * @internalapi
     */
    var UrlRouter = /** @class */ (function () {
        /** @hidden */
        function UrlRouter(/** @hidden */ router) {
            var _this = this;
            this.router = router;
            // Delegate these calls to [[UrlService]]
            /** @deprecated use [[UrlService.sync]]*/
            this.sync = function (evt) { return _this.router.urlService.sync(evt); };
            /** @deprecated use [[UrlService.listen]]*/
            this.listen = function (enabled) { return _this.router.urlService.listen(enabled); };
            /** @deprecated use [[UrlService.deferIntercept]]*/
            this.deferIntercept = function (defer) { return _this.router.urlService.deferIntercept(defer); };
            /** @deprecated use [[UrlService.match]]*/
            this.match = function (urlParts) { return _this.router.urlService.match(urlParts); };
            // Delegate these calls to [[UrlRules]]
            /** @deprecated use [[UrlRules.initial]]*/
            this.initial = function (handler) {
                return _this.router.urlService.rules.initial(handler);
            };
            /** @deprecated use [[UrlRules.otherwise]]*/
            this.otherwise = function (handler) {
                return _this.router.urlService.rules.otherwise(handler);
            };
            /** @deprecated use [[UrlRules.removeRule]]*/
            this.removeRule = function (rule) { return _this.router.urlService.rules.removeRule(rule); };
            /** @deprecated use [[UrlRules.rule]]*/
            this.rule = function (rule) { return _this.router.urlService.rules.rule(rule); };
            /** @deprecated use [[UrlRules.rules]]*/
            this.rules = function () { return _this.router.urlService.rules.rules(); };
            /** @deprecated use [[UrlRules.sort]]*/
            this.sort = function (compareFn) { return _this.router.urlService.rules.sort(compareFn); };
            /** @deprecated use [[UrlRules.when]]*/
            this.when = function (matcher, handler, options) { return _this.router.urlService.rules.when(matcher, handler, options); };
            this.urlRuleFactory = new UrlRuleFactory(router);
        }
        /**
         * Internal API.
         * @internalapi
         */
        UrlRouter.prototype.update = function (read) {
            var $url = this.router.locationService;
            if (read) {
                this.location = $url.url();
                return;
            }
            if ($url.url() === this.location)
                return;
            $url.url(this.location, true);
        };
        /**
         * Internal API.
         *
         * Pushes a new location to the browser history.
         *
         * @internalapi
         * @param urlMatcher
         * @param params
         * @param options
         */
        UrlRouter.prototype.push = function (urlMatcher, params, options) {
            var replace = options && !!options.replace;
            this.router.urlService.url(urlMatcher.format(params || {}), replace);
        };
        /**
         * Builds and returns a URL with interpolated parameters
         *
         * #### Example:
         * ```js
         * matcher = $umf.compile("/about/:person");
         * params = { person: "bob" };
         * $bob = $urlRouter.href(matcher, params);
         * // $bob == "/about/bob";
         * ```
         *
         * @param urlMatcher The [[UrlMatcher]] object which is used as the template of the URL to generate.
         * @param params An object of parameter values to fill the matcher's required parameters.
         * @param options Options object. The options are:
         *
         * - **`absolute`** - {boolean=false},  If true will generate an absolute url, e.g. "http://www.example.com/fullurl".
         *
         * @returns Returns the fully compiled URL, or `null` if `params` fail validation against `urlMatcher`
         */
        UrlRouter.prototype.href = function (urlMatcher, params, options) {
            var url = urlMatcher.format(params);
            if (url == null)
                return null;
            options = options || { absolute: false };
            var cfg = this.router.urlService.config;
            var isHtml5 = cfg.html5Mode();
            if (!isHtml5 && url !== null) {
                url = '#' + cfg.hashPrefix() + url;
            }
            url = appendBasePath(url, isHtml5, options.absolute, cfg.baseHref());
            if (!options.absolute || !url) {
                return url;
            }
            var slash = !isHtml5 && url ? '/' : '';
            var cfgPort = cfg.port();
            var port = (cfgPort === 80 || cfgPort === 443 ? '' : ':' + cfgPort);
            return [cfg.protocol(), '://', cfg.host(), port, slash, url].join('');
        };
        Object.defineProperty(UrlRouter.prototype, "interceptDeferred", {
            /** @deprecated use [[UrlService.interceptDeferred]]*/
            get: function () {
                return this.router.urlService.interceptDeferred;
            },
            enumerable: true,
            configurable: true
        });
        return UrlRouter;
    }());

    /** @publicapi @module view */ /** */
    /**
     * The View service
     *
     * This service pairs existing `ui-view` components (which live in the DOM)
     * with view configs (from the state declaration objects: [[StateDeclaration.views]]).
     *
     * - After a successful Transition, the views from the newly entered states are activated via [[activateViewConfig]].
     *   The views from exited states are deactivated via [[deactivateViewConfig]].
     *   (See: the [[registerActivateViews]] Transition Hook)
     *
     * - As `ui-view` components pop in and out of existence, they register themselves using [[registerUIView]].
     *
     * - When the [[sync]] function is called, the registered `ui-view`(s) ([[ActiveUIView]])
     * are configured with the matching [[ViewConfig]](s)
     *
     */
    var ViewService = /** @class */ (function () {
        /** @hidden */
        function ViewService(/** @hidden */ router) {
            var _this = this;
            this.router = router;
            /** @hidden */ this._uiViews = [];
            /** @hidden */ this._viewConfigs = [];
            /** @hidden */ this._viewConfigFactories = {};
            /** @hidden */ this._listeners = [];
            /** @internalapi */
            this._pluginapi = {
                _rootViewContext: this._rootViewContext.bind(this),
                _viewConfigFactory: this._viewConfigFactory.bind(this),
                _registeredUIView: function (id) { return find(_this._uiViews, function (view) { return _this.router.$id + "." + view.id === id; }); },
                _registeredUIViews: function () { return _this._uiViews; },
                _activeViewConfigs: function () { return _this._viewConfigs; },
                _onSync: function (listener) {
                    _this._listeners.push(listener);
                    return function () { return removeFrom(_this._listeners, listener); };
                },
            };
        }
        /**
         * Normalizes a view's name from a state.views configuration block.
         *
         * This should be used by a framework implementation to calculate the values for
         * [[_ViewDeclaration.$uiViewName]] and [[_ViewDeclaration.$uiViewContextAnchor]].
         *
         * @param context the context object (state declaration) that the view belongs to
         * @param rawViewName the name of the view, as declared in the [[StateDeclaration.views]]
         *
         * @returns the normalized uiViewName and uiViewContextAnchor that the view targets
         */
        ViewService.normalizeUIViewTarget = function (context, rawViewName) {
            if (rawViewName === void 0) { rawViewName = ''; }
            // TODO: Validate incoming view name with a regexp to allow:
            // ex: "view.name@foo.bar" , "^.^.view.name" , "view.name@^.^" , "" ,
            // "@" , "$default@^" , "!$default.$default" , "!foo.bar"
            var viewAtContext = rawViewName.split('@');
            var uiViewName = viewAtContext[0] || '$default'; // default to unnamed view
            var uiViewContextAnchor = isString(viewAtContext[1]) ? viewAtContext[1] : '^'; // default to parent context
            // Handle relative view-name sugar syntax.
            // Matches rawViewName "^.^.^.foo.bar" into array: ["^.^.^.foo.bar", "^.^.^", "foo.bar"],
            var relativeViewNameSugar = /^(\^(?:\.\^)*)\.(.*$)/.exec(uiViewName);
            if (relativeViewNameSugar) {
                // Clobbers existing contextAnchor (rawViewName validation will fix this)
                uiViewContextAnchor = relativeViewNameSugar[1]; // set anchor to "^.^.^"
                uiViewName = relativeViewNameSugar[2]; // set view-name to "foo.bar"
            }
            if (uiViewName.charAt(0) === '!') {
                uiViewName = uiViewName.substr(1);
                uiViewContextAnchor = ''; // target absolutely from root
            }
            // handle parent relative targeting "^.^.^"
            var relativeMatch = /^(\^(?:\.\^)*)$/;
            if (relativeMatch.exec(uiViewContextAnchor)) {
                var anchorState = uiViewContextAnchor.split('.').reduce(function (anchor, x) { return anchor.parent; }, context);
                uiViewContextAnchor = anchorState.name;
            }
            else if (uiViewContextAnchor === '.') {
                uiViewContextAnchor = context.name;
            }
            return { uiViewName: uiViewName, uiViewContextAnchor: uiViewContextAnchor };
        };
        /** @hidden */
        ViewService.prototype._rootViewContext = function (context) {
            return (this._rootContext = context || this._rootContext);
        };
        /** @hidden */
        ViewService.prototype._viewConfigFactory = function (viewType, factory) {
            this._viewConfigFactories[viewType] = factory;
        };
        ViewService.prototype.createViewConfig = function (path, decl) {
            var cfgFactory = this._viewConfigFactories[decl.$type];
            if (!cfgFactory)
                throw new Error('ViewService: No view config factory registered for type ' + decl.$type);
            var cfgs = cfgFactory(path, decl);
            return isArray(cfgs) ? cfgs : [cfgs];
        };
        /**
         * Deactivates a ViewConfig.
         *
         * This function deactivates a `ViewConfig`.
         * After calling [[sync]], it will un-pair from any `ui-view` with which it is currently paired.
         *
         * @param viewConfig The ViewConfig view to deregister.
         */
        ViewService.prototype.deactivateViewConfig = function (viewConfig) {
            trace.traceViewServiceEvent('<- Removing', viewConfig);
            removeFrom(this._viewConfigs, viewConfig);
        };
        ViewService.prototype.activateViewConfig = function (viewConfig) {
            trace.traceViewServiceEvent('-> Registering', viewConfig);
            this._viewConfigs.push(viewConfig);
        };
        ViewService.prototype.sync = function () {
            var _this = this;
            var uiViewsByFqn = this._uiViews.map(function (uiv) { return [uiv.fqn, uiv]; }).reduce(applyPairs, {});
            // Return a weighted depth value for a uiView.
            // The depth is the nesting depth of ui-views (based on FQN; times 10,000)
            // plus the depth of the state that is populating the uiView
            function uiViewDepth(uiView) {
                var stateDepth = function (context) { return (context && context.parent ? stateDepth(context.parent) + 1 : 1); };
                return uiView.fqn.split('.').length * 10000 + stateDepth(uiView.creationContext);
            }
            // Return the ViewConfig's context's depth in the context tree.
            function viewConfigDepth(config) {
                var context = config.viewDecl.$context, count = 0;
                while (++count && context.parent)
                    context = context.parent;
                return count;
            }
            // Given a depth function, returns a compare function which can return either ascending or descending order
            var depthCompare = curry(function (depthFn, posNeg, left, right) { return posNeg * (depthFn(left) - depthFn(right)); });
            var matchingConfigPair = function (uiView) {
                var matchingConfigs = _this._viewConfigs.filter(ViewService.matches(uiViewsByFqn, uiView));
                if (matchingConfigs.length > 1) {
                    // This is OK.  Child states can target a ui-view that the parent state also targets (the child wins)
                    // Sort by depth and return the match from the deepest child
                    // console.log(`Multiple matching view configs for ${uiView.fqn}`, matchingConfigs);
                    matchingConfigs.sort(depthCompare(viewConfigDepth, -1)); // descending
                }
                return { uiView: uiView, viewConfig: matchingConfigs[0] };
            };
            var configureUIView = function (tuple) {
                // If a parent ui-view is reconfigured, it could destroy child ui-views.
                // Before configuring a child ui-view, make sure it's still in the active uiViews array.
                if (_this._uiViews.indexOf(tuple.uiView) !== -1)
                    tuple.uiView.configUpdated(tuple.viewConfig);
            };
            // Sort views by FQN and state depth. Process uiviews nearest the root first.
            var uiViewTuples = this._uiViews.sort(depthCompare(uiViewDepth, 1)).map(matchingConfigPair);
            var matchedViewConfigs = uiViewTuples.map(function (tuple) { return tuple.viewConfig; });
            var unmatchedConfigTuples = this._viewConfigs
                .filter(function (config) { return !inArray(matchedViewConfigs, config); })
                .map(function (viewConfig) { return ({ uiView: undefined, viewConfig: viewConfig }); });
            uiViewTuples.forEach(configureUIView);
            var allTuples = uiViewTuples.concat(unmatchedConfigTuples);
            this._listeners.forEach(function (cb) { return cb(allTuples); });
            trace.traceViewSync(allTuples);
        };
        /**
         * Registers a `ui-view` component
         *
         * When a `ui-view` component is created, it uses this method to register itself.
         * After registration the [[sync]] method is used to ensure all `ui-view` are configured with the proper [[ViewConfig]].
         *
         * Note: the `ui-view` component uses the `ViewConfig` to determine what view should be loaded inside the `ui-view`,
         * and what the view's state context is.
         *
         * Note: There is no corresponding `deregisterUIView`.
         *       A `ui-view` should hang on to the return value of `registerUIView` and invoke it to deregister itself.
         *
         * @param uiView The metadata for a UIView
         * @return a de-registration function used when the view is destroyed.
         */
        ViewService.prototype.registerUIView = function (uiView) {
            trace.traceViewServiceUIViewEvent('-> Registering', uiView);
            var uiViews = this._uiViews;
            var fqnAndTypeMatches = function (uiv) { return uiv.fqn === uiView.fqn && uiv.$type === uiView.$type; };
            if (uiViews.filter(fqnAndTypeMatches).length)
                trace.traceViewServiceUIViewEvent('!!!! duplicate uiView named:', uiView);
            uiViews.push(uiView);
            this.sync();
            return function () {
                var idx = uiViews.indexOf(uiView);
                if (idx === -1) {
                    trace.traceViewServiceUIViewEvent('Tried removing non-registered uiView', uiView);
                    return;
                }
                trace.traceViewServiceUIViewEvent('<- Deregistering', uiView);
                removeFrom(uiViews)(uiView);
            };
        };
        /**
         * Returns the list of views currently available on the page, by fully-qualified name.
         *
         * @return {Array} Returns an array of fully-qualified view names.
         */
        ViewService.prototype.available = function () {
            return this._uiViews.map(prop('fqn'));
        };
        /**
         * Returns the list of views on the page containing loaded content.
         *
         * @return {Array} Returns an array of fully-qualified view names.
         */
        ViewService.prototype.active = function () {
            return this._uiViews.filter(prop('$config')).map(prop('name'));
        };
        /**
         * Given a ui-view and a ViewConfig, determines if they "match".
         *
         * A ui-view has a fully qualified name (fqn) and a context object.  The fqn is built from its overall location in
         * the DOM, describing its nesting relationship to any parent ui-view tags it is nested inside of.
         *
         * A ViewConfig has a target ui-view name and a context anchor.  The ui-view name can be a simple name, or
         * can be a segmented ui-view path, describing a portion of a ui-view fqn.
         *
         * In order for a ui-view to match ViewConfig, ui-view's $type must match the ViewConfig's $type
         *
         * If the ViewConfig's target ui-view name is a simple name (no dots), then a ui-view matches if:
         * - the ui-view's name matches the ViewConfig's target name
         * - the ui-view's context matches the ViewConfig's anchor
         *
         * If the ViewConfig's target ui-view name is a segmented name (with dots), then a ui-view matches if:
         * - There exists a parent ui-view where:
         *    - the parent ui-view's name matches the first segment (index 0) of the ViewConfig's target name
         *    - the parent ui-view's context matches the ViewConfig's anchor
         * - And the remaining segments (index 1..n) of the ViewConfig's target name match the tail of the ui-view's fqn
         *
         * Example:
         *
         * DOM:
         * <ui-view>                        <!-- created in the root context (name: "") -->
         *   <ui-view name="foo">                <!-- created in the context named: "A"      -->
         *     <ui-view>                    <!-- created in the context named: "A.B"    -->
         *       <ui-view name="bar">            <!-- created in the context named: "A.B.C"  -->
         *       </ui-view>
         *     </ui-view>
         *   </ui-view>
         * </ui-view>
         *
         * uiViews: [
         *  { fqn: "$default",                  creationContext: { name: "" } },
         *  { fqn: "$default.foo",              creationContext: { name: "A" } },
         *  { fqn: "$default.foo.$default",     creationContext: { name: "A.B" } }
         *  { fqn: "$default.foo.$default.bar", creationContext: { name: "A.B.C" } }
         * ]
         *
         * These four view configs all match the ui-view with the fqn: "$default.foo.$default.bar":
         *
         * - ViewConfig1: { uiViewName: "bar",                       uiViewContextAnchor: "A.B.C" }
         * - ViewConfig2: { uiViewName: "$default.bar",              uiViewContextAnchor: "A.B" }
         * - ViewConfig3: { uiViewName: "foo.$default.bar",          uiViewContextAnchor: "A" }
         * - ViewConfig4: { uiViewName: "$default.foo.$default.bar", uiViewContextAnchor: "" }
         *
         * Using ViewConfig3 as an example, it matches the ui-view with fqn "$default.foo.$default.bar" because:
         * - The ViewConfig's segmented target name is: [ "foo", "$default", "bar" ]
         * - There exists a parent ui-view (which has fqn: "$default.foo") where:
         *    - the parent ui-view's name "foo" matches the first segment "foo" of the ViewConfig's target name
         *    - the parent ui-view's context "A" matches the ViewConfig's anchor context "A"
         * - And the remaining segments [ "$default", "bar" ].join("."_ of the ViewConfig's target name match
         *   the tail of the ui-view's fqn "default.bar"
         *
         * @internalapi
         */
        ViewService.matches = function (uiViewsByFqn, uiView) { return function (viewConfig) {
            // Don't supply an ng1 ui-view with an ng2 ViewConfig, etc
            if (uiView.$type !== viewConfig.viewDecl.$type)
                return false;
            // Split names apart from both viewConfig and uiView into segments
            var vc = viewConfig.viewDecl;
            var vcSegments = vc.$uiViewName.split('.');
            var uivSegments = uiView.fqn.split('.');
            // Check if the tails of the segment arrays match. ex, these arrays' tails match:
            // vc: ["foo", "bar"], uiv fqn: ["$default", "foo", "bar"]
            if (!equals(vcSegments, uivSegments.slice(0 - vcSegments.length)))
                return false;
            // Now check if the fqn ending at the first segment of the viewConfig matches the context:
            // ["$default", "foo"].join(".") == "$default.foo", does the ui-view $default.foo context match?
            var negOffset = 1 - vcSegments.length || undefined;
            var fqnToFirstSegment = uivSegments.slice(0, negOffset).join('.');
            var uiViewContext = uiViewsByFqn[fqnToFirstSegment].creationContext;
            return vc.$uiViewContextAnchor === (uiViewContext && uiViewContext.name);
        }; };
        return ViewService;
    }());

    /** @publicapi @module core */ /** */
    /**
     * Global router state
     *
     * This is where we hold the global mutable state such as current state, current
     * params, current transition, etc.
     */
    var UIRouterGlobals = /** @class */ (function () {
        function UIRouterGlobals() {
            /**
             * Current parameter values
             *
             * The parameter values from the latest successful transition
             */
            this.params = new StateParams();
            /** @internalapi */
            this.lastStartedTransitionId = -1;
            /** @internalapi */
            this.transitionHistory = new Queue([], 1);
            /** @internalapi */
            this.successfulTransitions = new Queue([], 1);
        }
        UIRouterGlobals.prototype.dispose = function () {
            this.transitionHistory.clear();
            this.successfulTransitions.clear();
            this.transition = null;
        };
        return UIRouterGlobals;
    }());

    /** @hidden */
    var prioritySort = function (a, b) { return (b.priority || 0) - (a.priority || 0); };
    /** @hidden */
    var typeSort = function (a, b) {
        var weights = { STATE: 4, URLMATCHER: 4, REGEXP: 3, RAW: 2, OTHER: 1 };
        return (weights[a.type] || 0) - (weights[b.type] || 0);
    };
    /** @hidden */
    var urlMatcherSort = function (a, b) {
        return !a.urlMatcher || !b.urlMatcher ? 0 : UrlMatcher.compare(a.urlMatcher, b.urlMatcher);
    };
    /** @hidden */
    var idSort = function (a, b) {
        // Identically sorted STATE and URLMATCHER best rule will be chosen by `matchPriority` after each rule matches the URL
        var useMatchPriority = { STATE: true, URLMATCHER: true };
        var equal = useMatchPriority[a.type] && useMatchPriority[b.type];
        return equal ? 0 : (a.$id || 0) - (b.$id || 0);
    };
    /**
     * Default rule priority sorting function.
     *
     * Sorts rules by:
     *
     * - Explicit priority (set rule priority using [[UrlRules.when]])
     * - Rule type (STATE: 4, URLMATCHER: 4, REGEXP: 3, RAW: 2, OTHER: 1)
     * - `UrlMatcher` specificity ([[UrlMatcher.compare]]): works for STATE and URLMATCHER types to pick the most specific rule.
     * - Rule registration order (for rule types other than STATE and URLMATCHER)
     *   - Equally sorted State and UrlMatcher rules will each match the URL.
     *     Then, the *best* match is chosen based on how many parameter values were matched.
     *
     * @publicapi
     */
    var defaultRuleSortFn;
    defaultRuleSortFn = function (a, b) {
        var cmp = prioritySort(a, b);
        if (cmp !== 0)
            return cmp;
        cmp = typeSort(a, b);
        if (cmp !== 0)
            return cmp;
        cmp = urlMatcherSort(a, b);
        if (cmp !== 0)
            return cmp;
        return idSort(a, b);
    };
    /** @hidden */
    function getHandlerFn(handler) {
        if (!isFunction(handler) && !isString(handler) && !is(TargetState)(handler) && !TargetState.isDef(handler)) {
            throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");
        }
        return isFunction(handler) ? handler : val(handler);
    }
    /**
     * API for managing URL rules
     *
     * This API is used to create and manage URL rules.
     * URL rules are a mechanism to respond to specific URL patterns.
     *
     * The most commonly used methods are [[otherwise]] and [[when]].
     *
     * This API is a property of [[UrlService]] as [[UrlService.rules]]
     *
     * @publicapi
     */
    var UrlRules = /** @class */ (function () {
        /** @hidden */
        function UrlRules(/** @hidden */ router) {
            this.router = router;
            /** @hidden */ this._sortFn = defaultRuleSortFn;
            /** @hidden */ this._rules = [];
            /** @hidden */ this._id = 0;
            this.urlRuleFactory = new UrlRuleFactory(router);
        }
        /** @hidden */
        UrlRules.prototype.dispose = function (router) {
            this._rules = [];
            delete this._otherwiseFn;
        };
        /**
         * Defines the initial state, path, or behavior to use when the app starts.
         *
         * This rule defines the initial/starting state for the application.
         *
         * This rule is triggered the first time the URL is checked (when the app initially loads).
         * The rule is triggered only when the url matches either `""` or `"/"`.
         *
         * Note: The rule is intended to be used when the root of the application is directly linked to.
         * When the URL is *not* `""` or `"/"` and doesn't match other rules, the [[otherwise]] rule is triggered.
         * This allows 404-like behavior when an unknown URL is deep-linked.
         *
         * #### Example:
         * Start app at `home` state.
         * ```js
         * .initial({ state: 'home' });
         * ```
         *
         * #### Example:
         * Start app at `/home` (by url)
         * ```js
         * .initial('/home');
         * ```
         *
         * #### Example:
         * When no other url rule matches, go to `home` state
         * ```js
         * .initial((matchValue, url, router) => {
         *   console.log('initial state');
         *   return { state: 'home' };
         * })
         * ```
         *
         * @param handler The initial state or url path, or a function which returns the state or url path (or performs custom logic).
         */
        UrlRules.prototype.initial = function (handler) {
            var handlerFn = getHandlerFn(handler);
            var matchFn = function (urlParts, router) {
                return router.globals.transitionHistory.size() === 0 && !!/^\/?$/.exec(urlParts.path);
            };
            this.rule(this.urlRuleFactory.create(matchFn, handlerFn));
        };
        /**
         * Defines the state, url, or behavior to use when no other rule matches the URL.
         *
         * This rule is matched when *no other rule* matches.
         * It is generally used to handle unknown URLs (similar to "404" behavior, but on the client side).
         *
         * - If `handler` a string, it is treated as a url redirect
         *
         * #### Example:
         * When no other url rule matches, redirect to `/index`
         * ```js
         * .otherwise('/index');
         * ```
         *
         * - If `handler` is an object with a `state` property, the state is activated.
         *
         * #### Example:
         * When no other url rule matches, redirect to `home` and provide a `dashboard` parameter value.
         * ```js
         * .otherwise({ state: 'home', params: { dashboard: 'default' } });
         * ```
         *
         * - If `handler` is a function, the function receives the current url ([[UrlParts]]) and the [[UIRouter]] object.
         *   The function can perform actions, and/or return a value.
         *
         * #### Example:
         * When no other url rule matches, manually trigger a transition to the `home` state
         * ```js
         * .otherwise((matchValue, urlParts, router) => {
         *   router.stateService.go('home');
         * });
         * ```
         *
         * #### Example:
         * When no other url rule matches, go to `home` state
         * ```js
         * .otherwise((matchValue, urlParts, router) => {
         *   return { state: 'home' };
         * });
         * ```
         *
         * @param handler The url path to redirect to, or a function which returns the url path (or performs custom logic).
         */
        UrlRules.prototype.otherwise = function (handler) {
            var handlerFn = getHandlerFn(handler);
            this._otherwiseFn = this.urlRuleFactory.create(val(true), handlerFn);
            this._sorted = false;
        };
        /**
         * Remove a rule previously registered
         *
         * @param rule the matcher rule that was previously registered using [[rule]]
         */
        UrlRules.prototype.removeRule = function (rule) {
            removeFrom(this._rules, rule);
        };
        /**
         * Manually adds a URL Rule.
         *
         * Usually, a url rule is added using [[StateDeclaration.url]] or [[when]].
         * This api can be used directly for more control (to register a [[BaseUrlRule]], for example).
         * Rules can be created using [[urlRuleFactory]], or created manually as simple objects.
         *
         * A rule should have a `match` function which returns truthy if the rule matched.
         * It should also have a `handler` function which is invoked if the rule is the best match.
         *
         * @return a function that deregisters the rule
         */
        UrlRules.prototype.rule = function (rule) {
            var _this = this;
            if (!UrlRuleFactory.isUrlRule(rule))
                throw new Error('invalid rule');
            rule.$id = this._id++;
            rule.priority = rule.priority || 0;
            this._rules.push(rule);
            this._sorted = false;
            return function () { return _this.removeRule(rule); };
        };
        /**
         * Gets all registered rules
         *
         * @returns an array of all the registered rules
         */
        UrlRules.prototype.rules = function () {
            this.ensureSorted();
            return this._rules.concat(this._otherwiseFn ? [this._otherwiseFn] : []);
        };
        /**
         * Defines URL Rule priorities
         *
         * More than one rule ([[UrlRule]]) might match a given URL.
         * This `compareFn` is used to sort the rules by priority.
         * Higher priority rules should sort earlier.
         *
         * The [[defaultRuleSortFn]] is used by default.
         *
         * You only need to call this function once.
         * The `compareFn` will be used to sort the rules as each is registered.
         *
         * If called without any parameter, it will re-sort the rules.
         *
         * ---
         *
         * Url rules may come from multiple sources: states's urls ([[StateDeclaration.url]]), [[when]], and [[rule]].
         * Each rule has a (user-provided) [[UrlRule.priority]], a [[UrlRule.type]], and a [[UrlRule.$id]]
         * The `$id` is is the order in which the rule was registered.
         *
         * The sort function should use these data, or data found on a specific type
         * of [[UrlRule]] (such as [[StateRule.state]]), to order the rules as desired.
         *
         * #### Example:
         * This compare function prioritizes rules by the order in which the rules were registered.
         * A rule registered earlier has higher priority.
         *
         * ```js
         * function compareFn(a, b) {
         *   return a.$id - b.$id;
         * }
         * ```
         *
         * @param compareFn a function that compares to [[UrlRule]] objects.
         *    The `compareFn` should abide by the `Array.sort` compare function rules.
         *    Given two rules, `a` and `b`, return a negative number if `a` should be higher priority.
         *    Return a positive number if `b` should be higher priority.
         *    Return `0` if the rules are identical.
         *
         *    See the [mozilla reference](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#Description)
         *    for details.
         */
        UrlRules.prototype.sort = function (compareFn) {
            var sorted = this.stableSort(this._rules, (this._sortFn = compareFn || this._sortFn));
            // precompute _sortGroup values and apply to each rule
            var group = 0;
            for (var i = 0; i < sorted.length; i++) {
                sorted[i]._group = group;
                if (i < sorted.length - 1 && this._sortFn(sorted[i], sorted[i + 1]) !== 0) {
                    group++;
                }
            }
            this._rules = sorted;
            this._sorted = true;
        };
        /** @hidden */
        UrlRules.prototype.ensureSorted = function () {
            this._sorted || this.sort();
        };
        /** @hidden */
        UrlRules.prototype.stableSort = function (arr, compareFn) {
            var arrOfWrapper = arr.map(function (elem, idx) { return ({ elem: elem, idx: idx }); });
            arrOfWrapper.sort(function (wrapperA, wrapperB) {
                var cmpDiff = compareFn(wrapperA.elem, wrapperB.elem);
                return cmpDiff === 0 ? wrapperA.idx - wrapperB.idx : cmpDiff;
            });
            return arrOfWrapper.map(function (wrapper) { return wrapper.elem; });
        };
        /**
         * Registers a `matcher` and `handler` for custom URLs handling.
         *
         * The `matcher` can be:
         *
         * - a [[UrlMatcher]]: See: [[UrlMatcherFactory.compile]]
         * - a `string`: The string is compiled to a [[UrlMatcher]]
         * - a `RegExp`: The regexp is used to match the url.
         *
         * The `handler` can be:
         *
         * - a string: The url is redirected to the value of the string.
         * - a function: The url is redirected to the return value of the function.
         *
         * ---
         *
         * When the `handler` is a `string` and the `matcher` is a `UrlMatcher` (or string), the redirect
         * string is interpolated with parameter values.
         *
         * #### Example:
         * When the URL is `/foo/123` the rule will redirect to `/bar/123`.
         * ```js
         * .when("/foo/:param1", "/bar/:param1")
         * ```
         *
         * ---
         *
         * When the `handler` is a string and the `matcher` is a `RegExp`, the redirect string is
         * interpolated with capture groups from the RegExp.
         *
         * #### Example:
         * When the URL is `/foo/123` the rule will redirect to `/bar/123`.
         * ```js
         * .when(new RegExp("^/foo/(.*)$"), "/bar/$1");
         * ```
         *
         * ---
         *
         * When the handler is a function, it receives the matched value, the current URL, and the `UIRouter` object (See [[UrlRuleHandlerFn]]).
         * The "matched value" differs based on the `matcher`.
         * For [[UrlMatcher]]s, it will be the matched state params.
         * For `RegExp`, it will be the match array from `regexp.exec()`.
         *
         * If the handler returns a string, the URL is redirected to the string.
         *
         * #### Example:
         * When the URL is `/foo/123` the rule will redirect to `/bar/123`.
         * ```js
         * .when(new RegExp("^/foo/(.*)$"), match => "/bar/" + match[1]);
         * ```
         *
         * Note: the `handler` may also invoke arbitrary code, such as `$state.go()`
         *
         * @param matcher A pattern `string` to match, compiled as a [[UrlMatcher]], or a `RegExp`.
         * @param handler The path to redirect to, or a function that returns the path.
         * @param options `{ priority: number }`
         *
         * @return the registered [[UrlRule]]
         */
        UrlRules.prototype.when = function (matcher, handler, options) {
            var rule = this.urlRuleFactory.create(matcher, handler);
            if (isDefined(options && options.priority))
                rule.priority = options.priority;
            this.rule(rule);
            return rule;
        };
        return UrlRules;
    }());

    /**
     * An API to customize the URL behavior and retrieve URL configuration
     *
     * This API is used to customize the behavior of the URL.
     * This includes optional trailing slashes ([[strictMode]]), case sensitivity ([[caseInsensitive]]),
     * and custom parameter encoding (custom [[type]]).
     *
     * It also has information about the location (url) configuration such as [[port]] and [[baseHref]].
     * This information can be used to build absolute URLs, such as
     * `https://example.com:443/basepath/state/substate?param1=a#hashvalue`;
     *
     * This API is a property of [[UrlService]] as [[UrlService.config]].
     */
    var UrlConfig = /** @class */ (function () {
        /** @hidden */ function UrlConfig(/** @hidden */ router) {
            var _this = this;
            this.router = router;
            /** @hidden */ this.paramTypes = new ParamTypes();
            /** @hidden */ this._isCaseInsensitive = false;
            /** @hidden */ this._isStrictMode = true;
            /** @hidden */ this._defaultSquashPolicy = false;
            /** @internalapi */ this.dispose = function () { return _this.paramTypes.dispose(); };
            // Delegate these calls to the current LocationConfig implementation
            /**
             * Gets the base Href, e.g., `http://localhost/approot/`
             *
             * @return the application's base href
             */
            this.baseHref = function () { return _this.router.locationConfig.baseHref(); };
            /**
             * Gets or sets the hashPrefix
             *
             * This only applies when not running in [[html5Mode]] (pushstate mode)
             *
             * If the current url is `http://localhost/app#!/uirouter/path/#anchor`, it returns `!` which is the prefix for the "hashbang" portion.
             *
             * @return the hash prefix
             */
            this.hashPrefix = function (newprefix) { return _this.router.locationConfig.hashPrefix(newprefix); };
            /**
             * Gets the host, e.g., `localhost`
             *
             * @return the protocol
             */
            this.host = function () { return _this.router.locationConfig.host(); };
            /**
             * Returns true when running in pushstate mode
             *
             * @return true when running in html5 mode (pushstate mode).
             */
            this.html5Mode = function () { return _this.router.locationConfig.html5Mode(); };
            /**
             * Gets the port, e.g., `80`
             *
             * @return the port number
             */
            this.port = function () { return _this.router.locationConfig.port(); };
            /**
             * Gets the protocol, e.g., `http`
             *
             * @return the protocol
             */
            this.protocol = function () { return _this.router.locationConfig.protocol(); };
        }
        /**
         * Defines whether URL matching should be case sensitive (the default behavior), or not.
         *
         * #### Example:
         * ```js
         * // Allow case insensitive url matches
         * urlService.config.caseInsensitive(true);
         * ```
         *
         * @param value `false` to match URL in a case sensitive manner; otherwise `true`;
         * @returns the current value of caseInsensitive
         */
        UrlConfig.prototype.caseInsensitive = function (value) {
            return (this._isCaseInsensitive = isDefined(value) ? value : this._isCaseInsensitive);
        };
        /**
         * Sets the default behavior when generating or matching URLs with default parameter values.
         *
         * #### Example:
         * ```js
         * // Remove default parameter values from the url
         * urlService.config.defaultSquashPolicy(true);
         * ```
         *
         * @param value A string that defines the default parameter URL squashing behavior.
         *    - `nosquash`: When generating an href with a default parameter value, do not squash the parameter value from the URL
         *    - `slash`: When generating an href with a default parameter value, squash (remove) the parameter value, and, if the
         *      parameter is surrounded by slashes, squash (remove) one slash from the URL
         *    - any other string, e.g. "~": When generating an href with a default parameter value, squash (remove)
         *      the parameter value from the URL and replace it with this string.
         * @returns the current value of defaultSquashPolicy
         */
        UrlConfig.prototype.defaultSquashPolicy = function (value) {
            if (isDefined(value) && value !== true && value !== false && !isString(value))
                throw new Error("Invalid squash policy: " + value + ". Valid policies: false, true, arbitrary-string");
            return (this._defaultSquashPolicy = isDefined(value) ? value : this._defaultSquashPolicy);
        };
        /**
         * Defines whether URLs should match trailing slashes, or not (the default behavior).
         *
         * #### Example:
         * ```js
         * // Allow optional trailing slashes
         * urlService.config.strictMode(false);
         * ```
         *
         * @param value `false` to match trailing slashes in URLs, otherwise `true`.
         * @returns the current value of strictMode
         */
        UrlConfig.prototype.strictMode = function (value) {
            return (this._isStrictMode = isDefined(value) ? value : this._isStrictMode);
        };
        /**
         * Creates and registers a custom [[ParamType]] object
         *
         * A custom parameter type can be used to generate URLs with typed parameters or custom encoding/decoding.
         *
         * #### Note: Register custom types *before using them* in a state definition.
         *
         * #### Example:
         * ```js
         * // Encode object parameter as JSON string
         * urlService.config.type('myjson', {
         *   encode: (obj) => JSON.stringify(obj),
         *   decode: (str) => JSON.parse(str),
         *   is: (val) => typeof(val) === 'object',
         *   pattern: /[^/]+/,
         *   equals: (a, b) => _.isEqual(a, b),
         * });
         * ```
         *
         * See [[ParamTypeDefinition]] for more examples
         *
         * @param name The type name.
         * @param definition The type definition. See [[ParamTypeDefinition]] for information on the values accepted.
         * @param definitionFn A function that is injected before the app runtime starts.
         *        The result of this function should be a [[ParamTypeDefinition]].
         *        The result is merged into the existing `definition`.
         *        See [[ParamType]] for information on the values accepted.
         *
         * @returns if only the `name` parameter was specified: the currently registered [[ParamType]] object, or undefined
         */
        UrlConfig.prototype.type = function (name, definition, definitionFn) {
            var type = this.paramTypes.type(name, definition, definitionFn);
            return !isDefined(definition) ? type : this;
        };
        return UrlConfig;
    }());

    /** API for URL management */
    var UrlService = /** @class */ (function () {
        /** @hidden */
        function UrlService(/** @hidden */ router) {
            var _this = this;
            this.router = router;
            /** @hidden */ this.interceptDeferred = false;
            /**
             * The nested [[UrlRules]] API for managing URL rules and rewrites
             *
             * See: [[UrlRules]] for details
             */
            this.rules = new UrlRules(this.router);
            /**
             * The nested [[UrlConfig]] API to configure the URL and retrieve URL information
             *
             * See: [[UrlConfig]] for details
             */
            this.config = new UrlConfig(this.router);
            // Delegate these calls to the current LocationServices implementation
            /**
             * Gets the current url, or updates the url
             *
             * ### Getting the current URL
             *
             * When no arguments are passed, returns the current URL.
             * The URL is normalized using the internal [[path]]/[[search]]/[[hash]] values.
             *
             * For example, the URL may be stored in the hash ([[HashLocationServices]]) or
             * have a base HREF prepended ([[PushStateLocationServices]]).
             *
             * The raw URL in the browser might be:
             *
             * ```
             * http://mysite.com/somepath/index.html#/internal/path/123?param1=foo#anchor
             * ```
             *
             * or
             *
             * ```
             * http://mysite.com/basepath/internal/path/123?param1=foo#anchor
             * ```
             *
             * then this method returns:
             *
             * ```
             * /internal/path/123?param1=foo#anchor
             * ```
             *
             *
             * #### Example:
             * ```js
             * locationServices.url(); // "/some/path?query=value#anchor"
             * ```
             *
             * ### Updating the URL
             *
             * When `newurl` arguments is provided, changes the URL to reflect `newurl`
             *
             * #### Example:
             * ```js
             * locationServices.url("/some/path?query=value#anchor", true);
             * ```
             *
             * @param newurl The new value for the URL.
             *               This url should reflect only the new internal [[path]], [[search]], and [[hash]] values.
             *               It should not include the protocol, site, port, or base path of an absolute HREF.
             * @param replace When true, replaces the current history entry (instead of appending it) with this new url
             * @param state The history's state object, i.e., pushState (if the LocationServices implementation supports it)
             *
             * @return the url (after potentially being processed)
             */
            this.url = function (newurl, replace, state) {
                return _this.router.locationService.url(newurl, replace, state);
            };
            /**
             * Gets the path part of the current url
             *
             * If the current URL is `/some/path?query=value#anchor`, this returns `/some/path`
             *
             * @return the path portion of the url
             */
            this.path = function () { return _this.router.locationService.path(); };
            /**
             * Gets the search part of the current url as an object
             *
             * If the current URL is `/some/path?query=value#anchor`, this returns `{ query: 'value' }`
             *
             * @return the search (query) portion of the url, as an object
             */
            this.search = function () { return _this.router.locationService.search(); };
            /**
             * Gets the hash part of the current url
             *
             * If the current URL is `/some/path?query=value#anchor`, this returns `anchor`
             *
             * @return the hash (anchor) portion of the url
             */
            this.hash = function () { return _this.router.locationService.hash(); };
            /**
             * @internalapi
             *
             * Registers a low level url change handler
             *
             * Note: Because this is a low level handler, it's not recommended for general use.
             *
             * #### Example:
             * ```js
             * let deregisterFn = locationServices.onChange((evt) => console.log("url change", evt));
             * ```
             *
             * @param callback a function that will be called when the url is changing
             * @return a function that de-registers the callback
             */
            this.onChange = function (callback) { return _this.router.locationService.onChange(callback); };
        }
        /** @hidden */
        UrlService.prototype.dispose = function () {
            this.listen(false);
            this.rules.dispose();
        };
        /**
         * Gets the current URL parts
         *
         * This method returns the different parts of the current URL (the [[path]], [[search]], and [[hash]]) as a [[UrlParts]] object.
         */
        UrlService.prototype.parts = function () {
            return { path: this.path(), search: this.search(), hash: this.hash() };
        };
        /**
         * Activates the best rule for the current URL
         *
         * Checks the current URL for a matching [[UrlRule]], then invokes that rule's handler.
         * This method is called internally any time the URL has changed.
         *
         * This effectively activates the state (or redirect, etc) which matches the current URL.
         *
         * #### Example:
         * ```js
         * urlService.deferIntercept();
         *
         * fetch('/states.json').then(resp => resp.json()).then(data => {
         *   data.forEach(state => $stateRegistry.register(state));
         *   urlService.listen();
         *   // Find the matching URL and invoke the handler.
         *   urlService.sync();
         * });
         * ```
         */
        UrlService.prototype.sync = function (evt) {
            if (evt && evt.defaultPrevented)
                return;
            var _a = this.router, urlService = _a.urlService, stateService = _a.stateService;
            var url = { path: urlService.path(), search: urlService.search(), hash: urlService.hash() };
            var best = this.match(url);
            var applyResult = pattern([
                [isString, function (newurl) { return urlService.url(newurl, true); }],
                [TargetState.isDef, function (def) { return stateService.go(def.state, def.params, def.options); }],
                [is(TargetState), function (target) { return stateService.go(target.state(), target.params(), target.options()); }],
            ]);
            applyResult(best && best.rule.handler(best.match, url, this.router));
        };
        /**
         * Starts or stops listening for URL changes
         *
         * Call this sometime after calling [[deferIntercept]] to start monitoring the url.
         * This causes UI-Router to start listening for changes to the URL, if it wasn't already listening.
         *
         * If called with `false`, UI-Router will stop listening (call listen(true) to start listening again).
         *
         * #### Example:
         * ```js
         * urlService.deferIntercept();
         *
         * fetch('/states.json').then(resp => resp.json()).then(data => {
         *   data.forEach(state => $stateRegistry.register(state));
         *   // Start responding to URL changes
         *   urlService.listen();
         *   urlService.sync();
         * });
         * ```
         *
         * @param enabled `true` or `false` to start or stop listening to URL changes
         */
        UrlService.prototype.listen = function (enabled) {
            var _this = this;
            if (enabled === false) {
                this._stopListeningFn && this._stopListeningFn();
                delete this._stopListeningFn;
            }
            else {
                return (this._stopListeningFn = this._stopListeningFn || this.router.urlService.onChange(function (evt) { return _this.sync(evt); }));
            }
        };
        /**
         * Disables monitoring of the URL.
         *
         * Call this method before UI-Router has bootstrapped.
         * It will stop UI-Router from performing the initial url sync.
         *
         * This can be useful to perform some asynchronous initialization before the router starts.
         * Once the initialization is complete, call [[listen]] to tell UI-Router to start watching and synchronizing the URL.
         *
         * #### Example:
         * ```js
         * // Prevent UI-Router from automatically intercepting URL changes when it starts;
         * urlService.deferIntercept();
         *
         * fetch('/states.json').then(resp => resp.json()).then(data => {
         *   data.forEach(state => $stateRegistry.register(state));
         *   urlService.listen();
         *   urlService.sync();
         * });
         * ```
         *
         * @param defer Indicates whether to defer location change interception.
         *        Passing no parameter is equivalent to `true`.
         */
        UrlService.prototype.deferIntercept = function (defer) {
            if (defer === undefined)
                defer = true;
            this.interceptDeferred = defer;
        };
        /**
         * Matches a URL
         *
         * Given a URL (as a [[UrlParts]] object), check all rules and determine the best matching rule.
         * Return the result as a [[MatchResult]].
         */
        UrlService.prototype.match = function (url) {
            var _this = this;
            url = extend({ path: '', search: {}, hash: '' }, url);
            var rules = this.rules.rules();
            // Checks a single rule. Returns { rule: rule, match: match, weight: weight } if it matched, or undefined
            var checkRule = function (rule) {
                var match = rule.match(url, _this.router);
                return match && { match: match, rule: rule, weight: rule.matchPriority(match) };
            };
            // The rules are pre-sorted.
            // - Find the first matching rule.
            // - Find any other matching rule that sorted *exactly the same*, according to `.sort()`.
            // - Choose the rule with the highest match weight.
            var best;
            for (var i = 0; i < rules.length; i++) {
                // Stop when there is a 'best' rule and the next rule sorts differently than it.
                if (best && best.rule._group !== rules[i]._group)
                    break;
                var current = checkRule(rules[i]);
                // Pick the best MatchResult
                best = !best || (current && current.weight > best.weight) ? current : best;
            }
            return best;
        };
        return UrlService;
    }());

    /** @publicapi @module core */ /** */
    /** @hidden */
    var _routerInstance = 0;
    /** @hidden */
    var locSvcFns = ['url', 'path', 'search', 'hash', 'onChange'];
    /** @hidden */
    var locCfgFns = ['port', 'protocol', 'host', 'baseHref', 'html5Mode', 'hashPrefix'];
    /** @hidden */
    var locationServiceStub = makeStub('LocationServices', locSvcFns);
    /** @hidden */
    var locationConfigStub = makeStub('LocationConfig', locCfgFns);
    /**
     * The master class used to instantiate an instance of UI-Router.
     *
     * UI-Router (for each specific framework) will create an instance of this class during bootstrap.
     * This class instantiates and wires the UI-Router services together.
     *
     * After a new instance of the UIRouter class is created, it should be configured for your app.
     * For instance, app states should be registered with the [[UIRouter.stateRegistry]].
     *
     * ---
     *
     * Normally the framework code will bootstrap UI-Router.
     * If you are bootstrapping UIRouter manually, tell it to monitor the URL by calling
     * [[UrlService.listen]] then [[UrlService.sync]].
     */
    var UIRouter = /** @class */ (function () {
        /**
         * Creates a new `UIRouter` object
         *
         * @param locationService a [[LocationServices]] implementation
         * @param locationConfig a [[LocationConfig]] implementation
         * @internalapi
         */
        function UIRouter(locationService, locationConfig) {
            if (locationService === void 0) { locationService = locationServiceStub; }
            if (locationConfig === void 0) { locationConfig = locationConfigStub; }
            this.locationService = locationService;
            this.locationConfig = locationConfig;
            /** @hidden */ this.$id = _routerInstance++;
            /** @hidden */ this._disposed = false;
            /** @hidden */ this._disposables = [];
            /** Provides trace information to the console */
            this.trace = trace;
            /** Provides services related to ui-view synchronization */
            this.viewService = new ViewService(this);
            /** Global router state */
            this.globals = new UIRouterGlobals();
            /** Provides services related to Transitions */
            this.transitionService = new TransitionService(this);
            /**
             * Deprecated for public use. Use [[urlService]] instead.
             * @deprecated Use [[urlService]] instead
             */
            this.urlMatcherFactory = new UrlMatcherFactory(this);
            /**
             * Deprecated for public use. Use [[urlService]] instead.
             * @deprecated Use [[urlService]] instead
             */
            this.urlRouter = new UrlRouter(this);
            /** Provides services related to the URL */
            this.urlService = new UrlService(this);
            /** Provides a registry for states, and related registration services */
            this.stateRegistry = new StateRegistry(this);
            /** Provides services related to states */
            this.stateService = new StateService(this);
            /** @hidden plugin instances are registered here */
            this._plugins = {};
            this.viewService._pluginapi._rootViewContext(this.stateRegistry.root());
            this.globals.$current = this.stateRegistry.root();
            this.globals.current = this.globals.$current.self;
            this.disposable(this.globals);
            this.disposable(this.stateService);
            this.disposable(this.stateRegistry);
            this.disposable(this.transitionService);
            this.disposable(this.urlService);
            this.disposable(locationService);
            this.disposable(locationConfig);
        }
        /** Registers an object to be notified when the router is disposed */
        UIRouter.prototype.disposable = function (disposable) {
            this._disposables.push(disposable);
        };
        /**
         * Disposes this router instance
         *
         * When called, clears resources retained by the router by calling `dispose(this)` on all
         * registered [[disposable]] objects.
         *
         * Or, if a `disposable` object is provided, calls `dispose(this)` on that object only.
         *
         * @param disposable (optional) the disposable to dispose
         */
        UIRouter.prototype.dispose = function (disposable) {
            var _this = this;
            if (disposable && isFunction(disposable.dispose)) {
                disposable.dispose(this);
                return undefined;
            }
            this._disposed = true;
            this._disposables.slice().forEach(function (d) {
                try {
                    typeof d.dispose === 'function' && d.dispose(_this);
                    removeFrom(_this._disposables, d);
                }
                catch (ignored) { }
            });
        };
        /**
         * Adds a plugin to UI-Router
         *
         * This method adds a UI-Router Plugin.
         * A plugin can enhance or change UI-Router behavior using any public API.
         *
         * #### Example:
         * ```js
         * import { MyCoolPlugin } from "ui-router-cool-plugin";
         *
         * var plugin = router.addPlugin(MyCoolPlugin);
         * ```
         *
         * ### Plugin authoring
         *
         * A plugin is simply a class (or constructor function) which accepts a [[UIRouter]] instance and (optionally) an options object.
         *
         * The plugin can implement its functionality using any of the public APIs of [[UIRouter]].
         * For example, it may configure router options or add a Transition Hook.
         *
         * The plugin can then be published as a separate module.
         *
         * #### Example:
         * ```js
         * export class MyAuthPlugin implements UIRouterPlugin {
         *   constructor(router: UIRouter, options: any) {
         *     this.name = "MyAuthPlugin";
         *     let $transitions = router.transitionService;
         *     let $state = router.stateService;
         *
         *     let authCriteria = {
         *       to: (state) => state.data && state.data.requiresAuth
         *     };
         *
         *     function authHook(transition: Transition) {
         *       let authService = transition.injector().get('AuthService');
         *       if (!authService.isAuthenticated()) {
         *         return $state.target('login');
         *       }
         *     }
         *
         *     $transitions.onStart(authCriteria, authHook);
         *   }
         * }
         * ```
         *
         * @param plugin one of:
         *        - a plugin class which implements [[UIRouterPlugin]]
         *        - a constructor function for a [[UIRouterPlugin]] which accepts a [[UIRouter]] instance
         *        - a factory function which accepts a [[UIRouter]] instance and returns a [[UIRouterPlugin]] instance
         * @param options options to pass to the plugin class/factory
         * @returns the registered plugin instance
         */
        UIRouter.prototype.plugin = function (plugin, options) {
            if (options === void 0) { options = {}; }
            var pluginInstance = new plugin(this, options);
            if (!pluginInstance.name)
                throw new Error('Required property `name` missing on plugin: ' + pluginInstance);
            this._disposables.push(pluginInstance);
            return (this._plugins[pluginInstance.name] = pluginInstance);
        };
        UIRouter.prototype.getPlugin = function (pluginName) {
            return pluginName ? this._plugins[pluginName] : values(this._plugins);
        };
        return UIRouter;
    }());

    /** @internalapi @module hooks */ /** */
    function addCoreResolvables(trans) {
        trans.addResolvable(Resolvable.fromData(UIRouter, trans.router), '');
        trans.addResolvable(Resolvable.fromData(Transition, trans), '');
        trans.addResolvable(Resolvable.fromData('$transition$', trans), '');
        trans.addResolvable(Resolvable.fromData('$stateParams', trans.params()), '');
        trans.entering().forEach(function (state) {
            trans.addResolvable(Resolvable.fromData('$state$', state), state);
        });
    }
    var registerAddCoreResolvables = function (transitionService) {
        return transitionService.onCreate({}, addCoreResolvables);
    };
    var TRANSITION_TOKENS = ['$transition$', Transition];
    var isTransition = inArray(TRANSITION_TOKENS);
    // References to Transition in the treeChanges pathnodes makes all
    // previous Transitions reachable in memory, causing a memory leak
    // This function removes resolves for '$transition$' and `Transition` from the treeChanges.
    // Do not use this on current transitions, only on old ones.
    var treeChangesCleanup = function (trans) {
        var nodes = values(trans.treeChanges())
            .reduce(unnestR, [])
            .reduce(uniqR, []);
        // If the resolvable is a Transition, return a new resolvable with null data
        var replaceTransitionWithNull = function (r) {
            return isTransition(r.token) ? Resolvable.fromData(r.token, null) : r;
        };
        nodes.forEach(function (node) {
            node.resolvables = node.resolvables.map(replaceTransitionWithNull);
        });
    };

    /** @internalapi @module hooks */ /** */
    /**
     * A [[TransitionHookFn]] that redirects to a different state or params
     *
     * Registered using `transitionService.onStart({ to: (state) => !!state.redirectTo }, redirectHook);`
     *
     * See [[StateDeclaration.redirectTo]]
     */
    var redirectToHook = function (trans) {
        var redirect = trans.to().redirectTo;
        if (!redirect)
            return;
        var $state = trans.router.stateService;
        function handleResult(result) {
            if (!result)
                return;
            if (result instanceof TargetState)
                return result;
            if (isString(result))
                return $state.target(result, trans.params(), trans.options());
            if (result['state'] || result['params'])
                return $state.target(result['state'] || trans.to(), result['params'] || trans.params(), trans.options());
        }
        if (isFunction(redirect)) {
            return services.$q.when(redirect(trans)).then(handleResult);
        }
        return handleResult(redirect);
    };
    var registerRedirectToHook = function (transitionService) {
        return transitionService.onStart({ to: function (state) { return !!state.redirectTo; } }, redirectToHook);
    };

    /**
     * A factory which creates an onEnter, onExit or onRetain transition hook function
     *
     * The returned function invokes the (for instance) state.onEnter hook when the
     * state is being entered.
     *
     * @hidden
     */
    function makeEnterExitRetainHook(hookName) {
        return function (transition, state) {
            var _state = state.$$state();
            var hookFn = _state[hookName];
            return hookFn(transition, state);
        };
    }
    /**
     * The [[TransitionStateHookFn]] for onExit
     *
     * When the state is being exited, the state's .onExit function is invoked.
     *
     * Registered using `transitionService.onExit({ exiting: (state) => !!state.onExit }, onExitHook);`
     *
     * See: [[IHookRegistry.onExit]]
     */
    var onExitHook = makeEnterExitRetainHook('onExit');
    var registerOnExitHook = function (transitionService) {
        return transitionService.onExit({ exiting: function (state) { return !!state.onExit; } }, onExitHook);
    };
    /**
     * The [[TransitionStateHookFn]] for onRetain
     *
     * When the state was already entered, and is not being exited or re-entered, the state's .onRetain function is invoked.
     *
     * Registered using `transitionService.onRetain({ retained: (state) => !!state.onRetain }, onRetainHook);`
     *
     * See: [[IHookRegistry.onRetain]]
     */
    var onRetainHook = makeEnterExitRetainHook('onRetain');
    var registerOnRetainHook = function (transitionService) {
        return transitionService.onRetain({ retained: function (state) { return !!state.onRetain; } }, onRetainHook);
    };
    /**
     * The [[TransitionStateHookFn]] for onEnter
     *
     * When the state is being entered, the state's .onEnter function is invoked.
     *
     * Registered using `transitionService.onEnter({ entering: (state) => !!state.onEnter }, onEnterHook);`
     *
     * See: [[IHookRegistry.onEnter]]
     */
    var onEnterHook = makeEnterExitRetainHook('onEnter');
    var registerOnEnterHook = function (transitionService) {
        return transitionService.onEnter({ entering: function (state) { return !!state.onEnter; } }, onEnterHook);
    };

    /** @internalapi @module hooks */ /** */
    var RESOLVE_HOOK_PRIORITY = 1000;
    /**
     * A [[TransitionHookFn]] which resolves all EAGER Resolvables in the To Path
     *
     * Registered using `transitionService.onStart({}, eagerResolvePath, { priority: 1000 });`
     *
     * When a Transition starts, this hook resolves all the EAGER Resolvables, which the transition then waits for.
     *
     * See [[StateDeclaration.resolve]]
     */
    var eagerResolvePath = function (trans) {
        return new ResolveContext(trans.treeChanges().to).resolvePath('EAGER', trans).then(noop);
    };
    var registerEagerResolvePath = function (transitionService) {
        return transitionService.onStart({}, eagerResolvePath, { priority: RESOLVE_HOOK_PRIORITY });
    };
    /**
     * A [[TransitionHookFn]] which resolves all LAZY Resolvables for the state (and all its ancestors) in the To Path
     *
     * Registered using `transitionService.onEnter({ entering: () => true }, lazyResolveState, { priority: 1000 });`
     *
     * When a State is being entered, this hook resolves all the Resolvables for this state, which the transition then waits for.
     *
     * See [[StateDeclaration.resolve]]
     */
    var lazyResolveState = function (trans, state) {
        return new ResolveContext(trans.treeChanges().to)
            .subContext(state.$$state())
            .resolvePath('LAZY', trans)
            .then(noop);
    };
    var registerLazyResolveState = function (transitionService) {
        return transitionService.onEnter({ entering: val(true) }, lazyResolveState, { priority: RESOLVE_HOOK_PRIORITY });
    };
    /**
     * A [[TransitionHookFn]] which resolves any dynamically added (LAZY or EAGER) Resolvables.
     *
     * Registered using `transitionService.onFinish({}, eagerResolvePath, { priority: 1000 });`
     *
     * After all entering states have been entered, this hook resolves any remaining Resolvables.
     * These are typically dynamic resolves which were added by some Transition Hook using [[Transition.addResolvable]].
     *
     * See [[StateDeclaration.resolve]]
     */
    var resolveRemaining = function (trans) {
        return new ResolveContext(trans.treeChanges().to).resolvePath('LAZY', trans).then(noop);
    };
    var registerResolveRemaining = function (transitionService) {
        return transitionService.onFinish({}, resolveRemaining, { priority: RESOLVE_HOOK_PRIORITY });
    };

    /** @internalapi @module hooks */ /** */
    /**
     * A [[TransitionHookFn]] which waits for the views to load
     *
     * Registered using `transitionService.onStart({}, loadEnteringViews);`
     *
     * Allows the views to do async work in [[ViewConfig.load]] before the transition continues.
     * In angular 1, this includes loading the templates.
     */
    var loadEnteringViews = function (transition) {
        var $q = services.$q;
        var enteringViews = transition.views('entering');
        if (!enteringViews.length)
            return;
        return $q.all(enteringViews.map(function (view) { return $q.when(view.load()); })).then(noop);
    };
    var registerLoadEnteringViews = function (transitionService) {
        return transitionService.onFinish({}, loadEnteringViews);
    };
    /**
     * A [[TransitionHookFn]] which activates the new views when a transition is successful.
     *
     * Registered using `transitionService.onSuccess({}, activateViews);`
     *
     * After a transition is complete, this hook deactivates the old views from the previous state,
     * and activates the new views from the destination state.
     *
     * See [[ViewService]]
     */
    var activateViews = function (transition) {
        var enteringViews = transition.views('entering');
        var exitingViews = transition.views('exiting');
        if (!enteringViews.length && !exitingViews.length)
            return;
        var $view = transition.router.viewService;
        exitingViews.forEach(function (vc) { return $view.deactivateViewConfig(vc); });
        enteringViews.forEach(function (vc) { return $view.activateViewConfig(vc); });
        $view.sync();
    };
    var registerActivateViews = function (transitionService) {
        return transitionService.onSuccess({}, activateViews);
    };

    /**
     * A [[TransitionHookFn]] which updates global UI-Router state
     *
     * Registered using `transitionService.onBefore({}, updateGlobalState);`
     *
     * Before a [[Transition]] starts, updates the global value of "the current transition" ([[Globals.transition]]).
     * After a successful [[Transition]], updates the global values of "the current state"
     * ([[Globals.current]] and [[Globals.$current]]) and "the current param values" ([[Globals.params]]).
     *
     * See also the deprecated properties:
     * [[StateService.transition]], [[StateService.current]], [[StateService.params]]
     */
    var updateGlobalState = function (trans) {
        var globals = trans.router.globals;
        var transitionSuccessful = function () {
            globals.successfulTransitions.enqueue(trans);
            globals.$current = trans.$to();
            globals.current = globals.$current.self;
            copy(trans.params(), globals.params);
        };
        var clearCurrentTransition = function () {
            // Do not clear globals.transition if a different transition has started in the meantime
            if (globals.transition === trans)
                globals.transition = null;
        };
        trans.onSuccess({}, transitionSuccessful, { priority: 10000 });
        trans.promise.then(clearCurrentTransition, clearCurrentTransition);
    };
    var registerUpdateGlobalState = function (transitionService) {
        return transitionService.onCreate({}, updateGlobalState);
    };

    /**
     * A [[TransitionHookFn]] which updates the URL after a successful transition
     *
     * Registered using `transitionService.onSuccess({}, updateUrl);`
     */
    var updateUrl = function (transition) {
        var options = transition.options();
        var $state = transition.router.stateService;
        var $urlRouter = transition.router.urlRouter;
        // Dont update the url in these situations:
        // The transition was triggered by a URL sync (options.source === 'url')
        // The user doesn't want the url to update (options.location === false)
        // The destination state, and all parents have no navigable url
        if (options.source !== 'url' && options.location && $state.$current.navigable) {
            var urlOptions = { replace: options.location === 'replace' };
            $urlRouter.push($state.$current.navigable.url, $state.params, urlOptions);
        }
        $urlRouter.update(true);
    };
    var registerUpdateUrl = function (transitionService) {
        return transitionService.onSuccess({}, updateUrl, { priority: 9999 });
    };

    /**
     * A [[TransitionHookFn]] that performs lazy loading
     *
     * When entering a state "abc" which has a `lazyLoad` function defined:
     * - Invoke the `lazyLoad` function (unless it is already in process)
     *   - Flag the hook function as "in process"
     *   - The function should return a promise (that resolves when lazy loading is complete)
     * - Wait for the promise to settle
     *   - If the promise resolves to a [[LazyLoadResult]], then register those states
     *   - Flag the hook function as "not in process"
     * - If the hook was successful
     *   - Remove the `lazyLoad` function from the state declaration
     * - If all the hooks were successful
     *   - Retry the transition (by returning a TargetState)
     *
     * ```
     * .state('abc', {
     *   component: 'fooComponent',
     *   lazyLoad: () => import('./fooComponent')
     *   });
     * ```
     *
     * See [[StateDeclaration.lazyLoad]]
     */
    var lazyLoadHook = function (transition) {
        var router = transition.router;
        function retryTransition() {
            if (transition.originalTransition().options().source !== 'url') {
                // The original transition was not triggered via url sync
                // The lazy state should be loaded now, so re-try the original transition
                var orig = transition.targetState();
                return router.stateService.target(orig.identifier(), orig.params(), orig.options());
            }
            // The original transition was triggered via url sync
            // Run the URL rules and find the best match
            var $url = router.urlService;
            var result = $url.match($url.parts());
            var rule = result && result.rule;
            // If the best match is a state, redirect the transition (instead
            // of calling sync() which supersedes the current transition)
            if (rule && rule.type === 'STATE') {
                var state = rule.state;
                var params = result.match;
                return router.stateService.target(state, params, transition.options());
            }
            // No matching state found, so let .sync() choose the best non-state match/otherwise
            router.urlService.sync();
        }
        var promises = transition
            .entering()
            .filter(function (state) { return !!state.$$state().lazyLoad; })
            .map(function (state) { return lazyLoadState(transition, state); });
        return services.$q.all(promises).then(retryTransition);
    };
    var registerLazyLoadHook = function (transitionService) {
        return transitionService.onBefore({ entering: function (state) { return !!state.lazyLoad; } }, lazyLoadHook);
    };
    /**
     * Invokes a state's lazy load function
     *
     * @param transition a Transition context
     * @param state the state to lazy load
     * @returns A promise for the lazy load result
     */
    function lazyLoadState(transition, state) {
        var lazyLoadFn = state.$$state().lazyLoad;
        // Store/get the lazy load promise on/from the hookfn so it doesn't get re-invoked
        var promise = lazyLoadFn['_promise'];
        if (!promise) {
            var success = function (result) {
                delete state.lazyLoad;
                delete state.$$state().lazyLoad;
                delete lazyLoadFn['_promise'];
                return result;
            };
            var error = function (err) {
                delete lazyLoadFn['_promise'];
                return services.$q.reject(err);
            };
            promise = lazyLoadFn['_promise'] = services.$q
                .when(lazyLoadFn(transition, state))
                .then(updateStateRegistry)
                .then(success, error);
        }
        /** Register any lazy loaded state definitions */
        function updateStateRegistry(result) {
            if (result && Array.isArray(result.states)) {
                result.states.forEach(function (_state) { return transition.router.stateRegistry.register(_state); });
            }
            return result;
        }
        return promise;
    }

    /**
     * This class defines a type of hook, such as `onBefore` or `onEnter`.
     * Plugins can define custom hook types, such as sticky states does for `onInactive`.
     *
     * @interalapi
     */
    var TransitionEventType = /** @class */ (function () {
        /* tslint:disable:no-inferrable-types */
        function TransitionEventType(name, hookPhase, hookOrder, criteriaMatchPath, reverseSort, getResultHandler, getErrorHandler, synchronous) {
            if (reverseSort === void 0) { reverseSort = false; }
            if (getResultHandler === void 0) { getResultHandler = TransitionHook.HANDLE_RESULT; }
            if (getErrorHandler === void 0) { getErrorHandler = TransitionHook.REJECT_ERROR; }
            if (synchronous === void 0) { synchronous = false; }
            this.name = name;
            this.hookPhase = hookPhase;
            this.hookOrder = hookOrder;
            this.criteriaMatchPath = criteriaMatchPath;
            this.reverseSort = reverseSort;
            this.getResultHandler = getResultHandler;
            this.getErrorHandler = getErrorHandler;
            this.synchronous = synchronous;
        }
        return TransitionEventType;
    }());

    /** @internalapi @module hooks */ /** */
    /**
     * A [[TransitionHookFn]] that skips a transition if it should be ignored
     *
     * This hook is invoked at the end of the onBefore phase.
     *
     * If the transition should be ignored (because no parameter or states changed)
     * then the transition is ignored and not processed.
     */
    function ignoredHook(trans) {
        var ignoredReason = trans._ignoredReason();
        if (!ignoredReason)
            return;
        trace.traceTransitionIgnored(trans);
        var pending = trans.router.globals.transition;
        // The user clicked a link going back to the *current state* ('A')
        // However, there is also a pending transition in flight (to 'B')
        // Abort the transition to 'B' because the user now wants to be back at 'A'.
        if (ignoredReason === 'SameAsCurrent' && pending) {
            pending.abort();
        }
        return Rejection.ignored().toPromise();
    }
    var registerIgnoredTransitionHook = function (transitionService) {
        return transitionService.onBefore({}, ignoredHook, { priority: -9999 });
    };

    /** @internalapi @module hooks */ /** */
    /**
     * A [[TransitionHookFn]] that rejects the Transition if it is invalid
     *
     * This hook is invoked at the end of the onBefore phase.
     * If the transition is invalid (for example, param values do not validate)
     * then the transition is rejected.
     */
    function invalidTransitionHook(trans) {
        if (!trans.valid()) {
            throw new Error(trans.error().toString());
        }
    }
    var registerInvalidTransitionHook = function (transitionService) {
        return transitionService.onBefore({}, invalidTransitionHook, { priority: -10000 });
    };

    /** @publicapi @module transition */ /** */
    /**
     * The default [[Transition]] options.
     *
     * Include this object when applying custom defaults:
     * let reloadOpts = { reload: true, notify: true }
     * let options = defaults(theirOpts, customDefaults, defaultOptions);
     */
    var defaultTransOpts = {
        location: true,
        relative: null,
        inherit: false,
        notify: true,
        reload: false,
        supercede: true,
        custom: {},
        current: function () { return null; },
        source: 'unknown',
    };
    /**
     * This class provides services related to Transitions.
     *
     * - Most importantly, it allows global Transition Hooks to be registered.
     * - It allows the default transition error handler to be set.
     * - It also has a factory function for creating new [[Transition]] objects, (used internally by the [[StateService]]).
     *
     * At bootstrap, [[UIRouter]] creates a single instance (singleton) of this class.
     */
    var TransitionService = /** @class */ (function () {
        /** @hidden */
        function TransitionService(_router) {
            /** @hidden */
            this._transitionCount = 0;
            /** @hidden The transition hook types, such as `onEnter`, `onStart`, etc */
            this._eventTypes = [];
            /** @hidden The registered transition hooks */
            this._registeredHooks = {};
            /** @hidden The  paths on a criteria object */
            this._criteriaPaths = {};
            this._router = _router;
            this.$view = _router.viewService;
            this._deregisterHookFns = {};
            this._pluginapi = (createProxyFunctions(val(this), {}, val(this), [
                '_definePathType',
                '_defineEvent',
                '_getPathTypes',
                '_getEvents',
                'getHooks',
            ]));
            this._defineCorePaths();
            this._defineCoreEvents();
            this._registerCoreTransitionHooks();
            _router.globals.successfulTransitions.onEvict(treeChangesCleanup);
        }
        /**
         * Registers a [[TransitionHookFn]], called *while a transition is being constructed*.
         *
         * Registers a transition lifecycle hook, which is invoked during transition construction.
         *
         * This low level hook should only be used by plugins.
         * This can be a useful time for plugins to add resolves or mutate the transition as needed.
         * The Sticky States plugin uses this hook to modify the treechanges.
         *
         * ### Lifecycle
         *
         * `onCreate` hooks are invoked *while a transition is being constructed*.
         *
         * ### Return value
         *
         * The hook's return value is ignored
         *
         * @internalapi
         * @param criteria defines which Transitions the Hook should be invoked for.
         * @param callback the hook function which will be invoked.
         * @param options the registration options
         * @returns a function which deregisters the hook.
         */
        TransitionService.prototype.onCreate = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        TransitionService.prototype.onBefore = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        TransitionService.prototype.onStart = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        TransitionService.prototype.onExit = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        TransitionService.prototype.onRetain = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        TransitionService.prototype.onEnter = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        TransitionService.prototype.onFinish = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        TransitionService.prototype.onSuccess = function (criteria, callback, options) {
            return;
        };
        /** @inheritdoc */
        TransitionService.prototype.onError = function (criteria, callback, options) {
            return;
        };
        /**
         * dispose
         * @internalapi
         */
        TransitionService.prototype.dispose = function (router) {
            values(this._registeredHooks).forEach(function (hooksArray) {
                return hooksArray.forEach(function (hook) {
                    hook._deregistered = true;
                    removeFrom(hooksArray, hook);
                });
            });
        };
        /**
         * Creates a new [[Transition]] object
         *
         * This is a factory function for creating new Transition objects.
         * It is used internally by the [[StateService]] and should generally not be called by application code.
         *
         * @param fromPath the path to the current state (the from state)
         * @param targetState the target state (destination)
         * @returns a Transition
         */
        TransitionService.prototype.create = function (fromPath, targetState) {
            return new Transition(fromPath, targetState, this._router);
        };
        /** @hidden */
        TransitionService.prototype._defineCoreEvents = function () {
            var Phase = exports.TransitionHookPhase;
            var TH = TransitionHook;
            var paths = this._criteriaPaths;
            var NORMAL_SORT = false, REVERSE_SORT = true;
            var SYNCHRONOUS = true;
            this._defineEvent('onCreate', Phase.CREATE, 0, paths.to, NORMAL_SORT, TH.LOG_REJECTED_RESULT, TH.THROW_ERROR, SYNCHRONOUS);
            this._defineEvent('onBefore', Phase.BEFORE, 0, paths.to);
            this._defineEvent('onStart', Phase.RUN, 0, paths.to);
            this._defineEvent('onExit', Phase.RUN, 100, paths.exiting, REVERSE_SORT);
            this._defineEvent('onRetain', Phase.RUN, 200, paths.retained);
            this._defineEvent('onEnter', Phase.RUN, 300, paths.entering);
            this._defineEvent('onFinish', Phase.RUN, 400, paths.to);
            this._defineEvent('onSuccess', Phase.SUCCESS, 0, paths.to, NORMAL_SORT, TH.LOG_REJECTED_RESULT, TH.LOG_ERROR, SYNCHRONOUS);
            this._defineEvent('onError', Phase.ERROR, 0, paths.to, NORMAL_SORT, TH.LOG_REJECTED_RESULT, TH.LOG_ERROR, SYNCHRONOUS);
        };
        /** @hidden */
        TransitionService.prototype._defineCorePaths = function () {
            var STATE = exports.TransitionHookScope.STATE, TRANSITION = exports.TransitionHookScope.TRANSITION;
            this._definePathType('to', TRANSITION);
            this._definePathType('from', TRANSITION);
            this._definePathType('exiting', STATE);
            this._definePathType('retained', STATE);
            this._definePathType('entering', STATE);
        };
        /** @hidden */
        TransitionService.prototype._defineEvent = function (name, hookPhase, hookOrder, criteriaMatchPath, reverseSort, getResultHandler, getErrorHandler, synchronous) {
            if (reverseSort === void 0) { reverseSort = false; }
            if (getResultHandler === void 0) { getResultHandler = TransitionHook.HANDLE_RESULT; }
            if (getErrorHandler === void 0) { getErrorHandler = TransitionHook.REJECT_ERROR; }
            if (synchronous === void 0) { synchronous = false; }
            var eventType = new TransitionEventType(name, hookPhase, hookOrder, criteriaMatchPath, reverseSort, getResultHandler, getErrorHandler, synchronous);
            this._eventTypes.push(eventType);
            makeEvent(this, this, eventType);
        };
        /** @hidden */
        // tslint:disable-next-line
        TransitionService.prototype._getEvents = function (phase) {
            var transitionHookTypes = isDefined(phase)
                ? this._eventTypes.filter(function (type) { return type.hookPhase === phase; })
                : this._eventTypes.slice();
            return transitionHookTypes.sort(function (l, r) {
                var cmpByPhase = l.hookPhase - r.hookPhase;
                return cmpByPhase === 0 ? l.hookOrder - r.hookOrder : cmpByPhase;
            });
        };
        /**
         * Adds a Path to be used as a criterion against a TreeChanges path
         *
         * For example: the `exiting` path in [[HookMatchCriteria]] is a STATE scoped path.
         * It was defined by calling `defineTreeChangesCriterion('exiting', TransitionHookScope.STATE)`
         * Each state in the exiting path is checked against the criteria and returned as part of the match.
         *
         * Another example: the `to` path in [[HookMatchCriteria]] is a TRANSITION scoped path.
         * It was defined by calling `defineTreeChangesCriterion('to', TransitionHookScope.TRANSITION)`
         * Only the tail of the `to` path is checked against the criteria and returned as part of the match.
         *
         * @hidden
         */
        TransitionService.prototype._definePathType = function (name, hookScope) {
            this._criteriaPaths[name] = { name: name, scope: hookScope };
        };
        /** * @hidden */
        // tslint:disable-next-line
        TransitionService.prototype._getPathTypes = function () {
            return this._criteriaPaths;
        };
        /** @hidden */
        TransitionService.prototype.getHooks = function (hookName) {
            return this._registeredHooks[hookName];
        };
        /** @hidden */
        TransitionService.prototype._registerCoreTransitionHooks = function () {
            var fns = this._deregisterHookFns;
            fns.addCoreResolves = registerAddCoreResolvables(this);
            fns.ignored = registerIgnoredTransitionHook(this);
            fns.invalid = registerInvalidTransitionHook(this);
            // Wire up redirectTo hook
            fns.redirectTo = registerRedirectToHook(this);
            // Wire up onExit/Retain/Enter state hooks
            fns.onExit = registerOnExitHook(this);
            fns.onRetain = registerOnRetainHook(this);
            fns.onEnter = registerOnEnterHook(this);
            // Wire up Resolve hooks
            fns.eagerResolve = registerEagerResolvePath(this);
            fns.lazyResolve = registerLazyResolveState(this);
            fns.resolveAll = registerResolveRemaining(this);
            // Wire up the View management hooks
            fns.loadViews = registerLoadEnteringViews(this);
            fns.activateViews = registerActivateViews(this);
            // Updates global state after a transition
            fns.updateGlobals = registerUpdateGlobalState(this);
            // After globals.current is updated at priority: 10000
            fns.updateUrl = registerUpdateUrl(this);
            // Lazy load state trees
            fns.lazyLoad = registerLazyLoadHook(this);
        };
        return TransitionService;
    }());

    /** @publicapi @module state */ /** */
    /**
     * Provides state related service functions
     *
     * This class provides services related to ui-router states.
     * An instance of this class is located on the global [[UIRouter]] object.
     */
    var StateService = /** @class */ (function () {
        /** @internalapi */
        function StateService(/** @hidden */ router) {
            this.router = router;
            /** @internalapi */
            this.invalidCallbacks = [];
            /** @hidden */
            this._defaultErrorHandler = function $defaultErrorHandler($error$) {
                if ($error$ instanceof Error && $error$.stack) {
                    console.error($error$);
                    console.error($error$.stack);
                }
                else if ($error$ instanceof Rejection) {
                    console.error($error$.toString());
                    if ($error$.detail && $error$.detail.stack)
                        console.error($error$.detail.stack);
                }
                else {
                    console.error($error$);
                }
            };
            var getters = ['current', '$current', 'params', 'transition'];
            var boundFns = Object.keys(StateService.prototype).filter(not(inArray(getters)));
            createProxyFunctions(val(StateService.prototype), this, val(this), boundFns);
        }
        Object.defineProperty(StateService.prototype, "transition", {
            /**
             * The [[Transition]] currently in progress (or null)
             *
             * This is a passthrough through to [[UIRouterGlobals.transition]]
             */
            get: function () {
                return this.router.globals.transition;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(StateService.prototype, "params", {
            /**
             * The latest successful state parameters
             *
             * This is a passthrough through to [[UIRouterGlobals.params]]
             */
            get: function () {
                return this.router.globals.params;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(StateService.prototype, "current", {
            /**
             * The current [[StateDeclaration]]
             *
             * This is a passthrough through to [[UIRouterGlobals.current]]
             */
            get: function () {
                return this.router.globals.current;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(StateService.prototype, "$current", {
            /**
             * The current [[StateObject]]
             *
             * This is a passthrough through to [[UIRouterGlobals.$current]]
             */
            get: function () {
                return this.router.globals.$current;
            },
            enumerable: true,
            configurable: true
        });
        /** @internalapi */
        StateService.prototype.dispose = function () {
            this.defaultErrorHandler(noop);
            this.invalidCallbacks = [];
        };
        /**
         * Handler for when [[transitionTo]] is called with an invalid state.
         *
         * Invokes the [[onInvalid]] callbacks, in natural order.
         * Each callback's return value is checked in sequence until one of them returns an instance of TargetState.
         * The results of the callbacks are wrapped in $q.when(), so the callbacks may return promises.
         *
         * If a callback returns an TargetState, then it is used as arguments to $state.transitionTo() and the result returned.
         *
         * @internalapi
         */
        StateService.prototype._handleInvalidTargetState = function (fromPath, toState) {
            var _this = this;
            var fromState = PathUtils.makeTargetState(this.router.stateRegistry, fromPath);
            var globals = this.router.globals;
            var latestThing = function () { return globals.transitionHistory.peekTail(); };
            var latest = latestThing();
            var callbackQueue = new Queue(this.invalidCallbacks.slice());
            var injector = new ResolveContext(fromPath).injector();
            var checkForRedirect = function (result) {
                if (!(result instanceof TargetState)) {
                    return;
                }
                var target = result;
                // Recreate the TargetState, in case the state is now defined.
                target = _this.target(target.identifier(), target.params(), target.options());
                if (!target.valid()) {
                    return Rejection.invalid(target.error()).toPromise();
                }
                if (latestThing() !== latest) {
                    return Rejection.superseded().toPromise();
                }
                return _this.transitionTo(target.identifier(), target.params(), target.options());
            };
            function invokeNextCallback() {
                var nextCallback = callbackQueue.dequeue();
                if (nextCallback === undefined)
                    return Rejection.invalid(toState.error()).toPromise();
                var callbackResult = services.$q.when(nextCallback(toState, fromState, injector));
                return callbackResult.then(checkForRedirect).then(function (result) { return result || invokeNextCallback(); });
            }
            return invokeNextCallback();
        };
        /**
         * Registers an Invalid State handler
         *
         * Registers a [[OnInvalidCallback]] function to be invoked when [[StateService.transitionTo]]
         * has been called with an invalid state reference parameter
         *
         * Example:
         * ```js
         * stateService.onInvalid(function(to, from, injector) {
         *   if (to.name() === 'foo') {
         *     let lazyLoader = injector.get('LazyLoadService');
         *     return lazyLoader.load('foo')
         *         .then(() => stateService.target('foo'));
         *   }
         * });
         * ```
         *
         * @param {function} callback invoked when the toState is invalid
         *   This function receives the (invalid) toState, the fromState, and an injector.
         *   The function may optionally return a [[TargetState]] or a Promise for a TargetState.
         *   If one is returned, it is treated as a redirect.
         *
         * @returns a function which deregisters the callback
         */
        StateService.prototype.onInvalid = function (callback) {
            this.invalidCallbacks.push(callback);
            return function deregisterListener() {
                removeFrom(this.invalidCallbacks)(callback);
            }.bind(this);
        };
        /**
         * Reloads the current state
         *
         * A method that force reloads the current state, or a partial state hierarchy.
         * All resolves are re-resolved, and components reinstantiated.
         *
         * #### Example:
         * ```js
         * let app angular.module('app', ['ui.router']);
         *
         * app.controller('ctrl', function ($scope, $state) {
         *   $scope.reload = function(){
         *     $state.reload();
         *   }
         * });
         * ```
         *
         * Note: `reload()` is just an alias for:
         *
         * ```js
         * $state.transitionTo($state.current, $state.params, {
         *   reload: true, inherit: false
         * });
         * ```
         *
         * @param reloadState A state name or a state object.
         *    If present, this state and all its children will be reloaded, but ancestors will not reload.
         *
         * #### Example:
         * ```js
         * //assuming app application consists of 3 states: 'contacts', 'contacts.detail', 'contacts.detail.item'
         * //and current state is 'contacts.detail.item'
         * let app angular.module('app', ['ui.router']);
         *
         * app.controller('ctrl', function ($scope, $state) {
         *   $scope.reload = function(){
         *     //will reload 'contact.detail' and nested 'contact.detail.item' states
         *     $state.reload('contact.detail');
         *   }
         * });
         * ```
         *
         * @returns A promise representing the state of the new transition. See [[StateService.go]]
         */
        StateService.prototype.reload = function (reloadState) {
            return this.transitionTo(this.current, this.params, {
                reload: isDefined(reloadState) ? reloadState : true,
                inherit: false,
                notify: false,
            });
        };
        /**
         * Transition to a different state and/or parameters
         *
         * Convenience method for transitioning to a new state.
         *
         * `$state.go` calls `$state.transitionTo` internally but automatically sets options to
         * `{ location: true, inherit: true, relative: router.globals.$current, notify: true }`.
         * This allows you to use either an absolute or relative `to` argument (because of `relative: router.globals.$current`).
         * It also allows you to specify * only the parameters you'd like to update, while letting unspecified parameters
         * inherit from the current parameter values (because of `inherit: true`).
         *
         * #### Example:
         * ```js
         * let app = angular.module('app', ['ui.router']);
         *
         * app.controller('ctrl', function ($scope, $state) {
         *   $scope.changeState = function () {
         *     $state.go('contact.detail');
         *   };
         * });
         * ```
         *
         * @param to Absolute state name, state object, or relative state path (relative to current state).
         *
         * Some examples:
         *
         * - `$state.go('contact.detail')` - will go to the `contact.detail` state
         * - `$state.go('^')` - will go to the parent state
         * - `$state.go('^.sibling')` - if current state is `home.child`, will go to the `home.sibling` state
         * - `$state.go('.child.grandchild')` - if current state is home, will go to the `home.child.grandchild` state
         *
         * @param params A map of the parameters that will be sent to the state, will populate $stateParams.
         *
         *    Any parameters that are not specified will be inherited from current parameter values (because of `inherit: true`).
         *    This allows, for example, going to a sibling state that shares parameters defined by a parent state.
         *
         * @param options Transition options
         *
         * @returns {promise} A promise representing the state of the new transition.
         */
        StateService.prototype.go = function (to, params, options) {
            var defautGoOpts = { relative: this.$current, inherit: true };
            var transOpts = defaults(options, defautGoOpts, defaultTransOpts);
            return this.transitionTo(to, params, transOpts);
        };
        /**
         * Creates a [[TargetState]]
         *
         * This is a factory method for creating a TargetState
         *
         * This may be returned from a Transition Hook to redirect a transition, for example.
         */
        StateService.prototype.target = function (identifier, params, options) {
            if (options === void 0) { options = {}; }
            // If we're reloading, find the state object to reload from
            if (isObject(options.reload) && !options.reload.name)
                throw new Error('Invalid reload state object');
            var reg = this.router.stateRegistry;
            options.reloadState =
                options.reload === true ? reg.root() : reg.matcher.find(options.reload, options.relative);
            if (options.reload && !options.reloadState)
                throw new Error("No such reload state '" + (isString(options.reload) ? options.reload : options.reload.name) + "'");
            return new TargetState(this.router.stateRegistry, identifier, params, options);
        };
        StateService.prototype.getCurrentPath = function () {
            var _this = this;
            var globals = this.router.globals;
            var latestSuccess = globals.successfulTransitions.peekTail();
            var rootPath = function () { return [new PathNode(_this.router.stateRegistry.root())]; };
            return latestSuccess ? latestSuccess.treeChanges().to : rootPath();
        };
        /**
         * Low-level method for transitioning to a new state.
         *
         * The [[go]] method (which uses `transitionTo` internally) is recommended in most situations.
         *
         * #### Example:
         * ```js
         * let app = angular.module('app', ['ui.router']);
         *
         * app.controller('ctrl', function ($scope, $state) {
         *   $scope.changeState = function () {
         *     $state.transitionTo('contact.detail');
         *   };
         * });
         * ```
         *
         * @param to State name or state object.
         * @param toParams A map of the parameters that will be sent to the state,
         *      will populate $stateParams.
         * @param options Transition options
         *
         * @returns A promise representing the state of the new transition. See [[go]]
         */
        StateService.prototype.transitionTo = function (to, toParams, options) {
            var _this = this;
            if (toParams === void 0) { toParams = {}; }
            if (options === void 0) { options = {}; }
            var router = this.router;
            var globals = router.globals;
            options = defaults(options, defaultTransOpts);
            var getCurrent = function () { return globals.transition; };
            options = extend(options, { current: getCurrent });
            var ref = this.target(to, toParams, options);
            var currentPath = this.getCurrentPath();
            if (!ref.exists())
                return this._handleInvalidTargetState(currentPath, ref);
            if (!ref.valid())
                return silentRejection(ref.error());
            if (options.supercede === false && getCurrent()) {
                return Rejection.ignored('Another transition is in progress and supercede has been set to false in TransitionOptions for the transition. So the transition was ignored in favour of the existing one in progress.').toPromise();
            }
            /**
             * Special handling for Ignored, Aborted, and Redirected transitions
             *
             * The semantics for the transition.run() promise and the StateService.transitionTo()
             * promise differ. For instance, the run() promise may be rejected because it was
             * IGNORED, but the transitionTo() promise is resolved because from the user perspective
             * no error occurred.  Likewise, the transition.run() promise may be rejected because of
             * a Redirect, but the transitionTo() promise is chained to the new Transition's promise.
             */
            var rejectedTransitionHandler = function (trans) { return function (error) {
                if (error instanceof Rejection) {
                    var isLatest = router.globals.lastStartedTransitionId <= trans.$id;
                    if (error.type === exports.RejectType.IGNORED) {
                        isLatest && router.urlRouter.update();
                        // Consider ignored `Transition.run()` as a successful `transitionTo`
                        return services.$q.when(globals.current);
                    }
                    var detail = error.detail;
                    if (error.type === exports.RejectType.SUPERSEDED && error.redirected && detail instanceof TargetState) {
                        // If `Transition.run()` was redirected, allow the `transitionTo()` promise to resolve successfully
                        // by returning the promise for the new (redirect) `Transition.run()`.
                        var redirect = trans.redirect(detail);
                        return redirect.run().catch(rejectedTransitionHandler(redirect));
                    }
                    if (error.type === exports.RejectType.ABORTED) {
                        isLatest && router.urlRouter.update();
                        return services.$q.reject(error);
                    }
                }
                var errorHandler = _this.defaultErrorHandler();
                errorHandler(error);
                return services.$q.reject(error);
            }; };
            var transition = this.router.transitionService.create(currentPath, ref);
            var transitionToPromise = transition.run().catch(rejectedTransitionHandler(transition));
            silenceUncaughtInPromise(transitionToPromise); // issue #2676
            // Return a promise for the transition, which also has the transition object on it.
            return extend(transitionToPromise, { transition: transition });
        };
        /**
         * Checks if the current state *is* the provided state
         *
         * Similar to [[includes]] but only checks for the full state name.
         * If params is supplied then it will be tested for strict equality against the current
         * active params object, so all params must match with none missing and no extras.
         *
         * #### Example:
         * ```js
         * $state.$current.name = 'contacts.details.item';
         *
         * // absolute name
         * $state.is('contact.details.item'); // returns true
         * $state.is(contactDetailItemStateObject); // returns true
         * ```
         *
         * // relative name (. and ^), typically from a template
         * // E.g. from the 'contacts.details' template
         * ```html
         * <div ng-class="{highlighted: $state.is('.item')}">Item</div>
         * ```
         *
         * @param stateOrName The state name (absolute or relative) or state object you'd like to check.
         * @param params A param object, e.g. `{sectionId: section.id}`, that you'd like
         * to test against the current active state.
         * @param options An options object. The options are:
         *   - `relative`: If `stateOrName` is a relative state name and `options.relative` is set, .is will
         *     test relative to `options.relative` state (or name).
         *
         * @returns Returns true if it is the state.
         */
        StateService.prototype.is = function (stateOrName, params, options) {
            options = defaults(options, { relative: this.$current });
            var state = this.router.stateRegistry.matcher.find(stateOrName, options.relative);
            if (!isDefined(state))
                return undefined;
            if (this.$current !== state)
                return false;
            if (!params)
                return true;
            var schema = state.parameters({ inherit: true, matchingKeys: params });
            return Param.equals(schema, Param.values(schema, params), this.params);
        };
        /**
         * Checks if the current state *includes* the provided state
         *
         * A method to determine if the current active state is equal to or is the child of the
         * state stateName. If any params are passed then they will be tested for a match as well.
         * Not all the parameters need to be passed, just the ones you'd like to test for equality.
         *
         * #### Example when `$state.$current.name === 'contacts.details.item'`
         * ```js
         * // Using partial names
         * $state.includes("contacts"); // returns true
         * $state.includes("contacts.details"); // returns true
         * $state.includes("contacts.details.item"); // returns true
         * $state.includes("contacts.list"); // returns false
         * $state.includes("about"); // returns false
         * ```
         *
         * #### Glob Examples when `* $state.$current.name === 'contacts.details.item.url'`:
         * ```js
         * $state.includes("*.details.*.*"); // returns true
         * $state.includes("*.details.**"); // returns true
         * $state.includes("**.item.**"); // returns true
         * $state.includes("*.details.item.url"); // returns true
         * $state.includes("*.details.*.url"); // returns true
         * $state.includes("*.details.*"); // returns false
         * $state.includes("item.**"); // returns false
         * ```
         *
         * @param stateOrName A partial name, relative name, glob pattern,
         *   or state object to be searched for within the current state name.
         * @param params A param object, e.g. `{sectionId: section.id}`,
         *   that you'd like to test against the current active state.
         * @param options An options object. The options are:
         *   - `relative`: If `stateOrName` is a relative state name and `options.relative` is set, .is will
         *     test relative to `options.relative` state (or name).
         *
         * @returns {boolean} Returns true if it does include the state
         */
        StateService.prototype.includes = function (stateOrName, params, options) {
            options = defaults(options, { relative: this.$current });
            var glob = isString(stateOrName) && Glob.fromString(stateOrName);
            if (glob) {
                if (!glob.matches(this.$current.name))
                    return false;
                stateOrName = this.$current.name;
            }
            var state = this.router.stateRegistry.matcher.find(stateOrName, options.relative), include = this.$current.includes;
            if (!isDefined(state))
                return undefined;
            if (!isDefined(include[state.name]))
                return false;
            if (!params)
                return true;
            var schema = state.parameters({ inherit: true, matchingKeys: params });
            return Param.equals(schema, Param.values(schema, params), this.params);
        };
        /**
         * Generates a URL for a state and parameters
         *
         * Returns the url for the given state populated with the given params.
         *
         * #### Example:
         * ```js
         * expect($state.href("about.person", { person: "bob" })).toEqual("/about/bob");
         * ```
         *
         * @param stateOrName The state name or state object you'd like to generate a url from.
         * @param params An object of parameter values to fill the state's required parameters.
         * @param options Options object. The options are:
         *
         * @returns {string} compiled state url
         */
        StateService.prototype.href = function (stateOrName, params, options) {
            var defaultHrefOpts = {
                lossy: true,
                inherit: true,
                absolute: false,
                relative: this.$current,
            };
            options = defaults(options, defaultHrefOpts);
            params = params || {};
            var state = this.router.stateRegistry.matcher.find(stateOrName, options.relative);
            if (!isDefined(state))
                return null;
            if (options.inherit)
                params = this.params.$inherit(params, this.$current, state);
            var nav = state && options.lossy ? state.navigable : state;
            if (!nav || nav.url === undefined || nav.url === null) {
                return null;
            }
            return this.router.urlRouter.href(nav.url, params, { absolute: options.absolute });
        };
        /**
         * Sets or gets the default [[transitionTo]] error handler.
         *
         * The error handler is called when a [[Transition]] is rejected or when any error occurred during the Transition.
         * This includes errors caused by resolves and transition hooks.
         *
         * Note:
         * This handler does not receive certain Transition rejections.
         * Redirected and Ignored Transitions are not considered to be errors by [[StateService.transitionTo]].
         *
         * The built-in default error handler logs the error to the console.
         *
         * You can provide your own custom handler.
         *
         * #### Example:
         * ```js
         * stateService.defaultErrorHandler(function() {
         *   // Do not log transitionTo errors
         * });
         * ```
         *
         * @param handler a global error handler function
         * @returns the current global error handler
         */
        StateService.prototype.defaultErrorHandler = function (handler) {
            return (this._defaultErrorHandler = handler || this._defaultErrorHandler);
        };
        StateService.prototype.get = function (stateOrName, base) {
            var reg = this.router.stateRegistry;
            if (arguments.length === 0)
                return reg.get();
            return reg.get(stateOrName, base || this.$current);
        };
        /**
         * Lazy loads a state
         *
         * Explicitly runs a state's [[StateDeclaration.lazyLoad]] function.
         *
         * @param stateOrName the state that should be lazy loaded
         * @param transition the optional Transition context to use (if the lazyLoad function requires an injector, etc)
         * Note: If no transition is provided, a noop transition is created using the from the current state to the current state.
         * This noop transition is not actually run.
         *
         * @returns a promise to lazy load
         */
        StateService.prototype.lazyLoad = function (stateOrName, transition) {
            var state = this.get(stateOrName);
            if (!state || !state.lazyLoad)
                throw new Error('Can not lazy load ' + stateOrName);
            var currentPath = this.getCurrentPath();
            var target = PathUtils.makeTargetState(this.router.stateRegistry, currentPath);
            transition = transition || this.router.transitionService.create(currentPath, target);
            return lazyLoadState(transition, state);
        };
        return StateService;
    }());

    /** @internalapi @module vanilla */ /** */
    /**
     * An angular1-like promise api
     *
     * This object implements four methods similar to the
     * [angular 1 promise api](https://docs.angularjs.org/api/ng/service/$q)
     *
     * UI-Router evolved from an angular 1 library to a framework agnostic library.
     * However, some of the `@uirouter/core` code uses these ng1 style APIs to support ng1 style dependency injection.
     *
     * This API provides native ES6 promise support wrapped as a $q-like API.
     * Internally, UI-Router uses this $q object to perform promise operations.
     * The `angular-ui-router` (ui-router for angular 1) uses the $q API provided by angular.
     *
     * $q-like promise api
     */
    var $q = {
        /** Normalizes a value as a promise */
        when: function (val) { return new Promise(function (resolve, reject) { return resolve(val); }); },
        /** Normalizes a value as a promise rejection */
        reject: function (val) {
            return new Promise(function (resolve, reject) {
                reject(val);
            });
        },
        /** @returns a deferred object, which has `resolve` and `reject` functions */
        defer: function () {
            var deferred = {};
            deferred.promise = new Promise(function (resolve, reject) {
                deferred.resolve = resolve;
                deferred.reject = reject;
            });
            return deferred;
        },
        /** Like Promise.all(), but also supports object key/promise notation like $q */
        all: function (promises) {
            if (isArray(promises)) {
                return Promise.all(promises);
            }
            if (isObject(promises)) {
                // Convert promises map to promises array.
                // When each promise resolves, map it to a tuple { key: key, val: val }
                var chain = Object.keys(promises).map(function (key) { return promises[key].then(function (val) { return ({ key: key, val: val }); }); });
                // Then wait for all promises to resolve, and convert them back to an object
                return $q.all(chain).then(function (values) {
                    return values.reduce(function (acc, tuple) {
                        acc[tuple.key] = tuple.val;
                        return acc;
                    }, {});
                });
            }
        },
    };

    /** @internalapi @module vanilla */ /** */
    // globally available injectables
    var globals = {};
    var STRIP_COMMENTS = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;
    var ARGUMENT_NAMES = /([^\s,]+)/g;
    /**
     * A basic angular1-like injector api
     *
     * This object implements four methods similar to the
     * [angular 1 dependency injector](https://docs.angularjs.org/api/auto/service/$injector)
     *
     * UI-Router evolved from an angular 1 library to a framework agnostic library.
     * However, some of the `@uirouter/core` code uses these ng1 style APIs to support ng1 style dependency injection.
     *
     * This object provides a naive implementation of a globally scoped dependency injection system.
     * It supports the following DI approaches:
     *
     * ### Function parameter names
     *
     * A function's `.toString()` is called, and the parameter names are parsed.
     * This only works when the parameter names aren't "mangled" by a minifier such as UglifyJS.
     *
     * ```js
     * function injectedFunction(FooService, BarService) {
     *   // FooService and BarService are injected
     * }
     * ```
     *
     * ### Function annotation
     *
     * A function may be annotated with an array of dependency names as the `$inject` property.
     *
     * ```js
     * injectedFunction.$inject = [ 'FooService', 'BarService' ];
     * function injectedFunction(fs, bs) {
     *   // FooService and BarService are injected as fs and bs parameters
     * }
     * ```
     *
     * ### Array notation
     *
     * An array provides the names of the dependencies to inject (as strings).
     * The function is the last element of the array.
     *
     * ```js
     * [ 'FooService', 'BarService', function (fs, bs) {
     *   // FooService and BarService are injected as fs and bs parameters
     * }]
     * ```
     *
     * @type {$InjectorLike}
     */
    var $injector = {
        /** Gets an object from DI based on a string token */
        get: function (name) { return globals[name]; },
        /** Returns true if an object named `name` exists in global DI */
        has: function (name) { return $injector.get(name) != null; },
        /**
         * Injects a function
         *
         * @param fn the function to inject
         * @param context the function's `this` binding
         * @param locals An object with additional DI tokens and values, such as `{ someToken: { foo: 1 } }`
         */
        invoke: function (fn, context, locals) {
            var all = extend({}, globals, locals || {});
            var params = $injector.annotate(fn);
            var ensureExist = assertPredicate(function (key) { return all.hasOwnProperty(key); }, function (key) { return "DI can't find injectable: '" + key + "'"; });
            var args = params.filter(ensureExist).map(function (x) { return all[x]; });
            if (isFunction(fn))
                return fn.apply(context, args);
            else
                return fn.slice(-1)[0].apply(context, args);
        },
        /**
         * Returns a function's dependencies
         *
         * Analyzes a function (or array) and returns an array of DI tokens that the function requires.
         * @return an array of `string`s
         */
        annotate: function (fn) {
            if (!isInjectable(fn))
                throw new Error("Not an injectable function: " + fn);
            if (fn && fn.$inject)
                return fn.$inject;
            if (isArray(fn))
                return fn.slice(0, -1);
            var fnStr = fn.toString().replace(STRIP_COMMENTS, '');
            var result = fnStr.slice(fnStr.indexOf('(') + 1, fnStr.indexOf(')')).match(ARGUMENT_NAMES);
            return result || [];
        },
    };

    /** @internalapi @module vanilla */ /** */
    var keyValsToObjectR = function (accum, _a) {
        var key = _a[0], val = _a[1];
        if (!accum.hasOwnProperty(key)) {
            accum[key] = val;
        }
        else if (isArray(accum[key])) {
            accum[key].push(val);
        }
        else {
            accum[key] = [accum[key], val];
        }
        return accum;
    };
    var getParams = function (queryString) {
        return queryString
            .split('&')
            .filter(identity)
            .map(splitEqual)
            .reduce(keyValsToObjectR, {});
    };
    function parseUrl$1(url) {
        var orEmptyString = function (x) { return x || ''; };
        var _a = splitHash(url).map(orEmptyString), beforehash = _a[0], hash = _a[1];
        var _b = splitQuery(beforehash).map(orEmptyString), path = _b[0], search = _b[1];
        return { path: path, search: search, hash: hash, url: url };
    }
    var buildUrl = function (loc) {
        var path = loc.path();
        var searchObject = loc.search();
        var hash = loc.hash();
        var search = Object.keys(searchObject)
            .map(function (key) {
            var param = searchObject[key];
            var vals = isArray(param) ? param : [param];
            return vals.map(function (val) { return key + '=' + val; });
        })
            .reduce(unnestR, [])
            .join('&');
        return path + (search ? '?' + search : '') + (hash ? '#' + hash : '');
    };
    function locationPluginFactory(name, isHtml5, serviceClass, configurationClass) {
        return function (uiRouter) {
            var service = (uiRouter.locationService = new serviceClass(uiRouter));
            var configuration = (uiRouter.locationConfig = new configurationClass(uiRouter, isHtml5));
            function dispose(router) {
                router.dispose(service);
                router.dispose(configuration);
            }
            return { name: name, service: service, configuration: configuration, dispose: dispose };
        };
    }

    /** @internalapi @module vanilla */ /** */
    /** A base `LocationServices` */
    var BaseLocationServices = /** @class */ (function () {
        function BaseLocationServices(router, fireAfterUpdate) {
            var _this = this;
            this.fireAfterUpdate = fireAfterUpdate;
            this._listeners = [];
            this._listener = function (evt) { return _this._listeners.forEach(function (cb) { return cb(evt); }); };
            this.hash = function () { return parseUrl$1(_this._get()).hash; };
            this.path = function () { return parseUrl$1(_this._get()).path; };
            this.search = function () { return getParams(parseUrl$1(_this._get()).search); };
            this._location = root.location;
            this._history = root.history;
        }
        BaseLocationServices.prototype.url = function (url, replace) {
            if (replace === void 0) { replace = true; }
            if (isDefined(url) && url !== this._get()) {
                this._set(null, null, url, replace);
                if (this.fireAfterUpdate) {
                    this._listeners.forEach(function (cb) { return cb({ url: url }); });
                }
            }
            return buildUrl(this);
        };
        BaseLocationServices.prototype.onChange = function (cb) {
            var _this = this;
            this._listeners.push(cb);
            return function () { return removeFrom(_this._listeners, cb); };
        };
        BaseLocationServices.prototype.dispose = function (router) {
            deregAll(this._listeners);
        };
        return BaseLocationServices;
    }());

    var __extends = (undefined && undefined.__extends) || (function () {
        var extendStatics = function (d, b) {
            extendStatics = Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
                function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
            return extendStatics(d, b);
        };
        return function (d, b) {
            extendStatics(d, b);
            function __() { this.constructor = d; }
            d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
        };
    })();
    /** A `LocationServices` that uses the browser hash "#" to get/set the current location */
    var HashLocationService = /** @class */ (function (_super) {
        __extends(HashLocationService, _super);
        function HashLocationService(router) {
            var _this = _super.call(this, router, false) || this;
            root.addEventListener('hashchange', _this._listener, false);
            return _this;
        }
        HashLocationService.prototype._get = function () {
            return trimHashVal(this._location.hash);
        };
        HashLocationService.prototype._set = function (state, title, url, replace) {
            this._location.hash = url;
        };
        HashLocationService.prototype.dispose = function (router) {
            _super.prototype.dispose.call(this, router);
            root.removeEventListener('hashchange', this._listener);
        };
        return HashLocationService;
    }(BaseLocationServices));

    var __extends$1 = (undefined && undefined.__extends) || (function () {
        var extendStatics = function (d, b) {
            extendStatics = Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
                function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
            return extendStatics(d, b);
        };
        return function (d, b) {
            extendStatics(d, b);
            function __() { this.constructor = d; }
            d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
        };
    })();
    /** A `LocationServices` that gets/sets the current location from an in-memory object */
    var MemoryLocationService = /** @class */ (function (_super) {
        __extends$1(MemoryLocationService, _super);
        function MemoryLocationService(router) {
            return _super.call(this, router, true) || this;
        }
        MemoryLocationService.prototype._get = function () {
            return this._url;
        };
        MemoryLocationService.prototype._set = function (state, title, url, replace) {
            this._url = url;
        };
        return MemoryLocationService;
    }(BaseLocationServices));

    var __extends$2 = (undefined && undefined.__extends) || (function () {
        var extendStatics = function (d, b) {
            extendStatics = Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
                function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
            return extendStatics(d, b);
        };
        return function (d, b) {
            extendStatics(d, b);
            function __() { this.constructor = d; }
            d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
        };
    })();
    /**
     * A `LocationServices` that gets/sets the current location using the browser's `location` and `history` apis
     *
     * Uses `history.pushState` and `history.replaceState`
     */
    var PushStateLocationService = /** @class */ (function (_super) {
        __extends$2(PushStateLocationService, _super);
        function PushStateLocationService(router) {
            var _this = _super.call(this, router, true) || this;
            _this._config = router.urlService.config;
            root.addEventListener('popstate', _this._listener, false);
            return _this;
        }
        /**
         * Gets the base prefix without:
         * - trailing slash
         * - trailing filename
         * - protocol and hostname
         *
         * If <base href='/base/'>, this returns '/base'.
         * If <base href='/foo/base/'>, this returns '/foo/base'.
         * If <base href='/base/index.html'>, this returns '/base'.
         * If <base href='http://localhost:8080/base/index.html'>, this returns '/base'.
         * If <base href='/base'>, this returns ''.
         * If <base href='http://localhost:8080'>, this returns ''.
         * If <base href='http://localhost:8080/'>, this returns ''.
         *
         * See: https://html.spec.whatwg.org/dev/semantics.html#the-base-element
         */
        PushStateLocationService.prototype._getBasePrefix = function () {
            return stripLastPathElement(this._config.baseHref());
        };
        PushStateLocationService.prototype._get = function () {
            var _a = this._location, pathname = _a.pathname, hash = _a.hash, search = _a.search;
            search = splitQuery(search)[1]; // strip ? if found
            hash = splitHash(hash)[1]; // strip # if found
            var basePrefix = this._getBasePrefix();
            var exactBaseHrefMatch = pathname === this._config.baseHref();
            var startsWithBase = pathname.substr(0, basePrefix.length) === basePrefix;
            pathname = exactBaseHrefMatch ? '/' : startsWithBase ? pathname.substring(basePrefix.length) : pathname;
            return pathname + (search ? '?' + search : '') + (hash ? '#' + hash : '');
        };
        PushStateLocationService.prototype._set = function (state, title, url, replace) {
            var basePrefix = this._getBasePrefix();
            var slash = url && url[0] !== '/' ? '/' : '';
            var fullUrl = url === '' || url === '/' ? this._config.baseHref() : basePrefix + slash + url;
            if (replace) {
                this._history.replaceState(state, title, fullUrl);
            }
            else {
                this._history.pushState(state, title, fullUrl);
            }
        };
        PushStateLocationService.prototype.dispose = function (router) {
            _super.prototype.dispose.call(this, router);
            root.removeEventListener('popstate', this._listener);
        };
        return PushStateLocationService;
    }(BaseLocationServices));

    /** A `LocationConfig` mock that gets/sets all config from an in-memory object */
    var MemoryLocationConfig = /** @class */ (function () {
        function MemoryLocationConfig() {
            var _this = this;
            this.dispose = noop;
            this._baseHref = '';
            this._port = 80;
            this._protocol = 'http';
            this._host = 'localhost';
            this._hashPrefix = '';
            this.port = function () { return _this._port; };
            this.protocol = function () { return _this._protocol; };
            this.host = function () { return _this._host; };
            this.baseHref = function () { return _this._baseHref; };
            this.html5Mode = function () { return false; };
            this.hashPrefix = function (newval) { return (isDefined(newval) ? (_this._hashPrefix = newval) : _this._hashPrefix); };
        }
        return MemoryLocationConfig;
    }());

    /** @internalapi @module vanilla */
    /** A `LocationConfig` that delegates to the browser's `location` object */
    var BrowserLocationConfig = /** @class */ (function () {
        function BrowserLocationConfig(router, _isHtml5) {
            if (_isHtml5 === void 0) { _isHtml5 = false; }
            this._isHtml5 = _isHtml5;
            this._baseHref = undefined;
            this._hashPrefix = '';
        }
        BrowserLocationConfig.prototype.port = function () {
            if (location.port) {
                return Number(location.port);
            }
            return this.protocol() === 'https' ? 443 : 80;
        };
        BrowserLocationConfig.prototype.protocol = function () {
            return location.protocol.replace(/:/g, '');
        };
        BrowserLocationConfig.prototype.host = function () {
            return location.hostname;
        };
        BrowserLocationConfig.prototype.html5Mode = function () {
            return this._isHtml5;
        };
        BrowserLocationConfig.prototype.hashPrefix = function (newprefix) {
            return isDefined(newprefix) ? (this._hashPrefix = newprefix) : this._hashPrefix;
        };
        BrowserLocationConfig.prototype.baseHref = function (href) {
            if (isDefined(href))
                this._baseHref = href;
            if (isUndefined(this._baseHref))
                this._baseHref = this.getBaseHref();
            return this._baseHref;
        };
        BrowserLocationConfig.prototype.getBaseHref = function () {
            var baseTag = document.getElementsByTagName('base')[0];
            if (baseTag && baseTag.href) {
                return baseTag.href.replace(/^([^/:]*:)?\/\/[^/]*/, '');
            }
            return this._isHtml5 ? '/' : location.pathname || '/';
        };
        BrowserLocationConfig.prototype.dispose = function () { };
        return BrowserLocationConfig;
    }());

    /** @internalapi @module vanilla */ /** */
    function servicesPlugin(router) {
        services.$injector = $injector;
        services.$q = $q;
        return { name: 'vanilla.services', $q: $q, $injector: $injector, dispose: function () { return null; } };
    }
    /** A `UIRouterPlugin` uses the browser hash to get/set the current location */
    var hashLocationPlugin = locationPluginFactory('vanilla.hashBangLocation', false, HashLocationService, BrowserLocationConfig);
    /** A `UIRouterPlugin` that gets/sets the current location using the browser's `location` and `history` apis */
    var pushStateLocationPlugin = locationPluginFactory('vanilla.pushStateLocation', true, PushStateLocationService, BrowserLocationConfig);
    /** A `UIRouterPlugin` that gets/sets the current location from an in-memory object */
    var memoryLocationPlugin = locationPluginFactory('vanilla.memoryLocation', false, MemoryLocationService, MemoryLocationConfig);

    /**
     * # Core classes and interfaces
     *
     * The classes and interfaces that are core to ui-router and do not belong
     * to a more specific subsystem (such as resolve).
     *
     * @preferred @publicapi @module core
     */ /** */
    /** @internalapi */
    var UIRouterPluginBase = /** @class */ (function () {
        function UIRouterPluginBase() {
        }
        UIRouterPluginBase.prototype.dispose = function (router) { };
        return UIRouterPluginBase;
    }());

    /** @publicapi @module common */ /** */

    var index = /*#__PURE__*/Object.freeze({
        __proto__: null,
        root: root,
        fromJson: fromJson,
        toJson: toJson,
        forEach: forEach,
        extend: extend,
        equals: equals,
        identity: identity,
        noop: noop,
        createProxyFunctions: createProxyFunctions,
        inherit: inherit,
        inArray: inArray,
        _inArray: _inArray,
        removeFrom: removeFrom,
        _removeFrom: _removeFrom,
        pushTo: pushTo,
        _pushTo: _pushTo,
        deregAll: deregAll,
        defaults: defaults,
        mergeR: mergeR,
        ancestors: ancestors,
        pick: pick,
        omit: omit,
        pluck: pluck,
        filter: filter,
        find: find,
        mapObj: mapObj,
        map: map,
        values: values,
        allTrueR: allTrueR,
        anyTrueR: anyTrueR,
        unnestR: unnestR,
        flattenR: flattenR,
        pushR: pushR,
        uniqR: uniqR,
        unnest: unnest,
        flatten: flatten,
        assertPredicate: assertPredicate,
        assertMap: assertMap,
        assertFn: assertFn,
        pairs: pairs,
        arrayTuples: arrayTuples,
        applyPairs: applyPairs,
        tail: tail,
        copy: copy,
        _extend: _extend,
        silenceUncaughtInPromise: silenceUncaughtInPromise,
        silentRejection: silentRejection,
        makeStub: makeStub,
        services: services,
        Glob: Glob,
        curry: curry,
        compose: compose,
        pipe: pipe,
        prop: prop,
        propEq: propEq,
        parse: parse,
        not: not,
        and: and,
        or: or,
        all: all,
        any: any,
        is: is,
        eq: eq,
        val: val,
        invoke: invoke,
        pattern: pattern,
        isUndefined: isUndefined,
        isDefined: isDefined,
        isNull: isNull,
        isNullOrUndefined: isNullOrUndefined,
        isFunction: isFunction,
        isNumber: isNumber,
        isString: isString,
        isObject: isObject,
        isArray: isArray,
        isDate: isDate,
        isRegExp: isRegExp,
        isInjectable: isInjectable,
        isPromise: isPromise,
        Queue: Queue,
        maxLength: maxLength,
        padString: padString,
        kebobString: kebobString,
        functionToString: functionToString,
        fnToString: fnToString,
        stringify: stringify,
        beforeAfterSubstr: beforeAfterSubstr,
        hostRegex: hostRegex,
        stripLastPathElement: stripLastPathElement,
        splitHash: splitHash,
        splitQuery: splitQuery,
        splitEqual: splitEqual,
        trimHashVal: trimHashVal,
        splitOnDelim: splitOnDelim,
        joinNeighborsR: joinNeighborsR,
        get Category () { return exports.Category; },
        Trace: Trace,
        trace: trace,
        get DefType () { return exports.DefType; },
        Param: Param,
        ParamTypes: ParamTypes,
        StateParams: StateParams,
        ParamType: ParamType,
        PathNode: PathNode,
        PathUtils: PathUtils,
        resolvePolicies: resolvePolicies,
        defaultResolvePolicy: defaultResolvePolicy,
        Resolvable: Resolvable,
        NATIVE_INJECTOR_TOKEN: NATIVE_INJECTOR_TOKEN,
        ResolveContext: ResolveContext,
        resolvablesBuilder: resolvablesBuilder,
        StateBuilder: StateBuilder,
        StateObject: StateObject,
        StateMatcher: StateMatcher,
        StateQueueManager: StateQueueManager,
        StateRegistry: StateRegistry,
        StateService: StateService,
        TargetState: TargetState,
        get TransitionHookPhase () { return exports.TransitionHookPhase; },
        get TransitionHookScope () { return exports.TransitionHookScope; },
        HookBuilder: HookBuilder,
        matchState: matchState,
        RegisteredHook: RegisteredHook,
        makeEvent: makeEvent,
        get RejectType () { return exports.RejectType; },
        Rejection: Rejection,
        Transition: Transition,
        TransitionHook: TransitionHook,
        TransitionEventType: TransitionEventType,
        defaultTransOpts: defaultTransOpts,
        TransitionService: TransitionService,
        UrlRules: UrlRules,
        UrlConfig: UrlConfig,
        UrlMatcher: UrlMatcher,
        ParamFactory: ParamFactory,
        UrlMatcherFactory: UrlMatcherFactory,
        UrlRouter: UrlRouter,
        UrlRuleFactory: UrlRuleFactory,
        BaseUrlRule: BaseUrlRule,
        UrlService: UrlService,
        ViewService: ViewService,
        UIRouterGlobals: UIRouterGlobals,
        UIRouter: UIRouter,
        $q: $q,
        $injector: $injector,
        BaseLocationServices: BaseLocationServices,
        HashLocationService: HashLocationService,
        MemoryLocationService: MemoryLocationService,
        PushStateLocationService: PushStateLocationService,
        MemoryLocationConfig: MemoryLocationConfig,
        BrowserLocationConfig: BrowserLocationConfig,
        keyValsToObjectR: keyValsToObjectR,
        getParams: getParams,
        parseUrl: parseUrl$1,
        buildUrl: buildUrl,
        locationPluginFactory: locationPluginFactory,
        servicesPlugin: servicesPlugin,
        hashLocationPlugin: hashLocationPlugin,
        pushStateLocationPlugin: pushStateLocationPlugin,
        memoryLocationPlugin: memoryLocationPlugin,
        UIRouterPluginBase: UIRouterPluginBase
    });

    /** @internalapi */
    function getNg1ViewConfigFactory() {
        var templateFactory = null;
        return function (path, view) {
            templateFactory = templateFactory || services.$injector.get('$templateFactory');
            return [new Ng1ViewConfig(path, view, templateFactory)];
        };
    }
    /** @internalapi */
    var hasAnyKey = function (keys, obj) { return keys.reduce(function (acc, key) { return acc || isDefined(obj[key]); }, false); };
    /**
     * This is a [[StateBuilder.builder]] function for angular1 `views`.
     *
     * When the [[StateBuilder]] builds a [[StateObject]] object from a raw [[StateDeclaration]], this builder
     * handles the `views` property with logic specific to @uirouter/angularjs (ng1).
     *
     * If no `views: {}` property exists on the [[StateDeclaration]], then it creates the `views` object
     * and applies the state-level configuration to a view named `$default`.
     *
     * @internalapi
     */
    function ng1ViewsBuilder(state) {
        // Do not process root state
        if (!state.parent)
            return {};
        var tplKeys = ['templateProvider', 'templateUrl', 'template', 'notify', 'async'], ctrlKeys = ['controller', 'controllerProvider', 'controllerAs', 'resolveAs'], compKeys = ['component', 'bindings', 'componentProvider'], nonCompKeys = tplKeys.concat(ctrlKeys), allViewKeys = compKeys.concat(nonCompKeys);
        // Do not allow a state to have both state-level props and also a `views: {}` property.
        // A state without a `views: {}` property can declare properties for the `$default` view as properties of the state.
        // However, the `$default` approach should not be mixed with a separate `views: ` block.
        if (isDefined(state.views) && hasAnyKey(allViewKeys, state)) {
            throw new Error("State '" + state.name + "' has a 'views' object. " +
                "It cannot also have \"view properties\" at the state level.  " +
                "Move the following properties into a view (in the 'views' object): " +
                (" " + allViewKeys.filter(function (key) { return isDefined(state[key]); }).join(', ')));
        }
        var views = {}, viewsObject = state.views || { $default: pick(state, allViewKeys) };
        forEach(viewsObject, function (config, name) {
            // Account for views: { "": { template... } }
            name = name || '$default';
            // Account for views: { header: "headerComponent" }
            if (isString(config))
                config = { component: config };
            // Make a shallow copy of the config object
            config = extend({}, config);
            // Do not allow a view to mix props for component-style view with props for template/controller-style view
            if (hasAnyKey(compKeys, config) && hasAnyKey(nonCompKeys, config)) {
                throw new Error("Cannot combine: " + compKeys.join('|') + " with: " + nonCompKeys.join('|') + " in stateview: '" + name + "@" + state.name + "'");
            }
            config.resolveAs = config.resolveAs || '$resolve';
            config.$type = 'ng1';
            config.$context = state;
            config.$name = name;
            var normalized = ViewService.normalizeUIViewTarget(config.$context, config.$name);
            config.$uiViewName = normalized.uiViewName;
            config.$uiViewContextAnchor = normalized.uiViewContextAnchor;
            views[name] = config;
        });
        return views;
    }
    /** @hidden */
    var id$1 = 0;
    /** @internalapi */
    var Ng1ViewConfig = /** @class */ (function () {
        function Ng1ViewConfig(path, viewDecl, factory) {
            var _this = this;
            this.path = path;
            this.viewDecl = viewDecl;
            this.factory = factory;
            this.$id = id$1++;
            this.loaded = false;
            this.getTemplate = function (uiView, context) {
                return _this.component
                    ? _this.factory.makeComponentTemplate(uiView, context, _this.component, _this.viewDecl.bindings)
                    : _this.template;
            };
        }
        Ng1ViewConfig.prototype.load = function () {
            var _this = this;
            var $q = services.$q;
            var context = new ResolveContext(this.path);
            var params = this.path.reduce(function (acc, node) { return extend(acc, node.paramValues); }, {});
            var promises = {
                template: $q.when(this.factory.fromConfig(this.viewDecl, params, context)),
                controller: $q.when(this.getController(context)),
            };
            return $q.all(promises).then(function (results) {
                trace.traceViewServiceEvent('Loaded', _this);
                _this.controller = results.controller;
                extend(_this, results.template); // Either { template: "tpl" } or { component: "cmpName" }
                return _this;
            });
        };
        /**
         * Gets the controller for a view configuration.
         *
         * @returns {Function|Promise.<Function>} Returns a controller, or a promise that resolves to a controller.
         */
        Ng1ViewConfig.prototype.getController = function (context) {
            var provider = this.viewDecl.controllerProvider;
            if (!isInjectable(provider))
                return this.viewDecl.controller;
            var deps = services.$injector.annotate(provider);
            var providerFn = isArray(provider) ? tail(provider) : provider;
            var resolvable = new Resolvable('', providerFn, deps);
            return resolvable.get(context);
        };
        return Ng1ViewConfig;
    }());

    /** @publicapi @module view */ /** */
    /**
     * Service which manages loading of templates from a ViewConfig.
     */
    var TemplateFactory = /** @class */ (function () {
        function TemplateFactory() {
            var _this = this;
            /** @hidden */ this._useHttp = ng.version.minor < 3;
            /** @hidden */ this.$get = [
                '$http',
                '$templateCache',
                '$injector',
                function ($http, $templateCache, $injector) {
                    _this.$templateRequest = $injector.has && $injector.has('$templateRequest') && $injector.get('$templateRequest');
                    _this.$http = $http;
                    _this.$templateCache = $templateCache;
                    return _this;
                },
            ];
        }
        /** @hidden */
        TemplateFactory.prototype.useHttpService = function (value) {
            this._useHttp = value;
        };
        /**
         * Creates a template from a configuration object.
         *
         * @param config Configuration object for which to load a template.
         * The following properties are search in the specified order, and the first one
         * that is defined is used to create the template:
         *
         * @param params  Parameters to pass to the template function.
         * @param context The resolve context associated with the template's view
         *
         * @return {string|object}  The template html as a string, or a promise for
         * that string,or `null` if no template is configured.
         */
        TemplateFactory.prototype.fromConfig = function (config, params, context) {
            var defaultTemplate = '<ui-view></ui-view>';
            var asTemplate = function (result) { return services.$q.when(result).then(function (str) { return ({ template: str }); }); };
            var asComponent = function (result) { return services.$q.when(result).then(function (str) { return ({ component: str }); }); };
            return isDefined(config.template)
                ? asTemplate(this.fromString(config.template, params))
                : isDefined(config.templateUrl)
                    ? asTemplate(this.fromUrl(config.templateUrl, params))
                    : isDefined(config.templateProvider)
                        ? asTemplate(this.fromProvider(config.templateProvider, params, context))
                        : isDefined(config.component)
                            ? asComponent(config.component)
                            : isDefined(config.componentProvider)
                                ? asComponent(this.fromComponentProvider(config.componentProvider, params, context))
                                : asTemplate(defaultTemplate);
        };
        /**
         * Creates a template from a string or a function returning a string.
         *
         * @param template html template as a string or function that returns an html template as a string.
         * @param params Parameters to pass to the template function.
         *
         * @return {string|object} The template html as a string, or a promise for that
         * string.
         */
        TemplateFactory.prototype.fromString = function (template, params) {
            return isFunction(template) ? template(params) : template;
        };
        /**
         * Loads a template from the a URL via `$http` and `$templateCache`.
         *
         * @param {string|Function} url url of the template to load, or a function
         * that returns a url.
         * @param {Object} params Parameters to pass to the url function.
         * @return {string|Promise.<string>} The template html as a string, or a promise
         * for that string.
         */
        TemplateFactory.prototype.fromUrl = function (url, params) {
            if (isFunction(url))
                url = url(params);
            if (url == null)
                return null;
            if (this._useHttp) {
                return this.$http
                    .get(url, { cache: this.$templateCache, headers: { Accept: 'text/html' } })
                    .then(function (response) {
                    return response.data;
                });
            }
            return this.$templateRequest(url);
        };
        /**
         * Creates a template by invoking an injectable provider function.
         *
         * @param provider Function to invoke via `locals`
         * @param {Function} injectFn a function used to invoke the template provider
         * @return {string|Promise.<string>} The template html as a string, or a promise
         * for that string.
         */
        TemplateFactory.prototype.fromProvider = function (provider, params, context) {
            var deps = services.$injector.annotate(provider);
            var providerFn = isArray(provider) ? tail(provider) : provider;
            var resolvable = new Resolvable('', providerFn, deps);
            return resolvable.get(context);
        };
        /**
         * Creates a component's template by invoking an injectable provider function.
         *
         * @param provider Function to invoke via `locals`
         * @param {Function} injectFn a function used to invoke the template provider
         * @return {string} The template html as a string: "<component-name input1='::$resolve.foo'></component-name>".
         */
        TemplateFactory.prototype.fromComponentProvider = function (provider, params, context) {
            var deps = services.$injector.annotate(provider);
            var providerFn = isArray(provider) ? tail(provider) : provider;
            var resolvable = new Resolvable('', providerFn, deps);
            return resolvable.get(context);
        };
        /**
         * Creates a template from a component's name
         *
         * This implements route-to-component.
         * It works by retrieving the component (directive) metadata from the injector.
         * It analyses the component's bindings, then constructs a template that instantiates the component.
         * The template wires input and output bindings to resolves or from the parent component.
         *
         * @param uiView {object} The parent ui-view (for binding outputs to callbacks)
         * @param context The ResolveContext (for binding outputs to callbacks returned from resolves)
         * @param component {string} Component's name in camel case.
         * @param bindings An object defining the component's bindings: {foo: '<'}
         * @return {string} The template as a string: "<component-name input1='::$resolve.foo'></component-name>".
         */
        TemplateFactory.prototype.makeComponentTemplate = function (uiView, context, component, bindings) {
            bindings = bindings || {};
            // Bind once prefix
            var prefix = ng.version.minor >= 3 ? '::' : '';
            // Convert to kebob name. Add x- prefix if the string starts with `x-` or `data-`
            var kebob = function (camelCase) {
                var kebobed = kebobString(camelCase);
                return /^(x|data)-/.exec(kebobed) ? "x-" + kebobed : kebobed;
            };
            var attributeTpl = function (input) {
                var name = input.name, type = input.type;
                var attrName = kebob(name);
                // If the ui-view has an attribute which matches a binding on the routed component
                // then pass that attribute through to the routed component template.
                // Prefer ui-view wired mappings to resolve data, unless the resolve was explicitly bound using `bindings:`
                if (uiView.attr(attrName) && !bindings[name])
                    return attrName + "='" + uiView.attr(attrName) + "'";
                var resolveName = bindings[name] || name;
                // Pre-evaluate the expression for "@" bindings by enclosing in {{ }}
                // some-attr="{{ ::$resolve.someResolveName }}"
                if (type === '@')
                    return attrName + "='{{" + prefix + "$resolve." + resolveName + "}}'";
                // Wire "&" callbacks to resolves that return a callback function
                // Get the result of the resolve (should be a function) and annotate it to get its arguments.
                // some-attr="$resolve.someResolveResultName(foo, bar)"
                if (type === '&') {
                    var res = context.getResolvable(resolveName);
                    var fn = res && res.data;
                    var args = (fn && services.$injector.annotate(fn)) || [];
                    // account for array style injection, i.e., ['foo', function(foo) {}]
                    var arrayIdxStr = isArray(fn) ? "[" + (fn.length - 1) + "]" : '';
                    return attrName + "='$resolve." + resolveName + arrayIdxStr + "(" + args.join(',') + ")'";
                }
                // some-attr="::$resolve.someResolveName"
                return attrName + "='" + prefix + "$resolve." + resolveName + "'";
            };
            var attrs = getComponentBindings(component)
                .map(attributeTpl)
                .join(' ');
            var kebobName = kebob(component);
            return "<" + kebobName + " " + attrs + "></" + kebobName + ">";
        };
        return TemplateFactory;
    }());
    // Gets all the directive(s)' inputs ('@', '=', and '<') and outputs ('&')
    function getComponentBindings(name) {
        var cmpDefs = services.$injector.get(name + 'Directive'); // could be multiple
        if (!cmpDefs || !cmpDefs.length)
            throw new Error("Unable to find component named '" + name + "'");
        return cmpDefs.map(getBindings).reduce(unnestR, []);
    }
    // Given a directive definition, find its object input attributes
    // Use different properties, depending on the type of directive (component, bindToController, normal)
    var getBindings = function (def) {
        if (isObject(def.bindToController))
            return scopeBindings(def.bindToController);
        return scopeBindings(def.scope);
    };
    // for ng 1.2 style, process the scope: { input: "=foo" }
    // for ng 1.3 through ng 1.5, process the component's bindToController: { input: "=foo" } object
    var scopeBindings = function (bindingsObj) {
        return Object.keys(bindingsObj || {})
            // [ 'input', [ '=foo', '=', 'foo' ] ]
            .map(function (key) { return [key, /^([=<@&])[?]?(.*)/.exec(bindingsObj[key])]; })
            // skip malformed values
            .filter(function (tuple) { return isDefined(tuple) && isArray(tuple[1]); })
            // { name: ('foo' || 'input'), type: '=' }
            .map(function (tuple) { return ({ name: tuple[1][2] || tuple[0], type: tuple[1][1] }); });
    };

    /** @publicapi @module ng1 */ /** */
    /**
     * The Angular 1 `StateProvider`
     *
     * The `$stateProvider` works similar to Angular's v1 router, but it focuses purely
     * on state.
     *
     * A state corresponds to a "place" in the application in terms of the overall UI and
     * navigation. A state describes (via the controller / template / view properties) what
     * the UI looks like and does at that place.
     *
     * States often have things in common, and the primary way of factoring out these
     * commonalities in this model is via the state hierarchy, i.e. parent/child states aka
     * nested states.
     *
     * The `$stateProvider` provides interfaces to declare these states for your app.
     */
    var StateProvider = /** @class */ (function () {
        function StateProvider(stateRegistry, stateService) {
            this.stateRegistry = stateRegistry;
            this.stateService = stateService;
            createProxyFunctions(val(StateProvider.prototype), this, val(this));
        }
        /**
         * Decorates states when they are registered
         *
         * Allows you to extend (carefully) or override (at your own peril) the
         * `stateBuilder` object used internally by [[StateRegistry]].
         * This can be used to add custom functionality to ui-router,
         * for example inferring templateUrl based on the state name.
         *
         * When passing only a name, it returns the current (original or decorated) builder
         * function that matches `name`.
         *
         * The builder functions that can be decorated are listed below. Though not all
         * necessarily have a good use case for decoration, that is up to you to decide.
         *
         * In addition, users can attach custom decorators, which will generate new
         * properties within the state's internal definition. There is currently no clear
         * use-case for this beyond accessing internal states (i.e. $state.$current),
         * however, expect this to become increasingly relevant as we introduce additional
         * meta-programming features.
         *
         * **Warning**: Decorators should not be interdependent because the order of
         * execution of the builder functions in non-deterministic. Builder functions
         * should only be dependent on the state definition object and super function.
         *
         *
         * Existing builder functions and current return values:
         *
         * - **parent** `{object}` - returns the parent state object.
         * - **data** `{object}` - returns state data, including any inherited data that is not
         *   overridden by own values (if any).
         * - **url** `{object}` - returns a {@link ui.router.util.type:UrlMatcher UrlMatcher}
         *   or `null`.
         * - **navigable** `{object}` - returns closest ancestor state that has a URL (aka is
         *   navigable).
         * - **params** `{object}` - returns an array of state params that are ensured to
         *   be a super-set of parent's params.
         * - **views** `{object}` - returns a views object where each key is an absolute view
         *   name (i.e. "viewName@stateName") and each value is the config object
         *   (template, controller) for the view. Even when you don't use the views object
         *   explicitly on a state config, one is still created for you internally.
         *   So by decorating this builder function you have access to decorating template
         *   and controller properties.
         * - **ownParams** `{object}` - returns an array of params that belong to the state,
         *   not including any params defined by ancestor states.
         * - **path** `{string}` - returns the full path from the root down to this state.
         *   Needed for state activation.
         * - **includes** `{object}` - returns an object that includes every state that
         *   would pass a `$state.includes()` test.
         *
         * #### Example:
         * Override the internal 'views' builder with a function that takes the state
         * definition, and a reference to the internal function being overridden:
         * ```js
         * $stateProvider.decorator('views', function (state, parent) {
         *   let result = {},
         *       views = parent(state);
         *
         *   angular.forEach(views, function (config, name) {
         *     let autoName = (state.name + '.' + name).replace('.', '/');
         *     config.templateUrl = config.templateUrl || '/partials/' + autoName + '.html';
         *     result[name] = config;
         *   });
         *   return result;
         * });
         *
         * $stateProvider.state('home', {
         *   views: {
         *     'contact.list': { controller: 'ListController' },
         *     'contact.item': { controller: 'ItemController' }
         *   }
         * });
         * ```
         *
         *
         * ```js
         * // Auto-populates list and item views with /partials/home/contact/list.html,
         * // and /partials/home/contact/item.html, respectively.
         * $state.go('home');
         * ```
         *
         * @param {string} name The name of the builder function to decorate.
         * @param {object} func A function that is responsible for decorating the original
         * builder function. The function receives two parameters:
         *
         *   - `{object}` - state - The state config object.
         *   - `{object}` - super - The original builder function.
         *
         * @return {object} $stateProvider - $stateProvider instance
         */
        StateProvider.prototype.decorator = function (name, func) {
            return this.stateRegistry.decorator(name, func) || this;
        };
        StateProvider.prototype.state = function (name, definition) {
            if (isObject(name)) {
                definition = name;
            }
            else {
                definition.name = name;
            }
            this.stateRegistry.register(definition);
            return this;
        };
        /**
         * Registers an invalid state handler
         *
         * This is a passthrough to [[StateService.onInvalid]] for ng1.
         */
        StateProvider.prototype.onInvalid = function (callback) {
            return this.stateService.onInvalid(callback);
        };
        return StateProvider;
    }());

    /** @publicapi @module ng1 */ /** */
    /**
     * This is a [[StateBuilder.builder]] function for angular1 `onEnter`, `onExit`,
     * `onRetain` callback hooks on a [[Ng1StateDeclaration]].
     *
     * When the [[StateBuilder]] builds a [[StateObject]] object from a raw [[StateDeclaration]], this builder
     * ensures that those hooks are injectable for @uirouter/angularjs (ng1).
     *
     * @internalapi
     */
    var getStateHookBuilder = function (hookName) {
        return function stateHookBuilder(stateObject, parentFn) {
            var hook = stateObject[hookName];
            var pathname = hookName === 'onExit' ? 'from' : 'to';
            function decoratedNg1Hook(trans, state) {
                var resolveContext = new ResolveContext(trans.treeChanges(pathname));
                var subContext = resolveContext.subContext(state.$$state());
                var locals = extend(getLocals(subContext), { $state$: state, $transition$: trans });
                return services.$injector.invoke(hook, this, locals);
            }
            return hook ? decoratedNg1Hook : undefined;
        };
    };

    /** @publicapi @module ng1 */ /** */
    /**
     * Implements UI-Router LocationServices and LocationConfig using Angular 1's $location service
     * @internalapi
     */
    var Ng1LocationServices = /** @class */ (function () {
        function Ng1LocationServices($locationProvider) {
            // .onChange() registry
            this._urlListeners = [];
            this.$locationProvider = $locationProvider;
            var _lp = val($locationProvider);
            createProxyFunctions(_lp, this, _lp, ['hashPrefix']);
        }
        /**
         * Applys ng1-specific path parameter encoding
         *
         * The Angular 1 `$location` service is a bit weird.
         * It doesn't allow slashes to be encoded/decoded bi-directionally.
         *
         * See the writeup at https://github.com/angular-ui/ui-router/issues/2598
         *
         * This code patches the `path` parameter type so it encoded/decodes slashes as ~2F
         *
         * @param router
         */
        Ng1LocationServices.monkeyPatchPathParameterType = function (router) {
            var pathType = router.urlMatcherFactory.type('path');
            pathType.encode = function (x) {
                return x != null ? x.toString().replace(/(~|\/)/g, function (m) { return ({ '~': '~~', '/': '~2F' }[m]); }) : x;
            };
            pathType.decode = function (x) {
                return x != null ? x.toString().replace(/(~~|~2F)/g, function (m) { return ({ '~~': '~', '~2F': '/' }[m]); }) : x;
            };
        };
        Ng1LocationServices.prototype.dispose = function () { };
        Ng1LocationServices.prototype.onChange = function (callback) {
            var _this = this;
            this._urlListeners.push(callback);
            return function () { return removeFrom(_this._urlListeners)(callback); };
        };
        Ng1LocationServices.prototype.html5Mode = function () {
            var html5Mode = this.$locationProvider.html5Mode();
            html5Mode = isObject(html5Mode) ? html5Mode.enabled : html5Mode;
            return html5Mode && this.$sniffer.history;
        };
        Ng1LocationServices.prototype.baseHref = function () {
            return this._baseHref || (this._baseHref = this.$browser.baseHref() || this.$window.location.pathname);
        };
        Ng1LocationServices.prototype.url = function (newUrl, replace, state) {
            if (replace === void 0) { replace = false; }
            if (isDefined(newUrl))
                this.$location.url(newUrl);
            if (replace)
                this.$location.replace();
            if (state)
                this.$location.state(state);
            return this.$location.url();
        };
        Ng1LocationServices.prototype._runtimeServices = function ($rootScope, $location, $sniffer, $browser, $window) {
            var _this = this;
            this.$location = $location;
            this.$sniffer = $sniffer;
            this.$browser = $browser;
            this.$window = $window;
            // Bind $locationChangeSuccess to the listeners registered in LocationService.onChange
            $rootScope.$on('$locationChangeSuccess', function (evt) { return _this._urlListeners.forEach(function (fn) { return fn(evt); }); });
            var _loc = val($location);
            // Bind these LocationService functions to $location
            createProxyFunctions(_loc, this, _loc, ['replace', 'path', 'search', 'hash']);
            // Bind these LocationConfig functions to $location
            createProxyFunctions(_loc, this, _loc, ['port', 'protocol', 'host']);
        };
        return Ng1LocationServices;
    }());

    /** @publicapi @module url */ /** */
    /**
     * Manages rules for client-side URL
     *
     * ### Deprecation warning:
     * This class is now considered to be an internal API
     * Use the [[UrlService]] instead.
     * For configuring URL rules, use the [[UrlRulesApi]] which can be found as [[UrlService.rules]].
     *
     * This class manages the router rules for what to do when the URL changes.
     *
     * This provider remains for backwards compatibility.
     *
     * @internalapi
     * @deprecated
     */
    var UrlRouterProvider = /** @class */ (function () {
        /** @hidden */
        function UrlRouterProvider(/** @hidden */ router) {
            this.router = router;
        }
        UrlRouterProvider.injectableHandler = function (router, handler) {
            return function (match) { return services.$injector.invoke(handler, null, { $match: match, $stateParams: router.globals.params }); };
        };
        /** @hidden */
        UrlRouterProvider.prototype.$get = function () {
            var urlService = this.router.urlService;
            this.router.urlRouter.update(true);
            if (!urlService.interceptDeferred)
                urlService.listen();
            return this.router.urlRouter;
        };
        /**
         * Registers a url handler function.
         *
         * Registers a low level url handler (a `rule`).
         * A rule detects specific URL patterns and returns a redirect, or performs some action.
         *
         * If a rule returns a string, the URL is replaced with the string, and all rules are fired again.
         *
         * #### Example:
         * ```js
         * var app = angular.module('app', ['ui.router.router']);
         *
         * app.config(function ($urlRouterProvider) {
         *   // Here's an example of how you might allow case insensitive urls
         *   $urlRouterProvider.rule(function ($injector, $location) {
         *     var path = $location.path(),
         *         normalized = path.toLowerCase();
         *
         *     if (path !== normalized) {
         *       return normalized;
         *     }
         *   });
         * });
         * ```
         *
         * @param ruleFn
         * Handler function that takes `$injector` and `$location` services as arguments.
         * You can use them to detect a url and return a different url as a string.
         *
         * @return [[UrlRouterProvider]] (`this`)
         */
        UrlRouterProvider.prototype.rule = function (ruleFn) {
            var _this = this;
            if (!isFunction(ruleFn))
                throw new Error("'rule' must be a function");
            var match = function () { return ruleFn(services.$injector, _this.router.locationService); };
            var rule = new BaseUrlRule(match, identity);
            this.router.urlService.rules.rule(rule);
            return this;
        };
        /**
         * Defines the path or behavior to use when no url can be matched.
         *
         * #### Example:
         * ```js
         * var app = angular.module('app', ['ui.router.router']);
         *
         * app.config(function ($urlRouterProvider) {
         *   // if the path doesn't match any of the urls you configured
         *   // otherwise will take care of routing the user to the
         *   // specified url
         *   $urlRouterProvider.otherwise('/index');
         *
         *   // Example of using function rule as param
         *   $urlRouterProvider.otherwise(function ($injector, $location) {
         *     return '/a/valid/url';
         *   });
         * });
         * ```
         *
         * @param rule
         * The url path you want to redirect to or a function rule that returns the url path or performs a `$state.go()`.
         * The function version is passed two params: `$injector` and `$location` services, and should return a url string.
         *
         * @return {object} `$urlRouterProvider` - `$urlRouterProvider` instance
         */
        UrlRouterProvider.prototype.otherwise = function (rule) {
            var _this = this;
            var urlRules = this.router.urlService.rules;
            if (isString(rule)) {
                urlRules.otherwise(rule);
            }
            else if (isFunction(rule)) {
                urlRules.otherwise(function () { return rule(services.$injector, _this.router.locationService); });
            }
            else {
                throw new Error("'rule' must be a string or function");
            }
            return this;
        };
        /**
         * Registers a handler for a given url matching.
         *
         * If the handler is a string, it is
         * treated as a redirect, and is interpolated according to the syntax of match
         * (i.e. like `String.replace()` for `RegExp`, or like a `UrlMatcher` pattern otherwise).
         *
         * If the handler is a function, it is injectable.
         * It gets invoked if `$location` matches.
         * You have the option of inject the match object as `$match`.
         *
         * The handler can return
         *
         * - **falsy** to indicate that the rule didn't match after all, then `$urlRouter`
         *   will continue trying to find another one that matches.
         * - **string** which is treated as a redirect and passed to `$location.url()`
         * - **void** or any **truthy** value tells `$urlRouter` that the url was handled.
         *
         * #### Example:
         * ```js
         * var app = angular.module('app', ['ui.router.router']);
         *
         * app.config(function ($urlRouterProvider) {
         *   $urlRouterProvider.when($state.url, function ($match, $stateParams) {
         *     if ($state.$current.navigable !== state ||
         *         !equalForKeys($match, $stateParams) {
         *      $state.transitionTo(state, $match, false);
         *     }
         *   });
         * });
         * ```
         *
         * @param what A pattern string to match, compiled as a [[UrlMatcher]].
         * @param handler The path (or function that returns a path) that you want to redirect your user to.
         * @param ruleCallback [optional] A callback that receives the `rule` registered with [[UrlMatcher.rule]]
         *
         * Note: the handler may also invoke arbitrary code, such as `$state.go()`
         */
        UrlRouterProvider.prototype.when = function (what, handler) {
            if (isArray(handler) || isFunction(handler)) {
                handler = UrlRouterProvider.injectableHandler(this.router, handler);
            }
            this.router.urlService.rules.when(what, handler);
            return this;
        };
        /**
         * Disables monitoring of the URL.
         *
         * Call this method before UI-Router has bootstrapped.
         * It will stop UI-Router from performing the initial url sync.
         *
         * This can be useful to perform some asynchronous initialization before the router starts.
         * Once the initialization is complete, call [[listen]] to tell UI-Router to start watching and synchronizing the URL.
         *
         * #### Example:
         * ```js
         * var app = angular.module('app', ['ui.router']);
         *
         * app.config(function ($urlRouterProvider) {
         *   // Prevent $urlRouter from automatically intercepting URL changes;
         *   $urlRouterProvider.deferIntercept();
         * })
         *
         * app.run(function (MyService, $urlRouter, $http) {
         *   $http.get("/stuff").then(function(resp) {
         *     MyService.doStuff(resp.data);
         *     $urlRouter.listen();
         *     $urlRouter.sync();
         *   });
         * });
         * ```
         *
         * @param defer Indicates whether to defer location change interception.
         *        Passing no parameter is equivalent to `true`.
         */
        UrlRouterProvider.prototype.deferIntercept = function (defer) {
            this.router.urlService.deferIntercept(defer);
        };
        return UrlRouterProvider;
    }());

    /**
     * # Angular 1 types
     *
     * UI-Router core provides various Typescript types which you can use for code completion and validating parameter values, etc.
     * The customizations to the core types for Angular UI-Router are documented here.
     *
     * The optional [[$resolve]] service is also documented here.
     *
     * @preferred @publicapi @module ng1
     */ /** */
    ng.module('ui.router.angular1', []);
    var mod_init = ng.module('ui.router.init', ['ng']);
    var mod_util = ng.module('ui.router.util', ['ui.router.init']);
    var mod_rtr = ng.module('ui.router.router', ['ui.router.util']);
    var mod_state = ng.module('ui.router.state', ['ui.router.router', 'ui.router.util', 'ui.router.angular1']);
    var mod_main = ng.module('ui.router', ['ui.router.init', 'ui.router.state', 'ui.router.angular1']);
    var mod_cmpt = ng.module('ui.router.compat', ['ui.router']); // tslint:disable-line
    var router = null;
    $uiRouterProvider.$inject = ['$locationProvider'];
    /** This angular 1 provider instantiates a Router and exposes its services via the angular injector */
    function $uiRouterProvider($locationProvider) {
        // Create a new instance of the Router when the $uiRouterProvider is initialized
        router = this.router = new UIRouter();
        router.stateProvider = new StateProvider(router.stateRegistry, router.stateService);
        // Apply ng1 specific StateBuilder code for `views`, `resolve`, and `onExit/Retain/Enter` properties
        router.stateRegistry.decorator('views', ng1ViewsBuilder);
        router.stateRegistry.decorator('onExit', getStateHookBuilder('onExit'));
        router.stateRegistry.decorator('onRetain', getStateHookBuilder('onRetain'));
        router.stateRegistry.decorator('onEnter', getStateHookBuilder('onEnter'));
        router.viewService._pluginapi._viewConfigFactory('ng1', getNg1ViewConfigFactory());
        var ng1LocationService = (router.locationService = router.locationConfig = new Ng1LocationServices($locationProvider));
        Ng1LocationServices.monkeyPatchPathParameterType(router);
        // backwards compat: also expose router instance as $uiRouterProvider.router
        router['router'] = router;
        router['$get'] = $get;
        $get.$inject = ['$location', '$browser', '$window', '$sniffer', '$rootScope', '$http', '$templateCache'];
        function $get($location, $browser, $window, $sniffer, $rootScope, $http, $templateCache) {
            ng1LocationService._runtimeServices($rootScope, $location, $sniffer, $browser, $window);
            delete router['router'];
            delete router['$get'];
            return router;
        }
        return router;
    }
    var getProviderFor = function (serviceName) { return [
        '$uiRouterProvider',
        function ($urp) {
            var service = $urp.router[serviceName];
            service['$get'] = function () { return service; };
            return service;
        },
    ]; };
    // This effectively calls $get() on `$uiRouterProvider` to trigger init (when ng enters runtime)
    runBlock.$inject = ['$injector', '$q', '$uiRouter'];
    function runBlock($injector, $q, $uiRouter) {
        services.$injector = $injector;
        services.$q = $q;
        // https://github.com/angular-ui/ui-router/issues/3678
        if (!$injector.hasOwnProperty('strictDi')) {
            try {
                $injector.invoke(function (checkStrictDi) { });
            }
            catch (error) {
                $injector.strictDi = !!/strict mode/.exec(error && error.toString());
            }
        }
        // The $injector is now available.
        // Find any resolvables that had dependency annotation deferred
        $uiRouter.stateRegistry
            .get()
            .map(function (x) { return x.$$state().resolvables; })
            .reduce(unnestR, [])
            .filter(function (x) { return x.deps === 'deferred'; })
            .forEach(function (resolvable) { return (resolvable.deps = $injector.annotate(resolvable.resolveFn, $injector.strictDi)); });
    }
    // $urlRouter service and $urlRouterProvider
    var getUrlRouterProvider = function (uiRouter) { return (uiRouter.urlRouterProvider = new UrlRouterProvider(uiRouter)); };
    // $state service and $stateProvider
    // $urlRouter service and $urlRouterProvider
    var getStateProvider = function () { return extend(router.stateProvider, { $get: function () { return router.stateService; } }); };
    watchDigests.$inject = ['$rootScope'];
    function watchDigests($rootScope) {
        $rootScope.$watch(function () {
            trace.approximateDigests++;
        });
    }
    mod_init.provider('$uiRouter', $uiRouterProvider);
    mod_rtr.provider('$urlRouter', ['$uiRouterProvider', getUrlRouterProvider]);
    mod_util.provider('$urlService', getProviderFor('urlService'));
    mod_util.provider('$urlMatcherFactory', ['$uiRouterProvider', function () { return router.urlMatcherFactory; }]);
    mod_util.provider('$templateFactory', function () { return new TemplateFactory(); });
    mod_state.provider('$stateRegistry', getProviderFor('stateRegistry'));
    mod_state.provider('$uiRouterGlobals', getProviderFor('globals'));
    mod_state.provider('$transitions', getProviderFor('transitionService'));
    mod_state.provider('$state', ['$uiRouterProvider', getStateProvider]);
    mod_state.factory('$stateParams', ['$uiRouter', function ($uiRouter) { return $uiRouter.globals.params; }]);
    mod_main.factory('$view', function () { return router.viewService; });
    mod_main.service('$trace', function () { return trace; });
    mod_main.run(watchDigests);
    mod_util.run(['$urlMatcherFactory', function ($urlMatcherFactory) { }]);
    mod_state.run(['$state', function ($state) { }]);
    mod_rtr.run(['$urlRouter', function ($urlRouter) { }]);
    mod_init.run(runBlock);
    /** @hidden TODO: find a place to move this */
    var getLocals = function (ctx) {
        var tokens = ctx.getTokens().filter(isString);
        var tuples = tokens.map(function (key) {
            var resolvable = ctx.getResolvable(key);
            var waitPolicy = ctx.getPolicy(resolvable).async;
            return [key, waitPolicy === 'NOWAIT' ? resolvable.promise : resolvable.data];
        });
        return tuples.reduce(applyPairs, {});
    };

    /**
     * # Angular 1 Directives
     *
     * These are the directives included in UI-Router for Angular 1.
     * These directives are used in templates to create viewports and link/navigate to states.
     *
     * @preferred @publicapi @module directives
     */ /** */
    /** @hidden */
    function parseStateRef(ref) {
        var parsed;
        var paramsOnly = ref.match(/^\s*({[^}]*})\s*$/);
        if (paramsOnly)
            ref = '(' + paramsOnly[1] + ')';
        parsed = ref.replace(/\n/g, ' ').match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/);
        if (!parsed || parsed.length !== 4)
            throw new Error("Invalid state ref '" + ref + "'");
        return { state: parsed[1] || null, paramExpr: parsed[3] || null };
    }
    /** @hidden */
    function stateContext(el) {
        var $uiView = el.parent().inheritedData('$uiView');
        var path = parse('$cfg.path')($uiView);
        return path ? tail(path).state.name : undefined;
    }
    /** @hidden */
    function processedDef($state, $element, def) {
        var uiState = def.uiState || $state.current.name;
        var uiStateOpts = extend(defaultOpts($element, $state), def.uiStateOpts || {});
        var href = $state.href(uiState, def.uiStateParams, uiStateOpts);
        return { uiState: uiState, uiStateParams: def.uiStateParams, uiStateOpts: uiStateOpts, href: href };
    }
    /** @hidden */
    function getTypeInfo(el) {
        // SVGAElement does not use the href attribute, but rather the 'xlinkHref' attribute.
        var isSvg = Object.prototype.toString.call(el.prop('href')) === '[object SVGAnimatedString]';
        var isForm = el[0].nodeName === 'FORM';
        return {
            attr: isForm ? 'action' : isSvg ? 'xlink:href' : 'href',
            isAnchor: el.prop('tagName').toUpperCase() === 'A',
            clickable: !isForm,
        };
    }
    /** @hidden */
    function clickHook(el, $state, $timeout, type, getDef) {
        return function (e) {
            var button = e.which || e.button, target = getDef();
            if (!(button > 1 || e.ctrlKey || e.metaKey || e.shiftKey || el.attr('target'))) {
                // HACK: This is to allow ng-clicks to be processed before the transition is initiated:
                var transition_1 = $timeout(function () {
                    if (!el.attr('disabled')) {
                        $state.go(target.uiState, target.uiStateParams, target.uiStateOpts);
                    }
                });
                e.preventDefault();
                // if the state has no URL, ignore one preventDefault from the <a> directive.
                var ignorePreventDefaultCount_1 = type.isAnchor && !target.href ? 1 : 0;
                e.preventDefault = function () {
                    if (ignorePreventDefaultCount_1-- <= 0)
                        $timeout.cancel(transition_1);
                };
            }
        };
    }
    /** @hidden */
    function defaultOpts(el, $state) {
        return {
            relative: stateContext(el) || $state.$current,
            inherit: true,
            source: 'sref',
        };
    }
    /** @hidden */
    function bindEvents(element, scope, hookFn, uiStateOpts) {
        var events;
        if (uiStateOpts) {
            events = uiStateOpts.events;
        }
        if (!isArray(events)) {
            events = ['click'];
        }
        var on = element.on ? 'on' : 'bind';
        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {
            var event_1 = events_1[_i];
            element[on](event_1, hookFn);
        }
        scope.$on('$destroy', function () {
            var off = element.off ? 'off' : 'unbind';
            for (var _i = 0, events_2 = events; _i < events_2.length; _i++) {
                var event_2 = events_2[_i];
                element[off](event_2, hookFn);
            }
        });
    }
    /**
     * `ui-sref`: A directive for linking to a state
     *
     * A directive which links to a state (and optionally, parameters).
     * When clicked, this directive activates the linked state with the supplied parameter values.
     *
     * ### Linked State
     * The attribute value of the `ui-sref` is the name of the state to link to.
     *
     * #### Example:
     * This will activate the `home` state when the link is clicked.
     * ```html
     * <a ui-sref="home">Home</a>
     * ```
     *
     * ### Relative Links
     * You can also use relative state paths within `ui-sref`, just like a relative path passed to `$state.go()` ([[StateService.go]]).
     * You just need to be aware that the path is relative to the state that *created* the link.
     * This allows a state to create a relative `ui-sref` which always targets the same destination.
     *
     * #### Example:
     * Both these links are relative to the parent state, even when a child state is currently active.
     * ```html
     * <a ui-sref=".child1">child 1 state</a>
     * <a ui-sref=".child2">child 2 state</a>
     * ```
     *
     * This link activates the parent state.
     * ```html
     * <a ui-sref="^">Return</a>
     * ```
     *
     * ### hrefs
     * If the linked state has a URL, the directive will automatically generate and
     * update the `href` attribute (using the [[StateService.href]]  method).
     *
     * #### Example:
     * Assuming the `users` state has a url of `/users/`
     * ```html
     * <a ui-sref="users" href="/users/">Users</a>
     * ```
     *
     * ### Parameter Values
     * In addition to the state name, a `ui-sref` can include parameter values which are applied when activating the state.
     * Param values can be provided in the `ui-sref` value after the state name, enclosed by parentheses.
     * The content inside the parentheses is an expression, evaluated to the parameter values.
     *
     * #### Example:
     * This example renders a list of links to users.
     * The state's `userId` parameter value comes from each user's `user.id` property.
     * ```html
     * <li ng-repeat="user in users">
     *   <a ui-sref="users.detail({ userId: user.id })">{{ user.displayName }}</a>
     * </li>
     * ```
     *
     * Note:
     * The parameter values expression is `$watch`ed for updates.
     *
     * ### Transition Options
     * You can specify [[TransitionOptions]] to pass to [[StateService.go]] by using the `ui-sref-opts` attribute.
     * Options are restricted to `location`, `inherit`, and `reload`.
     *
     * #### Example:
     * ```html
     * <a ui-sref="home" ui-sref-opts="{ reload: true }">Home</a>
     * ```
     *
     * ### Other DOM Events
     *
     * You can also customize which DOM events to respond to (instead of `click`) by
     * providing an `events` array in the `ui-sref-opts` attribute.
     *
     * #### Example:
     * ```html
     * <input type="text" ui-sref="contacts" ui-sref-opts="{ events: ['change', 'blur'] }">
     * ```
     *
     * ### Highlighting the active link
     * This directive can be used in conjunction with [[uiSrefActive]] to highlight the active link.
     *
     * ### Examples
     * If you have the following template:
     *
     * ```html
     * <a ui-sref="home">Home</a>
     * <a ui-sref="about">About</a>
     * <a ui-sref="{page: 2}">Next page</a>
     *
     * <ul>
     *     <li ng-repeat="contact in contacts">
     *         <a ui-sref="contacts.detail({ id: contact.id })">{{ contact.name }}</a>
     *     </li>
     * </ul>
     * ```
     *
     * Then (assuming the current state is `contacts`) the rendered html including hrefs would be:
     *
     * ```html
     * <a href="#/home" ui-sref="home">Home</a>
     * <a href="#/about" ui-sref="about">About</a>
     * <a href="#/contacts?page=2" ui-sref="{page: 2}">Next page</a>
     *
     * <ul>
     *     <li ng-repeat="contact in contacts">
     *         <a href="#/contacts/1" ui-sref="contacts.detail({ id: contact.id })">Joe</a>
     *     </li>
     *     <li ng-repeat="contact in contacts">
     *         <a href="#/contacts/2" ui-sref="contacts.detail({ id: contact.id })">Alice</a>
     *     </li>
     *     <li ng-repeat="contact in contacts">
     *         <a href="#/contacts/3" ui-sref="contacts.detail({ id: contact.id })">Bob</a>
     *     </li>
     * </ul>
     *
     * <a href="#/home" ui-sref="home" ui-sref-opts="{reload: true}">Home</a>
     * ```
     *
     * ### Notes
     *
     * - You can use `ui-sref` to change **only the parameter values** by omitting the state name and parentheses.
     * #### Example:
     * Sets the `lang` parameter to `en` and remains on the same state.
     *
     * ```html
     * <a ui-sref="{ lang: 'en' }">English</a>
     * ```
     *
     * - A middle-click, right-click, or ctrl-click is handled (natively) by the browser to open the href in a new window, for example.
     *
     * - Unlike the parameter values expression, the state name is not `$watch`ed (for performance reasons).
     * If you need to dynamically update the state being linked to, use the fully dynamic [[uiState]] directive.
     */
    var uiSrefDirective;
    uiSrefDirective = [
        '$uiRouter',
        '$timeout',
        function $StateRefDirective($uiRouter, $timeout) {
            var $state = $uiRouter.stateService;
            return {
                restrict: 'A',
                require: ['?^uiSrefActive', '?^uiSrefActiveEq'],
                link: function (scope, element, attrs, uiSrefActive) {
                    var type = getTypeInfo(element);
                    var active = uiSrefActive[1] || uiSrefActive[0];
                    var unlinkInfoFn = null;
                    var hookFn;
                    var rawDef = {};
                    var getDef = function () { return processedDef($state, element, rawDef); };
                    var ref = parseStateRef(attrs.uiSref);
                    rawDef.uiState = ref.state;
                    rawDef.uiStateOpts = attrs.uiSrefOpts ? scope.$eval(attrs.uiSrefOpts) : {};
                    function update() {
                        var def = getDef();
                        if (unlinkInfoFn)
                            unlinkInfoFn();
                        if (active)
                            unlinkInfoFn = active.$$addStateInfo(def.uiState, def.uiStateParams);
                        if (def.href != null)
                            attrs.$set(type.attr, def.href);
                    }
                    if (ref.paramExpr) {
                        scope.$watch(ref.paramExpr, function (val) {
                            rawDef.uiStateParams = extend({}, val);
                            update();
                        }, true);
                        rawDef.uiStateParams = extend({}, scope.$eval(ref.paramExpr));
                    }
                    update();
                    scope.$on('$destroy', $uiRouter.stateRegistry.onStatesChanged(update));
                    scope.$on('$destroy', $uiRouter.transitionService.onSuccess({}, update));
                    if (!type.clickable)
                        return;
                    hookFn = clickHook(element, $state, $timeout, type, getDef);
                    bindEvents(element, scope, hookFn, rawDef.uiStateOpts);
                },
            };
        },
    ];
    /**
     * `ui-state`: A fully dynamic directive for linking to a state
     *
     * A directive which links to a state (and optionally, parameters).
     * When clicked, this directive activates the linked state with the supplied parameter values.
     *
     * **This directive is very similar to [[uiSref]], but it `$observe`s and `$watch`es/evaluates all its inputs.**
     *
     * A directive which links to a state (and optionally, parameters).
     * When clicked, this directive activates the linked state with the supplied parameter values.
     *
     * ### Linked State
     * The attribute value of `ui-state` is an expression which is `$watch`ed and evaluated as the state to link to.
     * **This is in contrast with `ui-sref`, which takes a state name as a string literal.**
     *
     * #### Example:
     * Create a list of links.
     * ```html
     * <li ng-repeat="link in navlinks">
     *   <a ui-state="link.state">{{ link.displayName }}</a>
     * </li>
     * ```
     *
     * ### Relative Links
     * If the expression evaluates to a relative path, it is processed like [[uiSref]].
     * You just need to be aware that the path is relative to the state that *created* the link.
     * This allows a state to create relative `ui-state` which always targets the same destination.
     *
     * ### hrefs
     * If the linked state has a URL, the directive will automatically generate and
     * update the `href` attribute (using the [[StateService.href]]  method).
     *
     * ### Parameter Values
     * In addition to the state name expression, a `ui-state` can include parameter values which are applied when activating the state.
     * Param values should be provided using the `ui-state-params` attribute.
     * The `ui-state-params` attribute value is `$watch`ed and evaluated as an expression.
     *
     * #### Example:
     * This example renders a list of links with param values.
     * The state's `userId` parameter value comes from each user's `user.id` property.
     * ```html
     * <li ng-repeat="link in navlinks">
     *   <a ui-state="link.state" ui-state-params="link.params">{{ link.displayName }}</a>
     * </li>
     * ```
     *
     * ### Transition Options
     * You can specify [[TransitionOptions]] to pass to [[StateService.go]] by using the `ui-state-opts` attribute.
     * Options are restricted to `location`, `inherit`, and `reload`.
     * The value of the `ui-state-opts` is `$watch`ed and evaluated as an expression.
     *
     * #### Example:
     * ```html
     * <a ui-state="returnto.state" ui-state-opts="{ reload: true }">Home</a>
     * ```
     *
     * ### Other DOM Events
     *
     * You can also customize which DOM events to respond to (instead of `click`) by
     * providing an `events` array in the `ui-state-opts` attribute.
     *
     * #### Example:
     * ```html
     * <input type="text" ui-state="contacts" ui-state-opts="{ events: ['change', 'blur'] }">
     * ```
     *
     * ### Highlighting the active link
     * This directive can be used in conjunction with [[uiSrefActive]] to highlight the active link.
     *
     * ### Notes
     *
     * - You can use `ui-params` to change **only the parameter values** by omitting the state name and supplying only `ui-state-params`.
     *   However, it might be simpler to use [[uiSref]] parameter-only links.
     *
     * #### Example:
     * Sets the `lang` parameter to `en` and remains on the same state.
     *
     * ```html
     * <a ui-state="" ui-state-params="{ lang: 'en' }">English</a>
     * ```
     *
     * - A middle-click, right-click, or ctrl-click is handled (natively) by the browser to open the href in a new window, for example.
     * ```
     */
    var uiStateDirective;
    uiStateDirective = [
        '$uiRouter',
        '$timeout',
        function $StateRefDynamicDirective($uiRouter, $timeout) {
            var $state = $uiRouter.stateService;
            return {
                restrict: 'A',
                require: ['?^uiSrefActive', '?^uiSrefActiveEq'],
                link: function (scope, element, attrs, uiSrefActive) {
                    var type = getTypeInfo(element);
                    var active = uiSrefActive[1] || uiSrefActive[0];
                    var unlinkInfoFn = null;
                    var hookFn;
                    var rawDef = {};
                    var getDef = function () { return processedDef($state, element, rawDef); };
                    var inputAttrs = ['uiState', 'uiStateParams', 'uiStateOpts'];
                    var watchDeregFns = inputAttrs.reduce(function (acc, attr) { return ((acc[attr] = noop), acc); }, {});
                    function update() {
                        var def = getDef();
                        if (unlinkInfoFn)
                            unlinkInfoFn();
                        if (active)
                            unlinkInfoFn = active.$$addStateInfo(def.uiState, def.uiStateParams);
                        if (def.href != null)
                            attrs.$set(type.attr, def.href);
                    }
                    inputAttrs.forEach(function (field) {
                        rawDef[field] = attrs[field] ? scope.$eval(attrs[field]) : null;
                        attrs.$observe(field, function (expr) {
                            watchDeregFns[field]();
                            watchDeregFns[field] = scope.$watch(expr, function (newval) {
                                rawDef[field] = newval;
                                update();
                            }, true);
                        });
                    });
                    update();
                    scope.$on('$destroy', $uiRouter.stateRegistry.onStatesChanged(update));
                    scope.$on('$destroy', $uiRouter.transitionService.onSuccess({}, update));
                    if (!type.clickable)
                        return;
                    hookFn = clickHook(element, $state, $timeout, type, getDef);
                    bindEvents(element, scope, hookFn, rawDef.uiStateOpts);
                },
            };
        },
    ];
    /**
     * `ui-sref-active` and `ui-sref-active-eq`: A directive that adds a CSS class when a `ui-sref` is active
     *
     * A directive working alongside [[uiSref]] and [[uiState]] to add classes to an element when the
     * related directive's state is active (and remove them when it is inactive).
     *
     * The primary use-case is to highlight the active link in navigation menus,
     * distinguishing it from the inactive menu items.
     *
     * ### Linking to a `ui-sref` or `ui-state`
     * `ui-sref-active` can live on the same element as `ui-sref`/`ui-state`, or it can be on a parent element.
     * If a `ui-sref-active` is a parent to more than one `ui-sref`/`ui-state`, it will apply the CSS class when **any of the links are active**.
     *
     * ### Matching
     *
     * The `ui-sref-active` directive applies the CSS class when the `ui-sref`/`ui-state`'s target state **or any child state is active**.
     * This is a "fuzzy match" which uses [[StateService.includes]].
     *
     * The `ui-sref-active-eq` directive applies the CSS class when the `ui-sref`/`ui-state`'s target state is directly active (not when child states are active).
     * This is an "exact match" which uses [[StateService.is]].
     *
     * ### Parameter values
     * If the `ui-sref`/`ui-state` includes parameter values, the current parameter values must match the link's values for the link to be highlighted.
     * This allows a list of links to the same state with different parameters to be rendered, and the correct one highlighted.
     *
     * #### Example:
     * ```html
     * <li ng-repeat="user in users" ui-sref-active="active">
     *   <a ui-sref="user.details({ userId: user.id })">{{ user.lastName }}</a>
     * </li>
     * ```
     *
     * ### Examples
     *
     * Given the following template:
     * #### Example:
     * ```html
     * <ul>
     *   <li ui-sref-active="active" class="item">
     *     <a href ui-sref="app.user({user: 'bilbobaggins'})">@bilbobaggins</a>
     *   </li>
     * </ul>
     * ```
     *
     * When the app state is `app.user` (or any child state),
     * and contains the state parameter "user" with value "bilbobaggins",
     * the resulting HTML will appear as (note the 'active' class):
     *
     * ```html
     * <ul>
     *   <li ui-sref-active="active" class="item active">
     *     <a ui-sref="app.user({user: 'bilbobaggins'})" href="/users/bilbobaggins">@bilbobaggins</a>
     *   </li>
     * </ul>
     * ```
     *
     * ### Glob mode
     *
     * It is possible to pass `ui-sref-active` an expression that evaluates to an object.
     * The objects keys represent active class names and values represent the respective state names/globs.
     * `ui-sref-active` will match if the current active state **includes** any of
     * the specified state names/globs, even the abstract ones.
     *
     * #### Example:
     * Given the following template, with "admin" being an abstract state:
     * ```html
     * <div ui-sref-active="{'active': 'admin.**'}">
     *   <a ui-sref-active="active" ui-sref="admin.roles">Roles</a>
     * </div>
     * ```
     *
     * Arrays are also supported as values in the `ngClass`-like interface.
     * This allows multiple states to add `active` class.
     *
     * #### Example:
     * Given the following template, with "admin.roles" being the current state, the class will be added too:
     * ```html
     * <div ui-sref-active="{'active': ['owner.**', 'admin.**']}">
     *   <a ui-sref-active="active" ui-sref="admin.roles">Roles</a>
     * </div>
     * ```
     *
     * When the current state is "admin.roles" the "active" class will be applied to both the `<div>` and `<a>` elements.
     * It is important to note that the state names/globs passed to `ui-sref-active` override any state provided by a linked `ui-sref`.
     *
     * ### Notes:
     *
     * - The class name is interpolated **once** during the directives link time (any further changes to the
     * interpolated value are ignored).
     *
     * - Multiple classes may be specified in a space-separated format: `ui-sref-active='class1 class2 class3'`
     */
    var uiSrefActiveDirective;
    uiSrefActiveDirective = [
        '$state',
        '$stateParams',
        '$interpolate',
        '$uiRouter',
        function $StateRefActiveDirective($state, $stateParams, $interpolate, $uiRouter) {
            return {
                restrict: 'A',
                controller: [
                    '$scope',
                    '$element',
                    '$attrs',
                    function ($scope, $element, $attrs) {
                        var states = [];
                        var activeEqClass;
                        var uiSrefActive;
                        // There probably isn't much point in $observing this
                        // uiSrefActive and uiSrefActiveEq share the same directive object with some
                        // slight difference in logic routing
                        activeEqClass = $interpolate($attrs.uiSrefActiveEq || '', false)($scope);
                        try {
                            uiSrefActive = $scope.$eval($attrs.uiSrefActive);
                        }
                        catch (e) {
                            // Do nothing. uiSrefActive is not a valid expression.
                            // Fall back to using $interpolate below
                        }
                        uiSrefActive = uiSrefActive || $interpolate($attrs.uiSrefActive || '', false)($scope);
                        setStatesFromDefinitionObject(uiSrefActive);
                        // Allow uiSref to communicate with uiSrefActive[Equals]
                        this.$$addStateInfo = function (newState, newParams) {
                            // we already got an explicit state provided by ui-sref-active, so we
                            // shadow the one that comes from ui-sref
                            if (isObject(uiSrefActive) && states.length > 0) {
                                return;
                            }
                            var deregister = addState(newState, newParams, uiSrefActive);
                            update();
                            return deregister;
                        };
                        function updateAfterTransition(trans) {
                            trans.promise.then(update, noop);
                        }
                        $scope.$on('$destroy', setupEventListeners());
                        if ($uiRouter.globals.transition) {
                            updateAfterTransition($uiRouter.globals.transition);
                        }
                        function setupEventListeners() {
                            var deregisterStatesChangedListener = $uiRouter.stateRegistry.onStatesChanged(handleStatesChanged);
                            var deregisterOnStartListener = $uiRouter.transitionService.onStart({}, updateAfterTransition);
                            var deregisterStateChangeSuccessListener = $scope.$on('$stateChangeSuccess', update);
                            return function cleanUp() {
                                deregisterStatesChangedListener();
                                deregisterOnStartListener();
                                deregisterStateChangeSuccessListener();
                            };
                        }
                        function handleStatesChanged() {
                            setStatesFromDefinitionObject(uiSrefActive);
                        }
                        function setStatesFromDefinitionObject(statesDefinition) {
                            if (isObject(statesDefinition)) {
                                states = [];
                                forEach(statesDefinition, function (stateOrName, activeClass) {
                                    // Helper function to abstract adding state.
                                    var addStateForClass = function (stateOrName, activeClass) {
                                        var ref = parseStateRef(stateOrName);
                                        addState(ref.state, $scope.$eval(ref.paramExpr), activeClass);
                                    };
                                    if (isString(stateOrName)) {
                                        // If state is string, just add it.
                                        addStateForClass(stateOrName, activeClass);
                                    }
                                    else if (isArray(stateOrName)) {
                                        // If state is an array, iterate over it and add each array item individually.
                                        forEach(stateOrName, function (stateOrName) {
                                            addStateForClass(stateOrName, activeClass);
                                        });
                                    }
                                });
                            }
                        }
                        function addState(stateName, stateParams, activeClass) {
                            var state = $state.get(stateName, stateContext($element));
                            var stateInfo = {
                                state: state || { name: stateName },
                                params: stateParams,
                                activeClass: activeClass,
                            };
                            states.push(stateInfo);
                            return function removeState() {
                                removeFrom(states)(stateInfo);
                            };
                        }
                        // Update route state
                        function update() {
                            var splitClasses = function (str) { return str.split(/\s/).filter(identity); };
                            var getClasses = function (stateList) {
                                return stateList
                                    .map(function (x) { return x.activeClass; })
                                    .map(splitClasses)
                                    .reduce(unnestR, []);
                            };
                            var allClasses = getClasses(states)
                                .concat(splitClasses(activeEqClass))
                                .reduce(uniqR, []);
                            var fuzzyClasses = getClasses(states.filter(function (x) { return $state.includes(x.state.name, x.params); }));
                            var exactlyMatchesAny = !!states.filter(function (x) { return $state.is(x.state.name, x.params); }).length;
                            var exactClasses = exactlyMatchesAny ? splitClasses(activeEqClass) : [];
                            var addClasses = fuzzyClasses.concat(exactClasses).reduce(uniqR, []);
                            var removeClasses = allClasses.filter(function (cls) { return !inArray(addClasses, cls); });
                            $scope.$evalAsync(function () {
                                addClasses.forEach(function (className) { return $element.addClass(className); });
                                removeClasses.forEach(function (className) { return $element.removeClass(className); });
                            });
                        }
                        update();
                    },
                ],
            };
        },
    ];
    ng
        .module('ui.router.state')
        .directive('uiSref', uiSrefDirective)
        .directive('uiSrefActive', uiSrefActiveDirective)
        .directive('uiSrefActiveEq', uiSrefActiveDirective)
        .directive('uiState', uiStateDirective);

    /** @publicapi @module ng1 */ /** */
    /**
     * `isState` Filter: truthy if the current state is the parameter
     *
     * Translates to [[StateService.is]] `$state.is("stateName")`.
     *
     * #### Example:
     * ```html
     * <div ng-if="'stateName' | isState">show if state is 'stateName'</div>
     * ```
     */
    $IsStateFilter.$inject = ['$state'];
    function $IsStateFilter($state) {
        var isFilter = function (state, params, options) {
            return $state.is(state, params, options);
        };
        isFilter.$stateful = true;
        return isFilter;
    }
    /**
     * `includedByState` Filter: truthy if the current state includes the parameter
     *
     * Translates to [[StateService.includes]]` $state.is("fullOrPartialStateName")`.
     *
     * #### Example:
     * ```html
     * <div ng-if="'fullOrPartialStateName' | includedByState">show if state includes 'fullOrPartialStateName'</div>
     * ```
     */
    $IncludedByStateFilter.$inject = ['$state'];
    function $IncludedByStateFilter($state) {
        var includesFilter = function (state, params, options) {
            return $state.includes(state, params, options);
        };
        includesFilter.$stateful = true;
        return includesFilter;
    }
    ng
        .module('ui.router.state')
        .filter('isState', $IsStateFilter)
        .filter('includedByState', $IncludedByStateFilter);

    /** @publicapi @module directives */ /** */
    /**
     * `ui-view`: A viewport directive which is filled in by a view from the active state.
     *
     * ### Attributes
     *
     * - `name`: (Optional) A view name.
     *   The name should be unique amongst the other views in the same state.
     *   You can have views of the same name that live in different states.
     *   The ui-view can be targeted in a View using the name ([[Ng1StateDeclaration.views]]).
     *
     * - `autoscroll`: an expression. When it evaluates to true, the `ui-view` will be scrolled into view when it is activated.
     *   Uses [[$uiViewScroll]] to do the scrolling.
     *
     * - `onload`: Expression to evaluate whenever the view updates.
     *
     * #### Example:
     * A view can be unnamed or named.
     * ```html
     * <!-- Unnamed -->
     * <div ui-view></div>
     *
     * <!-- Named -->
     * <div ui-view="viewName"></div>
     *
     * <!-- Named (different style) -->
     * <ui-view name="viewName"></ui-view>
     * ```
     *
     * You can only have one unnamed view within any template (or root html). If you are only using a
     * single view and it is unnamed then you can populate it like so:
     *
     * ```html
     * <div ui-view></div>
     * $stateProvider.state("home", {
     *   template: "<h1>HELLO!</h1>"
     * })
     * ```
     *
     * The above is a convenient shortcut equivalent to specifying your view explicitly with the
     * [[Ng1StateDeclaration.views]] config property, by name, in this case an empty name:
     *
     * ```js
     * $stateProvider.state("home", {
     *   views: {
     *     "": {
     *       template: "<h1>HELLO!</h1>"
     *     }
     *   }
     * })
     * ```
     *
     * But typically you'll only use the views property if you name your view or have more than one view
     * in the same template. There's not really a compelling reason to name a view if its the only one,
     * but you could if you wanted, like so:
     *
     * ```html
     * <div ui-view="main"></div>
     * ```
     *
     * ```js
     * $stateProvider.state("home", {
     *   views: {
     *     "main": {
     *       template: "<h1>HELLO!</h1>"
     *     }
     *   }
     * })
     * ```
     *
     * Really though, you'll use views to set up multiple views:
     *
     * ```html
     * <div ui-view></div>
     * <div ui-view="chart"></div>
     * <div ui-view="data"></div>
     * ```
     *
     * ```js
     * $stateProvider.state("home", {
     *   views: {
     *     "": {
     *       template: "<h1>HELLO!</h1>"
     *     },
     *     "chart": {
     *       template: "<chart_thing/>"
     *     },
     *     "data": {
     *       template: "<data_thing/>"
     *     }
     *   }
     * })
     * ```
     *
     * #### Examples for `autoscroll`:
     * ```html
     * <!-- If autoscroll present with no expression,
     *      then scroll ui-view into view -->
     * <ui-view autoscroll/>
     *
     * <!-- If autoscroll present with valid expression,
     *      then scroll ui-view into view if expression evaluates to true -->
     * <ui-view autoscroll='true'/>
     * <ui-view autoscroll='false'/>
     * <ui-view autoscroll='scopeVariable'/>
     * ```
     *
     * Resolve data:
     *
     * The resolved data from the state's `resolve` block is placed on the scope as `$resolve` (this
     * can be customized using [[Ng1ViewDeclaration.resolveAs]]).  This can be then accessed from the template.
     *
     * Note that when `controllerAs` is being used, `$resolve` is set on the controller instance *after* the
     * controller is instantiated.  The `$onInit()` hook can be used to perform initialization code which
     * depends on `$resolve` data.
     *
     * #### Example:
     * ```js
     * $stateProvider.state('home', {
     *   template: '<my-component user="$resolve.user"></my-component>',
     *   resolve: {
     *     user: function(UserService) { return UserService.fetchUser(); }
     *   }
     * });
     * ```
     */
    var uiView;
    uiView = [
        '$view',
        '$animate',
        '$uiViewScroll',
        '$interpolate',
        '$q',
        function $ViewDirective($view, $animate, $uiViewScroll, $interpolate, $q) {
            function getRenderer(attrs, scope) {
                return {
                    enter: function (element, target, cb) {
                        if (ng.version.minor > 2) {
                            $animate.enter(element, null, target).then(cb);
                        }
                        else {
                            $animate.enter(element, null, target, cb);
                        }
                    },
                    leave: function (element, cb) {
                        if (ng.version.minor > 2) {
                            $animate.leave(element).then(cb);
                        }
                        else {
                            $animate.leave(element, cb);
                        }
                    },
                };
            }
            function configsEqual(config1, config2) {
                return config1 === config2;
            }
            var rootData = {
                $cfg: { viewDecl: { $context: $view._pluginapi._rootViewContext() } },
                $uiView: {},
            };
            var directive = {
                count: 0,
                restrict: 'ECA',
                terminal: true,
                priority: 400,
                transclude: 'element',
                compile: function (tElement, tAttrs, $transclude) {
                    return function (scope, $element, attrs) {
                        var onloadExp = attrs['onload'] || '', autoScrollExp = attrs['autoscroll'], renderer = getRenderer(), inherited = $element.inheritedData('$uiView') || rootData, name = $interpolate(attrs['uiView'] || attrs['name'] || '')(scope) || '$default';
                        var previousEl, currentEl, currentScope, viewConfig, unregister;
                        var activeUIView = {
                            $type: 'ng1',
                            id: directive.count++,
                            name: name,
                            fqn: inherited.$uiView.fqn ? inherited.$uiView.fqn + '.' + name : name,
                            config: null,
                            configUpdated: configUpdatedCallback,
                            get creationContext() {
                                // The context in which this ui-view "tag" was created
                                var fromParentTagConfig = parse('$cfg.viewDecl.$context')(inherited);
                                // Allow <ui-view name="foo"><ui-view name="bar"></ui-view></ui-view>
                                // See https://github.com/angular-ui/ui-router/issues/3355
                                var fromParentTag = parse('$uiView.creationContext')(inherited);
                                return fromParentTagConfig || fromParentTag;
                            },
                        };
                        trace.traceUIViewEvent('Linking', activeUIView);
                        function configUpdatedCallback(config) {
                            if (config && !(config instanceof Ng1ViewConfig))
                                return;
                            if (configsEqual(viewConfig, config))
                                return;
                            trace.traceUIViewConfigUpdated(activeUIView, config && config.viewDecl && config.viewDecl.$context);
                            viewConfig = config;
                            updateView(config);
                        }
                        $element.data('$uiView', { $uiView: activeUIView });
                        updateView();
                        unregister = $view.registerUIView(activeUIView);
                        scope.$on('$destroy', function () {
                            trace.traceUIViewEvent('Destroying/Unregistering', activeUIView);
                            unregister();
                        });
                        function cleanupLastView() {
                            if (previousEl) {
                                trace.traceUIViewEvent('Removing (previous) el', previousEl.data('$uiView'));
                                previousEl.remove();
                                previousEl = null;
                            }
                            if (currentScope) {
                                trace.traceUIViewEvent('Destroying scope', activeUIView);
                                currentScope.$destroy();
                                currentScope = null;
                            }
                            if (currentEl) {
                                var _viewData_1 = currentEl.data('$uiViewAnim');
                                trace.traceUIViewEvent('Animate out', _viewData_1);
                                renderer.leave(currentEl, function () {
                                    _viewData_1.$$animLeave.resolve();
                                    previousEl = null;
                                });
                                previousEl = currentEl;
                                currentEl = null;
                            }
                        }
                        function updateView(config) {
                            var newScope = scope.$new();
                            var animEnter = $q.defer(), animLeave = $q.defer();
                            var $uiViewData = {
                                $cfg: config,
                                $uiView: activeUIView,
                            };
                            var $uiViewAnim = {
                                $animEnter: animEnter.promise,
                                $animLeave: animLeave.promise,
                                $$animLeave: animLeave,
                            };
                            /**
                             * @ngdoc event
                             * @name ui.router.state.directive:ui-view#$viewContentLoading
                             * @eventOf ui.router.state.directive:ui-view
                             * @eventType emits on ui-view directive scope
                             * @description
                             *
                             * Fired once the view **begins loading**, *before* the DOM is rendered.
                             *
                             * @param {Object} event Event object.
                             * @param {string} viewName Name of the view.
                             */
                            newScope.$emit('$viewContentLoading', name);
                            var cloned = $transclude(newScope, function (clone) {
                                clone.data('$uiViewAnim', $uiViewAnim);
                                clone.data('$uiView', $uiViewData);
                                renderer.enter(clone, $element, function onUIViewEnter() {
                                    animEnter.resolve();
                                    if (currentScope)
                                        currentScope.$emit('$viewContentAnimationEnded');
                                    if ((isDefined(autoScrollExp) && !autoScrollExp) || scope.$eval(autoScrollExp)) {
                                        $uiViewScroll(clone);
                                    }
                                });
                                cleanupLastView();
                            });
                            currentEl = cloned;
                            currentScope = newScope;
                            /**
                             * @ngdoc event
                             * @name ui.router.state.directive:ui-view#$viewContentLoaded
                             * @eventOf ui.router.state.directive:ui-view
                             * @eventType emits on ui-view directive scope
                             * @description           *
                             * Fired once the view is **loaded**, *after* the DOM is rendered.
                             *
                             * @param {Object} event Event object.
                             */
                            currentScope.$emit('$viewContentLoaded', config || viewConfig);
                            currentScope.$eval(onloadExp);
                        }
                    };
                },
            };
            return directive;
        },
    ];
    $ViewDirectiveFill.$inject = ['$compile', '$controller', '$transitions', '$view', '$q', '$timeout'];
    /** @hidden */
    function $ViewDirectiveFill($compile, $controller, $transitions, $view, $q, $timeout) {
        var getControllerAs = parse('viewDecl.controllerAs');
        var getResolveAs = parse('viewDecl.resolveAs');
        return {
            restrict: 'ECA',
            priority: -400,
            compile: function (tElement) {
                var initial = tElement.html();
                tElement.empty();
                return function (scope, $element) {
                    var data = $element.data('$uiView');
                    if (!data) {
                        $element.html(initial);
                        $compile($element.contents())(scope);
                        return;
                    }
                    var cfg = data.$cfg || { viewDecl: {}, getTemplate: noop };
                    var resolveCtx = cfg.path && new ResolveContext(cfg.path);
                    $element.html(cfg.getTemplate($element, resolveCtx) || initial);
                    trace.traceUIViewFill(data.$uiView, $element.html());
                    var link = $compile($element.contents());
                    var controller = cfg.controller;
                    var controllerAs = getControllerAs(cfg);
                    var resolveAs = getResolveAs(cfg);
                    var locals = resolveCtx && getLocals(resolveCtx);
                    scope[resolveAs] = locals;
                    if (controller) {
                        var controllerInstance = ($controller(controller, extend({}, locals, { $scope: scope, $element: $element })));
                        if (controllerAs) {
                            scope[controllerAs] = controllerInstance;
                            scope[controllerAs][resolveAs] = locals;
                        }
                        // TODO: Use $view service as a central point for registering component-level hooks
                        // Then, when a component is created, tell the $view service, so it can invoke hooks
                        // $view.componentLoaded(controllerInstance, { $scope: scope, $element: $element });
                        // scope.$on('$destroy', () => $view.componentUnloaded(controllerInstance, { $scope: scope, $element: $element }));
                        $element.data('$ngControllerController', controllerInstance);
                        $element.children().data('$ngControllerController', controllerInstance);
                        registerControllerCallbacks($q, $transitions, controllerInstance, scope, cfg);
                    }
                    // Wait for the component to appear in the DOM
                    if (isString(cfg.component)) {
                        var kebobName = kebobString(cfg.component);
                        var tagRegexp_1 = new RegExp("^(x-|data-)?" + kebobName + "$", 'i');
                        var getComponentController = function () {
                            var directiveEl = [].slice
                                .call($element[0].children)
                                .filter(function (el) { return el && el.tagName && tagRegexp_1.exec(el.tagName); });
                            return directiveEl && ng.element(directiveEl).data("$" + cfg.component + "Controller");
                        };
                        var deregisterWatch_1 = scope.$watch(getComponentController, function (ctrlInstance) {
                            if (!ctrlInstance)
                                return;
                            registerControllerCallbacks($q, $transitions, ctrlInstance, scope, cfg);
                            deregisterWatch_1();
                        });
                    }
                    link(scope);
                };
            },
        };
    }
    /** @hidden */
    var hasComponentImpl = typeof ng.module('ui.router')['component'] === 'function';
    /** @hidden incrementing id */
    var _uiCanExitId = 0;
    /** @hidden TODO: move these callbacks to $view and/or `/hooks/components.ts` or something */
    function registerControllerCallbacks($q, $transitions, controllerInstance, $scope, cfg) {
        // Call $onInit() ASAP
        if (isFunction(controllerInstance.$onInit) && !((cfg.viewDecl.component || cfg.viewDecl.componentProvider) && hasComponentImpl)) {
            controllerInstance.$onInit();
        }
        var viewState = tail(cfg.path).state.self;
        var hookOptions = { bind: controllerInstance };
        // Add component-level hook for onUiParamsChanged
        if (isFunction(controllerInstance.uiOnParamsChanged)) {
            var resolveContext = new ResolveContext(cfg.path);
            var viewCreationTrans_1 = resolveContext.getResolvable('$transition$').data;
            // Fire callback on any successful transition
            var paramsUpdated = function ($transition$) {
                // Exit early if the $transition$ is the same as the view was created within.
                // Exit early if the $transition$ will exit the state the view is for.
                if ($transition$ === viewCreationTrans_1 || $transition$.exiting().indexOf(viewState) !== -1)
                    return;
                var toParams = $transition$.params('to');
                var fromParams = $transition$.params('from');
                var getNodeSchema = function (node) { return node.paramSchema; };
                var toSchema = $transition$
                    .treeChanges('to')
                    .map(getNodeSchema)
                    .reduce(unnestR, []);
                var fromSchema = $transition$
                    .treeChanges('from')
                    .map(getNodeSchema)
                    .reduce(unnestR, []);
                // Find the to params that have different values than the from params
                var changedToParams = toSchema.filter(function (param) {
                    var idx = fromSchema.indexOf(param);
                    return idx === -1 || !fromSchema[idx].type.equals(toParams[param.id], fromParams[param.id]);
                });
                // Only trigger callback if a to param has changed or is new
                if (changedToParams.length) {
                    var changedKeys_1 = changedToParams.map(function (x) { return x.id; });
                    // Filter the params to only changed/new to params.  `$transition$.params()` may be used to get all params.
                    var newValues = filter(toParams, function (val, key) { return changedKeys_1.indexOf(key) !== -1; });
                    controllerInstance.uiOnParamsChanged(newValues, $transition$);
                }
            };
            $scope.$on('$destroy', $transitions.onSuccess({}, paramsUpdated, hookOptions));
        }
        // Add component-level hook for uiCanExit
        if (isFunction(controllerInstance.uiCanExit)) {
            var id_1 = _uiCanExitId++;
            var cacheProp_1 = '_uiCanExitIds';
            // Returns true if a redirect transition already answered truthy
            var prevTruthyAnswer_1 = function (trans) {
                return !!trans && ((trans[cacheProp_1] && trans[cacheProp_1][id_1] === true) || prevTruthyAnswer_1(trans.redirectedFrom()));
            };
            // If a user answered yes, but the transition was later redirected, don't also ask for the new redirect transition
            var wrappedHook = function (trans) {
                var promise;
                var ids = (trans[cacheProp_1] = trans[cacheProp_1] || {});
                if (!prevTruthyAnswer_1(trans)) {
                    promise = $q.when(controllerInstance.uiCanExit(trans));
                    promise.then(function (val) { return (ids[id_1] = val !== false); });
                }
                return promise;
            };
            var criteria = { exiting: viewState.name };
            $scope.$on('$destroy', $transitions.onBefore(criteria, wrappedHook, hookOptions));
        }
    }
    ng.module('ui.router.state').directive('uiView', uiView);
    ng.module('ui.router.state').directive('uiView', $ViewDirectiveFill);

    /** @publicapi @module ng1 */ /** */
    /** @hidden */
    function $ViewScrollProvider() {
        var useAnchorScroll = false;
        this.useAnchorScroll = function () {
            useAnchorScroll = true;
        };
        this.$get = [
            '$anchorScroll',
            '$timeout',
            function ($anchorScroll, $timeout) {
                if (useAnchorScroll) {
                    return $anchorScroll;
                }
                return function ($element) {
                    return $timeout(function () {
                        $element[0].scrollIntoView();
                    }, 0, false);
                };
            },
        ];
    }
    ng.module('ui.router.state').provider('$uiViewScroll', $ViewScrollProvider);

    var index$1 = 'ui.router';

    exports.$injector = $injector;
    exports.$q = $q;
    exports.BaseLocationServices = BaseLocationServices;
    exports.BaseUrlRule = BaseUrlRule;
    exports.BrowserLocationConfig = BrowserLocationConfig;
    exports.Glob = Glob;
    exports.HashLocationService = HashLocationService;
    exports.HookBuilder = HookBuilder;
    exports.MemoryLocationConfig = MemoryLocationConfig;
    exports.MemoryLocationService = MemoryLocationService;
    exports.NATIVE_INJECTOR_TOKEN = NATIVE_INJECTOR_TOKEN;
    exports.Ng1ViewConfig = Ng1ViewConfig;
    exports.Param = Param;
    exports.ParamFactory = ParamFactory;
    exports.ParamType = ParamType;
    exports.ParamTypes = ParamTypes;
    exports.PathNode = PathNode;
    exports.PathUtils = PathUtils;
    exports.PushStateLocationService = PushStateLocationService;
    exports.Queue = Queue;
    exports.RegisteredHook = RegisteredHook;
    exports.Rejection = Rejection;
    exports.Resolvable = Resolvable;
    exports.ResolveContext = ResolveContext;
    exports.StateBuilder = StateBuilder;
    exports.StateMatcher = StateMatcher;
    exports.StateObject = StateObject;
    exports.StateParams = StateParams;
    exports.StateProvider = StateProvider;
    exports.StateQueueManager = StateQueueManager;
    exports.StateRegistry = StateRegistry;
    exports.StateService = StateService;
    exports.TargetState = TargetState;
    exports.Trace = Trace;
    exports.Transition = Transition;
    exports.TransitionEventType = TransitionEventType;
    exports.TransitionHook = TransitionHook;
    exports.TransitionService = TransitionService;
    exports.UIRouter = UIRouter;
    exports.UIRouterGlobals = UIRouterGlobals;
    exports.UIRouterPluginBase = UIRouterPluginBase;
    exports.UrlConfig = UrlConfig;
    exports.UrlMatcher = UrlMatcher;
    exports.UrlMatcherFactory = UrlMatcherFactory;
    exports.UrlRouter = UrlRouter;
    exports.UrlRouterProvider = UrlRouterProvider;
    exports.UrlRuleFactory = UrlRuleFactory;
    exports.UrlRules = UrlRules;
    exports.UrlService = UrlService;
    exports.ViewService = ViewService;
    exports._extend = _extend;
    exports._inArray = _inArray;
    exports._pushTo = _pushTo;
    exports._removeFrom = _removeFrom;
    exports.all = all;
    exports.allTrueR = allTrueR;
    exports.ancestors = ancestors;
    exports.and = and;
    exports.any = any;
    exports.anyTrueR = anyTrueR;
    exports.applyPairs = applyPairs;
    exports.arrayTuples = arrayTuples;
    exports.assertFn = assertFn;
    exports.assertMap = assertMap;
    exports.assertPredicate = assertPredicate;
    exports.beforeAfterSubstr = beforeAfterSubstr;
    exports.buildUrl = buildUrl;
    exports.compose = compose;
    exports.copy = copy;
    exports.core = index;
    exports.createProxyFunctions = createProxyFunctions;
    exports.curry = curry;
    exports.default = index$1;
    exports.defaultResolvePolicy = defaultResolvePolicy;
    exports.defaultTransOpts = defaultTransOpts;
    exports.defaults = defaults;
    exports.deregAll = deregAll;
    exports.eq = eq;
    exports.equals = equals;
    exports.extend = extend;
    exports.filter = filter;
    exports.find = find;
    exports.flatten = flatten;
    exports.flattenR = flattenR;
    exports.fnToString = fnToString;
    exports.forEach = forEach;
    exports.fromJson = fromJson;
    exports.functionToString = functionToString;
    exports.getLocals = getLocals;
    exports.getNg1ViewConfigFactory = getNg1ViewConfigFactory;
    exports.getParams = getParams;
    exports.hashLocationPlugin = hashLocationPlugin;
    exports.hostRegex = hostRegex;
    exports.identity = identity;
    exports.inArray = inArray;
    exports.inherit = inherit;
    exports.invoke = invoke;
    exports.is = is;
    exports.isArray = isArray;
    exports.isDate = isDate;
    exports.isDefined = isDefined;
    exports.isFunction = isFunction;
    exports.isInjectable = isInjectable;
    exports.isNull = isNull;
    exports.isNullOrUndefined = isNullOrUndefined;
    exports.isNumber = isNumber;
    exports.isObject = isObject;
    exports.isPromise = isPromise;
    exports.isRegExp = isRegExp;
    exports.isString = isString;
    exports.isUndefined = isUndefined;
    exports.joinNeighborsR = joinNeighborsR;
    exports.kebobString = kebobString;
    exports.keyValsToObjectR = keyValsToObjectR;
    exports.locationPluginFactory = locationPluginFactory;
    exports.makeEvent = makeEvent;
    exports.makeStub = makeStub;
    exports.map = map;
    exports.mapObj = mapObj;
    exports.matchState = matchState;
    exports.maxLength = maxLength;
    exports.memoryLocationPlugin = memoryLocationPlugin;
    exports.mergeR = mergeR;
    exports.ng1ViewsBuilder = ng1ViewsBuilder;
    exports.noop = noop;
    exports.not = not;
    exports.omit = omit;
    exports.or = or;
    exports.padString = padString;
    exports.pairs = pairs;
    exports.parse = parse;
    exports.parseUrl = parseUrl$1;
    exports.pattern = pattern;
    exports.pick = pick;
    exports.pipe = pipe;
    exports.pluck = pluck;
    exports.prop = prop;
    exports.propEq = propEq;
    exports.pushR = pushR;
    exports.pushStateLocationPlugin = pushStateLocationPlugin;
    exports.pushTo = pushTo;
    exports.removeFrom = removeFrom;
    exports.resolvablesBuilder = resolvablesBuilder;
    exports.resolvePolicies = resolvePolicies;
    exports.root = root;
    exports.services = services;
    exports.servicesPlugin = servicesPlugin;
    exports.silenceUncaughtInPromise = silenceUncaughtInPromise;
    exports.silentRejection = silentRejection;
    exports.splitEqual = splitEqual;
    exports.splitHash = splitHash;
    exports.splitOnDelim = splitOnDelim;
    exports.splitQuery = splitQuery;
    exports.stringify = stringify;
    exports.stripLastPathElement = stripLastPathElement;
    exports.tail = tail;
    exports.toJson = toJson;
    exports.trace = trace;
    exports.trimHashVal = trimHashVal;
    exports.uniqR = uniqR;
    exports.unnest = unnest;
    exports.unnestR = unnestR;
    exports.val = val;
    exports.values = values;
    exports.watchDigests = watchDigests;

    Object.defineProperty(exports, '__esModule', { value: true });

})));


!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ui-router-visualizer",[],e):"object"==typeof exports?exports["ui-router-visualizer"]=e():t["ui-router-visualizer"]=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="/bundles/",e(0)}([function(t,e,n){"use strict";function r(t){var e=function(){return null};i.render(i.h(e,null),document.body,t)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(2);e.StateSelector=o.StateSelector;var a=n(3);e.StateVisualizer=a.StateVisualizer;var s=n(10);e.StateTree=s.StateTree;var u=n(20);e.TransitionVisualizer=u.TransitionVisualizer;var l=function(t){return new A(t,{})};e.visualizer=l;var c={state:!0,transition:!0},A=function(){function t(t,e){this.router=t,this.name="visualizer",e=Object.assign({},c,e),e.state&&(this.stateVisualizerEl=a.StateVisualizer.create(t)),e.transition&&(this.transitionVisualizerEl=u.TransitionVisualizer.create(t))}return t.prototype.dispose=function(t){this.stateVisualizerEl&&r(this.stateVisualizerEl),this.transitionVisualizerEl&&r(this.transitionVisualizerEl),this.stateVisualizerEl=null,this.transitionVisualizerEl=null},t}();e.Visualizer=A},function(t,e,n){!function(t,n){n(e)}(this,function(t){function e(t,e,n){this.nodeName=t,this.attributes=e,this.children=n,this.key=e&&e.key}function n(t,n){var r,i,o,a,s;for(s=arguments.length;s-- >2;)U.push(arguments[s]);for(n&&n.children&&(U.length||U.push(n.children),delete n.children);U.length;)if((o=U.pop())instanceof Array)for(s=o.length;s--;)U.push(o[s]);else null!=o&&o!==!0&&o!==!1&&("number"==typeof o&&(o=String(o)),a="string"==typeof o,a&&i?r[r.length-1]+=o:((r||(r=[])).push(o),i=a));var u=new e(t,n||void 0,r||F);return T.vnode&&T.vnode(u),u}function r(t,e){if(e)for(var n in e)t[n]=e[n];return t}function i(t){return r({},t)}function o(t,e){for(var n=e.split("."),r=0;r<n.length&&t;r++)t=t[n[r]];return t}function a(t){return"function"==typeof t}function s(t){return"string"==typeof t}function u(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}function l(t,e){return n(t.nodeName,r(i(t.attributes),e),arguments.length>2?[].slice.call(arguments,2):t.children)}function c(t,e,n){var r=e.split(".");return function(e){for(var i=e&&e.target||this,a={},u=a,l=s(n)?o(e,n):i.nodeName?i.type.match(/^che|rad/)?i.checked:i.value:e,c=0;c<r.length-1;c++)u=u[r[c]]||(u[r[c]]=!c&&t.state[r[c]]||{});u[r[c]]=l,t.setState(a)}}function A(t){!t._dirty&&(t._dirty=!0)&&1==G.push(t)&&(T.debounceRendering||Y)(p)}function p(){var t,e=G;for(G=[];t=e.pop();)t._dirty&&I(t)}function d(t){var e=t&&t.nodeName;return e&&a(e)&&!(e.prototype&&e.prototype.render)}function h(t,e){return t.nodeName(g(t),e||Q)}function f(t,e){return s(e)?t instanceof Text:s(e.nodeName)?!t._componentConstructor&&m(t,e.nodeName):a(e.nodeName)?!t._componentConstructor||t._componentConstructor===e.nodeName||d(e):void 0}function m(t,e){return t.normalizedNodeName===e||L(t.nodeName)===L(e)}function g(t){var e=i(t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(n)for(var r in n)void 0===e[r]&&(e[r]=n[r]);return e}function y(t){var e=t.parentNode;e&&e.removeChild(t)}function v(t,e,n,r,i){if("className"===e&&(e="class"),"class"===e&&r&&"object"==typeof r&&(r=u(r)),"key"===e);else if("class"!==e||i)if("style"===e){if((!r||s(r)||s(n))&&(t.style.cssText=r||""),r&&"object"==typeof r){if(!s(n))for(var o in n)o in r||(t.style[o]="");for(var o in r)t.style[o]="number"!=typeof r[o]||q[o]?r[o]:r[o]+"px"}}else if("dangerouslySetInnerHTML"===e)r&&(t.innerHTML=r.__html||"");else if("o"==e[0]&&"n"==e[1]){var l=t._listeners||(t._listeners={});e=L(e.substring(2)),r?l[e]||t.addEventListener(e,b,!!X[e]):l[e]&&t.removeEventListener(e,b,!!X[e]),l[e]=r}else if("list"!==e&&"type"!==e&&!i&&e in t)C(t,e,null==r?"":r),null!=r&&r!==!1||t.removeAttribute(e);else{var c=i&&e.match(/^xlink\:?(.+)/);null==r||r===!1?c?t.removeAttributeNS("http://www.w3.org/1999/xlink",L(c[1])):t.removeAttribute(e):"object"==typeof r||a(r)||(c?t.setAttributeNS("http://www.w3.org/1999/xlink",L(c[1]),r):t.setAttribute(e,r))}else t.className=r||""}function C(t,e,n){try{t[e]=n}catch(t){}}function b(t){return this._listeners[t.type](T.event&&T.event(t)||t)}function B(t){if(y(t),t instanceof Element){t._component=t._componentConstructor=null;var e=t.normalizedNodeName||L(t.nodeName);(K[e]||(K[e]=[])).push(t)}}function x(t,e){var n=L(t),r=K[n]&&K[n].pop()||(e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t));return r.normalizedNodeName=n,r}function w(){for(var t;t=J.pop();)T.afterMount&&T.afterMount(t),t.componentDidMount&&t.componentDidMount()}function k(t,e,n,r,i,o){Z++||($=i&&void 0!==i.ownerSVGElement,tt=t&&!(H in t));var a=E(t,e,n,r);return i&&a.parentNode!==i&&i.appendChild(a),--Z||(tt=!1,o||w()),a}function E(t,e,n,r){for(var i=e&&e.attributes&&e.attributes.ref;d(e);)e=h(e,n);if(null==e&&(e=""),s(e))return t&&t instanceof Text&&t.parentNode?t.nodeValue!=e&&(t.nodeValue=e):(t&&D(t),t=document.createTextNode(e)),t;if(a(e.nodeName))return j(t,e,n,r);var o=t,u=String(e.nodeName),l=$,c=e.children;if($="svg"===u||"foreignObject"!==u&&$,t){if(!m(t,u)){for(o=x(u,$);t.firstChild;)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),D(t)}}else o=x(u,$);var A=o.firstChild,p=o[H];if(!p){o[H]=p={};for(var f=o.attributes,g=f.length;g--;)p[f[g].name]=f[g].value}return!tt&&c&&1===c.length&&"string"==typeof c[0]&&A&&A instanceof Text&&!A.nextSibling?A.nodeValue!=c[0]&&(A.nodeValue=c[0]):(c&&c.length||A)&&_(o,c,n,r,!!p.dangerouslySetInnerHTML),S(o,e.attributes,p),i&&(p.ref=i)(o),$=l,o}function _(t,e,n,r,i){var o,a,s,u,l=t.childNodes,c=[],A={},p=0,d=0,h=l.length,m=0,g=e&&e.length;if(h)for(var v=0;v<h;v++){var C=l[v],b=C[H],B=g?(a=C._component)?a.__key:b?b.key:null:null;null!=B?(p++,A[B]=C):(tt||i||b||C instanceof Text)&&(c[m++]=C)}if(g)for(var v=0;v<g;v++){s=e[v],u=null;var B=s.key;if(null!=B)p&&B in A&&(u=A[B],A[B]=void 0,p--);else if(!u&&d<m)for(o=d;o<m;o++)if(a=c[o],a&&f(a,s)){u=a,c[o]=void 0,o===m-1&&m--,o===d&&d++;break}u=E(u,s,n,r),u&&u!==t&&(v>=h?t.appendChild(u):u!==l[v]&&(u===l[v+1]&&y(l[v]),t.insertBefore(u,l[v]||null)))}if(p)for(var v in A)A[v]&&D(A[v]);for(;d<=m;)u=c[m--],u&&D(u)}function D(t,e){var n=t._component;if(n)z(n,!e);else{t[H]&&t[H].ref&&t[H].ref(null),e||B(t);for(var r;r=t.lastChild;)D(r,e)}}function S(t,e,n){var r;for(r in n)e&&r in e||null==n[r]||v(t,r,n[r],n[r]=void 0,$);if(e)for(r in e)"children"===r||"innerHTML"===r||r in n&&e[r]===("value"===r||"checked"===r?t[r]:n[r])||v(t,r,n[r],n[r]=e[r],$)}function N(t){var e=t.constructor.name,n=et[e];n?n.push(t):et[e]=[t]}function O(t,e,n){var r=new t(e,n),i=et[t.name];if(P.call(r,e,n),i)for(var o=i.length;o--;)if(i[o].constructor===t){r.nextBase=i[o].nextBase,i.splice(o,1);break}return r}function M(t,e,n,r,i){t._disable||(t._disable=!0,(t.__ref=e.ref)&&delete e.ref,(t.__key=e.key)&&delete e.key,!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,r),r&&r!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=r),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==n&&(1!==n&&T.syncComponentUpdates===!1&&t.base?A(t):I(t,1,i)),t.__ref&&t.__ref(t))}function I(t,e,n,o){if(!t._disable){var s,u,l,c,A=t.props,p=t.state,f=t.context,m=t.prevProps||A,y=t.prevState||p,v=t.prevContext||f,C=t.base,b=t.nextBase,B=C||b,x=t._component;if(C&&(t.props=m,t.state=y,t.context=v,2!==e&&t.shouldComponentUpdate&&t.shouldComponentUpdate(A,p,f)===!1?s=!0:t.componentWillUpdate&&t.componentWillUpdate(A,p,f),t.props=A,t.state=p,t.context=f),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!s){for(t.render&&(u=t.render(A,p,f)),t.getChildContext&&(f=r(i(f),t.getChildContext()));d(u);)u=h(u,f);var E,_,S=u&&u.nodeName;if(a(S)){var N=g(u);l=x,l&&l.constructor===S&&N.key==l.__key?M(l,N,1,f):(E=l,l=O(S,N,f),l.nextBase=l.nextBase||b,l._parentComponent=t,t._component=l,M(l,N,0,f),I(l,1,n,!0)),_=l.base}else c=B,E=x,E&&(c=t._component=null),(B||1===e)&&(c&&(c._component=null),_=k(c,u,f,n||!C,B&&B.parentNode,!0));if(B&&_!==B&&l!==x){var j=B.parentNode;j&&_!==j&&(j.replaceChild(_,B),E||(B._component=null,D(B)))}if(E&&z(E,_!==B),t.base=_,_&&!o){for(var P=t,R=t;R=R._parentComponent;)(P=R).base=_;_._component=P,_._componentConstructor=P.constructor}}!C||n?J.unshift(t):s||(t.componentDidUpdate&&t.componentDidUpdate(m,y,v),T.afterUpdate&&T.afterUpdate(t));var U,F=t._renderCallbacks;if(F)for(;U=F.pop();)U.call(t);Z||o||w()}}function j(t,e,n,r){for(var i=t&&t._component,o=i,a=t,s=i&&t._componentConstructor===e.nodeName,u=s,l=g(e);i&&!u&&(i=i._parentComponent);)u=i.constructor===e.nodeName;return i&&u&&(!r||i._component)?(M(i,l,3,n,r),t=i.base):(o&&!s&&(z(o,!0),t=a=null),i=O(e.nodeName,l,n),t&&!i.nextBase&&(i.nextBase=t,a=null),M(i,l,1,n,r),t=i.base,a&&t!==a&&(a._component=null,D(a))),t}function z(t,e){T.beforeUnmount&&T.beforeUnmount(t);var n=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var r=t._component;if(r)z(r,e);else if(n){n[H]&&n[H].ref&&n[H].ref(null),t.nextBase=n,e&&(y(n),N(t));for(var i;i=n.lastChild;)D(i,!e)}t.__ref&&t.__ref(null),t.componentDidUnmount&&t.componentDidUnmount()}function P(t,e){this._dirty=!0,this.context=e,this.props=t,this.state||(this.state={})}function R(t,e,n){return k(n,t,{},!1,e)}var T={},U=[],F=[],V={},L=function(t){return V[t]||(V[t]=t.toLowerCase())},W="undefined"!=typeof Promise&&Promise.resolve(),Y=W?function(t){W.then(t)}:setTimeout,Q={},H="undefined"!=typeof Symbol?Symbol.for("preactattr"):"__preactattr_",q={boxFlex:1,boxFlexGroup:1,columnCount:1,fillOpacity:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,strokeOpacity:1,widows:1,zIndex:1,zoom:1},X={blur:1,error:1,focus:1,load:1,resize:1,scroll:1},G=[],K={},J=[],Z=0,$=!1,tt=!1,et={};r(P.prototype,{linkState:function(t,e){var n=this._linkedStates||(this._linkedStates={});return n[t+e]||(n[t+e]=c(this,t,e))},setState:function(t,e){var n=this.state;this.prevState||(this.prevState=i(n)),r(n,a(t)?t(n,this.props):t),e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),A(this)},forceUpdate:function(){I(this,2)},render:function(){}}),t.h=n,t.cloneElement=l,t.Component=P,t.render=R,t.rerender=p,t.options=T})},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={current:null,states:[],deregisterFn:null},e.selectState=function(t){var n=e.props.router.stateService,r=t.target.value;r&&n.go(r)},e}return r(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props.router,n=function(){return t.setState({states:e.stateRegistry.get().map(function(t){return t.name})})},r=function(e){return t.setState({current:e.to().name})};e.stateRegistry.onStatesChanged&&(this.deregisterStateListenerFn=e.stateRegistry.onStatesChanged(n));var i=e.transitionService.onSuccess({},r);this.setState({current:e.globals.current.name,states:[],deregisterFn:i}),n()},e.prototype.componentWillUnmount=function(){this.state.deregisterFn&&this.state.deregisterFn(),this.deregisterStateListenerFn&&this.deregisterStateListenerFn()},e.prototype.render=function(){return i.h("select",{value:this.state.current||"",onChange:this.selectState,style:{maxWidth:120}},i.h("option",{value:""},"Choose a state"),this.state.states.map(function(t){return i.h("option",{key:t,value:t},t)}))},e}(i.Component);e.StateSelector=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1);n(4);var a=n(2),s=n(8),u=n(9),l=n(10),c=n(16),A=n(19),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={height:null,width:null,presetName:"Tree",renderer:c.DEFAULT_RENDERER},e.deregisterFns=[],e.minimize=function(t){t&&t.preventDefault(),t&&t.stopPropagation();var n=e.el,r=n.getBoundingClientRect();e.top=r.top+"px",e.left=r.left+"px",e.right=window.innerWidth-r.right+"px",e.bottom=window.innerHeight-r.bottom+"px",n.style.top="auto",n.style.left="auto",n.style.right=e.right,n.style.bottom=e.bottom;var i=function(){n.style.top="auto",n.style.left="auto",n.style.right=e.right,n.style.bottom=e.bottom,s.toggleClass("minimized")(n),n.removeEventListener("click",i);var t=function(e){var r=n.getBoundingClientRect();n.style.top=r.top+"px",n.style.left=r.left+"px",n.style.right="auto",n.style.bottom="auto",n.removeEventListener("transitionend",t)};n.addEventListener("transitionend",t)};s.addClass("minimized")(n),n.addEventListener("click",i),setTimeout(function(){return n.style.right=n.style.bottom="0"},50)},e.svgWidth=function(){return e.props.width||e.state.width||350},e.svgHeight=function(){return(e.props.height||e.state.height||250)-25},e}return r(e,t),e.create=function(t,n,r){void 0===r&&(r={}),n||(n=document.createElement("div"),n.id="uirStateVisualizer");var i=Object.assign({},r,{router:t,minimizeAfter:2500}),a=function(){document.body.appendChild(n),o.render(o.h(e,i),n)};return"interactive"===document.readyState||"complete"===document.readyState?a():document.addEventListener("DOMContentLoaded",a,!1),n},e.prototype.handleClick=function(){this.minimizeTimeout&&(clearTimeout(this.minimizeTimeout),this.minimizeTimeout=null)},e.prototype.componentWillUnmount=function(){this.deregisterFns.forEach(function(t){return t()})},e.prototype.componentDidMount=function(){var t=this.el.querySelector(".uirStateVisControls"),e=this.el.querySelector(".statevis");this.deregisterFns.push(u.draggable(t,u.dragActions.move(this.el))),this.deregisterFns.push(u.draggable(e,u.dragActions.move(this.el))),this.monitorResizeEvents(),this.props.minimizeAfter&&(this.minimizeTimeout=setTimeout(this.minimize.bind(this),this.props.minimizeAfter))},e.prototype.monitorResizeEvents=function(){var t=this,e=this.el.style.width,n=this.el.style.height,r=new MutationObserver(function(r){r.forEach(function(r){if("style"==r.attributeName){var i=r.target,o=i.style.width,a=i.style.height;if(o!==e||a!==n){e=o,n=a;var s=parseInt(o.replace(/px$/,"")),u=parseInt(a.replace(/px$/,""));t.setState({width:s,height:u})}}})}),i={attributes:!0,childList:!1,characterData:!1,subtree:!1,attributeFilter:["style"]};r.observe(this.el,i),this.deregisterFns.push(function(){return r.disconnect()})},e.prototype.handleZoom=function(t){var e=t.target,n=parseFloat(e.value),r=i({},this.state.renderer,{zoom:n});this.setState({renderer:r})},e.prototype.handleLayout=function(t){var e=t.target.value,n=c.RENDERER_PRESETS[e],r=i({},this.state.renderer,n);this.setState({renderer:r,presetName:e})},e.prototype.render=function(){var t=this,e=[2,1.5,1,.9,.8,.7,.6,.5,.4,.3];return o.h("div",{ref:function(e){return t.el=e},className:"uirStateVisContainer",onClick:this.handleClick.bind(this)},o.h("div",{className:"uirStateVisControls"},o.h("div",null," Current State: ",o.h(a.StateSelector,{router:this.props.router})),o.h("div",null,o.h("select",{onChange:this.handleLayout.bind(this),value:this.state.presetName,style:{maxWidth:100}},Object.keys(c.RENDERER_PRESETS).map(function(t){return o.h("option",{value:t},t)})),o.h("select",{onChange:this.handleZoom.bind(this),value:this.state.renderer.zoom+"",style:{maxWidth:100}},e.map(function(t){return o.h("option",{value:t+""},t,"x")}))),o.h("button",{onClick:this.minimize},o.h("img",{src:A,style:{cursor:"pointer"}}))),o.h(l.StateTree,{router:this.props.router,width:this.svgWidth(),height:this.svgHeight(),renderer:this.state.renderer}))},e}(o.Component);e.StateVisualizer=p},function(t,e,n){var r=n(5);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(6)(),e.push([t.id,'.uirStateVisContainer{z-index:3;position:fixed;right:2em;bottom:4em;display:flex;flex-direction:column;align-items:center;background-color:hsla(0,0%,100%,.8);transform:scale(1);transform-origin:right bottom;transition:right .5s ease,bottom .5s ease,transform .5s ease;resize:both;overflow:hidden}.uirStateVisContainer:hover{outline:3px solid rgba(0,0,0,.35)}.uirStateVisContainer.minimized{cursor:pointer;transform:scale(.25)}.uirStateVisContainer .uirStateVisControls{width:100%;display:flex;flex-flow:row nowrap;justify-content:space-between;flex:1 0 auto}.uirStateVisContainer .statevis{flex:1 1 auto;transition:all 1s ease}.statevis circle{fill:#fff;stroke:grey;transition-property:r,fill,stroke,stroke-width;transition-duration:.35s;transition-timing-function:ease-in-out;cursor:pointer}.statevis text{transition-property:x,y,font-size,stroke,stroke-width;transition-duration:.35s;transition-timing-function:ease-in-out}.statevis circle.future{stroke:grey;stroke-dasharray:7,5}.statevis circle.entered{stroke:#000;fill:#90ee90}.statevis circle.entered:after{content:"<text>Entered</text>"}.statevis circle.active{fill:green;stroke:#000}.statevis circle.collapsed{stroke-dasharray:2,2}.statevis text{font-family:sans-serif}.statevis .link{fill:none;stroke:#ccc}.statevis text.label{fill:grey;alignment-baseline:middle}.draggable{cursor:move}',"",{version:3,sources:["/./src/state/stateVisualizer.css"],names:[],mappings:"AACA,sBACI,UAAW,AACX,eAAgB,AAChB,UAAW,AACX,WAAY,AACZ,aAAc,AACd,sBAAuB,AACvB,mBAAoB,AACpB,oCAA2C,AAC3C,mBAAoB,AACpB,8BAA+B,AAC/B,6DAAmE,AACnE,YAAa,AACb,eAAiB,CACpB,AAGD,4BACI,iCAAmC,CACtC,AAED,gCACI,eAAgB,AAChB,oBAAuB,CAC1B,AAED,2CACI,WAAY,AACZ,aAAc,AACd,qBAAsB,AACtB,8BAA+B,AAC/B,aAAe,CAClB,AAED,gCACI,cAAe,AACf,sBAAwB,CAC3B,AAED,iBAEI,UAAW,AACX,YAAa,AAGb,+CAAmD,AACnD,yBAA2B,AAC3B,uCAAwC,AAExC,cAAgB,CACnB,AAED,eACI,sDAA2D,AAC3D,yBAA2B,AAC3B,sCAAwC,CAC3C,AAED,wBAEI,YAAa,AACb,oBAAsB,CAEzB,AAED,yBAEI,YAAc,AACd,YAAiB,CACpB,AAED,+BACI,8BAA+B,CAClC,AAED,wBAEI,WAAY,AACZ,WAAc,CACjB,AAED,2BACI,oBAAsB,CACzB,AAED,eACI,sBAAwB,CAC3B,AAED,gBACI,UAAW,AACX,WAAa,CAEhB,AAED,qBACI,UAAW,AACX,yBAA2B,CAC9B,AAGD,WACI,WAAa,CAChB",file:"stateVisualizer.css",sourcesContent:['\n.uirStateVisContainer {\n    z-index: 3;\n    position: fixed;\n    right: 2em;\n    bottom: 4em;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background-color: rgba(255, 255, 255, 0.8);\n    transform: scale(1);\n    transform-origin: right bottom;\n    transition: right 0.5s ease, bottom 0.5s ease, transform 0.5s ease;\n    resize: both;\n    overflow: hidden;\n}\n\n\n.uirStateVisContainer:hover {\n    outline: 3px solid rgba(0,0,0,0.35)\n}\n\n.uirStateVisContainer.minimized {\n    cursor: pointer;\n    transform: scale(0.25);\n}\n\n.uirStateVisContainer .uirStateVisControls {\n    width: 100%;\n    display: flex;\n    flex-flow: row nowrap;\n    justify-content: space-between;\n    flex: 1 0 auto;\n}\n\n.uirStateVisContainer .statevis {\n    flex: 1 1 auto;\n    transition: all 1s ease;\n}\n\n.statevis circle {\n    /*r: 10;*/\n    fill: #fff;\n    stroke: grey;\n    /*stroke-width: 3px;*/\n\n    transition-property: r, fill, stroke, stroke-width;\n    transition-duration: 350ms;\n    transition-timing-function: ease-in-out;\n\n    cursor: pointer;\n}\n\n.statevis text {\n    transition-property: x, y, font-size, stroke, stroke-width;\n    transition-duration: 350ms;\n    transition-timing-function: ease-in-out;\n}\n\n.statevis circle.future {\n    /*r: 10;*/\n    stroke: grey;\n    stroke-dasharray: 7,5;\n    /*stroke-width: 1px;*/\n}\n\n.statevis circle.entered {\n    /*r: 10;*/\n    stroke: black;\n    fill: lightgreen;\n}\n\n.statevis circle.entered:after {\n    content: "<text>Entered</text>"\n}\n\n.statevis circle.active {\n    /*r: 15;*/\n    fill: green;\n    stroke: black;\n}\n\n.statevis circle.collapsed {\n    stroke-dasharray: 2, 2\n}\n\n.statevis text {\n    font-family: sans-serif;\n}\n\n.statevis .link {\n    fill: none;\n    stroke: #ccc;\n    /*stroke-width: 2px;*/\n}\n\n.statevis text.label {\n    fill: grey;\n    alignment-baseline: middle;\n}\n\n\n.draggable {\n    cursor: move;\n}\n\n/*.draggable:hover {*/\n    /*outline: 3px solid rgba(0,0,0,0.15)*/\n/*}*/'],sourceRoot:"webpack://"}])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=d[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(l(r.parts[o],e))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(l(r.parts[o],e));d[r.id]={id:r.id,refs:1,parts:a}}}}function i(t){for(var e=[],n={},r=0;r<t.length;r++){var i=t[r],o=i[0],a=i[1],s=i[2],u=i[3],l={css:a,media:s,sourceMap:u};n[o]?n[o].parts.push(l):e.push(n[o]={id:o,parts:[l]})}return e}function o(t,e){var n=m(),r=v[v.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),v.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function a(t){t.parentNode.removeChild(t);var e=v.indexOf(t);e>=0&&v.splice(e,1)}function s(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function u(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function l(t,e){var n,r,i;if(e.singleton){var o=y++;n=g||(g=s(e)),r=c.bind(null,n,o,!1),i=c.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(e),r=p.bind(null,n),i=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),r=A.bind(null,n),i=function(){a(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}function c(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=C(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function A(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function p(t,e){var n=e.css,r=e.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var d={},h=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},f=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),m=h(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,y=0,v=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=f()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=i(t);return r(n,e),function(t){for(var o=[],a=0;a<n.length;a++){var s=n[a],u=d[s.id];u.refs--,o.push(u)}if(t){var l=i(t);r(l,e)}for(var a=0;a<o.length;a++){var u=o[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete d[u.id]}}}};var C=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasClass=function(t){return function(e){return!!new RegExp("\\b"+t+"\\b").exec(e.className)}},e.addClass=function(t){return function(e){return e.className=e.className+" "+t}},e.removeClass=function(t){return function(e){return e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")}},e.toggleClass=function(t){return function(n){e.hasClass(t)(n)?e.removeClass(t)(n):e.addClass(t)(n)}}},function(t,e,n){"use strict";function r(t,e){var n=!0,r=!1,o=0,a=0,s=0,u=0,l=function(i){if(n){r=!0,s=o=i.clientX,u=a=i.clientY;var l=function(i){if(n&&r){i.preventDefault();var l=i.clientX,c=i.clientY;e(t,i,{initialClientX:o,initialClientY:a,lastClientX:s,lastClientY:u,newClientX:l,newClientY:c}),s=l,u=c}},c=function(t){r=!1,document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",c)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",c)}};return i.addClass("draggable")(t),t.addEventListener("mousedown",l),function(){return t.removeEventListener("mousedown",l)}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),o=function(t){return function(e,n,r){var i=(r.initialClientX,r.initialClientY,r.lastClientX),o=r.lastClientY,a=r.newClientX,s=r.newClientY,u=t,l=u.getBoundingClientRect(),c=l.left,A=l.top,p=a-i,d=s-o;u.style.right="auto",u.style.bottom="auto",u.style.left=c+p+"px",u.style.top=A+d+"px"}};e.dragActions={move:o},e.draggable=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(11),s=n(12),u=n(13),l=n(16),c=n(18),A={label:"",highlight:!1,active:!1,future:!1,retained:!1,entered:!1,exited:!1,inactive:!0},p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={nodes:[],layout:{}},e.nodes=[],e.unmounted=!1,e.cancelCurrentAnimation=function(){return null},e.doLayoutAnimation=function(){e.cancelCurrentAnimation();var t=e.getNodes();if(t.length){var n=t.filter(function(t){return""===t.name})[0];e.props.renderer.layoutFn(n),t.filter(function(t){return!t.visible}).forEach(function(t){for(var e=t._parent;e&&!e.visible;)e=e._parent;e&&(t.x=e.x,t.y=e.y)});var r=e.dimensions(),i=function(t){return t*r.scaleX+r.offsetX},o=function(t){return t*r.scaleY+r.offsetY},a=function(t){return{x:t.animX||e.props.width/2,y:t.animY||e.props.height/2}},l=t.map(a).map(function(t){return[t.x,t.y]}).reduce(function(t,e){return t.concat(e)},[]),c=t.map(function(t){return[i(t.x),o(t.y)]}).reduce(function(t,e){return t.concat(e)},[]),A=function(n){for(var r=n.length/2,i=0;i<r&&i<t.length;i++){var o=t[i];o.animX=n[2*i],o.animY=n[2*i+1]}e.setState({nodes:t})};e.cancelCurrentAnimation=s.animatePath(c,l,500,A,function(){return null},u.easing.easeInOutExpo)}},e.nodeForState=function(t,e){return t.filter(function(t){return t.name===e.name})[0]},e.updateStates=function(){var t=e.props.router,n=t.stateService.get().map(function(t){return t.$$state()}),r=e.nodes.map(Object.getPrototypeOf),i=n.filter(function(t){return r.indexOf(t)===-1}),o=r.filter(function(t){return n.indexOf(t)===-1}),a=e.nodes=e.nodes.slice();(i.length||o.length)&&(i.map(function(t){return c.createStateVisNode(t)}).forEach(function(t){return a.push(t)}),o.map(function(t){return a.filter(function(e){return t.isPrototypeOf(e)})}).reduce(function(t,e){return t.concat(e)},[]).forEach(function(t){return a.splice(a.indexOf(t),1)}),a.forEach(function(t){return t._children=[]}),a.forEach(function(t){if(t&&t.parent){var n=e.nodeForState(a,t.parent);n&&(n._children.push(t),t._parent=n)}}),a.forEach(function(t){return t.future=!!t.lazyLoad})),e.unmounted||e.deregisterStateListenerFn||setTimeout(e.updateStates,1e3),e.setState({nodes:a},e.doLayoutAnimation)},e.updateNodes=function(t){var n=e.nodes.map(function(t){return Object.assign(t,A)});if(n.forEach(function(t){return t.future=!!t.lazyLoad}),t){var r=t.treeChanges(),i=function(t){return e.nodeForState(e.nodes,t.state)};r.retained.concat(r.entering).map(i).filter(function(t){return t}).forEach(function(t){return t.entered=!0}),r.retained.map(i).filter(function(t){return t}).forEach(function(t){return t.retained=!0}),r.exiting.map(i).filter(function(t){return t}).forEach(function(t){return t.exited=!0}),r.to.slice(-1).map(i).filter(function(t){return t}).forEach(function(t){t.active=!0,t.label="active"})}e.setState({nodes:e.nodes},e.doLayoutAnimation)},e}return r(e,t),e.create=function(t,n,r){void 0===r&&(r={}),n||(n=document.createElement("div"),n.id="uirStateTree");var a=i({},r,{router:t}),s=function(){document.body.appendChild(n),o.render(o.h(e,a),n)};return"interactive"===document.readyState||"complete"===document.readyState?s():document.addEventListener("DOMContentLoaded",s,!1),n},e.prototype.componentDidMount=function(){var t=this,e=this.props.router.stateRegistry,n=this.props.router.transitionService;e.onStatesChanged&&(this.deregisterStateListenerFn=e.onStatesChanged(function(){return t.updateStates()})),this.updateStates(),this.deregisterHookFn=n.onSuccess({},function(e){return t.updateNodes(e)}),this.updateNodes();var r=this.props.router.globals.successfulTransitions.peekTail();r&&this.updateNodes(r);var i=this.props.router.globals.transition;i&&i.promise.then(function(){return t.updateNodes(i)})},e.prototype.componentWillReceiveProps=function(){var t=this.state.nodes;this.setState({nodes:t},this.updateStates)},e.prototype.dimensions=function(){var t={},e=15,n=0,r=2*e,i=this.props.height||500,o=this.props.width||500,a=t.scaleX||o-2*n,s=t.scaleY||i-2*r;return{radius:e,offsetX:n,offsetY:r,scaleX:a,scaleY:s}},e.prototype.componentWillUnmount=function(){this.unmounted=!0,this.deregisterHookFn&&this.deregisterHookFn()},e.prototype.getNodes=function(){return this.nodes.slice().sort(this.props.renderer.sortNodesFn)},e.prototype.render=function(){var t=this,e=this.props.renderer,n=this.getNodes().filter(function(t){return t.visible&&t.animX&&t.animY});return o.h("div",{className:"statevis"},o.h("svg",{width:this.props.width,height:this.props.height},n.filter(function(t){return!!t.parent}).map(function(t){return e.edgeRenderFn(t,e)}),n.map(function(e){return o.h(a.StateNode,{key:e.name,node:e,router:t.props.router,renderer:t.props.renderer,doLayout:t.doLayoutAnimation.bind(t),x:e.animX,y:e.animY})})))},e}(o.Component);p.defaultProps={height:350,width:250,renderer:l.DEFAULT_RENDERER},e.StateTree=p},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goTimeout=null,e.handleCollapseClicked=function(t){clearTimeout(e.goTimeout),
e.props.node._collapsed=!e.props.node._collapsed,e.props.doLayout()},e.handleGoClicked=function(t){clearTimeout(e.goTimeout);var n=e.props.node.name;n=n.replace(/\.\*\*$/,""),e.goTimeout=setTimeout(function(){return e.props.router.stateService.go(n)},200)},e}return r(e,t),e.prototype.render=function(){var t=this.props.renderer,e=this.props,n=e.node,r=e.x,o=e.y,a=t.baseRadius,s=t.baseFontSize,u=t.baseNodeStrokeWidth,l=t.zoom,c=a*l,A=s*l,p=u*(n.entered?1.5:1)*l,d=["entered","retained","exited","active","inactive","future","highlight","collapsed"],h=d.reduce(function(t,e){return t+(n[e]?" "+e+" ":"")},""),f=n.collapsed?n.totalDescendents:0;return i.h("g",{transform:"translate("+r+", "+o+")",onClick:this.handleGoClicked,onDblClick:this.handleCollapseClicked},i.h("circle",{className:h,"stroke-width":p,r:c}),n.collapsed?i.h("text",{className:"label","text-anchor":"middle","font-size":A*(f<10?1:.8)},"(",f,")"):"",t.labelRenderFn(r,o,n,t),i.h("text",{className:"label","text-anchor":"middle","font-size":A,transform:"translate(0, "+2*c+")"},n.label))},e}(i.Component);e.StateNode=o},function(t,e,n){"use strict";function r(t,e,n,r,a,s){void 0===a&&(a=function(){}),void 0===s&&(s=i.easing.easeOutElastic);var u=null,l=o.interpolateArray(e,t),c=function(t){if(n===-1)return a();null==u&&(u=t);var e=t-u,i=1;e<n&&(requestAnimationFrame(c),i=s(e,0,1,n)),r(l(i))};return requestAnimationFrame(c),function(){n=-1}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(13),o=n(14);e.animatePath=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.easing={easeInOutQuad:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInOutCubic:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInOutQuart:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInOutQuint:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInOutSine:function(t,e,n,r){return-n/2*(Math.cos(Math.PI*t/r)-1)+e},easeInOutExpo:function(t,e,n,r){return 0==t?e:t==r?e+n:(t/=r/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e},easeInOutCirc:function(t,e,n,r){return(t/=r/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=1.70158,o=0,a=n;if(0==t)return e;if(1==(t/=r))return e+n;if(o||(o=.3*r),a<Math.abs(n)){a=n;var i=o/4}else var i=o/(2*Math.PI)*Math.asin(n/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o))+e},easeOutElastic:function(t,e,n,r){var i=1.70158,o=0,a=n;if(0==t)return e;if(1==(t/=r))return e+n;if(o||(o=.3*r),a<Math.abs(n)){a=n;var i=o/4}else var i=o/(2*Math.PI)*Math.asin(n/a);return a*Math.pow(2,-10*t)*Math.sin((t*r-i)*(2*Math.PI)/o)+n+e},easeInOutElastic:function(t,e,n,r){var i=1.70158,o=0,a=n;if(0==t)return e;if(2==(t/=r/2))return e+n;if(o||(o=r*(.3*1.5)),a<Math.abs(n)){a=n;var i=o/4}else var i=o/(2*Math.PI)*Math.asin(n/a);return t<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o))+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o)*.5+n+e},easeInOutBack:function(t,e,n,r,i){return void 0==i&&(i=1.70158),(t/=r/2)<1?n/2*(t*t*(((i*=1.525)+1)*t-i))+e:n/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e}}},function(t,e,n){!function(t,r){r(e,n(15))}(this,function(t,e){"use strict";function n(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function r(t,e){return function(n){return t+n*e}}function i(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function o(t,e){var n=e-t;return n?r(t,n>180||n<-180?n-360*Math.round(n/360):n):_(isNaN(t)?e:t)}function a(t){return 1===(t=+t)?s:function(e,n){return n-e?i(e,n,t):_(isNaN(e)?n:e)}}function s(t,e){var n=e-t;return n?r(t,n):_(isNaN(t)?e:t)}function u(t){return function(n){var r,i,o=n.length,a=new Array(o),s=new Array(o),u=new Array(o);for(r=0;r<o;++r)i=e.rgb(n[r]),a[r]=i.r||0,s[r]=i.g||0,u[r]=i.b||0;return a=t(a),s=t(s),u=t(u),i.opacity=1,function(t){return i.r=a(t),i.g=s(t),i.b=u(t),i+""}}}function l(t){return function(){return t}}function c(t){return function(e){return t(e)+""}}function A(t){return"none"===t?V:(b||(b=document.createElement("DIV"),B=document.documentElement,x=document.defaultView),b.style.transform=t,t=x.getComputedStyle(B.appendChild(b),null).getPropertyValue("transform"),B.removeChild(b),t=t.slice(7,-1).split(","),L(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function p(t){return null==t?V:(w||(w=document.createElementNS("http://www.w3.org/2000/svg","g")),w.setAttribute("transform",t),(t=w.transform.baseVal.consolidate())?(t=t.matrix,L(t.a,t.b,t.c,t.d,t.e,t.f)):V)}function d(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:I(t,i)},{i:u-2,x:I(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}function a(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:I(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function s(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:I(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function u(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:I(t,n)},{i:s-2,x:I(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),a(e.rotate,n.rotate,r,i),s(e.skewX,n.skewX,r,i),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}function h(t){return((t=Math.exp(t))+1/t)/2}function f(t){return((t=Math.exp(t))-1/t)/2}function m(t){return((t=Math.exp(2*t))-1)/(t+1)}function g(t){return function(n,r){var i=t((n=e.hsl(n)).h,(r=e.hsl(r)).h),o=s(n.s,r.s),a=s(n.l,r.l),u=s(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(t),n.opacity=u(t),n+""}}}function y(t,n){var r=s((t=e.lab(t)).l,(n=e.lab(n)).l),i=s(t.a,n.a),o=s(t.b,n.b),a=s(t.opacity,n.opacity);return function(e){return t.l=r(e),t.a=i(e),t.b=o(e),t.opacity=a(e),t+""}}function v(t){return function(n,r){var i=t((n=e.hcl(n)).h,(r=e.hcl(r)).h),o=s(n.c,r.c),a=s(n.l,r.l),u=s(n.opacity,r.opacity);return function(t){return n.h=i(t),n.c=o(t),n.l=a(t),n.opacity=u(t),n+""}}}function C(t){return function n(r){function i(n,i){var o=t((n=e.cubehelix(n)).h,(i=e.cubehelix(i)).h),a=s(n.s,i.s),u=s(n.l,i.l),l=s(n.opacity,i.opacity);return function(t){return n.h=o(t),n.s=a(t),n.l=u(Math.pow(t,r)),n.opacity=l(t),n+""}}return r=+r,i.gamma=n,i}(1)}var b,B,x,w,k=function(t){var e=t.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),o=t[i],a=t[i+1],s=i>0?t[i-1]:2*o-a,u=i<e-1?t[i+2]:2*a-o;return n((r-i/e)*e,s,o,a,u)}},E=function(t){var e=t.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*e),o=t[(i+e-1)%e],a=t[i%e],s=t[(i+1)%e],u=t[(i+2)%e];return n((r-i/e)*e,o,a,s,u)}},_=function(t){return function(){return t}},D=function t(n){function r(t,n){var r=i((t=e.rgb(t)).r,(n=e.rgb(n)).r),o=i(t.g,n.g),a=i(t.b,n.b),u=s(t.opacity,n.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=a(e),t.opacity=u(e),t+""}}var i=a(n);return r.gamma=t,r}(1),S=u(k),N=u(E),O=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(r),a=new Array(r);for(n=0;n<i;++n)o[n]=T(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}},M=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}},I=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},j=function(t,e){var n,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?r[n]=T(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},z=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,P=new RegExp(z.source,"g"),R=function(t,e){var n,r,i,o=z.lastIndex=P.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=z.exec(t))&&(r=P.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:I(n,r)})),o=P.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?c(u[0].x):l(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},T=function(t,n){var r,i=typeof n;return null==n||"boolean"===i?_(n):("number"===i?I:"string"===i?(r=e.color(n))?(n=r,D):R:n instanceof e.color?D:n instanceof Date?M:Array.isArray(n)?O:isNaN(n)?j:I)(t,n)},U=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}},F=180/Math.PI,V={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},L=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*F,skewX:Math.atan(u)*F,scaleX:a,scaleY:s}},W=d(A,"px, ","px)","deg)"),Y=d(p,", ",")",")"),Q=Math.SQRT2,H=2,q=4,X=1e-12,G=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],l=e[2],c=s-i,A=u-o,p=c*c+A*A;if(p<X)r=Math.log(l/a)/Q,n=function(t){return[i+t*c,o+t*A,a*Math.exp(Q*t*r)]};else{var d=Math.sqrt(p),g=(l*l-a*a+q*p)/(2*a*H*d),y=(l*l-a*a-q*p)/(2*l*H*d),v=Math.log(Math.sqrt(g*g+1)-g),C=Math.log(Math.sqrt(y*y+1)-y);r=(C-v)/Q,n=function(t){var e=t*r,n=h(v),s=a/(H*d)*(n*m(Q*e+v)-f(v));return[i+s*c,o+s*A,a*n/h(Q*e+v)]}}return n.duration=1e3*r,n},K=g(o),J=g(s),Z=v(o),$=v(s),tt=C(o),et=C(s),nt=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n};t.interpolate=T,t.interpolateArray=O,t.interpolateBasis=k,t.interpolateBasisClosed=E,t.interpolateDate=M,t.interpolateNumber=I,t.interpolateObject=j,t.interpolateRound=U,t.interpolateString=R,t.interpolateTransformCss=W,t.interpolateTransformSvg=Y,t.interpolateZoom=G,t.interpolateRgb=D,t.interpolateRgbBasis=S,t.interpolateRgbBasisClosed=N,t.interpolateHsl=K,t.interpolateHslLong=J,t.interpolateLab=y,t.interpolateHcl=Z,t.interpolateHclLong=$,t.interpolateCubehelix=tt,t.interpolateCubehelixLong=et,t.quantize=nt,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function n(){}function r(t){var e;return t=(t+"").trim().toLowerCase(),(e=I.exec(t))?(e=parseInt(e[1],16),new u(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=j.exec(t))?i(parseInt(e[1],16)):(e=z.exec(t))?new u(e[1],e[2],e[3],1):(e=P.exec(t))?new u(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=R.exec(t))?o(e[1],e[2],e[3],e[4]):(e=T.exec(t))?o(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=U.exec(t))?l(e[1],e[2]/100,e[3]/100,1):(e=F.exec(t))?l(e[1],e[2]/100,e[3]/100,e[4]):V.hasOwnProperty(t)?i(V[t]):"transparent"===t?new u(NaN,NaN,NaN,0):null}function i(t){return new u(t>>16&255,t>>8&255,255&t,1)}function o(t,e,n,r){return r<=0&&(t=e=n=NaN),new u(t,e,n,r)}function a(t){return t instanceof n||(t=r(t)),t?(t=t.rgb(),new u(t.r,t.g,t.b,t.opacity)):new u}function s(t,e,n,r){return 1===arguments.length?a(t):new u(t,e,n,null==r?1:r)}function u(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function l(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new p(t,e,n,r)}function c(t){if(t instanceof p)return new p(t.h,t.s,t.l,t.opacity);if(t instanceof n||(t=r(t)),!t)return new p;if(t instanceof p)return t;t=t.rgb();var e=t.r/255,i=t.g/255,o=t.b/255,a=Math.min(e,i,o),s=Math.max(e,i,o),u=NaN,l=s-a,c=(s+a)/2;return l?(u=e===s?(i-o)/l+6*(i<o):i===s?(o-e)/l+2:(e-i)/l+4,l/=c<.5?s+a:2-s-a,u*=60):l=c>0&&c<1?0:u,new p(u,l,c,t.opacity)}function A(t,e,n,r){return 1===arguments.length?c(t):new p(t,e,n,null==r?1:r)}function p(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function d(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function h(t){if(t instanceof m)return new m(t.l,t.a,t.b,t.opacity);if(t instanceof x){var e=t.h*L;return new m(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof u||(t=a(t));var n=C(t.r),r=C(t.g),i=C(t.b),o=g((.4124564*n+.3575761*r+.1804375*i)/Q),s=g((.2126729*n+.7151522*r+.072175*i)/H),l=g((.0193339*n+.119192*r+.9503041*i)/q);return new m(116*s-16,500*(o-s),200*(s-l),t.opacity)}function f(t,e,n,r){return 1===arguments.length?h(t):new m(t,e,n,null==r?1:r)}function m(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function g(t){return t>J?Math.pow(t,1/3):t/K+X}function y(t){return t>G?t*t*t:K*(t-X)}function v(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function C(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function b(t){if(t instanceof x)return new x(t.h,t.c,t.l,t.opacity);t instanceof m||(t=h(t));var e=Math.atan2(t.b,t.a)*W;return new x(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function B(t,e,n,r){return 1===arguments.length?b(t):new x(t,e,n,null==r?1:r)}function x(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function w(t){if(t instanceof E)return new E(t.h,t.s,t.l,t.opacity);t instanceof u||(t=a(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(ot*r+rt*e-it*n)/(ot+rt-it),o=r-i,s=(nt*(n-i)-tt*o)/et,l=Math.sqrt(s*s+o*o)/(nt*i*(1-i)),c=l?Math.atan2(s,o)*W-120:NaN;return new E(c<0?c+360:c,l,i,t.opacity)}function k(t,e,n,r){return 1===arguments.length?w(t):new E(t,e,n,null==r?1:r)}function E(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}var _=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},D=.7,S=1/D,N="\\s*([+-]?\\d+)\\s*",O="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",M="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",I=/^#([0-9a-f]{3})$/,j=/^#([0-9a-f]{6})$/,z=new RegExp("^rgb\\("+[N,N,N]+"\\)$"),P=new RegExp("^rgb\\("+[M,M,M]+"\\)$"),R=new RegExp("^rgba\\("+[N,N,N,O]+"\\)$"),T=new RegExp("^rgba\\("+[M,M,M,O]+"\\)$"),U=new RegExp("^hsl\\("+[O,M,M]+"\\)$"),F=new RegExp("^hsla\\("+[O,M,M,O]+"\\)$"),V={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_(n,r,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),_(u,s,e(n,{brighter:function(t){return t=null==t?S:Math.pow(S,t),new u(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?D:Math.pow(D,t),new u(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),_(p,A,e(n,{brighter:function(t){return t=null==t?S:Math.pow(S,t),new p(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?D:Math.pow(D,t),new p(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new u(d(t>=240?t-240:t+120,i,r),d(t,i,r),d(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var L=Math.PI/180,W=180/Math.PI,Y=18,Q=.95047,H=1,q=1.08883,X=4/29,G=6/29,K=3*G*G,J=G*G*G;_(m,f,e(n,{brighter:function(t){return new m(this.l+Y*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new m(this.l-Y*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=H*y(t),e=Q*y(e),n=q*y(n),new u(v(3.2404542*e-1.5371385*t-.4985314*n),v(-.969266*e+1.8760108*t+.041556*n),v(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),_(x,B,e(n,{brighter:function(t){return new x(this.h,this.c,this.l+Y*(null==t?1:t),this.opacity)},darker:function(t){return new x(this.h,this.c,this.l-Y*(null==t?1:t),this.opacity)},rgb:function(){return h(this).rgb()}}));var Z=-.14861,$=1.78277,tt=-.29227,et=-.90649,nt=1.97294,rt=nt*et,it=nt*$,ot=$*tt-et*Z;_(E,k,e(n,{brighter:function(t){return t=null==t?S:Math.pow(S,t),new E(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?D:Math.pow(D,t),new E(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*L,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new u(255*(e+n*(Z*r+$*i)),255*(e+n*(tt*r+et*i)),255*(e+n*(nt*r)),this.opacity)}})),t.color=r,t.rgb=s,t.hsl=A,t.lab=f,t.hcl=B,t.cubehelix=k,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){"use strict";function r(t,e){var n=e.layoutY-t.layoutY;if(0!==n)return n;var r=t.layoutX-e.layoutX;return r}function i(t,e){var n=t.layoutY-e.layoutY;if(0!==n)return n;var r=t.layoutX-e.layoutX;return r}function o(t){var e=f.hierarchy(t),n=f.tree();return l(n(e))}function a(t){var e=f.hierarchy(t),n=f.cluster();return l(n(e))}function s(t,e){var n=(t-90)/180*Math.PI,r=e,i=.5;return{x:i+r*Math.cos(n),y:i+r*Math.sin(n)}}function u(t){var e=f.hierarchy(t),n=f.cluster().size([360,.4]).separation(function(t,e){return(t.parent==e.parent?1:2)/t.depth}),r=n(e);r.each(function(t){var e=s(t.x,t.y),n=t.data;n.layoutX=t.x,n.layoutY=t.y,n.x=e.x,n.y=e.y})}function l(t){return t.each(function(t){t.data.layoutX=t.data.x=t.x,t.data.layoutY=t.data.y=t.y}),t}function c(t,e,n,r){var i=r.baseFontSize,o=r.zoom,a=i*o,s=n.name.split("."),u=s.pop();"**"==u&&(u=s.pop()+".**");var l=n.layoutX||0,c=l<180==!!n.children?"start":"end",A=l<180?l-90:l+90,p=("start"===c?15:-15)*o,d="rotate("+A+"),translate("+p+", 0)";return h.h("text",{className:"name","text-anchor":c,transform:d,"font-size":a}," ",u," ")}function A(t,e,n,r){var i=(r.baseRadius,r.baseFontSize),o=(r.baseStrokeWidth,r.baseNodeStrokeWidth,r.zoom),a=i*o,s=n.name.split("."),u=s.pop();"**"==u&&(u=s.pop()+".**");var l="rotate(-15),translate(0, "+-15*o+")";return h.h("text",{className:"name","text-anchor":"middle",transform:l,"font-size":a}," ",u," ")}function p(t,e){var n=e.baseStrokeWidth*e.zoom,r=function(t){var e={x:t.animX,y:t.animY},n={x:t._parent.animX,y:t._parent.animY};return"M"+[e.x,e.y]+" "+[n.x,n.y]};return h.h("path",{d:r(t),"stroke-width":n,className:"link"})}function d(t,e){var n=e.baseStrokeWidth*e.zoom,r=function(t){var e={x:t.animX,y:t.animY},n={x:t._parent.animX,y:t._parent.animY},r=(e.y+n.y)/2;return"M "+e.x+" "+e.y+" C "+e.x+" "+r+", "+n.x+" "+r+", "+n.x+" "+n.y};return h.h("path",{d:r(t),"stroke-width":n,className:"link"})}Object.defineProperty(e,"__esModule",{value:!0});var h=n(1),f=n(17);e.RENDERER_PRESETS={Tree:{layoutFn:o,sortNodesFn:i,labelRenderFn:A,edgeRenderFn:d},Cluster:{layoutFn:a,sortNodesFn:i,labelRenderFn:A,edgeRenderFn:d},Radial:{layoutFn:u,sortNodesFn:r,labelRenderFn:c,edgeRenderFn:p}};var m=e.RENDERER_PRESETS.Tree;e.DEFAULT_RENDERER={baseRadius:10,baseFontSize:12,baseStrokeWidth:2,baseNodeStrokeWidth:2,zoom:1,layoutFn:m.layoutFn,sortNodesFn:m.sortNodesFn,labelRenderFn:m.labelRenderFn,edgeRenderFn:m.edgeRenderFn},e.BOTTOM_TO_TOP_SORT=r,e.TOP_TO_BOTTOM_SORT=i,e.TREE_LAYOUT=o,e.CLUSTER_LAYOUT=a,e.RADIAL_LAYOUT=u,e.RADIAL_TEXT=c,e.SLANTED_TEXT=A,e.RADIAL_EDGE=p,e.TREE_EDGE=d},function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(t,e){return t.parent===e.parent?1:2}function n(t){return t.reduce(r,0)/t.length}function r(t,e){return t+e.x}function i(t){return 1+t.reduce(o,0)}function o(t,e){return Math.max(t,e.y)}function a(t){for(var e;e=t.children;)t=e[0];return t}function s(t){for(var e;e=t.children;)t=e[e.length-1];return t}function u(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function l(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function c(t,e){var n,r,i,o,a,s=new f(t),u=+t.value&&(s.value=t.value),l=[s];for(null==e&&(e=p);n=l.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)l.push(r=n.children[o]=new f(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(h)}function A(){return c(this).eachBefore(d)}function p(t){return t.children}function d(t){t.data=t.data.data}function h(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function f(t){this.data=t,this.depth=this.height=0,this.parent=null}function m(t){this._=t,this.next=null}function g(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r-e.r;return i*i+1e-6>n*n+r*r}function y(t,e){var n,r,i,o=null,a=t.head;switch(e.length){case 1:n=v(e[0]);break;case 2:n=C(e[0],e[1]);break;case 3:n=b(e[0],e[1],e[2])}for(;a;)i=a._,r=a.next,n&&g(n,i)?o=a:(o?(t.tail=o,o.next=null):t.head=t.tail=null,e.push(i),n=y(t,e),e.pop(),t.head?(a.next=t.head,t.head=a):(a.next=null,t.head=t.tail=a),o=t.tail,o.next=r),a=r;return t.tail=o,n}function v(t){return{x:t.x,y:t.y,r:t.r}}function C(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,l=a-r,c=s-i,A=Math.sqrt(u*u+l*l);return{x:(n+o+u/A*c)/2,y:(r+a+l/A*c)/2,r:(A+i+s)/2}}function b(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,l=n.x,c=n.y,A=n.r,p=2*(r-a),d=2*(i-s),h=2*(u-o),f=r*r+i*i-o*o-a*a-s*s+u*u,m=2*(r-l),g=2*(i-c),y=2*(A-o),v=r*r+i*i-o*o-l*l-c*c+A*A,C=m*d-p*g,b=(d*v-g*f)/C-r,B=(g*h-d*y)/C,x=(m*f-p*v)/C-i,w=(p*y-m*h)/C,k=B*B+w*w-1,E=2*(b*B+x*w+o),_=b*b+x*x-o*o,D=(-E-Math.sqrt(E*E-4*k*_))/(2*k);return{x:b+B*D+r,y:x+w*D+i,r:D}}function B(t,e,n){var r=t.x,i=t.y,o=e.r+n.r,a=t.r+n.r,s=e.x-r,u=e.y-i,l=s*s+u*u;if(l){var c=.5+((a*=a)-(o*=o))/(2*l),A=Math.sqrt(Math.max(0,2*o*(a+l)-(a-=l)*a-o*o))/(2*l);n.x=r+c*s+A*u,n.y=i+c*u-A*s}else n.x=r+a,n.y=i}function x(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-1e-6>n*n+r*r}function w(t,e,n){var r=t._,i=t.next._,o=r.r+i.r,a=(r.x*i.r+i.x*r.r)/o-e,s=(r.y*i.r+i.y*r.r)/o-n;return a*a+s*s}function k(t){this._=t,this.next=null,this.previous=null}function E(t){if(!(i=t.length))return 0;var e,n,r,i;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;B(n,e,r=t[2]);var o,a,s,u,l,c,A,p=e.r*e.r,d=n.r*n.r,h=r.r*r.r,f=p+d+h,m=p*e.x+d*n.x+h*r.x,g=p*e.y+d*n.y+h*r.y;e=new k(e),n=new k(n),r=new k(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){B(e._,n._,r=t[s]),r=new k(r),u=n.next,l=e.previous,c=n._.r,A=e._.r;do if(c<=A){if(x(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}c+=u._.r,u=u.next}else{if(x(l._,r._)){e=l,e.next=n,n.previous=e,--s;continue t}A+=l._.r,l=l.previous}while(u!==l.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,f+=h=r._.r*r._.r,m+=h*r._.x,g+=h*r._.y,p=w(e,o=m/f,a=g/f);(r=r.next)!==n;)(h=w(r,o,a))<p&&(e=r,p=h);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=it(e),s=0;s<i;++s)e=t[s],e.x-=r.x,e.y-=r.y;return r.r}function _(t){return null==t?null:D(t)}function D(t){if("function"!=typeof t)throw new Error;return t}function S(){return 0}function N(t){return Math.sqrt(t.value)}function O(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function M(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=E(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function I(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function j(t){return t.id}function z(t){return t.parentId}function P(t,e){return t.parent===e.parent?1:2}function R(t){var e=t.children;return e?e[0]:t.t}function T(t){var e=t.children;return e?e[e.length-1]:t.t}function U(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function F(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function V(t,e,n){return t.a.parent===e.parent?t.a:n}function L(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function W(t){for(var e,n,r,i,o,a=new L(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new L(r[i],i)),n.parent=e;return(a.parent=new L(null,0)).children=[a],a}function Y(t,e,n,r,i,o){for(var a,s,u,l,c,A,p,d,h,f,m,g=[],y=e.children,v=0,C=0,b=y.length,B=e.value;v<b;){u=i-n,l=o-r;do c=y[C++].value;while(!c&&C<b);for(A=p=c,f=Math.max(l/u,u/l)/(B*t),m=c*c*f,h=Math.max(p/m,m/A);C<b;++C){if(c+=s=y[C].value,s<A&&(A=s),s>p&&(p=s),m=c*c*f,d=Math.max(p/m,m/A),d>h){c-=s;break}h=d}g.push(a={value:c,dice:u<l,children:y.slice(v,C)}),a.dice?lt(a,n,r,i,B?r+=l*c/B:o):mt(a,n,r,B?n+=u*c/B:i,o),B-=c,v=C}return g}var Q=function(){function t(t){var e,c=0;t.eachAfter(function(t){var o=t.children;o?(t.x=n(o),t.y=i(o)):(t.x=e?c+=r(t,e):0,t.y=0,e=t)});var A=a(t),p=s(t),d=A.x-r(A,p)/2,h=p.x+r(p,A)/2;return t.eachAfter(l?function(e){e.x=(e.x-t.x)*o,e.y=(t.y-e.y)*u}:function(e){e.x=(e.x-d)/(h-d)*o,e.y=(1-(t.y?e.y/t.y:1))*u})}var r=e,o=1,u=1,l=!1;return t.separation=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(l=!1,o=+e[0],u=+e[1],t):l?null:[o,u]},t.nodeSize=function(e){return arguments.length?(l=!0,o=+e[0],u=+e[1],t):l?[o,u]:null},t},H=function(){return this.eachAfter(u)},q=function(t){var e,n,r,i,o=this,a=[o];do for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);while(a.length);return this},X=function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},G=function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},K=function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},J=function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},Z=function(t){for(var e=this,n=l(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},$=function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},tt=function(){var t=[];return this.each(function(e){t.push(e)}),t},et=function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},nt=function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e};f.prototype=c.prototype={constructor:f,count:H,each:q,eachAfter:G,eachBefore:X,sum:K,sort:J,path:Z,ancestors:$,descendants:tt,leaves:et,links:nt,copy:A};var rt=function(t){for(var e,n=(t=t.slice()).length,r=null,i=r;n;){var o=new m(t[n-1]);i=i?i.next=o:r=o,t[e]=t[--n]}return{head:r,tail:i}},it=function(t){return y(rt(t),[])},ot=function(t){return E(t),t},at=function(t){return function(){return t}},st=function(){function t(t){return t.x=n/2,t.y=r/2,e?t.eachBefore(O(e)).eachAfter(M(i,.5)).eachBefore(I(1)):t.eachBefore(O(N)).eachAfter(M(S,1)).eachAfter(M(i,t.r/Math.min(n,r))).eachBefore(I(Math.min(n,r)/(2*t.r))),t}var e=null,n=1,r=1,i=S;return t.radius=function(n){return arguments.length?(e=_(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i="function"==typeof e?e:at(+e),t):i},t},ut=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},lt=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,l=t.value&&(r-e)/t.value;++s<u;)o=a[s],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*l},ct=function(){function t(t){var a=t.height+1;return t.x0=t.y0=i,t.x1=n,t.y1=r/a,t.eachBefore(e(r,a)),o&&t.eachBefore(ut),t}function e(t,e){return function(n){n.children&&lt(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var r=n.x0,o=n.y0,a=n.x1-i,s=n.y1-i;a<r&&(r=a=(r+a)/2),s<o&&(o=s=(o+s)/2),n.x0=r,n.y0=o,n.x1=a,n.y1=s}}var n=1,r=1,i=0,o=!1;return t.round=function(e){return arguments.length?(o=!!e,t):o},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i=+e,t):i},t},At="$",pt={depth:-1},dt={},ht=function(){function t(t){var r,i,o,a,s,u,l,c=t.length,A=new Array(c),p={};for(i=0;i<c;++i)r=t[i],s=A[i]=new f(r),null!=(u=e(r,i,t))&&(u+="")&&(l=At+(s.id=u),p[l]=l in p?dt:s);for(i=0;i<c;++i)if(s=A[i],u=n(t[i],i,t),null!=u&&(u+="")){if(a=p[At+u],!a)throw new Error("missing: "+u);if(a===dt)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=pt,o.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(h),o.parent=null,c>0)throw new Error("cycle");return o}var e=j,n=z;return t.id=function(n){return arguments.length?(e=D(n),t):e},t.parentId=function(e){return arguments.length?(n=D(e),t):n},t};L.prototype=Object.create(f.prototype);var ft=function(){function t(t){var r=W(t);if(r.eachAfter(e),r.parent.m=-r.z,r.eachBefore(n),u)t.eachBefore(i);else{var l=t,c=t,A=t;t.eachBefore(function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>A.depth&&(A=t)});var p=l===c?1:o(l,c)/2,d=p-l.x,h=a/(c.x+p+d),f=s/(A.depth||1);t.eachBefore(function(t){t.x=(t.x+d)*h,t.y=t.depth*f})}return t}function e(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e){F(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+o(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+o(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var r,i=t,a=t,s=e,u=i.parent.children[0],l=i.m,c=a.m,A=s.m,p=u.m;s=T(s),
i=R(i),s&&i;)u=R(u),a=T(a),a.a=t,r=s.z+A-i.z-l+o(s._,i._),r>0&&(U(V(s,t,n),t,r),l+=r,c+=r),A+=s.m,l+=i.m,p+=u.m,c+=a.m;s&&!T(a)&&(a.t=s,a.m+=A-c),i&&!R(u)&&(u.t=i,u.m+=l-p,n=t)}return n}function i(t){t.x*=a,t.y=t.depth*s}var o=P,a=1,s=1,u=null;return t.separation=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(u=!1,a=+e[0],s=+e[1],t):u?null:[a,s]},t.nodeSize=function(e){return arguments.length?(u=!0,a=+e[0],s=+e[1],t):u?[a,s]:null},t},mt=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,l=t.value&&(i-n)/t.value;++s<u;)o=a[s],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*l},gt=(1+Math.sqrt(5))/2,yt=function t(e){function n(t,n,r,i,o){Y(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(gt),vt=function(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=o,t.eachBefore(e),a=[0],r&&t.eachBefore(ut),t}function e(t){var e=a[t.depth],r=t.x0+e,i=t.y0+e,o=t.x1-e,p=t.y1-e;o<r&&(r=o=(r+o)/2),p<i&&(i=p=(i+p)/2),t.x0=r,t.y0=i,t.x1=o,t.y1=p,t.children&&(e=a[t.depth+1]=s(t)/2,r+=A(t)-e,i+=u(t)-e,o-=l(t)-e,p-=c(t)-e,o<r&&(r=o=(r+o)/2),p<i&&(i=p=(i+p)/2),n(t,r,i,o,p))}var n=yt,r=!1,i=1,o=1,a=[0],s=S,u=S,l=S,c=S,A=S;return t.round=function(e){return arguments.length?(r=!!e,t):r},t.size=function(e){return arguments.length?(i=+e[0],o=+e[1],t):[i,o]},t.tile=function(e){return arguments.length?(n=D(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(s="function"==typeof e?e:at(+e),t):s},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(u="function"==typeof e?e:at(+e),t):u},t.paddingRight=function(e){return arguments.length?(l="function"==typeof e?e:at(+e),t):l},t.paddingBottom=function(e){return arguments.length?(c="function"==typeof e?e:at(+e),t):c},t.paddingLeft=function(e){return arguments.length?(A="function"==typeof e?e:at(+e),t):A},t},Ct=function(t,e,n,r,i){function o(t,e,n,r,i,a,s){if(t>=e-1){var l=u[t];return l.x0=r,l.y0=i,l.x1=a,l.y1=s,void 0}for(var A=c[t],p=n/2+A,d=t+1,h=e-1;d<h;){var f=d+h>>>1;c[f]<p?d=f+1:h=f}p-c[d-1]<c[d]-p&&t+1<d&&--d;var m=c[d]-A,g=n-m;if(a-r>s-i){var y=(r*g+a*m)/n;o(t,d,m,r,i,y,s),o(d,e,g,y,i,a,s)}else{var v=(i*g+s*m)/n;o(t,d,m,r,i,a,v),o(d,e,g,r,v,a,s)}}var a,s,u=t.children,l=u.length,c=new Array(l+1);for(c[0]=s=a=0;a<l;++a)c[a+1]=s+=u[a].value;o(0,l,t.value,e,n,r,i)},bt=function(t,e,n,r,i){(1&t.depth?mt:lt)(t,e,n,r,i)},Bt=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,l,c,A=-1,p=a.length,d=t.value;++A<p;){for(s=a[A],u=s.children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?lt(s,n,r,i,r+=(o-r)*s.value/d):mt(s,n,r,n+=(i-n)*s.value/d,o),d-=s.value}else t._squarify=a=Y(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(gt);t.cluster=Q,t.hierarchy=c,t.pack=st,t.packSiblings=ot,t.packEnclose=it,t.partition=ct,t.stratify=ht,t.tree=ft,t.treemap=vt,t.treemapBinary=Ct,t.treemapDice=lt,t.treemapSlice=mt,t.treemapSliceDice=bt,t.treemapSquarify=yt,t.treemapResquarify=Bt,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e){"use strict";function n(t){var e=Object.create(t);return Object.defineProperty(e,"visible",{get:function(){if(this.entered)return!0;var t=this._parent&&(this._parent.collapsed||!this._parent.visible);return!t}}),Object.defineProperty(e,"children",{get:function(){return this._children.filter(function(t){return t.visible})}}),Object.defineProperty(e,"totalDescendents",{get:function(){return this._children.reduce(function(t,e){return t+e.totalDescendents},this._children.length)}}),Object.defineProperty(e,"collapsed",{get:function(){return!this.entered&&this._collapsed&&this._children.length}}),e}Object.defineProperty(e,"__esModule",{value:!0}),e.createStateVisNode=n},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAAeklEQVQ4je2PwQmAMBAEpwuJLfkSJQ+txBKsT0RsxQj6uUAMXkTx4cOF+2R39i7w61X1wACYRMZIpo+NDthkJqXEiOdzXWiWgEuUxLAT5qAaWILQDORABozB+wq02h/tySXxZqvB2iXh5uYK1kpuwV6VlDyCvQqZD2sHTn0xdO0A9D4AAAAASUVORK5CYII="},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);n(21);var o=n(31),a=n(13),s=n(12),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.deregisterFns=[],e.state={transitions:[],pointerEvents:"auto"},e.cancelPreviousAnim=null,e.onMouseMove=function(t){var n=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r=n-t.clientY<65?"auto":"none";e.state.pointerEvents!=r&&e.setState({pointerEvents:r})},e}return r(e,t),e.create=function(t,n,r){void 0===r&&(r={}),n||(n=document.createElement("div"),n.id="uirTransitionVisualizer");var o=Object.assign({},r,{router:t}),a=function(){document.body.appendChild(n),i.render(i.h(e,o),n)};return"interactive"===document.readyState||"complete"===document.readyState?a():document.addEventListener("DOMContentLoaded",a,!1),n},e.prototype.componentDidMount=function(){var t=this,e=this.props.router.transitionService.onBefore({},function(e){t.setState({transitions:t.state.transitions.concat(e)});var n=750,r=t._div.children[0],i=function(){var e=r.scrollWidth-r.clientWidth+200;t.cancelPreviousAnim&&t.cancelPreviousAnim();var i=[e],o=[r.scrollLeft],u=t.props.maximumTransitions,l=function(){var e=t.state.transitions;e.length<=u||t.setState({transitions:e.slice(e.length-u)})},c=function(t){return r.scrollLeft=t[0]};t.cancelPreviousAnim=s.animatePath(i,o,n,c,l,a.easing.easeInOutCubic)};setTimeout(i,25)});this.deregisterFns.push(e),document.body.addEventListener("mousemove",this.onMouseMove),this.deregisterFns.push(function(){return document.body.removeEventListener("mousemove",t.onMouseMove)})},e.prototype.componentWillUnmount=function(){for(;this.deregisterFns.length;)this.deregisterFns.pop()()},e.prototype.render=function(){var t=this,e=this.state.pointerEvents;return i.h("div",{ref:function(e){return t._div=e}},i.h("div",{className:"transitionHistory",style:{pointerEvents:e}},this.state.transitions.map(function(t){return i.h("div",{key:t.$id},i.h(o.TransitionView,{transition:t}),i.h("div",{style:{minWidth:"18em",border:"1px solid transparent"}}))}),i.h("div",{style:{width:"200px",height:"1px"}})))},e}(i.Component);u.defaultProps={router:null,maximumTransitions:15},e.TransitionVisualizer=u},function(t,e,n){var r=n(22);"string"==typeof r&&(r=[[t.id,r,""]]);n(7)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(6)(),e.push([t.id,'.transitionHistory{display:flex;align-items:flex-end;position:fixed;left:0;bottom:0;right:0;padding:0 1em;overflow-x:scroll;z-index:2;pointer-events:none}.transitionHistory *{pointer-events:all;flex:0 0 auto}.fullScreen .transitionHistory{top:0}.transitionHistory .historyEntry{position:relative;text-align:center;padding:12px 30px;margin-bottom:6px;margin-right:6px;color:#000;cursor:pointer}.historyEntry:after,.transitionHistory .historyEntry:before{content:"";position:absolute;background:#a9a9a9;left:0;height:50.2%;width:100%;border:1px solid #000;box-sizing:border-box;z-index:-1}.transitionHistory .historyEntry:before{top:0;border-bottom:0;-webkit-transform:skew(40deg,0deg);transform:skew(40deg,0deg)}.transitionHistory .historyEntry:after{bottom:0;border-top:0;-webkit-transform:skew(-40deg,0deg);transform:skew(-40deg,0deg)}.historyEntry .summary{color:#fff;white-space:nowrap;font-size:small}.historyEntry .summary .transid{position:absolute;top:.1em;left:.85em;font-size:smaller}.historyEntry .summary .status{position:absolute;bottom:.1em;left:.85em;font-size:smaller}.historyEntry .summary .transname{font-weight:700;display:flex;flex-flow:row nowrap;align-items:center;justify-content:center}.historyEntry:after,.transitionHistory .historyEntry:before{background:#737373}.historyEntry:hover:after,.transitionHistory .historyEntry:hover:before{background:#a6a6a6}.historyEntry.success:after,.transitionHistory .historyEntry.success:before{background:#45803b}.historyEntry.success:hover:after,.transitionHistory .historyEntry.success:hover:before{background:#19a600}.historyEntry.error:after,.transitionHistory .historyEntry.error:before{background:#bf1f1d}.historyEntry.error:hover:after,.transitionHistory .historyEntry.error:hover:before{background:#e62622}.historyEntry.ignored:after,.transitionHistory .historyEntry.ignored:before{background:#e68b05}.historyEntry.ignored:hover:after,.transitionHistory .historyEntry.ignored:hover:before{background:#ff9808}.historyEntry.redirected:after,.transitionHistory .historyEntry.redirected:before{background:#e68b05}.historyEntry.redirected:hover:after,.transitionHistory .historyEntry.redirected:hover:before{background:#ff9808}.transitionHistory .keyvalue{display:flex;flex-flow:row nowrap;justify-content:space-between}.transitionDetail{border:1px solid #d3d3d3;font-size:small;transition:box-shadow .5s ease,border 1s ease}.transitionDetail .downArrow{position:relative;width:100%;bottom:-10px;margin-bottom:10px}.transitionDetail .downArrow:after,.transitionDetail .downArrow:before{content:"";position:absolute;border-left:10px solid transparent;border-right:10px solid transparent;top:100%;left:50%;margin-left:-10px}.transitionDetail .downArrow:before{border-top:10px solid #d3d3d3}.transitionDetail .downArrow:after{border-top:10px solid #fff;margin-top:-1px;z-index:1}.transitionDetail .panel-heading{text-align:center}.transitionDetail table{border-collapse:collapse}.transitionDetail th{text-align:center;font-size:small}.transitionDetail .uir-header>*{flex:0 1 auto}.transitionDetail .uir-header>* i{transition:all .5s ease}.transitionDetail table.paths{min-width:25em}.transitionDetail table.paths td{color:#fff;border:0;font-size:small;min-width:10em}.transitionDetail .summary .keyvalue{justify-content:flex-start!important;align-items:baseline}.transitionDetail .summary .keyvalue>div:nth-child(2){padding-left:.5em;font-weight:400}.transitionDetail table.summary{max-width:400px}.transitionDetail table.summary td{font-size:small;vertical-align:top}.transitionDetail table.summary td:first-child{white-space:nowrap}.transitionDetail table.summary td:nth-child(2){font-weight:700;padding-left:1em}.transitionDetail td{padding:0}.transitionDetail td .flowArrowCell{display:flex;flex-flow:column nowrap;align-items:stretch;justify-content:space-between;width:1em;transition:width .25s ease;height:auto}.transitionDetail.expand td .flowArrowCell{width:2em}.transitionDetail .exit .flowArrowSvg{right:0}.transitionDetail .enter .flowArrowSvg{left:0}.transitionDetail .flowArrowSvg.bottom{bottom:0}.transitionDetail .flowArrowSvg.top{top:0}.transitionDetail .flowArrowSvg{position:absolute;width:100%;height:auto;transition:width .25s ease}.transitionDetail .retain{background-color:#737273}.transitionDetail .exit{background-color:#7c1010}.transitionDetail .enter{background-color:#31592a}.transitionDetail .deemphasize{color:#eaeaea;font-size:x-small}.transitionDetail .params{background-color:hsla(0,0%,100%,.15);padding:0;opacity:0;overflow:hidden;transition:opacity 1s ease;max-height:0;max-width:150px}.transitionDetail.expand .params{display:block;border-radius:4px;box-shadow:1px 1px 2px #000;padding:.5em;max-height:250px;max-width:300px;overflow-y:auto;opacity:1;margin:.5em 0}.transitionDetail.pin{box-shadow:4px 4px 12px rgba(0,0,0,.3);border:1px solid #000}.transitionDetail.pin .downArrow:before{border-top-color:#000}.transitionDetail.expand table.paths td{max-height:100px;vertical-align:top}.transitionDetail .uirTransVisRow{display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:stretch}.transitionDetail .uirTransVisRow>div{flex:1 0 50%}.transitionDetail .uirNodeContent{display:flex;flex-flow:row nowrap;min-height:1em;transition:min-height .25s ease}.transitionDetail.expand .uirNodeContent{min-height:5em}.transitionDetail .uirNodeDetail{flex:1 0 auto;padding:.2em .5em}.transitionDetail .statename{font-weight:bolder;margin-right:1em;margin-left:0}.transitionDetail .enter .statename{margin-right:0;margin-left:1em}.transitionDetail .nowrap{white-space:nowrap}.transitionHistory .paramid{font-weight:bolder;color:#eaeaea;margin-right:.5em}.transitionHistory .paramslabel,.transitionHistory .resolvelabel{color:#fff;margin-top:-.5em;text-align:center;font-weight:700}.transitionHistory .paramvalue{color:#e6e6e6}span.link{cursor:pointer;text-decoration:underline}.tooltip-right{display:inline;position:relative;transition:all 1.5s ease}.tooltip-right:after{color:transparent;text-decoration:none;transition:all 1.5s ease}.tooltip-right:hover:after{bottom:0;color:rgba(0,0,0,.5);content:attr(title);display:block;position:absolute;white-space:nowrap;font-size:smaller}.uir-modal .btn-primary{color:#fff;background-color:#337ab7;border-color:#2e6da4}.uir-modal .btn{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px}.btn-group-xs>.btn,.uir-modal .btn-xs{padding:1px 5px;font-size:12px;line-height:1.5;border-radius:3px}.transitionDetail span.link{color:#fff}.transitionHistory :not(.fa):not(pre){font-family:Arial,Helvetica,sans-serif}.transitionDetail .enter .uir-header{flex-flow:row nowrap}.transitionDetail .uir-header{display:flex;flex-flow:row-reverse nowrap;justify-content:space-between;align-items:baseline}.transitionDetail .retain .uir-header{justify-content:center}.uir-panel{margin-bottom:20px;background-color:#fff;border:1px solid #d3d3d3;border-radius:4px;box-shadow:0 1px 1px rgba(0,0,0,.05)}.uir-panel-heading{color:#333;background-color:#f5f5f5;border-color:#ddd;padding:10px 15px;border-bottom:1px solid transparent;border-top-left-radius:3px;border-top-right-radius:3px}.uir-panel-title{margin-top:0;margin-bottom:0;font-size:16px;color:inherit}.uir-panel-body{padding:15px}.uir-fade{opacity:0;transition:opacity .15s linear}.uir-fade.in{opacity:1}.uir-modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:#000}.uir-modal-backdrop.in{filter:alpha(opacity=50);opacity:.5}.uir-modal{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1050;display:block;overflow-y:auto;-webkit-overflow-scrolling:touch;outline:0}.uir-modal-dialog{position:relative;width:auto;margin:10px}.uir-modal-content{position:relative;background-color:#fff;background-clip:padding-box;border:1px solid #999;border:1px solid rgba(0,0,0,.2);border-radius:6px;outline:0;box-shadow:0 3px 9px rgba(0,0,0,.5)}.uir-modal-header{padding:15px;border-bottom:1px solid #e5e5e5}.uir-resolve-header{display:flex;flex-flow:row nowrap;justify-content:space-between;background-color:#6495ed}.uir-modal-body{color:#000;position:relative;padding:15px}.uir-modal-footer{padding:15px;text-align:right;border-top:1px solid #e5e5e5}.uir-icon{display:inline-block;height:1em;width:1em;margin:.25em;background-size:cover;background-position:0 0}.uir-spin{animation:uirspin 2s infinite;transform:rotate(0deg)}.uir-rotate-35{transform:rotate(35deg);opacity:.5}@keyframes uirspin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.uir-iconw-spinner{background-image:url('+n(23)+")}.uir-iconw-check{background-image:url("+n(24)+")}.uir-iconw-circle-o{background-image:url("+n(25)+")}.uir-iconw-share{background-image:url("+n(26)+")}.uir-iconw-close{background-image:url("+n(27)+")}.uir-icon-thumb-tack{background-image:url("+n(28)+")}.uir-icon-toggle-on{background-image:url("+n(29)+")}.uir-icon-toggle-off{background-image:url("+n(30)+")}","",{version:3,sources:["/./src/transition/transitionVisualizer.css"],names:[],mappings:"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",file:"transitionVisualizer.css",sourcesContent:['/*\n    .transitionHistory is the breadcrumbs and transition details block.\n    It fills the footer of the screen, and scrolls horizontally.\n    Mouse clicks should pass through to the elements underneath.\n*/\n\n.transitionHistory {\n    display: flex;\n    align-items: flex-end;\n    position: fixed;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    padding: 0 1em;\n    overflow-x: scroll;\n    z-index: 2;\n    /* disable mouse clicks, hover, etc, for the overall div */\n    pointer-events: none;\n}\n\n.transitionHistory * {\n    /* Enable mouse for any sub-elements (the breadcrumb elemetns and detail elements) */\n    pointer-events: all;\n    flex: 0 0 auto;\n}\n\n/*  workaround for modal screen, and chrome and safari not allowing it to be\n    visible outside the .transitionHistory overflow while the .transitionHistory div is scrolled */\n.fullScreen .transitionHistory {\n    top: 0;\n}\n\n/* A single history entry (breadcrumb) arrow looking thing */\n.transitionHistory .historyEntry {\n    position: relative;\n    text-align: center;\n    padding: 12px 30px;\n    margin-bottom: 6px;\n    margin-right: 6px;\n    color: #000;\n    cursor: pointer;\n}\n\n\n/* History entry arrow CSS */\n.transitionHistory .historyEntry:before,.historyEntry:after {\n    content: \'\';\n    position: absolute;\n    background: darkgrey;\n    left: 0;\n    height: 50.2%; /* +0.2% so firefox doesn\'t render a white line down the center */\n    width: 100%;\n    border: 1px solid black;\n    box-sizing: border-box;\n    z-index: -1;\n}\n\n.transitionHistory .historyEntry:before {\n    top: 0;\n    border-bottom: 0;\n    -webkit-transform: skew(40deg, 0deg);\n    -ms-transform: skew(40deg, 0deg);\n    transform: skew(40deg, 0deg);\n}\n\n.transitionHistory .historyEntry:after {\n    bottom: 0;\n    border-top: 0;\n    -webkit-transform: skew(-40deg, 0deg);\n    -ms-transform: skew(-40deg, 0deg);\n    transform: skew(-40deg, 0deg);\n}\n\n/*.historyEntry::before height: 51% (|| ::after) */\n\n/* Styling for breadcrumb contents */\n.historyEntry .summary {\n    color: white;\n    white-space: nowrap;\n    font-size: small;\n}\n\n.historyEntry .summary .transid {\n    position: absolute;\n    top: 0.1em;\n    left: 0.85em;\n    font-size: smaller;\n}\n\n.historyEntry .summary .status {\n    position: absolute;\n    bottom: 0.1em;\n    left: 0.85em;\n    font-size: smaller;\n}\n.historyEntry .summary .transname {\n    font-weight: bold;\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n    justify-content: center\n}\n\n/* breadcrumb/history entry color coding */\n.transitionHistory .historyEntry:before,.historyEntry:after {\n    background: #737373;\n}\n.transitionHistory .historyEntry:hover:before,.historyEntry:hover:after {\n    background: #a6a6a6;\n}\n\n.transitionHistory .historyEntry.success:before,.historyEntry.success:after {\n    background: #45803b;\n}\n.transitionHistory .historyEntry.success:hover:before,.historyEntry.success:hover:after {\n    background: #19a600;\n}\n\n\n.transitionHistory .historyEntry.error:before,.historyEntry.error:after {\n    background: #bf1f1d;\n}\n.transitionHistory .historyEntry.error:hover:before,.historyEntry.error:hover:after {\n    background: #e62622;\n}\n\n\n.transitionHistory .historyEntry.ignored:before,.historyEntry.ignored:after {\n    background: #e68b05;\n}\n.transitionHistory .historyEntry.ignored:hover:before,.historyEntry.ignored:hover:after {\n    background: #ff9808;\n}\n\n.transitionHistory .historyEntry.redirected:before,.historyEntry.redirected:after {\n    background: #e68b05;\n}\n.transitionHistory .historyEntry.redirected:hover:before,.historyEntry.redirected:hover:after {\n    background: #ff9808;\n}\n\n.transitionHistory .keyvalue {\n    display: flex;\n    flex-flow: row nowrap;\n    justify-content: space-between;\n}\n\n\n\n\n\n\n\n/* The transition detail popover (when hovering over a breadcrumb) */\n.transitionDetail {\n    border: 1px solid lightgrey;\n    font-size: small;\n    transition: box-shadow 0.5s ease,  border 1.0s ease\n}\n\n/* Pointer element points from the transitionDetail to the breadcrumb */\n.transitionDetail .downArrow {\n    position: relative;\n    width: 100%;\n    bottom: -10px;\n    margin-bottom: 10px;\n}\n\n.transitionDetail .downArrow:before, .transitionDetail .downArrow:after {\n    content: "";\n    position: absolute;\n    border-left: 10px solid transparent;\n    border-right: 10px solid transparent;\n    top: 100%;\n    left: 50%;\n    margin-left: -10px;\n}\n\n.transitionDetail .downArrow:before {\n    border-top: 10px solid lightgray;\n}\n\n.transitionDetail .downArrow:after{\n    border-top: 10px solid white;\n    margin-top: -1px;\n    z-index: 1;\n}\n\n\n/* The layout and styling of the transition detail popover */\n.transitionDetail .panel-heading {\n    text-align: center;\n}\n\n.transitionDetail table {\n    border-collapse: collapse;\n}\n\n.transitionDetail th {\n    text-align: center;\n    font-size: small;\n}\n\n.transitionDetail .uir-header {\n    display: flex;\n    flex-flow: row-reverse nowrap;\n    justify-content: space-between;\n    align-items: baseline;\n}\n\n.transitionDetail .uir-header > *  {\n    flex: 0 1 auto;\n}\n\n.transitionDetail .uir-header > * i {\n    transition: all 0.5s ease;\n}\n\n.transitionDetail table.paths {\n    min-width: 25em;\n}\n\n.transitionDetail table.paths td {\n    color: white;\n    border: 0;\n    font-size: small;\n    min-width: 10em;\n}\n\n.transitionDetail .summary .keyvalue {\n    justify-content: flex-start !important;\n    align-items: baseline;\n}\n\n.transitionDetail .summary .keyvalue > div:nth-child(2){\n    padding-left: 0.5em;\n    font-weight: normal;\n}\n\n\n.transitionDetail table.summary {\n    max-width: 400px;\n}\n\n.transitionDetail table.summary td {\n    font-size: small;\n    vertical-align: top;\n}\n\n.transitionDetail table.summary td:nth-child(1) {\n    white-space: nowrap;\n}\n\n.transitionDetail table.summary td:nth-child(2) {\n    font-weight: bold;\n    padding-left: 1em;\n}\n\n\n.transitionDetail td {\n    padding: 0;\n}\n\n.transitionDetail td .flowArrowCell {\n    display: flex;\n    flex-flow: column nowrap;\n    align-items: stretch;\n    justify-content: space-between;\n    width: 1em;\n    transition: width 0.25s ease;\n    height: auto;\n}\n.transitionDetail.expand td .flowArrowCell { width: 2em; }\n\n.transitionDetail .exit  .flowArrowSvg          { right: 0; }\n.transitionDetail .enter .flowArrowSvg          { left: 0; }\n.transitionDetail        .flowArrowSvg.bottom   { bottom: 0 }\n.transitionDetail        .flowArrowSvg.top      { top: 0 }\n.transitionDetail        .flowArrowSvg {\n    position: absolute;\n    width: 100%;\n    height: auto;\n    transition: width 0.25s ease;\n}\n\n/* color code path elements by retained/exited/entered */\n.transitionDetail .retain {\n    background-color: #737273;\n}\n\n.transitionDetail .exit {\n    background-color: #7c1010;\n}\n\n.transitionDetail .enter {\n    background-color: #31592a;\n}\n\n.transitionDetail .deemphasize {\n    color: #eaeaea;\n    font-size: x-small;\n}\n\n/* Styling for parameter values and resolve values */\n.transitionDetail .params {\n    background-color: rgba(255,255,255,0.15);\n    padding: 0;\n    opacity: 0;\n    overflow: hidden;\n    transition: opacity 1s ease;\n    max-height: 0;\n    max-width: 150px;\n}\n\n.transitionDetail.expand .params {\n    display: block;\n    border-radius: 4px;\n    box-shadow: 1px 1px 2px black;\n    padding: 0.5em;\n    max-height: 250px;\n    max-width: 300px;\n    overflow-y: auto;\n    opacity: 1;\n    margin: 0.5em 0;\n}\n\n.transitionDetail.pin {\n    box-shadow: 4px 4px 12px rgba(0,0,0,0.3);\n    border: 1px solid black;\n}\n\n.transitionDetail.pin .downArrow:before {\n    border-top-color: black;\n}\n\n\n/* When showing expanded details, put space between path elements */\n.transitionDetail.expand table.paths td {\n    max-height: 100px;\n    vertical-align: top;\n}\n\n.transitionDetail .uirTransVisRow {\n    display: flex;\n    flex-flow: row nowrap;\n    justify-content: space-between;\n    align-items: stretch;\n}\n\n.transitionDetail .uirTransVisRow > div {\n    flex: 1 0 50%;\n}\n\n.transitionDetail .uirNodeContent {\n    display: flex;\n    flex-flow: row nowrap;\n    min-height: 1em;\n    transition: min-height 0.25s ease;\n}\n\n.transitionDetail.expand .uirNodeContent {\n    min-height: 5em;\n}\n\n.transitionDetail .uirNodeDetail {\n    flex: 1 0 auto;\n    padding: 0.2em 0.5em;\n}\n\n.transitionDetail .statename {\n    font-weight: bolder;\n    margin-right: 1em;\n    margin-left: 0;\n}\n.transitionDetail .enter .statename {\n    margin-right: 0;\n    margin-left: 1em;\n}\n\n.transitionDetail .nowrap {\n    white-space: nowrap;\n}\n\n.transitionHistory .paramid {\n    font-weight: bolder;\n    color: #eaeaea;\n    margin-right: 0.5em;\n}\n\n.transitionHistory .paramslabel {\n    color: white;\n    margin-top: -0.5em;\n    text-align: center;\n    font-weight: bold;\n}\n\n.transitionHistory .resolvelabel {\n    color: white;\n    margin-top: -0.5em;\n    text-align: center;\n    font-weight: bold;\n}\n\n.transitionHistory .paramvalue {\n    color: #e6e6e6;\n}\n\n\n\nspan.link {\n    cursor: pointer;\n    text-decoration: underline;\n}\n\n\n.tooltip-right {\n    display: inline;\n    position: relative;\n    transition: all 1.5s ease;\n}\n\n.tooltip-right:after {\n    color: rgba(0,0,0,0);\n    text-decoration: none;\n    transition: all 1.5s ease;\n}\n\n.tooltip-right:hover:after {\n    bottom: 0;\n    color: rgba(0,0,0,0.5);\n    content: attr(title);\n    display: block;\n    position: absolute;\n    white-space: nowrap;\n    font-size: smaller;\n}\n\n\n\n/* Bootstrap stuff */\n\n.uir-modal .btn-primary {\n    color: #fff;\n    background-color: #337ab7;\n    border-color: #2e6da4;\n}\n\n.uir-modal .btn {\n    display: inline-block;\n    padding: 6px 12px;\n    margin-bottom: 0;\n    font-size: 14px;\n    font-weight: normal;\n    line-height: 1.42857143;\n    text-align: center;\n    white-space: nowrap;\n    vertical-align: middle;\n    -ms-touch-action: manipulation;\n    touch-action: manipulation;\n    cursor: pointer;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    background-image: none;\n    border: 1px solid transparent;\n    border-radius: 4px;\n}\n\n.uir-modal .btn-xs, .btn-group-xs > .btn {\n    padding: 1px 5px;\n    font-size: 12px;\n    line-height: 1.5;\n    border-radius: 3px;\n}\n\n\n.transitionDetail span.link {\n    color: white;\n}\n\n.transitionHistory *:not(.fa):not(pre) {\n    font-family: Arial, Helvetica, sans-serif;\n}\n\n.transitionDetail .enter .uir-header {\n    flex-flow: row nowrap;\n}\n.transitionDetail .uir-header {\n    display: flex;\n    flex-flow: row-reverse nowrap;\n    justify-content: space-between;\n    align-items: baseline;\n}\n\n.transitionDetail .retain .uir-header {\n    justify-content: center;\n}\n\n.uir-panel {\n    margin-bottom: 20px;\n    background-color: #fff;\n    border: 1px solid lightgrey;\n    border-radius: 4px;\n    -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, .05);\n    box-shadow: 0 1px 1px rgba(0, 0, 0, .05);\n}\n\n.uir-panel-heading {\n    color: #333;\n    background-color: #f5f5f5;\n    border-color: #ddd;\n\n    padding: 10px 15px;\n    border-bottom: 1px solid transparent;\n    border-top-left-radius: 3px;\n    border-top-right-radius: 3px;\n}\n\n.uir-panel-title {\n    margin-top: 0;\n    margin-bottom: 0;\n    font-size: 16px;\n    color: inherit;\n}\n\n.uir-panel-body {\n    padding: 15px;\n}\n\n\n\n\n\n/* Styles go here */\n.uir-fade {\n    opacity: 0;\n    -webkit-transition: opacity .15s linear;\n    -o-transition: opacity .15s linear;\n    transition: opacity .15s linear;\n}\n\n.uir-fade.in {\n    opacity: 1;\n}\n\n.uir-modal-backdrop {\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 1040;\n    background-color: #000;\n}\n\n.uir-modal-backdrop.in {\n    filter: alpha(opacity=50);\n    opacity: .5;\n}\n\n.uir-modal {\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 1050;\n    display: block;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n    outline: 0;\n}\n\n\n.uir-modal-dialog {\n    position: relative;\n    width: auto;\n    margin: 10px;\n}\n\n.uir-modal-content {\n    position: relative;\n    background-color: #fff;\n    -webkit-background-clip: padding-box;\n    background-clip: padding-box;\n    border: 1px solid #999;\n    border: 1px solid rgba(0, 0, 0, .2);\n    border-radius: 6px;\n    outline: 0;\n    -webkit-box-shadow: 0 3px 9px rgba(0, 0, 0, .5);\n    box-shadow: 0 3px 9px rgba(0, 0, 0, .5);\n}\n\n.uir-modal-header {\n    padding: 15px;\n    border-bottom: 1px solid #e5e5e5;\n}\n\n.uir-resolve-header {\n    display: flex;\n    flex-flow: row nowrap;\n    justify-content: space-between;\n    background-color: cornflowerblue;\n}\n\n.uir-modal-body {\n    color: black;\n    position: relative;\n    padding: 15px;\n}\n\n.uir-modal-footer {\n    padding: 15px;\n    text-align: right;\n    border-top: 1px solid #e5e5e5;\n}\n\n.uir-icon {\n    display: inline-block;\n    height: 1em; width: 1em;\n    margin: 0.25em;\n    background-size: cover;\n    background-position: 0 0;\n}\n\n.uir-spin {\n    animation: uirspin 2s infinite;\n    transform: rotate(0deg);\n}\n\n.uir-rotate-35 {\n    transform: rotate(35deg);\n    opacity: 0.5;\n}\n\n@keyframes uirspin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n\n\n.uir-iconw-spinner       { background-image: url("../../images/w/16/spinner.png"); }\n.uir-iconw-check         { background-image: url("../../images/w/16/check.png"); }\n.uir-iconw-circle-o      { background-image: url("../../images/w/16/circle-o.png"); }\n.uir-iconw-share         { background-image: url("../../images/w/16/share.png"); }\n.uir-iconw-close         { background-image: url("../../images/w/16/close.png"); }\n\n.uir-icon-thumb-tack     { background-image: url("../../images/16/thumb-tack.png"); }\n.uir-icon-toggle-on      { background-image: url("../../images/16/toggle-on.png"); }\n.uir-icon-toggle-off     { background-image: url("../../images/16/toggle-off.png"); }\n'],
sourceRoot:"webpack://"}])},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAABCElEQVQ4ja2SMU4CYRCF34Db6RISmi04gCZacgDuYElDYcFZLLWx1c4b6BE0sbaysBEh0aCdm3w2szKQ/1cTmGSz+795897Mzm/KBGCSjv14bWbkuDmBCcuY5HitUNAGxsDQoSrwKuAAeATegVHKcexuX0AFdIELf7rAVejoranbCRpPkmpJU0kfZvYp6SQYvARu/F7pogJ2M7k94BS4BPbXkwYUSdW0WOFb+gFugVeg94/iHjADbqTlFlh7/6mzwt14hK0E0AHugbNfOOfAHVA2WLwHpaRDhdman2pmc4cGko4kdSQtUg79Rt3nnPl2CsdKoB9rYgcys+dwrCU9eEe15xdJ503iGzoj4fOiDj0FAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAAc0lEQVQ4jeXQuwmAQBCE4SvEOwOtwjK0KEEQDOzORyD28Rt4wnLoPYwEJ935Jlil/hUgB0agfItXzuyAScFG4Cu1WyqAAdARuHOxBjZ7nIFM4MWLbbFxShNQRWEx0uJPH/Osp5Ew9ozE45uRdCxGdLj1hRzpQwNP2Cwv6wAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAAzElEQVQ4jaWTPQ7CMAyFnzkL7IUNRtoDlPugSkxciwlWFrr0CHCGfgw4qGrTFBVLUST7+fnnJdKfZjEnYJLWkpbuaiTdzYxJRuAA1AytBsqp5BPQesIFOPu5uK8FqlTlFngCeSSeAy/HlP2gddreJzrMHfPwPX0Dm9B2csYPNoyTSdLC/WHb1ykCSTe/V12C2RYIGr93P+RsezmDJQ4U6OCK6BI9GGR8jchYjMrYAVU/PKRjckCg9Bb79ohVjn4mJ8rkUklqzOyerDzX3pD9HgkYdWTVAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAA0UlEQVQ4jb2SvQ4BQRSFz/WXSESF0G6j8g7iAXQa4QE0ai+ip9ZIRDTeQUGjUJJ4BUs+hdlkbVixEqeZyZ05352ZM9K/BCyAzi+AA3AFuuF65s3mvKSqpLKkoivnJaUlTQHfzGZRUw4YAGvgQrz8p+sAFWDzwfQK0gwAyy/NAEfAE+AlNNeD7r3IscZAC6gB2UgKz2aXQsnNb5LaZraKSfMkqWVm+/AD9h15HmMUMAp3Di80HGAYB3inlJltJe0knRMB3DjR45clE1AAvMSAX3QHLbpPOaoNWa0AAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAAlElEQVQ4jd3QMQqDQBhEYU8kpBZio41pTBov5B31IEFEhC+NkkU2a7pABrYZeI+dP8v+L7ggj/Q5LmdwgxkT6qCvt25GkxKM3pk2cIf3jClBi+UgCeEF7dmM2/bVYxbck3Ag6SOC/lv4imdEMKE6g6vI5uNNPkswHODH9kLJkBJ0WHc46HfJiu5sRoki0hcok/BP8gJcS0AygPBo+gAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAArElEQVQ4jbXSPQ5BQRiF4cdfZQWXpdgBW1LZjaugsgoqDdFfKpVEQ2huMcb9E3GSU8yXM2/OZD5+VKtglmCMTjR/YI1THTTFs8TzJq0myHDBLbic5c0aKc29CQBpUbDdlFimvwJ6ub9SHyvcff7AHcs8U6pZwcXYs6onjBq0fMvEm5hgEJwXOGAazDLBNnYjwMn7qu5wxLasTgyItce5KlAHOOBak6lUgmFV4AV5rTJf7ROKuAAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAApUlEQVQ4jcXSPQrCQBQE4E9B8Rg2gmW0UvEyegQP41XsDWirheDPIbQRtBAtTEACu4opMrDFsjPvvZl9VI1a4d5BF60A/4Y9TsWHPtZ4Bs4DG6Q4Y4VeLh7hGhEv0P5o1sQsKzSQjRMSL9EI2JngKCJ+YhwQ885vFytwRz1SAObfCD+htIVYiKlwiFMcYKjkN0LivRyxRdpmE10ybpL7+MTfq1wdXiIXWWLHZLTUAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAA4UlEQVQ4jcXSsUoDURAF0JPFDWmsrOxshBQKwcqI+Re3ttLCT/AP9FsEI2gW0wqSJUEb/YKk0ybEYp+wbHbXwiIXXvFm7p2Zd+exabRK93100anhf2OG93KBI9wE8QTbOESEZ3wFXgcHmOIcL3CCOS7QLnTbwx0eEBfibVwGzbEwTlIzcowRripyCd4gs+5FEaf4rIi3kEV4xKqhwBi72CnFV3iKGoTFTo346wkDfNQUziK5q2c14hjXuK3IJdiCvuY1Dn+JAWtrhJ7crAVSvGIpNyrFfThp4IyD5v9fefP4AeEQL7aw+eK/AAAAAElFTkSuQmCC"},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(32),a=n(43),s=n(39),u=n(44),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.transitionPromise=null,e.state={status:"running",message:null,rejection:null,pinned:!1,expanded:!1,open:!1,deregisterFunctions:[]},e.togglePin=function(){return e.setState({pinned:!e.state.pinned})},e.toggleExpand=function(){return e.setState({expanded:!e.state.expanded})},e.open=function(){return e.setState({open:!0})},e.close=function(){return e.setState({open:!1})},e}return r(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props.transition,n=function(e){t.transitionPromise.isCanceled||t.setState({message:e})},r=function(t){return t.name||"(root)"},i=[];i.push(e.onStart({},function(){return n("Starting...")},{priority:1e4})),i.push(e.onExit({},function(t,e){return n("Exiting "+r(e))},{priority:1e4})),i.push(e.onRetain({},function(t,e){return n("Retained "+r(e))},{priority:1e4})),i.push(e.onEnter({},function(t,e){return n("Entering "+r(e))},{priority:1e4})),i.push(e.onFinish({},function(){return n("Finishing...")})),this.setState({deregisterFunctions:i});var o=function(){return t.setState({status:"success",message:null})},a=function(e){if(!e||!e.isCanceled){var n="error",r=null;if(e){r=e&&e.message;var i=e&&e.type;if(2==i&&e.redirected===!0){n="redirected";var o=e.detail,a=o.name(),u=JSON.stringify(o.params());r=s.maxLength(100,a+"("+u)+")"}5==i&&(n="ignored",r="All states and parameters in the To and From paths are identical.")}t.setState({status:n,rejection:r,message:null})}};this.transitionPromise=u.makeCancelable(e.promise),this.transitionPromise.promise.then(o,a)},e.prototype.componentWillUnmount=function(){this.transitionPromise.cancel(),this.state.deregisterFunctions&&this.state.deregisterFunctions.forEach(function(t){return t()})},e.prototype.render=function(){return i.h("div",{onMouseEnter:this.open,onMouseLeave:this.close},i.h(o.TransitionPopover,{transition:this.props.transition,status:this.state.status,rejection:this.state.rejection,pinned:this.state.pinned,expanded:this.state.expanded,open:this.state.open,togglePinned:this.togglePin,toggleExpand:this.toggleExpand}),i.h(a.BreadcrumbArrow,{transition:this.props.transition,status:this.state.status,message:this.state.message,toggleExpand:this.toggleExpand}))},e}(i.Component);e.TransitionView=l},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(33),a=n(34),s=n(40),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){var t=this;if(!this.props.open&&!this.props.pinned)return null;var e=function(){return"transitionDetail uir-panel panel-default "+(t.props.pinned?"pin ":"")+(t.props.expanded?"expand ":"")+(t.props.open?"showDetail ":"")};return i.h("div",{className:e()},i.h(o.PopoverHeading,{transition:this.props.transition,pinned:this.props.pinned,expanded:this.props.expanded,togglePinned:this.props.togglePinned,toggleExpand:this.props.toggleExpand}),i.h("div",{className:"uir-panel-body"},i.h(a.TransSummary,{trans:this.props.transition,status:this.props.status,rejection:this.props.rejection}),i.h("hr",null),i.h(s.NodePaths,{transition:this.props.transition})),i.h("div",{className:"downArrow"}))},e}(i.Component);e.TransitionPopover=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){var t=this,e=function(){return"uir-icon uir-icon-thumb-tack "+(t.props.pinned?"":"uir-rotate-35")},n=function(){return"uir-icon tooltip-right "+(t.props.expanded?"uir-icon-toggle-on":"uir-icon-toggle-off")};return i.h("div",{className:"uir-panel-heading uir-header"},i.h("div",{style:{cursor:"pointer"},onClick:this.props.togglePinned},i.h("i",{className:e()})),i.h("h3",{className:"uir-panel-title"},"Transition #",this.props.transition.$id),i.h("div",{style:{cursor:"pointer"},onClick:this.props.toggleExpand},i.h("i",{className:n()})))},e}(i.Component);e.PopoverHeading=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(35),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){return i.h("table",{className:"summary"},i.h("tbody",null,i.h("tr",null,i.h("td",null,"From State:"),i.h("td",null,this.props.trans.from().name||"(root)")),i.h("tr",null,i.h("td",null,"To State:"),i.h("td",null,this.props.trans.to().name||"(root)")),i.h("tr",null,i.h("td",{colSpan:1},"Parameters:"),i.h("td",{colSpan:1},i.h(o.KeysAndValues,{data:this.props.trans.params(),labels:{section:"",modalTitle:"Parameter value: "},classes:{outerdiv:"",keyvaldiv:"keyvalue",section:"",_key:"",value:""}}))),i.h("tr",null,i.h("td",null,"Outcome:"),i.h("td",null,this.props.status,this.props.rejection?i.h("span",null,": ",this.props.rejection):null))))},e}(i.Component);e.TransSummary=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(36),a=n(37),s=n(39),u=function(t){return"object"==typeof t},l=function(t){return void 0===t?"undefined":null===t?"null":"string"==typeof t?'"'+s.maxLength(100,t)+'"':Array.isArray(t)?"[Array]":u(t)?"[Object]":"function"==typeof t.toString?s.maxLength(100,t.toString()):t},c={outerdiv:"param",keyvaldiv:"keyvalue",section:"paramslabel deemphasize",_key:"paramid",value:"paramvalue"},A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEmpty=function(){return!e.props.data||0===Object.keys(e.props.data).length},e.class=function(t){return e.props.classes&&void 0!==e.props.classes[t]?e.props.classes[t]:c[t]},e}return r(e,t),e.prototype.render=function(){var t=this,e=function(e,n){return u(n)?i.h("span",{className:"link",onClick:function(){return o.Modal.show(t.props.labels,e,n,a.ResolveData)}},"[Object]"):i.h("div",{className:t.props.classes.value},l(n))};return this.isEmpty()?null:i.h("div",{className:this.class("outerdiv")},i.h("div",{className:this.class("section")},this.props.labels.section),Object.keys(this.props.data).map(function(n){return i.h("div",{key:n,className:t.class("keyvaldiv")},i.h("div",{className:t.class("_key")},n,":"),i.h("div",{className:t.class("value")},e(n,t.props.data[n])))}))},e}(i.Component);e.KeysAndValues=A},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.componentDidMount=function(){var t=this._ref;setTimeout(function(){var e=t.getElementsByClassName("uir-fade");[].slice.apply(e).forEach(function(t){return t.className+=" in"})},35)},e.prototype.render=function(){var t=this;return i.h("div",{ref:function(e){return t._ref=e}},i.h("div",{className:"uir-modal-backdrop uir-fade",style:{zIndex:1040}}),i.h("div",{tabIndex:-1,className:"uir-modal uir-fade",style:{zIndex:1050,display:"block"}},i.h("div",{className:"uir-modal-dialog modal-lg"},i.h("div",{className:"uir-modal-content"},this.props.children))))},e}(i.Component);o.show=function(t,e,n,r){var o=document.body.querySelector("#uir-modal");o||(o=document.createElement("div"),o.id="uir-modal",document.body.appendChild(o));var a=function(){return null},s=function(){return i.render(i.h(a,null),document.body,o)};i.render(i.h(r,{close:s,labels:t,key:e,value:n}),o)},e.Modal=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(36),a=n(38),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.close=function(){return e.props.close()},e}return r(e,t),e.prototype.render=function(){return i.h("div",null,i.h(o.Modal,null,i.h("div",{className:"uir-modal-header uir-resolve-header"},i.h("div",{style:{fontSize:"1.5em"}},this.props.labels.modalTitle,": ",this.props.id),i.h("button",{className:"btn btn-xs btn-primary",onClick:this.close},i.h("i",{className:"uir-icon uir-iconw-close"}))),i.h("div",{className:"uir-modal-body"},i.h(a.Pretty,{data:this.props.value})),i.h("div",{className:"uir-modal-footer"},i.h("button",{className:"btn btn-primary",onClick:this.close},"Close"))))},e}(i.Component);e.ResolveData=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.preStyle={display:"block",padding:"10px 30px",margin:"0"},e.state={show:!0},e}return r(e,t),e.prototype.toggle=function(){this.setState({show:!this.state.show})},e.prototype.render=function(){return i.h("div",null,!!this.state.show&&i.h("pre",{style:this.preStyle},JSON.stringify(this.props.data,null,2)))},e}(i.Component);e.Pretty=o},function(t,e){"use strict";function n(t,e){return e.length<=t?e:e.substr(0,t-3)+"..."}function r(t){return void 0===t?"undefined":null===t?"null":"object"==typeof t&&"function"==typeof t.then?"[Promise]":t}function i(t){function e(t){if("object"==typeof t){if(n.indexOf(t)!==-1)return"[circular ref]";n.push(t)}return r(t)}var n=[];return JSON.stringify(t,function(t,n){return e(n)}).replace(/\\"/g,'"')}Object.defineProperty(e,"__esModule",{value:!0}),e.maxLength=n,e.stringify=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(41),a=n(42),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={retained:[],enterExit:[]},e}return r(e,t),e.prototype.componentDidMount=function(){var t=this.props.transition,e=Object.assign({},t.treeChanges());["entering","exiting","retained"].forEach(function(t){return e[t]=e[t].filter(function(t){return!!t.state.name})});for(var n=function(t,n){var r=e[t][n];return r?r.state.name:""},r=function(e,r,i){return t.$id+"."+n(e,i)+"-"+n(r,i)},i=e.retained.map(function(t,e){return{key:r("retained","retained",e),to:t,toType:"retain",from:t,fromType:"retain"}}),o=[],a=Math.max(e.exiting.length,e.entering.length),s=0;s<a;s++)o.push({key:r("exiting","entering",s),to:e.entering[s],toType:e.entering[s]&&"enter",from:e.exiting[s],fromType:e.exiting[s]&&"exit"});this.setState({retained:i,enterExit:o})},e.prototype.render=function(){var t=this.state.retained||[],e=this.state.enterExit||[],n=e.filter(function(t){return!!t.toType}).length-1;return i.h("table",{className:"paths"},i.h("thead",null,i.h("tr",null,i.h("th",null,"From Path"),i.h("th",null,"To Path"))),i.h("tbody",null,t.map(function(t){return i.h("tr",{key:t.key},i.h("td",{className:t.fromType,colSpan:2},i.h(o.NodeDetail,{node:t.from,type:t.fromType})))}),e.map(function(t,e){return i.h("tr",{key:t.key},i.h("td",{colSpan:2},i.h("div",{className:"uirTransVisRow"},i.h("div",{className:""+t.fromType},t.fromType?i.h("div",null,i.h("div",{className:"uirNodeContent"},i.h(o.NodeDetail,{node:t.from,type:t.fromType}),i.h(a.FlowArrow,{bottom:"V",top:e?"V":t.toType?"RU":"AU"}))):null),i.h("div",{className:""+t.toType},t.toType?i.h("div",null,i.h("div",{className:"uirNodeContent"},i.h(a.FlowArrow,{top:e?"V":t.fromType?"RD":"V",bottom:e==n?"AD":"V"}),i.h(o.NodeDetail,{node:t.to,type:t.toType}))):null))))})))},e}(i.Component);e.NodePaths=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(39),a=n(35),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.stateName=function(){var t=this.props.node,e=t&&t.state&&t.state.name;return""===e&&(e="(root)"),e&&e.split(".").reverse()[0]},e.prototype.params=function(){var t=this.props.node;return t&&t.paramSchema.reduce(function(e,n){return e[n.id]=t.paramValues[n.id],e},{})},e.prototype.resolves=function(){var t=function(t){return"string"==typeof t?t:o.maxLength(30,o.stringify(t))},e=this.props.node,n=["$stateParams","$transition$"];return e&&e.resolvables.filter(function(t){return n.indexOf(t.token)===-1}).reduce(function(e,n){return e[t(n.token)]=n.data,e},{})},e.prototype.render=function(){return this.props.node?i.h("div",{className:"uirNodeDetail"},i.h("div",{className:"uir-header"},i.h("div",{className:"nowrap deemphasize"},"(",this.props.type," state)"),i.h("div",{className:"statename"},this.stateName())),i.h(a.KeysAndValues,{data:this.params(),classes:{outerdiv:"params",section:"paramslabel deemphasize"},labels:{section:"Parameter values",modalTitle:"Parameter value: "}}),i.h(a.KeysAndValues,{data:this.resolves(),classes:{outerdiv:"params resolve",section:"resolvelabel deemphasize"},labels:{section:"Resolved data",modalTitle:"Resolved value: "}})):null},e}(i.Component);e.NodeDetail=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.height=1e3,e.renderCurve=function(){return i.h("path",{stroke:"white","stroke-width":"20",fill:"none",d:"M50 "+e.height+" V 70 Q50 20, 100 20 Q150 20, 150 70 V "+e.height})},e.renderVerticalLine=function(){return i.h("svg",{viewBox:"0 70 100 "+(e.height-70),className:"flowArrowSvg"},e.renderCurve())},e.renderCurveRU=function(){return i.h("svg",{viewBox:"0 0 100 "+e.height,className:"flowArrowSvg top"},e.renderCurve())},e.renderCurveRD=function(){return i.h("svg",{viewBox:"100 0 100 "+e.height,className:"flowArrowSvg top"},e.renderCurve())},e.renderArrowU=function(){return i.h("svg",{viewBox:"0 0 100 "+e.height,className:"flowArrowSvg top"},i.h("path",{stroke:"white","stroke-width":"20",fill:"none",d:"M50 "+e.height+" V 20 "}),i.h("polygon",{fill:"white",stroke:"white","stroke-width":"20",points:"50,20 35,40 65,40"}))},e.renderArrowD=function(){return i.h("svg",{viewBox:"0 0 100 "+e.height,className:"flowArrowSvg bottom"},i.h("path",{stroke:"white","stroke-width":"20",fill:"none",d:"M50 0 V "+(e.height-20)}),i.h("polygon",{fill:"white",stroke:"white","stroke-width":"20",points:"50,"+(e.height-20)+" 35,"+(e.height-40)+" 65,"+(e.height-40)}))},e}return r(e,t),e.prototype.render=function(){var t=this,e=function(e){switch(e){case"V":return t.renderVerticalLine();case"RU":return t.renderCurveRU();case"RD":return t.renderCurveRD();case"AU":return t.renderArrowU();case"AD":return t.renderArrowD();default:return null}};return i.h("div",{className:"flowArrowCell"},i.h("div",{style:{overflow:"hidden",position:"relative",flex:"1"}},e(this.props.top)),i.h("div",{style:{overflow:"hidden",position:"relative",flex:"1"}},e(this.props.bottom)))},e}(i.Component);e.FlowArrow=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleClick=function(){return e.props.toggleExpand()},e}return r(e,t),e.prototype.iconClass=function(){var t={running:"uir-icon uir-spin uir-iconw-spinner",success:"uir-icon uir-iconw-check",redirected:"uir-icon uir-iconw-share",ignored:"uir-icon uir-iconw-circle-o",error:"uir-icon uir-iconw-close"};return t[this.props.status]},e.prototype.render=function(){return this.props.transition?i.h("div",{className:this.props.status+" historyEntry",onClick:this.handleClick},i.h("div",{className:"summary"},i.h("div",{className:"transid"},this.props.transition.$id),i.h("div",{className:"status"},this.props.status,this.props.message?i.h("span",null,": ",this.props.message):null),i.h("div",{className:"transname"},i.h("i",{className:this.iconClass()})," ",this.props.transition.to().name))):null},e}(i.Component);e.BreadcrumbArrow=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makeCancelable=function(t){var e=!1,n=new Promise(function(n,r){t.then(function(t){return e?r({isCanceled:!0}):n(t)},function(t){return r(e?{isCanceled:!0}:t)})}),r={promise:n,isCanceled:!1,cancel:function(){r.isCanceled=e=!0}};return r}}])});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5taW4uanMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy9hbmd1bGFyLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9jb21tb24vQHVpcm91dGVyL2NvcmUvY29tbW9uL2hvZi50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vY29tbW9uL0B1aXJvdXRlci9jb3JlL2NvbW1vbi9wcmVkaWNhdGVzLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9jb21tb24vQHVpcm91dGVyL2NvcmUvY29tbW9uL2NvcmVzZXJ2aWNlcy50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vY29tbW9uL0B1aXJvdXRlci9jb3JlL2NvbW1vbi9jb21tb24udHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2NvbW1vbi9AdWlyb3V0ZXIvY29yZS9jb21tb24vZ2xvYi50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vY29tbW9uL0B1aXJvdXRlci9jb3JlL2NvbW1vbi9xdWV1ZS50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdHJhbnNpdGlvbi9AdWlyb3V0ZXIvY29yZS90cmFuc2l0aW9uL3JlamVjdEZhY3RvcnkudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2NvbW1vbi9AdWlyb3V0ZXIvY29yZS9jb21tb24vc3RyaW5ncy50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vY29tbW9uL0B1aXJvdXRlci9jb3JlL2NvbW1vbi9zYWZlQ29uc29sZS50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vY29tbW9uL0B1aXJvdXRlci9jb3JlL2NvbW1vbi90cmFjZS50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vcGFyYW1zL0B1aXJvdXRlci9jb3JlL3BhcmFtcy9wYXJhbVR5cGUudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3BhcmFtcy9AdWlyb3V0ZXIvY29yZS9wYXJhbXMvcGFyYW0udHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3BhcmFtcy9AdWlyb3V0ZXIvY29yZS9wYXJhbXMvcGFyYW1UeXBlcy50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vcGFyYW1zL0B1aXJvdXRlci9jb3JlL3BhcmFtcy9zdGF0ZVBhcmFtcy50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vcGF0aC9AdWlyb3V0ZXIvY29yZS9wYXRoL3BhdGhOb2RlLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9zdGF0ZS9AdWlyb3V0ZXIvY29yZS9zdGF0ZS90YXJnZXRTdGF0ZS50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vcGF0aC9AdWlyb3V0ZXIvY29yZS9wYXRoL3BhdGhVdGlscy50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vcmVzb2x2ZS9AdWlyb3V0ZXIvY29yZS9yZXNvbHZlL2ludGVyZmFjZS50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vcmVzb2x2ZS9AdWlyb3V0ZXIvY29yZS9yZXNvbHZlL3Jlc29sdmFibGUudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3Jlc29sdmUvQHVpcm91dGVyL2NvcmUvcmVzb2x2ZS9yZXNvbHZlQ29udGV4dC50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vc3RhdGUvQHVpcm91dGVyL2NvcmUvc3RhdGUvc3RhdGVCdWlsZGVyLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9zdGF0ZS9AdWlyb3V0ZXIvY29yZS9zdGF0ZS9zdGF0ZU9iamVjdC50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vc3RhdGUvQHVpcm91dGVyL2NvcmUvc3RhdGUvc3RhdGVNYXRjaGVyLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9zdGF0ZS9AdWlyb3V0ZXIvY29yZS9zdGF0ZS9zdGF0ZVF1ZXVlTWFuYWdlci50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vc3RhdGUvQHVpcm91dGVyL2NvcmUvc3RhdGUvc3RhdGVSZWdpc3RyeS50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdHJhbnNpdGlvbi9AdWlyb3V0ZXIvY29yZS90cmFuc2l0aW9uL2ludGVyZmFjZS50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdHJhbnNpdGlvbi9AdWlyb3V0ZXIvY29yZS90cmFuc2l0aW9uL3RyYW5zaXRpb25Ib29rLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS90cmFuc2l0aW9uL0B1aXJvdXRlci9jb3JlL3RyYW5zaXRpb24vaG9va1JlZ2lzdHJ5LnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS90cmFuc2l0aW9uL0B1aXJvdXRlci9jb3JlL3RyYW5zaXRpb24vaG9va0J1aWxkZXIudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3RyYW5zaXRpb24vQHVpcm91dGVyL2NvcmUvdHJhbnNpdGlvbi90cmFuc2l0aW9uLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS91cmwvQHVpcm91dGVyL2NvcmUvdXJsL3VybE1hdGNoZXIudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3VybC9AdWlyb3V0ZXIvY29yZS91cmwvdXJsTWF0Y2hlckZhY3RvcnkudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3VybC9AdWlyb3V0ZXIvY29yZS91cmwvdXJsUnVsZS50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdXJsL0B1aXJvdXRlci9jb3JlL3VybC91cmxSb3V0ZXIudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3ZpZXcvQHVpcm91dGVyL2NvcmUvdmlldy92aWV3LnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9AdWlyb3V0ZXIvY29yZS9nbG9iYWxzLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS91cmwvQHVpcm91dGVyL2NvcmUvdXJsL3VybFJ1bGVzLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS91cmwvQHVpcm91dGVyL2NvcmUvdXJsL3VybENvbmZpZy50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdXJsL0B1aXJvdXRlci9jb3JlL3VybC91cmxTZXJ2aWNlLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9AdWlyb3V0ZXIvY29yZS9yb3V0ZXIudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2hvb2tzL0B1aXJvdXRlci9jb3JlL2hvb2tzL2NvcmVSZXNvbHZhYmxlcy50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vaG9va3MvQHVpcm91dGVyL2NvcmUvaG9va3MvcmVkaXJlY3RUby50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vaG9va3MvQHVpcm91dGVyL2NvcmUvaG9va3Mvb25FbnRlckV4aXRSZXRhaW4udHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2hvb2tzL0B1aXJvdXRlci9jb3JlL2hvb2tzL3Jlc29sdmUudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2hvb2tzL0B1aXJvdXRlci9jb3JlL2hvb2tzL3ZpZXdzLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9ob29rcy9AdWlyb3V0ZXIvY29yZS9ob29rcy91cGRhdGVHbG9iYWxzLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS9ob29rcy9AdWlyb3V0ZXIvY29yZS9ob29rcy91cmwudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2hvb2tzL0B1aXJvdXRlci9jb3JlL2hvb2tzL2xhenlMb2FkLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS90cmFuc2l0aW9uL0B1aXJvdXRlci9jb3JlL3RyYW5zaXRpb24vdHJhbnNpdGlvbkV2ZW50VHlwZS50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vaG9va3MvQHVpcm91dGVyL2NvcmUvaG9va3MvaWdub3JlZFRyYW5zaXRpb24udHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL2hvb2tzL0B1aXJvdXRlci9jb3JlL2hvb2tzL2ludmFsaWRUcmFuc2l0aW9uLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS90cmFuc2l0aW9uL0B1aXJvdXRlci9jb3JlL3RyYW5zaXRpb24vdHJhbnNpdGlvblNlcnZpY2UudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3N0YXRlL0B1aXJvdXRlci9jb3JlL3N0YXRlL3N0YXRlU2VydmljZS50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdmFuaWxsYS9AdWlyb3V0ZXIvY29yZS92YW5pbGxhL3EudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3ZhbmlsbGEvQHVpcm91dGVyL2NvcmUvdmFuaWxsYS9pbmplY3Rvci50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdmFuaWxsYS9AdWlyb3V0ZXIvY29yZS92YW5pbGxhL3V0aWxzLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9ub2RlX21vZHVsZXMvQHVpcm91dGVyL2NvcmUvbGliLWVzbS92YW5pbGxhL0B1aXJvdXRlci9jb3JlL3ZhbmlsbGEvYmFzZUxvY2F0aW9uU2VydmljZS50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdmFuaWxsYS9AdWlyb3V0ZXIvY29yZS92YW5pbGxhL2hhc2hMb2NhdGlvblNlcnZpY2UudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3ZhbmlsbGEvQHVpcm91dGVyL2NvcmUvdmFuaWxsYS9tZW1vcnlMb2NhdGlvblNlcnZpY2UudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3ZhbmlsbGEvQHVpcm91dGVyL2NvcmUvdmFuaWxsYS9wdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL3ZhbmlsbGEvQHVpcm91dGVyL2NvcmUvdmFuaWxsYS9tZW1vcnlMb2NhdGlvbkNvbmZpZy50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdmFuaWxsYS9AdWlyb3V0ZXIvY29yZS92YW5pbGxhL2Jyb3dzZXJMb2NhdGlvbkNvbmZpZy50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vdmFuaWxsYS9AdWlyb3V0ZXIvY29yZS92YW5pbGxhL3BsdWdpbnMudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL25vZGVfbW9kdWxlcy9AdWlyb3V0ZXIvY29yZS9saWItZXNtL0B1aXJvdXRlci9jb3JlL2ludGVyZmFjZS50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvbm9kZV9tb2R1bGVzL0B1aXJvdXRlci9jb3JlL2xpYi1lc20vQHVpcm91dGVyL2NvcmUvaW5kZXgudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy9zdGF0ZWJ1aWxkZXJzL3ZpZXdzLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvdGVtcGxhdGVGYWN0b3J5LnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvc3RhdGVQcm92aWRlci50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvc3JjL3N0YXRlYnVpbGRlcnMvb25FbnRlckV4aXRSZXRhaW4udHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy9sb2NhdGlvblNlcnZpY2VzLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvdXJsUm91dGVyUHJvdmlkZXIudHMiLCJAdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy9zZXJ2aWNlcy50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvc3JjL2RpcmVjdGl2ZXMvc3RhdGVEaXJlY3RpdmVzLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvc3RhdGVGaWx0ZXJzLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvZGlyZWN0aXZlcy92aWV3RGlyZWN0aXZlLnRzIiwiQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvdmlld1Njcm9sbC50cyIsIkB1aXJvdXRlci9hbmd1bGFyanMvc3JjL2luZGV4LnRzIiwid2VicGFjazovLy93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vL3Zpc3VhbGl6ZXIubWluLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAzNTQzMWNjYTQ0MzcxMDkyOTRkNiIsIndlYnBhY2s6Ly8vc3JjL3Zpc3VhbGl6ZXIudHMiLCJ3ZWJwYWNrOi8vL34vcHJlYWN0L2Rpc3QvcHJlYWN0LmpzIiwid2VicGFjazovLy9zcmMvc2VsZWN0b3Ivc3RhdGVTZWxlY3Rvci50c3giLCJ3ZWJwYWNrOi8vL3NyYy9zdGF0ZS9zdGF0ZVZpc3VhbGl6ZXIudHN4Iiwid2VicGFjazovLy9zcmMvc3RhdGUvc3RhdGVWaXN1YWxpemVyLmNzcz83YWJjIiwid2VicGFjazovLy9zcmMvc3RhdGUvc3RhdGVWaXN1YWxpemVyLmNzcyIsIndlYnBhY2s6Ly8vfi9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcyIsIndlYnBhY2s6Ly8vfi9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy9zcmMvdXRpbC90b2dnbGVDbGFzcy50cyIsIndlYnBhY2s6Ly8vc3JjL3V0aWwvZHJhZ2dhYmxlLnRzIiwid2VicGFjazovLy9zcmMvc3RhdGUvc3RhdGVUcmVlLnRzeCIsIndlYnBhY2s6Ly8vc3JjL3N0YXRlL3N0YXRlTm9kZS50c3giLCJ3ZWJwYWNrOi8vL3NyYy91dGlsL2FuaW1hdGVwYXRoLnRzIiwid2VicGFjazovLy9zcmMvdXRpbC9lYXNpbmcudHMiLCJ3ZWJwYWNrOi8vL34vZDMtaW50ZXJwb2xhdGUvYnVpbGQvZDMtaW50ZXJwb2xhdGUuanMiLCJ3ZWJwYWNrOi8vL34vZDMtY29sb3IvYnVpbGQvZDMtY29sb3IuanMiLCJ3ZWJwYWNrOi8vL3NyYy9zdGF0ZS9yZW5kZXJlci50c3giLCJ3ZWJwYWNrOi8vL34vZDMtaGllcmFyY2h5L2J1aWxkL2QzLWhpZXJhcmNoeS5qcyIsIndlYnBhY2s6Ly8vc3JjL3N0YXRlL3N0YXRlVmlzTm9kZS50c3giLCJ3ZWJwYWNrOi8vL2ltYWdlcy8xNi9jaGV2cm9uLWRvd24ucG5nIiwid2VicGFjazovLy9zcmMvdHJhbnNpdGlvbi90cmFuc2l0aW9uVmlzdWFsaXplci50c3giLCJ3ZWJwYWNrOi8vL3NyYy90cmFuc2l0aW9uL3RyYW5zaXRpb25WaXN1YWxpemVyLmNzcz9hNjkzIiwid2VicGFjazovLy9zcmMvdHJhbnNpdGlvbi90cmFuc2l0aW9uVmlzdWFsaXplci5jc3MiLCJ3ZWJwYWNrOi8vL2ltYWdlcy93LzE2L3NwaW5uZXIucG5nIiwid2VicGFjazovLy9pbWFnZXMvdy8xNi9jaGVjay5wbmciLCJ3ZWJwYWNrOi8vL2ltYWdlcy93LzE2L2NpcmNsZS1vLnBuZyIsIndlYnBhY2s6Ly8vaW1hZ2VzL3cvMTYvc2hhcmUucG5nIiwid2VicGFjazovLy9pbWFnZXMvdy8xNi9jbG9zZS5wbmciLCJ3ZWJwYWNrOi8vL2ltYWdlcy8xNi90aHVtYi10YWNrLnBuZyIsIndlYnBhY2s6Ly8vaW1hZ2VzLzE2L3RvZ2dsZS1vbi5wbmciLCJ3ZWJwYWNrOi8vL2ltYWdlcy8xNi90b2dnbGUtb2ZmLnBuZyIsIndlYnBhY2s6Ly8vc3JjL3RyYW5zaXRpb24vdHJhbnNpdGlvblZpZXcudHN4Iiwid2VicGFjazovLy9zcmMvdHJhbnNpdGlvbi90cmFuc2l0aW9uUG9wb3Zlci50c3giLCJ3ZWJwYWNrOi8vL3NyYy90cmFuc2l0aW9uL3BvcG92ZXJIZWFkaW5nLnRzeCIsIndlYnBhY2s6Ly8vc3JjL3RyYW5zaXRpb24vdHJhbnNTdW1tYXJ5LnRzeCIsIndlYnBhY2s6Ly8vc3JjL3RyYW5zaXRpb24va2V5c0FuZFZhbHVlcy50c3giLCJ3ZWJwYWNrOi8vL3NyYy91dGlsL21vZGFsLnRzeCIsIndlYnBhY2s6Ly8vc3JjL3RyYW5zaXRpb24vcmVzb2x2ZURhdGEudHN4Iiwid2VicGFjazovLy9zcmMvdXRpbC9wcmV0dHkudHN4Iiwid2VicGFjazovLy9zcmMvdXRpbC9zdHJpbmdzLnRzIiwid2VicGFjazovLy9zcmMvdHJhbnNpdGlvbi9ub2RlUGF0aHMudHN4Iiwid2VicGFjazovLy9zcmMvdHJhbnNpdGlvbi9ub2RlRGV0YWlsLnRzeCIsIndlYnBhY2s6Ly8vc3JjL3RyYW5zaXRpb24vZmxvd0Fycm93LnRzeCIsIndlYnBhY2s6Ly8vc3JjL3RyYW5zaXRpb24vYnJlYWRjcnVtYkFycm93LnRzeCIsIndlYnBhY2s6Ly8vc3JjL3V0aWwvY2FuY2VsYWJsZVByb21pc2UudHMiXSwibmFtZXMiOlsibmdfZnJvbV9pbXBvcnQubW9kdWxlIiwidGhpcyIsImFuZ3VsYXIiLCJSZWplY3RUeXBlIiwiQ2F0ZWdvcnkiLCJEZWZUeXBlIiwiVHJhbnNpdGlvbkhvb2tQaGFzZSIsIlRyYW5zaXRpb25Ib29rU2NvcGUiLCJwYXJzZVVybCIsIl9fZXh0ZW5kcyIsImlkIiwicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwidW5tb3VudENvbXBvbmVudCIsIm5vZGUiLCJOb3RoaW5nIiwicHJlYWN0XzEiLCJyZW5kZXIiLCJoIiwiZG9jdW1lbnQiLCJib2R5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsInN0YXRlU2VsZWN0b3JfMSIsIlN0YXRlU2VsZWN0b3IiLCJzdGF0ZVZpc3VhbGl6ZXJfMSIsIlN0YXRlVmlzdWFsaXplciIsInN0YXRlVHJlZV8xIiwiU3RhdGVUcmVlIiwidHJhbnNpdGlvblZpc3VhbGl6ZXJfMSIsIlRyYW5zaXRpb25WaXN1YWxpemVyIiwidmlzdWFsaXplciIsInJvdXRlciIsIlZpc3VhbGl6ZXIiLCJERUZBVUxUUyIsInN0YXRlIiwidHJhbnNpdGlvbiIsIm9wdGlvbnMiLCJuYW1lIiwiYXNzaWduIiwic3RhdGVWaXN1YWxpemVyRWwiLCJjcmVhdGUiLCJ0cmFuc2l0aW9uVmlzdWFsaXplckVsIiwicHJvdG90eXBlIiwiZGlzcG9zZSIsImdsb2JhbCIsIlZOb2RlIiwibm9kZU5hbWUiLCJhdHRyaWJ1dGVzIiwiY2hpbGRyZW4iLCJrZXkiLCJsYXN0U2ltcGxlIiwiY2hpbGQiLCJzaW1wbGUiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic3RhY2siLCJwdXNoIiwicG9wIiwiQXJyYXkiLCJTdHJpbmciLCJFTVBUWV9DSElMRFJFTiIsInZub2RlIiwiZXh0ZW5kIiwib2JqIiwicHJvcHMiLCJjbG9uZSIsImRlbHZlIiwic3BsaXQiLCJpc0Z1bmN0aW9uIiwiaXNTdHJpbmciLCJoYXNoVG9DbGFzc05hbWUiLCJzdHIiLCJwcm9wIiwiY2xvbmVFbGVtZW50Iiwic2xpY2UiLCJjcmVhdGVMaW5rZWRTdGF0ZSIsImNvbXBvbmVudCIsImV2ZW50UGF0aCIsInBhdGgiLCJlIiwidCIsInRhcmdldCIsInYiLCJ0eXBlIiwibWF0Y2giLCJjaGVja2VkIiwic2V0U3RhdGUiLCJlbnF1ZXVlUmVuZGVyIiwiX2RpcnR5IiwiaXRlbXMiLCJkZWJvdW5jZVJlbmRlcmluZyIsImRlZmVyIiwicmVyZW5kZXIiLCJsaXN0IiwicmVuZGVyQ29tcG9uZW50IiwiaXNGdW5jdGlvbmFsQ29tcG9uZW50IiwiYnVpbGRGdW5jdGlvbmFsQ29tcG9uZW50IiwiY29udGV4dCIsImdldE5vZGVQcm9wcyIsIkVNUFRZIiwiaXNTYW1lTm9kZVR5cGUiLCJUZXh0IiwiX2NvbXBvbmVudENvbnN0cnVjdG9yIiwiaXNOYW1lZE5vZGUiLCJub3JtYWxpemVkTm9kZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsImRlZmF1bHRQcm9wcyIsInJlbW92ZU5vZGUiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJzZXRBY2Nlc3NvciIsIm9sZCIsImlzU3ZnIiwic3R5bGUiLCJjc3NUZXh0IiwiTk9OX0RJTUVOU0lPTl9QUk9QUyIsImlubmVySFRNTCIsIl9faHRtbCIsImwiLCJfbGlzdGVuZXJzIiwic3Vic3RyaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50UHJveHkiLCJOT05fQlVCQkxJTkdfRVZFTlRTIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldFByb3BlcnR5IiwicmVtb3ZlQXR0cmlidXRlIiwibnMiLCJyZW1vdmVBdHRyaWJ1dGVOUyIsInNldEF0dHJpYnV0ZU5TIiwic2V0QXR0cmlidXRlIiwiY2xhc3NOYW1lIiwiZXZlbnQiLCJjb2xsZWN0Tm9kZSIsIkVsZW1lbnQiLCJfY29tcG9uZW50IiwiX25hbWUiLCJub2RlcyIsImNyZWF0ZU5vZGUiLCJjcmVhdGVFbGVtZW50TlMiLCJjcmVhdGVFbGVtZW50IiwiZmx1c2hNb3VudHMiLCJtb3VudHMiLCJhZnRlck1vdW50IiwiY29tcG9uZW50RGlkTW91bnQiLCJkaWZmIiwiZG9tIiwibW91bnRBbGwiLCJwYXJlbnQiLCJjb21wb25lbnRSb290IiwiZGlmZkxldmVsIiwiaXNTdmdNb2RlIiwib3duZXJTVkdFbGVtZW50IiwiaHlkcmF0aW5nIiwiQVRUUl9LRVkiLCJyZXQiLCJpZGlmZiIsImFwcGVuZENoaWxkIiwicmVmIiwibm9kZVZhbHVlIiwicmVjb2xsZWN0Tm9kZVRyZWUiLCJjcmVhdGVUZXh0Tm9kZSIsImJ1aWxkQ29tcG9uZW50RnJvbVZOb2RlIiwib3V0IiwicHJldlN2Z01vZGUiLCJ2Y2hpbGRyZW4iLCJmaXJzdENoaWxkIiwicmVwbGFjZUNoaWxkIiwiZmMiLCJhIiwibmV4dFNpYmxpbmciLCJpbm5lckRpZmZOb2RlIiwiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiLCJkaWZmQXR0cmlidXRlcyIsImFic29yYiIsImoiLCJ2Y2hpbGQiLCJvcmlnaW5hbENoaWxkcmVuIiwiY2hpbGROb2RlcyIsImtleWVkIiwia2V5ZWRMZW4iLCJtaW4iLCJsZW4iLCJjaGlsZHJlbkxlbiIsInZsZW4iLCJfY2hpbGQiLCJfX2tleSIsImluc2VydEJlZm9yZSIsInVubW91bnRPbmx5IiwibGFzdENoaWxkIiwiYXR0cnMiLCJjb2xsZWN0Q29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJjb21wb25lbnRzIiwiY3JlYXRlQ29tcG9uZW50IiwiQ3RvciIsImluc3QiLCJDb21wb25lbnQiLCJuZXh0QmFzZSIsInNwbGljZSIsInNldENvbXBvbmVudFByb3BzIiwib3B0cyIsIl9kaXNhYmxlIiwiX19yZWYiLCJiYXNlIiwiY29tcG9uZW50V2lsbE1vdW50IiwiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsInByZXZDb250ZXh0IiwicHJldlByb3BzIiwic3luY0NvbXBvbmVudFVwZGF0ZXMiLCJpc0NoaWxkIiwic2tpcCIsInJlbmRlcmVkIiwiY2Jhc2UiLCJwcmV2aW91c1Byb3BzIiwicHJldmlvdXNTdGF0ZSIsInByZXZTdGF0ZSIsInByZXZpb3VzQ29udGV4dCIsImlzVXBkYXRlIiwiaW5pdGlhbEJhc2UiLCJpbml0aWFsQ2hpbGRDb21wb25lbnQiLCJzaG91bGRDb21wb25lbnRVcGRhdGUiLCJjb21wb25lbnRXaWxsVXBkYXRlIiwiZ2V0Q2hpbGRDb250ZXh0IiwidG9Vbm1vdW50IiwiY2hpbGRDb21wb25lbnQiLCJjaGlsZFByb3BzIiwiX3BhcmVudENvbXBvbmVudCIsImJhc2VQYXJlbnQiLCJjb21wb25lbnRSZWYiLCJ1bnNoaWZ0IiwiY29tcG9uZW50RGlkVXBkYXRlIiwiYWZ0ZXJVcGRhdGUiLCJmbiIsImNiIiwiX3JlbmRlckNhbGxiYWNrcyIsIm9yaWdpbmFsQ29tcG9uZW50Iiwib2xkRG9tIiwiaXNEaXJlY3RPd25lciIsImlzT3duZXIiLCJyZW1vdmUiLCJiZWZvcmVVbm1vdW50IiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJpbm5lciIsImNvbXBvbmVudERpZFVubW91bnQiLCJtZXJnZSIsImxjQ2FjaGUiLCJzIiwicmVzb2x2ZWQiLCJQcm9taXNlIiwicmVzb2x2ZSIsImYiLCJ0aGVuIiwic2V0VGltZW91dCIsIlN5bWJvbCIsImZvciIsImJveEZsZXgiLCJib3hGbGV4R3JvdXAiLCJjb2x1bW5Db3VudCIsImZpbGxPcGFjaXR5IiwiZmxleCIsImZsZXhHcm93IiwiZmxleFBvc2l0aXZlIiwiZmxleFNocmluayIsImZsZXhOZWdhdGl2ZSIsImZvbnRXZWlnaHQiLCJsaW5lQ2xhbXAiLCJsaW5lSGVpZ2h0Iiwib3BhY2l0eSIsIm9yZGVyIiwib3JwaGFucyIsInN0cm9rZU9wYWNpdHkiLCJ3aWRvd3MiLCJ6SW5kZXgiLCJ6b29tIiwiYmx1ciIsImVycm9yIiwiZm9jdXMiLCJsb2FkIiwicmVzaXplIiwic2Nyb2xsIiwibGlua1N0YXRlIiwiX2xpbmtlZFN0YXRlcyIsImNhbGxiYWNrIiwiZm9yY2VVcGRhdGUiLCJleHRlbmRTdGF0aWNzIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJkIiwiYiIsImhhc093blByb3BlcnR5IiwiX18iLCJfc3VwZXIiLCJfdGhpcyIsImFwcGx5IiwiY3VycmVudCIsInN0YXRlcyIsImRlcmVnaXN0ZXJGbiIsInNlbGVjdFN0YXRlIiwiJHN0YXRlIiwic3RhdGVTZXJ2aWNlIiwidG8iLCJnbyIsInVwZGF0ZVN0YXRlcyIsInN0YXRlUmVnaXN0cnkiLCJnZXQiLCJtYXAiLCJ1cGRhdGVDdXJyZW50IiwidHJhbnMiLCJvblN0YXRlc0NoYW5nZWQiLCJkZXJlZ2lzdGVyU3RhdGVMaXN0ZW5lckZuIiwidHJhbnNpdGlvblNlcnZpY2UiLCJvblN1Y2Nlc3MiLCJnbG9iYWxzIiwib25DaGFuZ2UiLCJtYXhXaWR0aCIsIl9fYXNzaWduIiwibiIsInRvZ2dsZUNsYXNzXzEiLCJkcmFnZ2FibGVfMSIsInJlbmRlcmVyXzEiLCJpbWdDaGV2cm9uIiwiaGVpZ2h0Iiwid2lkdGgiLCJwcmVzZXROYW1lIiwicmVuZGVyZXIiLCJERUZBVUxUX1JFTkRFUkVSIiwiZGVyZWdpc3RlckZucyIsIm1pbmltaXplIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJlbCIsImJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImxlZnQiLCJyaWdodCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJib3R0b20iLCJpbm5lckhlaWdodCIsInVubWluaW1pemUiLCJ0b2dnbGVDbGFzcyIsImFuaW1hdGlvbkVuZExpc3RlbmVyIiwiYWRkQ2xhc3MiLCJzdmdXaWR0aCIsInN2Z0hlaWdodCIsImVsZW1lbnQiLCJpbml0aWFsUHJvcHMiLCJtaW5pbWl6ZUFmdGVyIiwiX3JlbmRlciIsInJlYWR5U3RhdGUiLCJoYW5kbGVDbGljayIsIm1pbmltaXplVGltZW91dCIsImNsZWFyVGltZW91dCIsImZvckVhY2giLCJjb250cm9sc0VsIiwicXVlcnlTZWxlY3RvciIsInZpc0VsIiwiZHJhZ2dhYmxlIiwiZHJhZ0FjdGlvbnMiLCJtb3ZlIiwibW9uaXRvclJlc2l6ZUV2ZW50cyIsImJpbmQiLCJfd2lkdGgiLCJfaGVpZ2h0Iiwib2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwibXV0YXRpb25zIiwibXV0YXRpb24iLCJhdHRyaWJ1dGVOYW1lIiwibmV3d2lkdGgiLCJuZXdoZWlnaHQiLCJwYXJzZUludCIsInJlcGxhY2UiLCJjb25maWciLCJjaGlsZExpc3QiLCJjaGFyYWN0ZXJEYXRhIiwic3VidHJlZSIsImF0dHJpYnV0ZUZpbHRlciIsIm9ic2VydmUiLCJkaXNjb25uZWN0IiwiaGFuZGxlWm9vbSIsInBhcnNlRmxvYXQiLCJoYW5kbGVMYXlvdXQiLCJzZXR0aW5ncyIsIlJFTkRFUkVSX1BSRVNFVFMiLCJ6b29tTGV2ZWxzIiwib25DbGljayIsImtleXMiLCJwcmVzZXQiLCJsZXZlbCIsInNyYyIsImN1cnNvciIsImNvbnRlbnQiLCJsb2NhbHMiLCJ2ZXJzaW9uIiwic291cmNlcyIsIm5hbWVzIiwibWFwcGluZ3MiLCJmaWxlIiwic291cmNlc0NvbnRlbnQiLCJzb3VyY2VSb290IiwidG9TdHJpbmciLCJyZXN1bHQiLCJpdGVtIiwiam9pbiIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiYWRkU3R5bGVzVG9Eb20iLCJzdHlsZXMiLCJkb21TdHlsZSIsInN0eWxlc0luRG9tIiwicmVmcyIsInBhcnRzIiwiYWRkU3R5bGUiLCJsaXN0VG9TdHlsZXMiLCJuZXdTdHlsZXMiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInBhcnQiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZUVsZW1lbnQiLCJoZWFkIiwiZ2V0SGVhZEVsZW1lbnQiLCJsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCIsInN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wIiwiaW5zZXJ0QXQiLCJFcnJvciIsInJlbW92ZVN0eWxlRWxlbWVudCIsImlkeCIsImluZGV4T2YiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJjcmVhdGVMaW5rRWxlbWVudCIsImxpbmtFbGVtZW50IiwicmVsIiwidXBkYXRlIiwic2luZ2xldG9uIiwic3R5bGVJbmRleCIsInNpbmdsZXRvbkNvdW50ZXIiLCJzaW5nbGV0b25FbGVtZW50IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJidG9hIiwidXBkYXRlTGluayIsImhyZWYiLCJhcHBseVRvVGFnIiwibmV3T2JqIiwiaW5kZXgiLCJzdHlsZVNoZWV0IiwicmVwbGFjZVRleHQiLCJjc3NOb2RlIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiYmxvYiIsIm9sZFNyYyIsIm1lbW9pemUiLCJtZW1vIiwiaXNPbGRJRSIsInRlc3QiLCJzZWxmIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJuZXdMaXN0IiwibWF5UmVtb3ZlIiwidGV4dFN0b3JlIiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwiaGFzQ2xhc3MiLCJjbGFzc25hbWUiLCJSZWdFeHAiLCJleGVjIiwicmVtb3ZlQ2xhc3MiLCJlbmFibGVkIiwiaXNEcmFnZ2luZyIsImluaXRpYWxDbGllbnRYIiwiaW5pdGlhbENsaWVudFkiLCJsYXN0Q2xpZW50WCIsImxhc3RDbGllbnRZIiwibW91c2VEb3duTGlzdGVuZXIiLCJjbGllbnRYIiwiY2xpZW50WSIsImRyYWdMaXN0ZW5lciIsIm5ld0NsaWVudFgiLCJuZXdDbGllbnRZIiwiZG9uZURyYWdnaW5nIiwibW92ZUVsZW1lbnQiLCJlbGVtZW50VG9Nb3ZlIiwiZWxlbWVudEJlaW5nRHJhZ2dlZCIsImRldGFpbHMiLCJkeCIsImR5Iiwic3RhdGVOb2RlXzEiLCJhbmltYXRlcGF0aF8xIiwiZWFzaW5nXzEiLCJzdGF0ZVZpc05vZGVfMSIsInJlc2V0TWV0YWRhdGEiLCJsYWJlbCIsImhpZ2hsaWdodCIsImFjdGl2ZSIsImZ1dHVyZSIsInJldGFpbmVkIiwiZW50ZXJlZCIsImV4aXRlZCIsImluYWN0aXZlIiwibGF5b3V0IiwidW5tb3VudGVkIiwiY2FuY2VsQ3VycmVudEFuaW1hdGlvbiIsImRvTGF5b3V0QW5pbWF0aW9uIiwiZ2V0Tm9kZXMiLCJyb290Tm9kZSIsImxheW91dEZuIiwidmlzaWJsZSIsInZpc2libGVBbmNlc3RvciIsIl9wYXJlbnQiLCJ4IiwieSIsImRpbWVuc2lvbnMiLCJ0cmFuc2Zvcm1YIiwieHZhbCIsInNjYWxlWCIsIm9mZnNldFgiLCJ0cmFuc2Zvcm1ZIiwieXZhbCIsInNjYWxlWSIsIm9mZnNldFkiLCJnZXRDdXJyZW50Q29vcmRzIiwiYW5pbVgiLCJhbmltWSIsImN1cnJlbnRDb29yZHMiLCJyZWR1Y2UiLCJhY2MiLCJhcnIiLCJjb25jYXQiLCJ0YXJnZXRDb29yZHMiLCJhbmltYXRpb25GcmFtZSIsInh5VmFsQXJyYXkiLCJ0dXBsZUNvdW50IiwiYW5pbWF0ZVBhdGgiLCJlYXNpbmciLCJlYXNlSW5PdXRFeHBvIiwibm9kZUZvclN0YXRlIiwiJCRzdGF0ZSIsImtub3duIiwiZ2V0UHJvdG90eXBlT2YiLCJ0b0FkZCIsInRvRGVsIiwiY3JlYXRlU3RhdGVWaXNOb2RlIiwiZGVsIiwiaXNQcm90b3R5cGVPZiIsIl9jaGlsZHJlbiIsImxhenlMb2FkIiwidXBkYXRlTm9kZXMiLCIkdHJhbnNpdGlvbiQiLCJ0YyIsInRyZWVDaGFuZ2VzIiwiZ2V0Tm9kZSIsImVudGVyaW5nIiwiZXhpdGluZyIsInJlZ2lzdHJ5IiwiJHRyYW5zaXRpb25zIiwiZGVyZWdpc3Rlckhvb2tGbiIsImxhc3RTdWNjZXNzZnVsIiwic3VjY2Vzc2Z1bFRyYW5zaXRpb25zIiwicGVla1RhaWwiLCJwZW5kaW5nIiwicHJvbWlzZSIsIm5ld1Byb3BzIiwicmFkaXVzIiwic29ydCIsInNvcnROb2Rlc0ZuIiwicmVuZGVyTm9kZXMiLCJlZGdlUmVuZGVyRm4iLCJTdGF0ZU5vZGUiLCJkb0xheW91dCIsImdvVGltZW91dCIsImhhbmRsZUNvbGxhcHNlQ2xpY2tlZCIsIl9jb2xsYXBzZWQiLCJoYW5kbGVHb0NsaWNrZWQiLCJzdGF0ZU5hbWUiLCJfYSIsImJhc2VSYWRpdXMiLCJiYXNlRm9udFNpemUiLCJiYXNlTm9kZVN0cm9rZVdpZHRoIiwiciIsImZvbnRTaXplIiwibm9kZVN0cm9rZVdpZHRoIiwiY2xhc3NlcyIsImNpcmNsZUNsYXNzZXMiLCJjbGF6eiIsImRlc2NlbmRlbnRzIiwiY29sbGFwc2VkIiwidG90YWxEZXNjZW5kZW50cyIsInRyYW5zZm9ybSIsIm9uRGJsQ2xpY2siLCJzdHJva2Utd2lkdGgiLCJ0ZXh0LWFuY2hvciIsImZvbnQtc2l6ZSIsImxhYmVsUmVuZGVyRm4iLCJuZXdWYWx1ZSIsIm9sZFZhbHVlIiwiZHVyYXRpb24iLCJ1cGRhdGVGcmFtZSIsImZpbmlzaEZuIiwiZWFzZUZuIiwiZWFzZU91dEVsYXN0aWMiLCJzdGFydCIsImludGVycG9sYXRlIiwiZDNfaW50ZXJwb2xhdGVfMSIsImludGVycG9sYXRlQXJyYXkiLCJzdGVwIiwibm93IiwicHJvZ3Jlc3MiLCJwZXJjZW50IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZWFzZUluT3V0UXVhZCIsImVhc2VJbk91dEN1YmljIiwiZWFzZUluT3V0UXVhcnQiLCJlYXNlSW5PdXRRdWludCIsImVhc2VJbk91dFNpbmUiLCJNYXRoIiwiY29zIiwiUEkiLCJwb3ciLCJlYXNlSW5PdXRDaXJjIiwic3FydCIsImVhc2VJbkVsYXN0aWMiLCJhYnMiLCJhc2luIiwic2luIiwiZWFzZUluT3V0RWxhc3RpYyIsImVhc2VJbk91dEJhY2siLCJ1bmRlZmluZWQiLCJkM0NvbG9yIiwiYmFzaXMiLCJ0MSIsInYwIiwidjEiLCJ2MiIsInYzIiwidDIiLCJ0MyIsImxpbmVhciIsImV4cG9uZW50aWFsIiwiaHVlIiwicm91bmQiLCJjb25zdGFudCIsImlzTmFOIiwiZ2FtbWEiLCJub2dhbW1hIiwicmdiU3BsaW5lIiwic3BsaW5lIiwiY29sb3JzIiwiY29sb3IkJDEiLCJnIiwicmdiIiwiemVybyIsIm9uZSIsInBhcnNlQ3NzIiwiaWRlbnRpdHkiLCJjc3NSb290IiwiZG9jdW1lbnRFbGVtZW50IiwiY3NzVmlldyIsImRlZmF1bHRWaWV3IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJkZWNvbXBvc2UiLCJwYXJzZVN2ZyIsInN2Z05vZGUiLCJiYXNlVmFsIiwiY29uc29saWRhdGUiLCJtYXRyaXgiLCJpbnRlcnBvbGF0ZVRyYW5zZm9ybSIsInBhcnNlIiwicHhDb21tYSIsInB4UGFyZW4iLCJkZWdQYXJlbiIsInRyYW5zbGF0ZSIsInhhIiwieWEiLCJ4YiIsInliIiwicSIsIm51bWJlciIsInJvdGF0ZSIsInNrZXdYIiwic2NhbGUiLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlWSIsIm8iLCJjb3NoIiwiZXhwIiwic2luaCIsInRhbmgiLCJoc2wkMSIsImh1ZSQkMSIsImVuZCIsImhzbCIsImxhYiQxIiwibGFiIiwiaGNsJDEiLCJoY2wiLCJjdWJlaGVsaXgkMSIsImN1YmVoZWxpeEdhbW1hIiwiY3ViZWhlbGl4JCQxIiwiY3ViZWhlbGl4IiwiYmFzaXMkMSIsInZhbHVlcyIsImZsb29yIiwiYmFzaXNDbG9zZWQiLCJyZ2IkMSIsInJnYkdhbW1hIiwicmdiJCQxIiwicmdiQmFzaXMiLCJyZ2JCYXNpc0Nsb3NlZCIsImFycmF5IiwibmIiLCJuYSIsImRhdGUiLCJEYXRlIiwic2V0VGltZSIsIm9iamVjdCIsImsiLCJyZUEiLCJyZUIiLCJzb3VyY2UiLCJzdHJpbmciLCJhbSIsImJtIiwiYnMiLCJiaSIsImxhc3RJbmRleCIsImNvbG9yIiwiaXNBcnJheSIsImRlZ3JlZXMiLCJhdGFuMiIsImF0YW4iLCJpbnRlcnBvbGF0ZVRyYW5zZm9ybUNzcyIsImludGVycG9sYXRlVHJhbnNmb3JtU3ZnIiwicmhvIiwiU1FSVDIiLCJyaG8yIiwicmhvNCIsImVwc2lsb24yIiwicDAiLCJwMSIsIlMiLCJ1eDAiLCJ1eTAiLCJ3MCIsInV4MSIsInV5MSIsIncxIiwiZDIiLCJsb2ciLCJkMSIsImIwIiwiYjEiLCJyMCIsInIxIiwiY29zaHIwIiwidSIsImhzbCQyIiwiaHNsTG9uZyIsImhjbCQyIiwiaGNsTG9uZyIsImN1YmVoZWxpeCQyIiwiY3ViZWhlbGl4TG9uZyIsInF1YW50aXplIiwiaW50ZXJwb2xhdG9yIiwic2FtcGxlcyIsImludGVycG9sYXRlQmFzaXMiLCJpbnRlcnBvbGF0ZUJhc2lzQ2xvc2VkIiwiaW50ZXJwb2xhdGVEYXRlIiwiaW50ZXJwb2xhdGVOdW1iZXIiLCJpbnRlcnBvbGF0ZU9iamVjdCIsImludGVycG9sYXRlUm91bmQiLCJpbnRlcnBvbGF0ZVN0cmluZyIsImludGVycG9sYXRlWm9vbSIsImludGVycG9sYXRlUmdiIiwiaW50ZXJwb2xhdGVSZ2JCYXNpcyIsImludGVycG9sYXRlUmdiQmFzaXNDbG9zZWQiLCJpbnRlcnBvbGF0ZUhzbCIsImludGVycG9sYXRlSHNsTG9uZyIsImludGVycG9sYXRlTGFiIiwiaW50ZXJwb2xhdGVIY2wiLCJpbnRlcnBvbGF0ZUhjbExvbmciLCJpbnRlcnBvbGF0ZUN1YmVoZWxpeCIsImludGVycG9sYXRlQ3ViZWhlbGl4TG9uZyIsImRlZmluaXRpb24iLCJDb2xvciIsImZvcm1hdCIsInRyaW0iLCJyZUhleDMiLCJSZ2IiLCJyZUhleDYiLCJyZ2JuIiwicmVSZ2JJbnRlZ2VyIiwicmVSZ2JQZXJjZW50IiwicmVSZ2JhSW50ZWdlciIsInJnYmEiLCJyZVJnYmFQZXJjZW50IiwicmVIc2xQZXJjZW50IiwiaHNsYSIsInJlSHNsYVBlcmNlbnQiLCJuYW1lZCIsIk5hTiIsInJnYkNvbnZlcnQiLCJIc2wiLCJoc2xDb252ZXJ0IiwibWF4IiwiaHNsMnJnYiIsIm0xIiwibTIiLCJsYWJDb252ZXJ0IiwiTGFiIiwiSGNsIiwiZGVnMnJhZCIsInJnYjJ4eXoiLCJ4eXoybGFiIiwiWG4iLCJZbiIsInoiLCJabiIsInQwIiwibGFiMnh5eiIsInh5ejJyZ2IiLCJoY2xDb252ZXJ0IiwicmFkMmRlZyIsImN1YmVoZWxpeENvbnZlcnQiLCJDdWJlaGVsaXgiLCJCQ19EQSIsIkVEIiwiRUIiLCJibCIsIkUiLCJDIiwiRCIsImRhcmtlciIsImJyaWdodGVyIiwicmVJIiwicmVOIiwicmVQIiwiYWxpY2VibHVlIiwiYW50aXF1ZXdoaXRlIiwiYXF1YSIsImFxdWFtYXJpbmUiLCJhenVyZSIsImJlaWdlIiwiYmlzcXVlIiwiYmxhY2siLCJibGFuY2hlZGFsbW9uZCIsImJsdWUiLCJibHVldmlvbGV0IiwiYnJvd24iLCJidXJseXdvb2QiLCJjYWRldGJsdWUiLCJjaGFydHJldXNlIiwiY2hvY29sYXRlIiwiY29yYWwiLCJjb3JuZmxvd2VyYmx1ZSIsImNvcm5zaWxrIiwiY3JpbXNvbiIsImN5YW4iLCJkYXJrYmx1ZSIsImRhcmtjeWFuIiwiZGFya2dvbGRlbnJvZCIsImRhcmtncmF5IiwiZGFya2dyZWVuIiwiZGFya2dyZXkiLCJkYXJra2hha2kiLCJkYXJrbWFnZW50YSIsImRhcmtvbGl2ZWdyZWVuIiwiZGFya29yYW5nZSIsImRhcmtvcmNoaWQiLCJkYXJrcmVkIiwiZGFya3NhbG1vbiIsImRhcmtzZWFncmVlbiIsImRhcmtzbGF0ZWJsdWUiLCJkYXJrc2xhdGVncmF5IiwiZGFya3NsYXRlZ3JleSIsImRhcmt0dXJxdW9pc2UiLCJkYXJrdmlvbGV0IiwiZGVlcHBpbmsiLCJkZWVwc2t5Ymx1ZSIsImRpbWdyYXkiLCJkaW1ncmV5IiwiZG9kZ2VyYmx1ZSIsImZpcmVicmljayIsImZsb3JhbHdoaXRlIiwiZm9yZXN0Z3JlZW4iLCJmdWNoc2lhIiwiZ2FpbnNib3JvIiwiZ2hvc3R3aGl0ZSIsImdvbGQiLCJnb2xkZW5yb2QiLCJncmF5IiwiZ3JlZW4iLCJncmVlbnllbGxvdyIsImdyZXkiLCJob25leWRldyIsImhvdHBpbmsiLCJpbmRpYW5yZWQiLCJpbmRpZ28iLCJpdm9yeSIsImtoYWtpIiwibGF2ZW5kZXIiLCJsYXZlbmRlcmJsdXNoIiwibGF3bmdyZWVuIiwibGVtb25jaGlmZm9uIiwibGlnaHRibHVlIiwibGlnaHRjb3JhbCIsImxpZ2h0Y3lhbiIsImxpZ2h0Z29sZGVucm9keWVsbG93IiwibGlnaHRncmF5IiwibGlnaHRncmVlbiIsImxpZ2h0Z3JleSIsImxpZ2h0cGluayIsImxpZ2h0c2FsbW9uIiwibGlnaHRzZWFncmVlbiIsImxpZ2h0c2t5Ymx1ZSIsImxpZ2h0c2xhdGVncmF5IiwibGlnaHRzbGF0ZWdyZXkiLCJsaWdodHN0ZWVsYmx1ZSIsImxpZ2h0eWVsbG93IiwibGltZSIsImxpbWVncmVlbiIsImxpbmVuIiwibWFnZW50YSIsIm1hcm9vbiIsIm1lZGl1bWFxdWFtYXJpbmUiLCJtZWRpdW1ibHVlIiwibWVkaXVtb3JjaGlkIiwibWVkaXVtcHVycGxlIiwibWVkaXVtc2VhZ3JlZW4iLCJtZWRpdW1zbGF0ZWJsdWUiLCJtZWRpdW1zcHJpbmdncmVlbiIsIm1lZGl1bXR1cnF1b2lzZSIsIm1lZGl1bXZpb2xldHJlZCIsIm1pZG5pZ2h0Ymx1ZSIsIm1pbnRjcmVhbSIsIm1pc3R5cm9zZSIsIm1vY2Nhc2luIiwibmF2YWpvd2hpdGUiLCJuYXZ5Iiwib2xkbGFjZSIsIm9saXZlIiwib2xpdmVkcmFiIiwib3JhbmdlIiwib3JhbmdlcmVkIiwib3JjaGlkIiwicGFsZWdvbGRlbnJvZCIsInBhbGVncmVlbiIsInBhbGV0dXJxdW9pc2UiLCJwYWxldmlvbGV0cmVkIiwicGFwYXlhd2hpcCIsInBlYWNocHVmZiIsInBlcnUiLCJwaW5rIiwicGx1bSIsInBvd2RlcmJsdWUiLCJwdXJwbGUiLCJyZWJlY2NhcHVycGxlIiwicmVkIiwicm9zeWJyb3duIiwicm95YWxibHVlIiwic2FkZGxlYnJvd24iLCJzYWxtb24iLCJzYW5keWJyb3duIiwic2VhZ3JlZW4iLCJzZWFzaGVsbCIsInNpZW5uYSIsInNpbHZlciIsInNreWJsdWUiLCJzbGF0ZWJsdWUiLCJzbGF0ZWdyYXkiLCJzbGF0ZWdyZXkiLCJzbm93Iiwic3ByaW5nZ3JlZW4iLCJzdGVlbGJsdWUiLCJ0YW4iLCJ0ZWFsIiwidGhpc3RsZSIsInRvbWF0byIsInR1cnF1b2lzZSIsInZpb2xldCIsIndoZWF0Iiwid2hpdGUiLCJ3aGl0ZXNtb2tlIiwieWVsbG93IiwieWVsbG93Z3JlZW4iLCJkaXNwbGF5YWJsZSIsIktuIiwiQSIsIkIiLCJCT1RUT01fVE9fVE9QX1NPUlQiLCJiMnQiLCJsYXlvdXRZIiwibDJyIiwibGF5b3V0WCIsIlRPUF9UT19CT1RUT01fU09SVCIsInQyYiIsIlRSRUVfTEFZT1VUIiwiZDNfaGllcmFyY2h5XzEiLCJoaWVyYXJjaHkiLCJ0cmVlIiwiQ0xVU1RFUl9MQVlPVVQiLCJjbHVzdGVyIiwicHJvamVjdCIsImFuZ2xlIiwiQ0VOVEVSIiwiUkFESUFMX0xBWU9VVCIsInNpemUiLCJzZXBhcmF0aW9uIiwiZGVwdGgiLCJlYWNoIiwicHJvamVjdGVkIiwidmlzTm9kZSIsImRhdGEiLCJSQURJQUxfVEVYVCIsInNlZ21lbnRzIiwidGV4dEFuY2hvciIsInJvdGF0aW9uIiwidHJhbnNsYXRpb24iLCJTTEFOVEVEX1RFWFQiLCJiYXNlU3Ryb2tlV2lkdGgiLCJSQURJQUxfRURHRSIsInN0cm9rZVdpZHRoIiwibWFrZUxpbmtQYXRoIiwiVFJFRV9FREdFIiwieUF2ZyIsIlRyZWUiLCJDbHVzdGVyIiwiUmFkaWFsIiwiZGVmYXVsdFNlcGFyYXRpb24iLCJtZWFuWCIsIm1lYW5YUmVkdWNlIiwibWF4WSIsIm1heFlSZWR1Y2UiLCJsZWFmTGVmdCIsImxlYWZSaWdodCIsImNvdW50Iiwic3VtIiwibGVhc3RDb21tb25BbmNlc3RvciIsImFOb2RlcyIsImFuY2VzdG9ycyIsImJOb2RlcyIsImNoaWxkcyIsIk5vZGUiLCJ2YWx1ZWQiLCJkZWZhdWx0Q2hpbGRyZW4iLCJlYWNoQmVmb3JlIiwiY29tcHV0ZUhlaWdodCIsIm5vZGVfY29weSIsImNvcHlEYXRhIiwiTm9kZSQyIiwiXyIsIm5leHQiLCJlbmNsb3NlcyIsImRyIiwiZW5jbG9zZU4iLCJMIiwiY2lyY2xlIiwibDIiLCJsMCIsImwxIiwiZW5jbG9zZTEiLCJlbmNsb3NlMiIsImVuY2xvc2UzIiwidGFpbCIsIngxIiwieTEiLCJ4MiIsInkyIiwicjIiLCJ4MjEiLCJ5MjEiLCJyMjEiLCJ4MyIsInkzIiwicjMiLCJhMiIsImIyIiwiYzIiLCJhMyIsImIzIiwiYzMiLCJkMyIsImFiIiwicGxhY2UiLCJheCIsImF5IiwiZGEiLCJkYiIsImRjIiwiaW50ZXJzZWN0cyIsImRpc3RhbmNlMiIsIk5vZGUkMSIsInByZXZpb3VzIiwicGFja0VuY2xvc2UiLCJjaXJjbGVzIiwiY3giLCJjeSIsInNqIiwic2siLCJhYSIsImJhIiwiY2EiLCJvYSIsIm94Iiwib3kiLCJwYWNrIiwiZW5jbG9zZSIsIm9wdGlvbmFsIiwicmVxdWlyZWQiLCJjb25zdGFudFplcm8iLCJkZWZhdWx0UmFkaXVzIiwicmFkaXVzTGVhZiIsInBhY2tDaGlsZHJlbiIsInBhZGRpbmciLCJ0cmFuc2xhdGVDaGlsZCIsImRlZmF1bHRJZCIsImRlZmF1bHRQYXJlbnRJZCIsInBhcmVudElkIiwiZGVmYXVsdFNlcGFyYXRpb24kMSIsIm5leHRMZWZ0IiwibmV4dFJpZ2h0IiwibW92ZVN1YnRyZWUiLCJ3bSIsIndwIiwic2hpZnQiLCJjaGFuZ2UiLCJleGVjdXRlU2hpZnRzIiwidyIsIm5leHRBbmNlc3RvciIsInZpbSIsImFuY2VzdG9yIiwiVHJlZU5vZGUiLCJ0cmVlUm9vdCIsInNxdWFyaWZ5UmF0aW8iLCJyYXRpbyIsIngwIiwieTAiLCJyb3ciLCJzdW1WYWx1ZSIsIm1pblZhbHVlIiwibWF4VmFsdWUiLCJuZXdSYXRpbyIsIm1pblJhdGlvIiwiYWxwaGEiLCJiZXRhIiwicm93cyIsImkwIiwiaTEiLCJkaWNlIiwidHJlZW1hcERpY2UiLCJ0cmVlbWFwU2xpY2UiLCJwcmV2aW91c05vZGUiLCJlYWNoQWZ0ZXIiLCJub2RlU2l6ZSIsIm5vZGVfY291bnQiLCJub2RlX2VhY2giLCJyZXZlcnNlIiwibm9kZV9lYWNoQmVmb3JlIiwibm9kZV9lYWNoQWZ0ZXIiLCJub2RlX3N1bSIsIm5vZGVfc29ydCIsImNvbXBhcmUiLCJub2RlX3BhdGgiLCJub2RlX2FuY2VzdG9ycyIsIm5vZGVfZGVzY2VuZGFudHMiLCJub2RlX2xlYXZlcyIsImxlYXZlcyIsIm5vZGVfbGlua3MiLCJsaW5rcyIsImRlc2NlbmRhbnRzIiwiY29weSIsInNodWZmbGUiLCJzaWJsaW5ncyIsInJvdW5kTm9kZSIsInBhcnRpdGlvbiIsInBvc2l0aW9uTm9kZSIsImtleVByZWZpeCIsInByZXJvb3QiLCJhbWJpZ3VvdXMiLCJzdHJhdGlmeSIsIm5vZGVJZCIsIm5vZGVLZXkiLCJub2RlQnlLZXkiLCJmaXJzdFdhbGsiLCJzZWNvbmRXYWxrIiwic2l6ZU5vZGUiLCJ0eCIsImt4Iiwia3kiLCJtaWRwb2ludCIsImFwcG9ydGlvbiIsInZpcCIsInZvcCIsInZvbSIsInNpcCIsInNvcCIsInNpbSIsInNvbSIsInBoaSIsInNxdWFyaWZ5IiwiY3VzdG9tIiwiaW5kZXgkMSIsInRyZWVtYXAiLCJwYWRkaW5nU3RhY2siLCJwYWRkaW5nSW5uZXIiLCJwYWRkaW5nTGVmdCIsInBhZGRpbmdUb3AiLCJwYWRkaW5nUmlnaHQiLCJwYWRkaW5nQm90dG9tIiwidGlsZSIsInBhZGRpbmdPdXRlciIsImJpbmFyeSIsInZhbHVlT2Zmc2V0Iiwic3VtcyIsInZhbHVlVGFyZ2V0IiwiaGkiLCJtaWQiLCJ2YWx1ZUxlZnQiLCJ2YWx1ZVJpZ2h0IiwieGsiLCJ5ayIsInNsaWNlRGljZSIsInJlc3F1YXJpZnkiLCJfc3F1YXJpZnkiLCJwYWNrU2libGluZ3MiLCJ0cmVlbWFwQmluYXJ5IiwidHJlZW1hcFNsaWNlRGljZSIsInRyZWVtYXBTcXVhcmlmeSIsInRyZWVtYXBSZXNxdWFyaWZ5IiwiYW5jZXN0b3JDb2xsYXBzZWQiLCJ0cmFuc2l0aW9uVmlld18xIiwidHJhbnNpdGlvbnMiLCJwb2ludGVyRXZlbnRzIiwiY2FuY2VsUHJldmlvdXNBbmltIiwib25Nb3VzZU1vdmUiLCJ3aW5kb3dIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJkZXJlZyIsIm9uQmVmb3JlIiwiX2RpdiIsInNjcm9sbFRvUmlnaHQiLCJ0YXJnZXRTY3JvbGxYIiwic2Nyb2xsV2lkdGgiLCJjbGllbnRXaWR0aCIsIm5ld1ZhbCIsIm9sZFZhbCIsInNjcm9sbExlZnQiLCJtYXhpbXVtVHJhbnNpdGlvbnMiLCJlbmZvcmNlTWF4IiwidmFscyIsIiRpZCIsIlRyYW5zaXRpb25WaWV3IiwibWluV2lkdGgiLCJib3JkZXIiLCJ0cmFuc2l0aW9uUG9wb3Zlcl8xIiwiYnJlYWRjcnVtYkFycm93XzEiLCJzdHJpbmdzXzEiLCJjYW5jZWxhYmxlUHJvbWlzZV8xIiwidHJhbnNpdGlvblByb21pc2UiLCJzdGF0dXMiLCJtZXNzYWdlIiwicmVqZWN0aW9uIiwicGlubmVkIiwiZXhwYW5kZWQiLCJvcGVuIiwiZGVyZWdpc3RlckZ1bmN0aW9ucyIsInRvZ2dsZVBpbiIsInRvZ2dsZUV4cGFuZCIsImNsb3NlIiwic2V0TWVzc2FnZSIsImlzQ2FuY2VsZWQiLCJzdGF0ZW5hbWUiLCJmbnMiLCJvblN0YXJ0IiwicHJpb3JpdHkiLCJvbkV4aXQiLCJvblJldGFpbiIsIm9uRW50ZXIiLCJvbkZpbmlzaCIsInN1Y2Nlc3MiLCJlcnIiLCJyZWRpcmVjdGVkIiwidGFyZ2V0U3RhdGUiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJwYXJhbXMiLCJtYXhMZW5ndGgiLCJtYWtlQ2FuY2VsYWJsZSIsImNhbmNlbCIsIm9uTW91c2VFbnRlciIsIm9uTW91c2VMZWF2ZSIsIlRyYW5zaXRpb25Qb3BvdmVyIiwidG9nZ2xlUGlubmVkIiwiQnJlYWRjcnVtYkFycm93IiwicG9wb3ZlckhlYWRpbmdfMSIsInRyYW5zU3VtbWFyeV8xIiwibm9kZVBhdGhzXzEiLCJQb3BvdmVySGVhZGluZyIsIlRyYW5zU3VtbWFyeSIsIk5vZGVQYXRocyIsInRhY2tDbGFzcyIsImV4cGFuZENsYXNzIiwia2V5c0FuZFZhbHVlc18xIiwiZnJvbSIsImNvbFNwYW4iLCJLZXlzQW5kVmFsdWVzIiwibGFiZWxzIiwic2VjdGlvbiIsIm1vZGFsVGl0bGUiLCJvdXRlcmRpdiIsImtleXZhbGRpdiIsIl9rZXkiLCJtb2RhbF8xIiwicmVzb2x2ZURhdGFfMSIsImlzT2JqZWN0IiwidmFsIiwiZGlzcGxheVZhbHVlIiwiZGVmYXVsdENsYXNzIiwiaXNFbXB0eSIsImNsYXNzIiwicmVuZGVyVmFsdWUiLCJNb2RhbCIsInNob3ciLCJSZXNvbHZlRGF0YSIsIl9yZWYiLCJmYWRlcyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJ0YWJJbmRleCIsImRpc3BsYXkiLCJtb2RhbCIsInByZXR0eV8xIiwiUHJldHR5IiwicHJlU3R5bGUiLCJtYXJnaW4iLCJ0b2dnbGUiLCJzdWJzdHIiLCJzdHJpbmdpZnlQYXR0ZXJuIiwic2VlbiIsIm5vZGVEZXRhaWxfMSIsImZsb3dBcnJvd18xIiwiZW50ZXJFeGl0IiwidGNQYXRocyIsInBhcnRpYWxLZXkiLCJwYXRobmFtZSIsInBhdGhuYW1lMSIsInBhdGhuYW1lMiIsInRvVHlwZSIsImZyb21UeXBlIiwibWF4UGF0aExlbmd0aCIsImxhc3RFbnRlcklkeCIsImVsZW0iLCJOb2RlRGV0YWlsIiwiRmxvd0Fycm93IiwicGFyYW1TY2hlbWEiLCJwYXJhbSIsInBhcmFtVmFsdWVzIiwicmVzb2x2ZXMiLCJhc1N0cmluZyIsImlnbm9yZWRUb2tlbnMiLCJyZXNvbHZhYmxlcyIsInRva2VuIiwicmVuZGVyQ3VydmUiLCJzdHJva2UiLCJmaWxsIiwicmVuZGVyVmVydGljYWxMaW5lIiwidmlld0JveCIsInJlbmRlckN1cnZlUlUiLCJyZW5kZXJDdXJ2ZVJEIiwicmVuZGVyQXJyb3dVIiwicG9pbnRzIiwicmVuZGVyQXJyb3dEIiwicmVuZGVyU3ZnIiwib3ZlcmZsb3ciLCJwb3NpdGlvbiIsImljb25DbGFzcyIsImljb25DbGFzc2VzIiwicnVubmluZyIsImlnbm9yZWQiLCJoYXNDYW5jZWxlZF8iLCJ3cmFwcGVkUHJvbWlzZSIsInJlamVjdCIsImNhbmNlbGFibGVQcm9taXNlIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDRkE7QUFDQSxJQUVBLGVBQWUsSUFBTSxjQUFjLEdBQUcsT0FBTyxDQUFDO0lBQzlDLGVBQWUsQUFBTyxJQUFNLEVBQUUsR0FBRyxjQUFjLElBQUlBLHFCQUFxQixHQUFHLGNBQWMsR0FBRyxjQUFjLENBQUM7O0lDSjNHOzs7Ozs7Ozs7Ozs7OztJQVNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXlDQSxhQUFnQixLQUFLLENBQUMsRUFBWTtRQUNoQyxPQUFPLFNBQVMsT0FBTztZQUNyQixJQUFJLFNBQVMsQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRTtnQkFDakMsT0FBTyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQzthQUNsQztZQUNELElBQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNuRCxPQUFPLE9BQU8sQ0FBQyxJQUFJLE9BQVosT0FBTyxrQkFBTSxJQUFJLEdBQUssSUFBSSxHQUFFO1NBQ3BDLENBQUM7SUFDSixDQUFDO0lBRUQ7Ozs7OztBQU1BLGFBQWdCLE9BQU87UUFDckIsSUFBTSxJQUFJLEdBQUcsU0FBUyxDQUFDO1FBQ3ZCLElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQzlCLE9BQU87WUFDTCxJQUFJLENBQUMsR0FBRyxLQUFLLEVBQ1gsTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFL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R0FDQUMsRUFBQSxFQUFBRCxFQUVBRSxFQUFBLHNCQUNBQyxFQUFBLGdEQUNBQyxFQUFBLGlEQUNBakQsRUFBQSxtQkFDQUUsRUFBQSxtQkFDQUUsRUFBQSxHQUFBdlUsUUFBQSxXQUFBa1gsT0FBQSxRQUNBMUMsRUFBQSxHQUFBeFUsUUFBQSxXQUFBb1gsT0FBQSxRQUNBM0MsRUFBQSxHQUFBelUsUUFBQSxZQUFBa1gsTUFBQUMsR0FBQSxRQUNBeEMsRUFBQSxHQUFBM1UsUUFBQSxZQUFBb1gsTUFBQUQsR0FBQSxRQUNBdkMsRUFBQSxHQUFBNVUsUUFBQSxXQUFBbVgsRUFBQUMsS0FBQSxRQUNBdEMsRUFBQSxHQUFBOVUsUUFBQSxZQUFBbVgsRUFBQUMsSUFBQUQsR0FBQSxRQUVBcEMsR0FDQXNDLFVBQUEsU0FDQUMsYUFBQSxTQUNBQyxLQUFBLE1BQ0FDLFdBQUEsUUFDQUMsTUFBQSxTQUNBQyxNQUFBLFNBQ0FDLE9BQUEsU0FDQUMsTUFBQSxFQUNBQyxlQUFBLFNBQ0FDLEtBQUEsSUFDQUMsV0FBQSxRQUNBQyxNQUFBLFNBQ0FDLFVBQUEsU0FDQUMsVUFBQSxRQUNBQyxXQUFBLFFBQ0FDLFVBQUEsU0FDQUMsTUFBQSxTQUNBQyxlQUFBLFFBQ0FDLFNBQUEsU0FDQUMsUUFBQSxTQUNBQyxLQUFBLE1BQ0FDLFNBQUEsSUFDQUMsU0FBQSxNQUNBQyxjQUFBLFNBQ0FDLFNBQUEsU0FDQUMsVUFBQSxNQUNBQyxTQUFBLFNBQ0FDLFVBQUEsU0FDQUMsWUFBQSxRQUNBQyxlQUFBLFFBQ0FDLFdBQUEsU0FDQUMsV0FBQSxTQUNBQyxRQUFBLFFBQ0FDLFdBQUEsU0FDQUMsYUFBQSxRQUNBQyxjQUFBLFFBQ0FDLGNBQUEsUUFDQUMsY0FBQSxRQUNBQyxjQUFBLE1BQ0FDLFdBQUEsUUFDQUMsU0FBQSxTQUNBQyxZQUFBLE1BQ0FDLFFBQUEsUUFDQUMsUUFBQSxRQUNBQyxXQUFBLFFBQ0FDLFVBQUEsU0FDQUMsWUFBQSxTQUNBQyxZQUFBLFFBQ0FDLFFBQUEsU0FDQUMsVUFBQSxTQUNBQyxXQUFBLFNBQ0FDLEtBQUEsU0FDQUMsVUFBQSxTQUNBQyxLQUFBLFFBQ0FDLE1BQUEsTUFDQUMsWUFBQSxTQUNBQyxLQUFBLFFBQ0FDLFNBQUEsU0FDQUMsUUFBQSxTQUNBQyxVQUFBLFNBQ0FDLE9BQUEsUUFDQUMsTUFBQSxTQUNBQyxNQUFBLFNBQ0FDLFNBQUEsU0FDQUMsY0FBQSxTQUNBQyxVQUFBLFFBQ0FDLGFBQUEsU0FDQUMsVUFBQSxTQUNBQyxXQUFBLFNBQ0FDLFVBQUEsU0FDQUMscUJBQUEsU0FDQUMsVUFBQSxTQUNBQyxXQUFBLFFBQ0FDLFVBQUEsU0FDQUMsVUFBQSxTQUNBQyxZQUFBLFNBQ0FDLGNBQUEsUUFDQUMsYUFBQSxRQUNBQyxlQUFBLFFBQ0FDLGVBQUEsUUFDQUMsZUFBQSxTQUNBQyxZQUFBLFNBQ0FDLEtBQUEsTUFDQUMsVUFBQSxRQUNBQyxNQUFBLFNBQ0FDLFFBQUEsU0FDQUMsT0FBQSxRQUNBQyxpQkFBQSxRQUNBQyxXQUFBLElBQ0FDLGFBQUEsU0FDQUMsYUFBQSxRQUNBQyxlQUFBLFFBQ0FDLGdCQUFBLFFBQ0FDLGtCQUFBLE1BQ0FDLGdCQUFBLFFBQ0FDLGdCQUFBLFNBQ0FDLGFBQUEsUUFDQUMsVUFBQSxTQUNBQyxVQUFBLFNBQ0FDLFNBQUEsU0FDQUMsWUFBQSxTQUNBQyxLQUFBLElBQ0FDLFFBQUEsU0FDQUMsTUFBQSxRQUNBQyxVQUFBLFFBQ0FDLE9BQUEsU0FDQUMsVUFBQSxTQUNBQyxPQUFBLFNBQ0FDLGNBQUEsU0FDQUMsVUFBQSxTQUNBQyxjQUFBLFNBQ0FDLGNBQUEsU0FDQUMsV0FBQSxTQUNBQyxVQUFBLFNBQ0FDLEtBQUEsU0FDQUMsS0FBQSxTQUNBQyxLQUFBLFNBQ0FDLFdBQUEsU0FDQUMsT0FBQSxRQUNBQyxjQUFBLFFBQ0FDLElBQUEsU0FDQUMsVUFBQSxTQUNBQyxVQUFBLFFBQ0FDLFlBQUEsUUFDQUMsT0FBQSxTQUNBQyxXQUFBLFNBQ0FDLFNBQUEsUUFDQUMsU0FBQSxTQUNBQyxPQUFBLFNBQ0FDLE9BQUEsU0FDQUMsUUFBQSxRQUNBQyxVQUFBLFFBQ0FDLFVBQUEs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M0MsYzdDNHRLWixJNkM1dEs2QjUzQyxLQUFLK0UsTUFBTTlCLFdBQVcyUSxLQUFLelEsUUFUekMsTUFnQnBDd3ZDLEdBakNxQy93QyxFQUFBd0wsVUFBeEJ4TSxHQUFBK3hDLG1CN0Nnd0tQLFNBQVU5eEMsRUFBUUQsR0FFdkIsWUFDQXFCLFFBQU9DLGVBQWV0QixFQUFTLGNBQWdCdUIsT0FBTyxJOEMvd0sxQ3ZCLEVBQUF5eEMsZUFBaUIsU0FBQ3Z0QixHQUM3QixHQUFJa3pCLElBQWUsRUFFYkMsRUFBaUIsR0FBSXpuQyxTQUFRLFNBQUNDLEVBQVN5bkMsR0FDM0NwekIsRUFBUW5VLEtBQ0osU0FBQ3NqQyxHQUFVLE1BQUErRCxHQUFlRSxHQUFROUcsWUFBWSxJQUFTM2dDLEVBQVF3akMsSUFDL0QsU0FBQzloQyxHQUFVLE1BQWUrbEMsR0FBZkYsR0FBdUI1RyxZQUFZLEdBQWdCai9CLE9BSWhFZ21DLEdBQ0ZyekIsUUFBU216QixFQUNUN0csWUFBWSxFQUNaa0IsT0FBTSxXQUNKNkYsRUFBa0IvRyxXQUFhNEcsR0FBZSxHQUlsRCxPQUFPRyIsImZpbGUiOiJ2ZW5kb3ItMTU4MjY3MjM4OTc1OC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgalF1ZXJ5IHYzLjQuMSB8IChjKSBKUyBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi9cbiFmdW5jdGlvbihlLHQpe1widXNlIHN0cmljdFwiO1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lLmRvY3VtZW50P3QoZSwhMCk6ZnVuY3Rpb24oZSl7aWYoIWUuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiKTtyZXR1cm4gdChlKX06dChlKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihDLGUpe1widXNlIHN0cmljdFwiO3ZhciB0PVtdLEU9Qy5kb2N1bWVudCxyPU9iamVjdC5nZXRQcm90b3R5cGVPZixzPXQuc2xpY2UsZz10LmNvbmNhdCx1PXQucHVzaCxpPXQuaW5kZXhPZixuPXt9LG89bi50b1N0cmluZyx2PW4uaGFzT3duUHJvcGVydHksYT12LnRvU3RyaW5nLGw9YS5jYWxsKE9iamVjdCkseT17fSxtPWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJlwibnVtYmVyXCIhPXR5cGVvZiBlLm5vZGVUeXBlfSx4PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiZlPT09ZS53aW5kb3d9LGM9e3R5cGU6ITAsc3JjOiEwLG5vbmNlOiEwLG5vTW9kdWxlOiEwfTtmdW5jdGlvbiBiKGUsdCxuKXt2YXIgcixpLG89KG49bnx8RSkuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtpZihvLnRleHQ9ZSx0KWZvcihyIGluIGMpKGk9dFtyXXx8dC5nZXRBdHRyaWJ1dGUmJnQuZ2V0QXR0cmlidXRlKHIpKSYmby5zZXRBdHRyaWJ1dGUocixpKTtuLmhlYWQuYXBwZW5kQ2hpbGQobykucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvKX1mdW5jdGlvbiB3KGUpe3JldHVybiBudWxsPT1lP2UrXCJcIjpcIm9iamVjdFwiPT10eXBlb2YgZXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZT9uW28uY2FsbChlKV18fFwib2JqZWN0XCI6dHlwZW9mIGV9dmFyIGY9XCIzLjQuMVwiLGs9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IGsuZm4uaW5pdChlLHQpfSxwPS9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZztmdW5jdGlvbiBkKGUpe3ZhciB0PSEhZSYmXCJsZW5ndGhcImluIGUmJmUubGVuZ3RoLG49dyhlKTtyZXR1cm4hbShlKSYmIXgoZSkmJihcImFycmF5XCI9PT1ufHwwPT09dHx8XCJudW1iZXJcIj09dHlwZW9mIHQmJjA8dCYmdC0xIGluIGUpfWsuZm49ay5wcm90b3R5cGU9e2pxdWVyeTpmLGNvbnN0cnVjdG9yOmssbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBzLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9zLmNhbGwodGhpcyk6ZTwwP3RoaXNbZSt0aGlzLmxlbmd0aF06dGhpc1tlXX0scHVzaFN0YWNrOmZ1bmN0aW9uKGUpe3ZhciB0PWsubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGUpO3JldHVybiB0LnByZXZPYmplY3Q9dGhpcyx0fSxlYWNoOmZ1bmN0aW9uKGUpe3JldHVybiBrLmVhY2godGhpcyxlKX0sbWFwOmZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnB1c2hTdGFjayhrLm1hcCh0aGlzLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY2FsbChlLHQsZSl9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHMuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5sZW5ndGgsbj0rZSsoZTwwP3Q6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKDA8PW4mJm48dD9bdGhpc1tuXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKCl9LHB1c2g6dSxzb3J0OnQuc29ydCxzcGxpY2U6dC5zcGxpY2V9LGsuZXh0ZW5kPWsuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsaSxvLGE9YXJndW1lbnRzWzBdfHx7fSxzPTEsdT1hcmd1bWVudHMubGVuZ3RoLGw9ITE7Zm9yKFwiYm9vbGVhblwiPT10eXBlb2YgYSYmKGw9YSxhPWFyZ3VtZW50c1tzXXx8e30scysrKSxcIm9iamVjdFwiPT10eXBlb2YgYXx8bShhKXx8KGE9e30pLHM9PT11JiYoYT10aGlzLHMtLSk7czx1O3MrKylpZihudWxsIT0oZT1hcmd1bWVudHNbc10pKWZvcih0IGluIGUpcj1lW3RdLFwiX19wcm90b19fXCIhPT10JiZhIT09ciYmKGwmJnImJihrLmlzUGxhaW5PYmplY3Qocil8fChpPUFycmF5LmlzQXJyYXkocikpKT8obj1hW3RdLG89aSYmIUFycmF5LmlzQXJyYXkobik/W106aXx8ay5pc1BsYWluT2JqZWN0KG4pP246e30saT0hMSxhW3RdPWsuZXh0ZW5kKGwsbyxyKSk6dm9pZCAwIT09ciYmKGFbdF09cikpO3JldHVybiBhfSxrLmV4dGVuZCh7ZXhwYW5kbzpcImpRdWVyeVwiKyhmK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xcRC9nLFwiXCIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKGUpfSxub29wOmZ1bmN0aW9uKCl7fSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuISghZXx8XCJbb2JqZWN0IE9iamVjdF1cIiE9PW8uY2FsbChlKSkmJighKHQ9cihlKSl8fFwiZnVuY3Rpb25cIj09dHlwZW9mKG49di5jYWxsKHQsXCJjb25zdHJ1Y3RvclwiKSYmdC5jb25zdHJ1Y3RvcikmJmEuY2FsbChuKT09PWwpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oZSx0KXtiKGUse25vbmNlOnQmJnQubm9uY2V9KX0sZWFjaDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MDtpZihkKGUpKXtmb3Iobj1lLmxlbmd0aDtyPG47cisrKWlmKCExPT09dC5jYWxsKGVbcl0scixlW3JdKSlicmVha31lbHNlIGZvcihyIGluIGUpaWYoITE9PT10LmNhbGwoZVtyXSxyLGVbcl0pKWJyZWFrO3JldHVybiBlfSx0cmltOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP1wiXCI6KGUrXCJcIikucmVwbGFjZShwLFwiXCIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oZSx0KXt2YXIgbj10fHxbXTtyZXR1cm4gbnVsbCE9ZSYmKGQoT2JqZWN0KGUpKT9rLm1lcmdlKG4sXCJzdHJpbmdcIj09dHlwZW9mIGU/W2VdOmUpOnUuY2FsbChuLGUpKSxufSxpbkFycmF5OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbnVsbD09dD8tMTppLmNhbGwodCxlLG4pfSxtZXJnZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0rdC5sZW5ndGgscj0wLGk9ZS5sZW5ndGg7cjxuO3IrKyllW2krK109dFtyXTtyZXR1cm4gZS5sZW5ndGg9aSxlfSxncmVwOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9W10saT0wLG89ZS5sZW5ndGgsYT0hbjtpPG87aSsrKSF0KGVbaV0saSkhPT1hJiZyLnB1c2goZVtpXSk7cmV0dXJuIHJ9LG1hcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvPTAsYT1bXTtpZihkKGUpKWZvcihyPWUubGVuZ3RoO288cjtvKyspbnVsbCE9KGk9dChlW29dLG8sbikpJiZhLnB1c2goaSk7ZWxzZSBmb3IobyBpbiBlKW51bGwhPShpPXQoZVtvXSxvLG4pKSYmYS5wdXNoKGkpO3JldHVybiBnLmFwcGx5KFtdLGEpfSxndWlkOjEsc3VwcG9ydDp5fSksXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiYoay5mbltTeW1ib2wuaXRlcmF0b3JdPXRbU3ltYm9sLml0ZXJhdG9yXSksay5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciBTeW1ib2xcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oZSx0KXtuW1wiW29iamVjdCBcIit0K1wiXVwiXT10LnRvTG93ZXJDYXNlKCl9KTt2YXIgaD1mdW5jdGlvbihuKXt2YXIgZSxkLGIsbyxpLGgsZixnLHcsdSxsLFQsQyxhLEUsdixzLGMseSxrPVwic2l6emxlXCIrMSpuZXcgRGF0ZSxtPW4uZG9jdW1lbnQsUz0wLHI9MCxwPXVlKCkseD11ZSgpLE49dWUoKSxBPXVlKCksRD1mdW5jdGlvbihlLHQpe3JldHVybiBlPT09dCYmKGw9ITApLDB9LGo9e30uaGFzT3duUHJvcGVydHksdD1bXSxxPXQucG9wLEw9dC5wdXNoLEg9dC5wdXNoLE89dC5zbGljZSxQPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTAscj1lLmxlbmd0aDtuPHI7bisrKWlmKGVbbl09PT10KXJldHVybiBuO3JldHVybi0xfSxSPVwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixNPVwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixJPVwiKD86XFxcXFxcXFwufFtcXFxcdy1dfFteXFwwLVxcXFx4YTBdKStcIixXPVwiXFxcXFtcIitNK1wiKihcIitJK1wiKSg/OlwiK00rXCIqKFsqXiR8IX5dPz0pXCIrTStcIiooPzonKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCJ8KFwiK0krXCIpKXwpXCIrTStcIipcXFxcXVwiLCQ9XCI6KFwiK0krXCIpKD86XFxcXCgoKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8KCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKClbXFxcXF1dfFwiK1crXCIpKil8LiopXFxcXCl8KVwiLEY9bmV3IFJlZ0V4cChNK1wiK1wiLFwiZ1wiKSxCPW5ldyBSZWdFeHAoXCJeXCIrTStcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIrTStcIiskXCIsXCJnXCIpLF89bmV3IFJlZ0V4cChcIl5cIitNK1wiKixcIitNK1wiKlwiKSx6PW5ldyBSZWdFeHAoXCJeXCIrTStcIiooWz4rfl18XCIrTStcIilcIitNK1wiKlwiKSxVPW5ldyBSZWdFeHAoTStcInw+XCIpLFg9bmV3IFJlZ0V4cCgkKSxWPW5ldyBSZWdFeHAoXCJeXCIrSStcIiRcIiksRz17SUQ6bmV3IFJlZ0V4cChcIl4jKFwiK0krXCIpXCIpLENMQVNTOm5ldyBSZWdFeHAoXCJeXFxcXC4oXCIrSStcIilcIiksVEFHOm5ldyBSZWdFeHAoXCJeKFwiK0krXCJ8WypdKVwiKSxBVFRSOm5ldyBSZWdFeHAoXCJeXCIrVyksUFNFVURPOm5ldyBSZWdFeHAoXCJeXCIrJCksQ0hJTEQ6bmV3IFJlZ0V4cChcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIrTStcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiK00rXCIqKD86KFsrLV18KVwiK00rXCIqKFxcXFxkKyl8KSlcIitNK1wiKlxcXFwpfClcIixcImlcIiksYm9vbDpuZXcgUmVnRXhwKFwiXig/OlwiK1IrXCIpJFwiLFwiaVwiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cChcIl5cIitNK1wiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIitNK1wiKigoPzotXFxcXGQpP1xcXFxkKilcIitNK1wiKlxcXFwpfCkoPz1bXi1dfCQpXCIsXCJpXCIpfSxZPS9IVE1MJC9pLFE9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxKPS9eaFxcZCQvaSxLPS9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sWj0vXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxlZT0vWyt+XS8sdGU9bmV3IFJlZ0V4cChcIlxcXFxcXFxcKFtcXFxcZGEtZl17MSw2fVwiK00rXCI/fChcIitNK1wiKXwuKVwiLFwiaWdcIiksbmU9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPVwiMHhcIit0LTY1NTM2O3JldHVybiByIT1yfHxuP3Q6cjwwP1N0cmluZy5mcm9tQ2hhckNvZGUocis2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZShyPj4xMHw1NTI5NiwxMDIzJnJ8NTYzMjApfSxyZT0vKFtcXDAtXFx4MWZcXHg3Zl18Xi0/XFxkKXxeLSR8W15cXDAtXFx4MWZcXHg3Zi1cXHVGRkZGXFx3LV0vZyxpZT1mdW5jdGlvbihlLHQpe3JldHVybiB0P1wiXFwwXCI9PT1lP1wiXFx1ZmZmZFwiOmUuc2xpY2UoMCwtMSkrXCJcXFxcXCIrZS5jaGFyQ29kZUF0KGUubGVuZ3RoLTEpLnRvU3RyaW5nKDE2KStcIiBcIjpcIlxcXFxcIitlfSxvZT1mdW5jdGlvbigpe1QoKX0sYWU9YmUoZnVuY3Rpb24oZSl7cmV0dXJuITA9PT1lLmRpc2FibGVkJiZcImZpZWxkc2V0XCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCl9LHtkaXI6XCJwYXJlbnROb2RlXCIsbmV4dDpcImxlZ2VuZFwifSk7dHJ5e0guYXBwbHkodD1PLmNhbGwobS5jaGlsZE5vZGVzKSxtLmNoaWxkTm9kZXMpLHRbbS5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZSl7SD17YXBwbHk6dC5sZW5ndGg/ZnVuY3Rpb24oZSx0KXtMLmFwcGx5KGUsTy5jYWxsKHQpKX06ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmxlbmd0aCxyPTA7d2hpbGUoZVtuKytdPXRbcisrXSk7ZS5sZW5ndGg9bi0xfX19ZnVuY3Rpb24gc2UodCxlLG4scil7dmFyIGksbyxhLHMsdSxsLGMsZj1lJiZlLm93bmVyRG9jdW1lbnQscD1lP2Uubm9kZVR5cGU6OTtpZihuPW58fFtdLFwic3RyaW5nXCIhPXR5cGVvZiB0fHwhdHx8MSE9PXAmJjkhPT1wJiYxMSE9PXApcmV0dXJuIG47aWYoIXImJigoZT9lLm93bmVyRG9jdW1lbnR8fGU6bSkhPT1DJiZUKGUpLGU9ZXx8QyxFKSl7aWYoMTEhPT1wJiYodT1aLmV4ZWModCkpKWlmKGk9dVsxXSl7aWYoOT09PXApe2lmKCEoYT1lLmdldEVsZW1lbnRCeUlkKGkpKSlyZXR1cm4gbjtpZihhLmlkPT09aSlyZXR1cm4gbi5wdXNoKGEpLG59ZWxzZSBpZihmJiYoYT1mLmdldEVsZW1lbnRCeUlkKGkpKSYmeShlLGEpJiZhLmlkPT09aSlyZXR1cm4gbi5wdXNoKGEpLG59ZWxzZXtpZih1WzJdKXJldHVybiBILmFwcGx5KG4sZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0KSksbjtpZigoaT11WzNdKSYmZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkobixlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaSkpLG59aWYoZC5xc2EmJiFBW3QrXCIgXCJdJiYoIXZ8fCF2LnRlc3QodCkpJiYoMSE9PXB8fFwib2JqZWN0XCIhPT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpKXtpZihjPXQsZj1lLDE9PT1wJiZVLnRlc3QodCkpeyhzPWUuZ2V0QXR0cmlidXRlKFwiaWRcIikpP3M9cy5yZXBsYWNlKHJlLGllKTplLnNldEF0dHJpYnV0ZShcImlkXCIscz1rKSxvPShsPWgodCkpLmxlbmd0aDt3aGlsZShvLS0pbFtvXT1cIiNcIitzK1wiIFwiK3hlKGxbb10pO2M9bC5qb2luKFwiLFwiKSxmPWVlLnRlc3QodCkmJnllKGUucGFyZW50Tm9kZSl8fGV9dHJ5e3JldHVybiBILmFwcGx5KG4sZi5xdWVyeVNlbGVjdG9yQWxsKGMpKSxufWNhdGNoKGUpe0EodCwhMCl9ZmluYWxseXtzPT09ayYmZS5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKX19fXJldHVybiBnKHQucmVwbGFjZShCLFwiJDFcIiksZSxuLHIpfWZ1bmN0aW9uIHVlKCl7dmFyIHI9W107cmV0dXJuIGZ1bmN0aW9uIGUodCxuKXtyZXR1cm4gci5wdXNoKHQrXCIgXCIpPmIuY2FjaGVMZW5ndGgmJmRlbGV0ZSBlW3Iuc2hpZnQoKV0sZVt0K1wiIFwiXT1ufX1mdW5jdGlvbiBsZShlKXtyZXR1cm4gZVtrXT0hMCxlfWZ1bmN0aW9uIGNlKGUpe3ZhciB0PUMuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpO3RyeXtyZXR1cm4hIWUodCl9Y2F0Y2goZSl7cmV0dXJuITF9ZmluYWxseXt0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSx0PW51bGx9fWZ1bmN0aW9uIGZlKGUsdCl7dmFyIG49ZS5zcGxpdChcInxcIikscj1uLmxlbmd0aDt3aGlsZShyLS0pYi5hdHRySGFuZGxlW25bcl1dPXR9ZnVuY3Rpb24gcGUoZSx0KXt2YXIgbj10JiZlLHI9biYmMT09PWUubm9kZVR5cGUmJjE9PT10Lm5vZGVUeXBlJiZlLnNvdXJjZUluZGV4LXQuc291cmNlSW5kZXg7aWYocilyZXR1cm4gcjtpZihuKXdoaWxlKG49bi5uZXh0U2libGluZylpZihuPT09dClyZXR1cm4tMTtyZXR1cm4gZT8xOi0xfWZ1bmN0aW9uIGRlKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm5cImlucHV0XCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJmUudHlwZT09PXR9fWZ1bmN0aW9uIGhlKG4pe3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKFwiaW5wdXRcIj09PXR8fFwiYnV0dG9uXCI9PT10KSYmZS50eXBlPT09bn19ZnVuY3Rpb24gZ2UodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVyblwiZm9ybVwiaW4gZT9lLnBhcmVudE5vZGUmJiExPT09ZS5kaXNhYmxlZD9cImxhYmVsXCJpbiBlP1wibGFiZWxcImluIGUucGFyZW50Tm9kZT9lLnBhcmVudE5vZGUuZGlzYWJsZWQ9PT10OmUuZGlzYWJsZWQ9PT10OmUuaXNEaXNhYmxlZD09PXR8fGUuaXNEaXNhYmxlZCE9PSF0JiZhZShlKT09PXQ6ZS5kaXNhYmxlZD09PXQ6XCJsYWJlbFwiaW4gZSYmZS5kaXNhYmxlZD09PXR9fWZ1bmN0aW9uIHZlKGEpe3JldHVybiBsZShmdW5jdGlvbihvKXtyZXR1cm4gbz0rbyxsZShmdW5jdGlvbihlLHQpe3ZhciBuLHI9YShbXSxlLmxlbmd0aCxvKSxpPXIubGVuZ3RoO3doaWxlKGktLSllW249cltpXV0mJihlW25dPSEodFtuXT1lW25dKSl9KX0pfWZ1bmN0aW9uIHllKGUpe3JldHVybiBlJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZS5nZXRFbGVtZW50c0J5VGFnTmFtZSYmZX1mb3IoZSBpbiBkPXNlLnN1cHBvcnQ9e30saT1zZS5pc1hNTD1mdW5jdGlvbihlKXt2YXIgdD1lLm5hbWVzcGFjZVVSSSxuPShlLm93bmVyRG9jdW1lbnR8fGUpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4hWS50ZXN0KHR8fG4mJm4ubm9kZU5hbWV8fFwiSFRNTFwiKX0sVD1zZS5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt2YXIgdCxuLHI9ZT9lLm93bmVyRG9jdW1lbnR8fGU6bTtyZXR1cm4gciE9PUMmJjk9PT1yLm5vZGVUeXBlJiZyLmRvY3VtZW50RWxlbWVudCYmKGE9KEM9cikuZG9jdW1lbnRFbGVtZW50LEU9IWkoQyksbSE9PUMmJihuPUMuZGVmYXVsdFZpZXcpJiZuLnRvcCE9PW4mJihuLmFkZEV2ZW50TGlzdGVuZXI/bi5hZGRFdmVudExpc3RlbmVyKFwidW5sb2FkXCIsb2UsITEpOm4uYXR0YWNoRXZlbnQmJm4uYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLG9lKSksZC5hdHRyaWJ1dGVzPWNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNsYXNzTmFtZT1cImlcIiwhZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIil9KSxkLmdldEVsZW1lbnRzQnlUYWdOYW1lPWNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKEMuY3JlYXRlQ29tbWVudChcIlwiKSksIWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aH0pLGQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT1LLnRlc3QoQy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSxkLmdldEJ5SWQ9Y2UoZnVuY3Rpb24oZSl7cmV0dXJuIGEuYXBwZW5kQ2hpbGQoZSkuaWQ9aywhQy5nZXRFbGVtZW50c0J5TmFtZXx8IUMuZ2V0RWxlbWVudHNCeU5hbWUoaykubGVuZ3RofSksZC5nZXRCeUlkPyhiLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UodGUsbmUpO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUoXCJpZFwiKT09PXR9fSxiLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgdC5nZXRFbGVtZW50QnlJZCYmRSl7dmFyIG49dC5nZXRFbGVtZW50QnlJZChlKTtyZXR1cm4gbj9bbl06W119fSk6KGIuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciBuPWUucmVwbGFjZSh0ZSxuZSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBlLmdldEF0dHJpYnV0ZU5vZGUmJmUuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO3JldHVybiB0JiZ0LnZhbHVlPT09bn19LGIuZmluZC5JRD1mdW5jdGlvbihlLHQpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0LmdldEVsZW1lbnRCeUlkJiZFKXt2YXIgbixyLGksbz10LmdldEVsZW1lbnRCeUlkKGUpO2lmKG8pe2lmKChuPW8uZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpKSYmbi52YWx1ZT09PWUpcmV0dXJuW29dO2k9dC5nZXRFbGVtZW50c0J5TmFtZShlKSxyPTA7d2hpbGUobz1pW3IrK10paWYoKG49by5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIikpJiZuLnZhbHVlPT09ZSlyZXR1cm5bb119cmV0dXJuW119fSksYi5maW5kLlRBRz1kLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGUsdCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQuZ2V0RWxlbWVudHNCeVRhZ05hbWU/dC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKTpkLnFzYT90LnF1ZXJ5U2VsZWN0b3JBbGwoZSk6dm9pZCAwfTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT0wLG89dC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKTtpZihcIipcIj09PWUpe3doaWxlKG49b1tpKytdKTE9PT1uLm5vZGVUeXBlJiZyLnB1c2gobik7cmV0dXJuIHJ9cmV0dXJuIG99LGIuZmluZC5DTEFTUz1kLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGUsdCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmRSlyZXR1cm4gdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpfSxzPVtdLHY9W10sKGQucXNhPUsudGVzdChDLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGNlKGZ1bmN0aW9uKGUpe2EuYXBwZW5kQ2hpbGQoZSkuaW5uZXJIVE1MPVwiPGEgaWQ9J1wiK2srXCInPjwvYT48c2VsZWN0IGlkPSdcIitrK1wiLVxcclxcXFwnIG1zYWxsb3djYXB0dXJlPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCIsZS5xdWVyeVNlbGVjdG9yQWxsKFwiW21zYWxsb3djYXB0dXJlXj0nJ11cIikubGVuZ3RoJiZ2LnB1c2goXCJbKl4kXT1cIitNK1wiKig/OicnfFxcXCJcXFwiKVwiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aHx8di5wdXNoKFwiXFxcXFtcIitNK1wiKig/OnZhbHVlfFwiK1IrXCIpXCIpLGUucXVlcnlTZWxlY3RvckFsbChcIltpZH49XCIraytcIi1dXCIpLmxlbmd0aHx8di5wdXNoKFwifj1cIiksZS5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RofHx2LnB1c2goXCI6Y2hlY2tlZFwiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJhI1wiK2srXCIrKlwiKS5sZW5ndGh8fHYucHVzaChcIi4jLitbK35dXCIpfSksY2UoZnVuY3Rpb24oZSl7ZS5pbm5lckhUTUw9XCI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD5cIjt2YXIgdD1DLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTt0LnNldEF0dHJpYnV0ZShcInR5cGVcIixcImhpZGRlblwiKSxlLmFwcGVuZENoaWxkKHQpLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcIkRcIiksZS5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoJiZ2LnB1c2goXCJuYW1lXCIrTStcIipbKl4kfCF+XT89XCIpLDIhPT1lLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZW5hYmxlZFwiKS5sZW5ndGgmJnYucHVzaChcIjplbmFibGVkXCIsXCI6ZGlzYWJsZWRcIiksYS5hcHBlbmRDaGlsZChlKS5kaXNhYmxlZD0hMCwyIT09ZS5xdWVyeVNlbGVjdG9yQWxsKFwiOmRpc2FibGVkXCIpLmxlbmd0aCYmdi5wdXNoKFwiOmVuYWJsZWRcIixcIjpkaXNhYmxlZFwiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpLHYucHVzaChcIiwuKjpcIil9KSksKGQubWF0Y2hlc1NlbGVjdG9yPUsudGVzdChjPWEubWF0Y2hlc3x8YS53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fGEubW96TWF0Y2hlc1NlbGVjdG9yfHxhLm9NYXRjaGVzU2VsZWN0b3J8fGEubXNNYXRjaGVzU2VsZWN0b3IpKSYmY2UoZnVuY3Rpb24oZSl7ZC5kaXNjb25uZWN0ZWRNYXRjaD1jLmNhbGwoZSxcIipcIiksYy5jYWxsKGUsXCJbcyE9JyddOnhcIikscy5wdXNoKFwiIT1cIiwkKX0pLHY9di5sZW5ndGgmJm5ldyBSZWdFeHAodi5qb2luKFwifFwiKSkscz1zLmxlbmd0aCYmbmV3IFJlZ0V4cChzLmpvaW4oXCJ8XCIpKSx0PUsudGVzdChhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSx5PXR8fEsudGVzdChhLmNvbnRhaW5zKT9mdW5jdGlvbihlLHQpe3ZhciBuPTk9PT1lLm5vZGVUeXBlP2UuZG9jdW1lbnRFbGVtZW50OmUscj10JiZ0LnBhcmVudE5vZGU7cmV0dXJuIGU9PT1yfHwhKCFyfHwxIT09ci5ub2RlVHlwZXx8IShuLmNvbnRhaW5zP24uY29udGFpbnMocik6ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKSkpfTpmdW5jdGlvbihlLHQpe2lmKHQpd2hpbGUodD10LnBhcmVudE5vZGUpaWYodD09PWUpcmV0dXJuITA7cmV0dXJuITF9LEQ9dD9mdW5jdGlvbihlLHQpe2lmKGU9PT10KXJldHVybiBsPSEwLDA7dmFyIG49IWUuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIXQuY29tcGFyZURvY3VtZW50UG9zaXRpb247cmV0dXJuIG58fCgxJihuPShlLm93bmVyRG9jdW1lbnR8fGUpPT09KHQub3duZXJEb2N1bWVudHx8dCk/ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KToxKXx8IWQuc29ydERldGFjaGVkJiZ0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGUpPT09bj9lPT09Q3x8ZS5vd25lckRvY3VtZW50PT09bSYmeShtLGUpPy0xOnQ9PT1DfHx0Lm93bmVyRG9jdW1lbnQ9PT1tJiZ5KG0sdCk/MTp1P1AodSxlKS1QKHUsdCk6MDo0Jm4/LTE6MSl9OmZ1bmN0aW9uKGUsdCl7aWYoZT09PXQpcmV0dXJuIGw9ITAsMDt2YXIgbixyPTAsaT1lLnBhcmVudE5vZGUsbz10LnBhcmVudE5vZGUsYT1bZV0scz1bdF07aWYoIWl8fCFvKXJldHVybiBlPT09Qz8tMTp0PT09Qz8xOmk/LTE6bz8xOnU/UCh1LGUpLVAodSx0KTowO2lmKGk9PT1vKXJldHVybiBwZShlLHQpO249ZTt3aGlsZShuPW4ucGFyZW50Tm9kZSlhLnVuc2hpZnQobik7bj10O3doaWxlKG49bi5wYXJlbnROb2RlKXMudW5zaGlmdChuKTt3aGlsZShhW3JdPT09c1tyXSlyKys7cmV0dXJuIHI/cGUoYVtyXSxzW3JdKTphW3JdPT09bT8tMTpzW3JdPT09bT8xOjB9KSxDfSxzZS5tYXRjaGVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHNlKGUsbnVsbCxudWxsLHQpfSxzZS5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oZSx0KXtpZigoZS5vd25lckRvY3VtZW50fHxlKSE9PUMmJlQoZSksZC5tYXRjaGVzU2VsZWN0b3ImJkUmJiFBW3QrXCIgXCJdJiYoIXN8fCFzLnRlc3QodCkpJiYoIXZ8fCF2LnRlc3QodCkpKXRyeXt2YXIgbj1jLmNhbGwoZSx0KTtpZihufHxkLmRpc2Nvbm5lY3RlZE1hdGNofHxlLmRvY3VtZW50JiYxMSE9PWUuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIG59Y2F0Y2goZSl7QSh0LCEwKX1yZXR1cm4gMDxzZSh0LEMsbnVsbCxbZV0pLmxlbmd0aH0sc2UuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PUMmJlQoZSkseShlLHQpfSxzZS5hdHRyPWZ1bmN0aW9uKGUsdCl7KGUub3duZXJEb2N1bWVudHx8ZSkhPT1DJiZUKGUpO3ZhciBuPWIuYXR0ckhhbmRsZVt0LnRvTG93ZXJDYXNlKCldLHI9biYmai5jYWxsKGIuYXR0ckhhbmRsZSx0LnRvTG93ZXJDYXNlKCkpP24oZSx0LCFFKTp2b2lkIDA7cmV0dXJuIHZvaWQgMCE9PXI/cjpkLmF0dHJpYnV0ZXN8fCFFP2UuZ2V0QXR0cmlidXRlKHQpOihyPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSkmJnIuc3BlY2lmaWVkP3IudmFsdWU6bnVsbH0sc2UuZXNjYXBlPWZ1bmN0aW9uKGUpe3JldHVybihlK1wiXCIpLnJlcGxhY2UocmUsaWUpfSxzZS5lcnJvcj1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIitlKX0sc2UudW5pcXVlU29ydD1mdW5jdGlvbihlKXt2YXIgdCxuPVtdLHI9MCxpPTA7aWYobD0hZC5kZXRlY3REdXBsaWNhdGVzLHU9IWQuc29ydFN0YWJsZSYmZS5zbGljZSgwKSxlLnNvcnQoRCksbCl7d2hpbGUodD1lW2krK10pdD09PWVbaV0mJihyPW4ucHVzaChpKSk7d2hpbGUoci0tKWUuc3BsaWNlKG5bcl0sMSl9cmV0dXJuIHU9bnVsbCxlfSxvPXNlLmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj1cIlwiLHI9MCxpPWUubm9kZVR5cGU7aWYoaSl7aWYoMT09PWl8fDk9PT1pfHwxMT09PWkpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlLnRleHRDb250ZW50KXJldHVybiBlLnRleHRDb250ZW50O2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyluKz1vKGUpfWVsc2UgaWYoMz09PWl8fDQ9PT1pKXJldHVybiBlLm5vZGVWYWx1ZX1lbHNlIHdoaWxlKHQ9ZVtyKytdKW4rPW8odCk7cmV0dXJuIG59LChiPXNlLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmxlLG1hdGNoOkcsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOntcIj5cIjp7ZGlyOlwicGFyZW50Tm9kZVwiLGZpcnN0OiEwfSxcIiBcIjp7ZGlyOlwicGFyZW50Tm9kZVwifSxcIitcIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCIsZmlyc3Q6ITB9LFwiflwiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnJlcGxhY2UodGUsbmUpLGVbM109KGVbM118fGVbNF18fGVbNV18fFwiXCIpLnJlcGxhY2UodGUsbmUpLFwifj1cIj09PWVbMl0mJihlWzNdPVwiIFwiK2VbM10rXCIgXCIpLGUuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS50b0xvd2VyQ2FzZSgpLFwibnRoXCI9PT1lWzFdLnNsaWNlKDAsMyk/KGVbM118fHNlLmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKFwiZXZlblwiPT09ZVszXXx8XCJvZGRcIj09PWVbM10pKSxlWzVdPSsoZVs3XStlWzhdfHxcIm9kZFwiPT09ZVszXSkpOmVbM10mJnNlLmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzZdJiZlWzJdO3JldHVybiBHLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVszXT9lWzJdPWVbNF18fGVbNV18fFwiXCI6biYmWC50ZXN0KG4pJiYodD1oKG4sITApKSYmKHQ9bi5pbmRleE9mKFwiKVwiLG4ubGVuZ3RoLXQpLW4ubGVuZ3RoKSYmKGVbMF09ZVswXS5zbGljZSgwLHQpLGVbMl09bi5zbGljZSgwLHQpKSxlLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKHRlLG5lKS50b0xvd2VyQ2FzZSgpO3JldHVyblwiKlwiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PXBbZStcIiBcIl07cmV0dXJuIHR8fCh0PW5ldyBSZWdFeHAoXCIoXnxcIitNK1wiKVwiK2UrXCIoXCIrTStcInwkKVwiKSkmJnAoZSxmdW5jdGlvbihlKXtyZXR1cm4gdC50ZXN0KFwic3RyaW5nXCI9PXR5cGVvZiBlLmNsYXNzTmFtZSYmZS5jbGFzc05hbWV8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBlLmdldEF0dHJpYnV0ZSYmZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIil9KX0sQVRUUjpmdW5jdGlvbihuLHIsaSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXNlLmF0dHIoZSxuKTtyZXR1cm4gbnVsbD09dD9cIiE9XCI9PT1yOiFyfHwodCs9XCJcIixcIj1cIj09PXI/dD09PWk6XCIhPVwiPT09cj90IT09aTpcIl49XCI9PT1yP2kmJjA9PT10LmluZGV4T2YoaSk6XCIqPVwiPT09cj9pJiYtMTx0LmluZGV4T2YoaSk6XCIkPVwiPT09cj9pJiZ0LnNsaWNlKC1pLmxlbmd0aCk9PT1pOlwifj1cIj09PXI/LTE8KFwiIFwiK3QucmVwbGFjZShGLFwiIFwiKStcIiBcIikuaW5kZXhPZihpKTpcInw9XCI9PT1yJiYodD09PWl8fHQuc2xpY2UoMCxpLmxlbmd0aCsxKT09PWkrXCItXCIpKX19LENISUxEOmZ1bmN0aW9uKGgsZSx0LGcsdil7dmFyIHk9XCJudGhcIiE9PWguc2xpY2UoMCwzKSxtPVwibGFzdFwiIT09aC5zbGljZSgtNCkseD1cIm9mLXR5cGVcIj09PWU7cmV0dXJuIDE9PT1nJiYwPT09dj9mdW5jdGlvbihlKXtyZXR1cm4hIWUucGFyZW50Tm9kZX06ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsPXkhPT1tP1wibmV4dFNpYmxpbmdcIjpcInByZXZpb3VzU2libGluZ1wiLGM9ZS5wYXJlbnROb2RlLGY9eCYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHA9IW4mJiF4LGQ9ITE7aWYoYyl7aWYoeSl7d2hpbGUobCl7YT1lO3doaWxlKGE9YVtsXSlpZih4P2Eubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWY6MT09PWEubm9kZVR5cGUpcmV0dXJuITE7dT1sPVwib25seVwiPT09aCYmIXUmJlwibmV4dFNpYmxpbmdcIn1yZXR1cm4hMH1pZih1PVttP2MuZmlyc3RDaGlsZDpjLmxhc3RDaGlsZF0sbSYmcCl7ZD0ocz0ocj0oaT0obz0oYT1jKVtrXXx8KGFba109e30pKVthLnVuaXF1ZUlEXXx8KG9bYS51bmlxdWVJRF09e30pKVtoXXx8W10pWzBdPT09UyYmclsxXSkmJnJbMl0sYT1zJiZjLmNoaWxkTm9kZXNbc107d2hpbGUoYT0rK3MmJmEmJmFbbF18fChkPXM9MCl8fHUucG9wKCkpaWYoMT09PWEubm9kZVR5cGUmJisrZCYmYT09PWUpe2lbaF09W1MscyxkXTticmVha319ZWxzZSBpZihwJiYoZD1zPShyPShpPShvPShhPWUpW2tdfHwoYVtrXT17fSkpW2EudW5pcXVlSURdfHwob1thLnVuaXF1ZUlEXT17fSkpW2hdfHxbXSlbMF09PT1TJiZyWzFdKSwhMT09PWQpd2hpbGUoYT0rK3MmJmEmJmFbbF18fChkPXM9MCl8fHUucG9wKCkpaWYoKHg/YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ZjoxPT09YS5ub2RlVHlwZSkmJisrZCYmKHAmJigoaT0obz1hW2tdfHwoYVtrXT17fSkpW2EudW5pcXVlSURdfHwob1thLnVuaXF1ZUlEXT17fSkpW2hdPVtTLGRdKSxhPT09ZSkpYnJlYWs7cmV0dXJuKGQtPXYpPT09Z3x8ZCVnPT0wJiYwPD1kL2d9fX0sUFNFVURPOmZ1bmN0aW9uKGUsbyl7dmFyIHQsYT1iLnBzZXVkb3NbZV18fGIuc2V0RmlsdGVyc1tlLnRvTG93ZXJDYXNlKCldfHxzZS5lcnJvcihcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIrZSk7cmV0dXJuIGFba10/YShvKToxPGEubGVuZ3RoPyh0PVtlLGUsXCJcIixvXSxiLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKT9sZShmdW5jdGlvbihlLHQpe3ZhciBuLHI9YShlLG8pLGk9ci5sZW5ndGg7d2hpbGUoaS0tKWVbbj1QKGUscltpXSldPSEodFtuXT1yW2ldKX0pOmZ1bmN0aW9uKGUpe3JldHVybiBhKGUsMCx0KX0pOmF9fSxwc2V1ZG9zOntub3Q6bGUoZnVuY3Rpb24oZSl7dmFyIHI9W10saT1bXSxzPWYoZS5yZXBsYWNlKEIsXCIkMVwiKSk7cmV0dXJuIHNba10/bGUoZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbz1zKGUsbnVsbCxyLFtdKSxhPWUubGVuZ3RoO3doaWxlKGEtLSkoaT1vW2FdKSYmKGVbYV09ISh0W2FdPWkpKX0pOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gclswXT1lLHMocixudWxsLG4saSksclswXT1udWxsLCFpLnBvcCgpfX0pLGhhczpsZShmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIDA8c2UodCxlKS5sZW5ndGh9fSksY29udGFpbnM6bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQ9dC5yZXBsYWNlKHRlLG5lKSxmdW5jdGlvbihlKXtyZXR1cm4tMTwoZS50ZXh0Q29udGVudHx8byhlKSkuaW5kZXhPZih0KX19KSxsYW5nOmxlKGZ1bmN0aW9uKG4pe3JldHVybiBWLnRlc3Qobnx8XCJcIil8fHNlLmVycm9yKFwidW5zdXBwb3J0ZWQgbGFuZzogXCIrbiksbj1uLnJlcGxhY2UodGUsbmUpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oZSl7dmFyIHQ7ZG97aWYodD1FP2UubGFuZzplLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpfHxlLmdldEF0dHJpYnV0ZShcImxhbmdcIikpcmV0dXJuKHQ9dC50b0xvd2VyQ2FzZSgpKT09PW58fDA9PT10LmluZGV4T2YobitcIi1cIil9d2hpbGUoKGU9ZS5wYXJlbnROb2RlKSYmMT09PWUubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihlKXt2YXIgdD1uLmxvY2F0aW9uJiZuLmxvY2F0aW9uLmhhc2g7cmV0dXJuIHQmJnQuc2xpY2UoMSk9PT1lLmlkfSxyb290OmZ1bmN0aW9uKGUpe3JldHVybiBlPT09YX0sZm9jdXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1DLmFjdGl2ZUVsZW1lbnQmJighQy5oYXNGb2N1c3x8Qy5oYXNGb2N1cygpKSYmISEoZS50eXBlfHxlLmhyZWZ8fH5lLnRhYkluZGV4KX0sZW5hYmxlZDpnZSghMSksZGlzYWJsZWQ6Z2UoITApLGNoZWNrZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PXQmJiEhZS5jaGVja2VkfHxcIm9wdGlvblwiPT09dCYmISFlLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCwhMD09PWUuc2VsZWN0ZWR9LGVtcHR5OmZ1bmN0aW9uKGUpe2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylpZihlLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4hYi5wc2V1ZG9zLmVtcHR5KGUpfSxoZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIEoudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFEudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT10JiZcImJ1dHRvblwiPT09ZS50eXBlfHxcImJ1dHRvblwiPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm5cImlucHV0XCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJlwidGV4dFwiPT09ZS50eXBlJiYobnVsbD09KHQ9ZS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKXx8XCJ0ZXh0XCI9PT10LnRvTG93ZXJDYXNlKCkpfSxmaXJzdDp2ZShmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6dmUoZnVuY3Rpb24oZSx0KXtyZXR1cm5bdC0xXX0pLGVxOnZlKGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm5bbjwwP24rdDpuXX0pLGV2ZW46dmUoZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MDtuPHQ7bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxvZGQ6dmUoZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MTtuPHQ7bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxsdDp2ZShmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPW48MD9uK3Q6dDxuP3Q6bjswPD0tLXI7KWUucHVzaChyKTtyZXR1cm4gZX0pLGd0OnZlKGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9bjwwP24rdDpuOysrcjx0OyllLnB1c2gocik7cmV0dXJuIGV9KX19KS5wc2V1ZG9zLm50aD1iLnBzZXVkb3MuZXEse3JhZGlvOiEwLGNoZWNrYm94OiEwLGZpbGU6ITAscGFzc3dvcmQ6ITAsaW1hZ2U6ITB9KWIucHNldWRvc1tlXT1kZShlKTtmb3IoZSBpbntzdWJtaXQ6ITAscmVzZXQ6ITB9KWIucHNldWRvc1tlXT1oZShlKTtmdW5jdGlvbiBtZSgpe31mdW5jdGlvbiB4ZShlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoLHI9XCJcIjt0PG47dCsrKXIrPWVbdF0udmFsdWU7cmV0dXJuIHJ9ZnVuY3Rpb24gYmUocyxlLHQpe3ZhciB1PWUuZGlyLGw9ZS5uZXh0LGM9bHx8dSxmPXQmJlwicGFyZW50Tm9kZVwiPT09YyxwPXIrKztyZXR1cm4gZS5maXJzdD9mdW5jdGlvbihlLHQsbil7d2hpbGUoZT1lW3VdKWlmKDE9PT1lLm5vZGVUeXBlfHxmKXJldHVybiBzKGUsdCxuKTtyZXR1cm4hMX06ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhPVtTLHBdO2lmKG4pe3doaWxlKGU9ZVt1XSlpZigoMT09PWUubm9kZVR5cGV8fGYpJiZzKGUsdCxuKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGU9ZVt1XSlpZigxPT09ZS5ub2RlVHlwZXx8ZilpZihpPShvPWVba118fChlW2tdPXt9KSlbZS51bmlxdWVJRF18fChvW2UudW5pcXVlSURdPXt9KSxsJiZsPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKWU9ZVt1XXx8ZTtlbHNle2lmKChyPWlbY10pJiZyWzBdPT09UyYmclsxXT09PXApcmV0dXJuIGFbMl09clsyXTtpZigoaVtjXT1hKVsyXT1zKGUsdCxuKSlyZXR1cm4hMH1yZXR1cm4hMX19ZnVuY3Rpb24gd2UoaSl7cmV0dXJuIDE8aS5sZW5ndGg/ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWkubGVuZ3RoO3doaWxlKHItLSlpZighaVtyXShlLHQsbikpcmV0dXJuITE7cmV0dXJuITB9OmlbMF19ZnVuY3Rpb24gVGUoZSx0LG4scixpKXtmb3IodmFyIG8sYT1bXSxzPTAsdT1lLmxlbmd0aCxsPW51bGwhPXQ7czx1O3MrKykobz1lW3NdKSYmKG4mJiFuKG8scixpKXx8KGEucHVzaChvKSxsJiZ0LnB1c2gocykpKTtyZXR1cm4gYX1mdW5jdGlvbiBDZShkLGgsZyx2LHksZSl7cmV0dXJuIHYmJiF2W2tdJiYodj1DZSh2KSkseSYmIXlba10mJih5PUNlKHksZSkpLGxlKGZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzPVtdLHU9W10sbD10Lmxlbmd0aCxjPWV8fGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPXQubGVuZ3RoO3I8aTtyKyspc2UoZSx0W3JdLG4pO3JldHVybiBufShofHxcIipcIixuLm5vZGVUeXBlP1tuXTpuLFtdKSxmPSFkfHwhZSYmaD9jOlRlKGMscyxkLG4scikscD1nP3l8fChlP2Q6bHx8dik/W106dDpmO2lmKGcmJmcoZixwLG4sciksdil7aT1UZShwLHUpLHYoaSxbXSxuLHIpLG89aS5sZW5ndGg7d2hpbGUoby0tKShhPWlbb10pJiYocFt1W29dXT0hKGZbdVtvXV09YSkpfWlmKGUpe2lmKHl8fGQpe2lmKHkpe2k9W10sbz1wLmxlbmd0aDt3aGlsZShvLS0pKGE9cFtvXSkmJmkucHVzaChmW29dPWEpO3kobnVsbCxwPVtdLGkscil9bz1wLmxlbmd0aDt3aGlsZShvLS0pKGE9cFtvXSkmJi0xPChpPXk/UChlLGEpOnNbb10pJiYoZVtpXT0hKHRbaV09YSkpfX1lbHNlIHA9VGUocD09PXQ/cC5zcGxpY2UobCxwLmxlbmd0aCk6cCkseT95KG51bGwsdCxwLHIpOkguYXBwbHkodCxwKX0pfWZ1bmN0aW9uIEVlKGUpe2Zvcih2YXIgaSx0LG4scj1lLmxlbmd0aCxvPWIucmVsYXRpdmVbZVswXS50eXBlXSxhPW98fGIucmVsYXRpdmVbXCIgXCJdLHM9bz8xOjAsdT1iZShmdW5jdGlvbihlKXtyZXR1cm4gZT09PWl9LGEsITApLGw9YmUoZnVuY3Rpb24oZSl7cmV0dXJuLTE8UChpLGUpfSxhLCEwKSxjPVtmdW5jdGlvbihlLHQsbil7dmFyIHI9IW8mJihufHx0IT09dyl8fCgoaT10KS5ub2RlVHlwZT91KGUsdCxuKTpsKGUsdCxuKSk7cmV0dXJuIGk9bnVsbCxyfV07czxyO3MrKylpZih0PWIucmVsYXRpdmVbZVtzXS50eXBlXSljPVtiZSh3ZShjKSx0KV07ZWxzZXtpZigodD1iLmZpbHRlcltlW3NdLnR5cGVdLmFwcGx5KG51bGwsZVtzXS5tYXRjaGVzKSlba10pe2ZvcihuPSsrcztuPHI7bisrKWlmKGIucmVsYXRpdmVbZVtuXS50eXBlXSlicmVhaztyZXR1cm4gQ2UoMTxzJiZ3ZShjKSwxPHMmJnhlKGUuc2xpY2UoMCxzLTEpLmNvbmNhdCh7dmFsdWU6XCIgXCI9PT1lW3MtMl0udHlwZT9cIipcIjpcIlwifSkpLnJlcGxhY2UoQixcIiQxXCIpLHQsczxuJiZFZShlLnNsaWNlKHMsbikpLG48ciYmRWUoZT1lLnNsaWNlKG4pKSxuPHImJnhlKGUpKX1jLnB1c2godCl9cmV0dXJuIHdlKGMpfXJldHVybiBtZS5wcm90b3R5cGU9Yi5maWx0ZXJzPWIucHNldWRvcyxiLnNldEZpbHRlcnM9bmV3IG1lLGg9c2UudG9rZW5pemU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhLHMsdSxsPXhbZStcIiBcIl07aWYobClyZXR1cm4gdD8wOmwuc2xpY2UoMCk7YT1lLHM9W10sdT1iLnByZUZpbHRlcjt3aGlsZShhKXtmb3IobyBpbiBuJiYhKHI9Xy5leGVjKGEpKXx8KHImJihhPWEuc2xpY2UoclswXS5sZW5ndGgpfHxhKSxzLnB1c2goaT1bXSkpLG49ITEsKHI9ei5leGVjKGEpKSYmKG49ci5zaGlmdCgpLGkucHVzaCh7dmFsdWU6bix0eXBlOnJbMF0ucmVwbGFjZShCLFwiIFwiKX0pLGE9YS5zbGljZShuLmxlbmd0aCkpLGIuZmlsdGVyKSEocj1HW29dLmV4ZWMoYSkpfHx1W29dJiYhKHI9dVtvXShyKSl8fChuPXIuc2hpZnQoKSxpLnB1c2goe3ZhbHVlOm4sdHlwZTpvLG1hdGNoZXM6cn0pLGE9YS5zbGljZShuLmxlbmd0aCkpO2lmKCFuKWJyZWFrfXJldHVybiB0P2EubGVuZ3RoOmE/c2UuZXJyb3IoZSk6eChlLHMpLnNsaWNlKDApfSxmPXNlLmNvbXBpbGU9ZnVuY3Rpb24oZSx0KXt2YXIgbix2LHksbSx4LHIsaT1bXSxvPVtdLGE9TltlK1wiIFwiXTtpZighYSl7dHx8KHQ9aChlKSksbj10Lmxlbmd0aDt3aGlsZShuLS0pKGE9RWUodFtuXSkpW2tdP2kucHVzaChhKTpvLnB1c2goYSk7KGE9TihlLCh2PW8sbT0wPCh5PWkpLmxlbmd0aCx4PTA8di5sZW5ndGgscj1mdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvLGEscyx1PTAsbD1cIjBcIixjPWUmJltdLGY9W10scD13LGQ9ZXx8eCYmYi5maW5kLlRBRyhcIipcIixpKSxoPVMrPW51bGw9PXA/MTpNYXRoLnJhbmRvbSgpfHwuMSxnPWQubGVuZ3RoO2ZvcihpJiYodz10PT09Q3x8dHx8aSk7bCE9PWcmJm51bGwhPShvPWRbbF0pO2wrKyl7aWYoeCYmbyl7YT0wLHR8fG8ub3duZXJEb2N1bWVudD09PUN8fChUKG8pLG49IUUpO3doaWxlKHM9dlthKytdKWlmKHMobyx0fHxDLG4pKXtyLnB1c2gobyk7YnJlYWt9aSYmKFM9aCl9bSYmKChvPSFzJiZvKSYmdS0tLGUmJmMucHVzaChvKSl9aWYodSs9bCxtJiZsIT09dSl7YT0wO3doaWxlKHM9eVthKytdKXMoYyxmLHQsbik7aWYoZSl7aWYoMDx1KXdoaWxlKGwtLSljW2xdfHxmW2xdfHwoZltsXT1xLmNhbGwocikpO2Y9VGUoZil9SC5hcHBseShyLGYpLGkmJiFlJiYwPGYubGVuZ3RoJiYxPHUreS5sZW5ndGgmJnNlLnVuaXF1ZVNvcnQocil9cmV0dXJuIGkmJihTPWgsdz1wKSxjfSxtP2xlKHIpOnIpKSkuc2VsZWN0b3I9ZX1yZXR1cm4gYX0sZz1zZS5zZWxlY3Q9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHMsdSxsPVwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJmUsYz0hciYmaChlPWwuc2VsZWN0b3J8fGUpO2lmKG49bnx8W10sMT09PWMubGVuZ3RoKXtpZigyPChvPWNbMF09Y1swXS5zbGljZSgwKSkubGVuZ3RoJiZcIklEXCI9PT0oYT1vWzBdKS50eXBlJiY5PT09dC5ub2RlVHlwZSYmRSYmYi5yZWxhdGl2ZVtvWzFdLnR5cGVdKXtpZighKHQ9KGIuZmluZC5JRChhLm1hdGNoZXNbMF0ucmVwbGFjZSh0ZSxuZSksdCl8fFtdKVswXSkpcmV0dXJuIG47bCYmKHQ9dC5wYXJlbnROb2RlKSxlPWUuc2xpY2Uoby5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1HLm5lZWRzQ29udGV4dC50ZXN0KGUpPzA6by5sZW5ndGg7d2hpbGUoaS0tKXtpZihhPW9baV0sYi5yZWxhdGl2ZVtzPWEudHlwZV0pYnJlYWs7aWYoKHU9Yi5maW5kW3NdKSYmKHI9dShhLm1hdGNoZXNbMF0ucmVwbGFjZSh0ZSxuZSksZWUudGVzdChvWzBdLnR5cGUpJiZ5ZSh0LnBhcmVudE5vZGUpfHx0KSkpe2lmKG8uc3BsaWNlKGksMSksIShlPXIubGVuZ3RoJiZ4ZShvKSkpcmV0dXJuIEguYXBwbHkobixyKSxuO2JyZWFrfX19cmV0dXJuKGx8fGYoZSxjKSkocix0LCFFLG4sIXR8fGVlLnRlc3QoZSkmJnllKHQucGFyZW50Tm9kZSl8fHQpLG59LGQuc29ydFN0YWJsZT1rLnNwbGl0KFwiXCIpLnNvcnQoRCkuam9pbihcIlwiKT09PWssZC5kZXRlY3REdXBsaWNhdGVzPSEhbCxUKCksZC5zb3J0RGV0YWNoZWQ9Y2UoZnVuY3Rpb24oZSl7cmV0dXJuIDEmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihDLmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKSl9KSxjZShmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9XCI8YSBocmVmPScjJz48L2E+XCIsXCIjXCI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKX0pfHxmZShcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIixmdW5jdGlvbihlLHQsbil7aWYoIW4pcmV0dXJuIGUuZ2V0QXR0cmlidXRlKHQsXCJ0eXBlXCI9PT10LnRvTG93ZXJDYXNlKCk/MToyKX0pLGQuYXR0cmlidXRlcyYmY2UoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPVwiPGlucHV0Lz5cIixlLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIlwiKSxcIlwiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfSl8fGZlKFwidmFsdWVcIixmdW5jdGlvbihlLHQsbil7aWYoIW4mJlwiaW5wdXRcIj09PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSlyZXR1cm4gZS5kZWZhdWx0VmFsdWV9KSxjZShmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX0pfHxmZShSLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZighbilyZXR1cm4hMD09PWVbdF0/dC50b0xvd2VyQ2FzZSgpOihyPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSkmJnIuc3BlY2lmaWVkP3IudmFsdWU6bnVsbH0pLHNlfShDKTtrLmZpbmQ9aCxrLmV4cHI9aC5zZWxlY3RvcnMsay5leHByW1wiOlwiXT1rLmV4cHIucHNldWRvcyxrLnVuaXF1ZVNvcnQ9ay51bmlxdWU9aC51bmlxdWVTb3J0LGsudGV4dD1oLmdldFRleHQsay5pc1hNTERvYz1oLmlzWE1MLGsuY29udGFpbnM9aC5jb250YWlucyxrLmVzY2FwZVNlbGVjdG9yPWguZXNjYXBlO3ZhciBUPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1bXSxpPXZvaWQgMCE9PW47d2hpbGUoKGU9ZVt0XSkmJjkhPT1lLm5vZGVUeXBlKWlmKDE9PT1lLm5vZGVUeXBlKXtpZihpJiZrKGUpLmlzKG4pKWJyZWFrO3IucHVzaChlKX1yZXR1cm4gcn0sUz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1bXTtlO2U9ZS5uZXh0U2libGluZykxPT09ZS5ub2RlVHlwZSYmZSE9PXQmJm4ucHVzaChlKTtyZXR1cm4gbn0sTj1rLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O2Z1bmN0aW9uIEEoZSx0KXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dC50b0xvd2VyQ2FzZSgpfXZhciBEPS9ePChbYS16XVteXFwvXFwwPjpcXHgyMFxcdFxcclxcblxcZl0qKVtcXHgyMFxcdFxcclxcblxcZl0qXFwvPz4oPzo8XFwvXFwxPnwpJC9pO2Z1bmN0aW9uIGooZSxuLHIpe3JldHVybiBtKG4pP2suZ3JlcChlLGZ1bmN0aW9uKGUsdCl7cmV0dXJuISFuLmNhbGwoZSx0LGUpIT09cn0pOm4ubm9kZVR5cGU/ay5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1uIT09cn0pOlwic3RyaW5nXCIhPXR5cGVvZiBuP2suZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybi0xPGkuY2FsbChuLGUpIT09cn0pOmsuZmlsdGVyKG4sZSxyKX1rLmZpbHRlcj1mdW5jdGlvbihlLHQsbil7dmFyIHI9dFswXTtyZXR1cm4gbiYmKGU9XCI6bm90KFwiK2UrXCIpXCIpLDE9PT10Lmxlbmd0aCYmMT09PXIubm9kZVR5cGU/ay5maW5kLm1hdGNoZXNTZWxlY3RvcihyLGUpP1tyXTpbXTprLmZpbmQubWF0Y2hlcyhlLGsuZ3JlcCh0LGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZX0pKX0say5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPXRoaXMubGVuZ3RoLGk9dGhpcztpZihcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4gdGhpcy5wdXNoU3RhY2soayhlKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO3Q8cjt0KyspaWYoay5jb250YWlucyhpW3RdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihuPXRoaXMucHVzaFN0YWNrKFtdKSx0PTA7dDxyO3QrKylrLmZpbmQoZSxpW3RdLG4pO3JldHVybiAxPHI/ay51bmlxdWVTb3J0KG4pOm59LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaih0aGlzLGV8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaih0aGlzLGV8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGUpe3JldHVybiEhaih0aGlzLFwic3RyaW5nXCI9PXR5cGVvZiBlJiZOLnRlc3QoZSk/ayhlKTplfHxbXSwhMSkubGVuZ3RofX0pO3ZhciBxLEw9L14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKykpJC87KGsuZm4uaW5pdD1mdW5jdGlvbihlLHQsbil7dmFyIHIsaTtpZighZSlyZXR1cm4gdGhpcztpZihuPW58fHEsXCJzdHJpbmdcIj09dHlwZW9mIGUpe2lmKCEocj1cIjxcIj09PWVbMF0mJlwiPlwiPT09ZVtlLmxlbmd0aC0xXSYmMzw9ZS5sZW5ndGg/W251bGwsZSxudWxsXTpMLmV4ZWMoZSkpfHwhclsxXSYmdClyZXR1cm4hdHx8dC5qcXVlcnk/KHR8fG4pLmZpbmQoZSk6dGhpcy5jb25zdHJ1Y3Rvcih0KS5maW5kKGUpO2lmKHJbMV0pe2lmKHQ9dCBpbnN0YW5jZW9mIGs/dFswXTp0LGsubWVyZ2UodGhpcyxrLnBhcnNlSFRNTChyWzFdLHQmJnQubm9kZVR5cGU/dC5vd25lckRvY3VtZW50fHx0OkUsITApKSxELnRlc3QoclsxXSkmJmsuaXNQbGFpbk9iamVjdCh0KSlmb3IociBpbiB0KW0odGhpc1tyXSk/dGhpc1tyXSh0W3JdKTp0aGlzLmF0dHIocix0W3JdKTtyZXR1cm4gdGhpc31yZXR1cm4oaT1FLmdldEVsZW1lbnRCeUlkKHJbMl0pKSYmKHRoaXNbMF09aSx0aGlzLmxlbmd0aD0xKSx0aGlzfXJldHVybiBlLm5vZGVUeXBlPyh0aGlzWzBdPWUsdGhpcy5sZW5ndGg9MSx0aGlzKTptKGUpP3ZvaWQgMCE9PW4ucmVhZHk/bi5yZWFkeShlKTplKGspOmsubWFrZUFycmF5KGUsdGhpcyl9KS5wcm90b3R5cGU9ay5mbixxPWsoRSk7dmFyIEg9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sTz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTtmdW5jdGlvbiBQKGUsdCl7d2hpbGUoKGU9ZVt0XSkmJjEhPT1lLm5vZGVUeXBlKTtyZXR1cm4gZX1rLmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGUpe3ZhciB0PWsoZSx0aGlzKSxuPXQubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgZT0wO2U8bjtlKyspaWYoay5jb250YWlucyh0aGlzLHRbZV0pKXJldHVybiEwfSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTAsaT10aGlzLmxlbmd0aCxvPVtdLGE9XCJzdHJpbmdcIiE9dHlwZW9mIGUmJmsoZSk7aWYoIU4udGVzdChlKSlmb3IoO3I8aTtyKyspZm9yKG49dGhpc1tyXTtuJiZuIT09dDtuPW4ucGFyZW50Tm9kZSlpZihuLm5vZGVUeXBlPDExJiYoYT8tMTxhLmluZGV4KG4pOjE9PT1uLm5vZGVUeXBlJiZrLmZpbmQubWF0Y2hlc1NlbGVjdG9yKG4sZSkpKXtvLnB1c2gobik7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKDE8by5sZW5ndGg/ay51bmlxdWVTb3J0KG8pOm8pfSxpbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gZT9cInN0cmluZ1wiPT10eXBlb2YgZT9pLmNhbGwoayhlKSx0aGlzWzBdKTppLmNhbGwodGhpcyxlLmpxdWVyeT9lWzBdOmUpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGsudW5pcXVlU29ydChrLm1lcmdlKHRoaXMuZ2V0KCksayhlLHQpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFkZChudWxsPT1lP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGUpKX19KSxrLmVhY2goe3BhcmVudDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJjExIT09dC5ub2RlVHlwZT90Om51bGx9LHBhcmVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIFQoZSxcInBhcmVudE5vZGVcIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFQoZSxcInBhcmVudE5vZGVcIixuKX0sbmV4dDpmdW5jdGlvbihlKXtyZXR1cm4gUChlLFwibmV4dFNpYmxpbmdcIil9LHByZXY6ZnVuY3Rpb24oZSl7cmV0dXJuIFAoZSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dEFsbDpmdW5jdGlvbihlKXtyZXR1cm4gVChlLFwibmV4dFNpYmxpbmdcIil9LHByZXZBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIFQoZSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gVChlLFwibmV4dFNpYmxpbmdcIixuKX0scHJldlVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gVChlLFwicHJldmlvdXNTaWJsaW5nXCIsbil9LHNpYmxpbmdzOmZ1bmN0aW9uKGUpe3JldHVybiBTKChlLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGUpfSxjaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4gUyhlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgZS5jb250ZW50RG9jdW1lbnQ/ZS5jb250ZW50RG9jdW1lbnQ6KEEoZSxcInRlbXBsYXRlXCIpJiYoZT1lLmNvbnRlbnR8fGUpLGsubWVyZ2UoW10sZS5jaGlsZE5vZGVzKSl9fSxmdW5jdGlvbihyLGkpe2suZm5bcl09ZnVuY3Rpb24oZSx0KXt2YXIgbj1rLm1hcCh0aGlzLGksZSk7cmV0dXJuXCJVbnRpbFwiIT09ci5zbGljZSgtNSkmJih0PWUpLHQmJlwic3RyaW5nXCI9PXR5cGVvZiB0JiYobj1rLmZpbHRlcih0LG4pKSwxPHRoaXMubGVuZ3RoJiYoT1tyXXx8ay51bmlxdWVTb3J0KG4pLEgudGVzdChyKSYmbi5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKG4pfX0pO3ZhciBSPS9bXlxceDIwXFx0XFxyXFxuXFxmXSsvZztmdW5jdGlvbiBNKGUpe3JldHVybiBlfWZ1bmN0aW9uIEkoZSl7dGhyb3cgZX1mdW5jdGlvbiBXKGUsdCxuLHIpe3ZhciBpO3RyeXtlJiZtKGk9ZS5wcm9taXNlKT9pLmNhbGwoZSkuZG9uZSh0KS5mYWlsKG4pOmUmJm0oaT1lLnRoZW4pP2kuY2FsbChlLHQsbik6dC5hcHBseSh2b2lkIDAsW2VdLnNsaWNlKHIpKX1jYXRjaChlKXtuLmFwcGx5KHZvaWQgMCxbZV0pfX1rLkNhbGxiYWNrcz1mdW5jdGlvbihyKXt2YXIgZSxuO3I9XCJzdHJpbmdcIj09dHlwZW9mIHI/KGU9cixuPXt9LGsuZWFjaChlLm1hdGNoKFIpfHxbXSxmdW5jdGlvbihlLHQpe25bdF09ITB9KSxuKTprLmV4dGVuZCh7fSxyKTt2YXIgaSx0LG8sYSxzPVtdLHU9W10sbD0tMSxjPWZ1bmN0aW9uKCl7Zm9yKGE9YXx8ci5vbmNlLG89aT0hMDt1Lmxlbmd0aDtsPS0xKXt0PXUuc2hpZnQoKTt3aGlsZSgrK2w8cy5sZW5ndGgpITE9PT1zW2xdLmFwcGx5KHRbMF0sdFsxXSkmJnIuc3RvcE9uRmFsc2UmJihsPXMubGVuZ3RoLHQ9ITEpfXIubWVtb3J5fHwodD0hMSksaT0hMSxhJiYocz10P1tdOlwiXCIpfSxmPXthZGQ6ZnVuY3Rpb24oKXtyZXR1cm4gcyYmKHQmJiFpJiYobD1zLmxlbmd0aC0xLHUucHVzaCh0KSksZnVuY3Rpb24gbihlKXtrLmVhY2goZSxmdW5jdGlvbihlLHQpe20odCk/ci51bmlxdWUmJmYuaGFzKHQpfHxzLnB1c2godCk6dCYmdC5sZW5ndGgmJlwic3RyaW5nXCIhPT13KHQpJiZuKHQpfSl9KGFyZ3VtZW50cyksdCYmIWkmJmMoKSksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oZSx0KXt2YXIgbjt3aGlsZSgtMTwobj1rLmluQXJyYXkodCxzLG4pKSlzLnNwbGljZShuLDEpLG48PWwmJmwtLX0pLHRoaXN9LGhhczpmdW5jdGlvbihlKXtyZXR1cm4gZT8tMTxrLmluQXJyYXkoZSxzKTowPHMubGVuZ3RofSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBzJiYocz1bXSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBhPXU9W10scz10PVwiXCIsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hc30sbG9jazpmdW5jdGlvbigpe3JldHVybiBhPXU9W10sdHx8aXx8KHM9dD1cIlwiKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWF9LGZpcmVXaXRoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGF8fCh0PVtlLCh0PXR8fFtdKS5zbGljZT90LnNsaWNlKCk6dF0sdS5wdXNoKHQpLGl8fGMoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBmLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhb319O3JldHVybiBmfSxrLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oZSl7dmFyIG89W1tcIm5vdGlmeVwiLFwicHJvZ3Jlc3NcIixrLkNhbGxiYWNrcyhcIm1lbW9yeVwiKSxrLkNhbGxiYWNrcyhcIm1lbW9yeVwiKSwyXSxbXCJyZXNvbHZlXCIsXCJkb25lXCIsay5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxrLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLDAsXCJyZXNvbHZlZFwiXSxbXCJyZWplY3RcIixcImZhaWxcIixrLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLGsuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksMSxcInJlamVjdGVkXCJdXSxpPVwicGVuZGluZ1wiLGE9e3N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGl9LGFsd2F5czpmdW5jdGlvbigpe3JldHVybiBzLmRvbmUoYXJndW1lbnRzKS5mYWlsKGFyZ3VtZW50cyksdGhpc30sXCJjYXRjaFwiOmZ1bmN0aW9uKGUpe3JldHVybiBhLnRoZW4obnVsbCxlKX0scGlwZTpmdW5jdGlvbigpe3ZhciBpPWFyZ3VtZW50cztyZXR1cm4gay5EZWZlcnJlZChmdW5jdGlvbihyKXtrLmVhY2gobyxmdW5jdGlvbihlLHQpe3ZhciBuPW0oaVt0WzRdXSkmJmlbdFs0XV07c1t0WzFdXShmdW5jdGlvbigpe3ZhciBlPW4mJm4uYXBwbHkodGhpcyxhcmd1bWVudHMpO2UmJm0oZS5wcm9taXNlKT9lLnByb21pc2UoKS5wcm9ncmVzcyhyLm5vdGlmeSkuZG9uZShyLnJlc29sdmUpLmZhaWwoci5yZWplY3QpOnJbdFswXStcIldpdGhcIl0odGhpcyxuP1tlXTphcmd1bWVudHMpfSl9KSxpPW51bGx9KS5wcm9taXNlKCl9LHRoZW46ZnVuY3Rpb24odCxuLHIpe3ZhciB1PTA7ZnVuY3Rpb24gbChpLG8sYSxzKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj10aGlzLHI9YXJndW1lbnRzLGU9ZnVuY3Rpb24oKXt2YXIgZSx0O2lmKCEoaTx1KSl7aWYoKGU9YS5hcHBseShuLHIpKT09PW8ucHJvbWlzZSgpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGVuYWJsZSBzZWxmLXJlc29sdXRpb25cIik7dD1lJiYoXCJvYmplY3RcIj09dHlwZW9mIGV8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGUpJiZlLnRoZW4sbSh0KT9zP3QuY2FsbChlLGwodSxvLE0scyksbCh1LG8sSSxzKSk6KHUrKyx0LmNhbGwoZSxsKHUsbyxNLHMpLGwodSxvLEkscyksbCh1LG8sTSxvLm5vdGlmeVdpdGgpKSk6KGEhPT1NJiYobj12b2lkIDAscj1bZV0pLChzfHxvLnJlc29sdmVXaXRoKShuLHIpKX19LHQ9cz9lOmZ1bmN0aW9uKCl7dHJ5e2UoKX1jYXRjaChlKXtrLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2smJmsuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhlLHQuc3RhY2tUcmFjZSksdTw9aSsxJiYoYSE9PUkmJihuPXZvaWQgMCxyPVtlXSksby5yZWplY3RXaXRoKG4scikpfX07aT90KCk6KGsuRGVmZXJyZWQuZ2V0U3RhY2tIb29rJiYodC5zdGFja1RyYWNlPWsuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCkpLEMuc2V0VGltZW91dCh0KSl9fXJldHVybiBrLkRlZmVycmVkKGZ1bmN0aW9uKGUpe29bMF1bM10uYWRkKGwoMCxlLG0ocik/cjpNLGUubm90aWZ5V2l0aCkpLG9bMV1bM10uYWRkKGwoMCxlLG0odCk/dDpNKSksb1syXVszXS5hZGQobCgwLGUsbShuKT9uOkkpKX0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9rLmV4dGVuZChlLGEpOmF9fSxzPXt9O3JldHVybiBrLmVhY2gobyxmdW5jdGlvbihlLHQpe3ZhciBuPXRbMl0scj10WzVdO2FbdFsxXV09bi5hZGQsciYmbi5hZGQoZnVuY3Rpb24oKXtpPXJ9LG9bMy1lXVsyXS5kaXNhYmxlLG9bMy1lXVszXS5kaXNhYmxlLG9bMF1bMl0ubG9jayxvWzBdWzNdLmxvY2spLG4uYWRkKHRbM10uZmlyZSksc1t0WzBdXT1mdW5jdGlvbigpe3JldHVybiBzW3RbMF0rXCJXaXRoXCJdKHRoaXM9PT1zP3ZvaWQgMDp0aGlzLGFyZ3VtZW50cyksdGhpc30sc1t0WzBdK1wiV2l0aFwiXT1uLmZpcmVXaXRofSksYS5wcm9taXNlKHMpLGUmJmUuY2FsbChzLHMpLHN9LHdoZW46ZnVuY3Rpb24oZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aCx0PW4scj1BcnJheSh0KSxpPXMuY2FsbChhcmd1bWVudHMpLG89ay5EZWZlcnJlZCgpLGE9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JbdF09dGhpcyxpW3RdPTE8YXJndW1lbnRzLmxlbmd0aD9zLmNhbGwoYXJndW1lbnRzKTplLC0tbnx8by5yZXNvbHZlV2l0aChyLGkpfX07aWYobjw9MSYmKFcoZSxvLmRvbmUoYSh0KSkucmVzb2x2ZSxvLnJlamVjdCwhbiksXCJwZW5kaW5nXCI9PT1vLnN0YXRlKCl8fG0oaVt0XSYmaVt0XS50aGVuKSkpcmV0dXJuIG8udGhlbigpO3doaWxlKHQtLSlXKGlbdF0sYSh0KSxvLnJlamVjdCk7cmV0dXJuIG8ucHJvbWlzZSgpfX0pO3ZhciAkPS9eKEV2YWx8SW50ZXJuYWx8UmFuZ2V8UmVmZXJlbmNlfFN5bnRheHxUeXBlfFVSSSlFcnJvciQvO2suRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1mdW5jdGlvbihlLHQpe0MuY29uc29sZSYmQy5jb25zb2xlLndhcm4mJmUmJiQudGVzdChlLm5hbWUpJiZDLmNvbnNvbGUud2FybihcImpRdWVyeS5EZWZlcnJlZCBleGNlcHRpb246IFwiK2UubWVzc2FnZSxlLnN0YWNrLHQpfSxrLnJlYWR5RXhjZXB0aW9uPWZ1bmN0aW9uKGUpe0Muc2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGV9KX07dmFyIEY9ay5EZWZlcnJlZCgpO2Z1bmN0aW9uIEIoKXtFLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsQiksQy5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLEIpLGsucmVhZHkoKX1rLmZuLnJlYWR5PWZ1bmN0aW9uKGUpe3JldHVybiBGLnRoZW4oZSlbXCJjYXRjaFwiXShmdW5jdGlvbihlKXtrLnJlYWR5RXhjZXB0aW9uKGUpfSksdGhpc30say5leHRlbmQoe2lzUmVhZHk6ITEscmVhZHlXYWl0OjEscmVhZHk6ZnVuY3Rpb24oZSl7KCEwPT09ZT8tLWsucmVhZHlXYWl0OmsuaXNSZWFkeSl8fChrLmlzUmVhZHk9ITApIT09ZSYmMDwtLWsucmVhZHlXYWl0fHxGLnJlc29sdmVXaXRoKEUsW2tdKX19KSxrLnJlYWR5LnRoZW49Ri50aGVuLFwiY29tcGxldGVcIj09PUUucmVhZHlTdGF0ZXx8XCJsb2FkaW5nXCIhPT1FLnJlYWR5U3RhdGUmJiFFLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbD9DLnNldFRpbWVvdXQoay5yZWFkeSk6KEUuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixCKSxDLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsQikpO3ZhciBfPWZ1bmN0aW9uKGUsdCxuLHIsaSxvLGEpe3ZhciBzPTAsdT1lLmxlbmd0aCxsPW51bGw9PW47aWYoXCJvYmplY3RcIj09PXcobikpZm9yKHMgaW4gaT0hMCxuKV8oZSx0LHMsbltzXSwhMCxvLGEpO2Vsc2UgaWYodm9pZCAwIT09ciYmKGk9ITAsbShyKXx8KGE9ITApLGwmJihhPyh0LmNhbGwoZSxyKSx0PW51bGwpOihsPXQsdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGwuY2FsbChrKGUpLG4pfSkpLHQpKWZvcig7czx1O3MrKyl0KGVbc10sbixhP3I6ci5jYWxsKGVbc10scyx0KGVbc10sbikpKTtyZXR1cm4gaT9lOmw/dC5jYWxsKGUpOnU/dChlWzBdLG4pOm99LHo9L14tbXMtLyxVPS8tKFthLXpdKS9nO2Z1bmN0aW9uIFgoZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfWZ1bmN0aW9uIFYoZSl7cmV0dXJuIGUucmVwbGFjZSh6LFwibXMtXCIpLnJlcGxhY2UoVSxYKX12YXIgRz1mdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGV8fDk9PT1lLm5vZGVUeXBlfHwhK2Uubm9kZVR5cGV9O2Z1bmN0aW9uIFkoKXt0aGlzLmV4cGFuZG89ay5leHBhbmRvK1kudWlkKyt9WS51aWQ9MSxZLnByb3RvdHlwZT17Y2FjaGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZVt0aGlzLmV4cGFuZG9dO3JldHVybiB0fHwodD17fSxHKGUpJiYoZS5ub2RlVHlwZT9lW3RoaXMuZXhwYW5kb109dDpPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0aGlzLmV4cGFuZG8se3ZhbHVlOnQsY29uZmlndXJhYmxlOiEwfSkpKSx0fSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9dGhpcy5jYWNoZShlKTtpZihcInN0cmluZ1wiPT10eXBlb2YgdClpW1YodCldPW47ZWxzZSBmb3IociBpbiB0KWlbVihyKV09dFtyXTtyZXR1cm4gaX0sZ2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQ/dGhpcy5jYWNoZShlKTplW3RoaXMuZXhwYW5kb10mJmVbdGhpcy5leHBhbmRvXVtWKHQpXX0sYWNjZXNzOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09dHx8dCYmXCJzdHJpbmdcIj09dHlwZW9mIHQmJnZvaWQgMD09PW4/dGhpcy5nZXQoZSx0KToodGhpcy5zZXQoZSx0LG4pLHZvaWQgMCE9PW4/bjp0KX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1lW3RoaXMuZXhwYW5kb107aWYodm9pZCAwIT09cil7aWYodm9pZCAwIT09dCl7bj0odD1BcnJheS5pc0FycmF5KHQpP3QubWFwKFYpOih0PVYodCkpaW4gcj9bdF06dC5tYXRjaChSKXx8W10pLmxlbmd0aDt3aGlsZShuLS0pZGVsZXRlIHJbdFtuXV19KHZvaWQgMD09PXR8fGsuaXNFbXB0eU9iamVjdChyKSkmJihlLm5vZGVUeXBlP2VbdGhpcy5leHBhbmRvXT12b2lkIDA6ZGVsZXRlIGVbdGhpcy5leHBhbmRvXSl9fSxoYXNEYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PWVbdGhpcy5leHBhbmRvXTtyZXR1cm4gdm9pZCAwIT09dCYmIWsuaXNFbXB0eU9iamVjdCh0KX19O3ZhciBRPW5ldyBZLEo9bmV3IFksSz0vXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sWj0vW0EtWl0vZztmdW5jdGlvbiBlZShlLHQsbil7dmFyIHIsaTtpZih2b2lkIDA9PT1uJiYxPT09ZS5ub2RlVHlwZSlpZihyPVwiZGF0YS1cIit0LnJlcGxhY2UoWixcIi0kJlwiKS50b0xvd2VyQ2FzZSgpLFwic3RyaW5nXCI9PXR5cGVvZihuPWUuZ2V0QXR0cmlidXRlKHIpKSl7dHJ5e249XCJ0cnVlXCI9PT0oaT1uKXx8XCJmYWxzZVwiIT09aSYmKFwibnVsbFwiPT09aT9udWxsOmk9PT0raStcIlwiPytpOksudGVzdChpKT9KU09OLnBhcnNlKGkpOmkpfWNhdGNoKGUpe31KLnNldChlLHQsbil9ZWxzZSBuPXZvaWQgMDtyZXR1cm4gbn1rLmV4dGVuZCh7aGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gSi5oYXNEYXRhKGUpfHxRLmhhc0RhdGEoZSl9LGRhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBKLmFjY2VzcyhlLHQsbil9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtKLnJlbW92ZShlLHQpfSxfZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFEuYWNjZXNzKGUsdCxuKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtRLnJlbW92ZShlLHQpfX0pLGsuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKG4sZSl7dmFyIHQscixpLG89dGhpc1swXSxhPW8mJm8uYXR0cmlidXRlcztpZih2b2lkIDA9PT1uKXtpZih0aGlzLmxlbmd0aCYmKGk9Si5nZXQobyksMT09PW8ubm9kZVR5cGUmJiFRLmdldChvLFwiaGFzRGF0YUF0dHJzXCIpKSl7dD1hLmxlbmd0aDt3aGlsZSh0LS0pYVt0XSYmMD09PShyPWFbdF0ubmFtZSkuaW5kZXhPZihcImRhdGEtXCIpJiYocj1WKHIuc2xpY2UoNSkpLGVlKG8scixpW3JdKSk7US5zZXQobyxcImhhc0RhdGFBdHRyc1wiLCEwKX1yZXR1cm4gaX1yZXR1cm5cIm9iamVjdFwiPT10eXBlb2Ygbj90aGlzLmVhY2goZnVuY3Rpb24oKXtKLnNldCh0aGlzLG4pfSk6Xyh0aGlzLGZ1bmN0aW9uKGUpe3ZhciB0O2lmKG8mJnZvaWQgMD09PWUpcmV0dXJuIHZvaWQgMCE9PSh0PUouZ2V0KG8sbikpP3Q6dm9pZCAwIT09KHQ9ZWUobyxuKSk/dDp2b2lkIDA7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Si5zZXQodGhpcyxuLGUpfSl9LG51bGwsZSwxPGFyZ3VtZW50cy5sZW5ndGgsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe0oucmVtb3ZlKHRoaXMsZSl9KX19KSxrLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO2lmKGUpcmV0dXJuIHQ9KHR8fFwiZnhcIikrXCJxdWV1ZVwiLHI9US5nZXQoZSx0KSxuJiYoIXJ8fEFycmF5LmlzQXJyYXkobik/cj1RLmFjY2VzcyhlLHQsay5tYWtlQXJyYXkobikpOnIucHVzaChuKSkscnx8W119LGRlcXVldWU6ZnVuY3Rpb24oZSx0KXt0PXR8fFwiZnhcIjt2YXIgbj1rLnF1ZXVlKGUsdCkscj1uLmxlbmd0aCxpPW4uc2hpZnQoKSxvPWsuX3F1ZXVlSG9va3MoZSx0KTtcImlucHJvZ3Jlc3NcIj09PWkmJihpPW4uc2hpZnQoKSxyLS0pLGkmJihcImZ4XCI9PT10JiZuLnVuc2hpZnQoXCJpbnByb2dyZXNzXCIpLGRlbGV0ZSBvLnN0b3AsaS5jYWxsKGUsZnVuY3Rpb24oKXtrLmRlcXVldWUoZSx0KX0sbykpLCFyJiZvJiZvLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10K1wicXVldWVIb29rc1wiO3JldHVybiBRLmdldChlLG4pfHxRLmFjY2VzcyhlLG4se2VtcHR5OmsuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikuYWRkKGZ1bmN0aW9uKCl7US5yZW1vdmUoZSxbdCtcInF1ZXVlXCIsbl0pfSl9KX19KSxrLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24odCxuKXt2YXIgZT0yO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiB0JiYobj10LHQ9XCJmeFwiLGUtLSksYXJndW1lbnRzLmxlbmd0aDxlP2sucXVldWUodGhpc1swXSx0KTp2b2lkIDA9PT1uP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9ay5xdWV1ZSh0aGlzLHQsbik7ay5fcXVldWVIb29rcyh0aGlzLHQpLFwiZnhcIj09PXQmJlwiaW5wcm9ncmVzc1wiIT09ZVswXSYmay5kZXF1ZXVlKHRoaXMsdCl9KX0sZGVxdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ay5kZXF1ZXVlKHRoaXMsZSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5xdWV1ZShlfHxcImZ4XCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0xLGk9ay5EZWZlcnJlZCgpLG89dGhpcyxhPXRoaXMubGVuZ3RoLHM9ZnVuY3Rpb24oKXstLXJ8fGkucmVzb2x2ZVdpdGgobyxbb10pfTtcInN0cmluZ1wiIT10eXBlb2YgZSYmKHQ9ZSxlPXZvaWQgMCksZT1lfHxcImZ4XCI7d2hpbGUoYS0tKShuPVEuZ2V0KG9bYV0sZStcInF1ZXVlSG9va3NcIikpJiZuLmVtcHR5JiYocisrLG4uZW1wdHkuYWRkKHMpKTtyZXR1cm4gcygpLGkucHJvbWlzZSh0KX19KTt2YXIgdGU9L1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8uc291cmNlLG5lPW5ldyBSZWdFeHAoXCJeKD86KFsrLV0pPXwpKFwiK3RlK1wiKShbYS16JV0qKSRcIixcImlcIikscmU9W1wiVG9wXCIsXCJSaWdodFwiLFwiQm90dG9tXCIsXCJMZWZ0XCJdLGllPUUuZG9jdW1lbnRFbGVtZW50LG9lPWZ1bmN0aW9uKGUpe3JldHVybiBrLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKX0sYWU9e2NvbXBvc2VkOiEwfTtpZS5nZXRSb290Tm9kZSYmKG9lPWZ1bmN0aW9uKGUpe3JldHVybiBrLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKXx8ZS5nZXRSb290Tm9kZShhZSk9PT1lLm93bmVyRG9jdW1lbnR9KTt2YXIgc2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm5cIm5vbmVcIj09PShlPXR8fGUpLnN0eWxlLmRpc3BsYXl8fFwiXCI9PT1lLnN0eWxlLmRpc3BsYXkmJm9lKGUpJiZcIm5vbmVcIj09PWsuY3NzKGUsXCJkaXNwbGF5XCIpfSx1ZT1mdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLGE9e307Zm9yKG8gaW4gdClhW29dPWUuc3R5bGVbb10sZS5zdHlsZVtvXT10W29dO2ZvcihvIGluIGk9bi5hcHBseShlLHJ8fFtdKSx0KWUuc3R5bGVbb109YVtvXTtyZXR1cm4gaX07ZnVuY3Rpb24gbGUoZSx0LG4scil7dmFyIGksbyxhPTIwLHM9cj9mdW5jdGlvbigpe3JldHVybiByLmN1cigpfTpmdW5jdGlvbigpe3JldHVybiBrLmNzcyhlLHQsXCJcIil9LHU9cygpLGw9biYmblszXXx8KGsuY3NzTnVtYmVyW3RdP1wiXCI6XCJweFwiKSxjPWUubm9kZVR5cGUmJihrLmNzc051bWJlclt0XXx8XCJweFwiIT09bCYmK3UpJiZuZS5leGVjKGsuY3NzKGUsdCkpO2lmKGMmJmNbM10hPT1sKXt1Lz0yLGw9bHx8Y1szXSxjPSt1fHwxO3doaWxlKGEtLSlrLnN0eWxlKGUsdCxjK2wpLCgxLW8pKigxLShvPXMoKS91fHwuNSkpPD0wJiYoYT0wKSxjLz1vO2MqPTIsay5zdHlsZShlLHQsYytsKSxuPW58fFtdfXJldHVybiBuJiYoYz0rY3x8K3V8fDAsaT1uWzFdP2MrKG5bMV0rMSkqblsyXTorblsyXSxyJiYoci51bml0PWwsci5zdGFydD1jLHIuZW5kPWkpKSxpfXZhciBjZT17fTtmdW5jdGlvbiBmZShlLHQpe2Zvcih2YXIgbixyLGksbyxhLHMsdSxsPVtdLGM9MCxmPWUubGVuZ3RoO2M8ZjtjKyspKHI9ZVtjXSkuc3R5bGUmJihuPXIuc3R5bGUuZGlzcGxheSx0PyhcIm5vbmVcIj09PW4mJihsW2NdPVEuZ2V0KHIsXCJkaXNwbGF5XCIpfHxudWxsLGxbY118fChyLnN0eWxlLmRpc3BsYXk9XCJcIikpLFwiXCI9PT1yLnN0eWxlLmRpc3BsYXkmJnNlKHIpJiYobFtjXT0odT1hPW89dm9pZCAwLGE9KGk9cikub3duZXJEb2N1bWVudCxzPWkubm9kZU5hbWUsKHU9Y2Vbc10pfHwobz1hLmJvZHkuYXBwZW5kQ2hpbGQoYS5jcmVhdGVFbGVtZW50KHMpKSx1PWsuY3NzKG8sXCJkaXNwbGF5XCIpLG8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvKSxcIm5vbmVcIj09PXUmJih1PVwiYmxvY2tcIiksY2Vbc109dSkpKSk6XCJub25lXCIhPT1uJiYobFtjXT1cIm5vbmVcIixRLnNldChyLFwiZGlzcGxheVwiLG4pKSk7Zm9yKGM9MDtjPGY7YysrKW51bGwhPWxbY10mJihlW2NdLnN0eWxlLmRpc3BsYXk9bFtjXSk7cmV0dXJuIGV9ay5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4gZmUodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gZmUodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihlKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGU/ZT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtzZSh0aGlzKT9rKHRoaXMpLnNob3coKTprKHRoaXMpLmhpZGUoKX0pfX0pO3ZhciBwZT0vXig/OmNoZWNrYm94fHJhZGlvKSQvaSxkZT0vPChbYS16XVteXFwvXFwwPlxceDIwXFx0XFxyXFxuXFxmXSopL2ksaGU9L14kfF5tb2R1bGUkfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxnZT17b3B0aW9uOlsxLFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLFwiPC9zZWxlY3Q+XCJdLHRoZWFkOlsxLFwiPHRhYmxlPlwiLFwiPC90YWJsZT5cIl0sY29sOlsyLFwiPHRhYmxlPjxjb2xncm91cD5cIixcIjwvY29sZ3JvdXA+PC90YWJsZT5cIl0sdHI6WzIsXCI8dGFibGU+PHRib2R5PlwiLFwiPC90Ym9keT48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OlswLFwiXCIsXCJcIl19O2Z1bmN0aW9uIHZlKGUsdCl7dmFyIG47cmV0dXJuIG49XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0fHxcIipcIik6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUucXVlcnlTZWxlY3RvckFsbD9lLnF1ZXJ5U2VsZWN0b3JBbGwodHx8XCIqXCIpOltdLHZvaWQgMD09PXR8fHQmJkEoZSx0KT9rLm1lcmdlKFtlXSxuKTpufWZ1bmN0aW9uIHllKGUsdCl7Zm9yKHZhciBuPTAscj1lLmxlbmd0aDtuPHI7bisrKVEuc2V0KGVbbl0sXCJnbG9iYWxFdmFsXCIsIXR8fFEuZ2V0KHRbbl0sXCJnbG9iYWxFdmFsXCIpKX1nZS5vcHRncm91cD1nZS5vcHRpb24sZ2UudGJvZHk9Z2UudGZvb3Q9Z2UuY29sZ3JvdXA9Z2UuY2FwdGlvbj1nZS50aGVhZCxnZS50aD1nZS50ZDt2YXIgbWUseGUsYmU9Lzx8JiM/XFx3KzsvO2Z1bmN0aW9uIHdlKGUsdCxuLHIsaSl7Zm9yKHZhciBvLGEscyx1LGwsYyxmPXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLHA9W10sZD0wLGg9ZS5sZW5ndGg7ZDxoO2QrKylpZigobz1lW2RdKXx8MD09PW8paWYoXCJvYmplY3RcIj09PXcobykpay5tZXJnZShwLG8ubm9kZVR5cGU/W29dOm8pO2Vsc2UgaWYoYmUudGVzdChvKSl7YT1hfHxmLmFwcGVuZENoaWxkKHQuY3JlYXRlRWxlbWVudChcImRpdlwiKSkscz0oZGUuZXhlYyhvKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCksdT1nZVtzXXx8Z2UuX2RlZmF1bHQsYS5pbm5lckhUTUw9dVsxXStrLmh0bWxQcmVmaWx0ZXIobykrdVsyXSxjPXVbMF07d2hpbGUoYy0tKWE9YS5sYXN0Q2hpbGQ7ay5tZXJnZShwLGEuY2hpbGROb2RlcyksKGE9Zi5maXJzdENoaWxkKS50ZXh0Q29udGVudD1cIlwifWVsc2UgcC5wdXNoKHQuY3JlYXRlVGV4dE5vZGUobykpO2YudGV4dENvbnRlbnQ9XCJcIixkPTA7d2hpbGUobz1wW2QrK10paWYociYmLTE8ay5pbkFycmF5KG8scikpaSYmaS5wdXNoKG8pO2Vsc2UgaWYobD1vZShvKSxhPXZlKGYuYXBwZW5kQ2hpbGQobyksXCJzY3JpcHRcIiksbCYmeWUoYSksbil7Yz0wO3doaWxlKG89YVtjKytdKWhlLnRlc3Qoby50eXBlfHxcIlwiKSYmbi5wdXNoKG8pfXJldHVybiBmfW1lPUUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLmFwcGVuZENoaWxkKEUuY3JlYXRlRWxlbWVudChcImRpdlwiKSksKHhlPUUuY3JlYXRlRWxlbWVudChcImlucHV0XCIpKS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKSx4ZS5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsXCJjaGVja2VkXCIpLHhlLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcInRcIiksbWUuYXBwZW5kQ2hpbGQoeGUpLHkuY2hlY2tDbG9uZT1tZS5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsbWUuaW5uZXJIVE1MPVwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiLHkubm9DbG9uZUNoZWNrZWQ9ISFtZS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWU7dmFyIFRlPS9ea2V5LyxDZT0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sRWU9L14oW14uXSopKD86XFwuKC4rKXwpLztmdW5jdGlvbiBrZSgpe3JldHVybiEwfWZ1bmN0aW9uIFNlKCl7cmV0dXJuITF9ZnVuY3Rpb24gTmUoZSx0KXtyZXR1cm4gZT09PWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBFLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goZSl7fX0oKT09KFwiZm9jdXNcIj09PXQpfWZ1bmN0aW9uIEFlKGUsdCxuLHIsaSxvKXt2YXIgYSxzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0KXtmb3IocyBpblwic3RyaW5nXCIhPXR5cGVvZiBuJiYocj1yfHxuLG49dm9pZCAwKSx0KUFlKGUscyxuLHIsdFtzXSxvKTtyZXR1cm4gZX1pZihudWxsPT1yJiZudWxsPT1pPyhpPW4scj1uPXZvaWQgMCk6bnVsbD09aSYmKFwic3RyaW5nXCI9PXR5cGVvZiBuPyhpPXIscj12b2lkIDApOihpPXIscj1uLG49dm9pZCAwKSksITE9PT1pKWk9U2U7ZWxzZSBpZighaSlyZXR1cm4gZTtyZXR1cm4gMT09PW8mJihhPWksKGk9ZnVuY3Rpb24oZSl7cmV0dXJuIGsoKS5vZmYoZSksYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KS5ndWlkPWEuZ3VpZHx8KGEuZ3VpZD1rLmd1aWQrKykpLGUuZWFjaChmdW5jdGlvbigpe2suZXZlbnQuYWRkKHRoaXMsdCxpLHIsbil9KX1mdW5jdGlvbiBEZShlLGksbyl7bz8oUS5zZXQoZSxpLCExKSxrLmV2ZW50LmFkZChlLGkse25hbWVzcGFjZTohMSxoYW5kbGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj1RLmdldCh0aGlzLGkpO2lmKDEmZS5pc1RyaWdnZXImJnRoaXNbaV0pe2lmKHIubGVuZ3RoKShrLmV2ZW50LnNwZWNpYWxbaV18fHt9KS5kZWxlZ2F0ZVR5cGUmJmUuc3RvcFByb3BhZ2F0aW9uKCk7ZWxzZSBpZihyPXMuY2FsbChhcmd1bWVudHMpLFEuc2V0KHRoaXMsaSxyKSx0PW8odGhpcyxpKSx0aGlzW2ldKCksciE9PShuPVEuZ2V0KHRoaXMsaSkpfHx0P1Euc2V0KHRoaXMsaSwhMSk6bj17fSxyIT09bilyZXR1cm4gZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCksbi52YWx1ZX1lbHNlIHIubGVuZ3RoJiYoUS5zZXQodGhpcyxpLHt2YWx1ZTprLmV2ZW50LnRyaWdnZXIoay5leHRlbmQoclswXSxrLkV2ZW50LnByb3RvdHlwZSksci5zbGljZSgxKSx0aGlzKX0pLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkpfX0pKTp2b2lkIDA9PT1RLmdldChlLGkpJiZrLmV2ZW50LmFkZChlLGksa2UpfWsuZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24odCxlLG4scixpKXt2YXIgbyxhLHMsdSxsLGMsZixwLGQsaCxnLHY9US5nZXQodCk7aWYodil7bi5oYW5kbGVyJiYobj0obz1uKS5oYW5kbGVyLGk9by5zZWxlY3RvciksaSYmay5maW5kLm1hdGNoZXNTZWxlY3RvcihpZSxpKSxuLmd1aWR8fChuLmd1aWQ9ay5ndWlkKyspLCh1PXYuZXZlbnRzKXx8KHU9di5ldmVudHM9e30pLChhPXYuaGFuZGxlKXx8KGE9di5oYW5kbGU9ZnVuY3Rpb24oZSl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGsmJmsuZXZlbnQudHJpZ2dlcmVkIT09ZS50eXBlP2suZXZlbnQuZGlzcGF0Y2guYXBwbHkodCxhcmd1bWVudHMpOnZvaWQgMH0pLGw9KGU9KGV8fFwiXCIpLm1hdGNoKFIpfHxbXCJcIl0pLmxlbmd0aDt3aGlsZShsLS0pZD1nPShzPUVlLmV4ZWMoZVtsXSl8fFtdKVsxXSxoPShzWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLGQmJihmPWsuZXZlbnQuc3BlY2lhbFtkXXx8e30sZD0oaT9mLmRlbGVnYXRlVHlwZTpmLmJpbmRUeXBlKXx8ZCxmPWsuZXZlbnQuc3BlY2lhbFtkXXx8e30sYz1rLmV4dGVuZCh7dHlwZTpkLG9yaWdUeXBlOmcsZGF0YTpyLGhhbmRsZXI6bixndWlkOm4uZ3VpZCxzZWxlY3RvcjppLG5lZWRzQ29udGV4dDppJiZrLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoaSksbmFtZXNwYWNlOmguam9pbihcIi5cIil9LG8pLChwPXVbZF0pfHwoKHA9dVtkXT1bXSkuZGVsZWdhdGVDb3VudD0wLGYuc2V0dXAmJiExIT09Zi5zZXR1cC5jYWxsKHQscixoLGEpfHx0LmFkZEV2ZW50TGlzdGVuZXImJnQuYWRkRXZlbnRMaXN0ZW5lcihkLGEpKSxmLmFkZCYmKGYuYWRkLmNhbGwodCxjKSxjLmhhbmRsZXIuZ3VpZHx8KGMuaGFuZGxlci5ndWlkPW4uZ3VpZCkpLGk/cC5zcGxpY2UocC5kZWxlZ2F0ZUNvdW50KyssMCxjKTpwLnB1c2goYyksay5ldmVudC5nbG9iYWxbZF09ITApfX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8sYSxzLHUsbCxjLGYscCxkLGgsZyx2PVEuaGFzRGF0YShlKSYmUS5nZXQoZSk7aWYodiYmKHU9di5ldmVudHMpKXtsPSh0PSh0fHxcIlwiKS5tYXRjaChSKXx8W1wiXCJdKS5sZW5ndGg7d2hpbGUobC0tKWlmKGQ9Zz0ocz1FZS5leGVjKHRbbF0pfHxbXSlbMV0saD0oc1syXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxkKXtmPWsuZXZlbnQuc3BlY2lhbFtkXXx8e30scD11W2Q9KHI/Zi5kZWxlZ2F0ZVR5cGU6Zi5iaW5kVHlwZSl8fGRdfHxbXSxzPXNbMl0mJm5ldyBSZWdFeHAoXCIoXnxcXFxcLilcIitoLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKSxhPW89cC5sZW5ndGg7d2hpbGUoby0tKWM9cFtvXSwhaSYmZyE9PWMub3JpZ1R5cGV8fG4mJm4uZ3VpZCE9PWMuZ3VpZHx8cyYmIXMudGVzdChjLm5hbWVzcGFjZSl8fHImJnIhPT1jLnNlbGVjdG9yJiYoXCIqKlwiIT09cnx8IWMuc2VsZWN0b3IpfHwocC5zcGxpY2UobywxKSxjLnNlbGVjdG9yJiZwLmRlbGVnYXRlQ291bnQtLSxmLnJlbW92ZSYmZi5yZW1vdmUuY2FsbChlLGMpKTthJiYhcC5sZW5ndGgmJihmLnRlYXJkb3duJiYhMSE9PWYudGVhcmRvd24uY2FsbChlLGgsdi5oYW5kbGUpfHxrLnJlbW92ZUV2ZW50KGUsZCx2LmhhbmRsZSksZGVsZXRlIHVbZF0pfWVsc2UgZm9yKGQgaW4gdSlrLmV2ZW50LnJlbW92ZShlLGQrdFtsXSxuLHIsITApO2suaXNFbXB0eU9iamVjdCh1KSYmUS5yZW1vdmUoZSxcImhhbmRsZSBldmVudHNcIil9fSxkaXNwYXRjaDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscz1rLmV2ZW50LmZpeChlKSx1PW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKSxsPShRLmdldCh0aGlzLFwiZXZlbnRzXCIpfHx7fSlbcy50eXBlXXx8W10sYz1rLmV2ZW50LnNwZWNpYWxbcy50eXBlXXx8e307Zm9yKHVbMF09cyx0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl1W3RdPWFyZ3VtZW50c1t0XTtpZihzLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWMucHJlRGlzcGF0Y2h8fCExIT09Yy5wcmVEaXNwYXRjaC5jYWxsKHRoaXMscykpe2E9ay5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMscyxsKSx0PTA7d2hpbGUoKGk9YVt0KytdKSYmIXMuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7cy5jdXJyZW50VGFyZ2V0PWkuZWxlbSxuPTA7d2hpbGUoKG89aS5oYW5kbGVyc1tuKytdKSYmIXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSlzLnJuYW1lc3BhY2UmJiExIT09by5uYW1lc3BhY2UmJiFzLnJuYW1lc3BhY2UudGVzdChvLm5hbWVzcGFjZSl8fChzLmhhbmRsZU9iaj1vLHMuZGF0YT1vLmRhdGEsdm9pZCAwIT09KHI9KChrLmV2ZW50LnNwZWNpYWxbby5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fG8uaGFuZGxlcikuYXBwbHkoaS5lbGVtLHUpKSYmITE9PT0ocy5yZXN1bHQ9cikmJihzLnByZXZlbnREZWZhdWx0KCkscy5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBjLnBvc3REaXNwYXRjaCYmYy5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLHMpLHMucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhLHM9W10sdT10LmRlbGVnYXRlQ291bnQsbD1lLnRhcmdldDtpZih1JiZsLm5vZGVUeXBlJiYhKFwiY2xpY2tcIj09PWUudHlwZSYmMTw9ZS5idXR0b24pKWZvcig7bCE9PXRoaXM7bD1sLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWwubm9kZVR5cGUmJihcImNsaWNrXCIhPT1lLnR5cGV8fCEwIT09bC5kaXNhYmxlZCkpe2ZvcihvPVtdLGE9e30sbj0wO248dTtuKyspdm9pZCAwPT09YVtpPShyPXRbbl0pLnNlbGVjdG9yK1wiIFwiXSYmKGFbaV09ci5uZWVkc0NvbnRleHQ/LTE8ayhpLHRoaXMpLmluZGV4KGwpOmsuZmluZChpLHRoaXMsbnVsbCxbbF0pLmxlbmd0aCksYVtpXSYmby5wdXNoKHIpO28ubGVuZ3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczpvfSl9cmV0dXJuIGw9dGhpcyx1PHQubGVuZ3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczp0LnNsaWNlKHUpfSksc30sYWRkUHJvcDpmdW5jdGlvbih0LGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShrLkV2ZW50LnByb3RvdHlwZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6bShlKT9mdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudClyZXR1cm4gZSh0aGlzLm9yaWdpbmFsRXZlbnQpfTpmdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudClyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50W3RdfSxzZXQ6ZnVuY3Rpb24oZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsdCx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ZX0pfX0pfSxmaXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbay5leHBhbmRvXT9lOm5ldyBrLkV2ZW50KGUpfSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sY2xpY2s6e3NldHVwOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXN8fGU7cmV0dXJuIHBlLnRlc3QodC50eXBlKSYmdC5jbGljayYmQSh0LFwiaW5wdXRcIikmJkRlKHQsXCJjbGlja1wiLGtlKSwhMX0sdHJpZ2dlcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzfHxlO3JldHVybiBwZS50ZXN0KHQudHlwZSkmJnQuY2xpY2smJkEodCxcImlucHV0XCIpJiZEZSh0LFwiY2xpY2tcIiksITB9LF9kZWZhdWx0OmZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0O3JldHVybiBwZS50ZXN0KHQudHlwZSkmJnQuY2xpY2smJkEodCxcImlucHV0XCIpJiZRLmdldCh0LFwiY2xpY2tcIil8fEEodCxcImFcIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihlKXt2b2lkIDAhPT1lLnJlc3VsdCYmZS5vcmlnaW5hbEV2ZW50JiYoZS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWUucmVzdWx0KX19fX0say5yZW1vdmVFdmVudD1mdW5jdGlvbihlLHQsbil7ZS5yZW1vdmVFdmVudExpc3RlbmVyJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxuKX0say5FdmVudD1mdW5jdGlvbihlLHQpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGsuRXZlbnQpKXJldHVybiBuZXcgay5FdmVudChlLHQpO2UmJmUudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWUsdGhpcy50eXBlPWUudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1lLmRlZmF1bHRQcmV2ZW50ZWR8fHZvaWQgMD09PWUuZGVmYXVsdFByZXZlbnRlZCYmITE9PT1lLnJldHVyblZhbHVlP2tlOlNlLHRoaXMudGFyZ2V0PWUudGFyZ2V0JiYzPT09ZS50YXJnZXQubm9kZVR5cGU/ZS50YXJnZXQucGFyZW50Tm9kZTplLnRhcmdldCx0aGlzLmN1cnJlbnRUYXJnZXQ9ZS5jdXJyZW50VGFyZ2V0LHRoaXMucmVsYXRlZFRhcmdldD1lLnJlbGF0ZWRUYXJnZXQpOnRoaXMudHlwZT1lLHQmJmsuZXh0ZW5kKHRoaXMsdCksdGhpcy50aW1lU3RhbXA9ZSYmZS50aW1lU3RhbXB8fERhdGUubm93KCksdGhpc1trLmV4cGFuZG9dPSEwfSxrLkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6ay5FdmVudCxpc0RlZmF1bHRQcmV2ZW50ZWQ6U2UsaXNQcm9wYWdhdGlvblN0b3BwZWQ6U2UsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6U2UsaXNTaW11bGF0ZWQ6ITEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9a2UsZSYmIXRoaXMuaXNTaW11bGF0ZWQmJmUucHJldmVudERlZmF1bHQoKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9a2UsZSYmIXRoaXMuaXNTaW11bGF0ZWQmJmUuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPWtlLGUmJiF0aGlzLmlzU2ltdWxhdGVkJiZlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxrLmVhY2goe2FsdEtleTohMCxidWJibGVzOiEwLGNhbmNlbGFibGU6ITAsY2hhbmdlZFRvdWNoZXM6ITAsY3RybEtleTohMCxkZXRhaWw6ITAsZXZlbnRQaGFzZTohMCxtZXRhS2V5OiEwLHBhZ2VYOiEwLHBhZ2VZOiEwLHNoaWZ0S2V5OiEwLHZpZXc6ITAsXCJjaGFyXCI6ITAsY29kZTohMCxjaGFyQ29kZTohMCxrZXk6ITAsa2V5Q29kZTohMCxidXR0b246ITAsYnV0dG9uczohMCxjbGllbnRYOiEwLGNsaWVudFk6ITAsb2Zmc2V0WDohMCxvZmZzZXRZOiEwLHBvaW50ZXJJZDohMCxwb2ludGVyVHlwZTohMCxzY3JlZW5YOiEwLHNjcmVlblk6ITAsdGFyZ2V0VG91Y2hlczohMCx0b0VsZW1lbnQ6ITAsdG91Y2hlczohMCx3aGljaDpmdW5jdGlvbihlKXt2YXIgdD1lLmJ1dHRvbjtyZXR1cm4gbnVsbD09ZS53aGljaCYmVGUudGVzdChlLnR5cGUpP251bGwhPWUuY2hhckNvZGU/ZS5jaGFyQ29kZTplLmtleUNvZGU6IWUud2hpY2gmJnZvaWQgMCE9PXQmJkNlLnRlc3QoZS50eXBlKT8xJnQ/MToyJnQ/Mzo0JnQ/MjowOmUud2hpY2h9fSxrLmV2ZW50LmFkZFByb3ApLGsuZWFjaCh7Zm9jdXM6XCJmb2N1c2luXCIsYmx1cjpcImZvY3Vzb3V0XCJ9LGZ1bmN0aW9uKGUsdCl7ay5ldmVudC5zcGVjaWFsW2VdPXtzZXR1cDpmdW5jdGlvbigpe3JldHVybiBEZSh0aGlzLGUsTmUpLCExfSx0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIERlKHRoaXMsZSksITB9LGRlbGVnYXRlVHlwZTp0fX0pLGsuZWFjaCh7bW91c2VlbnRlcjpcIm1vdXNlb3ZlclwiLG1vdXNlbGVhdmU6XCJtb3VzZW91dFwiLHBvaW50ZXJlbnRlcjpcInBvaW50ZXJvdmVyXCIscG9pbnRlcmxlYXZlOlwicG9pbnRlcm91dFwifSxmdW5jdGlvbihlLGkpe2suZXZlbnQuc3BlY2lhbFtlXT17ZGVsZWdhdGVUeXBlOmksYmluZFR5cGU6aSxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLnJlbGF0ZWRUYXJnZXQscj1lLmhhbmRsZU9iajtyZXR1cm4gbiYmKG49PT10aGlzfHxrLmNvbnRhaW5zKHRoaXMsbikpfHwoZS50eXBlPXIub3JpZ1R5cGUsdD1yLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUudHlwZT1pKSx0fX19KSxrLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIEFlKHRoaXMsZSx0LG4scil9LG9uZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gQWUodGhpcyxlLHQsbixyLDEpfSxvZmY6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5oYW5kbGVPYmopcmV0dXJuIHI9ZS5oYW5kbGVPYmosayhlLmRlbGVnYXRlVGFyZ2V0KS5vZmYoci5uYW1lc3BhY2U/ci5vcmlnVHlwZStcIi5cIityLm5hbWVzcGFjZTpyLm9yaWdUeXBlLHIuc2VsZWN0b3Isci5oYW5kbGVyKSx0aGlzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBlKXtmb3IoaSBpbiBlKXRoaXMub2ZmKGksdCxlW2ldKTtyZXR1cm4gdGhpc31yZXR1cm4hMSE9PXQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHR8fChuPXQsdD12b2lkIDApLCExPT09biYmKG49U2UpLHRoaXMuZWFjaChmdW5jdGlvbigpe2suZXZlbnQucmVtb3ZlKHRoaXMsZSxuLHQpfSl9fSk7dmFyIGplPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKilbXj5dKilcXC8+L2dpLHFlPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLExlPS9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksSGU9L15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nO2Z1bmN0aW9uIE9lKGUsdCl7cmV0dXJuIEEoZSxcInRhYmxlXCIpJiZBKDExIT09dC5ub2RlVHlwZT90OnQuZmlyc3RDaGlsZCxcInRyXCIpJiZrKGUpLmNoaWxkcmVuKFwidGJvZHlcIilbMF18fGV9ZnVuY3Rpb24gUGUoZSl7cmV0dXJuIGUudHlwZT0obnVsbCE9PWUuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSkrXCIvXCIrZS50eXBlLGV9ZnVuY3Rpb24gUmUoZSl7cmV0dXJuXCJ0cnVlL1wiPT09KGUudHlwZXx8XCJcIikuc2xpY2UoMCw1KT9lLnR5cGU9ZS50eXBlLnNsaWNlKDUpOmUucmVtb3ZlQXR0cmlidXRlKFwidHlwZVwiKSxlfWZ1bmN0aW9uIE1lKGUsdCl7dmFyIG4scixpLG8sYSxzLHUsbDtpZigxPT09dC5ub2RlVHlwZSl7aWYoUS5oYXNEYXRhKGUpJiYobz1RLmFjY2VzcyhlKSxhPVEuc2V0KHQsbyksbD1vLmV2ZW50cykpZm9yKGkgaW4gZGVsZXRlIGEuaGFuZGxlLGEuZXZlbnRzPXt9LGwpZm9yKG49MCxyPWxbaV0ubGVuZ3RoO248cjtuKyspay5ldmVudC5hZGQodCxpLGxbaV1bbl0pO0ouaGFzRGF0YShlKSYmKHM9Si5hY2Nlc3MoZSksdT1rLmV4dGVuZCh7fSxzKSxKLnNldCh0LHUpKX19ZnVuY3Rpb24gSWUobixyLGksbyl7cj1nLmFwcGx5KFtdLHIpO3ZhciBlLHQsYSxzLHUsbCxjPTAsZj1uLmxlbmd0aCxwPWYtMSxkPXJbMF0saD1tKGQpO2lmKGh8fDE8ZiYmXCJzdHJpbmdcIj09dHlwZW9mIGQmJiF5LmNoZWNrQ2xvbmUmJkxlLnRlc3QoZCkpcmV0dXJuIG4uZWFjaChmdW5jdGlvbihlKXt2YXIgdD1uLmVxKGUpO2gmJihyWzBdPWQuY2FsbCh0aGlzLGUsdC5odG1sKCkpKSxJZSh0LHIsaSxvKX0pO2lmKGYmJih0PShlPXdlKHIsblswXS5vd25lckRvY3VtZW50LCExLG4sbykpLmZpcnN0Q2hpbGQsMT09PWUuY2hpbGROb2Rlcy5sZW5ndGgmJihlPXQpLHR8fG8pKXtmb3Iocz0oYT1rLm1hcCh2ZShlLFwic2NyaXB0XCIpLFBlKSkubGVuZ3RoO2M8ZjtjKyspdT1lLGMhPT1wJiYodT1rLmNsb25lKHUsITAsITApLHMmJmsubWVyZ2UoYSx2ZSh1LFwic2NyaXB0XCIpKSksaS5jYWxsKG5bY10sdSxjKTtpZihzKWZvcihsPWFbYS5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCxrLm1hcChhLFJlKSxjPTA7YzxzO2MrKyl1PWFbY10saGUudGVzdCh1LnR5cGV8fFwiXCIpJiYhUS5hY2Nlc3ModSxcImdsb2JhbEV2YWxcIikmJmsuY29udGFpbnMobCx1KSYmKHUuc3JjJiZcIm1vZHVsZVwiIT09KHUudHlwZXx8XCJcIikudG9Mb3dlckNhc2UoKT9rLl9ldmFsVXJsJiYhdS5ub01vZHVsZSYmay5fZXZhbFVybCh1LnNyYyx7bm9uY2U6dS5ub25jZXx8dS5nZXRBdHRyaWJ1dGUoXCJub25jZVwiKX0pOmIodS50ZXh0Q29udGVudC5yZXBsYWNlKEhlLFwiXCIpLHUsbCkpfXJldHVybiBufWZ1bmN0aW9uIFdlKGUsdCxuKXtmb3IodmFyIHIsaT10P2suZmlsdGVyKHQsZSk6ZSxvPTA7bnVsbCE9KHI9aVtvXSk7bysrKW58fDEhPT1yLm5vZGVUeXBlfHxrLmNsZWFuRGF0YSh2ZShyKSksci5wYXJlbnROb2RlJiYobiYmb2UocikmJnllKHZlKHIsXCJzY3JpcHRcIikpLHIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChyKSk7cmV0dXJuIGV9ay5leHRlbmQoe2h0bWxQcmVmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShqZSxcIjwkMT48LyQyPlwiKX0sY2xvbmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsLGM9ZS5jbG9uZU5vZGUoITApLGY9b2UoZSk7aWYoISh5Lm5vQ2xvbmVDaGVja2VkfHwxIT09ZS5ub2RlVHlwZSYmMTEhPT1lLm5vZGVUeXBlfHxrLmlzWE1MRG9jKGUpKSlmb3IoYT12ZShjKSxyPTAsaT0obz12ZShlKSkubGVuZ3RoO3I8aTtyKyspcz1vW3JdLHU9YVtyXSx2b2lkIDAsXCJpbnB1dFwiPT09KGw9dS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSYmcGUudGVzdChzLnR5cGUpP3UuY2hlY2tlZD1zLmNoZWNrZWQ6XCJpbnB1dFwiIT09bCYmXCJ0ZXh0YXJlYVwiIT09bHx8KHUuZGVmYXVsdFZhbHVlPXMuZGVmYXVsdFZhbHVlKTtpZih0KWlmKG4pZm9yKG89b3x8dmUoZSksYT1hfHx2ZShjKSxyPTAsaT1vLmxlbmd0aDtyPGk7cisrKU1lKG9bcl0sYVtyXSk7ZWxzZSBNZShlLGMpO3JldHVybiAwPChhPXZlKGMsXCJzY3JpcHRcIikpLmxlbmd0aCYmeWUoYSwhZiYmdmUoZSxcInNjcmlwdFwiKSksY30sY2xlYW5EYXRhOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLHIsaT1rLmV2ZW50LnNwZWNpYWwsbz0wO3ZvaWQgMCE9PShuPWVbb10pO28rKylpZihHKG4pKXtpZih0PW5bUS5leHBhbmRvXSl7aWYodC5ldmVudHMpZm9yKHIgaW4gdC5ldmVudHMpaVtyXT9rLmV2ZW50LnJlbW92ZShuLHIpOmsucmVtb3ZlRXZlbnQobixyLHQuaGFuZGxlKTtuW1EuZXhwYW5kb109dm9pZCAwfW5bSi5leHBhbmRvXSYmKG5bSi5leHBhbmRvXT12b2lkIDApfX19KSxrLmZuLmV4dGVuZCh7ZGV0YWNoOmZ1bmN0aW9uKGUpe3JldHVybiBXZSh0aGlzLGUsITApfSxyZW1vdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIFdlKHRoaXMsZSl9LHRleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIF8odGhpcyxmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT9rLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsxIT09dGhpcy5ub2RlVHlwZSYmMTEhPT10aGlzLm5vZGVUeXBlJiY5IT09dGhpcy5ub2RlVHlwZXx8KHRoaXMudGV4dENvbnRlbnQ9ZSl9KX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSWUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7MSE9PXRoaXMubm9kZVR5cGUmJjExIT09dGhpcy5ub2RlVHlwZSYmOSE9PXRoaXMubm9kZVR5cGV8fE9lKHRoaXMsZSkuYXBwZW5kQ2hpbGQoZSl9KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiBJZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIHQ9T2UodGhpcyxlKTt0Lmluc2VydEJlZm9yZShlLHQuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiBJZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiBJZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzLm5leHRTaWJsaW5nKX0pfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgZSx0PTA7bnVsbCE9KGU9dGhpc1t0XSk7dCsrKTE9PT1lLm5vZGVUeXBlJiYoay5jbGVhbkRhdGEodmUoZSwhMSkpLGUudGV4dENvbnRlbnQ9XCJcIik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bnVsbCE9ZSYmZSx0PW51bGw9PXQ/ZTp0LHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGsuY2xvbmUodGhpcyxlLHQpfSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuIF8odGhpcyxmdW5jdGlvbihlKXt2YXIgdD10aGlzWzBdfHx7fSxuPTAscj10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1lJiYxPT09dC5ub2RlVHlwZSlyZXR1cm4gdC5pbm5lckhUTUw7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUmJiFxZS50ZXN0KGUpJiYhZ2VbKGRlLmV4ZWMoZSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7ZT1rLmh0bWxQcmVmaWx0ZXIoZSk7dHJ5e2Zvcig7bjxyO24rKykxPT09KHQ9dGhpc1tuXXx8e30pLm5vZGVUeXBlJiYoay5jbGVhbkRhdGEodmUodCwhMSkpLHQuaW5uZXJIVE1MPWUpO3Q9MH1jYXRjaChlKXt9fXQmJnRoaXMuZW1wdHkoKS5hcHBlbmQoZSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgbj1bXTtyZXR1cm4gSWUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wYXJlbnROb2RlO2suaW5BcnJheSh0aGlzLG4pPDAmJihrLmNsZWFuRGF0YSh2ZSh0aGlzKSksdCYmdC5yZXBsYWNlQ2hpbGQoZSx0aGlzKSl9LG4pfX0pLGsuZWFjaCh7YXBwZW5kVG86XCJhcHBlbmRcIixwcmVwZW5kVG86XCJwcmVwZW5kXCIsaW5zZXJ0QmVmb3JlOlwiYmVmb3JlXCIsaW5zZXJ0QWZ0ZXI6XCJhZnRlclwiLHJlcGxhY2VBbGw6XCJyZXBsYWNlV2l0aFwifSxmdW5jdGlvbihlLGEpe2suZm5bZV09ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49W10scj1rKGUpLGk9ci5sZW5ndGgtMSxvPTA7bzw9aTtvKyspdD1vPT09aT90aGlzOnRoaXMuY2xvbmUoITApLGsocltvXSlbYV0odCksdS5hcHBseShuLHQuZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhuKX19KTt2YXIgJGU9bmV3IFJlZ0V4cChcIl4oXCIrdGUrXCIpKD8hcHgpW2EteiVdKyRcIixcImlcIiksRmU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O3JldHVybiB0JiZ0Lm9wZW5lcnx8KHQ9QyksdC5nZXRDb21wdXRlZFN0eWxlKGUpfSxCZT1uZXcgUmVnRXhwKHJlLmpvaW4oXCJ8XCIpLFwiaVwiKTtmdW5jdGlvbiBfZShlLHQsbil7dmFyIHIsaSxvLGEscz1lLnN0eWxlO3JldHVybihuPW58fEZlKGUpKSYmKFwiXCIhPT0oYT1uLmdldFByb3BlcnR5VmFsdWUodCl8fG5bdF0pfHxvZShlKXx8KGE9ay5zdHlsZShlLHQpKSwheS5waXhlbEJveFN0eWxlcygpJiYkZS50ZXN0KGEpJiZCZS50ZXN0KHQpJiYocj1zLndpZHRoLGk9cy5taW5XaWR0aCxvPXMubWF4V2lkdGgscy5taW5XaWR0aD1zLm1heFdpZHRoPXMud2lkdGg9YSxhPW4ud2lkdGgscy53aWR0aD1yLHMubWluV2lkdGg9aSxzLm1heFdpZHRoPW8pKSx2b2lkIDAhPT1hP2ErXCJcIjphfWZ1bmN0aW9uIHplKGUsdCl7cmV0dXJue2dldDpmdW5jdGlvbigpe2lmKCFlKCkpcmV0dXJuKHRoaXMuZ2V0PXQpLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtkZWxldGUgdGhpcy5nZXR9fX0hZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7aWYodSl7cy5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTExMTFweDt3aWR0aDo2MHB4O21hcmdpbi10b3A6MXB4O3BhZGRpbmc6MDtib3JkZXI6MFwiLHUuc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O292ZXJmbG93OnNjcm9sbDttYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3dpZHRoOjYwJTt0b3A6MSVcIixpZS5hcHBlbmRDaGlsZChzKS5hcHBlbmRDaGlsZCh1KTt2YXIgZT1DLmdldENvbXB1dGVkU3R5bGUodSk7bj1cIjElXCIhPT1lLnRvcCxhPTEyPT09dChlLm1hcmdpbkxlZnQpLHUuc3R5bGUucmlnaHQ9XCI2MCVcIixvPTM2PT09dChlLnJpZ2h0KSxyPTM2PT09dChlLndpZHRoKSx1LnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixpPTEyPT09dCh1Lm9mZnNldFdpZHRoLzMpLGllLnJlbW92ZUNoaWxkKHMpLHU9bnVsbH19ZnVuY3Rpb24gdChlKXtyZXR1cm4gTWF0aC5yb3VuZChwYXJzZUZsb2F0KGUpKX12YXIgbixyLGksbyxhLHM9RS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHU9RS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3Uuc3R5bGUmJih1LnN0eWxlLmJhY2tncm91bmRDbGlwPVwiY29udGVudC1ib3hcIix1LmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJcIix5LmNsZWFyQ2xvbmVTdHlsZT1cImNvbnRlbnQtYm94XCI9PT11LnN0eWxlLmJhY2tncm91bmRDbGlwLGsuZXh0ZW5kKHkse2JveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGUoKSxyfSxwaXhlbEJveFN0eWxlczpmdW5jdGlvbigpe3JldHVybiBlKCksb30scGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBlKCksbn0scmVsaWFibGVNYXJnaW5MZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIGUoKSxhfSxzY3JvbGxib3hTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIGUoKSxpfX0pKX0oKTt2YXIgVWU9W1wiV2Via2l0XCIsXCJNb3pcIixcIm1zXCJdLFhlPUUuY3JlYXRlRWxlbWVudChcImRpdlwiKS5zdHlsZSxWZT17fTtmdW5jdGlvbiBHZShlKXt2YXIgdD1rLmNzc1Byb3BzW2VdfHxWZVtlXTtyZXR1cm4gdHx8KGUgaW4gWGU/ZTpWZVtlXT1mdW5jdGlvbihlKXt2YXIgdD1lWzBdLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxuPVVlLmxlbmd0aDt3aGlsZShuLS0paWYoKGU9VWVbbl0rdClpbiBYZSlyZXR1cm4gZX0oZSl8fGUpfXZhciBZZT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sUWU9L14tLS8sSmU9e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix2aXNpYmlsaXR5OlwiaGlkZGVuXCIsZGlzcGxheTpcImJsb2NrXCJ9LEtlPXtsZXR0ZXJTcGFjaW5nOlwiMFwiLGZvbnRXZWlnaHQ6XCI0MDBcIn07ZnVuY3Rpb24gWmUoZSx0LG4pe3ZhciByPW5lLmV4ZWModCk7cmV0dXJuIHI/TWF0aC5tYXgoMCxyWzJdLShufHwwKSkrKHJbM118fFwicHhcIik6dH1mdW5jdGlvbiBldChlLHQsbixyLGksbyl7dmFyIGE9XCJ3aWR0aFwiPT09dD8xOjAscz0wLHU9MDtpZihuPT09KHI/XCJib3JkZXJcIjpcImNvbnRlbnRcIikpcmV0dXJuIDA7Zm9yKDthPDQ7YSs9MilcIm1hcmdpblwiPT09biYmKHUrPWsuY3NzKGUsbityZVthXSwhMCxpKSkscj8oXCJjb250ZW50XCI9PT1uJiYodS09ay5jc3MoZSxcInBhZGRpbmdcIityZVthXSwhMCxpKSksXCJtYXJnaW5cIiE9PW4mJih1LT1rLmNzcyhlLFwiYm9yZGVyXCIrcmVbYV0rXCJXaWR0aFwiLCEwLGkpKSk6KHUrPWsuY3NzKGUsXCJwYWRkaW5nXCIrcmVbYV0sITAsaSksXCJwYWRkaW5nXCIhPT1uP3UrPWsuY3NzKGUsXCJib3JkZXJcIityZVthXStcIldpZHRoXCIsITAsaSk6cys9ay5jc3MoZSxcImJvcmRlclwiK3JlW2FdK1wiV2lkdGhcIiwhMCxpKSk7cmV0dXJuIXImJjA8PW8mJih1Kz1NYXRoLm1heCgwLE1hdGguY2VpbChlW1wib2Zmc2V0XCIrdFswXS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSldLW8tdS1zLS41KSl8fDApLHV9ZnVuY3Rpb24gdHQoZSx0LG4pe3ZhciByPUZlKGUpLGk9KCF5LmJveFNpemluZ1JlbGlhYmxlKCl8fG4pJiZcImJvcmRlci1ib3hcIj09PWsuY3NzKGUsXCJib3hTaXppbmdcIiwhMSxyKSxvPWksYT1fZShlLHQscikscz1cIm9mZnNldFwiK3RbMF0udG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpO2lmKCRlLnRlc3QoYSkpe2lmKCFuKXJldHVybiBhO2E9XCJhdXRvXCJ9cmV0dXJuKCF5LmJveFNpemluZ1JlbGlhYmxlKCkmJml8fFwiYXV0b1wiPT09YXx8IXBhcnNlRmxvYXQoYSkmJlwiaW5saW5lXCI9PT1rLmNzcyhlLFwiZGlzcGxheVwiLCExLHIpKSYmZS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCYmKGk9XCJib3JkZXItYm94XCI9PT1rLmNzcyhlLFwiYm94U2l6aW5nXCIsITEsciksKG89cyBpbiBlKSYmKGE9ZVtzXSkpLChhPXBhcnNlRmxvYXQoYSl8fDApK2V0KGUsdCxufHwoaT9cImJvcmRlclwiOlwiY29udGVudFwiKSxvLHIsYSkrXCJweFwifWZ1bmN0aW9uIG50KGUsdCxuLHIsaSl7cmV0dXJuIG5ldyBudC5wcm90b3R5cGUuaW5pdChlLHQsbixyLGkpfWsuZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGUsdCl7aWYodCl7dmFyIG49X2UoZSxcIm9wYWNpdHlcIik7cmV0dXJuXCJcIj09PW4/XCIxXCI6bn19fX0sY3NzTnVtYmVyOnthbmltYXRpb25JdGVyYXRpb25Db3VudDohMCxjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsZ3JpZEFyZWE6ITAsZ3JpZENvbHVtbjohMCxncmlkQ29sdW1uRW5kOiEwLGdyaWRDb2x1bW5TdGFydDohMCxncmlkUm93OiEwLGdyaWRSb3dFbmQ6ITAsZ3JpZFJvd1N0YXJ0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e30sc3R5bGU6ZnVuY3Rpb24oZSx0LG4scil7aWYoZSYmMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiZlLnN0eWxlKXt2YXIgaSxvLGEscz1WKHQpLHU9UWUudGVzdCh0KSxsPWUuc3R5bGU7aWYodXx8KHQ9R2UocykpLGE9ay5jc3NIb29rc1t0XXx8ay5jc3NIb29rc1tzXSx2b2lkIDA9PT1uKXJldHVybiBhJiZcImdldFwiaW4gYSYmdm9pZCAwIT09KGk9YS5nZXQoZSwhMSxyKSk/aTpsW3RdO1wic3RyaW5nXCI9PT0obz10eXBlb2YgbikmJihpPW5lLmV4ZWMobikpJiZpWzFdJiYobj1sZShlLHQsaSksbz1cIm51bWJlclwiKSxudWxsIT1uJiZuPT1uJiYoXCJudW1iZXJcIiE9PW98fHV8fChuKz1pJiZpWzNdfHwoay5jc3NOdW1iZXJbc10/XCJcIjpcInB4XCIpKSx5LmNsZWFyQ2xvbmVTdHlsZXx8XCJcIiE9PW58fDAhPT10LmluZGV4T2YoXCJiYWNrZ3JvdW5kXCIpfHwobFt0XT1cImluaGVyaXRcIiksYSYmXCJzZXRcImluIGEmJnZvaWQgMD09PShuPWEuc2V0KGUsbixyKSl8fCh1P2wuc2V0UHJvcGVydHkodCxuKTpsW3RdPW4pKX19LGNzczpmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLGEscz1WKHQpO3JldHVybiBRZS50ZXN0KHQpfHwodD1HZShzKSksKGE9ay5jc3NIb29rc1t0XXx8ay5jc3NIb29rc1tzXSkmJlwiZ2V0XCJpbiBhJiYoaT1hLmdldChlLCEwLG4pKSx2b2lkIDA9PT1pJiYoaT1fZShlLHQscikpLFwibm9ybWFsXCI9PT1pJiZ0IGluIEtlJiYoaT1LZVt0XSksXCJcIj09PW58fG4/KG89cGFyc2VGbG9hdChpKSwhMD09PW58fGlzRmluaXRlKG8pP298fDA6aSk6aX19KSxrLmVhY2goW1wiaGVpZ2h0XCIsXCJ3aWR0aFwiXSxmdW5jdGlvbihlLHUpe2suY3NzSG9va3NbdV09e2dldDpmdW5jdGlvbihlLHQsbil7aWYodClyZXR1cm4hWWUudGVzdChrLmNzcyhlLFwiZGlzcGxheVwiKSl8fGUuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgmJmUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg/dHQoZSx1LG4pOnVlKGUsSmUsZnVuY3Rpb24oKXtyZXR1cm4gdHQoZSx1LG4pfSl9LHNldDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT1GZShlKSxvPSF5LnNjcm9sbGJveFNpemUoKSYmXCJhYnNvbHV0ZVwiPT09aS5wb3NpdGlvbixhPShvfHxuKSYmXCJib3JkZXItYm94XCI9PT1rLmNzcyhlLFwiYm94U2l6aW5nXCIsITEsaSkscz1uP2V0KGUsdSxuLGEsaSk6MDtyZXR1cm4gYSYmbyYmKHMtPU1hdGguY2VpbChlW1wib2Zmc2V0XCIrdVswXS50b1VwcGVyQ2FzZSgpK3Uuc2xpY2UoMSldLXBhcnNlRmxvYXQoaVt1XSktZXQoZSx1LFwiYm9yZGVyXCIsITEsaSktLjUpKSxzJiYocj1uZS5leGVjKHQpKSYmXCJweFwiIT09KHJbM118fFwicHhcIikmJihlLnN0eWxlW3VdPXQsdD1rLmNzcyhlLHUpKSxaZSgwLHQscyl9fX0pLGsuY3NzSG9va3MubWFyZ2luTGVmdD16ZSh5LnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihlLHQpe2lmKHQpcmV0dXJuKHBhcnNlRmxvYXQoX2UoZSxcIm1hcmdpbkxlZnRcIikpfHxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtdWUoZSx7bWFyZ2luTGVmdDowfSxmdW5jdGlvbigpe3JldHVybiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnR9KSkrXCJweFwifSksay5lYWNoKHttYXJnaW46XCJcIixwYWRkaW5nOlwiXCIsYm9yZGVyOlwiV2lkdGhcIn0sZnVuY3Rpb24oaSxvKXtrLmNzc0hvb2tzW2krb109e2V4cGFuZDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPXt9LHI9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZS5zcGxpdChcIiBcIik6W2VdO3Q8NDt0KyspbltpK3JlW3RdK29dPXJbdF18fHJbdC0yXXx8clswXTtyZXR1cm4gbn19LFwibWFyZ2luXCIhPT1pJiYoay5jc3NIb29rc1tpK29dLnNldD1aZSl9KSxrLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIF8odGhpcyxmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvPXt9LGE9MDtpZihBcnJheS5pc0FycmF5KHQpKXtmb3Iocj1GZShlKSxpPXQubGVuZ3RoO2E8aTthKyspb1t0W2FdXT1rLmNzcyhlLHRbYV0sITEscik7cmV0dXJuIG99cmV0dXJuIHZvaWQgMCE9PW4/ay5zdHlsZShlLHQsbik6ay5jc3MoZSx0KX0sZSx0LDE8YXJndW1lbnRzLmxlbmd0aCl9fSksKChrLlR3ZWVuPW50KS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOm50LGluaXQ6ZnVuY3Rpb24oZSx0LG4scixpLG8pe3RoaXMuZWxlbT1lLHRoaXMucHJvcD1uLHRoaXMuZWFzaW5nPWl8fGsuZWFzaW5nLl9kZWZhdWx0LHRoaXMub3B0aW9ucz10LHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1yLHRoaXMudW5pdD1vfHwoay5jc3NOdW1iZXJbbl0/XCJcIjpcInB4XCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgZT1udC5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gZSYmZS5nZXQ/ZS5nZXQodGhpcyk6bnQucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49bnQucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz10PWsuZWFzaW5nW3RoaXMuZWFzaW5nXShlLHRoaXMub3B0aW9ucy5kdXJhdGlvbiplLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPXQ9ZSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqdCt0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxuJiZuLnNldD9uLnNldCh0aGlzKTpudC5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSkuaW5pdC5wcm90b3R5cGU9bnQucHJvdG90eXBlLChudC5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIDEhPT1lLmVsZW0ubm9kZVR5cGV8fG51bGwhPWUuZWxlbVtlLnByb3BdJiZudWxsPT1lLmVsZW0uc3R5bGVbZS5wcm9wXT9lLmVsZW1bZS5wcm9wXToodD1rLmNzcyhlLmVsZW0sZS5wcm9wLFwiXCIpKSYmXCJhdXRvXCIhPT10P3Q6MH0sc2V0OmZ1bmN0aW9uKGUpe2suZnguc3RlcFtlLnByb3BdP2suZnguc3RlcFtlLnByb3BdKGUpOjEhPT1lLmVsZW0ubm9kZVR5cGV8fCFrLmNzc0hvb2tzW2UucHJvcF0mJm51bGw9PWUuZWxlbS5zdHlsZVtHZShlLnByb3ApXT9lLmVsZW1bZS5wcm9wXT1lLm5vdzprLnN0eWxlKGUuZWxlbSxlLnByb3AsZS5ub3crZS51bml0KX19fSkuc2Nyb2xsVG9wPW50LnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oZSl7ZS5lbGVtLm5vZGVUeXBlJiZlLmVsZW0ucGFyZW50Tm9kZSYmKGUuZWxlbVtlLnByb3BdPWUubm93KX19LGsuZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn0sX2RlZmF1bHQ6XCJzd2luZ1wifSxrLmZ4PW50LnByb3RvdHlwZS5pbml0LGsuZnguc3RlcD17fTt2YXIgcnQsaXQsb3QsYXQsc3Q9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLHV0PS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gbHQoKXtpdCYmKCExPT09RS5oaWRkZW4mJkMucmVxdWVzdEFuaW1hdGlvbkZyYW1lP0MucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGx0KTpDLnNldFRpbWVvdXQobHQsay5meC5pbnRlcnZhbCksay5meC50aWNrKCkpfWZ1bmN0aW9uIGN0KCl7cmV0dXJuIEMuc2V0VGltZW91dChmdW5jdGlvbigpe3J0PXZvaWQgMH0pLHJ0PURhdGUubm93KCl9ZnVuY3Rpb24gZnQoZSx0KXt2YXIgbixyPTAsaT17aGVpZ2h0OmV9O2Zvcih0PXQ/MTowO3I8NDtyKz0yLXQpaVtcIm1hcmdpblwiKyhuPXJlW3JdKV09aVtcInBhZGRpbmdcIituXT1lO3JldHVybiB0JiYoaS5vcGFjaXR5PWkud2lkdGg9ZSksaX1mdW5jdGlvbiBwdChlLHQsbil7Zm9yKHZhciByLGk9KGR0LnR3ZWVuZXJzW3RdfHxbXSkuY29uY2F0KGR0LnR3ZWVuZXJzW1wiKlwiXSksbz0wLGE9aS5sZW5ndGg7bzxhO28rKylpZihyPWlbb10uY2FsbChuLHQsZSkpcmV0dXJuIHJ9ZnVuY3Rpb24gZHQobyxlLHQpe3ZhciBuLGEscj0wLGk9ZHQucHJlZmlsdGVycy5sZW5ndGgscz1rLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIHUuZWxlbX0pLHU9ZnVuY3Rpb24oKXtpZihhKXJldHVybiExO2Zvcih2YXIgZT1ydHx8Y3QoKSx0PU1hdGgubWF4KDAsbC5zdGFydFRpbWUrbC5kdXJhdGlvbi1lKSxuPTEtKHQvbC5kdXJhdGlvbnx8MCkscj0wLGk9bC50d2VlbnMubGVuZ3RoO3I8aTtyKyspbC50d2VlbnNbcl0ucnVuKG4pO3JldHVybiBzLm5vdGlmeVdpdGgobyxbbCxuLHRdKSxuPDEmJmk/dDooaXx8cy5ub3RpZnlXaXRoKG8sW2wsMSwwXSkscy5yZXNvbHZlV2l0aChvLFtsXSksITEpfSxsPXMucHJvbWlzZSh7ZWxlbTpvLHByb3BzOmsuZXh0ZW5kKHt9LGUpLG9wdHM6ay5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e30sZWFzaW5nOmsuZWFzaW5nLl9kZWZhdWx0fSx0KSxvcmlnaW5hbFByb3BlcnRpZXM6ZSxvcmlnaW5hbE9wdGlvbnM6dCxzdGFydFRpbWU6cnR8fGN0KCksZHVyYXRpb246dC5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oZSx0KXt2YXIgbj1rLlR3ZWVuKG8sbC5vcHRzLGUsdCxsLm9wdHMuc3BlY2lhbEVhc2luZ1tlXXx8bC5vcHRzLmVhc2luZyk7cmV0dXJuIGwudHdlZW5zLnB1c2gobiksbn0sc3RvcDpmdW5jdGlvbihlKXt2YXIgdD0wLG49ZT9sLnR3ZWVucy5sZW5ndGg6MDtpZihhKXJldHVybiB0aGlzO2ZvcihhPSEwO3Q8bjt0KyspbC50d2VlbnNbdF0ucnVuKDEpO3JldHVybiBlPyhzLm5vdGlmeVdpdGgobyxbbCwxLDBdKSxzLnJlc29sdmVXaXRoKG8sW2wsZV0pKTpzLnJlamVjdFdpdGgobyxbbCxlXSksdGhpc319KSxjPWwucHJvcHM7Zm9yKCFmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxvLGE7Zm9yKG4gaW4gZSlpZihpPXRbcj1WKG4pXSxvPWVbbl0sQXJyYXkuaXNBcnJheShvKSYmKGk9b1sxXSxvPWVbbl09b1swXSksbiE9PXImJihlW3JdPW8sZGVsZXRlIGVbbl0pLChhPWsuY3NzSG9va3Nbcl0pJiZcImV4cGFuZFwiaW4gYSlmb3IobiBpbiBvPWEuZXhwYW5kKG8pLGRlbGV0ZSBlW3JdLG8pbiBpbiBlfHwoZVtuXT1vW25dLHRbbl09aSk7ZWxzZSB0W3JdPWl9KGMsbC5vcHRzLnNwZWNpYWxFYXNpbmcpO3I8aTtyKyspaWYobj1kdC5wcmVmaWx0ZXJzW3JdLmNhbGwobCxvLGMsbC5vcHRzKSlyZXR1cm4gbShuLnN0b3ApJiYoay5fcXVldWVIb29rcyhsLmVsZW0sbC5vcHRzLnF1ZXVlKS5zdG9wPW4uc3RvcC5iaW5kKG4pKSxuO3JldHVybiBrLm1hcChjLHB0LGwpLG0obC5vcHRzLnN0YXJ0KSYmbC5vcHRzLnN0YXJ0LmNhbGwobyxsKSxsLnByb2dyZXNzKGwub3B0cy5wcm9ncmVzcykuZG9uZShsLm9wdHMuZG9uZSxsLm9wdHMuY29tcGxldGUpLmZhaWwobC5vcHRzLmZhaWwpLmFsd2F5cyhsLm9wdHMuYWx3YXlzKSxrLmZ4LnRpbWVyKGsuZXh0ZW5kKHUse2VsZW06byxhbmltOmwscXVldWU6bC5vcHRzLnF1ZXVlfSkpLGx9ay5BbmltYXRpb249ay5leHRlbmQoZHQse3R3ZWVuZXJzOntcIipcIjpbZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmNyZWF0ZVR3ZWVuKGUsdCk7cmV0dXJuIGxlKG4uZWxlbSxlLG5lLmV4ZWModCksbiksbn1dfSx0d2VlbmVyOmZ1bmN0aW9uKGUsdCl7bShlKT8odD1lLGU9W1wiKlwiXSk6ZT1lLm1hdGNoKFIpO2Zvcih2YXIgbixyPTAsaT1lLmxlbmd0aDtyPGk7cisrKW49ZVtyXSxkdC50d2VlbmVyc1tuXT1kdC50d2VlbmVyc1tuXXx8W10sZHQudHdlZW5lcnNbbl0udW5zaGlmdCh0KX0scHJlZmlsdGVyczpbZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsLGMsZj1cIndpZHRoXCJpbiB0fHxcImhlaWdodFwiaW4gdCxwPXRoaXMsZD17fSxoPWUuc3R5bGUsZz1lLm5vZGVUeXBlJiZzZShlKSx2PVEuZ2V0KGUsXCJmeHNob3dcIik7Zm9yKHIgaW4gbi5xdWV1ZXx8KG51bGw9PShhPWsuX3F1ZXVlSG9va3MoZSxcImZ4XCIpKS51bnF1ZXVlZCYmKGEudW5xdWV1ZWQ9MCxzPWEuZW1wdHkuZmlyZSxhLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXthLnVucXVldWVkfHxzKCl9KSxhLnVucXVldWVkKysscC5hbHdheXMoZnVuY3Rpb24oKXtwLmFsd2F5cyhmdW5jdGlvbigpe2EudW5xdWV1ZWQtLSxrLnF1ZXVlKGUsXCJmeFwiKS5sZW5ndGh8fGEuZW1wdHkuZmlyZSgpfSl9KSksdClpZihpPXRbcl0sc3QudGVzdChpKSl7aWYoZGVsZXRlIHRbcl0sbz1vfHxcInRvZ2dsZVwiPT09aSxpPT09KGc/XCJoaWRlXCI6XCJzaG93XCIpKXtpZihcInNob3dcIiE9PWl8fCF2fHx2b2lkIDA9PT12W3JdKWNvbnRpbnVlO2c9ITB9ZFtyXT12JiZ2W3JdfHxrLnN0eWxlKGUscil9aWYoKHU9IWsuaXNFbXB0eU9iamVjdCh0KSl8fCFrLmlzRW1wdHlPYmplY3QoZCkpZm9yKHIgaW4gZiYmMT09PWUubm9kZVR5cGUmJihuLm92ZXJmbG93PVtoLm92ZXJmbG93LGgub3ZlcmZsb3dYLGgub3ZlcmZsb3dZXSxudWxsPT0obD12JiZ2LmRpc3BsYXkpJiYobD1RLmdldChlLFwiZGlzcGxheVwiKSksXCJub25lXCI9PT0oYz1rLmNzcyhlLFwiZGlzcGxheVwiKSkmJihsP2M9bDooZmUoW2VdLCEwKSxsPWUuc3R5bGUuZGlzcGxheXx8bCxjPWsuY3NzKGUsXCJkaXNwbGF5XCIpLGZlKFtlXSkpKSwoXCJpbmxpbmVcIj09PWN8fFwiaW5saW5lLWJsb2NrXCI9PT1jJiZudWxsIT1sKSYmXCJub25lXCI9PT1rLmNzcyhlLFwiZmxvYXRcIikmJih1fHwocC5kb25lKGZ1bmN0aW9uKCl7aC5kaXNwbGF5PWx9KSxudWxsPT1sJiYoYz1oLmRpc3BsYXksbD1cIm5vbmVcIj09PWM/XCJcIjpjKSksaC5kaXNwbGF5PVwiaW5saW5lLWJsb2NrXCIpKSxuLm92ZXJmbG93JiYoaC5vdmVyZmxvdz1cImhpZGRlblwiLHAuYWx3YXlzKGZ1bmN0aW9uKCl7aC5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLGgub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0saC5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKSx1PSExLGQpdXx8KHY/XCJoaWRkZW5cImluIHYmJihnPXYuaGlkZGVuKTp2PVEuYWNjZXNzKGUsXCJmeHNob3dcIix7ZGlzcGxheTpsfSksbyYmKHYuaGlkZGVuPSFnKSxnJiZmZShbZV0sITApLHAuZG9uZShmdW5jdGlvbigpe2ZvcihyIGluIGd8fGZlKFtlXSksUS5yZW1vdmUoZSxcImZ4c2hvd1wiKSxkKWsuc3R5bGUoZSxyLGRbcl0pfSkpLHU9cHQoZz92W3JdOjAscixwKSxyIGluIHZ8fCh2W3JdPXUuc3RhcnQsZyYmKHUuZW5kPXUuc3RhcnQsdS5zdGFydD0wKSl9XSxwcmVmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt0P2R0LnByZWZpbHRlcnMudW5zaGlmdChlKTpkdC5wcmVmaWx0ZXJzLnB1c2goZSl9fSksay5zcGVlZD1mdW5jdGlvbihlLHQsbil7dmFyIHI9ZSYmXCJvYmplY3RcIj09dHlwZW9mIGU/ay5leHRlbmQoe30sZSk6e2NvbXBsZXRlOm58fCFuJiZ0fHxtKGUpJiZlLGR1cmF0aW9uOmUsZWFzaW5nOm4mJnR8fHQmJiFtKHQpJiZ0fTtyZXR1cm4gay5meC5vZmY/ci5kdXJhdGlvbj0wOlwibnVtYmVyXCIhPXR5cGVvZiByLmR1cmF0aW9uJiYoci5kdXJhdGlvbiBpbiBrLmZ4LnNwZWVkcz9yLmR1cmF0aW9uPWsuZnguc3BlZWRzW3IuZHVyYXRpb25dOnIuZHVyYXRpb249ay5meC5zcGVlZHMuX2RlZmF1bHQpLG51bGwhPXIucXVldWUmJiEwIT09ci5xdWV1ZXx8KHIucXVldWU9XCJmeFwiKSxyLm9sZD1yLmNvbXBsZXRlLHIuY29tcGxldGU9ZnVuY3Rpb24oKXttKHIub2xkKSYmci5vbGQuY2FsbCh0aGlzKSxyLnF1ZXVlJiZrLmRlcXVldWUodGhpcyxyLnF1ZXVlKX0scn0say5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5maWx0ZXIoc2UpLmNzcyhcIm9wYWNpdHlcIiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTp0fSxlLG4scil9LGFuaW1hdGU6ZnVuY3Rpb24odCxlLG4scil7dmFyIGk9ay5pc0VtcHR5T2JqZWN0KHQpLG89ay5zcGVlZChlLG4sciksYT1mdW5jdGlvbigpe3ZhciBlPWR0KHRoaXMsay5leHRlbmQoe30sdCksbyk7KGl8fFEuZ2V0KHRoaXMsXCJmaW5pc2hcIikpJiZlLnN0b3AoITApfTtyZXR1cm4gYS5maW5pc2g9YSxpfHwhMT09PW8ucXVldWU/dGhpcy5lYWNoKGEpOnRoaXMucXVldWUoby5xdWV1ZSxhKX0sc3RvcDpmdW5jdGlvbihpLGUsbyl7dmFyIGE9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdG9wO2RlbGV0ZSBlLnN0b3AsdChvKX07cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGkmJihvPWUsZT1pLGk9dm9pZCAwKSxlJiYhMSE9PWkmJnRoaXMucXVldWUoaXx8XCJmeFwiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT0hMCx0PW51bGwhPWkmJmkrXCJxdWV1ZUhvb2tzXCIsbj1rLnRpbWVycyxyPVEuZ2V0KHRoaXMpO2lmKHQpclt0XSYmclt0XS5zdG9wJiZhKHJbdF0pO2Vsc2UgZm9yKHQgaW4gcilyW3RdJiZyW3RdLnN0b3AmJnV0LnRlc3QodCkmJmEoclt0XSk7Zm9yKHQ9bi5sZW5ndGg7dC0tOyluW3RdLmVsZW0hPT10aGlzfHxudWxsIT1pJiZuW3RdLnF1ZXVlIT09aXx8KG5bdF0uYW5pbS5zdG9wKG8pLGU9ITEsbi5zcGxpY2UodCwxKSk7IWUmJm98fGsuZGVxdWV1ZSh0aGlzLGkpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4hMSE9PWEmJihhPWF8fFwiZnhcIiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGUsdD1RLmdldCh0aGlzKSxuPXRbYStcInF1ZXVlXCJdLHI9dFthK1wicXVldWVIb29rc1wiXSxpPWsudGltZXJzLG89bj9uLmxlbmd0aDowO2Zvcih0LmZpbmlzaD0hMCxrLnF1ZXVlKHRoaXMsYSxbXSksciYmci5zdG9wJiZyLnN0b3AuY2FsbCh0aGlzLCEwKSxlPWkubGVuZ3RoO2UtLTspaVtlXS5lbGVtPT09dGhpcyYmaVtlXS5xdWV1ZT09PWEmJihpW2VdLmFuaW0uc3RvcCghMCksaS5zcGxpY2UoZSwxKSk7Zm9yKGU9MDtlPG87ZSsrKW5bZV0mJm5bZV0uZmluaXNoJiZuW2VdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSB0LmZpbmlzaH0pfX0pLGsuZWFjaChbXCJ0b2dnbGVcIixcInNob3dcIixcImhpZGVcIl0sZnVuY3Rpb24oZSxyKXt2YXIgaT1rLmZuW3JdO2suZm5bcl09ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT1lfHxcImJvb2xlYW5cIj09dHlwZW9mIGU/aS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKGZ0KHIsITApLGUsdCxuKX19KSxrLmVhY2goe3NsaWRlRG93bjpmdChcInNob3dcIiksc2xpZGVVcDpmdChcImhpZGVcIiksc2xpZGVUb2dnbGU6ZnQoXCJ0b2dnbGVcIiksZmFkZUluOntvcGFjaXR5Olwic2hvd1wifSxmYWRlT3V0OntvcGFjaXR5OlwiaGlkZVwifSxmYWRlVG9nZ2xlOntvcGFjaXR5OlwidG9nZ2xlXCJ9fSxmdW5jdGlvbihlLHIpe2suZm5bZV09ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLmFuaW1hdGUocixlLHQsbil9fSksay50aW1lcnM9W10say5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGUsdD0wLG49ay50aW1lcnM7Zm9yKHJ0PURhdGUubm93KCk7dDxuLmxlbmd0aDt0KyspKGU9blt0XSkoKXx8blt0XSE9PWV8fG4uc3BsaWNlKHQtLSwxKTtuLmxlbmd0aHx8ay5meC5zdG9wKCkscnQ9dm9pZCAwfSxrLmZ4LnRpbWVyPWZ1bmN0aW9uKGUpe2sudGltZXJzLnB1c2goZSksay5meC5zdGFydCgpfSxrLmZ4LmludGVydmFsPTEzLGsuZnguc3RhcnQ9ZnVuY3Rpb24oKXtpdHx8KGl0PSEwLGx0KCkpfSxrLmZ4LnN0b3A9ZnVuY3Rpb24oKXtpdD1udWxsfSxrLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxrLmZuLmRlbGF5PWZ1bmN0aW9uKHIsZSl7cmV0dXJuIHI9ay5meCYmay5meC5zcGVlZHNbcl18fHIsZT1lfHxcImZ4XCIsdGhpcy5xdWV1ZShlLGZ1bmN0aW9uKGUsdCl7dmFyIG49Qy5zZXRUaW1lb3V0KGUscik7dC5zdG9wPWZ1bmN0aW9uKCl7Qy5jbGVhclRpbWVvdXQobil9fSl9LG90PUUuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLGF0PUUuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKS5hcHBlbmRDaGlsZChFLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpLG90LnR5cGU9XCJjaGVja2JveFwiLHkuY2hlY2tPbj1cIlwiIT09b3QudmFsdWUseS5vcHRTZWxlY3RlZD1hdC5zZWxlY3RlZCwob3Q9RS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIikpLnZhbHVlPVwidFwiLG90LnR5cGU9XCJyYWRpb1wiLHkucmFkaW9WYWx1ZT1cInRcIj09PW90LnZhbHVlO3ZhciBodCxndD1rLmV4cHIuYXR0ckhhbmRsZTtrLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihlLHQpe3JldHVybiBfKHRoaXMsay5hdHRyLGUsdCwxPGFyZ3VtZW50cy5sZW5ndGgpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtrLnJlbW92ZUF0dHIodGhpcyxlKX0pfX0pLGsuZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89ZS5ub2RlVHlwZTtpZigzIT09byYmOCE9PW8mJjIhPT1vKXJldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiBlLmdldEF0dHJpYnV0ZT9rLnByb3AoZSx0LG4pOigxPT09byYmay5pc1hNTERvYyhlKXx8KGk9ay5hdHRySG9va3NbdC50b0xvd2VyQ2FzZSgpXXx8KGsuZXhwci5tYXRjaC5ib29sLnRlc3QodCk/aHQ6dm9pZCAwKSksdm9pZCAwIT09bj9udWxsPT09bj92b2lkIGsucmVtb3ZlQXR0cihlLHQpOmkmJlwic2V0XCJpbiBpJiZ2b2lkIDAhPT0ocj1pLnNldChlLG4sdCkpP3I6KGUuc2V0QXR0cmlidXRlKHQsbitcIlwiKSxuKTppJiZcImdldFwiaW4gaSYmbnVsbCE9PShyPWkuZ2V0KGUsdCkpP3I6bnVsbD09KHI9ay5maW5kLmF0dHIoZSx0KSk/dm9pZCAwOnIpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihlLHQpe2lmKCF5LnJhZGlvVmFsdWUmJlwicmFkaW9cIj09PXQmJkEoZSxcImlucHV0XCIpKXt2YXIgbj1lLnZhbHVlO3JldHVybiBlLnNldEF0dHJpYnV0ZShcInR5cGVcIix0KSxuJiYoZS52YWx1ZT1uKSx0fX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wLGk9dCYmdC5tYXRjaChSKTtpZihpJiYxPT09ZS5ub2RlVHlwZSl3aGlsZShuPWlbcisrXSllLnJlbW92ZUF0dHJpYnV0ZShuKX19KSxodD17c2V0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4hMT09PXQ/ay5yZW1vdmVBdHRyKGUsbik6ZS5zZXRBdHRyaWJ1dGUobixuKSxufX0say5lYWNoKGsuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXFx3Ky9nKSxmdW5jdGlvbihlLHQpe3ZhciBhPWd0W3RdfHxrLmZpbmQuYXR0cjtndFt0XT1mdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvPXQudG9Mb3dlckNhc2UoKTtyZXR1cm4gbnx8KGk9Z3Rbb10sZ3Rbb109cixyPW51bGwhPWEoZSx0LG4pP286bnVsbCxndFtvXT1pKSxyfX0pO3ZhciB2dD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLHl0PS9eKD86YXxhcmVhKSQvaTtmdW5jdGlvbiBtdChlKXtyZXR1cm4oZS5tYXRjaChSKXx8W10pLmpvaW4oXCIgXCIpfWZ1bmN0aW9uIHh0KGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSYmZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIn1mdW5jdGlvbiBidChlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lOlwic3RyaW5nXCI9PXR5cGVvZiBlJiZlLm1hdGNoKFIpfHxbXX1rLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihlLHQpe3JldHVybiBfKHRoaXMsay5wcm9wLGUsdCwxPGFyZ3VtZW50cy5sZW5ndGgpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1trLnByb3BGaXhbZV18fGVdfSl9fSksay5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz1lLm5vZGVUeXBlO2lmKDMhPT1vJiY4IT09byYmMiE9PW8pcmV0dXJuIDE9PT1vJiZrLmlzWE1MRG9jKGUpfHwodD1rLnByb3BGaXhbdF18fHQsaT1rLnByb3BIb29rc1t0XSksdm9pZCAwIT09bj9pJiZcInNldFwiaW4gaSYmdm9pZCAwIT09KHI9aS5zZXQoZSxuLHQpKT9yOmVbdF09bjppJiZcImdldFwiaW4gaSYmbnVsbCE9PShyPWkuZ2V0KGUsdCkpP3I6ZVt0XX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWsuZmluZC5hdHRyKGUsXCJ0YWJpbmRleFwiKTtyZXR1cm4gdD9wYXJzZUludCh0LDEwKTp2dC50ZXN0KGUubm9kZU5hbWUpfHx5dC50ZXN0KGUubm9kZU5hbWUpJiZlLmhyZWY/MDotMX19fSxwcm9wRml4OntcImZvclwiOlwiaHRtbEZvclwiLFwiY2xhc3NcIjpcImNsYXNzTmFtZVwifX0pLHkub3B0U2VsZWN0ZWR8fChrLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3QmJih0LnNlbGVjdGVkSW5kZXgsdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCl9fSksay5lYWNoKFtcInRhYkluZGV4XCIsXCJyZWFkT25seVwiLFwibWF4TGVuZ3RoXCIsXCJjZWxsU3BhY2luZ1wiLFwiY2VsbFBhZGRpbmdcIixcInJvd1NwYW5cIixcImNvbFNwYW5cIixcInVzZU1hcFwiLFwiZnJhbWVCb3JkZXJcIixcImNvbnRlbnRFZGl0YWJsZVwiXSxmdW5jdGlvbigpe2sucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KSxrLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24odCl7dmFyIGUsbixyLGksbyxhLHMsdT0wO2lmKG0odCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihlKXtrKHRoaXMpLmFkZENsYXNzKHQuY2FsbCh0aGlzLGUseHQodGhpcykpKX0pO2lmKChlPWJ0KHQpKS5sZW5ndGgpd2hpbGUobj10aGlzW3UrK10paWYoaT14dChuKSxyPTE9PT1uLm5vZGVUeXBlJiZcIiBcIittdChpKStcIiBcIil7YT0wO3doaWxlKG89ZVthKytdKXIuaW5kZXhPZihcIiBcIitvK1wiIFwiKTwwJiYocis9bytcIiBcIik7aSE9PShzPW10KHIpKSYmbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLHMpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbih0KXt2YXIgZSxuLHIsaSxvLGEscyx1PTA7aWYobSh0KSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe2sodGhpcykucmVtb3ZlQ2xhc3ModC5jYWxsKHRoaXMsZSx4dCh0aGlzKSkpfSk7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuYXR0cihcImNsYXNzXCIsXCJcIik7aWYoKGU9YnQodCkpLmxlbmd0aCl3aGlsZShuPXRoaXNbdSsrXSlpZihpPXh0KG4pLHI9MT09PW4ubm9kZVR5cGUmJlwiIFwiK210KGkpK1wiIFwiKXthPTA7d2hpbGUobz1lW2ErK10pd2hpbGUoLTE8ci5pbmRleE9mKFwiIFwiK28rXCIgXCIpKXI9ci5yZXBsYWNlKFwiIFwiK28rXCIgXCIsXCIgXCIpO2khPT0ocz1tdChyKSkmJm4uc2V0QXR0cmlidXRlKFwiY2xhc3NcIixzKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oaSx0KXt2YXIgbz10eXBlb2YgaSxhPVwic3RyaW5nXCI9PT1vfHxBcnJheS5pc0FycmF5KGkpO3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgdCYmYT90P3RoaXMuYWRkQ2xhc3MoaSk6dGhpcy5yZW1vdmVDbGFzcyhpKTptKGkpP3RoaXMuZWFjaChmdW5jdGlvbihlKXtrKHRoaXMpLnRvZ2dsZUNsYXNzKGkuY2FsbCh0aGlzLGUseHQodGhpcyksdCksdCl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZSx0LG4scjtpZihhKXt0PTAsbj1rKHRoaXMpLHI9YnQoaSk7d2hpbGUoZT1yW3QrK10pbi5oYXNDbGFzcyhlKT9uLnJlbW92ZUNsYXNzKGUpOm4uYWRkQ2xhc3MoZSl9ZWxzZSB2b2lkIDAhPT1pJiZcImJvb2xlYW5cIiE9PW98fCgoZT14dCh0aGlzKSkmJlEuc2V0KHRoaXMsXCJfX2NsYXNzTmFtZV9fXCIsZSksdGhpcy5zZXRBdHRyaWJ1dGUmJnRoaXMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixlfHwhMT09PWk/XCJcIjpRLmdldCh0aGlzLFwiX19jbGFzc05hbWVfX1wiKXx8XCJcIikpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj0wO3Q9XCIgXCIrZStcIiBcIjt3aGlsZShuPXRoaXNbcisrXSlpZigxPT09bi5ub2RlVHlwZSYmLTE8KFwiIFwiK210KHh0KG4pKStcIiBcIikuaW5kZXhPZih0KSlyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgd3Q9L1xcci9nO2suZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24obil7dmFyIHIsZSxpLHQ9dGhpc1swXTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT1tKG4pLHRoaXMuZWFjaChmdW5jdGlvbihlKXt2YXIgdDsxPT09dGhpcy5ub2RlVHlwZSYmKG51bGw9PSh0PWk/bi5jYWxsKHRoaXMsZSxrKHRoaXMpLnZhbCgpKTpuKT90PVwiXCI6XCJudW1iZXJcIj09dHlwZW9mIHQ/dCs9XCJcIjpBcnJheS5pc0FycmF5KHQpJiYodD1rLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP1wiXCI6ZStcIlwifSkpLChyPWsudmFsSG9va3NbdGhpcy50eXBlXXx8ay52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSYmXCJzZXRcImluIHImJnZvaWQgMCE9PXIuc2V0KHRoaXMsdCxcInZhbHVlXCIpfHwodGhpcy52YWx1ZT10KSl9KSk6dD8ocj1rLnZhbEhvb2tzW3QudHlwZV18fGsudmFsSG9va3NbdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkmJlwiZ2V0XCJpbiByJiZ2b2lkIDAhPT0oZT1yLmdldCh0LFwidmFsdWVcIikpP2U6XCJzdHJpbmdcIj09dHlwZW9mKGU9dC52YWx1ZSk/ZS5yZXBsYWNlKHd0LFwiXCIpOm51bGw9PWU/XCJcIjplOnZvaWQgMH19KSxrLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWsuZmluZC5hdHRyKGUsXCJ2YWx1ZVwiKTtyZXR1cm4gbnVsbCE9dD90Om10KGsudGV4dChlKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaT1lLm9wdGlvbnMsbz1lLnNlbGVjdGVkSW5kZXgsYT1cInNlbGVjdC1vbmVcIj09PWUudHlwZSxzPWE/bnVsbDpbXSx1PWE/bysxOmkubGVuZ3RoO2ZvcihyPW88MD91OmE/bzowO3I8dTtyKyspaWYoKChuPWlbcl0pLnNlbGVjdGVkfHxyPT09bykmJiFuLmRpc2FibGVkJiYoIW4ucGFyZW50Tm9kZS5kaXNhYmxlZHx8IUEobi5wYXJlbnROb2RlLFwib3B0Z3JvdXBcIikpKXtpZih0PWsobikudmFsKCksYSlyZXR1cm4gdDtzLnB1c2godCl9cmV0dXJuIHN9LHNldDpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT1lLm9wdGlvbnMsbz1rLm1ha2VBcnJheSh0KSxhPWkubGVuZ3RoO3doaWxlKGEtLSkoKHI9aVthXSkuc2VsZWN0ZWQ9LTE8ay5pbkFycmF5KGsudmFsSG9va3Mub3B0aW9uLmdldChyKSxvKSkmJihuPSEwKTtyZXR1cm4gbnx8KGUuc2VsZWN0ZWRJbmRleD0tMSksb319fX0pLGsuZWFjaChbXCJyYWRpb1wiLFwiY2hlY2tib3hcIl0sZnVuY3Rpb24oKXtrLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oZSx0KXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiBlLmNoZWNrZWQ9LTE8ay5pbkFycmF5KGsoZSkudmFsKCksdCl9fSx5LmNoZWNrT258fChrLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09PWUuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik/XCJvblwiOmUudmFsdWV9KX0pLHkuZm9jdXNpbj1cIm9uZm9jdXNpblwiaW4gQzt2YXIgVHQ9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLEN0PWZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCl9O2suZXh0ZW5kKGsuZXZlbnQse3RyaWdnZXI6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHMsdSxsLGMsZixwPVtufHxFXSxkPXYuY2FsbChlLFwidHlwZVwiKT9lLnR5cGU6ZSxoPXYuY2FsbChlLFwibmFtZXNwYWNlXCIpP2UubmFtZXNwYWNlLnNwbGl0KFwiLlwiKTpbXTtpZihvPWY9YT1uPW58fEUsMyE9PW4ubm9kZVR5cGUmJjghPT1uLm5vZGVUeXBlJiYhVHQudGVzdChkK2suZXZlbnQudHJpZ2dlcmVkKSYmKC0xPGQuaW5kZXhPZihcIi5cIikmJihkPShoPWQuc3BsaXQoXCIuXCIpKS5zaGlmdCgpLGguc29ydCgpKSx1PWQuaW5kZXhPZihcIjpcIik8MCYmXCJvblwiK2QsKGU9ZVtrLmV4cGFuZG9dP2U6bmV3IGsuRXZlbnQoZCxcIm9iamVjdFwiPT10eXBlb2YgZSYmZSkpLmlzVHJpZ2dlcj1yPzI6MyxlLm5hbWVzcGFjZT1oLmpvaW4oXCIuXCIpLGUucm5hbWVzcGFjZT1lLm5hbWVzcGFjZT9uZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIraC5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikrXCIoXFxcXC58JClcIik6bnVsbCxlLnJlc3VsdD12b2lkIDAsZS50YXJnZXR8fChlLnRhcmdldD1uKSx0PW51bGw9PXQ/W2VdOmsubWFrZUFycmF5KHQsW2VdKSxjPWsuZXZlbnQuc3BlY2lhbFtkXXx8e30scnx8IWMudHJpZ2dlcnx8ITEhPT1jLnRyaWdnZXIuYXBwbHkobix0KSkpe2lmKCFyJiYhYy5ub0J1YmJsZSYmIXgobikpe2ZvcihzPWMuZGVsZWdhdGVUeXBlfHxkLFR0LnRlc3QocytkKXx8KG89by5wYXJlbnROb2RlKTtvO289by5wYXJlbnROb2RlKXAucHVzaChvKSxhPW87YT09PShuLm93bmVyRG9jdW1lbnR8fEUpJiZwLnB1c2goYS5kZWZhdWx0Vmlld3x8YS5wYXJlbnRXaW5kb3d8fEMpfWk9MDt3aGlsZSgobz1wW2krK10pJiYhZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWY9byxlLnR5cGU9MTxpP3M6Yy5iaW5kVHlwZXx8ZCwobD0oUS5nZXQobyxcImV2ZW50c1wiKXx8e30pW2UudHlwZV0mJlEuZ2V0KG8sXCJoYW5kbGVcIikpJiZsLmFwcGx5KG8sdCksKGw9dSYmb1t1XSkmJmwuYXBwbHkmJkcobykmJihlLnJlc3VsdD1sLmFwcGx5KG8sdCksITE9PT1lLnJlc3VsdCYmZS5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gZS50eXBlPWQscnx8ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8Yy5fZGVmYXVsdCYmITEhPT1jLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksdCl8fCFHKG4pfHx1JiZtKG5bZF0pJiYheChuKSYmKChhPW5bdV0pJiYoblt1XT1udWxsKSxrLmV2ZW50LnRyaWdnZXJlZD1kLGUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSYmZi5hZGRFdmVudExpc3RlbmVyKGQsQ3QpLG5bZF0oKSxlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkmJmYucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLEN0KSxrLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsYSYmKG5bdV09YSkpLGUucmVzdWx0fX0sc2ltdWxhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWsuZXh0ZW5kKG5ldyBrLkV2ZW50LG4se3R5cGU6ZSxpc1NpbXVsYXRlZDohMH0pO2suZXZlbnQudHJpZ2dlcihyLG51bGwsdCl9fSksay5mbi5leHRlbmQoe3RyaWdnZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ay5ldmVudC50cmlnZ2VyKGUsdCx0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXNbMF07aWYobilyZXR1cm4gay5ldmVudC50cmlnZ2VyKGUsdCxuLCEwKX19KSx5LmZvY3VzaW58fGsuZWFjaCh7Zm9jdXM6XCJmb2N1c2luXCIsYmx1cjpcImZvY3Vzb3V0XCJ9LGZ1bmN0aW9uKG4scil7dmFyIGk9ZnVuY3Rpb24oZSl7ay5ldmVudC5zaW11bGF0ZShyLGUudGFyZ2V0LGsuZXZlbnQuZml4KGUpKX07ay5ldmVudC5zcGVjaWFsW3JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyx0PVEuYWNjZXNzKGUscik7dHx8ZS5hZGRFdmVudExpc3RlbmVyKG4saSwhMCksUS5hY2Nlc3MoZSxyLCh0fHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsdD1RLmFjY2VzcyhlLHIpLTE7dD9RLmFjY2VzcyhlLHIsdCk6KGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihuLGksITApLFEucmVtb3ZlKGUscikpfX19KTt2YXIgRXQ9Qy5sb2NhdGlvbixrdD1EYXRlLm5vdygpLFN0PS9cXD8vO2sucGFyc2VYTUw9ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoIWV8fFwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiBudWxsO3RyeXt0PShuZXcgQy5ET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhlLFwidGV4dC94bWxcIil9Y2F0Y2goZSl7dD12b2lkIDB9cmV0dXJuIHQmJiF0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyc2VyZXJyb3JcIikubGVuZ3RofHxrLmVycm9yKFwiSW52YWxpZCBYTUw6IFwiK2UpLHR9O3ZhciBOdD0vXFxbXFxdJC8sQXQ9L1xccj9cXG4vZyxEdD0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksanQ9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIHF0KG4sZSxyLGkpe3ZhciB0O2lmKEFycmF5LmlzQXJyYXkoZSkpay5lYWNoKGUsZnVuY3Rpb24oZSx0KXtyfHxOdC50ZXN0KG4pP2kobix0KTpxdChuK1wiW1wiKyhcIm9iamVjdFwiPT10eXBlb2YgdCYmbnVsbCE9dD9lOlwiXCIpK1wiXVwiLHQscixpKX0pO2Vsc2UgaWYocnx8XCJvYmplY3RcIiE9PXcoZSkpaShuLGUpO2Vsc2UgZm9yKHQgaW4gZSlxdChuK1wiW1wiK3QrXCJdXCIsZVt0XSxyLGkpfWsucGFyYW09ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj1tKHQpP3QoKTp0O3Jbci5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChlKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQobnVsbD09bj9cIlwiOm4pfTtpZihudWxsPT1lKXJldHVyblwiXCI7aWYoQXJyYXkuaXNBcnJheShlKXx8ZS5qcXVlcnkmJiFrLmlzUGxhaW5PYmplY3QoZSkpay5lYWNoKGUsZnVuY3Rpb24oKXtpKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKG4gaW4gZSlxdChuLGVbbl0sdCxpKTtyZXR1cm4gci5qb2luKFwiJlwiKX0say5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBrLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGU9ay5wcm9wKHRoaXMsXCJlbGVtZW50c1wiKTtyZXR1cm4gZT9rLm1ha2VBcnJheShlKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFrKHRoaXMpLmlzKFwiOmRpc2FibGVkXCIpJiZqdC50ZXN0KHRoaXMubm9kZU5hbWUpJiYhRHQudGVzdChlKSYmKHRoaXMuY2hlY2tlZHx8IXBlLnRlc3QoZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49ayh0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09bj9udWxsOkFycmF5LmlzQXJyYXkobik/ay5tYXAobixmdW5jdGlvbihlKXtyZXR1cm57bmFtZTp0Lm5hbWUsdmFsdWU6ZS5yZXBsYWNlKEF0LFwiXFxyXFxuXCIpfX0pOntuYW1lOnQubmFtZSx2YWx1ZTpuLnJlcGxhY2UoQXQsXCJcXHJcXG5cIil9fSkuZ2V0KCl9fSk7dmFyIEx0PS8lMjAvZyxIdD0vIy4qJC8sT3Q9LyhbPyZdKV89W14mXSovLFB0PS9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvZ20sUnQ9L14oPzpHRVR8SEVBRCkkLyxNdD0vXlxcL1xcLy8sSXQ9e30sV3Q9e30sJHQ9XCIqL1wiLmNvbmNhdChcIipcIiksRnQ9RS5jcmVhdGVFbGVtZW50KFwiYVwiKTtmdW5jdGlvbiBCdChvKXtyZXR1cm4gZnVuY3Rpb24oZSx0KXtcInN0cmluZ1wiIT10eXBlb2YgZSYmKHQ9ZSxlPVwiKlwiKTt2YXIgbixyPTAsaT1lLnRvTG93ZXJDYXNlKCkubWF0Y2goUil8fFtdO2lmKG0odCkpd2hpbGUobj1pW3IrK10pXCIrXCI9PT1uWzBdPyhuPW4uc2xpY2UoMSl8fFwiKlwiLChvW25dPW9bbl18fFtdKS51bnNoaWZ0KHQpKToob1tuXT1vW25dfHxbXSkucHVzaCh0KX19ZnVuY3Rpb24gX3QodCxpLG8sYSl7dmFyIHM9e30sdT10PT09V3Q7ZnVuY3Rpb24gbChlKXt2YXIgcjtyZXR1cm4gc1tlXT0hMCxrLmVhY2godFtlXXx8W10sZnVuY3Rpb24oZSx0KXt2YXIgbj10KGksbyxhKTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2Ygbnx8dXx8c1tuXT91PyEocj1uKTp2b2lkIDA6KGkuZGF0YVR5cGVzLnVuc2hpZnQobiksbChuKSwhMSl9KSxyfXJldHVybiBsKGkuZGF0YVR5cGVzWzBdKXx8IXNbXCIqXCJdJiZsKFwiKlwiKX1mdW5jdGlvbiB6dChlLHQpe3ZhciBuLHIsaT1rLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKG4gaW4gdCl2b2lkIDAhPT10W25dJiYoKGlbbl0/ZTpyfHwocj17fSkpW25dPXRbbl0pO3JldHVybiByJiZrLmV4dGVuZCghMCxlLHIpLGV9RnQuaHJlZj1FdC5ocmVmLGsuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpFdC5ocmVmLHR5cGU6XCJHRVRcIixpc0xvY2FsOi9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLnRlc3QoRXQucHJvdG9jb2wpLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLGFjY2VwdHM6e1wiKlwiOiR0LHRleHQ6XCJ0ZXh0L3BsYWluXCIsaHRtbDpcInRleHQvaHRtbFwiLHhtbDpcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixqc29uOlwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJ9LGNvbnRlbnRzOnt4bWw6L1xcYnhtbFxcYi8saHRtbDovXFxiaHRtbC8sanNvbjovXFxianNvblxcYi99LHJlc3BvbnNlRmllbGRzOnt4bWw6XCJyZXNwb25zZVhNTFwiLHRleHQ6XCJyZXNwb25zZVRleHRcIixqc29uOlwicmVzcG9uc2VKU09OXCJ9LGNvbnZlcnRlcnM6e1wiKiB0ZXh0XCI6U3RyaW5nLFwidGV4dCBodG1sXCI6ITAsXCJ0ZXh0IGpzb25cIjpKU09OLnBhcnNlLFwidGV4dCB4bWxcIjprLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD96dCh6dChlLGsuYWpheFNldHRpbmdzKSx0KTp6dChrLmFqYXhTZXR0aW5ncyxlKX0sYWpheFByZWZpbHRlcjpCdChJdCksYWpheFRyYW5zcG9ydDpCdChXdCksYWpheDpmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBlJiYodD1lLGU9dm9pZCAwKSx0PXR8fHt9O3ZhciBjLGYscCxuLGQscixoLGcsaSxvLHY9ay5hamF4U2V0dXAoe30sdCkseT12LmNvbnRleHR8fHYsbT12LmNvbnRleHQmJih5Lm5vZGVUeXBlfHx5LmpxdWVyeSk/ayh5KTprLmV2ZW50LHg9ay5EZWZlcnJlZCgpLGI9ay5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSx3PXYuc3RhdHVzQ29kZXx8e30sYT17fSxzPXt9LHU9XCJjYW5jZWxlZFwiLFQ9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihlKXt2YXIgdDtpZihoKXtpZighbil7bj17fTt3aGlsZSh0PVB0LmV4ZWMocCkpblt0WzFdLnRvTG93ZXJDYXNlKCkrXCIgXCJdPShuW3RbMV0udG9Mb3dlckNhc2UoKStcIiBcIl18fFtdKS5jb25jYXQodFsyXSl9dD1uW2UudG9Mb3dlckNhc2UoKStcIiBcIl19cmV0dXJuIG51bGw9PXQ/bnVsbDp0LmpvaW4oXCIsIFwiKX0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIGg/cDpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGw9PWgmJihlPXNbZS50b0xvd2VyQ2FzZSgpXT1zW2UudG9Mb3dlckNhc2UoKV18fGUsYVtlXT10KSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1oJiYodi5taW1lVHlwZT1lKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKGUpaWYoaClULmFsd2F5cyhlW1Quc3RhdHVzXSk7ZWxzZSBmb3IodCBpbiBlKXdbdF09W3dbdF0sZVt0XV07cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGUpe3ZhciB0PWV8fHU7cmV0dXJuIGMmJmMuYWJvcnQodCksbCgwLHQpLHRoaXN9fTtpZih4LnByb21pc2UoVCksdi51cmw9KChlfHx2LnVybHx8RXQuaHJlZikrXCJcIikucmVwbGFjZShNdCxFdC5wcm90b2NvbCtcIi8vXCIpLHYudHlwZT10Lm1ldGhvZHx8dC50eXBlfHx2Lm1ldGhvZHx8di50eXBlLHYuZGF0YVR5cGVzPSh2LmRhdGFUeXBlfHxcIipcIikudG9Mb3dlckNhc2UoKS5tYXRjaChSKXx8W1wiXCJdLG51bGw9PXYuY3Jvc3NEb21haW4pe3I9RS5jcmVhdGVFbGVtZW50KFwiYVwiKTt0cnl7ci5ocmVmPXYudXJsLHIuaHJlZj1yLmhyZWYsdi5jcm9zc0RvbWFpbj1GdC5wcm90b2NvbCtcIi8vXCIrRnQuaG9zdCE9ci5wcm90b2NvbCtcIi8vXCIrci5ob3N0fWNhdGNoKGUpe3YuY3Jvc3NEb21haW49ITB9fWlmKHYuZGF0YSYmdi5wcm9jZXNzRGF0YSYmXCJzdHJpbmdcIiE9dHlwZW9mIHYuZGF0YSYmKHYuZGF0YT1rLnBhcmFtKHYuZGF0YSx2LnRyYWRpdGlvbmFsKSksX3QoSXQsdix0LFQpLGgpcmV0dXJuIFQ7Zm9yKGkgaW4oZz1rLmV2ZW50JiZ2Lmdsb2JhbCkmJjA9PWsuYWN0aXZlKysmJmsuZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKSx2LnR5cGU9di50eXBlLnRvVXBwZXJDYXNlKCksdi5oYXNDb250ZW50PSFSdC50ZXN0KHYudHlwZSksZj12LnVybC5yZXBsYWNlKEh0LFwiXCIpLHYuaGFzQ29udGVudD92LmRhdGEmJnYucHJvY2Vzc0RhdGEmJjA9PT0odi5jb250ZW50VHlwZXx8XCJcIikuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSYmKHYuZGF0YT12LmRhdGEucmVwbGFjZShMdCxcIitcIikpOihvPXYudXJsLnNsaWNlKGYubGVuZ3RoKSx2LmRhdGEmJih2LnByb2Nlc3NEYXRhfHxcInN0cmluZ1wiPT10eXBlb2Ygdi5kYXRhKSYmKGYrPShTdC50ZXN0KGYpP1wiJlwiOlwiP1wiKSt2LmRhdGEsZGVsZXRlIHYuZGF0YSksITE9PT12LmNhY2hlJiYoZj1mLnJlcGxhY2UoT3QsXCIkMVwiKSxvPShTdC50ZXN0KGYpP1wiJlwiOlwiP1wiKStcIl89XCIra3QrKytvKSx2LnVybD1mK28pLHYuaWZNb2RpZmllZCYmKGsubGFzdE1vZGlmaWVkW2ZdJiZULnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Nb2RpZmllZC1TaW5jZVwiLGsubGFzdE1vZGlmaWVkW2ZdKSxrLmV0YWdbZl0mJlQuc2V0UmVxdWVzdEhlYWRlcihcIklmLU5vbmUtTWF0Y2hcIixrLmV0YWdbZl0pKSwodi5kYXRhJiZ2Lmhhc0NvbnRlbnQmJiExIT09di5jb250ZW50VHlwZXx8dC5jb250ZW50VHlwZSkmJlQuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLHYuY29udGVudFR5cGUpLFQuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLHYuZGF0YVR5cGVzWzBdJiZ2LmFjY2VwdHNbdi5kYXRhVHlwZXNbMF1dP3YuYWNjZXB0c1t2LmRhdGFUeXBlc1swXV0rKFwiKlwiIT09di5kYXRhVHlwZXNbMF0/XCIsIFwiKyR0K1wiOyBxPTAuMDFcIjpcIlwiKTp2LmFjY2VwdHNbXCIqXCJdKSx2LmhlYWRlcnMpVC5zZXRSZXF1ZXN0SGVhZGVyKGksdi5oZWFkZXJzW2ldKTtpZih2LmJlZm9yZVNlbmQmJighMT09PXYuYmVmb3JlU2VuZC5jYWxsKHksVCx2KXx8aCkpcmV0dXJuIFQuYWJvcnQoKTtpZih1PVwiYWJvcnRcIixiLmFkZCh2LmNvbXBsZXRlKSxULmRvbmUodi5zdWNjZXNzKSxULmZhaWwodi5lcnJvciksYz1fdChXdCx2LHQsVCkpe2lmKFQucmVhZHlTdGF0ZT0xLGcmJm0udHJpZ2dlcihcImFqYXhTZW5kXCIsW1Qsdl0pLGgpcmV0dXJuIFQ7di5hc3luYyYmMDx2LnRpbWVvdXQmJihkPUMuc2V0VGltZW91dChmdW5jdGlvbigpe1QuYWJvcnQoXCJ0aW1lb3V0XCIpfSx2LnRpbWVvdXQpKTt0cnl7aD0hMSxjLnNlbmQoYSxsKX1jYXRjaChlKXtpZihoKXRocm93IGU7bCgtMSxlKX19ZWxzZSBsKC0xLFwiTm8gVHJhbnNwb3J0XCIpO2Z1bmN0aW9uIGwoZSx0LG4scil7dmFyIGksbyxhLHMsdSxsPXQ7aHx8KGg9ITAsZCYmQy5jbGVhclRpbWVvdXQoZCksYz12b2lkIDAscD1yfHxcIlwiLFQucmVhZHlTdGF0ZT0wPGU/NDowLGk9MjAwPD1lJiZlPDMwMHx8MzA0PT09ZSxuJiYocz1mdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLGEscz1lLmNvbnRlbnRzLHU9ZS5kYXRhVHlwZXM7d2hpbGUoXCIqXCI9PT11WzBdKXUuc2hpZnQoKSx2b2lkIDA9PT1yJiYocj1lLm1pbWVUeXBlfHx0LmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpKTtpZihyKWZvcihpIGluIHMpaWYoc1tpXSYmc1tpXS50ZXN0KHIpKXt1LnVuc2hpZnQoaSk7YnJlYWt9aWYodVswXWluIG4pbz11WzBdO2Vsc2V7Zm9yKGkgaW4gbil7aWYoIXVbMF18fGUuY29udmVydGVyc1tpK1wiIFwiK3VbMF1dKXtvPWk7YnJlYWt9YXx8KGE9aSl9bz1vfHxhfWlmKG8pcmV0dXJuIG8hPT11WzBdJiZ1LnVuc2hpZnQobyksbltvXX0odixULG4pKSxzPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzLHUsbD17fSxjPWUuZGF0YVR5cGVzLnNsaWNlKCk7aWYoY1sxXSlmb3IoYSBpbiBlLmNvbnZlcnRlcnMpbFthLnRvTG93ZXJDYXNlKCldPWUuY29udmVydGVyc1thXTtvPWMuc2hpZnQoKTt3aGlsZShvKWlmKGUucmVzcG9uc2VGaWVsZHNbb10mJihuW2UucmVzcG9uc2VGaWVsZHNbb11dPXQpLCF1JiZyJiZlLmRhdGFGaWx0ZXImJih0PWUuZGF0YUZpbHRlcih0LGUuZGF0YVR5cGUpKSx1PW8sbz1jLnNoaWZ0KCkpaWYoXCIqXCI9PT1vKW89dTtlbHNlIGlmKFwiKlwiIT09dSYmdSE9PW8pe2lmKCEoYT1sW3UrXCIgXCIrb118fGxbXCIqIFwiK29dKSlmb3IoaSBpbiBsKWlmKChzPWkuc3BsaXQoXCIgXCIpKVsxXT09PW8mJihhPWxbdStcIiBcIitzWzBdXXx8bFtcIiogXCIrc1swXV0pKXshMD09PWE/YT1sW2ldOiEwIT09bFtpXSYmKG89c1swXSxjLnVuc2hpZnQoc1sxXSkpO2JyZWFrfWlmKCEwIT09YSlpZihhJiZlW1widGhyb3dzXCJdKXQ9YSh0KTtlbHNlIHRyeXt0PWEodCl9Y2F0Y2goZSl7cmV0dXJue3N0YXRlOlwicGFyc2VyZXJyb3JcIixlcnJvcjphP2U6XCJObyBjb252ZXJzaW9uIGZyb20gXCIrdStcIiB0byBcIitvfX19cmV0dXJue3N0YXRlOlwic3VjY2Vzc1wiLGRhdGE6dH19KHYscyxULGkpLGk/KHYuaWZNb2RpZmllZCYmKCh1PVQuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpKSYmKGsubGFzdE1vZGlmaWVkW2ZdPXUpLCh1PVQuZ2V0UmVzcG9uc2VIZWFkZXIoXCJldGFnXCIpKSYmKGsuZXRhZ1tmXT11KSksMjA0PT09ZXx8XCJIRUFEXCI9PT12LnR5cGU/bD1cIm5vY29udGVudFwiOjMwND09PWU/bD1cIm5vdG1vZGlmaWVkXCI6KGw9cy5zdGF0ZSxvPXMuZGF0YSxpPSEoYT1zLmVycm9yKSkpOihhPWwsIWUmJmx8fChsPVwiZXJyb3JcIixlPDAmJihlPTApKSksVC5zdGF0dXM9ZSxULnN0YXR1c1RleHQ9KHR8fGwpK1wiXCIsaT94LnJlc29sdmVXaXRoKHksW28sbCxUXSk6eC5yZWplY3RXaXRoKHksW1QsbCxhXSksVC5zdGF0dXNDb2RlKHcpLHc9dm9pZCAwLGcmJm0udHJpZ2dlcihpP1wiYWpheFN1Y2Nlc3NcIjpcImFqYXhFcnJvclwiLFtULHYsaT9vOmFdKSxiLmZpcmVXaXRoKHksW1QsbF0pLGcmJihtLnRyaWdnZXIoXCJhamF4Q29tcGxldGVcIixbVCx2XSksLS1rLmFjdGl2ZXx8ay5ldmVudC50cmlnZ2VyKFwiYWpheFN0b3BcIikpKX1yZXR1cm4gVH0sZ2V0SlNPTjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGsuZ2V0KGUsdCxuLFwianNvblwiKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGsuZ2V0KGUsdm9pZCAwLHQsXCJzY3JpcHRcIil9fSksay5lYWNoKFtcImdldFwiLFwicG9zdFwiXSxmdW5jdGlvbihlLGkpe2tbaV09ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIG0odCkmJihyPXJ8fG4sbj10LHQ9dm9pZCAwKSxrLmFqYXgoay5leHRlbmQoe3VybDplLHR5cGU6aSxkYXRhVHlwZTpyLGRhdGE6dCxzdWNjZXNzOm59LGsuaXNQbGFpbk9iamVjdChlKSYmZSkpfX0pLGsuX2V2YWxVcmw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gay5hamF4KHt1cmw6ZSx0eXBlOlwiR0VUXCIsZGF0YVR5cGU6XCJzY3JpcHRcIixjYWNoZTohMCxhc3luYzohMSxnbG9iYWw6ITEsY29udmVydGVyczp7XCJ0ZXh0IHNjcmlwdFwiOmZ1bmN0aW9uKCl7fX0sZGF0YUZpbHRlcjpmdW5jdGlvbihlKXtrLmdsb2JhbEV2YWwoZSx0KX19KX0say5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHRoaXNbMF0mJihtKGUpJiYoZT1lLmNhbGwodGhpc1swXSkpLHQ9ayhlLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmdC5pbnNlcnRCZWZvcmUodGhpc1swXSksdC5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzO3doaWxlKGUuZmlyc3RFbGVtZW50Q2hpbGQpZT1lLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpKSx0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24obil7cmV0dXJuIG0obik/dGhpcy5lYWNoKGZ1bmN0aW9uKGUpe2sodGhpcykud3JhcElubmVyKG4uY2FsbCh0aGlzLGUpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPWsodGhpcyksdD1lLmNvbnRlbnRzKCk7dC5sZW5ndGg/dC53cmFwQWxsKG4pOmUuYXBwZW5kKG4pfSl9LHdyYXA6ZnVuY3Rpb24odCl7dmFyIG49bSh0KTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe2sodGhpcykud3JhcEFsbChuP3QuY2FsbCh0aGlzLGUpOnQpfSl9LHVud3JhcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wYXJlbnQoZSkubm90KFwiYm9keVwiKS5lYWNoKGZ1bmN0aW9uKCl7ayh0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSksdGhpc319KSxrLmV4cHIucHNldWRvcy5oaWRkZW49ZnVuY3Rpb24oZSl7cmV0dXJuIWsuZXhwci5wc2V1ZG9zLnZpc2libGUoZSl9LGsuZXhwci5wc2V1ZG9zLnZpc2libGU9ZnVuY3Rpb24oZSl7cmV0dXJuISEoZS5vZmZzZXRXaWR0aHx8ZS5vZmZzZXRIZWlnaHR8fGUuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpfSxrLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBDLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGUpe319O3ZhciBVdD17MDoyMDAsMTIyMzoyMDR9LFh0PWsuYWpheFNldHRpbmdzLnhocigpO3kuY29ycz0hIVh0JiZcIndpdGhDcmVkZW50aWFsc1wiaW4gWHQseS5hamF4PVh0PSEhWHQsay5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGkpe3ZhciBvLGE7aWYoeS5jb3JzfHxYdCYmIWkuY3Jvc3NEb21haW4pcmV0dXJue3NlbmQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPWkueGhyKCk7aWYoci5vcGVuKGkudHlwZSxpLnVybCxpLmFzeW5jLGkudXNlcm5hbWUsaS5wYXNzd29yZCksaS54aHJGaWVsZHMpZm9yKG4gaW4gaS54aHJGaWVsZHMpcltuXT1pLnhockZpZWxkc1tuXTtmb3IobiBpbiBpLm1pbWVUeXBlJiZyLm92ZXJyaWRlTWltZVR5cGUmJnIub3ZlcnJpZGVNaW1lVHlwZShpLm1pbWVUeXBlKSxpLmNyb3NzRG9tYWlufHxlW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXXx8KGVbXCJYLVJlcXVlc3RlZC1XaXRoXCJdPVwiWE1MSHR0cFJlcXVlc3RcIiksZSlyLnNldFJlcXVlc3RIZWFkZXIobixlW25dKTtvPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe28mJihvPWE9ci5vbmxvYWQ9ci5vbmVycm9yPXIub25hYm9ydD1yLm9udGltZW91dD1yLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLFwiYWJvcnRcIj09PWU/ci5hYm9ydCgpOlwiZXJyb3JcIj09PWU/XCJudW1iZXJcIiE9dHlwZW9mIHIuc3RhdHVzP3QoMCxcImVycm9yXCIpOnQoci5zdGF0dXMsci5zdGF0dXNUZXh0KTp0KFV0W3Iuc3RhdHVzXXx8ci5zdGF0dXMsci5zdGF0dXNUZXh0LFwidGV4dFwiIT09KHIucmVzcG9uc2VUeXBlfHxcInRleHRcIil8fFwic3RyaW5nXCIhPXR5cGVvZiByLnJlc3BvbnNlVGV4dD97YmluYXJ5OnIucmVzcG9uc2V9Ont0ZXh0OnIucmVzcG9uc2VUZXh0fSxyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxyLm9ubG9hZD1vKCksYT1yLm9uZXJyb3I9ci5vbnRpbWVvdXQ9byhcImVycm9yXCIpLHZvaWQgMCE9PXIub25hYm9ydD9yLm9uYWJvcnQ9YTpyLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1yLnJlYWR5U3RhdGUmJkMuc2V0VGltZW91dChmdW5jdGlvbigpe28mJmEoKX0pfSxvPW8oXCJhYm9ydFwiKTt0cnl7ci5zZW5kKGkuaGFzQ29udGVudCYmaS5kYXRhfHxudWxsKX1jYXRjaChlKXtpZihvKXRocm93IGV9fSxhYm9ydDpmdW5jdGlvbigpe28mJm8oKX19fSksay5hamF4UHJlZmlsdGVyKGZ1bmN0aW9uKGUpe2UuY3Jvc3NEb21haW4mJihlLmNvbnRlbnRzLnNjcmlwdD0hMSl9KSxrLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OlwidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHRcIn0sY29udGVudHM6e3NjcmlwdDovXFxiKD86amF2YXxlY21hKXNjcmlwdFxcYi99LGNvbnZlcnRlcnM6e1widGV4dCBzY3JpcHRcIjpmdW5jdGlvbihlKXtyZXR1cm4gay5nbG9iYWxFdmFsKGUpLGV9fX0pLGsuYWpheFByZWZpbHRlcihcInNjcmlwdFwiLGZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUuY2FjaGUmJihlLmNhY2hlPSExKSxlLmNyb3NzRG9tYWluJiYoZS50eXBlPVwiR0VUXCIpfSksay5hamF4VHJhbnNwb3J0KFwic2NyaXB0XCIsZnVuY3Rpb24obil7dmFyIHIsaTtpZihuLmNyb3NzRG9tYWlufHxuLnNjcmlwdEF0dHJzKXJldHVybntzZW5kOmZ1bmN0aW9uKGUsdCl7cj1rKFwiPHNjcmlwdD5cIikuYXR0cihuLnNjcmlwdEF0dHJzfHx7fSkucHJvcCh7Y2hhcnNldDpuLnNjcmlwdENoYXJzZXQsc3JjOm4udXJsfSkub24oXCJsb2FkIGVycm9yXCIsaT1mdW5jdGlvbihlKXtyLnJlbW92ZSgpLGk9bnVsbCxlJiZ0KFwiZXJyb3JcIj09PWUudHlwZT80MDQ6MjAwLGUudHlwZSl9KSxFLmhlYWQuYXBwZW5kQ2hpbGQoclswXSl9LGFib3J0OmZ1bmN0aW9uKCl7aSYmaSgpfX19KTt2YXIgVnQsR3Q9W10sWXQ9Lyg9KVxcPyg/PSZ8JCl8XFw/XFw/LztrLmFqYXhTZXR1cCh7anNvbnA6XCJjYWxsYmFja1wiLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZT1HdC5wb3AoKXx8ay5leHBhbmRvK1wiX1wiK2t0Kys7cmV0dXJuIHRoaXNbZV09ITAsZX19KSxrLmFqYXhQcmVmaWx0ZXIoXCJqc29uIGpzb25wXCIsZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhPSExIT09ZS5qc29ucCYmKFl0LnRlc3QoZS51cmwpP1widXJsXCI6XCJzdHJpbmdcIj09dHlwZW9mIGUuZGF0YSYmMD09PShlLmNvbnRlbnRUeXBlfHxcIlwiKS5pbmRleE9mKFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpJiZZdC50ZXN0KGUuZGF0YSkmJlwiZGF0YVwiKTtpZihhfHxcImpzb25wXCI9PT1lLmRhdGFUeXBlc1swXSlyZXR1cm4gcj1lLmpzb25wQ2FsbGJhY2s9bShlLmpzb25wQ2FsbGJhY2spP2UuanNvbnBDYWxsYmFjaygpOmUuanNvbnBDYWxsYmFjayxhP2VbYV09ZVthXS5yZXBsYWNlKFl0LFwiJDFcIityKTohMSE9PWUuanNvbnAmJihlLnVybCs9KFN0LnRlc3QoZS51cmwpP1wiJlwiOlwiP1wiKStlLmpzb25wK1wiPVwiK3IpLGUuY29udmVydGVyc1tcInNjcmlwdCBqc29uXCJdPWZ1bmN0aW9uKCl7cmV0dXJuIG98fGsuZXJyb3IocitcIiB3YXMgbm90IGNhbGxlZFwiKSxvWzBdfSxlLmRhdGFUeXBlc1swXT1cImpzb25cIixpPUNbcl0sQ1tyXT1mdW5jdGlvbigpe289YXJndW1lbnRzfSxuLmFsd2F5cyhmdW5jdGlvbigpe3ZvaWQgMD09PWk/ayhDKS5yZW1vdmVQcm9wKHIpOkNbcl09aSxlW3JdJiYoZS5qc29ucENhbGxiYWNrPXQuanNvbnBDYWxsYmFjayxHdC5wdXNoKHIpKSxvJiZtKGkpJiZpKG9bMF0pLG89aT12b2lkIDB9KSxcInNjcmlwdFwifSkseS5jcmVhdGVIVE1MRG9jdW1lbnQ9KChWdD1FLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcIlwiKS5ib2R5KS5pbm5lckhUTUw9XCI8Zm9ybT48L2Zvcm0+PGZvcm0+PC9mb3JtPlwiLDI9PT1WdC5jaGlsZE5vZGVzLmxlbmd0aCksay5wYXJzZUhUTUw9ZnVuY3Rpb24oZSx0LG4pe3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBlP1tdOihcImJvb2xlYW5cIj09dHlwZW9mIHQmJihuPXQsdD0hMSksdHx8KHkuY3JlYXRlSFRNTERvY3VtZW50Pygocj0odD1FLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcIlwiKSkuY3JlYXRlRWxlbWVudChcImJhc2VcIikpLmhyZWY9RS5sb2NhdGlvbi5ocmVmLHQuaGVhZC5hcHBlbmRDaGlsZChyKSk6dD1FKSxvPSFuJiZbXSwoaT1ELmV4ZWMoZSkpP1t0LmNyZWF0ZUVsZW1lbnQoaVsxXSldOihpPXdlKFtlXSx0LG8pLG8mJm8ubGVuZ3RoJiZrKG8pLnJlbW92ZSgpLGsubWVyZ2UoW10saS5jaGlsZE5vZGVzKSkpO3ZhciByLGksb30say5mbi5sb2FkPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYT10aGlzLHM9ZS5pbmRleE9mKFwiIFwiKTtyZXR1cm4tMTxzJiYocj1tdChlLnNsaWNlKHMpKSxlPWUuc2xpY2UoMCxzKSksbSh0KT8obj10LHQ9dm9pZCAwKTp0JiZcIm9iamVjdFwiPT10eXBlb2YgdCYmKGk9XCJQT1NUXCIpLDA8YS5sZW5ndGgmJmsuYWpheCh7dXJsOmUsdHlwZTppfHxcIkdFVFwiLGRhdGFUeXBlOlwiaHRtbFwiLGRhdGE6dH0pLmRvbmUoZnVuY3Rpb24oZSl7bz1hcmd1bWVudHMsYS5odG1sKHI/ayhcIjxkaXY+XCIpLmFwcGVuZChrLnBhcnNlSFRNTChlKSkuZmluZChyKTplKX0pLmFsd2F5cyhuJiZmdW5jdGlvbihlLHQpe2EuZWFjaChmdW5jdGlvbigpe24uYXBwbHkodGhpcyxvfHxbZS5yZXNwb25zZVRleHQsdCxlXSl9KX0pLHRoaXN9LGsuZWFjaChbXCJhamF4U3RhcnRcIixcImFqYXhTdG9wXCIsXCJhamF4Q29tcGxldGVcIixcImFqYXhFcnJvclwiLFwiYWpheFN1Y2Nlc3NcIixcImFqYXhTZW5kXCJdLGZ1bmN0aW9uKGUsdCl7ay5mblt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vbih0LGUpfX0pLGsuZXhwci5wc2V1ZG9zLmFuaW1hdGVkPWZ1bmN0aW9uKHQpe3JldHVybiBrLmdyZXAoay50aW1lcnMsZnVuY3Rpb24oZSl7cmV0dXJuIHQ9PT1lLmVsZW19KS5sZW5ndGh9LGsub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsPWsuY3NzKGUsXCJwb3NpdGlvblwiKSxjPWsoZSksZj17fTtcInN0YXRpY1wiPT09bCYmKGUuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiKSxzPWMub2Zmc2V0KCksbz1rLmNzcyhlLFwidG9wXCIpLHU9ay5jc3MoZSxcImxlZnRcIiksKFwiYWJzb2x1dGVcIj09PWx8fFwiZml4ZWRcIj09PWwpJiYtMTwobyt1KS5pbmRleE9mKFwiYXV0b1wiKT8oYT0ocj1jLnBvc2l0aW9uKCkpLnRvcCxpPXIubGVmdCk6KGE9cGFyc2VGbG9hdChvKXx8MCxpPXBhcnNlRmxvYXQodSl8fDApLG0odCkmJih0PXQuY2FsbChlLG4say5leHRlbmQoe30scykpKSxudWxsIT10LnRvcCYmKGYudG9wPXQudG9wLXMudG9wK2EpLG51bGwhPXQubGVmdCYmKGYubGVmdD10LmxlZnQtcy5sZWZ0K2kpLFwidXNpbmdcImluIHQ/dC51c2luZy5jYWxsKGUsZik6Yy5jc3MoZil9fSxrLmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKHQpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHZvaWQgMD09PXQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oZSl7ay5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsdCxlKX0pO3ZhciBlLG4scj10aGlzWzBdO3JldHVybiByP3IuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGg/KGU9ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPXIub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyx7dG9wOmUudG9wK24ucGFnZVlPZmZzZXQsbGVmdDplLmxlZnQrbi5wYWdlWE9mZnNldH0pOnt0b3A6MCxsZWZ0OjB9OnZvaWQgMH0scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgZSx0LG4scj10aGlzWzBdLGk9e3RvcDowLGxlZnQ6MH07aWYoXCJmaXhlZFwiPT09ay5jc3MocixcInBvc2l0aW9uXCIpKXQ9ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtlbHNle3Q9dGhpcy5vZmZzZXQoKSxuPXIub3duZXJEb2N1bWVudCxlPXIub2Zmc2V0UGFyZW50fHxuLmRvY3VtZW50RWxlbWVudDt3aGlsZShlJiYoZT09PW4uYm9keXx8ZT09PW4uZG9jdW1lbnRFbGVtZW50KSYmXCJzdGF0aWNcIj09PWsuY3NzKGUsXCJwb3NpdGlvblwiKSllPWUucGFyZW50Tm9kZTtlJiZlIT09ciYmMT09PWUubm9kZVR5cGUmJigoaT1rKGUpLm9mZnNldCgpKS50b3ArPWsuY3NzKGUsXCJib3JkZXJUb3BXaWR0aFwiLCEwKSxpLmxlZnQrPWsuY3NzKGUsXCJib3JkZXJMZWZ0V2lkdGhcIiwhMCkpfXJldHVybnt0b3A6dC50b3AtaS50b3Atay5jc3MocixcIm1hcmdpblRvcFwiLCEwKSxsZWZ0OnQubGVmdC1pLmxlZnQtay5jc3MocixcIm1hcmdpbkxlZnRcIiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vZmZzZXRQYXJlbnQ7d2hpbGUoZSYmXCJzdGF0aWNcIj09PWsuY3NzKGUsXCJwb3NpdGlvblwiKSllPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxpZX0pfX0pLGsuZWFjaCh7c2Nyb2xsTGVmdDpcInBhZ2VYT2Zmc2V0XCIsc2Nyb2xsVG9wOlwicGFnZVlPZmZzZXRcIn0sZnVuY3Rpb24odCxpKXt2YXIgbz1cInBhZ2VZT2Zmc2V0XCI9PT1pO2suZm5bdF09ZnVuY3Rpb24oZSl7cmV0dXJuIF8odGhpcyxmdW5jdGlvbihlLHQsbil7dmFyIHI7aWYoeChlKT9yPWU6OT09PWUubm9kZVR5cGUmJihyPWUuZGVmYXVsdFZpZXcpLHZvaWQgMD09PW4pcmV0dXJuIHI/cltpXTplW3RdO3I/ci5zY3JvbGxUbyhvP3IucGFnZVhPZmZzZXQ6bixvP246ci5wYWdlWU9mZnNldCk6ZVt0XT1ufSx0LGUsYXJndW1lbnRzLmxlbmd0aCl9fSksay5lYWNoKFtcInRvcFwiLFwibGVmdFwiXSxmdW5jdGlvbihlLG4pe2suY3NzSG9va3Nbbl09emUoeS5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGUsdCl7aWYodClyZXR1cm4gdD1fZShlLG4pLCRlLnRlc3QodCk/ayhlKS5wb3NpdGlvbigpW25dK1wicHhcIjp0fSl9KSxrLmVhY2goe0hlaWdodDpcImhlaWdodFwiLFdpZHRoOlwid2lkdGhcIn0sZnVuY3Rpb24oYSxzKXtrLmVhY2goe3BhZGRpbmc6XCJpbm5lclwiK2EsY29udGVudDpzLFwiXCI6XCJvdXRlclwiK2F9LGZ1bmN0aW9uKHIsbyl7ay5mbltvXT1mdW5jdGlvbihlLHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGgmJihyfHxcImJvb2xlYW5cIiE9dHlwZW9mIGUpLGk9cnx8KCEwPT09ZXx8ITA9PT10P1wibWFyZ2luXCI6XCJib3JkZXJcIik7cmV0dXJuIF8odGhpcyxmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIHgoZSk/MD09PW8uaW5kZXhPZihcIm91dGVyXCIpP2VbXCJpbm5lclwiK2FdOmUuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W1wiY2xpZW50XCIrYV06OT09PWUubm9kZVR5cGU/KHI9ZS5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoZS5ib2R5W1wic2Nyb2xsXCIrYV0scltcInNjcm9sbFwiK2FdLGUuYm9keVtcIm9mZnNldFwiK2FdLHJbXCJvZmZzZXRcIithXSxyW1wiY2xpZW50XCIrYV0pKTp2b2lkIDA9PT1uP2suY3NzKGUsdCxpKTprLnN0eWxlKGUsdCxuLGkpfSxzLG4/ZTp2b2lkIDAsbil9fSl9KSxrLmVhY2goXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUsbil7ay5mbltuXT1mdW5jdGlvbihlLHQpe3JldHVybiAwPGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vbihuLG51bGwsZSx0KTp0aGlzLnRyaWdnZXIobil9fSksay5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHR8fGUpfX0pLGsuZm4uZXh0ZW5kKHtiaW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5vbihlLG51bGwsdCxuKX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub2ZmKGUsbnVsbCx0KX0sZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24odCxlLG4scil9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihlLFwiKipcIik6dGhpcy5vZmYodCxlfHxcIioqXCIsbil9fSksay5wcm94eT1mdW5jdGlvbihlLHQpe3ZhciBuLHIsaTtpZihcInN0cmluZ1wiPT10eXBlb2YgdCYmKG49ZVt0XSx0PWUsZT1uKSxtKGUpKXJldHVybiByPXMuY2FsbChhcmd1bWVudHMsMiksKGk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0fHx0aGlzLHIuY29uY2F0KHMuY2FsbChhcmd1bWVudHMpKSl9KS5ndWlkPWUuZ3VpZD1lLmd1aWR8fGsuZ3VpZCsrLGl9LGsuaG9sZFJlYWR5PWZ1bmN0aW9uKGUpe2U/ay5yZWFkeVdhaXQrKzprLnJlYWR5KCEwKX0say5pc0FycmF5PUFycmF5LmlzQXJyYXksay5wYXJzZUpTT049SlNPTi5wYXJzZSxrLm5vZGVOYW1lPUEsay5pc0Z1bmN0aW9uPW0say5pc1dpbmRvdz14LGsuY2FtZWxDYXNlPVYsay50eXBlPXcsay5ub3c9RGF0ZS5ub3csay5pc051bWVyaWM9ZnVuY3Rpb24oZSl7dmFyIHQ9ay50eXBlKGUpO3JldHVybihcIm51bWJlclwiPT09dHx8XCJzdHJpbmdcIj09PXQpJiYhaXNOYU4oZS1wYXJzZUZsb2F0KGUpKX0sXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoXCJqcXVlcnlcIixbXSxmdW5jdGlvbigpe3JldHVybiBrfSk7dmFyIFF0PUMualF1ZXJ5LEp0PUMuJDtyZXR1cm4gay5ub0NvbmZsaWN0PWZ1bmN0aW9uKGUpe3JldHVybiBDLiQ9PT1rJiYoQy4kPUp0KSxlJiZDLmpRdWVyeT09PWsmJihDLmpRdWVyeT1RdCksa30sZXx8KEMualF1ZXJ5PUMuJD1rKSxrfSk7XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIG5nMSAqLyAvKiogKi9cbmltcG9ydCAqIGFzIG5nX2Zyb21faW1wb3J0IGZyb20gJ2FuZ3VsYXInO1xuLyoqIEBoaWRkZW4gKi8gZGVjbGFyZSB2YXIgYW5ndWxhcjtcbi8qKiBAaGlkZGVuICovIGNvbnN0IG5nX2Zyb21fZ2xvYmFsID0gYW5ndWxhcjtcbi8qKiBAaGlkZGVuICovIGV4cG9ydCBjb25zdCBuZyA9IG5nX2Zyb21faW1wb3J0ICYmIG5nX2Zyb21faW1wb3J0Lm1vZHVsZSA/IG5nX2Zyb21faW1wb3J0IDogbmdfZnJvbV9nbG9iYWw7XG4iLCIvKipcbiAqIEhpZ2hlciBvcmRlciBmdW5jdGlvbnNcbiAqXG4gKiBUaGVzZSB1dGlsaXR5IGZ1bmN0aW9ucyBhcmUgZXhwb3J0ZWQsIGJ1dCBhcmUgc3ViamVjdCB0byBjaGFuZ2Ugd2l0aG91dCBub3RpY2UuXG4gKlxuICogQG1vZHVsZSBjb21tb25faG9mXG4gKi8gLyoqICovXG5cbmltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gJy4vY29tbW9uJztcbi8qKlxuICogUmV0dXJucyBhIG5ldyBmdW5jdGlvbiBmb3IgW1BhcnRpYWwgQXBwbGljYXRpb25dKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1BhcnRpYWxfYXBwbGljYXRpb24pIG9mIHRoZSBvcmlnaW5hbCBmdW5jdGlvbi5cbiAqXG4gKiBHaXZlbiBhIGZ1bmN0aW9uIHdpdGggTiBwYXJhbWV0ZXJzLCByZXR1cm5zIGEgbmV3IGZ1bmN0aW9uIHRoYXQgc3VwcG9ydHMgcGFydGlhbCBhcHBsaWNhdGlvbi5cbiAqIFRoZSBuZXcgZnVuY3Rpb24gYWNjZXB0cyBhbnl3aGVyZSBmcm9tIDEgdG8gTiBwYXJhbWV0ZXJzLiAgV2hlbiB0aGF0IGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIE0gcGFyYW1ldGVycyxcbiAqIHdoZXJlIE0gaXMgbGVzcyB0aGFuIE4sIGl0IHJldHVybnMgYSBuZXcgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIHRoZSByZW1haW5pbmcgcGFyYW1ldGVycy4gIEl0IGNvbnRpbnVlcyB0b1xuICogYWNjZXB0IG1vcmUgcGFyYW1ldGVycyB1bnRpbCBhbGwgTiBwYXJhbWV0ZXJzIGhhdmUgYmVlbiBzdXBwbGllZC5cbiAqXG4gKlxuICogVGhpcyBjb250cml2ZWQgZXhhbXBsZSB1c2VzIGEgcGFydGlhbGx5IGFwcGxpZWQgZnVuY3Rpb24gYXMgYW4gcHJlZGljYXRlLCB3aGljaCByZXR1cm5zIHRydWVcbiAqIGlmIGFuIG9iamVjdCBpcyBmb3VuZCBpbiBib3RoIGFycmF5cy5cbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIC8vIHJldHVybnMgdHJ1ZSBpZiBhbiBvYmplY3QgaXMgaW4gYm90aCBvZiB0aGUgdHdvIGFycmF5c1xuICogZnVuY3Rpb24gaW5Cb3RoKGFycmF5MSwgYXJyYXkyLCBvYmplY3QpIHtcbiAqICAgcmV0dXJuIGFycmF5MS5pbmRleE9mKG9iamVjdCkgIT09IC0xICYmXG4gKiAgICAgICAgICBhcnJheTIuaW5kZXhPZihvYmplY3QpICE9PSAxO1xuICogfVxuICogbGV0IG9iajEsIG9iajIsIG9iajMsIG9iajQsIG9iajUsIG9iajYsIG9iajdcbiAqIGxldCBmb29zID0gW29iajEsIG9iajNdXG4gKiBsZXQgYmFycyA9IFtvYmozLCBvYmo0LCBvYmo1XVxuICpcbiAqIC8vIEEgY3VycmllZCBcImNvcHlcIiBvZiBpbkJvdGhcbiAqIGxldCBjdXJyaWVkSW5Cb3RoID0gY3VycnkoaW5Cb3RoKTtcbiAqIC8vIFBhcnRpYWxseSBhcHBseSBib3RoIHRoZSBhcnJheTEgYW5kIGFycmF5MlxuICogbGV0IGluRm9vc0FuZEJhcnMgPSBjdXJyaWVkSW5Cb3RoKGZvb3MsIGJhcnMpO1xuICpcbiAqIC8vIFN1cHBseSB0aGUgZmluYWwgYXJndW1lbnQ7IHNpbmNlIGFsbCBhcmd1bWVudHMgYXJlXG4gKiAvLyBzdXBwbGllZCwgdGhlIG9yaWdpbmFsIGluQm90aCBmdW5jdGlvbiBpcyB0aGVuIGNhbGxlZC5cbiAqIGxldCBvYmoxSW5Cb3RoID0gaW5Gb29zQW5kQmFycyhvYmoxKTsgLy8gZmFsc2VcbiAqXG4gKiAvLyBVc2UgdGhlIGluRm9vc0FuZEJhcnMgYXMgYSBwcmVkaWNhdGUuXG4gKiAvLyBGaWx0ZXIsIG9uIGVhY2ggaXRlcmF0aW9uLCBzdXBwbGllcyB0aGUgZmluYWwgYXJndW1lbnRcbiAqIGxldCBhbGxPYmpzID0gWyBvYmoxLCBvYmoyLCBvYmozLCBvYmo0LCBvYmo1LCBvYmo2LCBvYmo3IF07XG4gKiBsZXQgZm91bmRJbkJvdGggPSBhbGxPYmpzLmZpbHRlcihpbkZvb3NBbmRCYXJzKTsgLy8gWyBvYmozIF1cbiAqXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gZm5cbiAqIEByZXR1cm5zIHsqfGZ1bmN0aW9uKCk6ICgqfGFueSl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjdXJyeShmbjogRnVuY3Rpb24pOiBGdW5jdGlvbiB7XG4gIHJldHVybiBmdW5jdGlvbiBjdXJyaWVkKCkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IGZuLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgIHJldHVybiBjdXJyaWVkLmJpbmQodGhpcywgLi4uYXJncyk7XG4gIH07XG59XG5cbi8qKlxuICogR2l2ZW4gYSB2YXJhcmdzIGxpc3Qgb2YgZnVuY3Rpb25zLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBjb21wb3NlcyB0aGUgYXJndW1lbnQgZnVuY3Rpb25zLCByaWdodC10by1sZWZ0XG4gKiBnaXZlbjogZih4KSwgZyh4KSwgaCh4KVxuICogbGV0IGNvbXBvc2VkID0gY29tcG9zZShmLGcsaClcbiAqIHRoZW4sIGNvbXBvc2VkIGlzOiBmKGcoaCh4KSkpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wb3NlKCkge1xuICBjb25zdCBhcmdzID0gYXJndW1lbnRzO1xuICBjb25zdCBzdGFydCA9IGFyZ3MubGVuZ3RoIC0gMTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGxldCBpID0gc3RhcnQsXG4gICAgICByZXN1bHQgPSBhcmdzW3N0YXJ0XS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHdoaWxlIChpLS0pIHJlc3VsdCA9IGFyZ3NbaV0uY2FsbCh0aGlzLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5cbi8qKlxuICogR2l2ZW4gYSB2YXJhcmdzIGxpc3Qgb2YgZnVuY3Rpb25zLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBpcyBjb21wb3NlcyB0aGUgYXJndW1lbnQgZnVuY3Rpb25zLCBsZWZ0LXRvLXJpZ2h0XG4gKiBnaXZlbjogZih4KSwgZyh4KSwgaCh4KVxuICogbGV0IHBpcGVkID0gcGlwZShmLGcsaCk7XG4gKiB0aGVuLCBwaXBlZCBpczogaChnKGYoeCkpKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGlwZSguLi5mdW5jczogRnVuY3Rpb25bXSk6IChvYmo6IGFueSkgPT4gYW55IHtcbiAgcmV0dXJuIGNvbXBvc2UuYXBwbHkobnVsbCwgW10uc2xpY2UuY2FsbChhcmd1bWVudHMpLnJldmVyc2UoKSk7XG59XG5cbi8qKlxuICogR2l2ZW4gYSBwcm9wZXJ0eSBuYW1lLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoYXQgcHJvcGVydHkgZnJvbSBhbiBvYmplY3RcbiAqIGxldCBvYmogPSB7IGZvbzogMSwgbmFtZTogXCJibGFyZ1wiIH07XG4gKiBsZXQgZ2V0TmFtZSA9IHByb3AoXCJuYW1lXCIpO1xuICogZ2V0TmFtZShvYmopID09PSBcImJsYXJnXCJcbiAqL1xuZXhwb3J0IGNvbnN0IHByb3AgPSAobmFtZTogc3RyaW5nKSA9PiAob2JqOiBhbnkpID0+IG9iaiAmJiBvYmpbbmFtZV07XG5cbi8qKlxuICogR2l2ZW4gYSBwcm9wZXJ0eSBuYW1lIGFuZCBhIHZhbHVlLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgYm9vbGVhbiBiYXNlZCBvbiB3aGV0aGVyXG4gKiB0aGUgcGFzc2VkIG9iamVjdCBoYXMgYSBwcm9wZXJ0eSB0aGF0IG1hdGNoZXMgdGhlIHZhbHVlXG4gKiBsZXQgb2JqID0geyBmb286IDEsIG5hbWU6IFwiYmxhcmdcIiB9O1xuICogbGV0IGdldE5hbWUgPSBwcm9wRXEoXCJuYW1lXCIsIFwiYmxhcmdcIik7XG4gKiBnZXROYW1lKG9iaikgPT09IHRydWVcbiAqL1xuZXhwb3J0IGNvbnN0IHByb3BFcSA9IGN1cnJ5KChuYW1lOiBzdHJpbmcsIF92YWw6IGFueSwgb2JqOiBhbnkpID0+IG9iaiAmJiBvYmpbbmFtZV0gPT09IF92YWwpO1xuXG4vKipcbiAqIEdpdmVuIGEgZG90dGVkIHByb3BlcnR5IG5hbWUsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBuZXN0ZWQgcHJvcGVydHkgZnJvbSBhbiBvYmplY3QsIG9yIHVuZGVmaW5lZFxuICogbGV0IG9iaiA9IHsgaWQ6IDEsIG5lc3RlZE9iajogeyBmb286IDEsIG5hbWU6IFwiYmxhcmdcIiB9LCB9O1xuICogbGV0IGdldE5hbWUgPSBwcm9wKFwibmVzdGVkT2JqLm5hbWVcIik7XG4gKiBnZXROYW1lKG9iaikgPT09IFwiYmxhcmdcIlxuICogbGV0IHByb3BOb3RGb3VuZCA9IHByb3AoXCJ0aGlzLnByb3BlcnR5LmRvZXNudC5leGlzdFwiKTtcbiAqIHByb3BOb3RGb3VuZChvYmopID09PSB1bmRlZmluZWRcbiAqL1xuZXhwb3J0IGNvbnN0IHBhcnNlID0gKG5hbWU6IHN0cmluZykgPT4gcGlwZS5hcHBseShudWxsLCBuYW1lLnNwbGl0KCcuJykubWFwKHByb3ApKTtcblxuLyoqXG4gKiBHaXZlbiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHRydXRoeSBvciBmYWxzZXkgdmFsdWUsIHJldHVybnMgYVxuICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBvcHBvc2l0ZSAoZmFsc2V5IG9yIHRydXRoeSkgdmFsdWUgZ2l2ZW4gdGhlIHNhbWUgaW5wdXRzXG4gKi9cbmV4cG9ydCBjb25zdCBub3Q6IChmbjogUHJlZGljYXRlPGFueT4pID0+IFByZWRpY2F0ZTxhbnk+ID0gKGZuOiBQcmVkaWNhdGU8YW55PikgPT4gKC4uLmFyZ3M6IGFueVtdKSA9PlxuICAhZm4uYXBwbHkobnVsbCwgYXJncyk7XG5cbi8qKlxuICogR2l2ZW4gdHdvIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB0cnV0aHkgb3IgZmFsc2V5IHZhbHVlcywgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnV0aHlcbiAqIGlmIGJvdGggZnVuY3Rpb25zIHJldHVybiB0cnV0aHkgZm9yIHRoZSBnaXZlbiBhcmd1bWVudHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFuZChmbjE6IFByZWRpY2F0ZTxhbnk+LCBmbjI6IFByZWRpY2F0ZTxhbnk+KTogUHJlZGljYXRlPGFueT4ge1xuICByZXR1cm4gKC4uLmFyZ3M6IGFueVtdKSA9PiBmbjEuYXBwbHkobnVsbCwgYXJncykgJiYgZm4yLmFwcGx5KG51bGwsIGFyZ3MpO1xufVxuXG4vKipcbiAqIEdpdmVuIHR3byBmdW5jdGlvbnMgdGhhdCByZXR1cm4gdHJ1dGh5IG9yIGZhbHNleSB2YWx1ZXMsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1dGh5XG4gKiBpZiBhdCBsZWFzdCBvbmUgb2YgdGhlIGZ1bmN0aW9ucyByZXR1cm5zIHRydXRoeSBmb3IgdGhlIGdpdmVuIGFyZ3VtZW50c1xuICovXG5leHBvcnQgZnVuY3Rpb24gb3IoZm4xOiBQcmVkaWNhdGU8YW55PiwgZm4yOiBQcmVkaWNhdGU8YW55Pik6IFByZWRpY2F0ZTxhbnk+IHtcbiAgcmV0dXJuICguLi5hcmdzOiBhbnlbXSkgPT4gZm4xLmFwcGx5KG51bGwsIGFyZ3MpIHx8IGZuMi5hcHBseShudWxsLCBhcmdzKTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbGwgdGhlIGVsZW1lbnRzIG9mIGFuIGFycmF5IG1hdGNoIGEgcHJlZGljYXRlIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIGZuMSBhIHByZWRpY2F0ZSBmdW5jdGlvbiBgZm4xYFxuICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCB0YWtlcyBhbiBhcnJheSBhbmQgcmV0dXJucyB0cnVlIGlmIGBmbjFgIGlzIHRydWUgZm9yIGFsbCBlbGVtZW50cyBvZiB0aGUgYXJyYXlcbiAqL1xuZXhwb3J0IGNvbnN0IGFsbCA9IChmbjE6IFByZWRpY2F0ZTxhbnk+KSA9PiAoYXJyOiBhbnlbXSkgPT4gYXJyLnJlZHVjZSgoYiwgeCkgPT4gYiAmJiAhIWZuMSh4KSwgdHJ1ZSkgYXMgYm9vbGVhbjtcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcbmV4cG9ydCBjb25zdCBhbnkgPSAoZm4xOiBQcmVkaWNhdGU8YW55PikgPT4gKGFycjogYW55W10pID0+IGFyci5yZWR1Y2UoKGIsIHgpID0+IGIgfHwgISFmbjEoeCksIGZhbHNlKSBhcyBib29sZWFuO1xuXG4vKiogR2l2ZW4gYSBjbGFzcywgcmV0dXJucyBhIFByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIG9mIHRoYXQgY2xhc3MgKi9cbmV4cG9ydCBjb25zdCBpcyA9IDxUPihjdG9yOiB7IG5ldyAoLi4uYXJncyk6IFQgfSkgPT4gKG9iajogYW55KTogb2JqIGlzIFQgPT5cbiAgKG9iaiAhPSBudWxsICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gY3RvcikgfHwgb2JqIGluc3RhbmNlb2YgY3RvcjtcblxuLyoqIEdpdmVuIGEgdmFsdWUsIHJldHVybnMgYSBQcmVkaWNhdGUgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRydWUgaWYgYW5vdGhlciB2YWx1ZSBpcyA9PT0gZXF1YWwgdG8gdGhlIG9yaWdpbmFsIHZhbHVlICovXG5leHBvcnQgY29uc3QgZXE6IChjb21wOiBhbnkpID0+IFByZWRpY2F0ZTxhbnk+ID0gKHZhbHVlOiBhbnkpID0+IChvdGhlcjogYW55KSA9PiB2YWx1ZSA9PT0gb3RoZXI7XG5cbi8qKiBHaXZlbiBhIHZhbHVlLCByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGUgdmFsdWUgKi9cbmV4cG9ydCBjb25zdCB2YWwgPSA8VD4odjogVCkgPT4gKCkgPT4gdjtcblxuZXhwb3J0IGZ1bmN0aW9uIGludm9rZShmbk5hbWU6IHN0cmluZyk6IEZ1bmN0aW9uO1xuZXhwb3J0IGZ1bmN0aW9uIGludm9rZShmbk5hbWU6IHN0cmluZywgYXJnczogYW55W10pOiBGdW5jdGlvbjtcbmV4cG9ydCBmdW5jdGlvbiBpbnZva2UoZm5OYW1lOiBzdHJpbmcsIGFyZ3M/OiBhbnlbXSk6IEZ1bmN0aW9uIHtcbiAgcmV0dXJuIChvYmo6IGFueSkgPT4gb2JqW2ZuTmFtZV0uYXBwbHkob2JqLCBhcmdzKTtcbn1cblxuLyoqXG4gKiBTb3J0YSBsaWtlIFBhdHRlcm4gTWF0Y2hpbmcgKGEgZnVuY3Rpb25hbCBwcm9ncmFtbWluZyBjb25kaXRpb25hbCBjb25zdHJ1Y3QpXG4gKlxuICogU2VlIGh0dHA6Ly9jMi5jb20vY2dpL3dpa2k/UGF0dGVybk1hdGNoaW5nXG4gKlxuICogVGhpcyBpcyBhIGNvbmRpdGlvbmFsIGNvbnN0cnVjdCB3aGljaCBhbGxvd3MgYSBzZXJpZXMgb2YgcHJlZGljYXRlcyBhbmQgb3V0cHV0IGZ1bmN0aW9uc1xuICogdG8gYmUgY2hlY2tlZCBhbmQgdGhlbiBhcHBsaWVkLiAgRWFjaCBwcmVkaWNhdGUgcmVjZWl2ZXMgdGhlIGlucHV0LiAgSWYgdGhlIHByZWRpY2F0ZVxuICogcmV0dXJucyB0cnV0aHksIHRoZW4gaXRzIG1hdGNoaW5nIG91dHB1dCBmdW5jdGlvbiAobWFwcGluZyBmdW5jdGlvbikgaXMgcHJvdmlkZWQgd2l0aFxuICogdGhlIGlucHV0IGFuZCwgdGhlbiB0aGUgcmVzdWx0IGlzIHJldHVybmVkLlxuICpcbiAqIEVhY2ggY29tYmluYXRpb24gKDItdHVwbGUpIG9mIHByZWRpY2F0ZSArIG91dHB1dCBmdW5jdGlvbiBzaG91bGQgYmUgcGxhY2VkIGluIGFuIGFycmF5XG4gKiBvZiBzaXplIDI6IFsgcHJlZGljYXRlLCBtYXBGbiBdXG4gKlxuICogVGhlc2UgMi10dXBsZXMgc2hvdWxkIGJlIHB1dCBpbiBhbiBvdXRlciBhcnJheS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogLy8gSGVyZSdzIGEgMi10dXBsZSB3aGVyZSB0aGUgZmlyc3QgZWxlbWVudCBpcyB0aGUgaXNTdHJpbmcgcHJlZGljYXRlXG4gKiAvLyBhbmQgdGhlIHNlY29uZCBlbGVtZW50IGlzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgZGVzY3JpcHRpb24gb2YgdGhlIGlucHV0XG4gKiBsZXQgZmlyc3RUdXBsZSA9IFsgYW5ndWxhci5pc1N0cmluZywgKGlucHV0KSA9PiBgSGVyZXMgeW91ciBzdHJpbmcgJHtpbnB1dH1gIF07XG4gKlxuICogLy8gU2Vjb25kIHR1cGxlOiBwcmVkaWNhdGUgXCJpc051bWJlclwiLCBtYXBmbiByZXR1cm5zIGEgZGVzY3JpcHRpb25cbiAqIGxldCBzZWNvbmRUdXBsZSA9IFsgYW5ndWxhci5pc051bWJlciwgKGlucHV0KSA9PiBgKCR7aW5wdXR9KSBUaGF0J3MgYSBudW1iZXIhYCBdO1xuICpcbiAqIGxldCB0aGlyZCA9IFsgKGlucHV0KSA9PiBpbnB1dCA9PT0gbnVsbCwgIChpbnB1dCkgPT4gYE9oLCBudWxsLi4uYCBdO1xuICpcbiAqIGxldCBmb3VydGggPSBbIChpbnB1dCkgPT4gaW5wdXQgPT09IHVuZGVmaW5lZCwgIChpbnB1dCkgPT4gYG5vdGRlZmluZWRgIF07XG4gKlxuICogbGV0IGRlc2NyaXB0aW9uT2YgPSBwYXR0ZXJuKFsgZmlyc3RUdXBsZSwgc2Vjb25kVHVwbGUsIHRoaXJkLCBmb3VydGggXSk7XG4gKlxuICogY29uc29sZS5sb2coZGVzY3JpcHRpb25PZih1bmRlZmluZWQpKTsgLy8gJ25vdGRlZmluZWQnXG4gKiBjb25zb2xlLmxvZyhkZXNjcmlwdGlvbk9mKDU1KSk7IC8vICcoNTUpIFRoYXQncyBhIG51bWJlciEnXG4gKiBjb25zb2xlLmxvZyhkZXNjcmlwdGlvbk9mKFwiZm9vXCIpKTsgLy8gJ0hlcmUncyB5b3VyIHN0cmluZyBmb28nXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gc3RydWN0IEEgMkQgYXJyYXkuICBFYWNoIGVsZW1lbnQgb2YgdGhlIGFycmF5IHNob3VsZCBiZSBhbiBhcnJheSwgYSAyLXR1cGxlLFxuICogd2l0aCBhIFByZWRpY2F0ZSBhbmQgYSBtYXBwaW5nL291dHB1dCBmdW5jdGlvblxuICogQHJldHVybnMge2Z1bmN0aW9uKGFueSk6ICp9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXR0ZXJuKHN0cnVjdDogRnVuY3Rpb25bXVtdKTogRnVuY3Rpb24ge1xuICByZXR1cm4gZnVuY3Rpb24oeDogYW55KSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJ1Y3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChzdHJ1Y3RbaV1bMF0oeCkpIHJldHVybiBzdHJ1Y3RbaV1bMV0oeCk7XG4gICAgfVxuICB9O1xufVxuIiwiLyoqIFByZWRpY2F0ZXNcbiAqXG4gKiBUaGVzZSBwcmVkaWNhdGVzIHJldHVybiB0cnVlL2ZhbHNlIGJhc2VkIG9uIHRoZSBpbnB1dC5cbiAqIEFsdGhvdWdoIHRoZXNlIGZ1bmN0aW9ucyBhcmUgZXhwb3J0ZWQsIHRoZXkgYXJlIHN1YmplY3QgdG8gY2hhbmdlIHdpdGhvdXQgbm90aWNlLlxuICpcbiAqIEBtb2R1bGUgY29tbW9uX3ByZWRpY2F0ZXNcbiAqLyAvKiogKi9cbmltcG9ydCB7IGFuZCwgbm90LCBwaXBlLCBwcm9wLCBvciB9IGZyb20gJy4vaG9mJztcbmltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gJy4vY29tbW9uJzsgLy8gaGFzIG9yIGlzIHVzaW5nXG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4uL3N0YXRlL3N0YXRlT2JqZWN0JztcblxuY29uc3QgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuY29uc3QgdGlzID0gKHQ6IHN0cmluZykgPT4gKHg6IGFueSkgPT4gdHlwZW9mIHggPT09IHQ7XG5leHBvcnQgY29uc3QgaXNVbmRlZmluZWQgPSB0aXMoJ3VuZGVmaW5lZCcpO1xuZXhwb3J0IGNvbnN0IGlzRGVmaW5lZCA9IG5vdChpc1VuZGVmaW5lZCk7XG5leHBvcnQgY29uc3QgaXNOdWxsID0gKG86IGFueSkgPT4gbyA9PT0gbnVsbDtcbmV4cG9ydCBjb25zdCBpc051bGxPclVuZGVmaW5lZCA9IG9yKGlzTnVsbCwgaXNVbmRlZmluZWQpO1xuZXhwb3J0IGNvbnN0IGlzRnVuY3Rpb246ICh4OiBhbnkpID0+IHggaXMgRnVuY3Rpb24gPSA8YW55PnRpcygnZnVuY3Rpb24nKTtcbmV4cG9ydCBjb25zdCBpc051bWJlcjogKHg6IGFueSkgPT4geCBpcyBudW1iZXIgPSA8YW55PnRpcygnbnVtYmVyJyk7XG5leHBvcnQgY29uc3QgaXNTdHJpbmcgPSA8KHg6IGFueSkgPT4geCBpcyBzdHJpbmc+dGlzKCdzdHJpbmcnKTtcbmV4cG9ydCBjb25zdCBpc09iamVjdCA9ICh4OiBhbnkpID0+IHggIT09IG51bGwgJiYgdHlwZW9mIHggPT09ICdvYmplY3QnO1xuZXhwb3J0IGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuZXhwb3J0IGNvbnN0IGlzRGF0ZTogKHg6IGFueSkgPT4geCBpcyBEYXRlID0gPGFueT4oKHg6IGFueSkgPT4gdG9TdHIuY2FsbCh4KSA9PT0gJ1tvYmplY3QgRGF0ZV0nKTtcbmV4cG9ydCBjb25zdCBpc1JlZ0V4cDogKHg6IGFueSkgPT4geCBpcyBSZWdFeHAgPSA8YW55PigoeDogYW55KSA9PiB0b1N0ci5jYWxsKHgpID09PSAnW29iamVjdCBSZWdFeHBdJyk7XG5cbi8qKlxuICogUHJlZGljYXRlIHdoaWNoIGNoZWNrcyBpZiBhIHZhbHVlIGlzIGluamVjdGFibGVcbiAqXG4gKiBBIHZhbHVlIGlzIFwiaW5qZWN0YWJsZVwiIGlmIGl0IGlzIGEgZnVuY3Rpb24sIG9yIGlmIGl0IGlzIGFuIG5nMSBhcnJheS1ub3RhdGlvbi1zdHlsZSBhcnJheVxuICogd2hlcmUgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUgYXJyYXkgYXJlIFN0cmluZ3MsIGV4Y2VwdCB0aGUgbGFzdCBvbmUsIHdoaWNoIGlzIGEgRnVuY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSW5qZWN0YWJsZSh2YWw6IGFueSkge1xuICBpZiAoaXNBcnJheSh2YWwpICYmIHZhbC5sZW5ndGgpIHtcbiAgICBjb25zdCBoZWFkID0gdmFsLnNsaWNlKDAsIC0xKSxcbiAgICAgIHRhaWwgPSB2YWwuc2xpY2UoLTEpO1xuICAgIHJldHVybiAhKGhlYWQuZmlsdGVyKG5vdChpc1N0cmluZykpLmxlbmd0aCB8fCB0YWlsLmZpbHRlcihub3QoaXNGdW5jdGlvbikpLmxlbmd0aCk7XG4gIH1cbiAgcmV0dXJuIGlzRnVuY3Rpb24odmFsKTtcbn1cblxuLyoqXG4gKiBQcmVkaWNhdGUgd2hpY2ggY2hlY2tzIGlmIGEgdmFsdWUgbG9va3MgbGlrZSBhIFByb21pc2VcbiAqXG4gKiBJdCBpcyBwcm9iYWJseSBhIFByb21pc2UgaWYgaXQncyBhbiBvYmplY3QsIGFuZCBpdCBoYXMgYSBgdGhlbmAgcHJvcGVydHkgd2hpY2ggaXMgYSBGdW5jdGlvblxuICovXG5leHBvcnQgY29uc3QgaXNQcm9taXNlID0gPCh4OiBhbnkpID0+IHggaXMgUHJvbWlzZTxhbnk+PmFuZChcbiAgaXNPYmplY3QsXG4gIHBpcGUoXG4gICAgcHJvcCgndGhlbicpLFxuICAgIGlzRnVuY3Rpb25cbiAgKVxuKTtcbiIsIi8qKlxuICogVGhpcyBtb2R1bGUgaXMgYSBzdHViIGZvciBjb3JlIHNlcnZpY2VzIHN1Y2ggYXMgRGVwZW5kZW5jeSBJbmplY3Rpb24gb3IgQnJvd3NlciBMb2NhdGlvbi5cbiAqIENvcmUgc2VydmljZXMgbWF5IGJlIGltcGxlbWVudGVkIGJ5IGEgc3BlY2lmaWMgZnJhbWV3b3JrLCBzdWNoIGFzIG5nMSBvciBuZzIsIG9yIGJlIHB1cmUgamF2YXNjcmlwdC5cbiAqXG4gKiBAcHVibGljYXBpIEBtb2R1bGUgY29tbW9uXG4gKi8gLyoqICovXG5pbXBvcnQgeyBJSW5qZWN0YWJsZSwgT2JqIH0gZnJvbSAnLi9jb21tb24nO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBVcmxDb25maWcsIFVybFNlcnZpY2UgfSBmcm9tICcuLi91cmwnO1xuXG5jb25zdCBub0ltcGwgPSAoZm5uYW1lOiBzdHJpbmcpID0+ICgpID0+IHtcbiAgdGhyb3cgbmV3IEVycm9yKGBObyBpbXBsZW1lbnRhdGlvbiBmb3IgJHtmbm5hbWV9LiBUaGUgZnJhbWV3b3JrIHNwZWNpZmljIGNvZGUgZGlkIG5vdCBpbXBsZW1lbnQgdGhpcyBtZXRob2QuYCk7XG59O1xuXG5leHBvcnQgY29uc3QgbWFrZVN0dWIgPSA8VD4oc2VydmljZTogc3RyaW5nLCBtZXRob2RzOiAoa2V5b2YgVClbXSk6IFQgPT5cbiAgbWV0aG9kcy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoKGFjY1trZXldID0gbm9JbXBsKGAke3NlcnZpY2V9LiR7a2V5fSgpYCkgYXMgYW55KSwgYWNjKSwge30gYXMgVCk7XG5cbmNvbnN0IHNlcnZpY2VzOiBDb3JlU2VydmljZXMgPSB7XG4gICRxOiB1bmRlZmluZWQsXG4gICRpbmplY3RvcjogdW5kZWZpbmVkLFxufTtcblxuZXhwb3J0IGludGVyZmFjZSAkUUxpa2VEZWZlcnJlZCB7XG4gIHJlc29sdmU6ICh2YWw/OiBhbnkpID0+IHZvaWQ7XG4gIHJlamVjdDogKHJlYXNvbj86IGFueSkgPT4gdm9pZDtcbiAgcHJvbWlzZTogUHJvbWlzZTxhbnk+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlICRRTGlrZSB7XG4gIHdoZW48VD4odmFsdWU/OiBUIHwgUHJvbWlzZUxpa2U8VD4pOiBQcm9taXNlPFQ+O1xuICByZWplY3Q8VD4ocmVhc29uOiBhbnkpOiBQcm9taXNlPFQ+O1xuICBkZWZlcigpOiAkUUxpa2VEZWZlcnJlZDtcbiAgYWxsKHByb21pc2VzOiB7IFtrZXk6IHN0cmluZ106IFByb21pc2U8YW55PiB9KTogUHJvbWlzZTxhbnk+O1xuICBhbGwocHJvbWlzZXM6IFByb21pc2U8YW55PltdKTogUHJvbWlzZTxhbnlbXT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgJEluamVjdG9yTGlrZSB7XG4gIHN0cmljdERpPzogYm9vbGVhbjtcbiAgZ2V0KHRva2VuOiBhbnkpOiBhbnk7XG4gIGdldDxUPih0b2tlbjogYW55KTogVDtcbiAgaGFzKHRva2VuOiBhbnkpOiBib29sZWFuO1xuICBpbnZva2UoZm46IElJbmplY3RhYmxlLCBjb250ZXh0PzogYW55LCBsb2NhbHM/OiBPYmopOiBhbnk7XG4gIGFubm90YXRlKGZuOiBJSW5qZWN0YWJsZSwgc3RyaWN0RGk/OiBib29sZWFuKTogYW55W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29yZVNlcnZpY2VzIHtcbiAgJHE6ICRRTGlrZTtcbiAgJGluamVjdG9yOiAkSW5qZWN0b3JMaWtlO1xufVxuXG4vKipcbiAqIEhhbmRsZXMgbG93IGxldmVsIFVSTCByZWFkL3dyaXRlXG4gKlxuICogVGhpcyBzZXJ2aWNlIGhhbmRsZXMgbG93IGxldmVsIHJlYWRzIGFuZCB1cGRhdGVzIG9mIHRoZSBVUkwgYW5kIGxpc3RlbnMgZm9yIHVybCBjaGFuZ2VzLlxuICogSW1wbGVtZW50b3JzIHNob3VsZCBwYXNzIHRoZXNlIHRocm91Z2ggdG8gdGhlIHVuZGVybHlpbmcgVVJMIG1lY2hhbmlzbS5cbiAqIFRoZSB1bmRlcmx5aW5nIFVSTCBtZWNoYW5pc20gbWlnaHQgYmUgYnJvd3NlciBBUElzLCBmcmFtZXdvcmsgQVBJcywgb3Igc29tZSAzcmQgcGFydHkgVVJMIG1hbmFnZW1lbnQgbGlicmFyeS5cbiAqXG4gKiBVSS1Sb3V0ZXIgQ29yZSBpbmNsdWRlcyB0aHJlZSBiYXNpYyBpbXBsZW1lbnRhdGlvbnM6XG4gKlxuICogLSBbW1B1c2hTdGF0ZUxvY2F0aW9uU2VydmljZV1dXG4gKiAtIFtbSGFzaExvY2F0aW9uU2VydmljZV1dXG4gKiAtIFtbTWVtb3J5TG9jYXRpb25TZXJ2aWNlXV1cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMb2NhdGlvblNlcnZpY2VzIGV4dGVuZHMgRGlzcG9zYWJsZSB7XG4gIC8qKiBTZWU6IFtbVXJsU2VydmljZS51cmxdXSAqLyB1cmw6IFVybFNlcnZpY2VbJ3VybCddO1xuICAvKiogU2VlOiBbW1VybFNlcnZpY2UucGF0aF1dICovIHBhdGg6IFVybFNlcnZpY2VbJ3BhdGgnXTtcbiAgLyoqIFNlZTogW1tVcmxTZXJ2aWNlLnNlYXJjaF1dICovIHNlYXJjaDogVXJsU2VydmljZVsnc2VhcmNoJ107XG4gIC8qKiBTZWU6IFtbVXJsU2VydmljZS5oYXNoXV0gKi8gaGFzaDogVXJsU2VydmljZVsnaGFzaCddO1xuICAvKiogU2VlOiBbW1VybFNlcnZpY2Uub25DaGFuZ2VdXSAqLyBvbkNoYW5nZTogVXJsU2VydmljZVsnb25DaGFuZ2UnXTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGxvdyBsZXZlbCBVUkwgY29uZmlndXJhdGlvbiBhbmQgbWV0YWRhdGFcbiAqXG4gKiBUaGlzIHNlcnZpY2UgcmV0dXJucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbG9jYXRpb24gY29uZmlndXJhdGlvbi5cbiAqIFRoaXMgc2VydmljZSBpcyBwcmltYXJpbHkgdXNlZCB3aGVuIGJ1aWxkaW5nIFVSTHMgKGUuZy4sIGZvciBgaHJlZnNgKVxuICpcbiAqIEltcGxlbWVudG9ycyBzaG91bGQgcGFzcyB0aGVzZSB0aHJvdWdoIHRvIHRoZSB1bmRlcmx5aW5nIFVSTCBBUElzLlxuICogVGhlIHVuZGVybHlpbmcgVVJMIG1lY2hhbmlzbSBtaWdodCBiZSBicm93c2VyIEFQSXMsIGZyYW1ld29yayBBUElzLCBvciBzb21lIDNyZCBwYXJ0eSBVUkwgbWFuYWdlbWVudCBsaWJyYXJ5LlxuICpcbiAqIFVJLVJvdXRlciBDb3JlIGluY2x1ZGVzIHR3byBiYXNpYyBpbXBsZW1lbnRhdGlvbnM6XG4gKlxuICogLSBbW0Jyb3dzZXJMb2NhdGlvbkNvbmZpZ11dXG4gKiAtIFtbTWVtb3J5TG9jYXRpb25Db25maWddXVxuICovXG5leHBvcnQgaW50ZXJmYWNlIExvY2F0aW9uQ29uZmlnIGV4dGVuZHMgRGlzcG9zYWJsZSB7XG4gIC8qKiBTZWU6IFtbVXJsQ29uZmlnLnBvcnRdXSAqLyBwb3J0OiBVcmxDb25maWdbJ3BvcnQnXTtcbiAgLyoqIFNlZTogW1tVcmxDb25maWcucHJvdG9jb2xdXSAqLyBwcm90b2NvbDogVXJsQ29uZmlnWydwcm90b2NvbCddO1xuICAvKiogU2VlOiBbW1VybENvbmZpZy5ob3N0XV0gKi8gaG9zdDogVXJsQ29uZmlnWydob3N0J107XG4gIC8qKiBTZWU6IFtbVXJsQ29uZmlnLmJhc2VIcmVmXV0gKi8gYmFzZUhyZWY6IFVybENvbmZpZ1snYmFzZUhyZWYnXTtcbiAgLyoqIFNlZTogW1tVcmxDb25maWcuaHRtbDVNb2RlXV0gKi8gaHRtbDVNb2RlOiBVcmxDb25maWdbJ2h0bWw1TW9kZSddO1xuICAvKiogU2VlOiBbW1VybENvbmZpZy5oYXNoUHJlZml4XV0gKi8gaGFzaFByZWZpeDogVXJsQ29uZmlnWydoYXNoUHJlZml4J107XG59XG5cbmV4cG9ydCB7IHNlcnZpY2VzIH07XG4iLCIvKipcbiAqIFJhbmRvbSB1dGlsaXR5IGZ1bmN0aW9ucyB1c2VkIGluIHRoZSBVSS1Sb3V0ZXIgY29kZVxuICpcbiAqIFRoZXNlIGZ1bmN0aW9ucyBhcmUgZXhwb3J0ZWQsIGJ1dCBhcmUgc3ViamVjdCB0byBjaGFuZ2Ugd2l0aG91dCBub3RpY2UuXG4gKlxuICogQHByZWZlcnJlZCBAcHVibGljYXBpIEBtb2R1bGUgY29tbW9uXG4gKi8gLyoqICovXG5pbXBvcnQgeyBpc0Z1bmN0aW9uLCBpc1N0cmluZywgaXNBcnJheSwgaXNSZWdFeHAsIGlzRGF0ZSB9IGZyb20gJy4vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBhbGwsIGFueSwgcHJvcCwgY3VycnksIG5vdCB9IGZyb20gJy4vaG9mJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZU9iamVjdCc7XG5cbmRlY2xhcmUgY29uc3QgZ2xvYmFsO1xuZXhwb3J0IGNvbnN0IHJvb3Q6IGFueSA9XG4gICh0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmICYmIHNlbGYpIHx8XG4gICh0eXBlb2YgZ2xvYmFsID09PSAnb2JqZWN0JyAmJiBnbG9iYWwuZ2xvYmFsID09PSBnbG9iYWwgJiYgZ2xvYmFsKSB8fFxuICB0aGlzO1xuY29uc3QgYW5ndWxhciA9IHJvb3QuYW5ndWxhciB8fCB7fTtcblxuZXhwb3J0IGNvbnN0IGZyb21Kc29uID0gYW5ndWxhci5mcm9tSnNvbiB8fCBKU09OLnBhcnNlLmJpbmQoSlNPTik7XG5leHBvcnQgY29uc3QgdG9Kc29uID0gYW5ndWxhci50b0pzb24gfHwgSlNPTi5zdHJpbmdpZnkuYmluZChKU09OKTtcbmV4cG9ydCBjb25zdCBmb3JFYWNoID0gYW5ndWxhci5mb3JFYWNoIHx8IF9mb3JFYWNoO1xuZXhwb3J0IGNvbnN0IGV4dGVuZCA9IE9iamVjdC5hc3NpZ24gfHwgX2V4dGVuZDtcbmV4cG9ydCBjb25zdCBlcXVhbHMgPSBhbmd1bGFyLmVxdWFscyB8fCBfZXF1YWxzO1xuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KHg6IGFueSkge1xuICByZXR1cm4geDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBub29wKCk6IGFueSB7fVxuXG5leHBvcnQgdHlwZSBNYXBwZXI8WCwgVD4gPSAoeDogWCwga2V5Pzogc3RyaW5nIHwgbnVtYmVyKSA9PiBUO1xuZXhwb3J0IGludGVyZmFjZSBUeXBlZE1hcDxUPiB7XG4gIFtrZXk6IHN0cmluZ106IFQ7XG59XG5leHBvcnQgdHlwZSBQcmVkaWNhdGU8WD4gPSAoeD86IFgpID0+IGJvb2xlYW47XG5leHBvcnQgdHlwZSBQcmVkaWNhdGVCaW5hcnk8WCwgWT4gPSAoeD86IFgsIHk/OiBZKSA9PiBib29sZWFuO1xuLyoqXG4gKiBBbiBuZzEtc3R5bGUgaW5qZWN0YWJsZVxuICpcbiAqIFRoaXMgY291bGQgYmUgYSAobm9uLW1pbmlmaWVkKSBmdW5jdGlvbiBzdWNoIGFzOlxuICogYGBganNcbiAqIGZ1bmN0aW9uIGluamVjdGFibGVGdW5jdGlvbihTb21lRGVwZW5kZW5jeSkge1xuICpcbiAqIH1cbiAqIGBgYFxuICpcbiAqIG9yIGFuIGV4cGxpY2l0bHkgYW5ub3RhdGVkIGZ1bmN0aW9uIChtaW5pZnkgc2FmZSlcbiAqIGBgYGpzXG4gKiBpbmplY3RhYmxlRnVuY3Rpb24uJGluamVjdCA9IFsgJ1NvbWVEZXBlbmRlbmN5JyBdO1xuICogZnVuY3Rpb24gaW5qZWN0YWJsZUZ1bmN0aW9uKFNvbWVEZXBlbmRlbmN5KSB7XG4gKlxuICogfVxuICogYGBgXG4gKlxuICogb3IgYW4gYXJyYXkgc3R5bGUgYW5ub3RhdGVkIGZ1bmN0aW9uIChtaW5pZnkgc2FmZSlcbiAqIGBgYGpzXG4gKiBbJ1NvbWVEZXBlbmRlbmN5JywgZnVuY3Rpb24gaW5qZWN0YWJsZUZ1bmN0aW9uKFNvbWVEZXBlbmRlbmN5KSB7XG4gKlxuICogfV07XG4gKiBgYGBcbiAqXG4gKiBAcHVibGljYXBpXG4gKi9cbmV4cG9ydCB0eXBlIElJbmplY3RhYmxlID0gRnVuY3Rpb24gfCBhbnlbXTtcblxuZXhwb3J0IGludGVyZmFjZSBPYmogZXh0ZW5kcyBPYmplY3Qge1xuICBba2V5OiBzdHJpbmddOiBhbnk7XG59XG5cbi8qKlxuICogQnVpbGRzIHByb3h5IGZ1bmN0aW9ucyBvbiB0aGUgYHRvYCBvYmplY3Qgd2hpY2ggcGFzcyB0aHJvdWdoIHRvIHRoZSBgZnJvbWAgb2JqZWN0LlxuICpcbiAqIEZvciBlYWNoIGtleSBpbiBgZm5OYW1lc2AsIGNyZWF0ZXMgYSBwcm94eSBmdW5jdGlvbiBvbiB0aGUgYHRvYCBvYmplY3QuXG4gKiBUaGUgcHJveHkgZnVuY3Rpb24gY2FsbHMgdGhlIHJlYWwgZnVuY3Rpb24gb24gdGhlIGBmcm9tYCBvYmplY3QuXG4gKlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIFRoaXMgZXhhbXBsZSBjcmVhdGVzIGFuIG5ldyBjbGFzcyBpbnN0YW5jZSB3aG9zZSBmdW5jdGlvbnMgYXJlIHByZWJvdW5kIHRvIHRoZSBuZXcnZCBvYmplY3QuXG4gKiBgYGBqc1xuICogY2xhc3MgRm9vIHtcbiAqICAgY29uc3RydWN0b3IoZGF0YSkge1xuICogICAgIC8vIEJpbmRzIGFsbCBmdW5jdGlvbnMgZnJvbSBGb28ucHJvdG90eXBlIHRvICd0aGlzJyxcbiAqICAgICAvLyB0aGVuIGNvcGllcyB0aGVtIHRvICd0aGlzJ1xuICogICAgIGJpbmRGdW5jdGlvbnMoRm9vLnByb3RvdHlwZSwgdGhpcywgdGhpcyk7XG4gKiAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAqICAgfVxuICpcbiAqICAgbG9nKCkge1xuICogICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YSk7XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBsZXQgbXlGb28gPSBuZXcgRm9vKFsxLDIsM10pO1xuICogdmFyIGxvZ2l0ID0gbXlGb28ubG9nO1xuICogbG9naXQoKTsgLy8gbG9ncyBbMSwgMiwgM10gZnJvbSB0aGUgbXlGb28gJ3RoaXMnIGluc3RhbmNlXG4gKiBgYGBcbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBUaGlzIGV4YW1wbGUgY3JlYXRlcyBhIGJvdW5kIHZlcnNpb24gb2YgYSBzZXJ2aWNlIGZ1bmN0aW9uLCBhbmQgY29waWVzIGl0IHRvIGFub3RoZXIgb2JqZWN0XG4gKiBgYGBcbiAqXG4gKiB2YXIgU29tZVNlcnZpY2UgPSB7XG4gKiAgIHRoaXMuZGF0YSA9IFszLCA0LCA1XTtcbiAqICAgdGhpcy5sb2cgPSBmdW5jdGlvbigpIHtcbiAqICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEpO1xuICogICB9XG4gKiB9XG4gKlxuICogLy8gQ29uc3RydWN0b3IgZm5cbiAqIGZ1bmN0aW9uIE90aGVyVGhpbmcoKSB7XG4gKiAgIC8vIEJpbmRzIGFsbCBmdW5jdGlvbnMgZnJvbSBTb21lU2VydmljZSB0byBTb21lU2VydmljZSxcbiAqICAgLy8gdGhlbiBjb3BpZXMgdGhlbSB0byAndGhpcydcbiAqICAgYmluZEZ1bmN0aW9ucyhTb21lU2VydmljZSwgdGhpcywgU29tZVNlcnZpY2UpO1xuICogfVxuICpcbiAqIGxldCBteU90aGVyVGhpbmcgPSBuZXcgT3RoZXJUaGluZygpO1xuICogbXlPdGhlclRoaW5nLmxvZygpOyAvLyBsb2dzIFszLCA0LCA1XSBmcm9tIFNvbWVTZXJ2aWNlJ3MgJ3RoaXMnXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gc291cmNlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBzb3VyY2Ugb2JqZWN0IHdoaWNoIGNvbnRhaW5zIHRoZSBvcmlnaW5hbCBmdW5jdGlvbnMgdG8gYmUgYm91bmRcbiAqIEBwYXJhbSB0YXJnZXQgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHRhcmdldCBvYmplY3Qgd2hpY2ggd2lsbCByZWNlaXZlIHRoZSBib3VuZCBmdW5jdGlvbnNcbiAqIEBwYXJhbSBiaW5kIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBvYmplY3Qgd2hpY2ggdGhlIGZ1bmN0aW9ucyB3aWxsIGJlIGJvdW5kIHRvXG4gKiBAcGFyYW0gZm5OYW1lcyBUaGUgZnVuY3Rpb24gbmFtZXMgd2hpY2ggd2lsbCBiZSBib3VuZCAoRGVmYXVsdHMgdG8gYWxsIHRoZSBmdW5jdGlvbnMgZm91bmQgb24gdGhlICdmcm9tJyBvYmplY3QpXG4gKiBAcGFyYW0gbGF0ZWJpbmQgSWYgdHJ1ZSwgdGhlIGJpbmRpbmcgb2YgdGhlIGZ1bmN0aW9uIGlzIGRlbGF5ZWQgdW50aWwgdGhlIGZpcnN0IHRpbWUgaXQncyBpbnZva2VkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm94eUZ1bmN0aW9ucyhcbiAgc291cmNlOiBGdW5jdGlvbixcbiAgdGFyZ2V0OiBPYmosXG4gIGJpbmQ6IEZ1bmN0aW9uLFxuICBmbk5hbWVzPzogc3RyaW5nW10sXG4gIGxhdGViaW5kID0gZmFsc2Vcbik6IE9iaiB7XG4gIGNvbnN0IGJpbmRGdW5jdGlvbiA9IGZuTmFtZSA9PiBzb3VyY2UoKVtmbk5hbWVdLmJpbmQoYmluZCgpKTtcblxuICBjb25zdCBtYWtlTGF0ZVJlYmluZEZuID0gZm5OYW1lID0+XG4gICAgZnVuY3Rpb24gbGF0ZVJlYmluZEZ1bmN0aW9uKCkge1xuICAgICAgdGFyZ2V0W2ZuTmFtZV0gPSBiaW5kRnVuY3Rpb24oZm5OYW1lKTtcbiAgICAgIHJldHVybiB0YXJnZXRbZm5OYW1lXS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgZm5OYW1lcyA9IGZuTmFtZXMgfHwgT2JqZWN0LmtleXMoc291cmNlKCkpO1xuXG4gIHJldHVybiBmbk5hbWVzLnJlZHVjZSgoYWNjLCBuYW1lKSA9PiB7XG4gICAgYWNjW25hbWVdID0gbGF0ZWJpbmQgPyBtYWtlTGF0ZVJlYmluZEZuKG5hbWUpIDogYmluZEZ1bmN0aW9uKG5hbWUpO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHRhcmdldCk7XG59XG5cbi8qKlxuICogcHJvdG90eXBhbCBpbmhlcml0YW5jZSBoZWxwZXIuXG4gKiBDcmVhdGVzIGEgbmV3IG9iamVjdCB3aGljaCBoYXMgYHBhcmVudGAgb2JqZWN0IGFzIGl0cyBwcm90b3R5cGUsIGFuZCB0aGVuIGNvcGllcyB0aGUgcHJvcGVydGllcyBmcm9tIGBleHRyYWAgb250byBpdFxuICovXG5leHBvcnQgY29uc3QgaW5oZXJpdCA9IChwYXJlbnQ6IE9iaiwgZXh0cmE/OiBPYmopID0+IGV4dGVuZChPYmplY3QuY3JlYXRlKHBhcmVudCksIGV4dHJhKTtcblxuLyoqIEdpdmVuIGFuIGFycmF5LCByZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBpcyBmb3VuZCBpbiB0aGUgYXJyYXksICh1c2luZyBpbmRleE9mKSAqL1xuZXhwb3J0IGNvbnN0IGluQXJyYXk6IHR5cGVvZiBfaW5BcnJheSA9IGN1cnJ5KF9pbkFycmF5KSBhcyBhbnk7XG5leHBvcnQgZnVuY3Rpb24gX2luQXJyYXkoYXJyYXk6IGFueVtdLCBvYmo6IGFueSk6IGJvb2xlYW47XG5leHBvcnQgZnVuY3Rpb24gX2luQXJyYXkoYXJyYXk6IGFueVtdKTogKG9iajogYW55KSA9PiBib29sZWFuO1xuZXhwb3J0IGZ1bmN0aW9uIF9pbkFycmF5KGFycmF5LCBvYmo/KTogYW55IHtcbiAgcmV0dXJuIGFycmF5LmluZGV4T2Yob2JqKSAhPT0gLTE7XG59XG5cbi8qKlxuICogR2l2ZW4gYW4gYXJyYXksIGFuZCBhbiBpdGVtLCBpZiB0aGUgaXRlbSBpcyBmb3VuZCBpbiB0aGUgYXJyYXksIGl0IHJlbW92ZXMgaXQgKGluLXBsYWNlKS5cbiAqIFRoZSBzYW1lIGFycmF5IGlzIHJldHVybmVkXG4gKi9cbmV4cG9ydCBjb25zdCByZW1vdmVGcm9tOiB0eXBlb2YgX3JlbW92ZUZyb20gPSBjdXJyeShfcmVtb3ZlRnJvbSkgYXMgYW55O1xuZXhwb3J0IGZ1bmN0aW9uIF9yZW1vdmVGcm9tPFQ+KGFycmF5OiBUW10sIG9iajogVCk6IFRbXTtcbmV4cG9ydCBmdW5jdGlvbiBfcmVtb3ZlRnJvbTxUPihhcnJheTogVFtdKTogKG9iajogVCkgPT4gVFtdO1xuZXhwb3J0IGZ1bmN0aW9uIF9yZW1vdmVGcm9tKGFycmF5LCBvYmo/KSB7XG4gIGNvbnN0IGlkeCA9IGFycmF5LmluZGV4T2Yob2JqKTtcbiAgaWYgKGlkeCA+PSAwKSBhcnJheS5zcGxpY2UoaWR4LCAxKTtcbiAgcmV0dXJuIGFycmF5O1xufVxuXG4vKiogcHVzaGVzIGEgdmFsdWVzIHRvIGFuIGFycmF5IGFuZCByZXR1cm5zIHRoZSB2YWx1ZSAqL1xuZXhwb3J0IGNvbnN0IHB1c2hUbzogdHlwZW9mIF9wdXNoVG8gPSBjdXJyeShfcHVzaFRvKSBhcyBhbnk7XG5leHBvcnQgZnVuY3Rpb24gX3B1c2hUbzxUPihhcnI6IFRbXSwgdmFsOiBUKTogVDtcbmV4cG9ydCBmdW5jdGlvbiBfcHVzaFRvPFQ+KGFycjogVFtdKTogKHZhbDogVCkgPT4gVDtcbmV4cG9ydCBmdW5jdGlvbiBfcHVzaFRvKGFyciwgdmFsPyk6IGFueSB7XG4gIHJldHVybiBhcnIucHVzaCh2YWwpLCB2YWw7XG59XG5cbi8qKiBHaXZlbiBhbiBhcnJheSBvZiAoZGVyZWdpc3RyYXRpb24pIGZ1bmN0aW9ucywgY2FsbHMgYWxsIGZ1bmN0aW9ucyBhbmQgcmVtb3ZlcyBlYWNoIG9uZSBmcm9tIHRoZSBzb3VyY2UgYXJyYXkgKi9cbmV4cG9ydCBjb25zdCBkZXJlZ0FsbCA9IChmdW5jdGlvbnM6IEZ1bmN0aW9uW10pID0+XG4gIGZ1bmN0aW9ucy5zbGljZSgpLmZvckVhY2goZm4gPT4ge1xuICAgIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyAmJiBmbigpO1xuICAgIHJlbW92ZUZyb20oZnVuY3Rpb25zLCBmbik7XG4gIH0pO1xuLyoqXG4gKiBBcHBsaWVzIGEgc2V0IG9mIGRlZmF1bHRzIHRvIGFuIG9wdGlvbnMgb2JqZWN0LiAgVGhlIG9wdGlvbnMgb2JqZWN0IGlzIGZpbHRlcmVkXG4gKiB0byBvbmx5IHRob3NlIHByb3BlcnRpZXMgb2YgdGhlIG9iamVjdHMgaW4gdGhlIGRlZmF1bHRzTGlzdC5cbiAqIEVhcmxpZXIgb2JqZWN0cyBpbiB0aGUgZGVmYXVsdHNMaXN0IHRha2UgcHJlY2VkZW5jZSB3aGVuIGFwcGx5aW5nIGRlZmF1bHRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdHMob3B0cywgLi4uZGVmYXVsdHNMaXN0OiBPYmpbXSkge1xuICBjb25zdCBkZWZhdWx0VmFscyA9IGV4dGVuZCh7fSwgLi4uZGVmYXVsdHNMaXN0LnJldmVyc2UoKSk7XG4gIHJldHVybiBleHRlbmQoZGVmYXVsdFZhbHMsIHBpY2sob3B0cyB8fCB7fSwgT2JqZWN0LmtleXMoZGVmYXVsdFZhbHMpKSk7XG59XG5cbi8qKiBSZWR1Y2UgZnVuY3Rpb24gdGhhdCBtZXJnZXMgZWFjaCBlbGVtZW50IG9mIHRoZSBsaXN0IGludG8gYSBzaW5nbGUgb2JqZWN0LCB1c2luZyBleHRlbmQgKi9cbmV4cG9ydCBjb25zdCBtZXJnZVIgPSAobWVtbzogT2JqLCBpdGVtOiBPYmopID0+IGV4dGVuZChtZW1vLCBpdGVtKTtcblxuLyoqXG4gKiBGaW5kcyB0aGUgY29tbW9uIGFuY2VzdG9yIHBhdGggYmV0d2VlbiB0d28gc3RhdGVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBmaXJzdCBUaGUgZmlyc3Qgc3RhdGUuXG4gKiBAcGFyYW0ge09iamVjdH0gc2Vjb25kIFRoZSBzZWNvbmQgc3RhdGUuXG4gKiBAcmV0dXJuIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBzdGF0ZSBuYW1lcyBpbiBkZXNjZW5kaW5nIG9yZGVyLCBub3QgaW5jbHVkaW5nIHRoZSByb290LlxuICovXG5leHBvcnQgZnVuY3Rpb24gYW5jZXN0b3JzKGZpcnN0OiBTdGF0ZU9iamVjdCwgc2Vjb25kOiBTdGF0ZU9iamVjdCkge1xuICBjb25zdCBwYXRoOiBTdGF0ZU9iamVjdFtdID0gW107XG5cbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmZvcmluXG4gIGZvciAoY29uc3QgbiBpbiBmaXJzdC5wYXRoKSB7XG4gICAgaWYgKGZpcnN0LnBhdGhbbl0gIT09IHNlY29uZC5wYXRoW25dKSBicmVhaztcbiAgICBwYXRoLnB1c2goZmlyc3QucGF0aFtuXSk7XG4gIH1cbiAgcmV0dXJuIHBhdGg7XG59XG5cbi8qKlxuICogUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IG9ubHkgY29udGFpbmluZyB0aGUgd2hpdGVsaXN0ZWQgcHJvcGVydGllcy5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBcbiAqIHZhciBmb28gPSB7IGE6IDEsIGI6IDIsIGM6IDMgfTtcbiAqIHZhciBhYiA9IHBpY2soZm9vLCBbJ2EnLCAnYiddKTsgLy8geyBhOiAxLCBiOiAyIH1cbiAqIGBgYFxuICogQHBhcmFtIG9iaiB0aGUgc291cmNlIG9iamVjdFxuICogQHBhcmFtIHByb3BOYW1lcyBhbiBBcnJheSBvZiBzdHJpbmdzLCB3aGljaCBhcmUgdGhlIHdoaXRlbGlzdGVkIHByb3BlcnR5IG5hbWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwaWNrKG9iajogT2JqLCBwcm9wTmFtZXM6IHN0cmluZ1tdKTogT2JqIHtcbiAgY29uc3Qgb2JqQ29weSA9IHt9O1xuICBmb3IgKGNvbnN0IF9wcm9wIGluIG9iaikge1xuICAgIGlmIChwcm9wTmFtZXMuaW5kZXhPZihfcHJvcCkgIT09IC0xKSB7XG4gICAgICBvYmpDb3B5W19wcm9wXSA9IG9ialtfcHJvcF07XG4gICAgfVxuICB9XG4gIHJldHVybiBvYmpDb3B5O1xufVxuXG4vKipcbiAqIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbWl0dGluZyB0aGUgYmxhY2tsaXN0ZWQgcHJvcGVydGllcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogdmFyIGZvbyA9IHsgYTogMSwgYjogMiwgYzogMyB9O1xuICogdmFyIGFiID0gb21pdChmb28sIFsnYScsICdiJ10pOyAvLyB7IGM6IDMgfVxuICogYGBgXG4gKiBAcGFyYW0gb2JqIHRoZSBzb3VyY2Ugb2JqZWN0XG4gKiBAcGFyYW0gcHJvcE5hbWVzIGFuIEFycmF5IG9mIHN0cmluZ3MsIHdoaWNoIGFyZSB0aGUgYmxhY2tsaXN0ZWQgcHJvcGVydHkgbmFtZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9taXQob2JqOiBPYmosIHByb3BOYW1lczogc3RyaW5nW10pOiBPYmoge1xuICByZXR1cm4gT2JqZWN0LmtleXMob2JqKVxuICAgIC5maWx0ZXIobm90KGluQXJyYXkocHJvcE5hbWVzKSkpXG4gICAgLnJlZHVjZSgoYWNjLCBrZXkpID0+ICgoYWNjW2tleV0gPSBvYmpba2V5XSksIGFjYyksIHt9KTtcbn1cblxuLyoqIEdpdmVuIGFuIGFycmF5IG9mIG9iamVjdHMsIG1hcHMgZWFjaCBlbGVtZW50IHRvIGEgbmFtZWQgcHJvcGVydHkgb2YgdGhlIGVsZW1lbnQuICovXG5leHBvcnQgZnVuY3Rpb24gcGx1Y2s8VD4oY29sbGVjdGlvbjogT2JqW10sIHByb3BOYW1lOiBzdHJpbmcpOiBUW107XG4vKiogR2l2ZW4gYW4gb2JqZWN0LCBtYXBzIGVhY2ggcHJvcGVydHkgb2YgdGhlIG9iamVjdCB0byBhIG5hbWVkIHByb3BlcnR5IG9mIHRoZSBwcm9wZXJ0eS4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwbHVjayhjb2xsZWN0aW9uOiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCBwcm9wTmFtZTogc3RyaW5nKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbi8qKlxuICogTWFwcyBhbiBhcnJheSwgb3Igb2JqZWN0IHRvIGEgcHJvcGVydHkgKGJ5IG5hbWUpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwbHVjayhjb2xsZWN0aW9uOiBhbnksIHByb3BOYW1lOiBzdHJpbmcpOiBhbnkge1xuICByZXR1cm4gbWFwKGNvbGxlY3Rpb24sIDxNYXBwZXI8YW55LCBzdHJpbmc+PnByb3AocHJvcE5hbWUpKTtcbn1cblxuLyoqIEdpdmVuIGFuIGFycmF5IG9mIG9iamVjdHMsIHJldHVybnMgYSBuZXcgYXJyYXkgY29udGFpbmluZyBvbmx5IHRoZSBlbGVtZW50cyB3aGljaCBwYXNzZWQgdGhlIGNhbGxiYWNrIHByZWRpY2F0ZSAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxUPihjb2xsZWN0aW9uOiBUW10sIGNhbGxiYWNrOiAodDogVCwga2V5PzogbnVtYmVyKSA9PiBib29sZWFuKTogVFtdO1xuLyoqIEdpdmVuIGFuIG9iamVjdCwgcmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCBvbmx5IHRob3NlIHByb3BlcnRpZXMgdGhhdCBwYXNzZWQgdGhlIGNhbGxiYWNrIHByZWRpY2F0ZSAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxUPihjb2xsZWN0aW9uOiBUeXBlZE1hcDxUPiwgY2FsbGJhY2s6ICh0OiBULCBrZXk/OiBzdHJpbmcpID0+IGJvb2xlYW4pOiBUeXBlZE1hcDxUPjtcbi8qKiBGaWx0ZXJzIGFuIEFycmF5IG9yIGFuIE9iamVjdCdzIHByb3BlcnRpZXMgYmFzZWQgb24gYSBwcmVkaWNhdGUgKi9cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXI8VD4oY29sbGVjdGlvbjogYW55LCBjYWxsYmFjazogRnVuY3Rpb24pOiBUIHtcbiAgY29uc3QgYXJyID0gaXNBcnJheShjb2xsZWN0aW9uKSxcbiAgICByZXN1bHQ6IGFueSA9IGFyciA/IFtdIDoge307XG4gIGNvbnN0IGFjY2VwdCA9IGFyciA/IHggPT4gcmVzdWx0LnB1c2goeCkgOiAoeCwga2V5KSA9PiAocmVzdWx0W2tleV0gPSB4KTtcbiAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbihpdGVtLCBpKSB7XG4gICAgaWYgKGNhbGxiYWNrKGl0ZW0sIGkpKSBhY2NlcHQoaXRlbSwgaSk7XG4gIH0pO1xuICByZXR1cm4gPFQ+cmVzdWx0O1xufVxuXG4vKiogR2l2ZW4gYW4gb2JqZWN0LCByZXR1cm4gdGhlIGZpcnN0IHByb3BlcnR5IG9mIHRoYXQgb2JqZWN0IHdoaWNoIHBhc3NlZCB0aGUgY2FsbGJhY2sgcHJlZGljYXRlICovXG5leHBvcnQgZnVuY3Rpb24gZmluZDxUPihjb2xsZWN0aW9uOiBUeXBlZE1hcDxUPiwgY2FsbGJhY2s6IFByZWRpY2F0ZTxUPik6IFQ7XG4vKiogR2l2ZW4gYW4gYXJyYXkgb2Ygb2JqZWN0cywgcmV0dXJucyB0aGUgZmlyc3Qgb2JqZWN0IHdoaWNoIHBhc3NlZCB0aGUgY2FsbGJhY2sgcHJlZGljYXRlICovXG5leHBvcnQgZnVuY3Rpb24gZmluZDxUPihjb2xsZWN0aW9uOiBUW10sIGNhbGxiYWNrOiBQcmVkaWNhdGU8VD4pOiBUO1xuLyoqIEZpbmRzIGFuIG9iamVjdCBmcm9tIGFuIGFycmF5LCBvciBhIHByb3BlcnR5IG9mIGFuIG9iamVjdCwgdGhhdCBtYXRjaGVzIGEgcHJlZGljYXRlICovXG5leHBvcnQgZnVuY3Rpb24gZmluZChjb2xsZWN0aW9uOiBhbnksIGNhbGxiYWNrOiBhbnkpIHtcbiAgbGV0IHJlc3VsdDtcblxuICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKGl0ZW0sIGkpIHtcbiAgICBpZiAocmVzdWx0KSByZXR1cm47XG4gICAgaWYgKGNhbGxiYWNrKGl0ZW0sIGkpKSByZXN1bHQgPSBpdGVtO1xuICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKiogR2l2ZW4gYW4gb2JqZWN0LCByZXR1cm5zIGEgbmV3IG9iamVjdCwgd2hlcmUgZWFjaCBwcm9wZXJ0eSBpcyB0cmFuc2Zvcm1lZCBieSB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gKi9cbmV4cG9ydCBsZXQgbWFwT2JqOiA8VCwgVT4oXG4gIGNvbGxlY3Rpb246IHsgW2tleTogc3RyaW5nXTogVCB9LFxuICBjYWxsYmFjazogTWFwcGVyPFQsIFU+LFxuICB0YXJnZXQ/OiB0eXBlb2YgY29sbGVjdGlvblxuKSA9PiB7IFtrZXk6IHN0cmluZ106IFUgfSA9IG1hcDtcbi8qKiBHaXZlbiBhbiBhcnJheSwgcmV0dXJucyBhIG5ldyBhcnJheSwgd2hlcmUgZWFjaCBlbGVtZW50IGlzIHRyYW5zZm9ybWVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcDxULCBVPihjb2xsZWN0aW9uOiBUW10sIGNhbGxiYWNrOiBNYXBwZXI8VCwgVT4sIHRhcmdldD86IHR5cGVvZiBjb2xsZWN0aW9uKTogVVtdO1xuZXhwb3J0IGZ1bmN0aW9uIG1hcDxULCBVPihcbiAgY29sbGVjdGlvbjogeyBba2V5OiBzdHJpbmddOiBUIH0sXG4gIGNhbGxiYWNrOiBNYXBwZXI8VCwgVT4sXG4gIHRhcmdldD86IHR5cGVvZiBjb2xsZWN0aW9uXG4pOiB7IFtrZXk6IHN0cmluZ106IFUgfTtcbi8qKiBNYXBzIGFuIGFycmF5IG9yIG9iamVjdCBwcm9wZXJ0aWVzIHVzaW5nIGEgY2FsbGJhY2sgZnVuY3Rpb24gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXAoY29sbGVjdGlvbjogYW55LCBjYWxsYmFjazogYW55LCB0YXJnZXQ6IHR5cGVvZiBjb2xsZWN0aW9uKTogYW55IHtcbiAgdGFyZ2V0ID0gdGFyZ2V0IHx8IChpc0FycmF5KGNvbGxlY3Rpb24pID8gW10gOiB7fSk7XG4gIGZvckVhY2goY29sbGVjdGlvbiwgKGl0ZW0sIGkpID0+ICh0YXJnZXRbaV0gPSBjYWxsYmFjayhpdGVtLCBpKSkpO1xuICByZXR1cm4gdGFyZ2V0O1xufVxuXG4vKipcbiAqIEdpdmVuIGFuIG9iamVjdCwgcmV0dXJuIGl0cyBlbnVtZXJhYmxlIHByb3BlcnR5IHZhbHVlc1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgZm9vID0geyBhOiAxLCBiOiAyLCBjOiAzIH1cbiAqIGxldCB2YWxzID0gdmFsdWVzKGZvbyk7IC8vIFsgMSwgMiwgMyBdXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IHZhbHVlczogKDxUPihvYmo6IFR5cGVkTWFwPFQ+KSA9PiBUW10pID0gKG9iajogT2JqKSA9PiBPYmplY3Qua2V5cyhvYmopLm1hcChrZXkgPT4gb2JqW2tleV0pO1xuXG4vKipcbiAqIFJlZHVjZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiBhbGwgb2YgdGhlIHZhbHVlcyBhcmUgdHJ1dGh5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgdmFscyA9IFsgMSwgdHJ1ZSwge30sIFwiaGVsbG8gd29ybGRcIl07XG4gKiB2YWxzLnJlZHVjZShhbGxUcnVlUiwgdHJ1ZSk7IC8vIHRydWVcbiAqXG4gKiB2YWxzLnB1c2goMCk7XG4gKiB2YWxzLnJlZHVjZShhbGxUcnVlUiwgdHJ1ZSk7IC8vIGZhbHNlXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IGFsbFRydWVSID0gKG1lbW86IGJvb2xlYW4sIGVsZW06IGFueSkgPT4gbWVtbyAmJiBlbGVtO1xuXG4vKipcbiAqIFJlZHVjZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiBhbnkgb2YgdGhlIHZhbHVlcyBhcmUgdHJ1dGh5LlxuICpcbiAqICAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgdmFscyA9IFsgMCwgbnVsbCwgdW5kZWZpbmVkIF07XG4gKiB2YWxzLnJlZHVjZShhbnlUcnVlUiwgdHJ1ZSk7IC8vIGZhbHNlXG4gKlxuICogdmFscy5wdXNoKFwiaGVsbG8gd29ybGRcIik7XG4gKiB2YWxzLnJlZHVjZShhbnlUcnVlUiwgdHJ1ZSk7IC8vIHRydWVcbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgYW55VHJ1ZVIgPSAobWVtbzogYm9vbGVhbiwgZWxlbTogYW55KSA9PiBtZW1vIHx8IGVsZW07XG5cbi8qKlxuICogUmVkdWNlIGZ1bmN0aW9uIHdoaWNoIHVuLW5lc3RzIGEgc2luZ2xlIGxldmVsIG9mIGFycmF5c1xuICogQGV4YW1wbGVcbiAqIGBgYFxuICpcbiAqIGxldCBpbnB1dCA9IFsgWyBcImFcIiwgXCJiXCIgXSwgWyBcImNcIiwgXCJkXCIgXSwgWyBbIFwiZG91YmxlXCIsIFwibmVzdGVkXCIgXSBdIF07XG4gKiBpbnB1dC5yZWR1Y2UodW5uZXN0UiwgW10pIC8vIFsgXCJhXCIsIFwiYlwiLCBcImNcIiwgXCJkXCIsIFsgXCJkb3VibGUsIFwibmVzdGVkXCIgXSBdXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IHVubmVzdFIgPSAobWVtbzogYW55W10sIGVsZW06IGFueVtdKSA9PiBtZW1vLmNvbmNhdChlbGVtKTtcblxuLyoqXG4gKiBSZWR1Y2UgZnVuY3Rpb24gd2hpY2ggcmVjdXJzaXZlbHkgdW4tbmVzdHMgYWxsIGFycmF5c1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgaW5wdXQgPSBbIFsgXCJhXCIsIFwiYlwiIF0sIFsgXCJjXCIsIFwiZFwiIF0sIFsgWyBcImRvdWJsZVwiLCBcIm5lc3RlZFwiIF0gXSBdO1xuICogaW5wdXQucmVkdWNlKHVubmVzdFIsIFtdKSAvLyBbIFwiYVwiLCBcImJcIiwgXCJjXCIsIFwiZFwiLCBcImRvdWJsZSwgXCJuZXN0ZWRcIiBdXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IGZsYXR0ZW5SID0gKG1lbW86IGFueVtdLCBlbGVtOiBhbnkpID0+XG4gIGlzQXJyYXkoZWxlbSkgPyBtZW1vLmNvbmNhdChlbGVtLnJlZHVjZShmbGF0dGVuUiwgW10pKSA6IHB1c2hSKG1lbW8sIGVsZW0pO1xuXG4vKipcbiAqIFJlZHVjZSBmdW5jdGlvbiB0aGF0IHB1c2hlcyBhbiBvYmplY3QgdG8gYW4gYXJyYXksIHRoZW4gcmV0dXJucyB0aGUgYXJyYXkuXG4gKiBNb3N0bHkganVzdCBmb3IgW1tmbGF0dGVuUl1dIGFuZCBbW3VuaXFSXV1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHB1c2hSKGFycjogYW55W10sIG9iajogYW55KSB7XG4gIGFyci5wdXNoKG9iaik7XG4gIHJldHVybiBhcnI7XG59XG5cbi8qKiBSZWR1Y2UgZnVuY3Rpb24gdGhhdCBmaWx0ZXJzIG91dCBkdXBsaWNhdGVzICovXG5leHBvcnQgY29uc3QgdW5pcVIgPSA8VD4oYWNjOiBUW10sIHRva2VuOiBUKTogVFtdID0+IChpbkFycmF5KGFjYywgdG9rZW4pID8gYWNjIDogcHVzaFIoYWNjLCB0b2tlbikpO1xuXG4vKipcbiAqIFJldHVybiBhIG5ldyBhcnJheSB3aXRoIGEgc2luZ2xlIGxldmVsIG9mIGFycmF5cyB1bm5lc3RlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IGlucHV0ID0gWyBbIFwiYVwiLCBcImJcIiBdLCBbIFwiY1wiLCBcImRcIiBdLCBbIFsgXCJkb3VibGVcIiwgXCJuZXN0ZWRcIiBdIF0gXTtcbiAqIHVubmVzdChpbnB1dCkgLy8gWyBcImFcIiwgXCJiXCIsIFwiY1wiLCBcImRcIiwgWyBcImRvdWJsZSwgXCJuZXN0ZWRcIiBdIF1cbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgdW5uZXN0ID0gKGFycjogYW55W10pID0+IGFyci5yZWR1Y2UodW5uZXN0UiwgW10pO1xuLyoqXG4gKiBSZXR1cm4gYSBjb21wbGV0ZWx5IGZsYXR0ZW5lZCB2ZXJzaW9uIG9mIGFuIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgaW5wdXQgPSBbIFsgXCJhXCIsIFwiYlwiIF0sIFsgXCJjXCIsIFwiZFwiIF0sIFsgWyBcImRvdWJsZVwiLCBcIm5lc3RlZFwiIF0gXSBdO1xuICogZmxhdHRlbihpbnB1dCkgLy8gWyBcImFcIiwgXCJiXCIsIFwiY1wiLCBcImRcIiwgXCJkb3VibGUsIFwibmVzdGVkXCIgXVxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBmbGF0dGVuID0gKGFycjogYW55W10pID0+IGFyci5yZWR1Y2UoZmxhdHRlblIsIFtdKTtcblxuLyoqXG4gKiBHaXZlbiBhIC5maWx0ZXIgUHJlZGljYXRlLCBidWlsZHMgYSAuZmlsdGVyIFByZWRpY2F0ZSB3aGljaCB0aHJvd3MgYW4gZXJyb3IgaWYgYW55IGVsZW1lbnRzIGRvIG5vdCBwYXNzLlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICpcbiAqIGxldCBpc051bWJlciA9IChvYmopID0+IHR5cGVvZihvYmopID09PSAnbnVtYmVyJztcbiAqIGxldCBhbGxOdW1iZXJzID0gWyAxLCAyLCAzLCA0LCA1IF07XG4gKiBhbGxOdW1iZXJzLmZpbHRlcihhc3NlcnRQcmVkaWNhdGUoaXNOdW1iZXIpKTsgLy9PS1xuICpcbiAqIGxldCBvbmVTdHJpbmcgPSBbIDEsIDIsIDMsIDQsIFwiNVwiIF07XG4gKiBvbmVTdHJpbmcuZmlsdGVyKGFzc2VydFByZWRpY2F0ZShpc051bWJlciwgXCJOb3QgYWxsIG51bWJlcnNcIikpOyAvLyB0aHJvd3MgRXJyb3IoXCJcIk5vdCBhbGwgbnVtYmVyc1wiXCIpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBhc3NlcnRQcmVkaWNhdGU6IDxUPihwcmVkaWNhdGU6IFByZWRpY2F0ZTxUPiwgZXJyTXNnOiBzdHJpbmcgfCBGdW5jdGlvbikgPT4gUHJlZGljYXRlPFQ+ID0gYXNzZXJ0Rm47XG4vKipcbiAqIEdpdmVuIGEgLm1hcCBmdW5jdGlvbiwgYnVpbGRzIGEgLm1hcCBmdW5jdGlvbiB3aGljaCB0aHJvd3MgYW4gZXJyb3IgaWYgYW55IG1hcHBlZCBlbGVtZW50cyBkbyBub3QgcGFzcyBhIHRydXRoeW5lc3MgdGVzdC5cbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiB2YXIgZGF0YSA9IHsgZm9vOiAxLCBiYXI6IDIgfTtcbiAqXG4gKiBsZXQga2V5cyA9IFsgJ2ZvbycsICdiYXInIF1cbiAqIGxldCB2YWx1ZXMgPSBrZXlzLm1hcChhc3NlcnRNYXAoa2V5ID0+IGRhdGFba2V5XSwgXCJLZXkgbm90IGZvdW5kXCIpKTtcbiAqIC8vIHZhbHVlcyBpcyBbMSwgMl1cbiAqXG4gKiBsZXQga2V5cyA9IFsgJ2ZvbycsICdiYXInLCAnYmF6JyBdXG4gKiBsZXQgdmFsdWVzID0ga2V5cy5tYXAoYXNzZXJ0TWFwKGtleSA9PiBkYXRhW2tleV0sIFwiS2V5IG5vdCBmb3VuZFwiKSk7XG4gKiAvLyB0aHJvd3MgRXJyb3IoXCJLZXkgbm90IGZvdW5kXCIpXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IGFzc2VydE1hcDogPFQsIFU+KG1hcEZuOiAodDogVCkgPT4gVSwgZXJyTXNnOiBzdHJpbmcgfCBGdW5jdGlvbikgPT4gKHQ6IFQpID0+IFUgPSBhc3NlcnRGbjtcbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRGbihwcmVkaWNhdGVPck1hcDogRnVuY3Rpb24sIGVyck1zZzogc3RyaW5nIHwgRnVuY3Rpb24gPSAnYXNzZXJ0IGZhaWx1cmUnKTogYW55IHtcbiAgcmV0dXJuIG9iaiA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gcHJlZGljYXRlT3JNYXAob2JqKTtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGlzRnVuY3Rpb24oZXJyTXNnKSA/ICg8RnVuY3Rpb24+ZXJyTXNnKShvYmopIDogZXJyTXNnKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cblxuLyoqXG4gKiBMaWtlIF8ucGFpcnM6IEdpdmVuIGFuIG9iamVjdCwgcmV0dXJucyBhbiBhcnJheSBvZiBrZXkvdmFsdWUgcGFpcnNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogcGFpcnMoeyBmb286IFwiRk9PXCIsIGJhcjogXCJCQVIgfSkgLy8gWyBbIFwiZm9vXCIsIFwiRk9PXCIgXSwgWyBcImJhclwiOiBcIkJBUlwiIF0gXVxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBwYWlycyA9IChvYmo6IE9iaikgPT4gT2JqZWN0LmtleXMob2JqKS5tYXAoa2V5ID0+IFtrZXksIG9ialtrZXldXSk7XG5cbi8qKlxuICogR2l2ZW4gdHdvIG9yIG1vcmUgcGFyYWxsZWwgYXJyYXlzLCByZXR1cm5zIGFuIGFycmF5IG9mIHR1cGxlcyB3aGVyZVxuICogZWFjaCB0dXBsZSBpcyBjb21wb3NlZCBvZiBbIGFbaV0sIGJbaV0sIC4uLiB6W2ldIF1cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IGZvbyA9IFsgMCwgMiwgNCwgNiBdO1xuICogbGV0IGJhciA9IFsgMSwgMywgNSwgNyBdO1xuICogbGV0IGJheiA9IFsgMTAsIDMwLCA1MCwgNzAgXTtcbiAqIGFycmF5VHVwbGVzKGZvbywgYmFyKTsgICAgICAgLy8gWyBbMCwgMV0sIFsyLCAzXSwgWzQsIDVdLCBbNiwgN10gXVxuICogYXJyYXlUdXBsZXMoZm9vLCBiYXIsIGJheik7ICAvLyBbIFswLCAxLCAxMF0sIFsyLCAzLCAzMF0sIFs0LCA1LCA1MF0sIFs2LCA3LCA3MF0gXVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcnJheVR1cGxlcyguLi5hcmdzOiBhbnlbXSk6IGFueVtdIHtcbiAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSByZXR1cm4gW107XG4gIGNvbnN0IG1heEFycmF5TGVuID0gYXJncy5yZWR1Y2UoKG1pbiwgYXJyKSA9PiBNYXRoLm1pbihhcnIubGVuZ3RoLCBtaW4pLCA5MDA3MTk5MjU0NzQwOTkxKTsgLy8gYWthIDJeNTMg4oiSIDEgYWthIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4QXJyYXlMZW47IGkrKykge1xuICAgIC8vIFRoaXMgaXMgYSBob3QgZnVuY3Rpb25cbiAgICAvLyBVbnJvbGwgd2hlbiB0aGVyZSBhcmUgMS00IGFyZ3VtZW50c1xuICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmVzdWx0LnB1c2goW2FyZ3NbMF1baV1dKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJlc3VsdC5wdXNoKFthcmdzWzBdW2ldLCBhcmdzWzFdW2ldXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICByZXN1bHQucHVzaChbYXJnc1swXVtpXSwgYXJnc1sxXVtpXSwgYXJnc1syXVtpXV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgcmVzdWx0LnB1c2goW2FyZ3NbMF1baV0sIGFyZ3NbMV1baV0sIGFyZ3NbMl1baV0sIGFyZ3NbM11baV1dKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXN1bHQucHVzaChhcmdzLm1hcChhcnJheSA9PiBhcnJheVtpXSkpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFJlZHVjZSBmdW5jdGlvbiB3aGljaCBidWlsZHMgYW4gb2JqZWN0IGZyb20gYW4gYXJyYXkgb2YgW2tleSwgdmFsdWVdIHBhaXJzLlxuICpcbiAqIEVhY2ggaXRlcmF0aW9uIHNldHMgdGhlIGtleS92YWwgcGFpciBvbiB0aGUgbWVtbyBvYmplY3QsIHRoZW4gcmV0dXJucyB0aGUgbWVtbyBmb3IgdGhlIG5leHQgaXRlcmF0aW9uLlxuICpcbiAqIEVhY2gga2V5VmFsdWVUdXBsZSBzaG91bGQgYmUgYW4gYXJyYXkgd2l0aCB2YWx1ZXMgWyBrZXk6IHN0cmluZywgdmFsdWU6IGFueSBdXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICpcbiAqIHZhciBwYWlycyA9IFsgW1wiZm9va2V5XCIsIFwiZm9vdmFsXCJdLCBbXCJiYXJrZXlcIiwgXCJiYXJ2YWxcIl0gXVxuICpcbiAqIHZhciBwYWlyc1RvT2JqID0gcGFpcnMucmVkdWNlKChtZW1vLCBwYWlyKSA9PiBhcHBseVBhaXJzKG1lbW8sIHBhaXIpLCB7fSlcbiAqIC8vIHBhaXJzVG9PYmogPT0geyBmb29rZXk6IFwiZm9vdmFsXCIsIGJhcmtleTogXCJiYXJ2YWxcIiB9XG4gKlxuICogLy8gT3IsIG1vcmUgc2ltcGx5OlxuICogdmFyIHBhaXJzVG9PYmogPSBwYWlycy5yZWR1Y2UoYXBwbHlQYWlycywge30pXG4gKiAvLyBwYWlyc1RvT2JqID09IHsgZm9va2V5OiBcImZvb3ZhbFwiLCBiYXJrZXk6IFwiYmFydmFsXCIgfVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVBhaXJzKG1lbW86IFR5cGVkTWFwPGFueT4sIGtleVZhbFR1cGxlOiBhbnlbXSkge1xuICBsZXQga2V5OiBzdHJpbmcsIHZhbHVlOiBhbnk7XG4gIGlmIChpc0FycmF5KGtleVZhbFR1cGxlKSkgW2tleSwgdmFsdWVdID0ga2V5VmFsVHVwbGU7XG4gIGlmICghaXNTdHJpbmcoa2V5KSkgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHBhcmFtZXRlcnMgdG8gYXBwbHlQYWlycycpO1xuICBtZW1vW2tleV0gPSB2YWx1ZTtcbiAgcmV0dXJuIG1lbW87XG59XG5cbi8qKiBHZXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhbiBhcnJheSAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRhaWw8VD4oYXJyOiBUW10pOiBUIHtcbiAgcmV0dXJuIChhcnIubGVuZ3RoICYmIGFyclthcnIubGVuZ3RoIC0gMV0pIHx8IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBzaGFsbG93IGNvcHkgZnJvbSBzcmMgdG8gZGVzdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY29weShzcmM6IE9iaiwgZGVzdD86IE9iaikge1xuICBpZiAoZGVzdCkgT2JqZWN0LmtleXMoZGVzdCkuZm9yRWFjaChrZXkgPT4gZGVsZXRlIGRlc3Rba2V5XSk7XG4gIGlmICghZGVzdCkgZGVzdCA9IHt9O1xuICByZXR1cm4gZXh0ZW5kKGRlc3QsIHNyYyk7XG59XG5cbi8qKiBOYWl2ZSBmb3JFYWNoIGltcGxlbWVudGF0aW9uIHdvcmtzIHdpdGggT2JqZWN0cyBvciBBcnJheXMgKi9cbmZ1bmN0aW9uIF9mb3JFYWNoKG9iajogYW55W10gfCBhbnksIGNiOiAoZWwsIGlkeD8pID0+IHZvaWQsIF90aGlzOiBPYmopIHtcbiAgaWYgKGlzQXJyYXkob2JqKSkgcmV0dXJuIG9iai5mb3JFYWNoKGNiLCBfdGhpcyk7XG4gIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChrZXkgPT4gY2Iob2JqW2tleV0sIGtleSkpO1xufVxuXG4vKiogTGlrZSBPYmplY3QuYXNzaWduKCkgKi9cbmV4cG9ydCBmdW5jdGlvbiBfZXh0ZW5kKHRvT2JqOiBPYmosIC4uLmZyb21PYmpzOiBPYmpbXSk6IGFueTtcbmV4cG9ydCBmdW5jdGlvbiBfZXh0ZW5kKHRvT2JqOiBPYmopOiBhbnkge1xuICBmb3IgKGxldCBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IG9iaiA9IGFyZ3VtZW50c1tpXTtcbiAgICBpZiAoIW9iaikgY29udGludWU7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGtleXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHRvT2JqW2tleXNbal1dID0gb2JqW2tleXNbal1dO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0b09iajtcbn1cblxuZnVuY3Rpb24gX2VxdWFscyhvMTogYW55LCBvMjogYW55KTogYm9vbGVhbiB7XG4gIGlmIChvMSA9PT0gbzIpIHJldHVybiB0cnVlO1xuICBpZiAobzEgPT09IG51bGwgfHwgbzIgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgaWYgKG8xICE9PSBvMSAmJiBvMiAhPT0gbzIpIHJldHVybiB0cnVlOyAvLyBOYU4gPT09IE5hTlxuICBjb25zdCB0MSA9IHR5cGVvZiBvMSxcbiAgICB0MiA9IHR5cGVvZiBvMjtcbiAgaWYgKHQxICE9PSB0MiB8fCB0MSAhPT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcblxuICBjb25zdCB0dXAgPSBbbzEsIG8yXTtcbiAgaWYgKGFsbChpc0FycmF5KSh0dXApKSByZXR1cm4gX2FycmF5c0VxKG8xLCBvMik7XG4gIGlmIChhbGwoaXNEYXRlKSh0dXApKSByZXR1cm4gbzEuZ2V0VGltZSgpID09PSBvMi5nZXRUaW1lKCk7XG4gIGlmIChhbGwoaXNSZWdFeHApKHR1cCkpIHJldHVybiBvMS50b1N0cmluZygpID09PSBvMi50b1N0cmluZygpO1xuICBpZiAoYWxsKGlzRnVuY3Rpb24pKHR1cCkpIHJldHVybiB0cnVlOyAvLyBtZWhcblxuICBjb25zdCBwcmVkaWNhdGVzID0gW2lzRnVuY3Rpb24sIGlzQXJyYXksIGlzRGF0ZSwgaXNSZWdFeHBdO1xuICBpZiAocHJlZGljYXRlcy5tYXAoYW55KS5yZWR1Y2UoKGIsIGZuKSA9PiBiIHx8ICEhZm4odHVwKSwgZmFsc2UpKSByZXR1cm4gZmFsc2U7XG5cbiAgY29uc3Qga2V5czogeyBbaTogc3RyaW5nXTogYm9vbGVhbiB9ID0ge307XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpmb3JpblxuICBmb3IgKGNvbnN0IGtleSBpbiBvMSkge1xuICAgIGlmICghX2VxdWFscyhvMVtrZXldLCBvMltrZXldKSkgcmV0dXJuIGZhbHNlO1xuICAgIGtleXNba2V5XSA9IHRydWU7XG4gIH1cbiAgZm9yIChjb25zdCBrZXkgaW4gbzIpIHtcbiAgICBpZiAoIWtleXNba2V5XSkgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIF9hcnJheXNFcShhMTogYW55W10sIGEyOiBhbnlbXSkge1xuICBpZiAoYTEubGVuZ3RoICE9PSBhMi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGFycmF5VHVwbGVzKGExLCBhMikucmVkdWNlKChiLCB0KSA9PiBiICYmIF9lcXVhbHModFswXSwgdFsxXSksIHRydWUpO1xufVxuXG4vLyBpc3N1ZSAjMjY3NlxuZXhwb3J0IGNvbnN0IHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZSA9IChwcm9taXNlOiBQcm9taXNlPGFueT4pID0+IHByb21pc2UuY2F0Y2goZSA9PiAwKSAmJiBwcm9taXNlO1xuZXhwb3J0IGNvbnN0IHNpbGVudFJlamVjdGlvbiA9IChlcnJvcjogYW55KSA9PiBzaWxlbmNlVW5jYXVnaHRJblByb21pc2Uoc2VydmljZXMuJHEucmVqZWN0KGVycm9yKSk7XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIGNvcmUgKi9cbi8qKlxuICogTWF0Y2hlcyBzdGF0ZSBuYW1lcyB1c2luZyBnbG9iLWxpa2UgcGF0dGVybiBzdHJpbmdzLlxuICpcbiAqIEdsb2JzIGNhbiBiZSB1c2VkIGluIHNwZWNpZmljIEFQSXMgaW5jbHVkaW5nOlxuICpcbiAqIC0gW1tTdGF0ZVNlcnZpY2UuaXNdXVxuICogLSBbW1N0YXRlU2VydmljZS5pbmNsdWRlc11dXG4gKiAtIFRoZSBmaXJzdCBhcmd1bWVudCB0byBIb29rIFJlZ2lzdHJhdGlvbiBmdW5jdGlvbnMgbGlrZSBbW1RyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnRdXVxuICogICAgLSBbW0hvb2tNYXRjaENyaXRlcmlhXV0gYW5kIFtbSG9va01hdGNoQ3JpdGVyaW9uXV1cbiAqXG4gKiBBIGBHbG9iYCBzdHJpbmcgaXMgYSBwYXR0ZXJuIHdoaWNoIG1hdGNoZXMgc3RhdGUgbmFtZXMuXG4gKiBOZXN0ZWQgc3RhdGUgbmFtZXMgYXJlIHNwbGl0IGludG8gc2VnbWVudHMgKHNlcGFyYXRlZCBieSBhIGRvdCkgd2hlbiBwcm9jZXNzaW5nLlxuICogVGhlIHN0YXRlIG5hbWVkIGBmb28uYmFyLmJhemAgaXMgc3BsaXQgaW50byB0aHJlZSBzZWdtZW50cyBbJ2ZvbycsICdiYXInLCAnYmF6J11cbiAqXG4gKiBHbG9icyB3b3JrIGFjY29yZGluZyB0byB0aGUgZm9sbG93aW5nIHJ1bGVzOlxuICpcbiAqICMjIyBFeGFjdCBtYXRjaDpcbiAqXG4gKiBUaGUgZ2xvYiBgJ0EuQidgIG1hdGNoZXMgdGhlIHN0YXRlIG5hbWVkIGV4YWN0bHkgYCdBLkInYC5cbiAqXG4gKiB8IEdsb2IgICAgICAgIHxNYXRjaGVzIHN0YXRlcyBuYW1lZHxEb2VzIG5vdCBtYXRjaCBzdGF0ZSBuYW1lZHxcbiAqIHw6LS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCBgJ0EnYCAgICAgICB8IGAnQSdgICAgICAgICAgICAgICAgfCBgJ0InYCAsIGAnQS5DJ2AgICAgICB8XG4gKiB8IGAnQS5CJ2AgICAgIHwgYCdBLkInYCAgICAgICAgICAgICB8IGAnQSdgICwgYCdBLkIuQydgICAgIHxcbiAqIHwgYCdmb28nYCAgICAgfCBgJ2ZvbydgICAgICAgICAgICAgIHwgYCdGT08nYCAsIGAnZm9vLmJhcidgfFxuICpcbiAqICMjIyBTaW5nbGUgc3RhciAoYCpgKVxuICpcbiAqIEEgc2luZ2xlIHN0YXIgKGAqYCkgaXMgYSB3aWxkY2FyZCB0aGF0IG1hdGNoZXMgZXhhY3RseSBvbmUgc2VnbWVudC5cbiAqXG4gKiB8IEdsb2IgICAgICAgIHxNYXRjaGVzIHN0YXRlcyBuYW1lZCAgfERvZXMgbm90IG1hdGNoIHN0YXRlIG5hbWVkIHxcbiAqIHw6LS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCBgJyonYCAgICAgICB8IGAnQSdgICwgYCdaJ2AgICAgICAgIHwgYCdBLkInYCAsIGAnWi5ZLlgnYCAgICAgICB8XG4gKiB8IGAnQS4qJ2AgICAgIHwgYCdBLkInYCAsIGAnQS5DJ2AgICAgfCBgJ0EnYCAsIGAnQS5CLkMnYCAgICAgICAgIHxcbiAqIHwgYCdBLiouKidgICAgfCBgJ0EuQi5DJ2AgLCBgJ0EuWC5ZJ2B8IGAnQSdgLCBgJ0EuQidgICwgYCdaLlkuWCdgfFxuICpcbiAqICMjIyBEb3VibGUgc3RhciAoYCoqYClcbiAqXG4gKiBBIGRvdWJsZSBzdGFyIChgJyoqJ2ApIGlzIGEgd2lsZGNhcmQgdGhhdCBtYXRjaGVzICp6ZXJvIG9yIG1vcmUgc2VnbWVudHMqXG4gKlxuICogfCBHbG9iICAgICAgICB8TWF0Y2hlcyBzdGF0ZXMgbmFtZWQgICAgICAgICAgICAgICAgICAgICAgICAgICB8RG9lcyBub3QgbWF0Y2ggc3RhdGUgbmFtZWQgICAgICAgICB8XG4gKiB8Oi0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgYCcqKidgICAgICAgfCBgJ0EnYCAsIGAnQS5CJ2AsIGAnWi5ZLlgnYCAgICAgICAgICAgICAgICAgICAgfCAobWF0Y2hlcyBhbGwgc3RhdGVzKSAgICAgICAgICAgICAgfFxuICogfCBgJ0EuKionYCAgICB8IGAnQSdgICwgYCdBLkInYCAsIGAnQS5DLlgnYCAgICAgICAgICAgICAgICAgICB8IGAnWi5ZLlgnYCAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAnKiouWCdgICAgIHwgYCdYJ2AgLCBgJ0EuWCdgICwgYCdaLlkuWCdgICAgICAgICAgICAgICAgICAgIHwgYCdBJ2AgLCBgJ0EubG9naW4uWidgICAgICAgICAgICAgIHxcbiAqIHwgYCdBLioqLlgnYCAgfCBgJ0EuWCdgICwgYCdBLkIuWCdgICwgYCdBLkIuQy5YJ2AgICAgICAgICAgICAgfCBgJ0EnYCAsIGAnQS5CLkMnYCAgICAgICAgICAgICAgICAgfFxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIEdsb2Ige1xuICB0ZXh0OiBzdHJpbmc7XG4gIGdsb2I6IEFycmF5PHN0cmluZz47XG4gIHJlZ2V4cDogUmVnRXhwO1xuXG4gIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBoYXMgZ2xvYi1saWtlIGNoYXJhY3RlcnMgaW4gaXQgKi9cbiAgc3RhdGljIGlzKHRleHQ6IHN0cmluZykge1xuICAgIHJldHVybiAhIS9bISwqXSsvLmV4ZWModGV4dCk7XG4gIH1cblxuICAvKiogUmV0dXJucyBhIGdsb2IgZnJvbSB0aGUgc3RyaW5nLCBvciBudWxsIGlmIHRoZSBzdHJpbmcgaXNuJ3QgR2xvYi1saWtlICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKHRleHQ6IHN0cmluZykge1xuICAgIHJldHVybiBHbG9iLmlzKHRleHQpID8gbmV3IEdsb2IodGV4dCkgOiBudWxsO1xuICB9XG5cbiAgY29uc3RydWN0b3IodGV4dDogc3RyaW5nKSB7XG4gICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICB0aGlzLmdsb2IgPSB0ZXh0LnNwbGl0KCcuJyk7XG5cbiAgICBjb25zdCByZWdleHBTdHJpbmcgPSB0aGlzLnRleHRcbiAgICAgIC5zcGxpdCgnLicpXG4gICAgICAubWFwKHNlZyA9PiB7XG4gICAgICAgIGlmIChzZWcgPT09ICcqKicpIHJldHVybiAnKD86fCg/OlxcXFwuW14uXSopKiknO1xuICAgICAgICBpZiAoc2VnID09PSAnKicpIHJldHVybiAnXFxcXC5bXi5dKic7XG4gICAgICAgIHJldHVybiAnXFxcXC4nICsgc2VnO1xuICAgICAgfSlcbiAgICAgIC5qb2luKCcnKTtcblxuICAgIHRoaXMucmVnZXhwID0gbmV3IFJlZ0V4cCgnXicgKyByZWdleHBTdHJpbmcgKyAnJCcpO1xuICB9XG5cbiAgbWF0Y2hlcyhuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5yZWdleHAudGVzdCgnLicgKyBuYW1lKTtcbiAgfVxufVxuIiwiLyoqIEBwdWJsaWNhcGkgQG1vZHVsZSBjb21tb24gKi8gLyoqICovXG5pbXBvcnQgeyBwdXNoVG8gfSBmcm9tICcuL2NvbW1vbic7XG5cbmV4cG9ydCBjbGFzcyBRdWV1ZTxUPiB7XG4gIHByaXZhdGUgX2V2aWN0TGlzdGVuZXJzOiAoKGl0ZW06IFQpID0+IHZvaWQpW10gPSBbXTtcbiAgcHVibGljIG9uRXZpY3QgPSBwdXNoVG8odGhpcy5fZXZpY3RMaXN0ZW5lcnMpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2l0ZW1zOiBUW10gPSBbXSwgcHJpdmF0ZSBfbGltaXQ6IG51bWJlciA9IG51bGwpIHt9XG5cbiAgZW5xdWV1ZShpdGVtOiBUKSB7XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLl9pdGVtcztcbiAgICBpdGVtcy5wdXNoKGl0ZW0pO1xuICAgIGlmICh0aGlzLl9saW1pdCAmJiBpdGVtcy5sZW5ndGggPiB0aGlzLl9saW1pdCkgdGhpcy5ldmljdCgpO1xuICAgIHJldHVybiBpdGVtO1xuICB9XG5cbiAgZXZpY3QoKTogVCB7XG4gICAgY29uc3QgaXRlbTogVCA9IHRoaXMuX2l0ZW1zLnNoaWZ0KCk7XG4gICAgdGhpcy5fZXZpY3RMaXN0ZW5lcnMuZm9yRWFjaChmbiA9PiBmbihpdGVtKSk7XG4gICAgcmV0dXJuIGl0ZW07XG4gIH1cblxuICBkZXF1ZXVlKCk6IFQge1xuICAgIGlmICh0aGlzLnNpemUoKSkgcmV0dXJuIHRoaXMuX2l0ZW1zLnNwbGljZSgwLCAxKVswXTtcbiAgfVxuXG4gIGNsZWFyKCk6IEFycmF5PFQ+IHtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5faXRlbXM7XG4gICAgdGhpcy5faXRlbXMgPSBbXTtcbiAgICByZXR1cm4gY3VycmVudDtcbiAgfVxuXG4gIHNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5faXRlbXMubGVuZ3RoO1xuICB9XG5cbiAgcmVtb3ZlKGl0ZW06IFQpIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLl9pdGVtcy5pbmRleE9mKGl0ZW0pO1xuICAgIHJldHVybiBpZHggPiAtMSAmJiB0aGlzLl9pdGVtcy5zcGxpY2UoaWR4LCAxKVswXTtcbiAgfVxuXG4gIHBlZWtUYWlsKCk6IFQge1xuICAgIHJldHVybiB0aGlzLl9pdGVtc1t0aGlzLl9pdGVtcy5sZW5ndGggLSAxXTtcbiAgfVxuXG4gIHBlZWtIZWFkKCk6IFQge1xuICAgIGlmICh0aGlzLnNpemUoKSkgcmV0dXJuIHRoaXMuX2l0ZW1zWzBdO1xuICB9XG59XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIHRyYW5zaXRpb24gKi8gLyoqICovXG4ndXNlIHN0cmljdCc7XG5pbXBvcnQgeyBleHRlbmQsIHNpbGVudFJlamVjdGlvbiB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnLi4vY29tbW9uL3N0cmluZ3MnO1xuaW1wb3J0IHsgaXMgfSBmcm9tICcuLi9jb21tb24vaG9mJztcblxuZW51bSBSZWplY3RUeXBlIHtcbiAgLyoqXG4gICAqIEEgbmV3IHRyYW5zaXRpb24gc3VwZXJzZWRlZCB0aGlzIG9uZS5cbiAgICpcbiAgICogV2hpbGUgdGhpcyB0cmFuc2l0aW9uIHdhcyBydW5uaW5nLCBhIG5ldyB0cmFuc2l0aW9uIHN0YXJ0ZWQuXG4gICAqIFRoaXMgdHJhbnNpdGlvbiBpcyBjYW5jZWxsZWQgYmVjYXVzZSBpdCB3YXMgc3VwZXJzZWRlZCBieSBuZXcgdHJhbnNpdGlvbi5cbiAgICovXG4gIFNVUEVSU0VERUQgPSAyLFxuXG4gIC8qKlxuICAgKiBUaGUgdHJhbnNpdGlvbiB3YXMgYWJvcnRlZFxuICAgKlxuICAgKiBUaGUgdHJhbnNpdGlvbiB3YXMgYWJvcnRlZCBieSBhIGhvb2sgd2hpY2ggcmV0dXJuZWQgYGZhbHNlYFxuICAgKi9cbiAgQUJPUlRFRCA9IDMsXG5cbiAgLyoqXG4gICAqIFRoZSB0cmFuc2l0aW9uIHdhcyBpbnZhbGlkXG4gICAqXG4gICAqIFRoZSB0cmFuc2l0aW9uIHdhcyBuZXZlciBzdGFydGVkIGJlY2F1c2UgaXQgd2FzIGludmFsaWRcbiAgICovXG4gIElOVkFMSUQgPSA0LFxuXG4gIC8qKlxuICAgKiBUaGUgdHJhbnNpdGlvbiB3YXMgaWdub3JlZFxuICAgKlxuICAgKiBUaGUgdHJhbnNpdGlvbiB3YXMgaWdub3JlZCBiZWNhdXNlIGl0IHdvdWxkIGhhdmUgbm8gZWZmZWN0LlxuICAgKlxuICAgKiBFaXRoZXI6XG4gICAqXG4gICAqIC0gVGhlIHRyYW5zaXRpb24gaXMgdGFyZ2V0aW5nIHRoZSBjdXJyZW50IHN0YXRlIGFuZCBwYXJhbWV0ZXIgdmFsdWVzXG4gICAqIC0gVGhlIHRyYW5zaXRpb24gaXMgdGFyZ2V0aW5nIHRoZSBzYW1lIHN0YXRlIGFuZCBwYXJhbWV0ZXIgdmFsdWVzIGFzIHRoZSBjdXJyZW50bHkgcnVubmluZyB0cmFuc2l0aW9uLlxuICAgKi9cbiAgSUdOT1JFRCA9IDUsXG5cbiAgLyoqXG4gICAqIFRoZSB0cmFuc2l0aW9uIGVycm9yZWQuXG4gICAqXG4gICAqIFRoaXMgZ2VuZXJhbGx5IG1lYW5zIGEgaG9vayB0aHJldyBhbiBlcnJvciBvciByZXR1cm5lZCBhIHJlamVjdGVkIHByb21pc2VcbiAgICovXG4gIEVSUk9SID0gNixcbn1cblxuZXhwb3J0IHsgUmVqZWN0VHlwZSB9O1xuXG4vKiogQGhpZGRlbiAqL1xubGV0IGlkID0gMDtcblxuZXhwb3J0IGNsYXNzIFJlamVjdGlvbiB7XG4gIC8qKiBAaGlkZGVuICovXG4gICRpZCA9IGlkKys7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiB0aGUgcmVqZWN0aW9uLlxuICAgKlxuICAgKiBUaGlzIHZhbHVlIGlzIGFuIG51bWJlciByZXByZXNlbnRpbmcgdGhlIHR5cGUgb2YgdHJhbnNpdGlvbiByZWplY3Rpb24uXG4gICAqIElmIHVzaW5nIFR5cGVzY3JpcHQsIHRoaXMgaXMgYSBUeXBlc2NyaXB0IGVudW0uXG4gICAqXG4gICAqIC0gW1tSZWplY3RUeXBlLlNVUEVSU0VERURdXSAoYDJgKVxuICAgKiAtIFtbUmVqZWN0VHlwZS5BQk9SVEVEXV0gKGAzYClcbiAgICogLSBbW1JlamVjdFR5cGUuSU5WQUxJRF1dIChgNGApXG4gICAqIC0gW1tSZWplY3RUeXBlLklHTk9SRURdXSAoYDVgKVxuICAgKiAtIFtbUmVqZWN0VHlwZS5FUlJPUl1dIChgNmApXG4gICAqXG4gICAqL1xuICB0eXBlOiBSZWplY3RUeXBlO1xuXG4gIC8qKlxuICAgKiBBIG1lc3NhZ2UgZGVzY3JpYmluZyB0aGUgcmVqZWN0aW9uXG4gICAqL1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEEgZGV0YWlsIG9iamVjdFxuICAgKlxuICAgKiBUaGlzIHZhbHVlIHZhcmllcyBiYXNlZCBvbiB0aGUgbWVjaGFuaXNtIGZvciByZWplY3RpbmcgdGhlIHRyYW5zaXRpb24uXG4gICAqIEZvciBleGFtcGxlLCBpZiBhbiBlcnJvciB3YXMgdGhyb3duIGZyb20gYSBob29rLCB0aGUgYGRldGFpbGAgd2lsbCBiZSB0aGUgYEVycm9yYCBvYmplY3QuXG4gICAqIElmIGEgaG9vayByZXR1cm5lZCBhIHJlamVjdGVkIHByb21pc2UsIHRoZSBgZGV0YWlsYCB3aWxsIGJlIHRoZSByZWplY3RlZCB2YWx1ZS5cbiAgICovXG4gIGRldGFpbDogYW55O1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgaWYgdGhlIHRyYW5zaXRpb24gd2FzIHJlZGlyZWN0ZWQuXG4gICAqXG4gICAqIFdoZW4gYSB0cmFuc2l0aW9uIGlzIHJlZGlyZWN0ZWQsIHRoZSByZWplY3Rpb24gW1t0eXBlXV0gd2lsbCBiZSBbW1JlamVjdFR5cGUuU1VQRVJTRURFRF1dIGFuZCB0aGlzIGZsYWcgd2lsbCBiZSB0cnVlLlxuICAgKi9cbiAgcmVkaXJlY3RlZDogYm9vbGVhbjtcblxuICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBvYmogaXMgYSByZWplY3RlZCBwcm9taXNlIGNyZWF0ZWQgZnJvbSB0aGUgYGFzUHJvbWlzZWAgZmFjdG9yeSAqL1xuICBzdGF0aWMgaXNSZWplY3Rpb25Qcm9taXNlKG9iajogYW55KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIG9iaiAmJiB0eXBlb2Ygb2JqLnRoZW4gPT09ICdmdW5jdGlvbicgJiYgaXMoUmVqZWN0aW9uKShvYmouX3RyYW5zaXRpb25SZWplY3Rpb24pO1xuICB9XG5cbiAgLyoqIFJldHVybnMgYSBSZWplY3Rpb24gZHVlIHRvIHRyYW5zaXRpb24gc3VwZXJzZWRlZCAqL1xuICBzdGF0aWMgc3VwZXJzZWRlZChkZXRhaWw/OiBhbnksIG9wdGlvbnM/OiBhbnkpOiBSZWplY3Rpb24ge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAnVGhlIHRyYW5zaXRpb24gaGFzIGJlZW4gc3VwZXJzZWRlZCBieSBhIGRpZmZlcmVudCB0cmFuc2l0aW9uJztcbiAgICBjb25zdCByZWplY3Rpb24gPSBuZXcgUmVqZWN0aW9uKFJlamVjdFR5cGUuU1VQRVJTRURFRCwgbWVzc2FnZSwgZGV0YWlsKTtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnJlZGlyZWN0ZWQpIHtcbiAgICAgIHJlamVjdGlvbi5yZWRpcmVjdGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlamVjdGlvbjtcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIGEgUmVqZWN0aW9uIGR1ZSB0byByZWRpcmVjdGVkIHRyYW5zaXRpb24gKi9cbiAgc3RhdGljIHJlZGlyZWN0ZWQoZGV0YWlsPzogYW55KTogUmVqZWN0aW9uIHtcbiAgICByZXR1cm4gUmVqZWN0aW9uLnN1cGVyc2VkZWQoZGV0YWlsLCB7IHJlZGlyZWN0ZWQ6IHRydWUgfSk7XG4gIH1cblxuICAvKiogUmV0dXJucyBhIFJlamVjdGlvbiBkdWUgdG8gaW52YWxpZCB0cmFuc2l0aW9uICovXG4gIHN0YXRpYyBpbnZhbGlkKGRldGFpbD86IGFueSk6IFJlamVjdGlvbiB7XG4gICAgY29uc3QgbWVzc2FnZSA9ICdUaGlzIHRyYW5zaXRpb24gaXMgaW52YWxpZCc7XG4gICAgcmV0dXJuIG5ldyBSZWplY3Rpb24oUmVqZWN0VHlwZS5JTlZBTElELCBtZXNzYWdlLCBkZXRhaWwpO1xuICB9XG5cbiAgLyoqIFJldHVybnMgYSBSZWplY3Rpb24gZHVlIHRvIGlnbm9yZWQgdHJhbnNpdGlvbiAqL1xuICBzdGF0aWMgaWdub3JlZChkZXRhaWw/OiBhbnkpOiBSZWplY3Rpb24ge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAnVGhlIHRyYW5zaXRpb24gd2FzIGlnbm9yZWQnO1xuICAgIHJldHVybiBuZXcgUmVqZWN0aW9uKFJlamVjdFR5cGUuSUdOT1JFRCwgbWVzc2FnZSwgZGV0YWlsKTtcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIGEgUmVqZWN0aW9uIGR1ZSB0byBhYm9ydGVkIHRyYW5zaXRpb24gKi9cbiAgc3RhdGljIGFib3J0ZWQoZGV0YWlsPzogYW55KTogUmVqZWN0aW9uIHtcbiAgICBjb25zdCBtZXNzYWdlID0gJ1RoZSB0cmFuc2l0aW9uIGhhcyBiZWVuIGFib3J0ZWQnO1xuICAgIHJldHVybiBuZXcgUmVqZWN0aW9uKFJlamVjdFR5cGUuQUJPUlRFRCwgbWVzc2FnZSwgZGV0YWlsKTtcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIGEgUmVqZWN0aW9uIGR1ZSB0byBhYm9ydGVkIHRyYW5zaXRpb24gKi9cbiAgc3RhdGljIGVycm9yZWQoZGV0YWlsPzogYW55KTogUmVqZWN0aW9uIHtcbiAgICBjb25zdCBtZXNzYWdlID0gJ1RoZSB0cmFuc2l0aW9uIGVycm9yZWQnO1xuICAgIHJldHVybiBuZXcgUmVqZWN0aW9uKFJlamVjdFR5cGUuRVJST1IsIG1lc3NhZ2UsIGRldGFpbCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIFJlamVjdGlvblxuICAgKlxuICAgKiBOb3JtYWxpemVzIGEgdmFsdWUgYXMgYSBSZWplY3Rpb24uXG4gICAqIElmIHRoZSB2YWx1ZSBpcyBhbHJlYWR5IGEgUmVqZWN0aW9uLCByZXR1cm5zIGl0LlxuICAgKiBPdGhlcndpc2UsIHdyYXBzIGFuZCByZXR1cm5zIHRoZSB2YWx1ZSBhcyBhIFJlamVjdGlvbiAoUmVqZWN0aW9uIHR5cGU6IEVSUk9SKS5cbiAgICpcbiAgICogQHJldHVybnMgYGRldGFpbGAgaWYgaXQgaXMgYWxyZWFkeSBhIGBSZWplY3Rpb25gLCBlbHNlIHJldHVybnMgYW4gRVJST1IgUmVqZWN0aW9uLlxuICAgKi9cbiAgc3RhdGljIG5vcm1hbGl6ZShkZXRhaWw/OiBSZWplY3Rpb24gfCBFcnJvciB8IGFueSk6IFJlamVjdGlvbiB7XG4gICAgcmV0dXJuIGlzKFJlamVjdGlvbikoZGV0YWlsKSA/IGRldGFpbCA6IFJlamVjdGlvbi5lcnJvcmVkKGRldGFpbCk7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcih0eXBlOiBudW1iZXIsIG1lc3NhZ2U/OiBzdHJpbmcsIGRldGFpbD86IGFueSkge1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB0aGlzLmRldGFpbCA9IGRldGFpbDtcbiAgfVxuXG4gIHRvU3RyaW5nKCkge1xuICAgIGNvbnN0IGRldGFpbFN0cmluZyA9IChkOiBhbnkpID0+IChkICYmIGQudG9TdHJpbmcgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgPyBkLnRvU3RyaW5nKCkgOiBzdHJpbmdpZnkoZCkpO1xuICAgIGNvbnN0IGRldGFpbCA9IGRldGFpbFN0cmluZyh0aGlzLmRldGFpbCk7XG4gICAgY29uc3QgeyAkaWQsIHR5cGUsIG1lc3NhZ2UgfSA9IHRoaXM7XG4gICAgcmV0dXJuIGBUcmFuc2l0aW9uIFJlamVjdGlvbigkaWQ6ICR7JGlkfSB0eXBlOiAke3R5cGV9LCBtZXNzYWdlOiAke21lc3NhZ2V9LCBkZXRhaWw6ICR7ZGV0YWlsfSlgO1xuICB9XG5cbiAgdG9Qcm9taXNlKCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIGV4dGVuZChzaWxlbnRSZWplY3Rpb24odGhpcyksIHsgX3RyYW5zaXRpb25SZWplY3Rpb246IHRoaXMgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogRnVuY3Rpb25zIHRoYXQgbWFuaXB1bGF0ZSBzdHJpbmdzXG4gKlxuICogQWx0aG91Z2ggdGhlc2UgZnVuY3Rpb25zIGFyZSBleHBvcnRlZCwgdGhleSBhcmUgc3ViamVjdCB0byBjaGFuZ2Ugd2l0aG91dCBub3RpY2UuXG4gKlxuICogQG1vZHVsZSBjb21tb25fc3RyaW5nc1xuICovIC8qKiAqL1xuXG5pbXBvcnQgeyBpc0FycmF5LCBpc0Z1bmN0aW9uLCBpc0luamVjdGFibGUsIGlzTnVsbCwgaXNPYmplY3QsIGlzUHJvbWlzZSwgaXNTdHJpbmcsIGlzVW5kZWZpbmVkIH0gZnJvbSAnLi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IFJlamVjdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vcmVqZWN0RmFjdG9yeSc7XG5pbXBvcnQgeyBpZGVudGl0eSwgSUluamVjdGFibGUsIHB1c2hSLCB0YWlsIH0gZnJvbSAnLi9jb21tb24nO1xuaW1wb3J0IHsgcGF0dGVybiwgdmFsIH0gZnJvbSAnLi9ob2YnO1xuXG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgc2hvcnRlbmVkIHRvIGEgbWF4aW11bSBsZW5ndGhcbiAqXG4gKiBJZiB0aGUgc3RyaW5nIGlzIGFscmVhZHkgbGVzcyB0aGFuIHRoZSBgbWF4YCBsZW5ndGgsIHJldHVybiB0aGUgc3RyaW5nLlxuICogRWxzZSByZXR1cm4gdGhlIHN0cmluZywgc2hvcnRlbmVkIHRvIGBtYXggLSAzYCBhbmQgYXBwZW5kIHRocmVlIGRvdHMgKFwiLi4uXCIpLlxuICpcbiAqIEBwYXJhbSBtYXggdGhlIG1heGltdW0gbGVuZ3RoIG9mIHRoZSBzdHJpbmcgdG8gcmV0dXJuXG4gKiBAcGFyYW0gc3RyIHRoZSBpbnB1dCBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1heExlbmd0aChtYXg6IG51bWJlciwgc3RyOiBzdHJpbmcpIHtcbiAgaWYgKHN0ci5sZW5ndGggPD0gbWF4KSByZXR1cm4gc3RyO1xuICByZXR1cm4gc3RyLnN1YnN0cigwLCBtYXggLSAzKSArICcuLi4nO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcsIHdpdGggc3BhY2VzIGFkZGVkIHRvIHRoZSBlbmQsIHVwIHRvIGEgZGVzaXJlZCBzdHIgbGVuZ3RoXG4gKlxuICogSWYgdGhlIHN0cmluZyBpcyBhbHJlYWR5IGxvbmdlciB0aGFuIHRoZSBkZXNpcmVkIGxlbmd0aCwgcmV0dXJuIHRoZSBzdHJpbmcuXG4gKiBFbHNlIHJldHVybnMgdGhlIHN0cmluZywgd2l0aCBleHRyYSBzcGFjZXMgb24gdGhlIGVuZCwgc3VjaCB0aGF0IGl0IHJlYWNoZXMgYGxlbmd0aGAgY2hhcmFjdGVycy5cbiAqXG4gKiBAcGFyYW0gbGVuZ3RoIHRoZSBkZXNpcmVkIGxlbmd0aCBvZiB0aGUgc3RyaW5nIHRvIHJldHVyblxuICogQHBhcmFtIHN0ciB0aGUgaW5wdXQgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYWRTdHJpbmcobGVuZ3RoOiBudW1iZXIsIHN0cjogc3RyaW5nKSB7XG4gIHdoaWxlIChzdHIubGVuZ3RoIDwgbGVuZ3RoKSBzdHIgKz0gJyAnO1xuICByZXR1cm4gc3RyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24ga2Vib2JTdHJpbmcoY2FtZWxDYXNlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGNhbWVsQ2FzZVxuICAgIC5yZXBsYWNlKC9eKFtBLVpdKS8sICQxID0+ICQxLnRvTG93ZXJDYXNlKCkpIC8vIHJlcGxhY2UgZmlyc3QgY2hhclxuICAgIC5yZXBsYWNlKC8oW0EtWl0pL2csICQxID0+ICctJyArICQxLnRvTG93ZXJDYXNlKCkpOyAvLyByZXBsYWNlIHJlc3Rcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZ1bmN0aW9uVG9TdHJpbmcoZm46IEZ1bmN0aW9uKSB7XG4gIGNvbnN0IGZuU3RyID0gZm5Ub1N0cmluZyhmbik7XG4gIGNvbnN0IG5hbWVkRnVuY3Rpb25NYXRjaCA9IGZuU3RyLm1hdGNoKC9eKGZ1bmN0aW9uIFteIF0rXFwoW14pXSpcXCkpLyk7XG4gIGNvbnN0IHRvU3RyID0gbmFtZWRGdW5jdGlvbk1hdGNoID8gbmFtZWRGdW5jdGlvbk1hdGNoWzFdIDogZm5TdHI7XG5cbiAgY29uc3QgZm5OYW1lID0gZm5bJ25hbWUnXSB8fCAnJztcbiAgaWYgKGZuTmFtZSAmJiB0b1N0ci5tYXRjaCgvZnVuY3Rpb24gXFwoLykpIHtcbiAgICByZXR1cm4gJ2Z1bmN0aW9uICcgKyBmbk5hbWUgKyB0b1N0ci5zdWJzdHIoOSk7XG4gIH1cbiAgcmV0dXJuIHRvU3RyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm5Ub1N0cmluZyhmbjogSUluamVjdGFibGUpIHtcbiAgY29uc3QgX2ZuID0gaXNBcnJheShmbikgPyBmbi5zbGljZSgtMSlbMF0gOiBmbjtcbiAgcmV0dXJuIChfZm4gJiYgX2ZuLnRvU3RyaW5nKCkpIHx8ICd1bmRlZmluZWQnO1xufVxuXG5jb25zdCBpc1JlamVjdGlvbiA9IFJlamVjdGlvbi5pc1JlamVjdGlvblByb21pc2U7XG5jb25zdCBoYXNUb1N0cmluZyA9IChvYmo6IGFueSkgPT5cbiAgaXNPYmplY3Qob2JqKSAmJiAhaXNBcnJheShvYmopICYmIG9iai5jb25zdHJ1Y3RvciAhPT0gT2JqZWN0ICYmIGlzRnVuY3Rpb24ob2JqLnRvU3RyaW5nKTtcblxuY29uc3Qgc3RyaW5naWZ5UGF0dGVybiA9IHBhdHRlcm4oW1xuICBbaXNVbmRlZmluZWQsIHZhbCgndW5kZWZpbmVkJyldLFxuICBbaXNOdWxsLCB2YWwoJ251bGwnKV0sXG4gIFtpc1Byb21pc2UsIHZhbCgnW1Byb21pc2VdJyldLFxuICBbaXNSZWplY3Rpb24sICh4OiBhbnkpID0+IHguX3RyYW5zaXRpb25SZWplY3Rpb24udG9TdHJpbmcoKV0sXG4gIFtoYXNUb1N0cmluZywgKHg6IG9iamVjdCkgPT4geC50b1N0cmluZygpXSxcbiAgW2lzSW5qZWN0YWJsZSwgZnVuY3Rpb25Ub1N0cmluZ10sXG4gIFt2YWwodHJ1ZSksIGlkZW50aXR5XSxcbl0pIGFzICh2YWw6IGFueSkgPT4gc3RyaW5nO1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5KG86IGFueSkge1xuICBjb25zdCBzZWVuOiBhbnlbXSA9IFtdO1xuXG4gIGZ1bmN0aW9uIGZvcm1hdCh2YWx1ZTogYW55KSB7XG4gICAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgaWYgKHNlZW4uaW5kZXhPZih2YWx1ZSkgIT09IC0xKSByZXR1cm4gJ1tjaXJjdWxhciByZWZdJztcbiAgICAgIHNlZW4ucHVzaCh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmdpZnlQYXR0ZXJuKHZhbHVlKTtcbiAgfVxuXG4gIGlmIChpc1VuZGVmaW5lZChvKSkge1xuICAgIC8vIFdvcmthcm91bmQgZm9yIElFICYgRWRnZSBTcGVjIGluY29tcGF0aWJpbGl0eSB3aGVyZSByZXBsYWNlciBmdW5jdGlvbiB3b3VsZCBub3QgYmUgY2FsbGVkIHdoZW4gSlNPTi5zdHJpbmdpZnlcbiAgICAvLyBpcyBnaXZlbiBgdW5kZWZpbmVkYCBhcyB2YWx1ZS4gVG8gd29yayBhcm91bmQgdGhhdCwgd2Ugc2ltcGx5IGRldGVjdCBgdW5kZWZpbmVkYCBhbmQgYmFpbCBvdXQgZWFybHkgYnlcbiAgICAvLyBtYW51YWxseSBzdHJpbmdpZnlpbmcgaXQuXG4gICAgcmV0dXJuIGZvcm1hdChvKTtcbiAgfVxuXG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShvLCAoa2V5LCB2YWx1ZSkgPT4gZm9ybWF0KHZhbHVlKSkucmVwbGFjZSgvXFxcXFwiL2csICdcIicpO1xufVxuXG4vKiogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgc3BsaXRzIGEgc3RyaW5nIG9uIGEgY2hhcmFjdGVyIG9yIHN1YnN0cmluZyAqL1xuZXhwb3J0IGNvbnN0IGJlZm9yZUFmdGVyU3Vic3RyID0gKGNoYXI6IHN0cmluZykgPT4gKHN0cjogc3RyaW5nKTogc3RyaW5nW10gPT4ge1xuICBpZiAoIXN0cikgcmV0dXJuIFsnJywgJyddO1xuICBjb25zdCBpZHggPSBzdHIuaW5kZXhPZihjaGFyKTtcbiAgaWYgKGlkeCA9PT0gLTEpIHJldHVybiBbc3RyLCAnJ107XG4gIHJldHVybiBbc3RyLnN1YnN0cigwLCBpZHgpLCBzdHIuc3Vic3RyKGlkeCArIDEpXTtcbn07XG5cbmV4cG9ydCBjb25zdCBob3N0UmVnZXggPSBuZXcgUmVnRXhwKCdeKD86W2Etel0rOik/Ly9bXi9dKy8nKTtcbmV4cG9ydCBjb25zdCBzdHJpcExhc3RQYXRoRWxlbWVudCA9IChzdHI6IHN0cmluZykgPT4gc3RyLnJlcGxhY2UoL1xcL1teL10qJC8sICcnKTtcbmV4cG9ydCBjb25zdCBzcGxpdEhhc2ggPSBiZWZvcmVBZnRlclN1YnN0cignIycpO1xuZXhwb3J0IGNvbnN0IHNwbGl0UXVlcnkgPSBiZWZvcmVBZnRlclN1YnN0cignPycpO1xuZXhwb3J0IGNvbnN0IHNwbGl0RXF1YWwgPSBiZWZvcmVBZnRlclN1YnN0cignPScpO1xuZXhwb3J0IGNvbnN0IHRyaW1IYXNoVmFsID0gKHN0cjogc3RyaW5nKSA9PiAoc3RyID8gc3RyLnJlcGxhY2UoL14jLywgJycpIDogJycpO1xuXG4vKipcbiAqIFNwbGl0cyBvbiBhIGRlbGltaXRlciwgYnV0IHJldHVybnMgdGhlIGRlbGltaXRlcnMgaW4gdGhlIGFycmF5XG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBganNcbiAqIHZhciBzcGxpdE9uU2xhc2hlcyA9IHNwbGl0T25EZWxpbSgnLycpO1xuICogc3BsaXRPblNsYXNoZXMoXCIvZm9vXCIpOyAvLyBbXCIvXCIsIFwiZm9vXCJdXG4gKiBzcGxpdE9uU2xhc2hlcyhcIi9mb28vXCIpOyAvLyBbXCIvXCIsIFwiZm9vXCIsIFwiL1wiXVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdE9uRGVsaW0oZGVsaW06IHN0cmluZykge1xuICBjb25zdCByZSA9IG5ldyBSZWdFeHAoJygnICsgZGVsaW0gKyAnKScsICdnJyk7XG4gIHJldHVybiAoc3RyOiBzdHJpbmcpID0+IHN0ci5zcGxpdChyZSkuZmlsdGVyKGlkZW50aXR5KTtcbn1cblxuLyoqXG4gKiBSZWR1Y2UgZm4gdGhhdCBqb2lucyBuZWlnaGJvcmluZyBzdHJpbmdzXG4gKlxuICogR2l2ZW4gYW4gYXJyYXkgb2Ygc3RyaW5ncywgcmV0dXJucyBhIG5ldyBhcnJheVxuICogd2hlcmUgYWxsIG5laWdoYm9yaW5nIHN0cmluZ3MgaGF2ZSBiZWVuIGpvaW5lZC5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogbGV0IGFyciA9IFtcImZvb1wiLCBcImJhclwiLCAxLCBcImJhelwiLCBcIlwiLCBcInF1eFwiIF07XG4gKiBhcnIucmVkdWNlKGpvaW5OZWlnaGJvcnNSLCBbXSkgLy8gW1wiZm9vYmFyXCIsIDEsIFwiYmF6cXV4XCIgXVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBqb2luTmVpZ2hib3JzUihhY2M6IGFueVtdLCB4OiBhbnkpIHtcbiAgaWYgKGlzU3RyaW5nKHRhaWwoYWNjKSkgJiYgaXNTdHJpbmcoeCkpIHJldHVybiBhY2Muc2xpY2UoMCwgLTEpLmNvbmNhdCh0YWlsKGFjYykgKyB4KTtcbiAgcmV0dXJuIHB1c2hSKGFjYywgeCk7XG59XG4iLCIvKiogd29ya2Fyb3VuZCBmb3IgbWlzc2luZyBjb25zb2xlIG9iamVjdCBpbiBJRTkgd2hlbiBkZXYgdG9vbHMgaGF2ZW4ndCBiZWVuIG9wZW5lZCBvX08gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLWNvbnNvbGUgKi9cbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuL2NvbW1vbic7XG5cbmNvbnN0IG5vb3BDb25zb2xlU3R1YiA9IHsgbG9nOiBub29wLCBlcnJvcjogbm9vcCwgdGFibGU6IG5vb3AgfTtcblxuZnVuY3Rpb24gaWU5Q29uc29sZShjb25zb2xlKSB7XG4gIGNvbnN0IGJvdW5kID0gKGZuOiBGdW5jdGlvbikgPT4gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChmbiwgY29uc29sZSk7XG4gIHJldHVybiB7XG4gICAgbG9nOiBib3VuZChjb25zb2xlLmxvZyksXG4gICAgZXJyb3I6IGJvdW5kKGNvbnNvbGUubG9nKSxcbiAgICB0YWJsZTogYm91bmQoY29uc29sZS5sb2cpLFxuICB9O1xufVxuXG5mdW5jdGlvbiBmYWxsYmFja0NvbnNvbGUoY29uc29sZSkge1xuICBjb25zdCBsb2cgPSBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO1xuICBjb25zdCBlcnJvciA9IGNvbnNvbGUuZXJyb3IgPyBjb25zb2xlLmVycm9yLmJpbmQoY29uc29sZSkgOiBsb2c7XG4gIGNvbnN0IHRhYmxlID0gY29uc29sZS50YWJsZSA/IGNvbnNvbGUudGFibGUuYmluZChjb25zb2xlKSA6IGxvZztcbiAgcmV0dXJuIHsgbG9nLCBlcnJvciwgdGFibGUgfTtcbn1cblxuZnVuY3Rpb24gZ2V0U2FmZUNvbnNvbGUoKSB7XG4gIC8vIEB0cy1pZ25vcmVcbiAgY29uc3QgaXNJRTkgPSB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmRvY3VtZW50TW9kZSAmJiBkb2N1bWVudC5kb2N1bWVudE1vZGUgPT09IDk7XG4gIGlmIChpc0lFOSkge1xuICAgIHJldHVybiB3aW5kb3cgJiYgd2luZG93LmNvbnNvbGUgPyBpZTlDb25zb2xlKHdpbmRvdy5jb25zb2xlKSA6IG5vb3BDb25zb2xlU3R1YjtcbiAgfSBlbHNlIGlmICghY29uc29sZS50YWJsZSB8fCAhY29uc29sZS5lcnJvcikge1xuICAgIHJldHVybiBmYWxsYmFja0NvbnNvbGUoY29uc29sZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNvbnNvbGU7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNhZmVDb25zb2xlID0gZ2V0U2FmZUNvbnNvbGUoKTtcbiIsIi8qKlxuICogIyBUcmFuc2l0aW9uIHRyYWNpbmcgKGRlYnVnKVxuICpcbiAqIEVuYWJsZSB0cmFuc2l0aW9uIHRyYWNpbmcgdG8gcHJpbnQgdHJhbnNpdGlvbiBpbmZvcm1hdGlvbiB0byB0aGUgY29uc29sZSxcbiAqIGluIG9yZGVyIHRvIGhlbHAgZGVidWcgeW91ciBhcHBsaWNhdGlvbi5cbiAqIFRyYWNpbmcgbG9ncyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBlYWNoIFRyYW5zaXRpb24gdG8geW91ciBjb25zb2xlLlxuICpcbiAqIFRvIGVuYWJsZSB0cmFjaW5nLCBpbXBvcnQgdGhlIFtbVHJhY2VdXSBzaW5nbGV0b24gYW5kIGVuYWJsZSBvbmUgb3IgbW9yZSBjYXRlZ29yaWVzLlxuICpcbiAqICMjIyBFUzZcbiAqIGBgYGpzXG4gKiBpbXBvcnQge3RyYWNlfSBmcm9tIFwiQHVpcm91dGVyL2NvcmVcIjtcbiAqIHRyYWNlLmVuYWJsZSgxLCA1KTsgLy8gVFJBTlNJVElPTiBhbmQgVklFV0NPTkZJR1xuICogYGBgXG4gKlxuICogIyMjIENKU1xuICogYGBganNcbiAqIGxldCB0cmFjZSA9IHJlcXVpcmUoXCJAdWlyb3V0ZXIvY29yZVwiKS50cmFjZTtcbiAqIHRyYWNlLmVuYWJsZShcIlRSQU5TSVRJT05cIiwgXCJWSUVXQ09ORklHXCIpO1xuICogYGBgXG4gKlxuICogIyMjIEdsb2JhbHNcbiAqIGBgYGpzXG4gKiBsZXQgdHJhY2UgPSB3aW5kb3dbXCJAdWlyb3V0ZXIvY29yZVwiXS50cmFjZTtcbiAqIHRyYWNlLmVuYWJsZSgpOyAvLyBUcmFjZSBldmVyeXRoaW5nICh2ZXJ5IHZlcmJvc2UpXG4gKiBgYGBcbiAqXG4gKiAjIyMgQW5ndWxhciAxOlxuICogYGBganNcbiAqIGFwcC5ydW4oJHRyYWNlID0+ICR0cmFjZS5lbmFibGUoKSk7XG4gKiBgYGBcbiAqXG4gKiBAcHVibGljYXBpIEBtb2R1bGUgdHJhY2VcbiAqL1xuaW1wb3J0IHsgcGFyc2UgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IGlzRnVuY3Rpb24sIGlzTnVtYmVyIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBWaWV3VHVwbGUgfSBmcm9tICcuLi92aWV3JztcbmltcG9ydCB7IEFjdGl2ZVVJVmlldywgVmlld0NvbmZpZywgVmlld0NvbnRleHQgfSBmcm9tICcuLi92aWV3L2ludGVyZmFjZSc7XG5pbXBvcnQgeyBzdHJpbmdpZnksIGZ1bmN0aW9uVG9TdHJpbmcsIG1heExlbmd0aCwgcGFkU3RyaW5nIH0gZnJvbSAnLi9zdHJpbmdzJztcbmltcG9ydCB7IHNhZmVDb25zb2xlIH0gZnJvbSAnLi9zYWZlQ29uc29sZSc7XG5pbXBvcnQgeyBSZXNvbHZhYmxlIH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZhYmxlJztcbmltcG9ydCB7IFBhdGhOb2RlIH0gZnJvbSAnLi4vcGF0aC9wYXRoTm9kZSc7XG5pbXBvcnQgeyBQb2xpY3lXaGVuIH0gZnJvbSAnLi4vcmVzb2x2ZS9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbkhvb2sgfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb25Ib29rJztcbmltcG9ydCB7IEhvb2tSZXN1bHQgfSBmcm9tICcuLi90cmFuc2l0aW9uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4uL3N0YXRlL3N0YXRlT2JqZWN0JztcblxuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIHVpVmlld1N0cmluZyh1aXZpZXc6IEFjdGl2ZVVJVmlldykge1xuICBpZiAoIXVpdmlldykgcmV0dXJuICd1aS12aWV3IChkZWZ1bmN0KSc7XG4gIGNvbnN0IHN0YXRlID0gdWl2aWV3LmNyZWF0aW9uQ29udGV4dCA/IHVpdmlldy5jcmVhdGlvbkNvbnRleHQubmFtZSB8fCAnKHJvb3QpJyA6ICcobm9uZSknO1xuICByZXR1cm4gYFt1aS12aWV3IyR7dWl2aWV3LmlkfSAke3Vpdmlldy4kdHlwZX06JHt1aXZpZXcuZnFufSAoJHt1aXZpZXcubmFtZX1AJHtzdGF0ZX0pXWA7XG59XG5cbi8qKiBAaGlkZGVuICovXG5jb25zdCB2aWV3Q29uZmlnU3RyaW5nID0gKHZpZXdDb25maWc6IFZpZXdDb25maWcpID0+IHtcbiAgY29uc3QgdmlldyA9IHZpZXdDb25maWcudmlld0RlY2w7XG4gIGNvbnN0IHN0YXRlID0gdmlldy4kY29udGV4dC5uYW1lIHx8ICcocm9vdCknO1xuICByZXR1cm4gYFtWaWV3IyR7dmlld0NvbmZpZy4kaWR9IGZyb20gJyR7c3RhdGV9JyBzdGF0ZV06IHRhcmdldCB1aS12aWV3OiAnJHt2aWV3LiR1aVZpZXdOYW1lfUAke3ZpZXcuJHVpVmlld0NvbnRleHRBbmNob3J9J2A7XG59O1xuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplZENhdChpbnB1dDogQ2F0ZWdvcnkgfCBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gaXNOdW1iZXIoaW5wdXQpID8gQ2F0ZWdvcnlbaW5wdXRdIDogQ2F0ZWdvcnlbQ2F0ZWdvcnlbaW5wdXRdXTtcbn1cblxuLyoqXG4gKiBUcmFjZSBjYXRlZ29yaWVzIEVudW1cbiAqXG4gKiBFbmFibGUgb3IgZGlzYWJsZSBhIGNhdGVnb3J5IHVzaW5nIFtbVHJhY2UuZW5hYmxlXV0gb3IgW1tUcmFjZS5kaXNhYmxlXV1cbiAqXG4gKiBgdHJhY2UuZW5hYmxlKENhdGVnb3J5LlRSQU5TSVRJT04pYFxuICpcbiAqIFRoZXNlIGNhbiBhbHNvIGJlIHByb3ZpZGVkIHVzaW5nIGEgbWF0Y2hpbmcgc3RyaW5nLCBvciBwb3NpdGlvbiBvcmRpbmFsXG4gKlxuICogYHRyYWNlLmVuYWJsZShcIlRSQU5TSVRJT05cIilgXG4gKlxuICogYHRyYWNlLmVuYWJsZSgxKWBcbiAqL1xuZW51bSBDYXRlZ29yeSB7XG4gIFJFU09MVkUsXG4gIFRSQU5TSVRJT04sXG4gIEhPT0ssXG4gIFVJVklFVyxcbiAgVklFV0NPTkZJRyxcbn1cblxuZXhwb3J0IHsgQ2F0ZWdvcnkgfTtcblxuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IF90aWQgPSBwYXJzZSgnJGlkJyk7XG5cbi8qKiBAaGlkZGVuICovXG5jb25zdCBfcmlkID0gcGFyc2UoJ3JvdXRlci4kaWQnKTtcblxuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IHRyYW5zTGJsID0gdHJhbnMgPT4gYFRyYW5zaXRpb24gIyR7X3RpZCh0cmFucyl9LSR7X3JpZCh0cmFucyl9YDtcblxuLyoqXG4gKiBQcmludHMgVUktUm91dGVyIFRyYW5zaXRpb24gdHJhY2UgaW5mb3JtYXRpb24gdG8gdGhlIGNvbnNvbGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFjZSB7XG4gIC8qKiBAaGlkZGVuICovXG4gIGFwcHJveGltYXRlRGlnZXN0czogbnVtYmVyO1xuXG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX2VuYWJsZWQ6IHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9ID0ge307XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5hcHByb3hpbWF0ZURpZ2VzdHMgPSAwO1xuICB9XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgcHJpdmF0ZSBfc2V0KGVuYWJsZWQ6IGJvb2xlYW4sIGNhdGVnb3JpZXM6IENhdGVnb3J5W10pIHtcbiAgICBpZiAoIWNhdGVnb3JpZXMubGVuZ3RoKSB7XG4gICAgICBjYXRlZ29yaWVzID0gPGFueT5PYmplY3Qua2V5cyhDYXRlZ29yeSlcbiAgICAgICAgLm1hcChrID0+IHBhcnNlSW50KGssIDEwKSlcbiAgICAgICAgLmZpbHRlcihrID0+ICFpc05hTihrKSlcbiAgICAgICAgLm1hcChrZXkgPT4gQ2F0ZWdvcnlba2V5XSk7XG4gICAgfVxuICAgIGNhdGVnb3JpZXMubWFwKG5vcm1hbGl6ZWRDYXQpLmZvckVhY2goY2F0ZWdvcnkgPT4gKHRoaXMuX2VuYWJsZWRbY2F0ZWdvcnldID0gZW5hYmxlZCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZXMgYSB0cmFjZSBbW0NhdGVnb3J5XV1cbiAgICpcbiAgICogYGBganNcbiAgICogdHJhY2UuZW5hYmxlKFwiVFJBTlNJVElPTlwiKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBjYXRlZ29yaWVzIGNhdGVnb3JpZXMgdG8gZW5hYmxlLiBJZiBgY2F0ZWdvcmllc2AgaXMgb21pdHRlZCwgYWxsIGNhdGVnb3JpZXMgYXJlIGVuYWJsZWQuXG4gICAqICAgICAgICBBbHNvIHRha2VzIHN0cmluZ3MgKGNhdGVnb3J5IG5hbWUpIG9yIG9yZGluYWwgKGNhdGVnb3J5IHBvc2l0aW9uKVxuICAgKi9cbiAgZW5hYmxlKC4uLmNhdGVnb3JpZXM6IChDYXRlZ29yeSB8IHN0cmluZyB8IG51bWJlcilbXSk7XG4gIGVuYWJsZSguLi5jYXRlZ29yaWVzOiBhbnlbXSkge1xuICAgIHRoaXMuX3NldCh0cnVlLCBjYXRlZ29yaWVzKTtcbiAgfVxuICAvKipcbiAgICogRGlzYWJsZXMgYSB0cmFjZSBbW0NhdGVnb3J5XV1cbiAgICpcbiAgICogYGBganNcbiAgICogdHJhY2UuZGlzYWJsZShcIlZJRVdDT05GSUdcIik7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gY2F0ZWdvcmllcyBjYXRlZ29yaWVzIHRvIGRpc2FibGUuIElmIGBjYXRlZ29yaWVzYCBpcyBvbWl0dGVkLCBhbGwgY2F0ZWdvcmllcyBhcmUgZGlzYWJsZWQuXG4gICAqICAgICAgICBBbHNvIHRha2VzIHN0cmluZ3MgKGNhdGVnb3J5IG5hbWUpIG9yIG9yZGluYWwgKGNhdGVnb3J5IHBvc2l0aW9uKVxuICAgKi9cbiAgZGlzYWJsZSguLi5jYXRlZ29yaWVzOiAoQ2F0ZWdvcnkgfCBzdHJpbmcgfCBudW1iZXIpW10pO1xuICBkaXNhYmxlKC4uLmNhdGVnb3JpZXM6IGFueVtdKSB7XG4gICAgdGhpcy5fc2V0KGZhbHNlLCBjYXRlZ29yaWVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIGVuYWJsZWQgc3RhdGV1cyBvZiBhIFtbQ2F0ZWdvcnldXVxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB0cmFjZS5lbmFibGVkKFwiVklFV0NPTkZJR1wiKTsgLy8gdHJ1ZSBvciBmYWxzZVxuICAgKiBgYGBcbiAgICpcbiAgICogQHJldHVybnMgYm9vbGVhbiB0cnVlIGlmIHRoZSBjYXRlZ29yeSBpcyBlbmFibGVkXG4gICAqL1xuICBlbmFibGVkKGNhdGVnb3J5OiBDYXRlZ29yeSB8IHN0cmluZyB8IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIXRoaXMuX2VuYWJsZWRbbm9ybWFsaXplZENhdChjYXRlZ29yeSldO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgdHJhY2VUcmFuc2l0aW9uU3RhcnQodHJhbnM6IFRyYW5zaXRpb24pIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5UUkFOU0lUSU9OKSkgcmV0dXJuO1xuICAgIHNhZmVDb25zb2xlLmxvZyhgJHt0cmFuc0xibCh0cmFucyl9OiBTdGFydGVkICAtPiAke3N0cmluZ2lmeSh0cmFucyl9YCk7XG4gIH1cblxuICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICB0cmFjZVRyYW5zaXRpb25JZ25vcmVkKHRyYW5zOiBUcmFuc2l0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuVFJBTlNJVElPTikpIHJldHVybjtcbiAgICBzYWZlQ29uc29sZS5sb2coYCR7dHJhbnNMYmwodHJhbnMpfTogSWdub3JlZCAgPD4gJHtzdHJpbmdpZnkodHJhbnMpfWApO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgdHJhY2VIb29rSW52b2NhdGlvbihzdGVwOiBUcmFuc2l0aW9uSG9vaywgdHJhbnM6IFRyYW5zaXRpb24sIG9wdGlvbnM6IGFueSkge1xuICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LkhPT0spKSByZXR1cm47XG4gICAgY29uc3QgZXZlbnQgPSBwYXJzZSgndHJhY2VEYXRhLmhvb2tUeXBlJykob3B0aW9ucykgfHwgJ2ludGVybmFsJyxcbiAgICAgIGNvbnRleHQgPSBwYXJzZSgndHJhY2VEYXRhLmNvbnRleHQuc3RhdGUubmFtZScpKG9wdGlvbnMpIHx8IHBhcnNlKCd0cmFjZURhdGEuY29udGV4dCcpKG9wdGlvbnMpIHx8ICd1bmtub3duJyxcbiAgICAgIG5hbWUgPSBmdW5jdGlvblRvU3RyaW5nKChzdGVwIGFzIGFueSkucmVnaXN0ZXJlZEhvb2suY2FsbGJhY2spO1xuICAgIHNhZmVDb25zb2xlLmxvZyhgJHt0cmFuc0xibCh0cmFucyl9OiAgIEhvb2sgLT4gJHtldmVudH0gY29udGV4dDogJHtjb250ZXh0fSwgJHttYXhMZW5ndGgoMjAwLCBuYW1lKX1gKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gIHRyYWNlSG9va1Jlc3VsdChob29rUmVzdWx0OiBIb29rUmVzdWx0LCB0cmFuczogVHJhbnNpdGlvbiwgdHJhbnNpdGlvbk9wdGlvbnM6IGFueSkge1xuICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LkhPT0spKSByZXR1cm47XG4gICAgc2FmZUNvbnNvbGUubG9nKGAke3RyYW5zTGJsKHRyYW5zKX06ICAgPC0gSG9vayByZXR1cm5lZDogJHttYXhMZW5ndGgoMjAwLCBzdHJpbmdpZnkoaG9va1Jlc3VsdCkpfWApO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgdHJhY2VSZXNvbHZlUGF0aChwYXRoOiBQYXRoTm9kZVtdLCB3aGVuOiBQb2xpY3lXaGVuLCB0cmFucz86IFRyYW5zaXRpb24pIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5SRVNPTFZFKSkgcmV0dXJuO1xuICAgIHNhZmVDb25zb2xlLmxvZyhgJHt0cmFuc0xibCh0cmFucyl9OiAgICAgICAgIFJlc29sdmluZyAke3BhdGh9ICgke3doZW59KWApO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgdHJhY2VSZXNvbHZhYmxlUmVzb2x2ZWQocmVzb2x2YWJsZTogUmVzb2x2YWJsZSwgdHJhbnM/OiBUcmFuc2l0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuUkVTT0xWRSkpIHJldHVybjtcbiAgICBzYWZlQ29uc29sZS5sb2coXG4gICAgICBgJHt0cmFuc0xibCh0cmFucyl9OiAgICAgICAgICAgICAgIDwtIFJlc29sdmVkICAke3Jlc29sdmFibGV9IHRvOiAke21heExlbmd0aCgyMDAsIHN0cmluZ2lmeShyZXNvbHZhYmxlLmRhdGEpKX1gXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gIHRyYWNlRXJyb3IocmVhc29uOiBhbnksIHRyYW5zOiBUcmFuc2l0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuVFJBTlNJVElPTikpIHJldHVybjtcbiAgICBzYWZlQ29uc29sZS5sb2coYCR7dHJhbnNMYmwodHJhbnMpfTogPC0gUmVqZWN0ZWQgJHtzdHJpbmdpZnkodHJhbnMpfSwgcmVhc29uOiAke3JlYXNvbn1gKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gIHRyYWNlU3VjY2VzcyhmaW5hbFN0YXRlOiBTdGF0ZU9iamVjdCwgdHJhbnM6IFRyYW5zaXRpb24pIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5UUkFOU0lUSU9OKSkgcmV0dXJuO1xuICAgIHNhZmVDb25zb2xlLmxvZyhgJHt0cmFuc0xibCh0cmFucyl9OiA8LSBTdWNjZXNzICAke3N0cmluZ2lmeSh0cmFucyl9LCBmaW5hbCBzdGF0ZTogJHtmaW5hbFN0YXRlLm5hbWV9YCk7XG4gIH1cblxuICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICB0cmFjZVVJVmlld0V2ZW50KGV2ZW50OiBzdHJpbmcsIHZpZXdEYXRhOiBBY3RpdmVVSVZpZXcsIGV4dHJhID0gJycpIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5VSVZJRVcpKSByZXR1cm47XG4gICAgc2FmZUNvbnNvbGUubG9nKGB1aS12aWV3OiAke3BhZFN0cmluZygzMCwgZXZlbnQpfSAke3VpVmlld1N0cmluZyh2aWV3RGF0YSl9JHtleHRyYX1gKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gIHRyYWNlVUlWaWV3Q29uZmlnVXBkYXRlZCh2aWV3RGF0YTogQWN0aXZlVUlWaWV3LCBjb250ZXh0OiBWaWV3Q29udGV4dCkge1xuICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LlVJVklFVykpIHJldHVybjtcbiAgICB0aGlzLnRyYWNlVUlWaWV3RXZlbnQoJ1VwZGF0aW5nJywgdmlld0RhdGEsIGAgd2l0aCBWaWV3Q29uZmlnIGZyb20gY29udGV4dD0nJHtjb250ZXh0fSdgKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gIHRyYWNlVUlWaWV3RmlsbCh2aWV3RGF0YTogQWN0aXZlVUlWaWV3LCBodG1sOiBzdHJpbmcpIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5VSVZJRVcpKSByZXR1cm47XG4gICAgdGhpcy50cmFjZVVJVmlld0V2ZW50KCdGaWxsJywgdmlld0RhdGEsIGAgd2l0aDogJHttYXhMZW5ndGgoMjAwLCBodG1sKX1gKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gIHRyYWNlVmlld1N5bmMocGFpcnM6IFZpZXdUdXBsZVtdKSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuVklFV0NPTkZJRykpIHJldHVybjtcbiAgICBjb25zdCB1aXZoZWFkZXIgPSAndWl2aWV3IGNvbXBvbmVudCBmcW4nO1xuICAgIGNvbnN0IGNmZ2hlYWRlciA9ICd2aWV3IGNvbmZpZyBzdGF0ZSAodmlldyBuYW1lKSc7XG4gICAgY29uc3QgbWFwcGluZyA9IHBhaXJzXG4gICAgICAubWFwKCh7IHVpVmlldywgdmlld0NvbmZpZyB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHVpdiA9IHVpVmlldyAmJiB1aVZpZXcuZnFuO1xuICAgICAgICBjb25zdCBjZmcgPSB2aWV3Q29uZmlnICYmIGAke3ZpZXdDb25maWcudmlld0RlY2wuJGNvbnRleHQubmFtZX06ICgke3ZpZXdDb25maWcudmlld0RlY2wuJG5hbWV9KWA7XG4gICAgICAgIHJldHVybiB7IFt1aXZoZWFkZXJdOiB1aXYsIFtjZmdoZWFkZXJdOiBjZmcgfTtcbiAgICAgIH0pXG4gICAgICAuc29ydCgoYSwgYikgPT4gKGFbdWl2aGVhZGVyXSB8fCAnJykubG9jYWxlQ29tcGFyZShiW3VpdmhlYWRlcl0gfHwgJycpKTtcblxuICAgIHNhZmVDb25zb2xlLnRhYmxlKG1hcHBpbmcpO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgdHJhY2VWaWV3U2VydmljZUV2ZW50KGV2ZW50OiBzdHJpbmcsIHZpZXdDb25maWc6IFZpZXdDb25maWcpIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5WSUVXQ09ORklHKSkgcmV0dXJuO1xuICAgIHNhZmVDb25zb2xlLmxvZyhgVklFV0NPTkZJRzogJHtldmVudH0gJHt2aWV3Q29uZmlnU3RyaW5nKHZpZXdDb25maWcpfWApO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgdHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50KGV2ZW50OiBzdHJpbmcsIHZpZXdEYXRhOiBBY3RpdmVVSVZpZXcpIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5WSUVXQ09ORklHKSkgcmV0dXJuO1xuICAgIHNhZmVDb25zb2xlLmxvZyhgVklFV0NPTkZJRzogJHtldmVudH0gJHt1aVZpZXdTdHJpbmcodmlld0RhdGEpfWApO1xuICB9XG59XG5cbi8qKlxuICogVGhlIFtbVHJhY2VdXSBzaW5nbGV0b25cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogaW1wb3J0IHt0cmFjZX0gZnJvbSBcIkB1aXJvdXRlci9jb3JlXCI7XG4gKiB0cmFjZS5lbmFibGUoMSwgNSk7XG4gKiBgYGBcbiAqL1xuY29uc3QgdHJhY2UgPSBuZXcgVHJhY2UoKTtcbmV4cG9ydCB7IHRyYWNlIH07XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIHBhcmFtcyAqLyAvKiogKi9cbmltcG9ydCB7IGV4dGVuZCwgZmlsdGVyLCBtYXAgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGlzQXJyYXksIGlzRGVmaW5lZCB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IFBhcmFtVHlwZURlZmluaXRpb24gfSBmcm9tICcuL2ludGVyZmFjZSc7XG5cbi8qKlxuICogQW4gaW50ZXJuYWwgY2xhc3Mgd2hpY2ggaW1wbGVtZW50cyBbW1BhcmFtVHlwZURlZmluaXRpb25dXS5cbiAqXG4gKiBBIFtbUGFyYW1UeXBlRGVmaW5pdGlvbl1dIGlzIGEgcGxhaW4gamF2YXNjcmlwdCBvYmplY3QgdXNlZCB0byByZWdpc3RlciBjdXN0b20gcGFyYW1ldGVyIHR5cGVzLlxuICogV2hlbiBhIHBhcmFtIHR5cGUgZGVmaW5pdGlvbiBpcyByZWdpc3RlcmVkLCBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzIGlzIGNyZWF0ZWQgaW50ZXJuYWxseS5cbiAqXG4gKiBUaGlzIGNsYXNzIGhhcyBuYWl2ZSBpbXBsZW1lbnRhdGlvbnMgZm9yIGFsbCB0aGUgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0gbWV0aG9kcy5cbiAqXG4gKiBVc2VkIGJ5IFtbVXJsTWF0Y2hlcl1dIHdoZW4gbWF0Y2hpbmcgb3IgZm9ybWF0dGluZyBVUkxzLCBvciBjb21wYXJpbmcgYW5kIHZhbGlkYXRpbmcgcGFyYW1ldGVyIHZhbHVlcy5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogdmFyIHBhcmFtVHlwZURlZiA9IHtcbiAqICAgZGVjb2RlOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHBhcnNlSW50KHZhbCwgMTApOyB9LFxuICogICBlbmNvZGU6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdmFsICYmIHZhbC50b1N0cmluZygpOyB9LFxuICogICBlcXVhbHM6IGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIHRoaXMuaXMoYSkgJiYgYSA9PT0gYjsgfSxcbiAqICAgaXM6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gYW5ndWxhci5pc051bWJlcih2YWwpICYmIGlzRmluaXRlKHZhbCkgJiYgdmFsICUgMSA9PT0gMDsgfSxcbiAqICAgcGF0dGVybjogL1xcZCsvXG4gKiB9XG4gKlxuICogdmFyIHBhcmFtVHlwZSA9IG5ldyBQYXJhbVR5cGUocGFyYW1UeXBlRGVmKTtcbiAqIGBgYFxuICogQGludGVybmFsYXBpXG4gKi9cbmV4cG9ydCBjbGFzcyBQYXJhbVR5cGUgaW1wbGVtZW50cyBQYXJhbVR5cGVEZWZpbml0aW9uIHtcbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHBhdHRlcm46IFJlZ0V4cCA9IC8uKi87XG4gIC8qKiBUaGUgbmFtZS9pZCBvZiB0aGUgcGFyYW1ldGVyIHR5cGUgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgcmF3OiBib29sZWFuO1xuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZHluYW1pYzogYm9vbGVhbjtcbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGluaGVyaXQgPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gZGVmICBBIGNvbmZpZ3VyYXRpb24gb2JqZWN0IHdoaWNoIGNvbnRhaW5zIHRoZSBjdXN0b20gdHlwZSBkZWZpbml0aW9uLiAgVGhlIG9iamVjdCdzXG4gICAqICAgICAgICBwcm9wZXJ0aWVzIHdpbGwgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgbWV0aG9kcyBhbmQvb3IgcGF0dGVybiBpbiBgUGFyYW1UeXBlYCdzIHB1YmxpYyBpbnRlcmZhY2UuXG4gICAqIEByZXR1cm5zIGEgbmV3IFBhcmFtVHlwZSBvYmplY3RcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlZjogUGFyYW1UeXBlRGVmaW5pdGlvbikge1xuICAgIGV4dGVuZCh0aGlzLCBkZWYpO1xuICB9XG5cbiAgLy8gY29uc2lkZXIgdGhlc2UgZm91ciBtZXRob2RzIHRvIGJlIFwiYWJzdHJhY3QgbWV0aG9kc1wiIHRoYXQgc2hvdWxkIGJlIG92ZXJyaWRkZW5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGlzKHZhbDogYW55LCBrZXk/OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZW5jb2RlKHZhbDogYW55LCBrZXk/OiBzdHJpbmcpOiBzdHJpbmcgfCBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZGVjb2RlKHZhbDogc3RyaW5nLCBrZXk/OiBzdHJpbmcpOiBhbnkge1xuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGVxdWFscyhhOiBhbnksIGI6IGFueSk6IGJvb2xlYW4ge1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp0cmlwbGUtZXF1YWxzXG4gICAgcmV0dXJuIGEgPT0gYjtcbiAgfVxuXG4gICRzdWJQYXR0ZXJuKCkge1xuICAgIGNvbnN0IHN1YiA9IHRoaXMucGF0dGVybi50b1N0cmluZygpO1xuICAgIHJldHVybiBzdWIuc3Vic3RyKDEsIHN1Yi5sZW5ndGggLSAyKTtcbiAgfVxuXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBge1BhcmFtVHlwZToke3RoaXMubmFtZX19YDtcbiAgfVxuXG4gIC8qKiBHaXZlbiBhbiBlbmNvZGVkIHN0cmluZywgb3IgYSBkZWNvZGVkIG9iamVjdCwgcmV0dXJucyBhIGRlY29kZWQgb2JqZWN0ICovXG4gICRub3JtYWxpemUodmFsOiBhbnkpIHtcbiAgICByZXR1cm4gdGhpcy5pcyh2YWwpID8gdmFsIDogdGhpcy5kZWNvZGUodmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXcmFwcyBhbiBleGlzdGluZyBjdXN0b20gUGFyYW1UeXBlIGFzIGFuIGFycmF5IG9mIFBhcmFtVHlwZSwgZGVwZW5kaW5nIG9uICdtb2RlJy5cbiAgICogZS5nLjpcbiAgICogLSB1cmxtYXRjaGVyIHBhdHRlcm4gXCIvcGF0aD97cXVlcnlQYXJhbVtdOmludH1cIlxuICAgKiAtIHVybDogXCIvcGF0aD9xdWVyeVBhcmFtPTEmcXVlcnlQYXJhbT0yXG4gICAqIC0gJHN0YXRlUGFyYW1zLnF1ZXJ5UGFyYW0gd2lsbCBiZSBbMSwgMl1cbiAgICogaWYgYG1vZGVgIGlzIFwiYXV0b1wiLCB0aGVuXG4gICAqIC0gdXJsOiBcIi9wYXRoP3F1ZXJ5UGFyYW09MSB3aWxsIGNyZWF0ZSAkc3RhdGVQYXJhbXMucXVlcnlQYXJhbTogMVxuICAgKiAtIHVybDogXCIvcGF0aD9xdWVyeVBhcmFtPTEmcXVlcnlQYXJhbT0yIHdpbGwgY3JlYXRlICRzdGF0ZVBhcmFtcy5xdWVyeVBhcmFtOiBbMSwgMl1cbiAgICovXG4gICRhc0FycmF5KG1vZGU6IGJvb2xlYW4gfCAnYXV0bycsIGlzU2VhcmNoOiBib29sZWFuKSB7XG4gICAgaWYgKCFtb2RlKSByZXR1cm4gdGhpcztcbiAgICBpZiAobW9kZSA9PT0gJ2F1dG8nICYmICFpc1NlYXJjaCkgdGhyb3cgbmV3IEVycm9yKFwiJ2F1dG8nIGFycmF5IG1vZGUgaXMgZm9yIHF1ZXJ5IHBhcmFtZXRlcnMgb25seVwiKTtcbiAgICByZXR1cm4gbmV3ICg8YW55PkFycmF5VHlwZSkodGhpcywgbW9kZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBXcmFwcyB1cCBhIGBQYXJhbVR5cGVgIG9iamVjdCB0byBoYW5kbGUgYXJyYXkgdmFsdWVzLlxuICogQGludGVybmFsYXBpXG4gKi9cbmZ1bmN0aW9uIEFycmF5VHlwZSh0eXBlOiBQYXJhbVR5cGUsIG1vZGU6IGJvb2xlYW4gfCAnYXV0bycpIHtcbiAgLy8gV3JhcCBub24tYXJyYXkgdmFsdWUgYXMgYXJyYXlcbiAgZnVuY3Rpb24gYXJyYXlXcmFwKHZhbDogYW55KTogYW55W10ge1xuICAgIHJldHVybiBpc0FycmF5KHZhbCkgPyB2YWwgOiBpc0RlZmluZWQodmFsKSA/IFt2YWxdIDogW107XG4gIH1cblxuICAvLyBVbndyYXAgYXJyYXkgdmFsdWUgZm9yIFwiYXV0b1wiIG1vZGUuIFJldHVybiB1bmRlZmluZWQgZm9yIGVtcHR5IGFycmF5LlxuICBmdW5jdGlvbiBhcnJheVVud3JhcCh2YWw6IGFueSkge1xuICAgIHN3aXRjaCAodmFsLmxlbmd0aCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gbW9kZSA9PT0gJ2F1dG8nID8gdmFsWzBdIDogdmFsO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gIH1cblxuICAvLyBXcmFwcyB0eXBlICguaXMvLmVuY29kZS8uZGVjb2RlKSBmdW5jdGlvbnMgdG8gb3BlcmF0ZSBvbiBlYWNoIHZhbHVlIG9mIGFuIGFycmF5XG4gIGZ1bmN0aW9uIGFycmF5SGFuZGxlcihjYWxsYmFjazogKHg6IGFueSkgPT4gYW55LCBhbGxUcnV0aHlNb2RlPzogYm9vbGVhbikge1xuICAgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVBcnJheSh2YWw6IGFueSkge1xuICAgICAgaWYgKGlzQXJyYXkodmFsKSAmJiB2YWwubGVuZ3RoID09PSAwKSByZXR1cm4gdmFsO1xuICAgICAgY29uc3QgYXJyID0gYXJyYXlXcmFwKHZhbCk7XG4gICAgICBjb25zdCByZXN1bHQgPSBtYXAoYXJyLCBjYWxsYmFjayk7XG4gICAgICByZXR1cm4gYWxsVHJ1dGh5TW9kZSA9PT0gdHJ1ZSA/IGZpbHRlcihyZXN1bHQsIHggPT4gIXgpLmxlbmd0aCA9PT0gMCA6IGFycmF5VW53cmFwKHJlc3VsdCk7XG4gICAgfTtcbiAgfVxuXG4gIC8vIFdyYXBzIHR5cGUgKC5lcXVhbHMpIGZ1bmN0aW9ucyB0byBvcGVyYXRlIG9uIGVhY2ggdmFsdWUgb2YgYW4gYXJyYXlcbiAgZnVuY3Rpb24gYXJyYXlFcXVhbHNIYW5kbGVyKGNhbGxiYWNrOiAobDogYW55LCByOiBhbnkpID0+IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlQXJyYXkodmFsMTogYW55LCB2YWwyOiBhbnkpIHtcbiAgICAgIGNvbnN0IGxlZnQgPSBhcnJheVdyYXAodmFsMSksXG4gICAgICAgIHJpZ2h0ID0gYXJyYXlXcmFwKHZhbDIpO1xuICAgICAgaWYgKGxlZnQubGVuZ3RoICE9PSByaWdodC5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVmdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIWNhbGxiYWNrKGxlZnRbaV0sIHJpZ2h0W2ldKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgfVxuXG4gIFsnZW5jb2RlJywgJ2RlY29kZScsICdlcXVhbHMnLCAnJG5vcm1hbGl6ZSddLmZvckVhY2gobmFtZSA9PiB7XG4gICAgY29uc3QgcGFyYW1UeXBlRm4gPSB0eXBlW25hbWVdLmJpbmQodHlwZSk7XG4gICAgY29uc3Qgd3JhcHBlckZuOiBGdW5jdGlvbiA9IG5hbWUgPT09ICdlcXVhbHMnID8gYXJyYXlFcXVhbHNIYW5kbGVyIDogYXJyYXlIYW5kbGVyO1xuICAgIHRoaXNbbmFtZV0gPSB3cmFwcGVyRm4ocGFyYW1UeXBlRm4pO1xuICB9KTtcblxuICBleHRlbmQodGhpcywge1xuICAgIGR5bmFtaWM6IHR5cGUuZHluYW1pYyxcbiAgICBuYW1lOiB0eXBlLm5hbWUsXG4gICAgcGF0dGVybjogdHlwZS5wYXR0ZXJuLFxuICAgIGluaGVyaXQ6IHR5cGUuaW5oZXJpdCxcbiAgICByYXc6IHR5cGUucmF3LFxuICAgIGlzOiBhcnJheUhhbmRsZXIodHlwZS5pcy5iaW5kKHR5cGUpLCB0cnVlKSxcbiAgICAkYXJyYXlNb2RlOiBtb2RlLFxuICB9KTtcbn1cbiIsIi8qKiBAcHVibGljYXBpIEBtb2R1bGUgcGFyYW1zICovIC8qKiAqL1xuaW1wb3J0IHsgZXh0ZW5kLCBmaWx0ZXIsIG1hcCwgYWxsVHJ1ZVIsIGZpbmQgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IHByb3AgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IGlzSW5qZWN0YWJsZSwgaXNEZWZpbmVkLCBpc1N0cmluZywgaXNBcnJheSwgaXNVbmRlZmluZWQgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBSYXdQYXJhbXMsIFBhcmFtRGVjbGFyYXRpb24gfSBmcm9tICcuLi9wYXJhbXMvaW50ZXJmYWNlJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyBQYXJhbVR5cGUgfSBmcm9tICcuL3BhcmFtVHlwZSc7XG5pbXBvcnQgeyBQYXJhbVR5cGVzIH0gZnJvbSAnLi9wYXJhbVR5cGVzJztcbmltcG9ydCB7IFN0YXRlRGVjbGFyYXRpb24gfSBmcm9tICcuLi9zdGF0ZSc7XG5pbXBvcnQgeyBVcmxDb25maWcgfSBmcm9tICcuLi91cmwnO1xuXG4vKiogQGhpZGRlbiAqL1xuY29uc3QgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IGlzU2hvcnRoYW5kID0gKGNmZzogUGFyYW1EZWNsYXJhdGlvbikgPT5cbiAgWyd2YWx1ZScsICd0eXBlJywgJ3NxdWFzaCcsICdhcnJheScsICdkeW5hbWljJ10uZmlsdGVyKGhhc093bi5iaW5kKGNmZyB8fCB7fSkpLmxlbmd0aCA9PT0gMDtcblxuLyoqIEBpbnRlcm5hbGFwaSAqL1xuZW51bSBEZWZUeXBlIHtcbiAgUEFUSCxcbiAgU0VBUkNILFxuICBDT05GSUcsXG59XG5leHBvcnQgeyBEZWZUeXBlIH07XG5cbi8qKiBAaW50ZXJuYWxhcGkgKi9cbmZ1bmN0aW9uIGdldFBhcmFtRGVjbGFyYXRpb24ocGFyYW1OYW1lOiBzdHJpbmcsIGxvY2F0aW9uOiBEZWZUeXBlLCBzdGF0ZTogU3RhdGVEZWNsYXJhdGlvbik6IFBhcmFtRGVjbGFyYXRpb24ge1xuICBjb25zdCBub1JlbG9hZE9uU2VhcmNoID0gKHN0YXRlLnJlbG9hZE9uU2VhcmNoID09PSBmYWxzZSAmJiBsb2NhdGlvbiA9PT0gRGVmVHlwZS5TRUFSQ0gpIHx8IHVuZGVmaW5lZDtcbiAgY29uc3QgZHluYW1pYyA9IGZpbmQoW3N0YXRlLmR5bmFtaWMsIG5vUmVsb2FkT25TZWFyY2hdLCBpc0RlZmluZWQpO1xuICBjb25zdCBkZWZhdWx0Q29uZmlnID0gaXNEZWZpbmVkKGR5bmFtaWMpID8geyBkeW5hbWljIH0gOiB7fTtcbiAgY29uc3QgcGFyYW1Db25maWcgPSB1bndyYXBTaG9ydGhhbmQoc3RhdGUgJiYgc3RhdGUucGFyYW1zICYmIHN0YXRlLnBhcmFtc1twYXJhbU5hbWVdKTtcbiAgcmV0dXJuIGV4dGVuZChkZWZhdWx0Q29uZmlnLCBwYXJhbUNvbmZpZyk7XG59XG5cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiB1bndyYXBTaG9ydGhhbmQoY2ZnOiBQYXJhbURlY2xhcmF0aW9uKTogUGFyYW1EZWNsYXJhdGlvbiB7XG4gIGNmZyA9IGlzU2hvcnRoYW5kKGNmZykgPyAoeyB2YWx1ZTogY2ZnIH0gYXMgUGFyYW1EZWNsYXJhdGlvbikgOiBjZmc7XG5cbiAgZ2V0U3RhdGljRGVmYXVsdFZhbHVlWydfX2NhY2hlYWJsZSddID0gdHJ1ZTtcbiAgZnVuY3Rpb24gZ2V0U3RhdGljRGVmYXVsdFZhbHVlKCkge1xuICAgIHJldHVybiBjZmcudmFsdWU7XG4gIH1cblxuICBjb25zdCAkJGZuID0gaXNJbmplY3RhYmxlKGNmZy52YWx1ZSkgPyBjZmcudmFsdWUgOiBnZXRTdGF0aWNEZWZhdWx0VmFsdWU7XG4gIHJldHVybiBleHRlbmQoY2ZnLCB7ICQkZm4gfSk7XG59XG5cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBnZXRUeXBlKGNmZzogUGFyYW1EZWNsYXJhdGlvbiwgdXJsVHlwZTogUGFyYW1UeXBlLCBsb2NhdGlvbjogRGVmVHlwZSwgaWQ6IHN0cmluZywgcGFyYW1UeXBlczogUGFyYW1UeXBlcykge1xuICBpZiAoY2ZnLnR5cGUgJiYgdXJsVHlwZSAmJiB1cmxUeXBlLm5hbWUgIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgRXJyb3IoYFBhcmFtICcke2lkfScgaGFzIHR3byB0eXBlIGNvbmZpZ3VyYXRpb25zLmApO1xuICBpZiAoY2ZnLnR5cGUgJiYgdXJsVHlwZSAmJiB1cmxUeXBlLm5hbWUgPT09ICdzdHJpbmcnICYmIHBhcmFtVHlwZXMudHlwZShjZmcudHlwZSBhcyBzdHJpbmcpKVxuICAgIHJldHVybiBwYXJhbVR5cGVzLnR5cGUoY2ZnLnR5cGUgYXMgc3RyaW5nKTtcbiAgaWYgKHVybFR5cGUpIHJldHVybiB1cmxUeXBlO1xuICBpZiAoIWNmZy50eXBlKSB7XG4gICAgY29uc3QgdHlwZSA9XG4gICAgICBsb2NhdGlvbiA9PT0gRGVmVHlwZS5DT05GSUdcbiAgICAgICAgPyAnYW55J1xuICAgICAgICA6IGxvY2F0aW9uID09PSBEZWZUeXBlLlBBVEhcbiAgICAgICAgPyAncGF0aCdcbiAgICAgICAgOiBsb2NhdGlvbiA9PT0gRGVmVHlwZS5TRUFSQ0hcbiAgICAgICAgPyAncXVlcnknXG4gICAgICAgIDogJ3N0cmluZyc7XG4gICAgcmV0dXJuIHBhcmFtVHlwZXMudHlwZSh0eXBlKTtcbiAgfVxuICByZXR1cm4gY2ZnLnR5cGUgaW5zdGFuY2VvZiBQYXJhbVR5cGUgPyBjZmcudHlwZSA6IHBhcmFtVHlwZXMudHlwZShjZmcudHlwZSBhcyBzdHJpbmcpO1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbGFwaVxuICogcmV0dXJucyBmYWxzZSwgdHJ1ZSwgb3IgdGhlIHNxdWFzaCB2YWx1ZSB0byBpbmRpY2F0ZSB0aGUgXCJkZWZhdWx0IHBhcmFtZXRlciB1cmwgc3F1YXNoIHBvbGljeVwiLlxuICovXG5mdW5jdGlvbiBnZXRTcXVhc2hQb2xpY3koY29uZmlnOiBQYXJhbURlY2xhcmF0aW9uLCBpc09wdGlvbmFsOiBib29sZWFuLCBkZWZhdWx0UG9saWN5OiBib29sZWFuIHwgc3RyaW5nKSB7XG4gIGNvbnN0IHNxdWFzaCA9IGNvbmZpZy5zcXVhc2g7XG4gIGlmICghaXNPcHRpb25hbCB8fCBzcXVhc2ggPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gIGlmICghaXNEZWZpbmVkKHNxdWFzaCkgfHwgc3F1YXNoID09IG51bGwpIHJldHVybiBkZWZhdWx0UG9saWN5O1xuICBpZiAoc3F1YXNoID09PSB0cnVlIHx8IGlzU3RyaW5nKHNxdWFzaCkpIHJldHVybiBzcXVhc2g7XG4gIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzcXVhc2ggcG9saWN5OiAnJHtzcXVhc2h9Jy4gVmFsaWQgcG9saWNpZXM6IGZhbHNlLCB0cnVlLCBvciBhcmJpdHJhcnkgc3RyaW5nYCk7XG59XG5cbi8qKiBAaW50ZXJuYWxhcGkgKi9cbmZ1bmN0aW9uIGdldFJlcGxhY2UoY29uZmlnOiBQYXJhbURlY2xhcmF0aW9uLCBhcnJheU1vZGU6IGJvb2xlYW4sIGlzT3B0aW9uYWw6IGJvb2xlYW4sIHNxdWFzaDogc3RyaW5nIHwgYm9vbGVhbikge1xuICBjb25zdCBkZWZhdWx0UG9saWN5ID0gW1xuICAgIHsgZnJvbTogJycsIHRvOiBpc09wdGlvbmFsIHx8IGFycmF5TW9kZSA/IHVuZGVmaW5lZCA6ICcnIH0sXG4gICAgeyBmcm9tOiBudWxsLCB0bzogaXNPcHRpb25hbCB8fCBhcnJheU1vZGUgPyB1bmRlZmluZWQgOiAnJyB9LFxuICBdO1xuXG4gIGNvbnN0IHJlcGxhY2UgPSBpc0FycmF5KGNvbmZpZy5yZXBsYWNlKSA/IGNvbmZpZy5yZXBsYWNlIDogW107XG4gIGlmIChpc1N0cmluZyhzcXVhc2gpKSByZXBsYWNlLnB1c2goeyBmcm9tOiBzcXVhc2gsIHRvOiB1bmRlZmluZWQgfSk7XG5cbiAgY29uc3QgY29uZmlndXJlZEtleXMgPSBtYXAocmVwbGFjZSwgcHJvcCgnZnJvbScpKTtcbiAgcmV0dXJuIGZpbHRlcihkZWZhdWx0UG9saWN5LCBpdGVtID0+IGNvbmZpZ3VyZWRLZXlzLmluZGV4T2YoaXRlbS5mcm9tKSA9PT0gLTEpLmNvbmNhdChyZXBsYWNlKTtcbn1cblxuLyoqIEBpbnRlcm5hbGFwaSAqL1xuZXhwb3J0IGNsYXNzIFBhcmFtIHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogUGFyYW1UeXBlO1xuICBsb2NhdGlvbjogRGVmVHlwZTtcbiAgaXNPcHRpb25hbDogYm9vbGVhbjtcbiAgZHluYW1pYzogYm9vbGVhbjtcbiAgcmF3OiBib29sZWFuO1xuICBzcXVhc2g6IGJvb2xlYW4gfCBzdHJpbmc7XG4gIHJlcGxhY2U6IFt7IHRvOiBhbnk7IGZyb206IGFueSB9XTtcbiAgaW5oZXJpdDogYm9vbGVhbjtcbiAgYXJyYXk6IGJvb2xlYW47XG4gIGNvbmZpZzogYW55O1xuICAvKiogQ2FjaGUgdGhlIGRlZmF1bHQgdmFsdWUgaWYgaXQgaXMgYSBzdGF0aWMgdmFsdWUgKi9cbiAgX2RlZmF1bHRWYWx1ZUNhY2hlOiB7XG4gICAgZGVmYXVsdFZhbHVlOiBhbnk7XG4gIH07XG5cbiAgc3RhdGljIHZhbHVlcyhwYXJhbXM6IFBhcmFtW10sIHZhbHVlczogUmF3UGFyYW1zID0ge30pOiBSYXdQYXJhbXMge1xuICAgIGNvbnN0IHBhcmFtVmFsdWVzID0ge30gYXMgUmF3UGFyYW1zO1xuICAgIGZvciAoY29uc3QgcGFyYW0gb2YgcGFyYW1zKSB7XG4gICAgICBwYXJhbVZhbHVlc1twYXJhbS5pZF0gPSBwYXJhbS52YWx1ZSh2YWx1ZXNbcGFyYW0uaWRdKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtVmFsdWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIFtbUGFyYW1dXSBvYmplY3RzIHdoaWNoIGhhdmUgZGlmZmVyZW50IHBhcmFtIHZhbHVlc1xuICAgKlxuICAgKiBGaWx0ZXJzIGEgbGlzdCBvZiBbW1BhcmFtXV0gb2JqZWN0cyB0byBvbmx5IHRob3NlIHdob3NlIHBhcmFtZXRlciB2YWx1ZXMgZGlmZmVyIGluIHR3byBwYXJhbSB2YWx1ZSBvYmplY3RzXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXM6IFRoZSBsaXN0IG9mIFBhcmFtIG9iamVjdHMgdG8gZmlsdGVyXG4gICAqIEBwYXJhbSB2YWx1ZXMxOiBUaGUgZmlyc3Qgc2V0IG9mIHBhcmFtZXRlciB2YWx1ZXNcbiAgICogQHBhcmFtIHZhbHVlczI6IHRoZSBzZWNvbmQgc2V0IG9mIHBhcmFtZXRlciB2YWx1ZXNcbiAgICpcbiAgICogQHJldHVybnMgYW55IFBhcmFtIG9iamVjdHMgd2hvc2UgdmFsdWVzIHdlcmUgZGlmZmVyZW50IGJldHdlZW4gdmFsdWVzMSBhbmQgdmFsdWVzMlxuICAgKi9cbiAgc3RhdGljIGNoYW5nZWQocGFyYW1zOiBQYXJhbVtdLCB2YWx1ZXMxOiBSYXdQYXJhbXMgPSB7fSwgdmFsdWVzMjogUmF3UGFyYW1zID0ge30pOiBQYXJhbVtdIHtcbiAgICByZXR1cm4gcGFyYW1zLmZpbHRlcihwYXJhbSA9PiAhcGFyYW0udHlwZS5lcXVhbHModmFsdWVzMVtwYXJhbS5pZF0sIHZhbHVlczJbcGFyYW0uaWRdKSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHR3byBwYXJhbSB2YWx1ZSBvYmplY3RzIGFyZSBlcXVhbCAoZm9yIGEgc2V0IG9mIFtbUGFyYW1dXSBvYmplY3RzKVxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSBsaXN0IG9mIFtbUGFyYW1dXSBvYmplY3RzIHRvIGNoZWNrXG4gICAqIEBwYXJhbSB2YWx1ZXMxIFRoZSBmaXJzdCBzZXQgb2YgcGFyYW0gdmFsdWVzXG4gICAqIEBwYXJhbSB2YWx1ZXMyIFRoZSBzZWNvbmQgc2V0IG9mIHBhcmFtIHZhbHVlc1xuICAgKlxuICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBwYXJhbSB2YWx1ZXMgaW4gdmFsdWVzMSBhbmQgdmFsdWVzMiBhcmUgZXF1YWxcbiAgICovXG4gIHN0YXRpYyBlcXVhbHMocGFyYW1zOiBQYXJhbVtdLCB2YWx1ZXMxID0ge30sIHZhbHVlczIgPSB7fSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBQYXJhbS5jaGFuZ2VkKHBhcmFtcywgdmFsdWVzMSwgdmFsdWVzMikubGVuZ3RoID09PSAwO1xuICB9XG5cbiAgLyoqIFJldHVybnMgdHJ1ZSBpZiBhIHRoZSBwYXJhbWV0ZXIgdmFsdWVzIGFyZSB2YWxpZCwgYWNjb3JkaW5nIHRvIHRoZSBQYXJhbSBkZWZpbml0aW9ucyAqL1xuICBzdGF0aWMgdmFsaWRhdGVzKHBhcmFtczogUGFyYW1bXSwgdmFsdWVzOiBSYXdQYXJhbXMgPSB7fSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBwYXJhbXMubWFwKHBhcmFtID0+IHBhcmFtLnZhbGlkYXRlcyh2YWx1ZXNbcGFyYW0uaWRdKSkucmVkdWNlKGFsbFRydWVSLCB0cnVlKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcsIHR5cGU6IFBhcmFtVHlwZSwgbG9jYXRpb246IERlZlR5cGUsIHVybENvbmZpZzogVXJsQ29uZmlnLCBzdGF0ZTogU3RhdGVEZWNsYXJhdGlvbikge1xuICAgIGNvbnN0IGNvbmZpZzogUGFyYW1EZWNsYXJhdGlvbiA9IGdldFBhcmFtRGVjbGFyYXRpb24oaWQsIGxvY2F0aW9uLCBzdGF0ZSk7XG4gICAgdHlwZSA9IGdldFR5cGUoY29uZmlnLCB0eXBlLCBsb2NhdGlvbiwgaWQsIHVybENvbmZpZy5wYXJhbVR5cGVzKTtcbiAgICBjb25zdCBhcnJheU1vZGUgPSBnZXRBcnJheU1vZGUoKTtcbiAgICB0eXBlID0gYXJyYXlNb2RlID8gdHlwZS4kYXNBcnJheShhcnJheU1vZGUsIGxvY2F0aW9uID09PSBEZWZUeXBlLlNFQVJDSCkgOiB0eXBlO1xuICAgIGNvbnN0IGlzT3B0aW9uYWwgPSBjb25maWcudmFsdWUgIT09IHVuZGVmaW5lZCB8fCBsb2NhdGlvbiA9PT0gRGVmVHlwZS5TRUFSQ0g7XG4gICAgY29uc3QgZHluYW1pYyA9IGlzRGVmaW5lZChjb25maWcuZHluYW1pYykgPyAhIWNvbmZpZy5keW5hbWljIDogISF0eXBlLmR5bmFtaWM7XG4gICAgY29uc3QgcmF3ID0gaXNEZWZpbmVkKGNvbmZpZy5yYXcpID8gISFjb25maWcucmF3IDogISF0eXBlLnJhdztcbiAgICBjb25zdCBzcXVhc2ggPSBnZXRTcXVhc2hQb2xpY3koY29uZmlnLCBpc09wdGlvbmFsLCB1cmxDb25maWcuZGVmYXVsdFNxdWFzaFBvbGljeSgpKTtcbiAgICBjb25zdCByZXBsYWNlID0gZ2V0UmVwbGFjZShjb25maWcsIGFycmF5TW9kZSwgaXNPcHRpb25hbCwgc3F1YXNoKTtcbiAgICBjb25zdCBpbmhlcml0ID0gaXNEZWZpbmVkKGNvbmZpZy5pbmhlcml0KSA/ICEhY29uZmlnLmluaGVyaXQgOiAhIXR5cGUuaW5oZXJpdDtcblxuICAgIC8vIGFycmF5IGNvbmZpZzogcGFyYW0gbmFtZSAocGFyYW1bXSkgb3ZlcnJpZGVzIGRlZmF1bHQgc2V0dGluZ3MuICBleHBsaWNpdCBjb25maWcgb3ZlcnJpZGVzIHBhcmFtIG5hbWUuXG4gICAgZnVuY3Rpb24gZ2V0QXJyYXlNb2RlKCkge1xuICAgICAgY29uc3QgYXJyYXlEZWZhdWx0cyA9IHsgYXJyYXk6IGxvY2F0aW9uID09PSBEZWZUeXBlLlNFQVJDSCA/ICdhdXRvJyA6IGZhbHNlIH07XG4gICAgICBjb25zdCBhcnJheVBhcmFtTm9tZW5jbGF0dXJlID0gaWQubWF0Y2goL1xcW1xcXSQvKSA/IHsgYXJyYXk6IHRydWUgfSA6IHt9O1xuICAgICAgcmV0dXJuIGV4dGVuZChhcnJheURlZmF1bHRzLCBhcnJheVBhcmFtTm9tZW5jbGF0dXJlLCBjb25maWcpLmFycmF5O1xuICAgIH1cblxuICAgIGV4dGVuZCh0aGlzLCB7IGlkLCB0eXBlLCBsb2NhdGlvbiwgaXNPcHRpb25hbCwgZHluYW1pYywgcmF3LCBzcXVhc2gsIHJlcGxhY2UsIGluaGVyaXQsIGFycmF5OiBhcnJheU1vZGUsIGNvbmZpZyB9KTtcbiAgfVxuXG4gIGlzRGVmYXVsdFZhbHVlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc09wdGlvbmFsICYmIHRoaXMudHlwZS5lcXVhbHModGhpcy52YWx1ZSgpLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogW0ludGVybmFsXSBHZXRzIHRoZSBkZWNvZGVkIHJlcHJlc2VudGF0aW9uIG9mIGEgdmFsdWUgaWYgdGhlIHZhbHVlIGlzIGRlZmluZWQsIG90aGVyd2lzZSwgcmV0dXJucyB0aGVcbiAgICogZGVmYXVsdCB2YWx1ZSwgd2hpY2ggbWF5IGJlIHRoZSByZXN1bHQgb2YgYW4gaW5qZWN0YWJsZSBmdW5jdGlvbi5cbiAgICovXG4gIHZhbHVlKHZhbHVlPzogYW55KTogYW55IHtcbiAgICAvKipcbiAgICAgKiBbSW50ZXJuYWxdIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHBhcmFtZXRlciwgd2hpY2ggbWF5IGJlIGFuIGluamVjdGFibGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgY29uc3QgZ2V0RGVmYXVsdFZhbHVlID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2RlZmF1bHRWYWx1ZUNhY2hlKSByZXR1cm4gdGhpcy5fZGVmYXVsdFZhbHVlQ2FjaGUuZGVmYXVsdFZhbHVlO1xuXG4gICAgICBpZiAoIXNlcnZpY2VzLiRpbmplY3RvcikgdGhyb3cgbmV3IEVycm9yKCdJbmplY3RhYmxlIGZ1bmN0aW9ucyBjYW5ub3QgYmUgY2FsbGVkIGF0IGNvbmZpZ3VyYXRpb24gdGltZScpO1xuXG4gICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBzZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKHRoaXMuY29uZmlnLiQkZm4pO1xuXG4gICAgICBpZiAoZGVmYXVsdFZhbHVlICE9PSBudWxsICYmIGRlZmF1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmICF0aGlzLnR5cGUuaXMoZGVmYXVsdFZhbHVlKSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBEZWZhdWx0IHZhbHVlICgke2RlZmF1bHRWYWx1ZX0pIGZvciBwYXJhbWV0ZXIgJyR7dGhpcy5pZH0nIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBQYXJhbVR5cGUgKCR7XG4gICAgICAgICAgICB0aGlzLnR5cGUubmFtZVxuICAgICAgICAgIH0pYFxuICAgICAgICApO1xuXG4gICAgICBpZiAodGhpcy5jb25maWcuJCRmblsnX19jYWNoZWFibGUnXSkge1xuICAgICAgICB0aGlzLl9kZWZhdWx0VmFsdWVDYWNoZSA9IHsgZGVmYXVsdFZhbHVlIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgfTtcblxuICAgIGNvbnN0IHJlcGxhY2VTcGVjaWFsVmFsdWVzID0gKHZhbDogYW55KSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IHR1cGxlIG9mIHRoaXMucmVwbGFjZSkge1xuICAgICAgICBpZiAodHVwbGUuZnJvbSA9PT0gdmFsKSByZXR1cm4gdHVwbGUudG87XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsO1xuICAgIH07XG5cbiAgICB2YWx1ZSA9IHJlcGxhY2VTcGVjaWFsVmFsdWVzKHZhbHVlKTtcblxuICAgIHJldHVybiBpc1VuZGVmaW5lZCh2YWx1ZSkgPyBnZXREZWZhdWx0VmFsdWUoKSA6IHRoaXMudHlwZS4kbm9ybWFsaXplKHZhbHVlKTtcbiAgfVxuXG4gIGlzU2VhcmNoKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmxvY2F0aW9uID09PSBEZWZUeXBlLlNFQVJDSDtcbiAgfVxuXG4gIHZhbGlkYXRlcyh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG4gICAgLy8gVGhlcmUgd2FzIG5vIHBhcmFtZXRlciB2YWx1ZSwgYnV0IHRoZSBwYXJhbSBpcyBvcHRpb25hbFxuICAgIGlmICgoaXNVbmRlZmluZWQodmFsdWUpIHx8IHZhbHVlID09PSBudWxsKSAmJiB0aGlzLmlzT3B0aW9uYWwpIHJldHVybiB0cnVlO1xuXG4gICAgLy8gVGhlIHZhbHVlIHdhcyBub3Qgb2YgdGhlIGNvcnJlY3QgUGFyYW1UeXBlLCBhbmQgY291bGQgbm90IGJlIGRlY29kZWQgdG8gdGhlIGNvcnJlY3QgUGFyYW1UeXBlXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMudHlwZS4kbm9ybWFsaXplKHZhbHVlKTtcbiAgICBpZiAoIXRoaXMudHlwZS5pcyhub3JtYWxpemVkKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gVGhlIHZhbHVlIHdhcyBvZiB0aGUgY29ycmVjdCB0eXBlLCBidXQgd2hlbiBlbmNvZGVkLCBkaWQgbm90IG1hdGNoIHRoZSBQYXJhbVR5cGUncyByZWdleHBcbiAgICBjb25zdCBlbmNvZGVkID0gdGhpcy50eXBlLmVuY29kZShub3JtYWxpemVkKTtcbiAgICByZXR1cm4gIShpc1N0cmluZyhlbmNvZGVkKSAmJiAhdGhpcy50eXBlLnBhdHRlcm4uZXhlYyg8c3RyaW5nPmVuY29kZWQpKTtcbiAgfVxuXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBge1BhcmFtOiR7dGhpcy5pZH0gJHt0aGlzLnR5cGV9IHNxdWFzaDogJyR7dGhpcy5zcXVhc2h9JyBvcHRpb25hbDogJHt0aGlzLmlzT3B0aW9uYWx9fWA7XG4gIH1cbn1cbiIsIi8qKiBAcHVibGljYXBpIEBtb2R1bGUgcGFyYW1zICovIC8qKiAqL1xuaW1wb3J0IHsgZnJvbUpzb24sIHRvSnNvbiwgaWRlbnRpdHksIGVxdWFscywgaW5oZXJpdCwgbWFwLCBleHRlbmQsIHBpY2sgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGlzRGVmaW5lZCwgaXNOdWxsT3JVbmRlZmluZWQgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBpcyB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgc2VydmljZXMgfSBmcm9tICcuLi9jb21tb24vY29yZXNlcnZpY2VzJztcbmltcG9ydCB7IFBhcmFtVHlwZSB9IGZyb20gJy4vcGFyYW1UeXBlJztcbmltcG9ydCB7IFBhcmFtVHlwZURlZmluaXRpb24gfSBmcm9tICcuL2ludGVyZmFjZSc7XG5cbi8qKlxuICogQSByZWdpc3RyeSBmb3IgcGFyYW1ldGVyIHR5cGVzLlxuICpcbiAqIFRoaXMgcmVnaXN0cnkgbWFuYWdlcyB0aGUgYnVpbHQtaW4gKGFuZCBjdXN0b20pIHBhcmFtZXRlciB0eXBlcy5cbiAqXG4gKiBUaGUgYnVpbHQtaW4gcGFyYW1ldGVyIHR5cGVzIGFyZTpcbiAqXG4gKiAtIFtbc3RyaW5nXV1cbiAqIC0gW1twYXRoXV1cbiAqIC0gW1txdWVyeV1dXG4gKiAtIFtbaGFzaF1dXG4gKiAtIFtbaW50XV1cbiAqIC0gW1tib29sXV1cbiAqIC0gW1tkYXRlXV1cbiAqIC0gW1tqc29uXV1cbiAqIC0gW1thbnldXVxuICpcbiAqIFRvIHJlZ2lzdGVyIGN1c3RvbSBwYXJhbWV0ZXIgdHlwZXMsIHVzZSBbW1VybENvbmZpZy50eXBlXV0sIGkuZS4sXG4gKlxuICogYGBganNcbiAqIHJvdXRlci51cmxTZXJ2aWNlLmNvbmZpZy50eXBlKGN1c3RvbVR5cGUpXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFBhcmFtVHlwZXMge1xuICAvKipcbiAgICogQnVpbHQtaW4gcGFyYW1ldGVyIHR5cGU6IGBzdHJpbmdgXG4gICAqXG4gICAqIFRoaXMgcGFyYW1ldGVyIHR5cGUgY29lcmNlcyB2YWx1ZXMgdG8gc3RyaW5ncy5cbiAgICogSXQgbWF0Y2hlcyBhbnl0aGluZyAoYG5ldyBSZWdFeHAoXCIuKlwiKWApIGluIHRoZSBVUkxcbiAgICovXG4gIHN0YXRpYyBzdHJpbmc6IFBhcmFtVHlwZURlZmluaXRpb247XG5cbiAgLyoqXG4gICAqIEJ1aWx0LWluIHBhcmFtZXRlciB0eXBlOiBgcGF0aGBcbiAgICpcbiAgICogVGhpcyBwYXJhbWV0ZXIgdHlwZSBpcyB0aGUgZGVmYXVsdCB0eXBlIGZvciBwYXRoIHBhcmFtZXRlcnMuXG4gICAqIEEgcGF0aCBwYXJhbWV0ZXIgaXMgYW55IHBhcmFtZXRlciBkZWNsYXJlZCBpbiB0aGUgcGF0aCBwb3J0aW9uIG9mIGEgdXJsXG4gICAqXG4gICAqIC0gYC9mb28vOnBhcmFtMS86cGFyYW0yYDogdHdvIHBhdGggcGFyYW1ldGVyc1xuICAgKlxuICAgKiBUaGlzIHBhcmFtZXRlciB0eXBlIGJlaGF2ZXMgZXhhY3RseSBsaWtlIHRoZSBbW3N0cmluZ11dIHR5cGUgd2l0aCBvbmUgZXhjZXB0aW9uLlxuICAgKiBXaGVuIG1hdGNoaW5nIHBhcmFtZXRlciB2YWx1ZXMgaW4gdGhlIFVSTCwgdGhlIGBwYXRoYCB0eXBlIGRvZXMgbm90IG1hdGNoIGZvcndhcmQgc2xhc2hlcyBgL2AuXG4gICAqXG4gICAqICMjIyMgQW5ndWxhciAxIG5vdGU6XG4gICAqIEluIG5nMSwgdGhpcyB0eXBlIGlzIG92ZXJyaWRkZW4gd2l0aCBvbmUgdGhhdCBwcmUtZW5jb2RlcyBzbGFzaGVzIGFzIGB+MkZgIGluc3RlYWQgb2YgYCUyRmAuXG4gICAqIEZvciBtb3JlIGRldGFpbHMgYWJvdXQgdGhpcyBhbmd1bGFyIDEgYmVoYXZpb3IsIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXItdWkvdWktcm91dGVyL2lzc3Vlcy8yNTk4XG4gICAqL1xuICBzdGF0aWMgcGF0aDogUGFyYW1UeXBlRGVmaW5pdGlvbjtcblxuICAvKipcbiAgICogQnVpbHQtaW4gcGFyYW1ldGVyIHR5cGU6IGBxdWVyeWBcbiAgICpcbiAgICogVGhpcyBwYXJhbWV0ZXIgdHlwZSBpcyB0aGUgZGVmYXVsdCB0eXBlIGZvciBxdWVyeS9zZWFyY2ggcGFyYW1ldGVycy5cbiAgICogSXQgYmVoYXZlcyB0aGUgc2FtZSBhcyB0aGUgW1tzdHJpbmddXSBwYXJhbWV0ZXIgdHlwZS5cbiAgICpcbiAgICogQSBxdWVyeSBwYXJhbWV0ZXIgaXMgYW55IHBhcmFtZXRlciBkZWNsYXJlZCBpbiB0aGUgcXVlcnkvc2VhcmNoIHBvcnRpb24gb2YgYSB1cmxcbiAgICpcbiAgICogLSBgL2Jhcj9wYXJhbTJgOiBhIHF1ZXJ5IHBhcmFtZXRlclxuICAgKi9cbiAgc3RhdGljIHF1ZXJ5OiBQYXJhbVR5cGVEZWZpbml0aW9uO1xuXG4gIC8qKlxuICAgKiBCdWlsdC1pbiBwYXJhbWV0ZXIgdHlwZTogYGhhc2hgXG4gICAqXG4gICAqIFRoaXMgcGFyYW1ldGVyIHR5cGUgaXMgdXNlZCBmb3IgdGhlIGAjYCBwYXJhbWV0ZXIgKHRoZSBoYXNoKVxuICAgKiBJdCBiZWhhdmVzIHRoZSBzYW1lIGFzIHRoZSBbW3N0cmluZ11dIHBhcmFtZXRlciB0eXBlLlxuICAgKi9cbiAgc3RhdGljIGhhc2g6IFBhcmFtVHlwZURlZmluaXRpb247XG5cbiAgLyoqXG4gICAqIEJ1aWx0LWluIHBhcmFtZXRlciB0eXBlOiBgaW50YFxuICAgKlxuICAgKiBUaGlzIHBhcmFtZXRlciB0eXBlIHNlcmlhbGl6ZXMgamF2YXNjcmlwdCBpbnRlZ2VycyAoYG51bWJlcmBzIHdoaWNoIHJlcHJlc2VudCBhbiBpbnRlZ2VyKSB0byB0aGUgVVJMLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIC5zdGF0ZSh7XG4gICAqICAgbmFtZTogJ3VzZXInLFxuICAgKiAgIHVybDogJy91c2VyL3tpZDppbnR9J1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqIGBgYGpzXG4gICAqICRzdGF0ZS5nbygndXNlcicsIHsgaWQ6IDEyOTg1NDcgfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBUaGUgVVJMIHdpbGwgc2VyaWFsaXplIHRvOiBgL3VzZXIvMTI5ODU0N2AuXG4gICAqXG4gICAqIFdoZW4gdGhlIHBhcmFtZXRlciB2YWx1ZSBpcyByZWFkLCBpdCB3aWxsIGJlIHRoZSBgbnVtYmVyYCBgMTI5ODU0N2AsIG5vdCB0aGUgc3RyaW5nIGBcIjEyOTg1NDdcImAuXG4gICAqL1xuICBzdGF0aWMgaW50OiBQYXJhbVR5cGVEZWZpbml0aW9uO1xuXG4gIC8qKlxuICAgKiBCdWlsdC1pbiBwYXJhbWV0ZXIgdHlwZTogYGJvb2xgXG4gICAqXG4gICAqIFRoaXMgcGFyYW1ldGVyIHR5cGUgc2VyaWFsaXplcyBgdHJ1ZWAvYGZhbHNlYCBhcyBgMWAvYDBgXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogLnN0YXRlKHtcbiAgICogICBuYW1lOiAnaW5ib3gnLFxuICAgKiAgIHVybDogJy9pbmJveD97dW5yZWFkOmJvb2x9J1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqIGBgYGpzXG4gICAqICRzdGF0ZS5nbygnaW5ib3gnLCB7IHVucmVhZDogdHJ1ZSB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIFRoZSBVUkwgd2lsbCBzZXJpYWxpemUgdG86IGAvaW5ib3g/dW5yZWFkPTFgLlxuICAgKlxuICAgKiBDb252ZXJzZWx5LCBpZiB0aGUgdXJsIGlzIGAvaW5ib3g/dW5yZWFkPTBgLCB0aGUgdmFsdWUgb2YgdGhlIGB1bnJlYWRgIHBhcmFtZXRlciB3aWxsIGJlIGEgYGZhbHNlYC5cbiAgICovXG4gIHN0YXRpYyBib29sOiBQYXJhbVR5cGVEZWZpbml0aW9uO1xuXG4gIC8qKlxuICAgKiBCdWlsdC1pbiBwYXJhbWV0ZXIgdHlwZTogYGRhdGVgXG4gICAqXG4gICAqIFRoaXMgcGFyYW1ldGVyIHR5cGUgY2FuIGJlIHVzZWQgdG8gc2VyaWFsaXplIEphdmFzY3JpcHQgZGF0ZXMgYXMgcGFyYW1ldGVyIHZhbHVlcy5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiAuc3RhdGUoe1xuICAgKiAgIG5hbWU6ICdzZWFyY2gnLFxuICAgKiAgIHVybDogJy9zZWFyY2g/e3N0YXJ0OmRhdGV9J1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqIGBgYGpzXG4gICAqICRzdGF0ZS5nbygnc2VhcmNoJywgeyBzdGFydDogbmV3IERhdGUoMjAwMCwgMCwgMSkgfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBUaGUgVVJMIHdpbGwgc2VyaWFsaXplIHRvOiBgL3NlYXJjaD9zdGFydD0yMDAwLTAxLTAxYC5cbiAgICpcbiAgICogQ29udmVyc2VseSwgaWYgdGhlIHVybCBpcyBgL3NlYXJjaD9zdGFydD0yMDE2LTEyLTI1YCwgdGhlIHZhbHVlIG9mIHRoZSBgc3RhcnRgIHBhcmFtZXRlciB3aWxsIGJlIGEgYERhdGVgIG9iamVjdCB3aGVyZTpcbiAgICpcbiAgICogLSBgZGF0ZS5nZXRGdWxsWWVhcigpID09PSAyMDE2YFxuICAgKiAtIGBkYXRlLmdldE1vbnRoKCkgPT09IDExYCAobW9udGggaXMgMC1iYXNlZClcbiAgICogLSBgZGF0ZS5nZXREYXRlKCkgPT09IDI1YFxuICAgKi9cbiAgc3RhdGljIGRhdGU6IFBhcmFtVHlwZURlZmluaXRpb247XG5cbiAgLyoqXG4gICAqIEJ1aWx0LWluIHBhcmFtZXRlciB0eXBlOiBganNvbmBcbiAgICpcbiAgICogVGhpcyBwYXJhbWV0ZXIgdHlwZSBjYW4gYmUgdXNlZCB0byBzZXJpYWxpemUgamF2YXNjcmlwdCBvYmplY3RzIGludG8gdGhlIFVSTCB1c2luZyBKU09OIHNlcmlhbGl6YXRpb24uXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogVGhpcyBleGFtcGxlIHNlcmlhbGl6ZXMgYW4gcGxhaW4gamF2YXNjcmlwdCBvYmplY3QgdG8gdGhlIFVSTFxuICAgKiBgYGBqc1xuICAgKiAuc3RhdGUoe1xuICAgKiAgIG5hbWU6ICdtYXAnLFxuICAgKiAgIHVybDogJy9tYXAve2Nvb3Jkczpqc29ufSdcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKiBgYGBqc1xuICAgKiAkc3RhdGUuZ28oJ21hcCcsIHsgY29vcmRzOiB7IHg6IDEwMzk5LjIsIHk6IDQ5MDcxIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogVGhlIFVSTCB3aWxsIHNlcmlhbGl6ZSB0bzogYC9tYXAvJTdCJTIyeCUyMiUzQTEwMzk5LjIlMkMlMjJ5JTIyJTNBNDkwNzElN0RgXG4gICAqL1xuICBzdGF0aWMganNvbjogUGFyYW1UeXBlRGVmaW5pdGlvbjtcblxuICAvKipcbiAgICogQnVpbHQtaW4gcGFyYW1ldGVyIHR5cGU6IGBhbnlgXG4gICAqXG4gICAqIFRoaXMgcGFyYW1ldGVyIHR5cGUgaXMgdXNlZCBieSBkZWZhdWx0IGZvciB1cmwtbGVzcyBwYXJhbWV0ZXJzIChwYXJhbWV0ZXJzIHRoYXQgZG8gbm90IGFwcGVhciBpbiB0aGUgVVJMKS5cbiAgICogVGhpcyB0eXBlIGRvZXMgbm90IGVuY29kZSBvciBkZWNvZGUuXG4gICAqIEl0IGlzIGNvbXBhcmVkIHVzaW5nIGEgZGVlcCBgZXF1YWxzYCBjb21wYXJpc29uLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIFRoaXMgZXhhbXBsZSBkZWZpbmVzIGEgbm9uLXVybCBwYXJhbWV0ZXIgb24gYSBbW1N0YXRlRGVjbGFyYXRpb25dXS5cbiAgICogYGBganNcbiAgICogLnN0YXRlKHtcbiAgICogICBuYW1lOiAnbmV3JyxcbiAgICogICB1cmw6ICcvbmV3JyxcbiAgICogICBwYXJhbXM6IHtcbiAgICogICAgIGlucmVweXRvOiBudWxsXG4gICAqICAgfVxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqIGBgYGpzXG4gICAqICRzdGF0ZS5nbygnbmV3JywgeyBpbnJlcGx5dG86IGN1cnJlbnRNZXNzYWdlIH0pO1xuICAgKiBgYGBcbiAgICovXG4gIHN0YXRpYyBhbnk6IFBhcmFtVHlwZURlZmluaXRpb247XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgdHlwZXM6IGFueTtcbiAgLyoqIEBoaWRkZW4gKi9cbiAgZW5xdWV1ZSA9IHRydWU7XG4gIC8qKiBAaGlkZGVuICovXG4gIHR5cGVRdWV1ZTogYW55W10gPSBbXTtcblxuICAvKiogQGludGVybmFsYXBpICovXG4gIHByaXZhdGUgZGVmYXVsdFR5cGVzOiBhbnkgPSBwaWNrKFBhcmFtVHlwZXMucHJvdG90eXBlLCBbXG4gICAgJ2hhc2gnLFxuICAgICdzdHJpbmcnLFxuICAgICdxdWVyeScsXG4gICAgJ3BhdGgnLFxuICAgICdpbnQnLFxuICAgICdib29sJyxcbiAgICAnZGF0ZScsXG4gICAgJ2pzb24nLFxuICAgICdhbnknLFxuICBdKTtcblxuICAvKiogQGludGVybmFsYXBpICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIFJlZ2lzdGVyIGRlZmF1bHQgdHlwZXMuIFN0b3JlIHRoZW0gaW4gdGhlIHByb3RvdHlwZSBvZiB0aGlzLnR5cGVzLlxuICAgIGNvbnN0IG1ha2VUeXBlID0gKGRlZmluaXRpb246IFBhcmFtVHlwZURlZmluaXRpb24sIG5hbWU6IHN0cmluZykgPT4gbmV3IFBhcmFtVHlwZShleHRlbmQoeyBuYW1lIH0sIGRlZmluaXRpb24pKTtcbiAgICB0aGlzLnR5cGVzID0gaW5oZXJpdChtYXAodGhpcy5kZWZhdWx0VHlwZXMsIG1ha2VUeXBlKSwge30pO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICBkaXNwb3NlKCkge1xuICAgIHRoaXMudHlwZXMgPSB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBwYXJhbWV0ZXIgdHlwZVxuICAgKlxuICAgKiBFbmQgdXNlcnMgc2hvdWxkIGNhbGwgW1tVcmxNYXRjaGVyRmFjdG9yeS50eXBlXV0sIHdoaWNoIGRlbGVnYXRlcyB0byB0aGlzIG1ldGhvZC5cbiAgICovXG4gIHR5cGUobmFtZTogc3RyaW5nLCBkZWZpbml0aW9uPzogUGFyYW1UeXBlRGVmaW5pdGlvbiwgZGVmaW5pdGlvbkZuPzogKCkgPT4gUGFyYW1UeXBlRGVmaW5pdGlvbikge1xuICAgIGlmICghaXNEZWZpbmVkKGRlZmluaXRpb24pKSByZXR1cm4gdGhpcy50eXBlc1tuYW1lXTtcbiAgICBpZiAodGhpcy50eXBlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgdGhyb3cgbmV3IEVycm9yKGBBIHR5cGUgbmFtZWQgJyR7bmFtZX0nIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZC5gKTtcblxuICAgIHRoaXMudHlwZXNbbmFtZV0gPSBuZXcgUGFyYW1UeXBlKGV4dGVuZCh7IG5hbWUgfSwgZGVmaW5pdGlvbikpO1xuXG4gICAgaWYgKGRlZmluaXRpb25Gbikge1xuICAgICAgdGhpcy50eXBlUXVldWUucHVzaCh7IG5hbWUsIGRlZjogZGVmaW5pdGlvbkZuIH0pO1xuICAgICAgaWYgKCF0aGlzLmVucXVldWUpIHRoaXMuX2ZsdXNoVHlwZVF1ZXVlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQGludGVybmFsYXBpICovXG4gIF9mbHVzaFR5cGVRdWV1ZSgpIHtcbiAgICB3aGlsZSAodGhpcy50eXBlUXVldWUubGVuZ3RoKSB7XG4gICAgICBjb25zdCB0eXBlID0gdGhpcy50eXBlUXVldWUuc2hpZnQoKTtcbiAgICAgIGlmICh0eXBlLnBhdHRlcm4pIHRocm93IG5ldyBFcnJvcihcIllvdSBjYW5ub3Qgb3ZlcnJpZGUgYSB0eXBlJ3MgLnBhdHRlcm4gYXQgcnVudGltZS5cIik7XG4gICAgICBleHRlbmQodGhpcy50eXBlc1t0eXBlLm5hbWVdLCBzZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKHR5cGUuZGVmKSk7XG4gICAgfVxuICB9XG59XG5cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBpbml0RGVmYXVsdFR5cGVzKCkge1xuICBjb25zdCBtYWtlRGVmYXVsdFR5cGUgPSBkZWYgPT4ge1xuICAgIGNvbnN0IHZhbFRvU3RyaW5nID0gKHZhbDogYW55KSA9PiAodmFsICE9IG51bGwgPyB2YWwudG9TdHJpbmcoKSA6IHZhbCk7XG5cbiAgICBjb25zdCBkZWZhdWx0VHlwZUJhc2UgPSB7XG4gICAgICBlbmNvZGU6IHZhbFRvU3RyaW5nLFxuICAgICAgZGVjb2RlOiB2YWxUb1N0cmluZyxcbiAgICAgIGlzOiBpcyhTdHJpbmcpLFxuICAgICAgcGF0dGVybjogLy4qLyxcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp0cmlwbGUtZXF1YWxzXG4gICAgICBlcXVhbHM6IChhOiBhbnksIGI6IGFueSkgPT4gYSA9PSBiLCAvLyBhbGxvdyBjb2Vyc2lvbiBmb3IgbnVsbC91bmRlZmluZWQvXCJcIlxuICAgIH07XG5cbiAgICByZXR1cm4gZXh0ZW5kKHt9LCBkZWZhdWx0VHlwZUJhc2UsIGRlZikgYXMgUGFyYW1UeXBlRGVmaW5pdGlvbjtcbiAgfTtcblxuICAvLyBEZWZhdWx0IFBhcmFtZXRlciBUeXBlIERlZmluaXRpb25zXG4gIGV4dGVuZChQYXJhbVR5cGVzLnByb3RvdHlwZSwge1xuICAgIHN0cmluZzogbWFrZURlZmF1bHRUeXBlKHt9KSxcblxuICAgIHBhdGg6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICBwYXR0ZXJuOiAvW14vXSovLFxuICAgIH0pLFxuXG4gICAgcXVlcnk6IG1ha2VEZWZhdWx0VHlwZSh7fSksXG5cbiAgICBoYXNoOiBtYWtlRGVmYXVsdFR5cGUoe1xuICAgICAgaW5oZXJpdDogZmFsc2UsXG4gICAgfSksXG5cbiAgICBpbnQ6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICBkZWNvZGU6ICh2YWw6IHN0cmluZykgPT4gcGFyc2VJbnQodmFsLCAxMCksXG4gICAgICBpczogZnVuY3Rpb24odmFsOiBhbnkpIHtcbiAgICAgICAgcmV0dXJuICFpc051bGxPclVuZGVmaW5lZCh2YWwpICYmIHRoaXMuZGVjb2RlKHZhbC50b1N0cmluZygpKSA9PT0gdmFsO1xuICAgICAgfSxcbiAgICAgIHBhdHRlcm46IC8tP1xcZCsvLFxuICAgIH0pLFxuXG4gICAgYm9vbDogbWFrZURlZmF1bHRUeXBlKHtcbiAgICAgIGVuY29kZTogKHZhbDogYW55KSA9PiAodmFsICYmIDEpIHx8IDAsXG4gICAgICBkZWNvZGU6ICh2YWw6IHN0cmluZykgPT4gcGFyc2VJbnQodmFsLCAxMCkgIT09IDAsXG4gICAgICBpczogaXMoQm9vbGVhbiksXG4gICAgICBwYXR0ZXJuOiAvMHwxLyxcbiAgICB9KSxcblxuICAgIGRhdGU6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICBlbmNvZGU6IGZ1bmN0aW9uKHZhbDogYW55KSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5pcyh2YWwpXG4gICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICA6IFt2YWwuZ2V0RnVsbFllYXIoKSwgKCcwJyArICh2YWwuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMiksICgnMCcgKyB2YWwuZ2V0RGF0ZSgpKS5zbGljZSgtMildLmpvaW4oJy0nKTtcbiAgICAgIH0sXG4gICAgICBkZWNvZGU6IGZ1bmN0aW9uKHZhbDogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLmlzKHZhbCkpIHJldHVybiAoPGFueT52YWwpIGFzIERhdGU7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5jYXB0dXJlLmV4ZWModmFsKTtcbiAgICAgICAgcmV0dXJuIG1hdGNoID8gbmV3IERhdGUobWF0Y2hbMV0sIG1hdGNoWzJdIC0gMSwgbWF0Y2hbM10pIDogdW5kZWZpbmVkO1xuICAgICAgfSxcbiAgICAgIGlzOiAodmFsOiBhbnkpID0+IHZhbCBpbnN0YW5jZW9mIERhdGUgJiYgIWlzTmFOKHZhbC52YWx1ZU9mKCkpLFxuICAgICAgZXF1YWxzKGw6IGFueSwgcjogYW55KSB7XG4gICAgICAgIHJldHVybiBbJ2dldEZ1bGxZZWFyJywgJ2dldE1vbnRoJywgJ2dldERhdGUnXS5yZWR1Y2UoKGFjYywgZm4pID0+IGFjYyAmJiBsW2ZuXSgpID09PSByW2ZuXSgpLCB0cnVlKTtcbiAgICAgIH0sXG4gICAgICBwYXR0ZXJuOiAvWzAtOV17NH0tKD86MFsxLTldfDFbMC0yXSktKD86MFsxLTldfFsxLTJdWzAtOV18M1swLTFdKS8sXG4gICAgICBjYXB0dXJlOiAvKFswLTldezR9KS0oMFsxLTldfDFbMC0yXSktKDBbMS05XXxbMS0yXVswLTldfDNbMC0xXSkvLFxuICAgIH0pLFxuXG4gICAganNvbjogbWFrZURlZmF1bHRUeXBlKHtcbiAgICAgIGVuY29kZTogdG9Kc29uLFxuICAgICAgZGVjb2RlOiBmcm9tSnNvbixcbiAgICAgIGlzOiBpcyhPYmplY3QpLFxuICAgICAgZXF1YWxzOiBlcXVhbHMsXG4gICAgICBwYXR0ZXJuOiAvW14vXSovLFxuICAgIH0pLFxuXG4gICAgLy8gZG9lcyBub3QgZW5jb2RlL2RlY29kZVxuICAgIGFueTogbWFrZURlZmF1bHRUeXBlKHtcbiAgICAgIGVuY29kZTogaWRlbnRpdHksXG4gICAgICBkZWNvZGU6IGlkZW50aXR5LFxuICAgICAgaXM6ICgpID0+IHRydWUsXG4gICAgICBlcXVhbHM6IGVxdWFscyxcbiAgICB9KSxcbiAgfSk7XG59XG5cbmluaXREZWZhdWx0VHlwZXMoKTtcbiIsIi8qKiBAcHVibGljYXBpIEBtb2R1bGUgcGFyYW1zICovIC8qKiAqL1xuaW1wb3J0IHsgZXh0ZW5kLCBhbmNlc3RvcnMsIE9iaiB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZU9iamVjdCc7XG5cbi8qKiBAaW50ZXJuYWxhcGkgKi9cbmV4cG9ydCBjbGFzcyBTdGF0ZVBhcmFtcyB7XG4gIFtrZXk6IHN0cmluZ106IGFueTtcblxuICBjb25zdHJ1Y3RvcihwYXJhbXM6IE9iaiA9IHt9KSB7XG4gICAgZXh0ZW5kKHRoaXMsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogTWVyZ2VzIGEgc2V0IG9mIHBhcmFtZXRlcnMgd2l0aCBhbGwgcGFyYW1ldGVycyBpbmhlcml0ZWQgYmV0d2VlbiB0aGUgY29tbW9uIHBhcmVudHMgb2YgdGhlXG4gICAqIGN1cnJlbnQgc3RhdGUgYW5kIGEgZ2l2ZW4gZGVzdGluYXRpb24gc3RhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBuZXdQYXJhbXMgVGhlIHNldCBvZiBwYXJhbWV0ZXJzIHdoaWNoIHdpbGwgYmUgY29tcG9zaXRlZCB3aXRoIGluaGVyaXRlZCBwYXJhbXMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAkY3VycmVudCBJbnRlcm5hbCBkZWZpbml0aW9uIG9mIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgc3RhdGUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAkdG8gSW50ZXJuYWwgZGVmaW5pdGlvbiBvZiBvYmplY3QgcmVwcmVzZW50aW5nIHN0YXRlIHRvIHRyYW5zaXRpb24gdG8uXG4gICAqL1xuICAkaW5oZXJpdChuZXdQYXJhbXM6IE9iaiwgJGN1cnJlbnQ6IFN0YXRlT2JqZWN0LCAkdG86IFN0YXRlT2JqZWN0KSB7XG4gICAgbGV0IHBhcmVudFBhcmFtczogc3RyaW5nW107XG4gICAgY29uc3QgcGFyZW50cyA9IGFuY2VzdG9ycygkY3VycmVudCwgJHRvKSxcbiAgICAgIGluaGVyaXRlZDogT2JqID0ge30sXG4gICAgICBpbmhlcml0TGlzdDogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgaSBpbiBwYXJlbnRzKSB7XG4gICAgICBpZiAoIXBhcmVudHNbaV0gfHwgIXBhcmVudHNbaV0ucGFyYW1zKSBjb250aW51ZTtcbiAgICAgIHBhcmVudFBhcmFtcyA9IE9iamVjdC5rZXlzKHBhcmVudHNbaV0ucGFyYW1zKTtcbiAgICAgIGlmICghcGFyZW50UGFyYW1zLmxlbmd0aCkgY29udGludWU7XG5cbiAgICAgIGZvciAoY29uc3QgaiBpbiBwYXJlbnRQYXJhbXMpIHtcbiAgICAgICAgaWYgKGluaGVyaXRMaXN0LmluZGV4T2YocGFyZW50UGFyYW1zW2pdKSA+PSAwKSBjb250aW51ZTtcbiAgICAgICAgaW5oZXJpdExpc3QucHVzaChwYXJlbnRQYXJhbXNbal0pO1xuICAgICAgICBpbmhlcml0ZWRbcGFyZW50UGFyYW1zW2pdXSA9IHRoaXNbcGFyZW50UGFyYW1zW2pdXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGV4dGVuZCh7fSwgaW5oZXJpdGVkLCBuZXdQYXJhbXMpO1xuICB9XG59XG4iLCIvKiogQGludGVybmFsYXBpIEBtb2R1bGUgcGF0aCAqLyAvKiogKi9cbmltcG9ydCB7IGV4dGVuZCwgYXBwbHlQYWlycywgZmluZCwgYWxsVHJ1ZVIsIHBhaXJzLCBhcnJheVR1cGxlcyB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgcHJvcEVxIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4uL3N0YXRlL3N0YXRlT2JqZWN0JztcbmltcG9ydCB7IFJhd1BhcmFtcyB9IGZyb20gJy4uL3BhcmFtcy9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUGFyYW0gfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuaW1wb3J0IHsgUmVzb2x2YWJsZSB9IGZyb20gJy4uL3Jlc29sdmUvcmVzb2x2YWJsZSc7XG5pbXBvcnQgeyBWaWV3Q29uZmlnIH0gZnJvbSAnLi4vdmlldy9pbnRlcmZhY2UnO1xuXG4vKipcbiAqIEEgbm9kZSBpbiBhIFtbVHJlZUNoYW5nZXNdXSBwYXRoXG4gKlxuICogRm9yIGEgW1tUcmVlQ2hhbmdlc11dIHBhdGgsIHRoaXMgY2xhc3MgaG9sZHMgdGhlIHN0YXRlZnVsIGluZm9ybWF0aW9uIGZvciBhIHNpbmdsZSBub2RlIGluIHRoZSBwYXRoLlxuICogRWFjaCBQYXRoTm9kZSBjb3JyZXNwb25kcyB0byBhIHN0YXRlIGJlaW5nIGVudGVyZWQsIGV4aXRlZCwgb3IgcmV0YWluZWQuXG4gKiBUaGUgc3RhdGVmdWwgaW5mb3JtYXRpb24gaW5jbHVkZXMgcGFyYW1ldGVyIHZhbHVlcyBhbmQgcmVzb2x2ZSBkYXRhLlxuICovXG5leHBvcnQgY2xhc3MgUGF0aE5vZGUge1xuICAvKiogVGhlIHN0YXRlIGJlaW5nIGVudGVyZWQsIGV4aXRlZCwgb3IgcmV0YWluZWQgKi9cbiAgcHVibGljIHN0YXRlOiBTdGF0ZU9iamVjdDtcbiAgLyoqIFRoZSBwYXJhbWV0ZXJzIGRlY2xhcmVkIG9uIHRoZSBzdGF0ZSAqL1xuICBwdWJsaWMgcGFyYW1TY2hlbWE6IFBhcmFtW107XG4gIC8qKiBUaGUgcGFyYW1ldGVyIHZhbHVlcyB0aGF0IGJlbG9uZyB0byB0aGUgc3RhdGUgKi9cbiAgcHVibGljIHBhcmFtVmFsdWVzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKiogVGhlIGluZGl2aWR1YWwgKHN0YXRlZnVsKSByZXNvbHZhYmxlIG9iamVjdHMgdGhhdCBiZWxvbmcgdG8gdGhlIHN0YXRlICovXG4gIHB1YmxpYyByZXNvbHZhYmxlczogUmVzb2x2YWJsZVtdO1xuICAvKiogVGhlIHN0YXRlJ3MgZGVjbGFyZWQgdmlldyBjb25maWd1cmF0aW9uIG9iamVjdHMgKi9cbiAgcHVibGljIHZpZXdzOiBWaWV3Q29uZmlnW107XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjbG9uZSBvZiB0aGUgUGF0aE5vZGVcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGluc3RhbmNlIG1ldGhvZCBgbm9kZS5jbG9uZSgpYFxuICAgKi9cbiAgc3RhdGljIGNsb25lID0gKG5vZGU6IFBhdGhOb2RlKSA9PiBub2RlLmNsb25lKCk7XG5cbiAgLyoqIENyZWF0ZXMgYSBjb3B5IG9mIGEgUGF0aE5vZGUgKi9cbiAgY29uc3RydWN0b3Iobm9kZTogUGF0aE5vZGUpO1xuICAvKiogQ3JlYXRlcyBhIG5ldyAoZW1wdHkpIFBhdGhOb2RlIGZvciBhIFN0YXRlICovXG4gIGNvbnN0cnVjdG9yKHN0YXRlOiBTdGF0ZU9iamVjdCk7XG4gIGNvbnN0cnVjdG9yKHN0YXRlT3JOb2RlOiBhbnkpIHtcbiAgICBpZiAoc3RhdGVPck5vZGUgaW5zdGFuY2VvZiBQYXRoTm9kZSkge1xuICAgICAgY29uc3Qgbm9kZTogUGF0aE5vZGUgPSBzdGF0ZU9yTm9kZTtcbiAgICAgIHRoaXMuc3RhdGUgPSBub2RlLnN0YXRlO1xuICAgICAgdGhpcy5wYXJhbVNjaGVtYSA9IG5vZGUucGFyYW1TY2hlbWEuc2xpY2UoKTtcbiAgICAgIHRoaXMucGFyYW1WYWx1ZXMgPSBleHRlbmQoe30sIG5vZGUucGFyYW1WYWx1ZXMpO1xuICAgICAgdGhpcy5yZXNvbHZhYmxlcyA9IG5vZGUucmVzb2x2YWJsZXMuc2xpY2UoKTtcbiAgICAgIHRoaXMudmlld3MgPSBub2RlLnZpZXdzICYmIG5vZGUudmlld3Muc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3RhdGU6IFN0YXRlT2JqZWN0ID0gc3RhdGVPck5vZGU7XG4gICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLnBhcmFtU2NoZW1hID0gc3RhdGUucGFyYW1ldGVycyh7IGluaGVyaXQ6IGZhbHNlIH0pO1xuICAgICAgdGhpcy5wYXJhbVZhbHVlcyA9IHt9O1xuICAgICAgdGhpcy5yZXNvbHZhYmxlcyA9IHN0YXRlLnJlc29sdmFibGVzLm1hcChyZXMgPT4gcmVzLmNsb25lKCkpO1xuICAgIH1cbiAgfVxuXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgUGF0aE5vZGUodGhpcyk7XG4gIH1cblxuICAvKiogU2V0cyBbW3BhcmFtVmFsdWVzXV0gZm9yIHRoZSBub2RlLCBmcm9tIHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0IGhhc2ggKi9cbiAgYXBwbHlSYXdQYXJhbXMocGFyYW1zOiBSYXdQYXJhbXMpOiBQYXRoTm9kZSB7XG4gICAgY29uc3QgZ2V0UGFyYW1WYWwgPSAocGFyYW1EZWY6IFBhcmFtKSA9PiBbcGFyYW1EZWYuaWQsIHBhcmFtRGVmLnZhbHVlKHBhcmFtc1twYXJhbURlZi5pZF0pXTtcbiAgICB0aGlzLnBhcmFtVmFsdWVzID0gdGhpcy5wYXJhbVNjaGVtYS5yZWR1Y2UoKG1lbW8sIHBEZWYpID0+IGFwcGx5UGFpcnMobWVtbywgZ2V0UGFyYW1WYWwocERlZikpLCB7fSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogR2V0cyBhIHNwZWNpZmljIFtbUGFyYW1dXSBtZXRhZGF0YSB0aGF0IGJlbG9uZ3MgdG8gdGhlIG5vZGUgKi9cbiAgcGFyYW1ldGVyKG5hbWU6IHN0cmluZyk6IFBhcmFtIHtcbiAgICByZXR1cm4gZmluZCh0aGlzLnBhcmFtU2NoZW1hLCBwcm9wRXEoJ2lkJywgbmFtZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHN0YXRlIGFuZCBwYXJhbWV0ZXIgdmFsdWVzIGZvciBhbm90aGVyIFBhdGhOb2RlIGFyZVxuICAgKiBlcXVhbCB0byB0aGUgc3RhdGUgYW5kIHBhcmFtIHZhbHVlcyBmb3IgdGhpcyBQYXRoTm9kZVxuICAgKi9cbiAgZXF1YWxzKG5vZGU6IFBhdGhOb2RlLCBwYXJhbXNGbj86IEdldFBhcmFtc0ZuKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZGlmZiA9IHRoaXMuZGlmZihub2RlLCBwYXJhbXNGbik7XG4gICAgcmV0dXJuIGRpZmYgJiYgZGlmZi5sZW5ndGggPT09IDA7XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgUGFyYW1zIHdpdGggZGlmZmVyZW50IHBhcmFtZXRlciB2YWx1ZXMgb24gYW5vdGhlciBQYXRoTm9kZS5cbiAgICpcbiAgICogR2l2ZW4gYW5vdGhlciBub2RlIChvZiB0aGUgc2FtZSBzdGF0ZSksIGZpbmRzIHRoZSBwYXJhbWV0ZXIgdmFsdWVzIHdoaWNoIGRpZmZlci5cbiAgICogUmV0dXJucyB0aGUgW1tQYXJhbV1dIChzY2hlbWEgb2JqZWN0cykgd2hvc2UgcGFyYW1ldGVyIHZhbHVlcyBkaWZmZXIuXG4gICAqXG4gICAqIEdpdmVuIGFub3RoZXIgbm9kZSBmb3IgYSBkaWZmZXJlbnQgc3RhdGUsIHJldHVybnMgYGZhbHNlYFxuICAgKlxuICAgKiBAcGFyYW0gbm9kZSBUaGUgbm9kZSB0byBjb21wYXJlIHRvXG4gICAqIEBwYXJhbSBwYXJhbXNGbiBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB3aGljaCBwYXJhbWV0ZXJzIHNob3VsZCBiZSBjb21wYXJlZC5cbiAgICogQHJldHVybnMgVGhlIFtbUGFyYW1dXXMgd2hpY2ggZGlmZmVyLCBvciBudWxsIGlmIHRoZSB0d28gbm9kZXMgYXJlIGZvciBkaWZmZXJlbnQgc3RhdGVzXG4gICAqL1xuICBkaWZmKG5vZGU6IFBhdGhOb2RlLCBwYXJhbXNGbj86IEdldFBhcmFtc0ZuKTogUGFyYW1bXSB8IGZhbHNlIHtcbiAgICBpZiAodGhpcy5zdGF0ZSAhPT0gbm9kZS5zdGF0ZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3QgcGFyYW1zOiBQYXJhbVtdID0gcGFyYW1zRm4gPyBwYXJhbXNGbih0aGlzKSA6IHRoaXMucGFyYW1TY2hlbWE7XG4gICAgcmV0dXJuIFBhcmFtLmNoYW5nZWQocGFyYW1zLCB0aGlzLnBhcmFtVmFsdWVzLCBub2RlLnBhcmFtVmFsdWVzKTtcbiAgfVxufVxuXG4vKiogQGhpZGRlbiAqL1xuZXhwb3J0IHR5cGUgR2V0UGFyYW1zRm4gPSAocGF0aE5vZGU6IFBhdGhOb2RlKSA9PiBQYXJhbVtdO1xuIiwiLyoqIEBwdWJsaWNhcGkgQG1vZHVsZSBzdGF0ZSAqLyAvKiogKi9cblxuaW1wb3J0IHsgU3RhdGVEZWNsYXJhdGlvbiwgU3RhdGVPck5hbWUsIFRhcmdldFN0YXRlRGVmIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbk9wdGlvbnMgfSBmcm9tICcuLi90cmFuc2l0aW9uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4vc3RhdGVPYmplY3QnO1xuaW1wb3J0IHsgaXNTdHJpbmcgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBzdHJpbmdpZnkgfSBmcm9tICcuLi9jb21tb24vc3RyaW5ncyc7XG5pbXBvcnQgeyBleHRlbmQgfSBmcm9tICcuLi9jb21tb24nO1xuaW1wb3J0IHsgU3RhdGVSZWdpc3RyeSB9IGZyb20gJy4vc3RhdGVSZWdpc3RyeSc7XG5pbXBvcnQgeyBSYXdQYXJhbXMgfSBmcm9tICcuLi9wYXJhbXMnO1xuXG4vKipcbiAqIEVuY2Fwc3VsYXRlIHRoZSB0YXJnZXQgKGRlc3RpbmF0aW9uKSBzdGF0ZS9wYXJhbXMvb3B0aW9ucyBvZiBhIFtbVHJhbnNpdGlvbl1dLlxuICpcbiAqIFRoaXMgY2xhc3MgaXMgZnJlcXVlbnRseSB1c2VkIHRvIHJlZGlyZWN0IGEgdHJhbnNpdGlvbiB0byBhIG5ldyBkZXN0aW5hdGlvbi5cbiAqXG4gKiBTZWU6XG4gKlxuICogLSBbW0hvb2tSZXN1bHRdXVxuICogLSBbW1RyYW5zaXRpb25Ib29rRm5dXVxuICogLSBbW1RyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnRdXVxuICpcbiAqIFRvIGNyZWF0ZSBhIGBUYXJnZXRTdGF0ZWAsIHVzZSBbW1N0YXRlU2VydmljZS50YXJnZXRdXS5cbiAqXG4gKiAtLS1cbiAqXG4gKiBUaGlzIGNsYXNzIHdyYXBzOlxuICpcbiAqIDEpIGFuIGlkZW50aWZpZXIgZm9yIGEgc3RhdGVcbiAqIDIpIGEgc2V0IG9mIHBhcmFtZXRlcnNcbiAqIDMpIGFuZCB0cmFuc2l0aW9uIG9wdGlvbnNcbiAqIDQpIHRoZSByZWdpc3RlcmVkIHN0YXRlIG9iamVjdCAodGhlIFtbU3RhdGVEZWNsYXJhdGlvbl1dKVxuICpcbiAqIE1hbnkgVUktUm91dGVyIEFQSXMgc3VjaCBhcyBbW1N0YXRlU2VydmljZS5nb11dIHRha2UgYSBbW1N0YXRlT3JOYW1lXV0gYXJndW1lbnQgd2hpY2ggY2FuXG4gKiBlaXRoZXIgYmUgYSAqc3RhdGUgb2JqZWN0KiAoYSBbW1N0YXRlRGVjbGFyYXRpb25dXSBvciBbW1N0YXRlT2JqZWN0XV0pIG9yIGEgKnN0YXRlIG5hbWUqIChhIHN0cmluZykuXG4gKiBUaGUgYFRhcmdldFN0YXRlYCBjbGFzcyBub3JtYWxpemVzIHRob3NlIG9wdGlvbnMuXG4gKlxuICogQSBgVGFyZ2V0U3RhdGVgIG1heSBiZSB2YWxpZCAodGhlIHN0YXRlIGJlaW5nIHRhcmdldGVkIGV4aXN0cyBpbiB0aGUgcmVnaXN0cnkpXG4gKiBvciBpbnZhbGlkICh0aGUgc3RhdGUgYmVpbmcgdGFyZ2V0ZWQgaXMgbm90IHJlZ2lzdGVyZWQpLlxuICovXG5leHBvcnQgY2xhc3MgVGFyZ2V0U3RhdGUge1xuICBwcml2YXRlIF9kZWZpbml0aW9uOiBTdGF0ZU9iamVjdDtcbiAgcHJpdmF0ZSBfcGFyYW1zOiBSYXdQYXJhbXM7XG4gIHByaXZhdGUgX29wdGlvbnM6IFRyYW5zaXRpb25PcHRpb25zO1xuXG4gIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBoYXMgYSBzdGF0ZSBwcm9wZXJ0eSB0aGF0IG1pZ2h0IGJlIGEgc3RhdGUgb3Igc3RhdGUgbmFtZSAqL1xuICBzdGF0aWMgaXNEZWYgPSAob2JqKTogb2JqIGlzIFRhcmdldFN0YXRlRGVmID0+IG9iaiAmJiBvYmouc3RhdGUgJiYgKGlzU3RyaW5nKG9iai5zdGF0ZSkgfHwgaXNTdHJpbmcob2JqLnN0YXRlLm5hbWUpKTtcblxuICAvKipcbiAgICogVGhlIFRhcmdldFN0YXRlIGNvbnN0cnVjdG9yXG4gICAqXG4gICAqIE5vdGU6IERvIG5vdCBjb25zdHJ1Y3QgYSBgVGFyZ2V0U3RhdGVgIG1hbnVhbGx5LlxuICAgKiBUbyBjcmVhdGUgYSBgVGFyZ2V0U3RhdGVgLCB1c2UgdGhlIFtbU3RhdGVTZXJ2aWNlLnRhcmdldF1dIGZhY3RvcnkgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0gX3N0YXRlUmVnaXN0cnkgVGhlIFN0YXRlUmVnaXN0cnkgdG8gdXNlIHRvIGxvb2sgdXAgdGhlIF9kZWZpbml0aW9uXG4gICAqIEBwYXJhbSBfaWRlbnRpZmllciBBbiBpZGVudGlmaWVyIGZvciBhIHN0YXRlLlxuICAgKiAgICBFaXRoZXIgYSBmdWxseS1xdWFsaWZpZWQgc3RhdGUgbmFtZSwgb3IgdGhlIG9iamVjdCB1c2VkIHRvIGRlZmluZSB0aGUgc3RhdGUuXG4gICAqIEBwYXJhbSBfcGFyYW1zIFBhcmFtZXRlcnMgZm9yIHRoZSB0YXJnZXQgc3RhdGVcbiAgICogQHBhcmFtIF9vcHRpb25zIFRyYW5zaXRpb24gb3B0aW9ucy5cbiAgICpcbiAgICogQGludGVybmFsYXBpXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9zdGF0ZVJlZ2lzdHJ5OiBTdGF0ZVJlZ2lzdHJ5LFxuICAgIHByaXZhdGUgX2lkZW50aWZpZXI6IFN0YXRlT3JOYW1lLFxuICAgIF9wYXJhbXM/OiBSYXdQYXJhbXMsXG4gICAgX29wdGlvbnM/OiBUcmFuc2l0aW9uT3B0aW9uc1xuICApIHtcbiAgICB0aGlzLl9pZGVudGlmaWVyID0gX2lkZW50aWZpZXI7XG4gICAgdGhpcy5fcGFyYW1zID0gZXh0ZW5kKHt9LCBfcGFyYW1zIHx8IHt9KTtcbiAgICB0aGlzLl9vcHRpb25zID0gZXh0ZW5kKHt9LCBfb3B0aW9ucyB8fCB7fSk7XG4gICAgdGhpcy5fZGVmaW5pdGlvbiA9IF9zdGF0ZVJlZ2lzdHJ5Lm1hdGNoZXIuZmluZChfaWRlbnRpZmllciwgdGhpcy5fb3B0aW9ucy5yZWxhdGl2ZSk7XG4gIH1cblxuICAvKiogVGhlIG5hbWUgb2YgdGhlIHN0YXRlIHRoaXMgb2JqZWN0IHRhcmdldHMgKi9cbiAgbmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiAodGhpcy5fZGVmaW5pdGlvbiAmJiB0aGlzLl9kZWZpbml0aW9uLm5hbWUpIHx8IDxzdHJpbmc+dGhpcy5faWRlbnRpZmllcjtcbiAgfVxuXG4gIC8qKiBUaGUgaWRlbnRpZmllciB1c2VkIHdoZW4gY3JlYXRpbmcgdGhpcyBUYXJnZXRTdGF0ZSAqL1xuICBpZGVudGlmaWVyKCk6IFN0YXRlT3JOYW1lIHtcbiAgICByZXR1cm4gdGhpcy5faWRlbnRpZmllcjtcbiAgfVxuXG4gIC8qKiBUaGUgdGFyZ2V0IHBhcmFtZXRlciB2YWx1ZXMgKi9cbiAgcGFyYW1zKCk6IFJhd1BhcmFtcyB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcmFtcztcbiAgfVxuXG4gIC8qKiBUaGUgaW50ZXJuYWwgc3RhdGUgb2JqZWN0IChpZiBpdCB3YXMgZm91bmQpICovXG4gICRzdGF0ZSgpOiBTdGF0ZU9iamVjdCB7XG4gICAgcmV0dXJuIHRoaXMuX2RlZmluaXRpb247XG4gIH1cblxuICAvKiogVGhlIGludGVybmFsIHN0YXRlIGRlY2xhcmF0aW9uIChpZiBpdCB3YXMgZm91bmQpICovXG4gIHN0YXRlKCk6IFN0YXRlRGVjbGFyYXRpb24ge1xuICAgIHJldHVybiB0aGlzLl9kZWZpbml0aW9uICYmIHRoaXMuX2RlZmluaXRpb24uc2VsZjtcbiAgfVxuXG4gIC8qKiBUaGUgdGFyZ2V0IG9wdGlvbnMgKi9cbiAgb3B0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgfVxuXG4gIC8qKiBUcnVlIGlmIHRoZSB0YXJnZXQgc3RhdGUgd2FzIGZvdW5kICovXG4gIGV4aXN0cygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISEodGhpcy5fZGVmaW5pdGlvbiAmJiB0aGlzLl9kZWZpbml0aW9uLnNlbGYpO1xuICB9XG5cbiAgLyoqIFRydWUgaWYgdGhlIG9iamVjdCBpcyB2YWxpZCAqL1xuICB2YWxpZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMuZXJyb3IoKTtcbiAgfVxuXG4gIC8qKiBJZiB0aGUgb2JqZWN0IGlzIGludmFsaWQsIHJldHVybnMgdGhlIHJlYXNvbiB3aHkgKi9cbiAgZXJyb3IoKTogc3RyaW5nIHtcbiAgICBjb25zdCBiYXNlID0gPGFueT50aGlzLm9wdGlvbnMoKS5yZWxhdGl2ZTtcbiAgICBpZiAoIXRoaXMuX2RlZmluaXRpb24gJiYgISFiYXNlKSB7XG4gICAgICBjb25zdCBzdGF0ZU5hbWUgPSBiYXNlLm5hbWUgPyBiYXNlLm5hbWUgOiBiYXNlO1xuICAgICAgcmV0dXJuIGBDb3VsZCBub3QgcmVzb2x2ZSAnJHt0aGlzLm5hbWUoKX0nIGZyb20gc3RhdGUgJyR7c3RhdGVOYW1lfSdgO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX2RlZmluaXRpb24pIHJldHVybiBgTm8gc3VjaCBzdGF0ZSAnJHt0aGlzLm5hbWUoKX0nYDtcbiAgICBpZiAoIXRoaXMuX2RlZmluaXRpb24uc2VsZikgcmV0dXJuIGBTdGF0ZSAnJHt0aGlzLm5hbWUoKX0nIGhhcyBhbiBpbnZhbGlkIGRlZmluaXRpb25gO1xuICB9XG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIGAnJHt0aGlzLm5hbWUoKX0nJHtzdHJpbmdpZnkodGhpcy5wYXJhbXMoKSl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGlzIFRhcmdldFN0YXRlIHdoaWNoIHRhcmdldHMgYSBkaWZmZXJlbnQgc3RhdGUuXG4gICAqIFRoZSBuZXcgVGFyZ2V0U3RhdGUgaGFzIHRoZSBzYW1lIHBhcmFtZXRlciB2YWx1ZXMgYW5kIHRyYW5zaXRpb24gb3B0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHN0YXRlIFRoZSBuZXcgc3RhdGUgdGhhdCBzaG91bGQgYmUgdGFyZ2V0ZWRcbiAgICovXG4gIHdpdGhTdGF0ZShzdGF0ZTogU3RhdGVPck5hbWUpOiBUYXJnZXRTdGF0ZSB7XG4gICAgcmV0dXJuIG5ldyBUYXJnZXRTdGF0ZSh0aGlzLl9zdGF0ZVJlZ2lzdHJ5LCBzdGF0ZSwgdGhpcy5fcGFyYW1zLCB0aGlzLl9vcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGlzIFRhcmdldFN0YXRlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHBhcmFtZXRlciB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMgdGhlIG5ldyBwYXJhbWV0ZXIgdmFsdWVzIHRvIHVzZVxuICAgKiBAcGFyYW0gcmVwbGFjZSBXaGVuIGZhbHNlIChkZWZhdWx0KSB0aGUgbmV3IHBhcmFtZXRlciB2YWx1ZXMgd2lsbCBiZSBtZXJnZWQgd2l0aCB0aGUgY3VycmVudCB2YWx1ZXMuXG4gICAqICAgICAgICAgICAgICAgIFdoZW4gdHJ1ZSB0aGUgcGFyYW1ldGVyIHZhbHVlcyB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgY3VycmVudCB2YWx1ZXMuXG4gICAqL1xuICB3aXRoUGFyYW1zKHBhcmFtczogUmF3UGFyYW1zLCByZXBsYWNlID0gZmFsc2UpOiBUYXJnZXRTdGF0ZSB7XG4gICAgY29uc3QgbmV3UGFyYW1zOiBSYXdQYXJhbXMgPSByZXBsYWNlID8gcGFyYW1zIDogZXh0ZW5kKHt9LCB0aGlzLl9wYXJhbXMsIHBhcmFtcyk7XG4gICAgcmV0dXJuIG5ldyBUYXJnZXRTdGF0ZSh0aGlzLl9zdGF0ZVJlZ2lzdHJ5LCB0aGlzLl9pZGVudGlmaWVyLCBuZXdQYXJhbXMsIHRoaXMuX29wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb3B5IG9mIHRoaXMgVGFyZ2V0U3RhdGUsIHVzaW5nIHRoZSBzcGVjaWZpZWQgVHJhbnNpdGlvbiBPcHRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgbmV3IG9wdGlvbnMgdG8gdXNlXG4gICAqIEBwYXJhbSByZXBsYWNlIFdoZW4gZmFsc2UgKGRlZmF1bHQpIHRoZSBuZXcgb3B0aW9ucyB3aWxsIGJlIG1lcmdlZCB3aXRoIHRoZSBjdXJyZW50IG9wdGlvbnMuXG4gICAqICAgICAgICAgICAgICAgIFdoZW4gdHJ1ZSB0aGUgb3B0aW9ucyB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgY3VycmVudCBvcHRpb25zLlxuICAgKi9cbiAgd2l0aE9wdGlvbnMob3B0aW9uczogVHJhbnNpdGlvbk9wdGlvbnMsIHJlcGxhY2UgPSBmYWxzZSk6IFRhcmdldFN0YXRlIHtcbiAgICBjb25zdCBuZXdPcHRzID0gcmVwbGFjZSA/IG9wdGlvbnMgOiBleHRlbmQoe30sIHRoaXMuX29wdGlvbnMsIG9wdGlvbnMpO1xuICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUodGhpcy5fc3RhdGVSZWdpc3RyeSwgdGhpcy5faWRlbnRpZmllciwgdGhpcy5fcGFyYW1zLCBuZXdPcHRzKTtcbiAgfVxufVxuIiwiLyoqIEBpbnRlcm5hbGFwaSBAbW9kdWxlIHBhdGggKi8gLyoqICovXG5cbmltcG9ydCB7XG4gIGV4dGVuZCxcbiAgZmluZCxcbiAgcGljayxcbiAgb21pdCxcbiAgdGFpbCxcbiAgbWVyZ2VSLFxuICB2YWx1ZXMsXG4gIHVubmVzdFIsXG4gIFByZWRpY2F0ZSxcbiAgaW5BcnJheSxcbiAgYXJyYXlUdXBsZXMsXG59IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgcHJvcCwgcHJvcEVxLCBub3QgfSBmcm9tICcuLi9jb21tb24vaG9mJztcblxuaW1wb3J0IHsgUmF3UGFyYW1zIH0gZnJvbSAnLi4vcGFyYW1zL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBUcmVlQ2hhbmdlcyB9IGZyb20gJy4uL3RyYW5zaXRpb24vaW50ZXJmYWNlJztcbmltcG9ydCB7IFZpZXdDb25maWcgfSBmcm9tICcuLi92aWV3L2ludGVyZmFjZSc7XG5pbXBvcnQgeyBfVmlld0RlY2xhcmF0aW9uIH0gZnJvbSAnLi4vc3RhdGUvaW50ZXJmYWNlJztcblxuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZU9iamVjdCc7XG5pbXBvcnQgeyBUYXJnZXRTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL3RhcmdldFN0YXRlJztcbmltcG9ydCB7IEdldFBhcmFtc0ZuLCBQYXRoTm9kZSB9IGZyb20gJy4vcGF0aE5vZGUnO1xuaW1wb3J0IHsgVmlld1NlcnZpY2UgfSBmcm9tICcuLi92aWV3L3ZpZXcnO1xuaW1wb3J0IHsgUGFyYW0gfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuaW1wb3J0IHsgU3RhdGVSZWdpc3RyeSB9IGZyb20gJy4uL3N0YXRlJztcblxuLyoqXG4gKiBUaGlzIGNsYXNzIGNvbnRhaW5zIGZ1bmN0aW9ucyB3aGljaCBjb252ZXJ0IFRhcmdldFN0YXRlcywgTm9kZXMgYW5kIHBhdGhzIGZyb20gb25lIHR5cGUgdG8gYW5vdGhlci5cbiAqL1xuZXhwb3J0IGNsYXNzIFBhdGhVdGlscyB7XG4gIC8qKiBHaXZlbiBhIFBhdGhOb2RlW10sIGNyZWF0ZSBhbiBUYXJnZXRTdGF0ZSAqL1xuICBzdGF0aWMgbWFrZVRhcmdldFN0YXRlKHJlZ2lzdHJ5OiBTdGF0ZVJlZ2lzdHJ5LCBwYXRoOiBQYXRoTm9kZVtdKTogVGFyZ2V0U3RhdGUge1xuICAgIGNvbnN0IHN0YXRlID0gdGFpbChwYXRoKS5zdGF0ZTtcbiAgICByZXR1cm4gbmV3IFRhcmdldFN0YXRlKHJlZ2lzdHJ5LCBzdGF0ZSwgcGF0aC5tYXAocHJvcCgncGFyYW1WYWx1ZXMnKSkucmVkdWNlKG1lcmdlUiwge30pLCB7fSk7XG4gIH1cblxuICBzdGF0aWMgYnVpbGRQYXRoKHRhcmdldFN0YXRlOiBUYXJnZXRTdGF0ZSkge1xuICAgIGNvbnN0IHRvUGFyYW1zID0gdGFyZ2V0U3RhdGUucGFyYW1zKCk7XG4gICAgcmV0dXJuIHRhcmdldFN0YXRlLiRzdGF0ZSgpLnBhdGgubWFwKHN0YXRlID0+IG5ldyBQYXRoTm9kZShzdGF0ZSkuYXBwbHlSYXdQYXJhbXModG9QYXJhbXMpKTtcbiAgfVxuXG4gIC8qKiBHaXZlbiBhIGZyb21QYXRoOiBQYXRoTm9kZVtdIGFuZCBhIFRhcmdldFN0YXRlLCBidWlsZHMgYSB0b1BhdGg6IFBhdGhOb2RlW10gKi9cbiAgc3RhdGljIGJ1aWxkVG9QYXRoKGZyb21QYXRoOiBQYXRoTm9kZVtdLCB0YXJnZXRTdGF0ZTogVGFyZ2V0U3RhdGUpOiBQYXRoTm9kZVtdIHtcbiAgICBjb25zdCB0b1BhdGg6IFBhdGhOb2RlW10gPSBQYXRoVXRpbHMuYnVpbGRQYXRoKHRhcmdldFN0YXRlKTtcbiAgICBpZiAodGFyZ2V0U3RhdGUub3B0aW9ucygpLmluaGVyaXQpIHtcbiAgICAgIHJldHVybiBQYXRoVXRpbHMuaW5oZXJpdFBhcmFtcyhmcm9tUGF0aCwgdG9QYXRoLCBPYmplY3Qua2V5cyh0YXJnZXRTdGF0ZS5wYXJhbXMoKSkpO1xuICAgIH1cbiAgICByZXR1cm4gdG9QYXRoO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgVmlld0NvbmZpZyBvYmplY3RzIGFuZCBhZGRzIHRvIG5vZGVzLlxuICAgKlxuICAgKiBPbiBlYWNoIFtbUGF0aE5vZGVdXSwgY3JlYXRlcyBWaWV3Q29uZmlnIG9iamVjdHMgZnJvbSB0aGUgdmlld3M6IHByb3BlcnR5IG9mIHRoZSBub2RlJ3Mgc3RhdGVcbiAgICovXG4gIHN0YXRpYyBhcHBseVZpZXdDb25maWdzKCR2aWV3OiBWaWV3U2VydmljZSwgcGF0aDogUGF0aE5vZGVbXSwgc3RhdGVzOiBTdGF0ZU9iamVjdFtdKSB7XG4gICAgLy8gT25seSBhcHBseSB0aGUgdmlld0NvbmZpZ3MgdG8gdGhlIG5vZGVzIGZvciB0aGUgZ2l2ZW4gc3RhdGVzXG4gICAgcGF0aFxuICAgICAgLmZpbHRlcihub2RlID0+IGluQXJyYXkoc3RhdGVzLCBub2RlLnN0YXRlKSlcbiAgICAgIC5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgICBjb25zdCB2aWV3RGVjbHM6IF9WaWV3RGVjbGFyYXRpb25bXSA9IHZhbHVlcyhub2RlLnN0YXRlLnZpZXdzIHx8IHt9KTtcbiAgICAgICAgY29uc3Qgc3ViUGF0aCA9IFBhdGhVdGlscy5zdWJQYXRoKHBhdGgsIG4gPT4gbiA9PT0gbm9kZSk7XG4gICAgICAgIGNvbnN0IHZpZXdDb25maWdzOiBWaWV3Q29uZmlnW11bXSA9IHZpZXdEZWNscy5tYXAodmlldyA9PiAkdmlldy5jcmVhdGVWaWV3Q29uZmlnKHN1YlBhdGgsIHZpZXcpKTtcbiAgICAgICAgbm9kZS52aWV3cyA9IHZpZXdDb25maWdzLnJlZHVjZSh1bm5lc3RSLCBbXSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIGZyb21QYXRoIGFuZCBhIHRvUGF0aCwgcmV0dXJucyBhIG5ldyB0byBwYXRoIHdoaWNoIGluaGVyaXRzIHBhcmFtZXRlcnMgZnJvbSB0aGUgZnJvbVBhdGhcbiAgICpcbiAgICogRm9yIGEgcGFyYW1ldGVyIGluIGEgbm9kZSB0byBiZSBpbmhlcml0ZWQgZnJvbSB0aGUgZnJvbSBwYXRoOlxuICAgKiAtIFRoZSB0b1BhdGgncyBub2RlIG11c3QgaGF2ZSBhIG1hdGNoaW5nIG5vZGUgaW4gdGhlIGZyb21QYXRoIChieSBzdGF0ZSkuXG4gICAqIC0gVGhlIHBhcmFtZXRlciBuYW1lIG11c3Qgbm90IGJlIGZvdW5kIGluIHRoZSB0b0tleXMgcGFyYW1ldGVyIGFycmF5LlxuICAgKlxuICAgKiBOb3RlOiB0aGUga2V5cyBwcm92aWRlZCBpbiB0b0tleXMgYXJlIGludGVuZGVkIHRvIGJlIHRob3NlIHBhcmFtIGtleXMgZXhwbGljaXRseSBzcGVjaWZpZWQgYnkgc29tZVxuICAgKiBjYWxsZXIsIGZvciBpbnN0YW5jZSwgJHN0YXRlLnRyYW5zaXRpb25UbyguLi4sIHRvUGFyYW1zKS4gIElmIGEga2V5IHdhcyBmb3VuZCBpbiB0b1BhcmFtcyxcbiAgICogaXQgaXMgbm90IGluaGVyaXRlZCBmcm9tIHRoZSBmcm9tUGF0aC5cbiAgICovXG4gIHN0YXRpYyBpbmhlcml0UGFyYW1zKGZyb21QYXRoOiBQYXRoTm9kZVtdLCB0b1BhdGg6IFBhdGhOb2RlW10sIHRvS2V5czogc3RyaW5nW10gPSBbXSk6IFBhdGhOb2RlW10ge1xuICAgIGZ1bmN0aW9uIG5vZGVQYXJhbVZhbHMocGF0aDogUGF0aE5vZGVbXSwgc3RhdGU6IFN0YXRlT2JqZWN0KTogUmF3UGFyYW1zIHtcbiAgICAgIGNvbnN0IG5vZGU6IFBhdGhOb2RlID0gZmluZChwYXRoLCBwcm9wRXEoJ3N0YXRlJywgc3RhdGUpKTtcbiAgICAgIHJldHVybiBleHRlbmQoe30sIG5vZGUgJiYgbm9kZS5wYXJhbVZhbHVlcyk7XG4gICAgfVxuXG4gICAgY29uc3Qgbm9Jbmhlcml0ID0gZnJvbVBhdGhcbiAgICAgIC5tYXAobm9kZSA9PiBub2RlLnBhcmFtU2NoZW1hKVxuICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAgIC5maWx0ZXIocGFyYW0gPT4gIXBhcmFtLmluaGVyaXQpXG4gICAgICAubWFwKHByb3AoJ2lkJykpO1xuXG4gICAgLyoqXG4gICAgICogR2l2ZW4gYW4gW1tQYXRoTm9kZV1dIFwidG9Ob2RlXCIsIHJldHVybiBhIG5ldyBbW1BhdGhOb2RlXV0gd2l0aCBwYXJhbSB2YWx1ZXMgaW5oZXJpdGVkIGZyb20gdGhlXG4gICAgICogbWF0Y2hpbmcgbm9kZSBpbiBmcm9tUGF0aC4gIE9ubHkgaW5oZXJpdCBrZXlzIHRoYXQgYXJlbid0IGZvdW5kIGluIFwidG9LZXlzXCIgZnJvbSB0aGUgbm9kZSBpbiBcImZyb21QYXRoXCJcIlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1ha2VJbmhlcml0ZWRQYXJhbXNOb2RlKHRvTm9kZTogUGF0aE5vZGUpOiBQYXRoTm9kZSB7XG4gICAgICAvLyBBbGwgcGFyYW0gdmFsdWVzIGZvciB0aGUgbm9kZSAobWF5IGluY2x1ZGUgZGVmYXVsdCBrZXkvdmFscywgd2hlbiBrZXkgd2FzIG5vdCBmb3VuZCBpbiB0b1BhcmFtcylcbiAgICAgIGxldCB0b1BhcmFtVmFscyA9IGV4dGVuZCh7fSwgdG9Ob2RlICYmIHRvTm9kZS5wYXJhbVZhbHVlcyk7XG4gICAgICAvLyBsaW1pdGVkIHRvIG9ubHkgdGhvc2Uga2V5cyBmb3VuZCBpbiB0b1BhcmFtc1xuICAgICAgY29uc3QgaW5jb21pbmdQYXJhbVZhbHMgPSBwaWNrKHRvUGFyYW1WYWxzLCB0b0tleXMpO1xuICAgICAgdG9QYXJhbVZhbHMgPSBvbWl0KHRvUGFyYW1WYWxzLCB0b0tleXMpO1xuICAgICAgY29uc3QgZnJvbVBhcmFtVmFscyA9IG9taXQobm9kZVBhcmFtVmFscyhmcm9tUGF0aCwgdG9Ob2RlLnN0YXRlKSB8fCB7fSwgbm9Jbmhlcml0KTtcbiAgICAgIC8vIGV4dGVuZCB0b1BhcmFtVmFscyB3aXRoIGFueSBmcm9tUGFyYW1WYWxzLCB0aGVuIG92ZXJyaWRlIGFueSBvZiB0aG9zZSB0aG9zZSB3aXRoIGluY29taW5nUGFyYW1WYWxzXG4gICAgICBjb25zdCBvd25QYXJhbVZhbHM6IFJhd1BhcmFtcyA9IGV4dGVuZCh0b1BhcmFtVmFscywgZnJvbVBhcmFtVmFscywgaW5jb21pbmdQYXJhbVZhbHMpO1xuICAgICAgcmV0dXJuIG5ldyBQYXRoTm9kZSh0b05vZGUuc3RhdGUpLmFwcGx5UmF3UGFyYW1zKG93blBhcmFtVmFscyk7XG4gICAgfVxuXG4gICAgLy8gVGhlIHBhcmFtIGtleXMgc3BlY2lmaWVkIGJ5IHRoZSBpbmNvbWluZyB0b1BhcmFtc1xuICAgIHJldHVybiA8UGF0aE5vZGVbXT50b1BhdGgubWFwKG1ha2VJbmhlcml0ZWRQYXJhbXNOb2RlKTtcbiAgfVxuXG4gIHN0YXRpYyBub25EeW5hbWljUGFyYW1zID0gKG5vZGU6IFBhdGhOb2RlKTogUGFyYW1bXSA9PlxuICAgIG5vZGUuc3RhdGUucGFyYW1ldGVycyh7IGluaGVyaXQ6IGZhbHNlIH0pLmZpbHRlcihwYXJhbSA9PiAhcGFyYW0uZHluYW1pYyk7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSB0cmVlIGNoYW5nZXMgKGVudGVyaW5nLCBleGl0aW5nKSBiZXR3ZWVuIGEgZnJvbVBhdGggYW5kIHRvUGF0aC5cbiAgICovXG4gIHN0YXRpYyB0cmVlQ2hhbmdlcyhmcm9tUGF0aDogUGF0aE5vZGVbXSwgdG9QYXRoOiBQYXRoTm9kZVtdLCByZWxvYWRTdGF0ZTogU3RhdGVPYmplY3QpOiBUcmVlQ2hhbmdlcyB7XG4gICAgY29uc3QgbWF4ID0gTWF0aC5taW4oZnJvbVBhdGgubGVuZ3RoLCB0b1BhdGgubGVuZ3RoKTtcbiAgICBsZXQga2VlcCA9IDA7XG5cbiAgICBjb25zdCBub2Rlc01hdGNoID0gKG5vZGUxOiBQYXRoTm9kZSwgbm9kZTI6IFBhdGhOb2RlKSA9PiBub2RlMS5lcXVhbHMobm9kZTIsIFBhdGhVdGlscy5ub25EeW5hbWljUGFyYW1zKTtcblxuICAgIHdoaWxlIChrZWVwIDwgbWF4ICYmIGZyb21QYXRoW2tlZXBdLnN0YXRlICE9PSByZWxvYWRTdGF0ZSAmJiBub2Rlc01hdGNoKGZyb21QYXRoW2tlZXBdLCB0b1BhdGhba2VlcF0pKSB7XG4gICAgICBrZWVwKys7XG4gICAgfVxuXG4gICAgLyoqIEdpdmVuIGEgcmV0YWluZWQgbm9kZSwgcmV0dXJuIGEgbmV3IG5vZGUgd2hpY2ggdXNlcyB0aGUgdG8gbm9kZSdzIHBhcmFtIHZhbHVlcyAqL1xuICAgIGZ1bmN0aW9uIGFwcGx5VG9QYXJhbXMocmV0YWluZWROb2RlOiBQYXRoTm9kZSwgaWR4OiBudW1iZXIpOiBQYXRoTm9kZSB7XG4gICAgICBjb25zdCBjbG9uZWQgPSByZXRhaW5lZE5vZGUuY2xvbmUoKTtcbiAgICAgIGNsb25lZC5wYXJhbVZhbHVlcyA9IHRvUGF0aFtpZHhdLnBhcmFtVmFsdWVzO1xuICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICB9XG5cbiAgICBsZXQgZnJvbTogUGF0aE5vZGVbXSwgcmV0YWluZWQ6IFBhdGhOb2RlW10sIGV4aXRpbmc6IFBhdGhOb2RlW10sIGVudGVyaW5nOiBQYXRoTm9kZVtdLCB0bzogUGF0aE5vZGVbXTtcblxuICAgIGZyb20gPSBmcm9tUGF0aDtcbiAgICByZXRhaW5lZCA9IGZyb20uc2xpY2UoMCwga2VlcCk7XG4gICAgZXhpdGluZyA9IGZyb20uc2xpY2Uoa2VlcCk7XG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgcmV0YWluZWQgcGF0aCAod2l0aCBzaGFsbG93IGNvcGllcyBvZiBub2Rlcykgd2hpY2ggaGF2ZSB0aGUgcGFyYW1zIG9mIHRoZSB0b1BhdGggbWFwcGVkXG4gICAgY29uc3QgcmV0YWluZWRXaXRoVG9QYXJhbXMgPSByZXRhaW5lZC5tYXAoYXBwbHlUb1BhcmFtcyk7XG4gICAgZW50ZXJpbmcgPSB0b1BhdGguc2xpY2Uoa2VlcCk7XG4gICAgdG8gPSByZXRhaW5lZFdpdGhUb1BhcmFtcy5jb25jYXQoZW50ZXJpbmcpO1xuXG4gICAgcmV0dXJuIHsgZnJvbSwgdG8sIHJldGFpbmVkLCByZXRhaW5lZFdpdGhUb1BhcmFtcywgZXhpdGluZywgZW50ZXJpbmcgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IHBhdGggd2hpY2ggaXM6IHRoZSBzdWJwYXRoIG9mIHRoZSBmaXJzdCBwYXRoIHdoaWNoIG1hdGNoZXMgdGhlIHNlY29uZCBwYXRoLlxuICAgKlxuICAgKiBUaGUgbmV3IHBhdGggc3RhcnRzIGZyb20gcm9vdCBhbmQgY29udGFpbnMgYW55IG5vZGVzIHRoYXQgbWF0Y2ggdGhlIG5vZGVzIGluIHRoZSBzZWNvbmQgcGF0aC5cbiAgICogSXQgc3RvcHMgYmVmb3JlIHRoZSBmaXJzdCBub24tbWF0Y2hpbmcgbm9kZS5cbiAgICpcbiAgICogTm9kZXMgYXJlIGNvbXBhcmVkIHVzaW5nIHRoZWlyIHN0YXRlIHByb3BlcnR5IGFuZCB0aGVpciBwYXJhbWV0ZXIgdmFsdWVzLlxuICAgKiBJZiBhIGBwYXJhbXNGbmAgaXMgcHJvdmlkZWQsIG9ubHkgdGhlIFtbUGFyYW1dXSByZXR1cm5lZCBieSB0aGUgZnVuY3Rpb24gd2lsbCBiZSBjb25zaWRlcmVkIHdoZW4gY29tcGFyaW5nIG5vZGVzLlxuICAgKlxuICAgKiBAcGFyYW0gcGF0aEEgdGhlIGZpcnN0IHBhdGhcbiAgICogQHBhcmFtIHBhdGhCIHRoZSBzZWNvbmQgcGF0aFxuICAgKiBAcGFyYW0gcGFyYW1zRm4gYSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIHRoZSBwYXJhbWV0ZXJzIHRvIGNvbnNpZGVyIHdoZW4gY29tcGFyaW5nXG4gICAqXG4gICAqIEByZXR1cm5zIGFuIGFycmF5IG9mIFBhdGhOb2RlcyBmcm9tIHRoZSBmaXJzdCBwYXRoIHdoaWNoIG1hdGNoIHRoZSBub2RlcyBpbiB0aGUgc2Vjb25kIHBhdGhcbiAgICovXG4gIHN0YXRpYyBtYXRjaGluZyhwYXRoQTogUGF0aE5vZGVbXSwgcGF0aEI6IFBhdGhOb2RlW10sIHBhcmFtc0ZuPzogR2V0UGFyYW1zRm4pOiBQYXRoTm9kZVtdIHtcbiAgICBsZXQgZG9uZSA9IGZhbHNlO1xuICAgIGNvbnN0IHR1cGxlczogUGF0aE5vZGVbXVtdID0gYXJyYXlUdXBsZXMocGF0aEEsIHBhdGhCKTtcbiAgICByZXR1cm4gdHVwbGVzLnJlZHVjZSgobWF0Y2hpbmcsIFtub2RlQSwgbm9kZUJdKSA9PiB7XG4gICAgICBkb25lID0gZG9uZSB8fCAhbm9kZUEuZXF1YWxzKG5vZGVCLCBwYXJhbXNGbik7XG4gICAgICByZXR1cm4gZG9uZSA/IG1hdGNoaW5nIDogbWF0Y2hpbmcuY29uY2F0KG5vZGVBKTtcbiAgICB9LCBbXSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHR3byBwYXRocyBhcmUgaWRlbnRpY2FsLlxuICAgKlxuICAgKiBAcGFyYW0gcGF0aEFcbiAgICogQHBhcmFtIHBhdGhCXG4gICAqIEBwYXJhbSBwYXJhbXNGbiBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlIHBhcmFtZXRlcnMgdG8gY29uc2lkZXIgd2hlbiBjb21wYXJpbmdcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgdGhlIHN0YXRlcyBhbmQgcGFyYW1ldGVyIHZhbHVlcyBmb3IgYm90aCBwYXRocyBhcmUgaWRlbnRpY2FsXG4gICAqL1xuICBzdGF0aWMgZXF1YWxzKHBhdGhBOiBQYXRoTm9kZVtdLCBwYXRoQjogUGF0aE5vZGVbXSwgcGFyYW1zRm4/OiBHZXRQYXJhbXNGbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBwYXRoQS5sZW5ndGggPT09IHBhdGhCLmxlbmd0aCAmJiBQYXRoVXRpbHMubWF0Y2hpbmcocGF0aEEsIHBhdGhCLCBwYXJhbXNGbikubGVuZ3RoID09PSBwYXRoQS5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGEgc3VicGF0aCBvZiBhIHBhdGgsIHdoaWNoIHN0b3BzIGF0IHRoZSBmaXJzdCBtYXRjaGluZyBub2RlXG4gICAqXG4gICAqIEdpdmVuIGFuIGFycmF5IG9mIG5vZGVzLCByZXR1cm5zIGEgc3Vic2V0IG9mIHRoZSBhcnJheSBzdGFydGluZyBmcm9tIHRoZSBmaXJzdCBub2RlLFxuICAgKiBzdG9wcGluZyB3aGVuIHRoZSBmaXJzdCBub2RlIG1hdGNoZXMgdGhlIHByZWRpY2F0ZS5cbiAgICpcbiAgICogQHBhcmFtIHBhdGggYSBwYXRoIG9mIFtbUGF0aE5vZGVdXXNcbiAgICogQHBhcmFtIHByZWRpY2F0ZSBhIFtbUHJlZGljYXRlXV0gZm4gdGhhdCBtYXRjaGVzIFtbUGF0aE5vZGVdXXNcbiAgICogQHJldHVybnMgYSBzdWJwYXRoIHVwIHRvIHRoZSBtYXRjaGluZyBub2RlLCBvciB1bmRlZmluZWQgaWYgbm8gbWF0Y2ggaXMgZm91bmRcbiAgICovXG4gIHN0YXRpYyBzdWJQYXRoKHBhdGg6IFBhdGhOb2RlW10sIHByZWRpY2F0ZTogUHJlZGljYXRlPFBhdGhOb2RlPik6IFBhdGhOb2RlW10ge1xuICAgIGNvbnN0IG5vZGUgPSBmaW5kKHBhdGgsIHByZWRpY2F0ZSk7XG4gICAgY29uc3QgZWxlbWVudElkeCA9IHBhdGguaW5kZXhPZihub2RlKTtcbiAgICByZXR1cm4gZWxlbWVudElkeCA9PT0gLTEgPyB1bmRlZmluZWQgOiBwYXRoLnNsaWNlKDAsIGVsZW1lbnRJZHggKyAxKTtcbiAgfVxuXG4gIC8qKiBHZXRzIHRoZSByYXcgcGFyYW1ldGVyIHZhbHVlcyBmcm9tIGEgcGF0aCAqL1xuICBzdGF0aWMgcGFyYW1WYWx1ZXMgPSAocGF0aDogUGF0aE5vZGVbXSkgPT4gcGF0aC5yZWR1Y2UoKGFjYywgbm9kZSkgPT4gZXh0ZW5kKGFjYywgbm9kZS5wYXJhbVZhbHVlcyksIHt9KTtcbn1cbiIsIi8qKlxuICogIyBUaGUgUmVzb2x2ZSBzdWJzeXN0ZW1cbiAqXG4gKiBUaGlzIHN1YnN5c3RlbSBpcyBhbiBhc3luY2hyb25vdXMsIGhpZXJhcmNoaWNhbCBEZXBlbmRlbmN5IEluamVjdGlvbiBzeXN0ZW0uXG4gKlxuICogVHlwaWNhbGx5LCByZXNvbHZlIGlzIGNvbmZpZ3VyZWQgb24gYSBzdGF0ZSB1c2luZyBhIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV0gZGVjbGFyYXRpb24uXG4gKlxuICogQHB1YmxpY2FwaSBAbW9kdWxlIHJlc29sdmVcbiAqLyAvKiogKi9cbmltcG9ydCB7IFJlc29sdmFibGUgfSBmcm9tICcuL3Jlc29sdmFibGUnO1xuXG4vKipcbiAqIEFuIGludGVyZmFjZSB3aGljaCBpcyBzaW1pbGFyIHRvIGFuIEFuZ3VsYXIgMiBgUHJvdmlkZXJgXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUHJvdmlkZXJMaWtlIHtcbiAgcHJvdmlkZTogYW55O1xuICB1c2VDbGFzcz86IGFueTtcbiAgdXNlRmFjdG9yeT86IEZ1bmN0aW9uO1xuICB1c2VWYWx1ZT86IGFueTtcbiAgdXNlRXhpc3Rpbmc/OiBhbnk7XG4gIGRlcHM/OiBhbnlbXTtcbn1cblxuLyoqXG4gKiBBIHBsYWluIG9iamVjdCB1c2VkIHRvIGRlc2NyaWJlIGEgW1tSZXNvbHZhYmxlXV1cbiAqXG4gKiBUaGVzZSBvYmplY3RzIG1heSBiZSB1c2VkIGluIHRoZSBbW1N0YXRlRGVjbGFyYXRpb24ucmVzb2x2ZV1dIGFycmF5IHRvIGRlY2xhcmVcbiAqIGFzeW5jIGRhdGEgdGhhdCB0aGUgc3RhdGUgb3Igc3Vic3RhdGVzIHJlcXVpcmUuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBganNcbiAqXG4gKiB2YXIgc3RhdGUgPSB7XG4gKiAgIG5hbWU6ICdtYWluJyxcbiAqICAgcmVzb2x2ZTogW1xuICogICAgIHsgdG9rZW46ICdteURhdGEnLCBkZXBzOiBbTXlEYXRhQXBpXSwgcmVzb2x2ZUZuOiAobXlEYXRhQXBpKSA9PiBteURhdGFBcGkuZ2V0RGF0YSgpIH0sXG4gKiAgIF0sXG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXNvbHZhYmxlTGl0ZXJhbCB7XG4gIC8qKlxuICAgKiBBIERlcGVuZGVuY3kgSW5qZWN0aW9uIHRva2VuXG4gICAqXG4gICAqIFRoaXMgUmVzb2x2YWJsZSdzIERJIHRva2VuLlxuICAgKiBUaGUgUmVzb2x2YWJsZSB3aWxsIGJlIGluamVjdGFibGUgZWxzZXdoZXJlIHVzaW5nIHRoZSB0b2tlbi5cbiAgICovXG4gIHRva2VuOiBhbnk7XG5cbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gd2hpY2ggZmV0Y2hlcyB0aGUgUmVzb2x2YWJsZSdzIGRhdGFcbiAgICpcbiAgICogQSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIG9uZSBvZjpcbiAgICpcbiAgICogLSBUaGUgcmVzb2x2ZWQgdmFsdWUgKHN5bmNocm9ub3VzbHkpXG4gICAqIC0gQSBwcm9taXNlIGZvciB0aGUgcmVzb2x2ZWQgdmFsdWVcbiAgICogLSBBbiBPYnNlcnZhYmxlIG9mIHRoZSByZXNvbHZlZCB2YWx1ZShzKVxuICAgKlxuICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgcHJvdmlkZWQgdGhlIGRlcGVuZGVuY2llcyBsaXN0ZWQgaW4gW1tkZXBzXV0gYXMgaXRzIGFyZ3VtZW50cy5cbiAgICogVGhlIHJlc29sdmUgc3lzdGVtIHdpbGwgYXN5bmNocm9ub3VzbHkgZmV0Y2ggdGhlIGRlcGVuZGVuY2llcyBiZWZvcmUgaW52b2tpbmcgdGhpcyBmdW5jdGlvbi5cbiAgICovXG4gIHJlc29sdmVGbjogRnVuY3Rpb247XG5cbiAgLyoqXG4gICAqIERlZmluZXMgdGhlIFJlc29sdmUgUG9saWN5XG4gICAqXG4gICAqIEEgcG9saWN5IHRoYXQgZGVmaW5lcyB3aGVuIHRvIGludm9rZSB0aGUgcmVzb2x2ZSxcbiAgICogYW5kIHdoZXRoZXIgdG8gd2FpdCBmb3IgYXN5bmMgYW5kIHVud3JhcCB0aGUgZGF0YVxuICAgKi9cbiAgcG9saWN5PzogUmVzb2x2ZVBvbGljeTtcblxuICAvKipcbiAgICogVGhlIERlcGVuZGVuY3kgSW5qZWN0aW9uIHRva2Vuc1xuICAgKlxuICAgKiBUaGlzIGlzIGFuIGFycmF5IG9mIERlcGVuZGVuY3kgSW5qZWN0aW9uIHRva2VucyBmb3IgdGhlIGRlcGVuZGVuY2llcyBvZiB0aGUgW1tyZXNvbHZlRm5dXS5cbiAgICpcbiAgICogVGhlIERJIHRva2VucyBhcmUgcmVmZXJlbmNlcyB0byBvdGhlciBgUmVzb2x2YWJsZXNgLCBvciB0byBvdGhlclxuICAgKiBzZXJ2aWNlcyBmcm9tIHRoZSBuYXRpdmUgREkgc3lzdGVtLlxuICAgKi9cbiAgZGVwcz86IGFueVtdO1xuXG4gIC8qKiBQcmUtcmVzb2x2ZWQgZGF0YS4gKi9cbiAgZGF0YT86IGFueTtcbn1cblxuLyoqXG4gKiBEZWZpbmVzIGhvdyBhIHJlc29sdmUgaXMgcHJvY2Vzc2VkIGR1cmluZyBhIHRyYW5zaXRpb25cbiAqXG4gKiBUaGlzIG9iamVjdCBpcyB0aGUgW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVQb2xpY3ldXSBwcm9wZXJ0eS5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogLy8gRmV0Y2hlZCB3aGVuIHRoZSByZXNvbHZlJ3Mgc3RhdGUgaXMgYmVpbmcgZW50ZXJlZC5cbiAqIC8vIFdhaXQgZm9yIHRoZSBwcm9taXNlIHRvIHJlc29sdmUuXG4gKiB2YXIgcG9saWN5MSA9IHsgd2hlbjogXCJMQVpZXCIsIGFzeW5jOiBcIldBSVRcIiB9XG4gKlxuICogLy8gRmV0Y2hlZCB3aGVuIHRoZSBUcmFuc2l0aW9uIGlzIHN0YXJ0aW5nLlxuICogLy8gRG8gbm90IHdhaXQgZm9yIHRoZSByZXR1cm5lZCBwcm9taXNlIHRvIHJlc29sdmUuXG4gKiAvLyBJbmplY3QgdGhlIHJhdyBwcm9taXNlL3ZhbHVlXG4gKiB2YXIgcG9saWN5MiA9IHsgd2hlbjogXCJFQUdFUlwiLCBhc3luYzogXCJOT1dBSVRcIiB9XG4gKiBgYGBcbiAqXG4gKiBUaGUgcG9saWN5IGZvciBhIGdpdmVuIFJlc29sdmFibGUgaXMgbWVyZ2VkIGZyb20gdGhyZWUgc291cmNlcyAoaGlnaGVzdCBwcmlvcml0eSBmaXJzdCk6XG4gKlxuICogLSAxKSBJbmRpdmlkdWFsIHJlc29sdmUgZGVmaW5pdGlvblxuICogLSAyKSBTdGF0ZSBkZWZpbml0aW9uXG4gKiAtIDMpIEdsb2JhbCBkZWZhdWx0XG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBganNcbiAqIC8vIFdhaXQgZm9yIGFuIE9ic2VydmFibGUgdG8gZW1pdCBvbmUgaXRlbS5cbiAqIC8vIFNpbmNlIGB3YWl0YCBpcyBub3Qgc3BlY2lmaWVkLCBpdCB1c2VzIHRoZSBgd2FpdGBcbiAqIC8vIHBvbGljeSBkZWZpbmVkIG9uIHRoZSBzdGF0ZSwgb3IgdGhlIGdsb2JhbCBkZWZhdWx0XG4gKiAvLyBpZiBubyBgd2FpdGAgcG9saWN5IGlzIGRlZmluZWQgb24gdGhlIHN0YXRlXG4gKiBpbXBvcnQgeyBSWFdBSVQgfSBmcm9tICdAdWlyb3V0ZXIvcngnO1xuICpcbiAqIHZhciBteVJlc29sdmFibGVQb2xpY3kgPSB7IGFzeW5jOiBSWFdBSVQgfVxuICogYGBgXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVzb2x2ZVBvbGljeSB7XG4gIC8qKlxuICAgKiBEZWZpbmVzIHdoZW4gYSBSZXNvbHZhYmxlIGlzIHJlc29sdmVkIChmZXRjaGVkKSBkdXJpbmcgYSB0cmFuc2l0aW9uXG4gICAqXG4gICAqIC0gYExBWllgIChkZWZhdWx0KVxuICAgKiAgIC0gUmVzb2x2ZWQgYXMgdGhlIHJlc29sdmUncyBzdGF0ZSBpcyBiZWluZyBlbnRlcmVkXG4gICAqIC0gYEVBR0VSYFxuICAgKiAgIC0gUmVzb2x2ZWQgYXMgdGhlIHRyYW5zaXRpb24gaXMgc3RhcnRpbmdcbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBSZXNvbHZlcyBmb3IgYG1haW5gIGFuZCBgbWFpbi5ob21lYCBhcmUgZmV0Y2hlZCB3aGVuIGVhY2ggc3RhdGUgaXMgZW50ZXJlZC5cbiAgICogQWxsIG9mIGBtYWluYCByZXNvbHZlcyBhcmUgcHJvY2Vzc2VkIGJlZm9yZSBmZXRjaGluZyBgbWFpbi5ob21lYCByZXNvbHZlcy5cbiAgICogYGBganNcbiAgICogdmFyIHN0YXRlID0ge1xuICAgKiAgIG5hbWU6ICdtYWluJyxcbiAgICogICByZXNvbHZlOiBtYWluUmVzb2x2ZXMsIC8vIGRlZmluZWQgZWxzZXdoZXJlXG4gICAqICAgcmVzb2x2ZVBvbGljeTogeyB3aGVuOiAnTEFaWScgfSwgLy8gZGVmYXVsdFxuICAgKiB9XG4gICAqXG4gICAqIHZhciBzdGF0ZSA9IHtcbiAgICogICBuYW1lOiAnbWFpbi5ob21lJyxcbiAgICogICByZXNvbHZlOiBob21lUmVzb2x2ZXMsIC8vIGRlZmluZWQgZWxzZXdoZXJlXG4gICAqICAgcmVzb2x2ZVBvbGljeTogeyB3aGVuOiAnTEFaWScgfSwgLy8gZGVmYXVsdFxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIFJlc29sdmVzIGZvciBgbWFpbmAgYW5kIGBtYWluLmhvbWVgIGFyZSBmZXRjaGVkIGF0IHRoZSBzYW1lIHRpbWUgd2hlbiB0aGUgdHJhbnNpdGlvbiBzdGFydHMuXG4gICAqIFRoaXMgaGFwcGVucyBlYXJsaWVyIGluIHRoZSBsaWZlY3ljbGUgdGhhbiB3aGVuIHN0YXRlcyBhcmUgZW50ZXJlZC5cbiAgICogQWxsIG9mIHRoZSBgbWFpbmAgYW5kIGBtYWluLmhvbWVgIHJlc29sdmVzIGFyZSBmZXRjaGVkIGFzIHNvb24gYXMgcG9zc2libGUuXG4gICAqIGBgYGpzXG4gICAqIHZhciBtYWluU3RhdGUgPSB7XG4gICAqICAgbmFtZTogJ21haW4nLFxuICAgKiAgIHJlc29sdmU6IG1haW5SZXNvbHZlcywgLy8gZGVmaW5lZCBlbHNld2hlcmVcbiAgICogICByZXNvbHZlUG9saWN5OiB7IHdoZW46ICdFQUdFUicgfSxcbiAgICogfVxuICAgKlxuICAgKiB2YXIgaG9tZVN0YXRlID0ge1xuICAgKiAgIG5hbWU6ICdtYWluLmhvbWUnLFxuICAgKiAgIHJlc29sdmU6IGhvbWVSZXNvbHZlcywgLy8gZGVmaW5lZCBlbHNld2hlcmVcbiAgICogICByZXNvbHZlUG9saWN5OiB7IHdoZW46ICdFQUdFUicgfSxcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHdoZW4/OiBQb2xpY3lXaGVuO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHRoZSB1bndyYXBwaW5nIGJlaGF2aW9yIG9mIGFzeW5jaHJvbm91cyByZXNvbHZlIHZhbHVlcy5cbiAgICpcbiAgICogLSBgV0FJVGAgKGRlZmF1bHQpXG4gICAqICAgLSBJZiBhIHByb21pc2UgaXMgcmV0dXJuZWQgZnJvbSB0aGUgcmVzb2x2ZUZuLCB3YWl0IGZvciB0aGUgcHJvbWlzZSBiZWZvcmUgcHJvY2VlZGluZ1xuICAgKiAgIC0gVGhlIHVud3JhcHBlZCB2YWx1ZSBmcm9tIHRoZSBwcm9taXNlXG4gICAqIC0gYE5PV0FJVGBcbiAgICogICAtIElmIGEgcHJvbWlzZSBpcyByZXR1cm5lZCBmcm9tIHRoZSByZXNvbHZlLCBkbyBub3Qgd2FpdCBmb3IgdGhlIHByb21pc2UuXG4gICAqICAgLSBBbnkgb3RoZXIgdmFsdWUgcmV0dXJuZWQgaXMgd3JhcHBlZCBpbiBhIHByb21pc2UuXG4gICAqICAgLSBUaGUgcHJvbWlzZSB3aWxsIG5vdCBiZSB1bndyYXBwZWQuXG4gICAqICAgLSBUaGUgcHJvbWlzZSBpdHNlbGYgd2lsbCBiZSBwcm92aWRlZCB3aGVuIHRoZSByZXNvbHZlIGlzIGluamVjdGVkIG9yIGJvdW5kIGVsc2V3aGVyZS5cbiAgICogLSB7QGxpbmsgQ3VzdG9tQXN5bmNQb2xpY3l9XG4gICAqICAgLSBZb3UgY2FuIGRlZmluZSBhIGN1c3RvbSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIHJlc29sdmVGbiB2YWx1ZS5cbiAgICogICAtIFRoaXMgZnVuY3Rpb24gbXVzdCByZXR1cm4gYSBwcm9taXNlLlxuICAgKiAgIC0gVGhlIHRyYW5zaXRpb24gd2lsbCB3YWl0IGZvciB0aGlzIHByb21pc2UgYmVmb3JlIHByb2NlZWRpbmdcbiAgICpcbiAgICogICBOT1RFOiBUaGUgcHJldmlvdXMgYFJYV0FJVGAgcG9saWN5IGhhcyBiZWNvbWUgYSBDdXN0b21Bc3luY1BvbGljeSBmdW5jdGlvbiBleHBvcnRlZCBpbiBgQHVpcm91dGVyL3J4YCBwYWNrYWdlLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIFRoZSBgVHJhbnNpdGlvbmAgd2lsbCBub3Qgd2FpdCBmb3IgdGhlIHJlc29sdmUgcHJvbWlzZShzKSBmcm9tIGBtYWluYCB0byBzZXR0bGUgYmVmb3JlIGNvbnRpbnVpbmcuXG4gICAqIFJlc29sdmVzIGZvciBgbWFpbmAgd2lsbCBiZSBwcm92aWRlZCB0byBjb21wb25lbnRzIHdyYXBwZWQgaW4gYSBgUHJvbWlzZWAuXG4gICAqXG4gICAqIFRoZSBgVHJhbnNpdGlvbmAgd2lsbCB3YWl0IGZvciB0aGUgYG1haW4uaG9tZWAgcmVzb2x2ZSBwcm9taXNlcy5cbiAgICogUmVzb2x2ZWQgdmFsdWVzIHdpbGwgYmUgdW53cmFwcGVkIGJlZm9yZSBiZWluZyBwcm92aWRlZCB0byBjb21wb25lbnRzLlxuICAgKiBgYGBqc1xuICAgKiB2YXIgbWFpblN0YXRlID0ge1xuICAgKiAgIG5hbWU6ICdtYWluJyxcbiAgICogICByZXNvbHZlOiBtYWluUmVzb2x2ZXMsIC8vIGRlZmluZWQgZWxzZXdoZXJlXG4gICAqICAgcmVzb2x2ZVBvbGljeTogeyBhc3luYzogJ05PV0FJVCcgfSxcbiAgICogfVxuICAgKiB2YXIgaG9tZVN0YXRlID0ge1xuICAgKiAgIG5hbWU6ICdtYWluLmhvbWUnLFxuICAgKiAgIHJlc29sdmU6IGhvbWVSZXNvbHZlcywgLy8gZGVmaW5lZCBlbHNld2hlcmVcbiAgICogICByZXNvbHZlUG9saWN5OiB7IGFzeW5jOiAnV0FJVCcgfSwgLy8gZGVmYXVsdFxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgYXN5bmM/OiBQb2xpY3lBc3luYztcbn1cblxuZXhwb3J0IHR5cGUgUG9saWN5V2hlbiA9ICdMQVpZJyB8ICdFQUdFUic7XG5leHBvcnQgdHlwZSBQb2xpY3lBc3luYyA9ICdXQUlUJyB8ICdOT1dBSVQnIHwgQ3VzdG9tQXN5bmNQb2xpY3k7XG5leHBvcnQgaW50ZXJmYWNlIEN1c3RvbUFzeW5jUG9saWN5IHtcbiAgKGRhdGE6IGFueSk6IFByb21pc2U8YW55Pjtcbn1cblxuLyoqIEBpbnRlcm5hbGFwaSAqL1xuZXhwb3J0IGxldCByZXNvbHZlUG9saWNpZXMgPSB7XG4gIHdoZW46IHtcbiAgICBMQVpZOiAnTEFaWScsXG4gICAgRUFHRVI6ICdFQUdFUicsXG4gIH0sXG4gIGFzeW5jOiB7XG4gICAgV0FJVDogJ1dBSVQnLFxuICAgIE5PV0FJVDogJ05PV0FJVCcsXG4gIH0sXG59O1xuIiwiLyoqIEBwdWJsaWNhcGkgQG1vZHVsZSByZXNvbHZlICovIC8qKiAqL1xuaW1wb3J0IHsgZXh0ZW5kLCBpZGVudGl0eSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgc2VydmljZXMgfSBmcm9tICcuLi9jb21tb24vY29yZXNlcnZpY2VzJztcbmltcG9ydCB7IHRyYWNlIH0gZnJvbSAnLi4vY29tbW9uL3RyYWNlJztcbmltcG9ydCB7IFJlc29sdmVQb2xpY3ksIFJlc29sdmFibGVMaXRlcmFsLCBQb2xpY3lBc3luYyB9IGZyb20gJy4vaW50ZXJmYWNlJztcblxuaW1wb3J0IHsgUmVzb2x2ZUNvbnRleHQgfSBmcm9tICcuL3Jlc29sdmVDb250ZXh0JztcbmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gJy4uL2NvbW1vbi9zdHJpbmdzJztcbmltcG9ydCB7IGlzRnVuY3Rpb24sIGlzT2JqZWN0IH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4uL3N0YXRlL3N0YXRlT2JqZWN0JztcbmltcG9ydCB7IFBhdGhOb2RlIH0gZnJvbSAnLi4vcGF0aC9wYXRoTm9kZSc7XG5pbXBvcnQgeyBpc051bGxPclVuZGVmaW5lZCB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcblxuLy8gVE9ETzogZXhwbGljaXRseSBtYWtlIHRoaXMgdXNlciBjb25maWd1cmFibGVcbmV4cG9ydCBsZXQgZGVmYXVsdFJlc29sdmVQb2xpY3k6IFJlc29sdmVQb2xpY3kgPSB7XG4gIHdoZW46ICdMQVpZJyxcbiAgYXN5bmM6ICdXQUlUJyxcbn07XG5cbi8qKlxuICogVGhlIGJhc2ljIGJ1aWxkaW5nIGJsb2NrIGZvciB0aGUgcmVzb2x2ZSBzeXN0ZW0uXG4gKlxuICogUmVzb2x2YWJsZXMgZW5jYXBzdWxhdGUgYSBzdGF0ZSdzIHJlc29sdmUncyByZXNvbHZlRm4sIHRoZSByZXNvbHZlRm4ncyBkZWNsYXJlZCBkZXBlbmRlbmNpZXMsIHRoZSB3cmFwcGVkICgucHJvbWlzZSksXG4gKiBhbmQgdGhlIHVud3JhcHBlZC13aGVuLWNvbXBsZXRlICguZGF0YSkgcmVzdWx0IG9mIHRoZSByZXNvbHZlRm4uXG4gKlxuICogUmVzb2x2YWJsZS5nZXQoKSBlaXRoZXIgcmV0cmlldmVzIHRoZSBSZXNvbHZhYmxlJ3MgZXhpc3RpbmcgcHJvbWlzZSwgb3IgZWxzZSBpbnZva2VzIHJlc29sdmUoKSAod2hpY2ggaW52b2tlcyB0aGVcbiAqIHJlc29sdmVGbikgYW5kIHJldHVybnMgdGhlIHJlc3VsdGluZyBwcm9taXNlLlxuICpcbiAqIFJlc29sdmFibGUuZ2V0KCkgYW5kIFJlc29sdmFibGUucmVzb2x2ZSgpIGJvdGggZXhlY3V0ZSB3aXRoaW4gYSBjb250ZXh0IHBhdGgsIHdoaWNoIGlzIHBhc3NlZCBhcyB0aGUgZmlyc3RcbiAqIHBhcmFtZXRlciB0byB0aG9zZSBmbnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXNvbHZhYmxlIGltcGxlbWVudHMgUmVzb2x2YWJsZUxpdGVyYWwge1xuICB0b2tlbjogYW55O1xuICBwb2xpY3k6IFJlc29sdmVQb2xpY3k7XG4gIHJlc29sdmVGbjogRnVuY3Rpb247XG4gIGRlcHM6IGFueVtdO1xuXG4gIGRhdGE6IGFueTtcbiAgcmVzb2x2ZWQgPSBmYWxzZTtcbiAgcHJvbWlzZTogUHJvbWlzZTxhbnk+ID0gdW5kZWZpbmVkO1xuXG4gIHN0YXRpYyBmcm9tRGF0YSA9ICh0b2tlbjogYW55LCBkYXRhOiBhbnkpID0+IG5ldyBSZXNvbHZhYmxlKHRva2VuLCAoKSA9PiBkYXRhLCBudWxsLCBudWxsLCBkYXRhKTtcblxuICAvKiogVGhpcyBjb25zdHJ1Y3RvciBjcmVhdGVzIGEgUmVzb2x2YWJsZSBjb3B5ICovXG4gIGNvbnN0cnVjdG9yKHJlc29sdmFibGU6IFJlc29sdmFibGUpO1xuXG4gIC8qKiBUaGlzIGNvbnN0cnVjdG9yIGNyZWF0ZXMgYSBuZXcgUmVzb2x2YWJsZSBmcm9tIHRoZSBwbGFpbiBvbGQgW1tSZXNvbHZhYmxlTGl0ZXJhbF1dIGphdmFzY3JpcHQgb2JqZWN0ICovXG4gIGNvbnN0cnVjdG9yKHJlc29sdmFibGU6IFJlc29sdmFibGVMaXRlcmFsKTtcblxuICAvKipcbiAgICogVGhpcyBjb25zdHJ1Y3RvciBjcmVhdGVzIGEgbmV3IGBSZXNvbHZhYmxlYFxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIHZhciByZXNvbHZhYmxlMSA9IG5ldyBSZXNvbHZhYmxlKCdteXRva2VuJywgaHR0cCA9PiBodHRwLmdldCgnZm9vLmpzb24nKS50b1Byb21pc2UoKSwgW0h0dHBdKTtcbiAgICpcbiAgICogdmFyIHJlc29sdmFibGUyID0gbmV3IFJlc29sdmFibGUoVXNlclNlcnZpY2UsIGRlcCA9PiBuZXcgVXNlclNlcnZpY2UoZGVwLmRhdGEpLCBbU29tZURlcGVuZGVuY3ldKTtcbiAgICpcbiAgICogdmFyIHJlc29sdmFibGUxQ2xvbmUgPSBuZXcgUmVzb2x2YWJsZShyZXNvbHZhYmxlMSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gdG9rZW4gVGhlIG5ldyByZXNvbHZhYmxlJ3MgaW5qZWN0aW9uIHRva2VuLCBzdWNoIGFzIGBcInVzZXJMaXN0XCJgIChhIHN0cmluZykgb3IgYFVzZXJTZXJ2aWNlYCAoYSBjbGFzcykuXG4gICAqICAgICAgICAgICAgICBXaGVuIHRoaXMgdG9rZW4gaXMgdXNlZCBkdXJpbmcgaW5qZWN0aW9uLCB0aGUgcmVzb2x2ZWQgdmFsdWUgd2lsbCBiZSBpbmplY3RlZC5cbiAgICogQHBhcmFtIHJlc29sdmVGbiBUaGUgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZSwgb3IgYSBwcm9taXNlIGZvciB0aGUgcmVzb2x2ZWQgdmFsdWVcbiAgICogQHBhcmFtIGRlcHMgQW4gYXJyYXkgb2YgZGVwZW5kZW5jaWVzLCB3aGljaCB3aWxsIGJlIGluamVjdGVkIGludG8gdGhlIGByZXNvbHZlRm5gXG4gICAqIEBwYXJhbSBwb2xpY3kgdGhlIFtbUmVzb2x2ZVBvbGljeV1dIGRlZmluZXMgd2hlbiBhbmQgaG93IHRoZSBSZXNvbHZhYmxlIGlzIHByb2Nlc3NlZFxuICAgKiBAcGFyYW0gZGF0YSBQcmUtcmVzb2x2ZWQgZGF0YS4gSWYgdGhlIHJlc29sdmUgdmFsdWUgaXMgYWxyZWFkeSBrbm93biwgaXQgbWF5IGJlIHByb3ZpZGVkIGhlcmUuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0b2tlbjogYW55LCByZXNvbHZlRm46IEZ1bmN0aW9uLCBkZXBzPzogYW55W10sIHBvbGljeT86IFJlc29sdmVQb2xpY3ksIGRhdGE/OiBhbnkpO1xuICBjb25zdHJ1Y3RvcihhcmcxOiBhbnksIHJlc29sdmVGbj86IEZ1bmN0aW9uLCBkZXBzPzogYW55W10sIHBvbGljeT86IFJlc29sdmVQb2xpY3ksIGRhdGE/OiBhbnkpIHtcbiAgICBpZiAoYXJnMSBpbnN0YW5jZW9mIFJlc29sdmFibGUpIHtcbiAgICAgIGV4dGVuZCh0aGlzLCBhcmcxKTtcbiAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24ocmVzb2x2ZUZuKSkge1xuICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKGFyZzEpKSB0aHJvdyBuZXcgRXJyb3IoJ25ldyBSZXNvbHZhYmxlKCk6IHRva2VuIGFyZ3VtZW50IGlzIHJlcXVpcmVkJyk7XG4gICAgICBpZiAoIWlzRnVuY3Rpb24ocmVzb2x2ZUZuKSkgdGhyb3cgbmV3IEVycm9yKCduZXcgUmVzb2x2YWJsZSgpOiByZXNvbHZlRm4gYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgICAgIHRoaXMudG9rZW4gPSBhcmcxO1xuICAgICAgdGhpcy5wb2xpY3kgPSBwb2xpY3k7XG4gICAgICB0aGlzLnJlc29sdmVGbiA9IHJlc29sdmVGbjtcbiAgICAgIHRoaXMuZGVwcyA9IGRlcHMgfHwgW107XG5cbiAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICB0aGlzLnJlc29sdmVkID0gZGF0YSAhPT0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5yZXNvbHZlZCA/IHNlcnZpY2VzLiRxLndoZW4odGhpcy5kYXRhKSA6IHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KGFyZzEpICYmIGFyZzEudG9rZW4gJiYgKGFyZzEuaGFzT3duUHJvcGVydHkoJ3Jlc29sdmVGbicpIHx8IGFyZzEuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSkpIHtcbiAgICAgIGNvbnN0IGxpdGVyYWwgPSA8UmVzb2x2YWJsZUxpdGVyYWw+YXJnMTtcbiAgICAgIHJldHVybiBuZXcgUmVzb2x2YWJsZShsaXRlcmFsLnRva2VuLCBsaXRlcmFsLnJlc29sdmVGbiwgbGl0ZXJhbC5kZXBzLCBsaXRlcmFsLnBvbGljeSwgbGl0ZXJhbC5kYXRhKTtcbiAgICB9XG4gIH1cblxuICBnZXRQb2xpY3koc3RhdGU6IFN0YXRlT2JqZWN0KTogUmVzb2x2ZVBvbGljeSB7XG4gICAgY29uc3QgdGhpc1BvbGljeSA9IHRoaXMucG9saWN5IHx8IHt9O1xuICAgIGNvbnN0IHN0YXRlUG9saWN5ID0gKHN0YXRlICYmIHN0YXRlLnJlc29sdmVQb2xpY3kpIHx8IHt9O1xuICAgIHJldHVybiB7XG4gICAgICB3aGVuOiB0aGlzUG9saWN5LndoZW4gfHwgc3RhdGVQb2xpY3kud2hlbiB8fCBkZWZhdWx0UmVzb2x2ZVBvbGljeS53aGVuLFxuICAgICAgYXN5bmM6IHRoaXNQb2xpY3kuYXN5bmMgfHwgc3RhdGVQb2xpY3kuYXN5bmMgfHwgZGVmYXVsdFJlc29sdmVQb2xpY3kuYXN5bmMsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBc3luY2hyb25vdXNseSByZXNvbHZlIHRoaXMgUmVzb2x2YWJsZSdzIGRhdGFcbiAgICpcbiAgICogR2l2ZW4gYSBSZXNvbHZlQ29udGV4dCB0aGF0IHRoaXMgUmVzb2x2YWJsZSBpcyBmb3VuZCBpbjpcbiAgICogV2FpdCBmb3IgdGhpcyBSZXNvbHZhYmxlJ3MgZGVwZW5kZW5jaWVzLCB0aGVuIGludm9rZSB0aGlzIFJlc29sdmFibGUncyBmdW5jdGlvblxuICAgKiBhbmQgdXBkYXRlIHRoZSBSZXNvbHZhYmxlJ3Mgc3RhdGVcbiAgICovXG4gIHJlc29sdmUocmVzb2x2ZUNvbnRleHQ6IFJlc29sdmVDb250ZXh0LCB0cmFucz86IFRyYW5zaXRpb24pIHtcbiAgICBjb25zdCAkcSA9IHNlcnZpY2VzLiRxO1xuXG4gICAgLy8gR2V0cyBhbGwgZGVwZW5kZW5jaWVzIGZyb20gUmVzb2x2ZUNvbnRleHQgYW5kIHdhaXQgZm9yIHRoZW0gdG8gYmUgcmVzb2x2ZWRcbiAgICBjb25zdCBnZXRSZXNvbHZhYmxlRGVwZW5kZW5jaWVzID0gKCkgPT5cbiAgICAgICRxLmFsbChyZXNvbHZlQ29udGV4dC5nZXREZXBlbmRlbmNpZXModGhpcykubWFwKHJlc29sdmFibGUgPT4gcmVzb2x2YWJsZS5nZXQocmVzb2x2ZUNvbnRleHQsIHRyYW5zKSkpIGFzIFByb21pc2U8XG4gICAgICAgIGFueVtdXG4gICAgICA+O1xuXG4gICAgLy8gSW52b2tlcyB0aGUgcmVzb2x2ZSBmdW5jdGlvbiBwYXNzaW5nIHRoZSByZXNvbHZlZCBkZXBlbmRlbmNpZXMgYXMgYXJndW1lbnRzXG4gICAgY29uc3QgaW52b2tlUmVzb2x2ZUZuID0gKHJlc29sdmVkRGVwczogYW55W10pID0+IHRoaXMucmVzb2x2ZUZuLmFwcGx5KG51bGwsIHJlc29sdmVkRGVwcyk7XG4gICAgY29uc3Qgbm9kZTogUGF0aE5vZGUgPSByZXNvbHZlQ29udGV4dC5maW5kTm9kZSh0aGlzKTtcbiAgICBjb25zdCBzdGF0ZTogU3RhdGVPYmplY3QgPSBub2RlICYmIG5vZGUuc3RhdGU7XG5cbiAgICBjb25zdCBhc3luY1BvbGljeTogUG9saWN5QXN5bmMgPSB0aGlzLmdldFBvbGljeShzdGF0ZSkuYXN5bmM7XG4gICAgY29uc3QgY3VzdG9tQXN5bmNQb2xpY3kgPSBpc0Z1bmN0aW9uKGFzeW5jUG9saWN5KSA/IGFzeW5jUG9saWN5IDogaWRlbnRpdHk7XG5cbiAgICAvLyBBZnRlciB0aGUgZmluYWwgdmFsdWUgaGFzIGJlZW4gcmVzb2x2ZWQsIHVwZGF0ZSB0aGUgc3RhdGUgb2YgdGhlIFJlc29sdmFibGVcbiAgICBjb25zdCBhcHBseVJlc29sdmVkVmFsdWUgPSAocmVzb2x2ZWRWYWx1ZTogYW55KSA9PiB7XG4gICAgICB0aGlzLmRhdGEgPSByZXNvbHZlZFZhbHVlO1xuICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWU7XG4gICAgICB0aGlzLnJlc29sdmVGbiA9IG51bGw7XG4gICAgICB0cmFjZS50cmFjZVJlc29sdmFibGVSZXNvbHZlZCh0aGlzLCB0cmFucyk7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhO1xuICAgIH07XG5cbiAgICAvLyBTZXRzIHRoZSBwcm9taXNlIHByb3BlcnR5IGZpcnN0LCB0aGVuIGdldHNSZXNvbHZhYmxlRGVwZW5kZW5jaWVzIGluIHRoZSBjb250ZXh0IG9mIHRoZSBwcm9taXNlIGNoYWluLiBBbHdheXMgd2FpdHMgb25lIHRpY2suXG4gICAgcmV0dXJuICh0aGlzLnByb21pc2UgPSAkcVxuICAgICAgLndoZW4oKVxuICAgICAgLnRoZW4oZ2V0UmVzb2x2YWJsZURlcGVuZGVuY2llcylcbiAgICAgIC50aGVuKGludm9rZVJlc29sdmVGbilcbiAgICAgIC50aGVuKGN1c3RvbUFzeW5jUG9saWN5KVxuICAgICAgLnRoZW4oYXBwbHlSZXNvbHZlZFZhbHVlKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhIHByb21pc2UgZm9yIHRoaXMgUmVzb2x2YWJsZSdzIGRhdGEuXG4gICAqXG4gICAqIEZldGNoZXMgdGhlIGRhdGEgYW5kIHJldHVybnMgYSBwcm9taXNlLlxuICAgKiBSZXR1cm5zIHRoZSBleGlzdGluZyBwcm9taXNlIGlmIGl0IGhhcyBhbHJlYWR5IGJlZW4gZmV0Y2hlZCBvbmNlLlxuICAgKi9cbiAgZ2V0KHJlc29sdmVDb250ZXh0OiBSZXNvbHZlQ29udGV4dCwgdHJhbnM/OiBUcmFuc2l0aW9uKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5wcm9taXNlIHx8IHRoaXMucmVzb2x2ZShyZXNvbHZlQ29udGV4dCwgdHJhbnMpO1xuICB9XG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIGBSZXNvbHZhYmxlKHRva2VuOiAke3N0cmluZ2lmeSh0aGlzLnRva2VuKX0sIHJlcXVpcmVzOiBbJHt0aGlzLmRlcHMubWFwKHN0cmluZ2lmeSl9XSlgO1xuICB9XG5cbiAgY2xvbmUoKTogUmVzb2x2YWJsZSB7XG4gICAgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKHRoaXMpO1xuICB9XG59XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIHJlc29sdmUgKi8gLyoqICovXG5pbXBvcnQgeyBmaW5kLCB0YWlsLCB1bmlxUiwgdW5uZXN0UiwgaW5BcnJheSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgcHJvcEVxLCBub3QgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IHRyYWNlIH0gZnJvbSAnLi4vY29tbW9uL3RyYWNlJztcbmltcG9ydCB7IHNlcnZpY2VzLCAkSW5qZWN0b3JMaWtlIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyByZXNvbHZlUG9saWNpZXMsIFBvbGljeVdoZW4sIFJlc29sdmVQb2xpY3kgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBQYXRoTm9kZSB9IGZyb20gJy4uL3BhdGgvcGF0aE5vZGUnO1xuaW1wb3J0IHsgUmVzb2x2YWJsZSB9IGZyb20gJy4vcmVzb2x2YWJsZSc7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4uL3N0YXRlL3N0YXRlT2JqZWN0JztcbmltcG9ydCB7IFBhdGhVdGlscyB9IGZyb20gJy4uL3BhdGgvcGF0aFV0aWxzJztcbmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gJy4uL2NvbW1vbi9zdHJpbmdzJztcbmltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb24nO1xuaW1wb3J0IHsgVUlJbmplY3RvciB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBpc1VuZGVmaW5lZCB9IGZyb20gJy4uL2NvbW1vbic7XG5cbmNvbnN0IHdoZW5zID0gcmVzb2x2ZVBvbGljaWVzLndoZW47XG5jb25zdCBBTExfV0hFTlMgPSBbd2hlbnMuRUFHRVIsIHdoZW5zLkxBWlldO1xuY29uc3QgRUFHRVJfV0hFTlMgPSBbd2hlbnMuRUFHRVJdO1xuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8taW5mZXJyYWJsZS10eXBlc1xuZXhwb3J0IGNvbnN0IE5BVElWRV9JTkpFQ1RPUl9UT0tFTjogc3RyaW5nID0gJ05hdGl2ZSBJbmplY3Rvcic7XG5cbi8qKlxuICogRW5jYXBzdWxhdGVzIERlcGVuZGVuY3kgSW5qZWN0aW9uIGZvciBhIHBhdGggb2Ygbm9kZXNcbiAqXG4gKiBVSS1Sb3V0ZXIgc3RhdGVzIGFyZSBvcmdhbml6ZWQgYXMgYSB0cmVlLlxuICogQSBuZXN0ZWQgc3RhdGUgaGFzIGEgcGF0aCBvZiBhbmNlc3RvcnMgdG8gdGhlIHJvb3Qgb2YgdGhlIHRyZWUuXG4gKiBXaGVuIGEgc3RhdGUgaXMgYmVpbmcgYWN0aXZhdGVkLCBlYWNoIGVsZW1lbnQgaW4gdGhlIHBhdGggaXMgd3JhcHBlZCBhcyBhIFtbUGF0aE5vZGVdXS5cbiAqIEEgYFBhdGhOb2RlYCBpcyBhIHN0YXRlZnVsIG9iamVjdCB0aGF0IGhvbGRzIHRoaW5ncyBsaWtlIHBhcmFtZXRlcnMgYW5kIHJlc29sdmFibGVzIGZvciB0aGUgc3RhdGUgYmVpbmcgYWN0aXZhdGVkLlxuICpcbiAqIFRoZSBSZXNvbHZlQ29udGV4dCBjbG9zZXMgb3ZlciB0aGUgW1tQYXRoTm9kZV1dcywgYW5kIHByb3ZpZGVzIERJIGZvciB0aGUgbGFzdCBub2RlIGluIHRoZSBwYXRoLlxuICovXG5leHBvcnQgY2xhc3MgUmVzb2x2ZUNvbnRleHQge1xuICBfaW5qZWN0b3I6IFVJSW5qZWN0b3I7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfcGF0aDogUGF0aE5vZGVbXSkge31cblxuICAvKiogR2V0cyBhbGwgdGhlIHRva2VucyBmb3VuZCBpbiB0aGUgcmVzb2x2ZSBjb250ZXh0LCBkZS1kdXBsaWNhdGVkICovXG4gIGdldFRva2VucygpOiBhbnlbXSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhdGgucmVkdWNlKChhY2MsIG5vZGUpID0+IGFjYy5jb25jYXQobm9kZS5yZXNvbHZhYmxlcy5tYXAociA9PiByLnRva2VuKSksIFtdKS5yZWR1Y2UodW5pcVIsIFtdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBSZXNvbHZhYmxlIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW5cbiAgICpcbiAgICogR2V0cyB0aGUgbGFzdCBSZXNvbHZhYmxlIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW4gaW4gdGhpcyBjb250ZXh0LCBvciB1bmRlZmluZWQuXG4gICAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBkb2Vzbid0IGV4aXN0IGluIHRoZSBSZXNvbHZlQ29udGV4dFxuICAgKi9cbiAgZ2V0UmVzb2x2YWJsZSh0b2tlbjogYW55KTogUmVzb2x2YWJsZSB7XG4gICAgY29uc3QgbWF0Y2hpbmcgPSB0aGlzLl9wYXRoXG4gICAgICAubWFwKG5vZGUgPT4gbm9kZS5yZXNvbHZhYmxlcylcbiAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAuZmlsdGVyKChyOiBSZXNvbHZhYmxlKSA9PiByLnRva2VuID09PSB0b2tlbik7XG4gICAgcmV0dXJuIHRhaWwobWF0Y2hpbmcpO1xuICB9XG5cbiAgLyoqIFJldHVybnMgdGhlIFtbUmVzb2x2ZVBvbGljeV1dIGZvciB0aGUgZ2l2ZW4gW1tSZXNvbHZhYmxlXV0gKi9cbiAgZ2V0UG9saWN5KHJlc29sdmFibGU6IFJlc29sdmFibGUpOiBSZXNvbHZlUG9saWN5IHtcbiAgICBjb25zdCBub2RlID0gdGhpcy5maW5kTm9kZShyZXNvbHZhYmxlKTtcbiAgICByZXR1cm4gcmVzb2x2YWJsZS5nZXRQb2xpY3kobm9kZS5zdGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIFJlc29sdmVDb250ZXh0IHRoYXQgaW5jbHVkZXMgYSBwb3J0aW9uIG9mIHRoaXMgb25lXG4gICAqXG4gICAqIEdpdmVuIGEgc3RhdGUsIHRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBuZXcgUmVzb2x2ZUNvbnRleHQgZnJvbSB0aGlzIG9uZS5cbiAgICogVGhlIG5ldyBjb250ZXh0IHN0YXJ0cyBhdCB0aGUgZmlyc3Qgbm9kZSAocm9vdCkgYW5kIHN0b3BzIGF0IHRoZSBub2RlIGZvciB0aGUgYHN0YXRlYCBwYXJhbWV0ZXIuXG4gICAqXG4gICAqICMjIyMgV2h5XG4gICAqXG4gICAqIFdoZW4gYSB0cmFuc2l0aW9uIGlzIGNyZWF0ZWQsIHRoZSBub2RlcyBpbiB0aGUgXCJUbyBQYXRoXCIgYXJlIGluamVjdGVkIGZyb20gYSBSZXNvbHZlQ29udGV4dC5cbiAgICogQSBSZXNvbHZlQ29udGV4dCBjbG9zZXMgb3ZlciBhIHBhdGggb2YgW1tQYXRoTm9kZV1dcyBhbmQgcHJvY2Vzc2VzIHRoZSByZXNvbHZhYmxlcy5cbiAgICogVGhlIFwiVG8gU3RhdGVcIiBjYW4gaW5qZWN0IHZhbHVlcyBmcm9tIGl0cyBvd24gcmVzb2x2YWJsZXMsIGFzIHdlbGwgYXMgdGhvc2UgZnJvbSBhbGwgaXRzIGFuY2VzdG9yIHN0YXRlJ3MgKG5vZGUncykuXG4gICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIGEgbmFycm93ZXIgY29udGV4dCB3aGVuIGluamVjdGluZyBhbmNlc3RvciBub2Rlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGxldCBBQkNEID0gbmV3IFJlc29sdmVDb250ZXh0KFtBLCBCLCBDLCBEXSk7YFxuICAgKlxuICAgKiBHaXZlbiBhIHBhdGggYFtBLCBCLCBDLCBEXWAsIHdoZXJlIGBBYCwgYEJgLCBgQ2AgYW5kIGBEYCBhcmUgbm9kZXMgZm9yIHN0YXRlcyBgYWAsIGBiYCwgYGNgLCBgZGA6XG4gICAqIFdoZW4gaW5qZWN0aW5nIGBEYCwgYERgIHNob3VsZCBoYXZlIGFjY2VzcyB0byBhbGwgcmVzb2x2YWJsZXMgZnJvbSBgQWAsIGBCYCwgYENgLCBgRGAuXG4gICAqIEhvd2V2ZXIsIGBCYCBzaG91bGQgb25seSBiZSBhYmxlIHRvIGFjY2VzcyByZXNvbHZhYmxlcyBmcm9tIGBBYCwgYEJgLlxuICAgKlxuICAgKiBXaGVuIHJlc29sdmluZyBmb3IgdGhlIGBCYCBub2RlLCBmaXJzdCB0YWtlIHRoZSBmdWxsIFwiVG8gUGF0aFwiIENvbnRleHQgYFtBLEIsQyxEXWAgYW5kIGxpbWl0IHRvIHRoZSBzdWJwYXRoIGBbQSxCXWAuXG4gICAqIGBsZXQgQUIgPSBBQkNELnN1YmNvbnRleHQoYSlgXG4gICAqL1xuICBzdWJDb250ZXh0KHN0YXRlOiBTdGF0ZU9iamVjdCk6IFJlc29sdmVDb250ZXh0IHtcbiAgICByZXR1cm4gbmV3IFJlc29sdmVDb250ZXh0KFBhdGhVdGlscy5zdWJQYXRoKHRoaXMuX3BhdGgsIG5vZGUgPT4gbm9kZS5zdGF0ZSA9PT0gc3RhdGUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIFJlc29sdmFibGVzIHRvIHRoZSBub2RlIHRoYXQgbWF0Y2hlcyB0aGUgc3RhdGVcbiAgICpcbiAgICogVGhpcyBhZGRzIGEgW1tSZXNvbHZhYmxlXV0gKGdlbmVyYWxseSBvbmUgY3JlYXRlZCBvbiB0aGUgZmx5OyBub3QgZGVjbGFyZWQgb24gYSBbW1N0YXRlRGVjbGFyYXRpb24ucmVzb2x2ZV1dIGJsb2NrKS5cbiAgICogVGhlIHJlc29sdmFibGUgaXMgYWRkZWQgdG8gdGhlIG5vZGUgbWF0Y2hpbmcgdGhlIGBzdGF0ZWAgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBUaGVzZSBuZXcgcmVzb2x2YWJsZXMgYXJlIG5vdCBhdXRvbWF0aWNhbGx5IGZldGNoZWQuXG4gICAqIFRoZSBjYWxsaW5nIGNvZGUgc2hvdWxkIGVpdGhlciBmZXRjaCB0aGVtLCBmZXRjaCBzb21ldGhpbmcgdGhhdCBkZXBlbmRzIG9uIHRoZW0sXG4gICAqIG9yIHJlbHkgb24gW1tyZXNvbHZlUGF0aF1dIGJlaW5nIGNhbGxlZCB3aGVuIHNvbWUgc3RhdGUgaXMgYmVpbmcgZW50ZXJlZC5cbiAgICpcbiAgICogTm90ZTogZWFjaCByZXNvbHZhYmxlJ3MgW1tSZXNvbHZlUG9saWN5XV0gaXMgbWVyZ2VkIHdpdGggdGhlIHN0YXRlJ3MgcG9saWN5LCBhbmQgdGhlIGdsb2JhbCBkZWZhdWx0LlxuICAgKlxuICAgKiBAcGFyYW0gbmV3UmVzb2x2YWJsZXMgdGhlIG5ldyBSZXNvbHZhYmxlc1xuICAgKiBAcGFyYW0gc3RhdGUgVXNlZCB0byBmaW5kIHRoZSBub2RlIHRvIHB1dCB0aGUgcmVzb2x2YWJsZSBvblxuICAgKi9cbiAgYWRkUmVzb2x2YWJsZXMobmV3UmVzb2x2YWJsZXM6IFJlc29sdmFibGVbXSwgc3RhdGU6IFN0YXRlT2JqZWN0KSB7XG4gICAgY29uc3Qgbm9kZSA9IDxQYXRoTm9kZT5maW5kKHRoaXMuX3BhdGgsIHByb3BFcSgnc3RhdGUnLCBzdGF0ZSkpO1xuICAgIGNvbnN0IGtleXMgPSBuZXdSZXNvbHZhYmxlcy5tYXAociA9PiByLnRva2VuKTtcbiAgICBub2RlLnJlc29sdmFibGVzID0gbm9kZS5yZXNvbHZhYmxlcy5maWx0ZXIociA9PiBrZXlzLmluZGV4T2Yoci50b2tlbikgPT09IC0xKS5jb25jYXQobmV3UmVzb2x2YWJsZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGZvciBhbiBhcnJheSBvZiByZXNvbHZlZCBwYXRoIEVsZW1lbnQgcHJvbWlzZXNcbiAgICpcbiAgICogQHBhcmFtIHdoZW5cbiAgICogQHBhcmFtIHRyYW5zXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT58YW55fVxuICAgKi9cbiAgcmVzb2x2ZVBhdGgod2hlbjogUG9saWN5V2hlbiA9ICdMQVpZJywgdHJhbnM/OiBUcmFuc2l0aW9uKTogUHJvbWlzZTx7IHRva2VuOiBhbnk7IHZhbHVlOiBhbnkgfVtdPiB7XG4gICAgLy8gVGhpcyBvcHRpb24gZGV0ZXJtaW5lcyB3aGljaCAnd2hlbicgcG9saWN5IFJlc29sdmFibGVzIHdlIGFyZSBhYm91dCB0byBmZXRjaC5cbiAgICBjb25zdCB3aGVuT3B0aW9uOiBzdHJpbmcgPSBpbkFycmF5KEFMTF9XSEVOUywgd2hlbikgPyB3aGVuIDogJ0xBWlknO1xuICAgIC8vIElmIHRoZSBjYWxsZXIgc3BlY2lmaWVkIEVBR0VSLCBvbmx5IHRoZSBFQUdFUiBSZXNvbHZhYmxlcyBhcmUgZmV0Y2hlZC5cbiAgICAvLyBpZiB0aGUgY2FsbGVyIHNwZWNpZmllZCBMQVpZLCBib3RoIEVBR0VSIGFuZCBMQVpZIFJlc29sdmFibGVzIGFyZSBmZXRjaGVkLmBcbiAgICBjb25zdCBtYXRjaGVkV2hlbnMgPSB3aGVuT3B0aW9uID09PSByZXNvbHZlUG9saWNpZXMud2hlbi5FQUdFUiA/IEVBR0VSX1dIRU5TIDogQUxMX1dIRU5TO1xuXG4gICAgLy8gZ2V0IHRoZSBzdWJwYXRoIHRvIHRoZSBzdGF0ZSBhcmd1bWVudCwgaWYgcHJvdmlkZWRcbiAgICB0cmFjZS50cmFjZVJlc29sdmVQYXRoKHRoaXMuX3BhdGgsIHdoZW4sIHRyYW5zKTtcblxuICAgIGNvbnN0IG1hdGNoZXNQb2xpY3kgPSAoYWNjZXB0ZWRWYWxzOiBzdHJpbmdbXSwgd2hlbk9yQXN5bmM6ICd3aGVuJyB8ICdhc3luYycpID0+IChyZXNvbHZhYmxlOiBSZXNvbHZhYmxlKSA9PlxuICAgICAgaW5BcnJheShhY2NlcHRlZFZhbHMsIHRoaXMuZ2V0UG9saWN5KHJlc29sdmFibGUpW3doZW5PckFzeW5jXSk7XG5cbiAgICAvLyBUcmlnZ2VyIGFsbCB0aGUgKG1hdGNoaW5nKSBSZXNvbHZhYmxlcyBpbiB0aGUgcGF0aFxuICAgIC8vIFJlZHVjZSBhbGwgdGhlIFwiV0FJVFwiIFJlc29sdmFibGVzIGludG8gYW4gYXJyYXlcbiAgICBjb25zdCBwcm9taXNlczogUHJvbWlzZTxhbnk+W10gPSB0aGlzLl9wYXRoLnJlZHVjZSgoYWNjLCBub2RlKSA9PiB7XG4gICAgICBjb25zdCBub2RlUmVzb2x2YWJsZXMgPSBub2RlLnJlc29sdmFibGVzLmZpbHRlcihtYXRjaGVzUG9saWN5KG1hdGNoZWRXaGVucywgJ3doZW4nKSk7XG4gICAgICBjb25zdCBub3dhaXQgPSBub2RlUmVzb2x2YWJsZXMuZmlsdGVyKG1hdGNoZXNQb2xpY3koWydOT1dBSVQnXSwgJ2FzeW5jJykpO1xuICAgICAgY29uc3Qgd2FpdCA9IG5vZGVSZXNvbHZhYmxlcy5maWx0ZXIobm90KG1hdGNoZXNQb2xpY3koWydOT1dBSVQnXSwgJ2FzeW5jJykpKTtcblxuICAgICAgLy8gRm9yIHRoZSBtYXRjaGluZyBSZXNvbHZhYmxlcywgc3RhcnQgdGhlaXIgYXN5bmMgZmV0Y2ggcHJvY2Vzcy5cbiAgICAgIGNvbnN0IHN1YkNvbnRleHQgPSB0aGlzLnN1YkNvbnRleHQobm9kZS5zdGF0ZSk7XG4gICAgICBjb25zdCBnZXRSZXN1bHQgPSAocjogUmVzb2x2YWJsZSkgPT5cbiAgICAgICAgclxuICAgICAgICAgIC5nZXQoc3ViQ29udGV4dCwgdHJhbnMpXG4gICAgICAgICAgLy8gUmV0dXJuIGEgdHVwbGUgdGhhdCBpbmNsdWRlcyB0aGUgUmVzb2x2YWJsZSdzIHRva2VuXG4gICAgICAgICAgLnRoZW4odmFsdWUgPT4gKHsgdG9rZW46IHIudG9rZW4sIHZhbHVlOiB2YWx1ZSB9KSk7XG4gICAgICBub3dhaXQuZm9yRWFjaChnZXRSZXN1bHQpO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQod2FpdC5tYXAoZ2V0UmVzdWx0KSk7XG4gICAgfSwgW10pO1xuXG4gICAgLy8gV2FpdCBmb3IgYWxsIHRoZSBcIldBSVRcIiByZXNvbHZhYmxlc1xuICAgIHJldHVybiBzZXJ2aWNlcy4kcS5hbGwocHJvbWlzZXMpO1xuICB9XG5cbiAgaW5qZWN0b3IoKTogVUlJbmplY3RvciB7XG4gICAgcmV0dXJuIHRoaXMuX2luamVjdG9yIHx8ICh0aGlzLl9pbmplY3RvciA9IG5ldyBVSUluamVjdG9ySW1wbCh0aGlzKSk7XG4gIH1cblxuICBmaW5kTm9kZShyZXNvbHZhYmxlOiBSZXNvbHZhYmxlKTogUGF0aE5vZGUge1xuICAgIHJldHVybiBmaW5kKHRoaXMuX3BhdGgsIChub2RlOiBQYXRoTm9kZSkgPT4gaW5BcnJheShub2RlLnJlc29sdmFibGVzLCByZXNvbHZhYmxlKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYXN5bmMgZGVwZW5kZW5jaWVzIG9mIGEgUmVzb2x2YWJsZVxuICAgKlxuICAgKiBHaXZlbiBhIFJlc29sdmFibGUsIHJldHVybnMgaXRzIGRlcGVuZGVuY2llcyBhcyBhIFJlc29sdmFibGVbXVxuICAgKi9cbiAgZ2V0RGVwZW5kZW5jaWVzKHJlc29sdmFibGU6IFJlc29sdmFibGUpOiBSZXNvbHZhYmxlW10ge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLmZpbmROb2RlKHJlc29sdmFibGUpO1xuICAgIC8vIEZpbmQgd2hpY2ggb3RoZXIgcmVzb2x2YWJsZXMgYXJlIFwidmlzaWJsZVwiIHRvIHRoZSBgcmVzb2x2YWJsZWAgYXJndW1lbnRcbiAgICAvLyBzdWJwYXRoIHN0b3BwaW5nIGF0IHJlc29sdmFibGUncyBub2RlLCBvciB0aGUgd2hvbGUgcGF0aCAoaWYgdGhlIHJlc29sdmFibGUgaXNuJ3QgaW4gdGhlIHBhdGgpXG4gICAgY29uc3Qgc3ViUGF0aDogUGF0aE5vZGVbXSA9IFBhdGhVdGlscy5zdWJQYXRoKHRoaXMuX3BhdGgsIHggPT4geCA9PT0gbm9kZSkgfHwgdGhpcy5fcGF0aDtcbiAgICBjb25zdCBhdmFpbGFibGVSZXNvbHZhYmxlczogUmVzb2x2YWJsZVtdID0gc3ViUGF0aFxuICAgICAgLnJlZHVjZSgoYWNjLCBfbm9kZSkgPT4gYWNjLmNvbmNhdChfbm9kZS5yZXNvbHZhYmxlcyksIFtdKSAvLyBhbGwgb2Ygc3VicGF0aCdzIHJlc29sdmFibGVzXG4gICAgICAuZmlsdGVyKHJlcyA9PiByZXMgIT09IHJlc29sdmFibGUpOyAvLyBmaWx0ZXIgb3V0IHRoZSBgcmVzb2x2YWJsZWAgYXJndW1lbnRcblxuICAgIGNvbnN0IGdldERlcGVuZGVuY3kgPSAodG9rZW46IGFueSkgPT4ge1xuICAgICAgY29uc3QgbWF0Y2hpbmcgPSBhdmFpbGFibGVSZXNvbHZhYmxlcy5maWx0ZXIociA9PiByLnRva2VuID09PSB0b2tlbik7XG4gICAgICBpZiAobWF0Y2hpbmcubGVuZ3RoKSByZXR1cm4gdGFpbChtYXRjaGluZyk7XG5cbiAgICAgIGNvbnN0IGZyb21JbmplY3RvciA9IHRoaXMuaW5qZWN0b3IoKS5nZXROYXRpdmUodG9rZW4pO1xuICAgICAgaWYgKGlzVW5kZWZpbmVkKGZyb21JbmplY3RvcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZmluZCBEZXBlbmRlbmN5IEluamVjdGlvbiB0b2tlbjogJyArIHN0cmluZ2lmeSh0b2tlbikpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IFJlc29sdmFibGUodG9rZW4sICgpID0+IGZyb21JbmplY3RvciwgW10sIGZyb21JbmplY3Rvcik7XG4gICAgfTtcblxuICAgIHJldHVybiByZXNvbHZhYmxlLmRlcHMubWFwKGdldERlcGVuZGVuY3kpO1xuICB9XG59XG5cbi8qKiBAaW50ZXJuYWxhcGkgKi9cbmNsYXNzIFVJSW5qZWN0b3JJbXBsIGltcGxlbWVudHMgVUlJbmplY3RvciB7XG4gIG5hdGl2ZTogJEluamVjdG9yTGlrZTtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgY29udGV4dDogUmVzb2x2ZUNvbnRleHQpIHtcbiAgICB0aGlzLm5hdGl2ZSA9IHRoaXMuZ2V0KE5BVElWRV9JTkpFQ1RPUl9UT0tFTikgfHwgc2VydmljZXMuJGluamVjdG9yO1xuICB9XG5cbiAgZ2V0KHRva2VuOiBhbnkpIHtcbiAgICBjb25zdCByZXNvbHZhYmxlID0gdGhpcy5jb250ZXh0LmdldFJlc29sdmFibGUodG9rZW4pO1xuICAgIGlmIChyZXNvbHZhYmxlKSB7XG4gICAgICBpZiAodGhpcy5jb250ZXh0LmdldFBvbGljeShyZXNvbHZhYmxlKS5hc3luYyA9PT0gJ05PV0FJVCcpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmFibGUuZ2V0KHRoaXMuY29udGV4dCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzb2x2YWJsZS5yZXNvbHZlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc29sdmFibGUgYXN5bmMgLmdldCgpIG5vdCBjb21wbGV0ZTonICsgc3RyaW5naWZ5KHJlc29sdmFibGUudG9rZW4pKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNvbHZhYmxlLmRhdGE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZ2V0TmF0aXZlKHRva2VuKTtcbiAgfVxuXG4gIGdldEFzeW5jKHRva2VuOiBhbnkpIHtcbiAgICBjb25zdCByZXNvbHZhYmxlID0gdGhpcy5jb250ZXh0LmdldFJlc29sdmFibGUodG9rZW4pO1xuICAgIGlmIChyZXNvbHZhYmxlKSByZXR1cm4gcmVzb2x2YWJsZS5nZXQodGhpcy5jb250ZXh0KTtcbiAgICByZXR1cm4gc2VydmljZXMuJHEud2hlbih0aGlzLm5hdGl2ZS5nZXQodG9rZW4pKTtcbiAgfVxuXG4gIGdldE5hdGl2ZSh0b2tlbjogYW55KSB7XG4gICAgcmV0dXJuIHRoaXMubmF0aXZlICYmIHRoaXMubmF0aXZlLmdldCh0b2tlbik7XG4gIH1cbn1cbiIsIi8qKiBAcHVibGljYXBpIEBtb2R1bGUgc3RhdGUgKi8gLyoqICovXG5pbXBvcnQgeyBhcHBseVBhaXJzLCBleHRlbmQsIGlkZW50aXR5LCBpbmhlcml0LCBtYXBPYmosIG5vb3AsIE9iaiwgb21pdCwgdGFpbCwgdmFsdWVzLCBjb3B5IH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBpc0FycmF5LCBpc0RlZmluZWQsIGlzRnVuY3Rpb24sIGlzU3RyaW5nIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnLi4vY29tbW9uL3N0cmluZ3MnO1xuaW1wb3J0IHsgaXMsIHBhdHRlcm4sIHBpcGUsIHByb3AsIHZhbCB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgU3RhdGVEZWNsYXJhdGlvbiB9IGZyb20gJy4vaW50ZXJmYWNlJztcblxuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuL3N0YXRlT2JqZWN0JztcbmltcG9ydCB7IFN0YXRlTWF0Y2hlciB9IGZyb20gJy4vc3RhdGVNYXRjaGVyJztcbmltcG9ydCB7IFBhcmFtIH0gZnJvbSAnLi4vcGFyYW1zL3BhcmFtJztcbmltcG9ydCB7IFVybE1hdGNoZXJGYWN0b3J5IH0gZnJvbSAnLi4vdXJsL3VybE1hdGNoZXJGYWN0b3J5JztcbmltcG9ydCB7IFVybE1hdGNoZXIgfSBmcm9tICcuLi91cmwvdXJsTWF0Y2hlcic7XG5pbXBvcnQgeyBSZXNvbHZhYmxlIH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZhYmxlJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyBSZXNvbHZlUG9saWN5IH0gZnJvbSAnLi4vcmVzb2x2ZS9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUGFyYW1EZWNsYXJhdGlvbiB9IGZyb20gJy4uL3BhcmFtcyc7XG5pbXBvcnQgeyBQYXJhbUZhY3RvcnkgfSBmcm9tICcuLi91cmwnO1xuXG5jb25zdCBwYXJzZVVybCA9ICh1cmw6IHN0cmluZyk6IGFueSA9PiB7XG4gIGlmICghaXNTdHJpbmcodXJsKSkgcmV0dXJuIGZhbHNlO1xuICBjb25zdCByb290ID0gdXJsLmNoYXJBdCgwKSA9PT0gJ14nO1xuICByZXR1cm4geyB2YWw6IHJvb3QgPyB1cmwuc3Vic3RyaW5nKDEpIDogdXJsLCByb290IH07XG59O1xuXG5leHBvcnQgdHlwZSBCdWlsZGVyRnVuY3Rpb24gPSAoc3RhdGU6IFN0YXRlT2JqZWN0LCBwYXJlbnQ/OiBCdWlsZGVyRnVuY3Rpb24pID0+IGFueTtcblxuaW50ZXJmYWNlIEJ1aWxkZXJzIHtcbiAgW2tleTogc3RyaW5nXTogQnVpbGRlckZ1bmN0aW9uW107XG5cbiAgbmFtZTogQnVpbGRlckZ1bmN0aW9uW107XG4gIHBhcmVudDogQnVpbGRlckZ1bmN0aW9uW107XG4gIGRhdGE6IEJ1aWxkZXJGdW5jdGlvbltdO1xuICB1cmw6IEJ1aWxkZXJGdW5jdGlvbltdO1xuICBuYXZpZ2FibGU6IEJ1aWxkZXJGdW5jdGlvbltdO1xuICBwYXJhbXM6IEJ1aWxkZXJGdW5jdGlvbltdO1xuICB2aWV3czogQnVpbGRlckZ1bmN0aW9uW107XG4gIHBhdGg6IEJ1aWxkZXJGdW5jdGlvbltdO1xuICBpbmNsdWRlczogQnVpbGRlckZ1bmN0aW9uW107XG4gIHJlc29sdmFibGVzOiBCdWlsZGVyRnVuY3Rpb25bXTtcbn1cblxuZnVuY3Rpb24gbmFtZUJ1aWxkZXIoc3RhdGU6IFN0YXRlT2JqZWN0KSB7XG4gIHJldHVybiBzdGF0ZS5uYW1lO1xufVxuXG5mdW5jdGlvbiBzZWxmQnVpbGRlcihzdGF0ZTogU3RhdGVPYmplY3QpIHtcbiAgc3RhdGUuc2VsZi4kJHN0YXRlID0gKCkgPT4gc3RhdGU7XG4gIHJldHVybiBzdGF0ZS5zZWxmO1xufVxuXG5mdW5jdGlvbiBkYXRhQnVpbGRlcihzdGF0ZTogU3RhdGVPYmplY3QpIHtcbiAgaWYgKHN0YXRlLnBhcmVudCAmJiBzdGF0ZS5wYXJlbnQuZGF0YSkge1xuICAgIHN0YXRlLmRhdGEgPSBzdGF0ZS5zZWxmLmRhdGEgPSBpbmhlcml0KHN0YXRlLnBhcmVudC5kYXRhLCBzdGF0ZS5kYXRhKTtcbiAgfVxuICByZXR1cm4gc3RhdGUuZGF0YTtcbn1cblxuY29uc3QgZ2V0VXJsQnVpbGRlciA9ICgkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlcjogVXJsTWF0Y2hlckZhY3RvcnksIHJvb3Q6ICgpID0+IFN0YXRlT2JqZWN0KSA9PlxuICBmdW5jdGlvbiB1cmxCdWlsZGVyKHN0YXRlT2JqZWN0OiBTdGF0ZU9iamVjdCkge1xuICAgIGxldCBzdGF0ZURlYzogU3RhdGVEZWNsYXJhdGlvbiA9IHN0YXRlT2JqZWN0LnNlbGY7XG5cbiAgICAvLyBGb3IgZnV0dXJlIHN0YXRlcywgaS5lLiwgc3RhdGVzIHdob3NlIG5hbWUgZW5kcyB3aXRoIGAuKipgLFxuICAgIC8vIG1hdGNoIGFueXRoaW5nIHRoYXQgc3RhcnRzIHdpdGggdGhlIHVybCBwcmVmaXhcbiAgICBpZiAoc3RhdGVEZWMgJiYgc3RhdGVEZWMudXJsICYmIHN0YXRlRGVjLm5hbWUgJiYgc3RhdGVEZWMubmFtZS5tYXRjaCgvXFwuXFwqXFwqJC8pKSB7XG4gICAgICBjb25zdCBuZXdTdGF0ZURlYzogU3RhdGVEZWNsYXJhdGlvbiA9IHt9O1xuICAgICAgY29weShzdGF0ZURlYywgbmV3U3RhdGVEZWMpO1xuICAgICAgbmV3U3RhdGVEZWMudXJsICs9ICd7cmVtYWluZGVyOmFueX0nOyAvLyBtYXRjaCBhbnkgcGF0aCAoLiopXG4gICAgICBzdGF0ZURlYyA9IG5ld1N0YXRlRGVjO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcmVudCA9IHN0YXRlT2JqZWN0LnBhcmVudDtcbiAgICBjb25zdCBwYXJzZWQgPSBwYXJzZVVybChzdGF0ZURlYy51cmwpO1xuICAgIGNvbnN0IHVybCA9ICFwYXJzZWQgPyBzdGF0ZURlYy51cmwgOiAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlci5jb21waWxlKHBhcnNlZC52YWwsIHsgc3RhdGU6IHN0YXRlRGVjIH0pO1xuXG4gICAgaWYgKCF1cmwpIHJldHVybiBudWxsO1xuICAgIGlmICghJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIuaXNNYXRjaGVyKHVybCkpIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB1cmwgJyR7dXJsfScgaW4gc3RhdGUgJyR7c3RhdGVPYmplY3R9J2ApO1xuICAgIHJldHVybiBwYXJzZWQgJiYgcGFyc2VkLnJvb3QgPyB1cmwgOiAoKHBhcmVudCAmJiBwYXJlbnQubmF2aWdhYmxlKSB8fCByb290KCkpLnVybC5hcHBlbmQoPFVybE1hdGNoZXI+dXJsKTtcbiAgfTtcblxuY29uc3QgZ2V0TmF2aWdhYmxlQnVpbGRlciA9IChpc1Jvb3Q6IChzdGF0ZTogU3RhdGVPYmplY3QpID0+IGJvb2xlYW4pID0+XG4gIGZ1bmN0aW9uIG5hdmlnYWJsZUJ1aWxkZXIoc3RhdGU6IFN0YXRlT2JqZWN0KSB7XG4gICAgcmV0dXJuICFpc1Jvb3Qoc3RhdGUpICYmIHN0YXRlLnVybCA/IHN0YXRlIDogc3RhdGUucGFyZW50ID8gc3RhdGUucGFyZW50Lm5hdmlnYWJsZSA6IG51bGw7XG4gIH07XG5cbmNvbnN0IGdldFBhcmFtc0J1aWxkZXIgPSAocGFyYW1GYWN0b3J5OiBQYXJhbUZhY3RvcnkpID0+XG4gIGZ1bmN0aW9uIHBhcmFtc0J1aWxkZXIoc3RhdGU6IFN0YXRlT2JqZWN0KTogeyBba2V5OiBzdHJpbmddOiBQYXJhbSB9IHtcbiAgICBjb25zdCBtYWtlQ29uZmlnUGFyYW0gPSAoY29uZmlnOiBQYXJhbURlY2xhcmF0aW9uLCBpZDogc3RyaW5nKSA9PiBwYXJhbUZhY3RvcnkuZnJvbUNvbmZpZyhpZCwgbnVsbCwgc3RhdGUuc2VsZik7XG4gICAgY29uc3QgdXJsUGFyYW1zOiBQYXJhbVtdID0gKHN0YXRlLnVybCAmJiBzdGF0ZS51cmwucGFyYW1ldGVycyh7IGluaGVyaXQ6IGZhbHNlIH0pKSB8fCBbXTtcbiAgICBjb25zdCBub25VcmxQYXJhbXM6IFBhcmFtW10gPSB2YWx1ZXMobWFwT2JqKG9taXQoc3RhdGUucGFyYW1zIHx8IHt9LCB1cmxQYXJhbXMubWFwKHByb3AoJ2lkJykpKSwgbWFrZUNvbmZpZ1BhcmFtKSk7XG4gICAgcmV0dXJuIHVybFBhcmFtc1xuICAgICAgLmNvbmNhdChub25VcmxQYXJhbXMpXG4gICAgICAubWFwKHAgPT4gW3AuaWQsIHBdKVxuICAgICAgLnJlZHVjZShhcHBseVBhaXJzLCB7fSk7XG4gIH07XG5cbmZ1bmN0aW9uIHBhdGhCdWlsZGVyKHN0YXRlOiBTdGF0ZU9iamVjdCkge1xuICByZXR1cm4gc3RhdGUucGFyZW50ID8gc3RhdGUucGFyZW50LnBhdGguY29uY2F0KHN0YXRlKSA6IC8qcm9vdCovIFtzdGF0ZV07XG59XG5cbmZ1bmN0aW9uIGluY2x1ZGVzQnVpbGRlcihzdGF0ZTogU3RhdGVPYmplY3QpIHtcbiAgY29uc3QgaW5jbHVkZXMgPSBzdGF0ZS5wYXJlbnQgPyBleHRlbmQoe30sIHN0YXRlLnBhcmVudC5pbmNsdWRlcykgOiB7fTtcbiAgaW5jbHVkZXNbc3RhdGUubmFtZV0gPSB0cnVlO1xuICByZXR1cm4gaW5jbHVkZXM7XG59XG5cbi8qKlxuICogVGhpcyBpcyBhIFtbU3RhdGVCdWlsZGVyLmJ1aWxkZXJdXSBmdW5jdGlvbiBmb3IgdGhlIGByZXNvbHZlOmAgYmxvY2sgb24gYSBbW1N0YXRlRGVjbGFyYXRpb25dXS5cbiAqXG4gKiBXaGVuIHRoZSBbW1N0YXRlQnVpbGRlcl1dIGJ1aWxkcyBhIFtbU3RhdGVPYmplY3RdXSBvYmplY3QgZnJvbSBhIHJhdyBbW1N0YXRlRGVjbGFyYXRpb25dXSwgdGhpcyBidWlsZGVyXG4gKiB2YWxpZGF0ZXMgdGhlIGByZXNvbHZlYCBwcm9wZXJ0eSBhbmQgY29udmVydHMgaXQgdG8gYSBbW1Jlc29sdmFibGVdXSBhcnJheS5cbiAqXG4gKiByZXNvbHZlOiBpbnB1dCB2YWx1ZSBjYW4gYmU6XG4gKlxuICoge1xuICogICAvLyBhbmFseXplZCBidXQgbm90IGluamVjdGVkXG4gKiAgIG15Rm9vUmVzb2x2ZTogZnVuY3Rpb24oKSB7IHJldHVybiBcIm15Rm9vRGF0YVwiOyB9LFxuICpcbiAqICAgLy8gZnVuY3Rpb24udG9TdHJpbmcoKSBwYXJzZWQsIFwiRGVwZW5kZW5jeU5hbWVcIiBkZXAgYXMgc3RyaW5nIChub3QgbWluLXNhZmUpXG4gKiAgIG15QmFyUmVzb2x2ZTogZnVuY3Rpb24oRGVwZW5kZW5jeU5hbWUpIHsgcmV0dXJuIERlcGVuZGVuY3lOYW1lLmZldGNoU29tZXRoaW5nQXNQcm9taXNlKCkgfSxcbiAqXG4gKiAgIC8vIEFycmF5IHNwbGl0OyBcIkRlcGVuZGVuY3lOYW1lXCIgZGVwIGFzIHN0cmluZ1xuICogICBteUJhelJlc29sdmU6IFsgXCJEZXBlbmRlbmN5TmFtZVwiLCBmdW5jdGlvbihkZXApIHsgcmV0dXJuIGRlcC5mZXRjaFNvbWV0aGluZ0FzUHJvbWlzZSgpIH0sXG4gKlxuICogICAvLyBBcnJheSBzcGxpdDsgRGVwZW5kZW5jeVR5cGUgZGVwIGFzIHRva2VuIChjb21wYXJlZCB1c2luZyA9PT0pXG4gKiAgIG15UXV4UmVzb2x2ZTogWyBEZXBlbmRlbmN5VHlwZSwgZnVuY3Rpb24oZGVwKSB7IHJldHVybiBkZXAuZmV0Y2hTb21ldGluZ0FzUHJvbWlzZSgpIH0sXG4gKlxuICogICAvLyB2YWwuJGluamVjdCB1c2VkIGFzIGRlcHNcbiAqICAgLy8gd2hlcmU6XG4gKiAgIC8vICAgICBjb3JnZVJlc29sdmUuJGluamVjdCA9IFtcIkRlcGVuZGVuY3lOYW1lXCJdO1xuICogICAvLyAgICAgZnVuY3Rpb24gY29yZ2VSZXNvbHZlKGRlcCkgeyBkZXAuZmV0Y2hTb21ldGluZ0FzUHJvbWlzZSgpIH1cbiAqICAgLy8gdGhlbiBcIkRlcGVuZGVuY3lOYW1lXCIgZGVwIGFzIHN0cmluZ1xuICogICBteUNvcmdlUmVzb2x2ZTogY29yZ2VSZXNvbHZlLFxuICpcbiAqICAvLyBpbmplY3Qgc2VydmljZSBieSBuYW1lXG4gKiAgLy8gV2hlbiBhIHN0cmluZyBpcyBmb3VuZCwgZGVzdWdhciBjcmVhdGluZyBhIHJlc29sdmUgdGhhdCBpbmplY3RzIHRoZSBuYW1lZCBzZXJ2aWNlXG4gKiAgIG15R3JhdWx0UmVzb2x2ZTogXCJTb21lU2VydmljZVwiXG4gKiB9XG4gKlxuICogb3I6XG4gKlxuICogW1xuICogICBuZXcgUmVzb2x2YWJsZShcIm15Rm9vUmVzb2x2ZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFwibXlGb29EYXRhXCIgfSksXG4gKiAgIG5ldyBSZXNvbHZhYmxlKFwibXlCYXJSZXNvbHZlXCIsIGZ1bmN0aW9uKGRlcCkgeyByZXR1cm4gZGVwLmZldGNoU29tZXRoaW5nQXNQcm9taXNlKCkgfSwgWyBcIkRlcGVuZGVuY3lOYW1lXCIgXSksXG4gKiAgIHsgcHJvdmlkZTogXCJteUJhelJlc29sdmVcIiwgdXNlRmFjdG9yeTogZnVuY3Rpb24oZGVwKSB7IGRlcC5mZXRjaFNvbWV0aGluZ0FzUHJvbWlzZSgpIH0sIGRlcHM6IFsgXCJEZXBlbmRlbmN5TmFtZVwiIF0gfVxuICogXVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2YWJsZXNCdWlsZGVyKHN0YXRlOiBTdGF0ZU9iamVjdCk6IFJlc29sdmFibGVbXSB7XG4gIGludGVyZmFjZSBUdXBsZSB7XG4gICAgdG9rZW46IGFueTtcbiAgICB2YWw6IGFueTtcbiAgICBkZXBzOiBhbnlbXTtcbiAgICBwb2xpY3k6IFJlc29sdmVQb2xpY3k7XG4gIH1cblxuICAvKiogY29udmVydCByZXNvbHZlOiB7fSBhbmQgcmVzb2x2ZVBvbGljeToge30gb2JqZWN0cyB0byBhbiBhcnJheSBvZiB0dXBsZXMgKi9cbiAgY29uc3Qgb2JqZWN0czJUdXBsZXMgPSAocmVzb2x2ZU9iajogT2JqLCByZXNvbHZlUG9saWNpZXM6IHsgW2tleTogc3RyaW5nXTogUmVzb2x2ZVBvbGljeSB9KSA9PlxuICAgIE9iamVjdC5rZXlzKHJlc29sdmVPYmogfHwge30pLm1hcCh0b2tlbiA9PiAoe1xuICAgICAgdG9rZW4sXG4gICAgICB2YWw6IHJlc29sdmVPYmpbdG9rZW5dLFxuICAgICAgZGVwczogdW5kZWZpbmVkLFxuICAgICAgcG9saWN5OiByZXNvbHZlUG9saWNpZXNbdG9rZW5dLFxuICAgIH0pKTtcblxuICAvKiogZmV0Y2ggREkgYW5ub3RhdGlvbnMgZnJvbSBhIGZ1bmN0aW9uIG9yIG5nMS1zdHlsZSBhcnJheSAqL1xuICBjb25zdCBhbm5vdGF0ZSA9IChmbjogRnVuY3Rpb24pID0+IHtcbiAgICBjb25zdCAkaW5qZWN0b3IgPSBzZXJ2aWNlcy4kaW5qZWN0b3I7XG4gICAgLy8gbmcxIGRvZXNuJ3QgaGF2ZSBhbiAkaW5qZWN0b3IgdW50aWwgcnVudGltZS5cbiAgICAvLyBJZiB0aGUgJGluamVjdG9yIGRvZXNuJ3QgZXhpc3QsIHVzZSBcImRlZmVycmVkXCIgbGl0ZXJhbCBhcyBhXG4gICAgLy8gbWFya2VyIGluZGljYXRpbmcgdGhleSBzaG91bGQgYmUgYW5ub3RhdGVkIHdoZW4gcnVudGltZSBzdGFydHNcbiAgICByZXR1cm4gZm5bJyRpbmplY3QnXSB8fCAoJGluamVjdG9yICYmICRpbmplY3Rvci5hbm5vdGF0ZShmbiwgJGluamVjdG9yLnN0cmljdERpKSkgfHwgPGFueT4nZGVmZXJyZWQnO1xuICB9O1xuXG4gIC8qKiB0cnVlIGlmIHRoZSBvYmplY3QgaGFzIGJvdGggYHRva2VuYCBhbmQgYHJlc29sdmVGbmAsIGFuZCBpcyBwcm9iYWJseSBhIFtbUmVzb2x2ZUxpdGVyYWxdXSAqL1xuICBjb25zdCBpc1Jlc29sdmVMaXRlcmFsID0gKG9iajogYW55KSA9PiAhIShvYmoudG9rZW4gJiYgb2JqLnJlc29sdmVGbik7XG5cbiAgLyoqIHRydWUgaWYgdGhlIG9iamVjdCBsb29rcyBsaWtlIGEgcHJvdmlkZSBsaXRlcmFsLCBvciBhIG5nMiBQcm92aWRlciAqL1xuICBjb25zdCBpc0xpa2VOZzJQcm92aWRlciA9IChvYmo6IGFueSkgPT5cbiAgICAhISgob2JqLnByb3ZpZGUgfHwgb2JqLnRva2VuKSAmJiAob2JqLnVzZVZhbHVlIHx8IG9iai51c2VGYWN0b3J5IHx8IG9iai51c2VFeGlzdGluZyB8fCBvYmoudXNlQ2xhc3MpKTtcblxuICAvKiogdHJ1ZSBpZiB0aGUgb2JqZWN0IGxvb2tzIGxpa2UgYSB0dXBsZSBmcm9tIG9iajJUdXBsZXMgKi9cbiAgY29uc3QgaXNUdXBsZUZyb21PYmogPSAob2JqOiBhbnkpID0+XG4gICAgISEob2JqICYmIG9iai52YWwgJiYgKGlzU3RyaW5nKG9iai52YWwpIHx8IGlzQXJyYXkob2JqLnZhbCkgfHwgaXNGdW5jdGlvbihvYmoudmFsKSkpO1xuXG4gIC8qKiBleHRyYWN0cyB0aGUgdG9rZW4gZnJvbSBhIFByb3ZpZGVyIG9yIHByb3ZpZGUgbGl0ZXJhbCAqL1xuICBjb25zdCBnZXRUb2tlbiA9IChwOiBhbnkpID0+IHAucHJvdmlkZSB8fCBwLnRva2VuO1xuXG4gIC8vIHByZXR0aWVyLWlnbm9yZTogR2l2ZW4gYSBsaXRlcmFsIHJlc29sdmUgb3IgcHJvdmlkZXIgb2JqZWN0LCByZXR1cm5zIGEgUmVzb2x2YWJsZVxuICBjb25zdCBsaXRlcmFsMlJlc29sdmFibGUgPSBwYXR0ZXJuKFtcbiAgICBbcHJvcCgncmVzb2x2ZUZuJyksIHAgPT4gbmV3IFJlc29sdmFibGUoZ2V0VG9rZW4ocCksIHAucmVzb2x2ZUZuLCBwLmRlcHMsIHAucG9saWN5KV0sXG4gICAgW3Byb3AoJ3VzZUZhY3RvcnknKSwgcCA9PiBuZXcgUmVzb2x2YWJsZShnZXRUb2tlbihwKSwgcC51c2VGYWN0b3J5LCBwLmRlcHMgfHwgcC5kZXBlbmRlbmNpZXMsIHAucG9saWN5KV0sXG4gICAgW3Byb3AoJ3VzZUNsYXNzJyksIHAgPT4gbmV3IFJlc29sdmFibGUoZ2V0VG9rZW4ocCksICgpID0+IG5ldyAoPGFueT5wLnVzZUNsYXNzKSgpLCBbXSwgcC5wb2xpY3kpXSxcbiAgICBbcHJvcCgndXNlVmFsdWUnKSwgcCA9PiBuZXcgUmVzb2x2YWJsZShnZXRUb2tlbihwKSwgKCkgPT4gcC51c2VWYWx1ZSwgW10sIHAucG9saWN5LCBwLnVzZVZhbHVlKV0sXG4gICAgW3Byb3AoJ3VzZUV4aXN0aW5nJyksIHAgPT4gbmV3IFJlc29sdmFibGUoZ2V0VG9rZW4ocCksIGlkZW50aXR5LCBbcC51c2VFeGlzdGluZ10sIHAucG9saWN5KV0sXG4gIF0pO1xuXG4gIC8vIHByZXR0aWVyLWlnbm9yZVxuICBjb25zdCB0dXBsZTJSZXNvbHZhYmxlID0gcGF0dGVybihbXG4gICAgW3BpcGUocHJvcCgndmFsJyksIGlzU3RyaW5nKSwgICAodHVwbGU6IFR1cGxlKSA9PiBuZXcgUmVzb2x2YWJsZSh0dXBsZS50b2tlbiwgaWRlbnRpdHksIFt0dXBsZS52YWxdLCB0dXBsZS5wb2xpY3kpXSxcbiAgICBbcGlwZShwcm9wKCd2YWwnKSwgaXNBcnJheSksICAgICh0dXBsZTogVHVwbGUpID0+IG5ldyBSZXNvbHZhYmxlKHR1cGxlLnRva2VuLCB0YWlsKDxhbnlbXT50dXBsZS52YWwpLCB0dXBsZS52YWwuc2xpY2UoMCwgLTEpLCB0dXBsZS5wb2xpY3kpXSxcbiAgICBbcGlwZShwcm9wKCd2YWwnKSwgaXNGdW5jdGlvbiksICh0dXBsZTogVHVwbGUpID0+IG5ldyBSZXNvbHZhYmxlKHR1cGxlLnRva2VuLCB0dXBsZS52YWwsIGFubm90YXRlKHR1cGxlLnZhbCksIHR1cGxlLnBvbGljeSldLFxuICBdKTtcblxuICAvLyBwcmV0dGllci1pZ25vcmVcbiAgY29uc3QgaXRlbTJSZXNvbHZhYmxlID0gPChvYmo6IGFueSkgPT4gUmVzb2x2YWJsZT5wYXR0ZXJuKFtcbiAgICBbaXMoUmVzb2x2YWJsZSksIChyOiBSZXNvbHZhYmxlKSA9PiByXSxcbiAgICBbaXNSZXNvbHZlTGl0ZXJhbCwgbGl0ZXJhbDJSZXNvbHZhYmxlXSxcbiAgICBbaXNMaWtlTmcyUHJvdmlkZXIsIGxpdGVyYWwyUmVzb2x2YWJsZV0sXG4gICAgW2lzVHVwbGVGcm9tT2JqLCB0dXBsZTJSZXNvbHZhYmxlXSxcbiAgICBbdmFsKHRydWUpLCAob2JqOiBhbnkpID0+IHsgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJlc29sdmUgdmFsdWU6ICcgKyBzdHJpbmdpZnkob2JqKSk7IH0sIF0sXG4gIF0pO1xuXG4gIC8vIElmIHJlc29sdmVCbG9jayBpcyBhbHJlYWR5IGFuIGFycmF5LCB1c2UgaXQgYXMtaXMuXG4gIC8vIE90aGVyd2lzZSwgYXNzdW1lIGl0J3MgYW4gb2JqZWN0IGFuZCBjb252ZXJ0IHRvIGFuIEFycmF5IG9mIHR1cGxlc1xuICBjb25zdCBkZWNsID0gc3RhdGUucmVzb2x2ZTtcbiAgY29uc3QgaXRlbXM6IGFueVtdID0gaXNBcnJheShkZWNsKSA/IGRlY2wgOiBvYmplY3RzMlR1cGxlcyhkZWNsLCBzdGF0ZS5yZXNvbHZlUG9saWN5IHx8IHt9KTtcbiAgcmV0dXJuIGl0ZW1zLm1hcChpdGVtMlJlc29sdmFibGUpO1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbGFwaSBBIGludGVybmFsIGdsb2JhbCBzZXJ2aWNlXG4gKlxuICogU3RhdGVCdWlsZGVyIGlzIGEgZmFjdG9yeSBmb3IgdGhlIGludGVybmFsIFtbU3RhdGVPYmplY3RdXSBvYmplY3RzLlxuICpcbiAqIFdoZW4geW91IHJlZ2lzdGVyIGEgc3RhdGUgd2l0aCB0aGUgW1tTdGF0ZVJlZ2lzdHJ5XV0sIHlvdSByZWdpc3RlciBhIHBsYWluIG9sZCBqYXZhc2NyaXB0IG9iamVjdCB3aGljaFxuICogY29uZm9ybXMgdG8gdGhlIFtbU3RhdGVEZWNsYXJhdGlvbl1dIGludGVyZmFjZS4gIFRoaXMgZmFjdG9yeSB0YWtlcyB0aGF0IG9iamVjdCBhbmQgYnVpbGRzIHRoZSBjb3JyZXNwb25kaW5nXG4gKiBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0LCB3aGljaCBoYXMgYW4gQVBJIGFuZCBpcyB1c2VkIGludGVybmFsbHkuXG4gKlxuICogQ3VzdG9tIHByb3BlcnRpZXMgb3IgQVBJIG1heSBiZSBhZGRlZCB0byB0aGUgaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIG9iamVjdCBieSByZWdpc3RlcmluZyBhIGRlY29yYXRvciBmdW5jdGlvblxuICogdXNpbmcgdGhlIFtbYnVpbGRlcl1dIG1ldGhvZC5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0YXRlQnVpbGRlciB7XG4gIC8qKiBBbiBvYmplY3QgdGhhdCBjb250YWlucyBhbGwgdGhlIEJ1aWxkZXJGdW5jdGlvbnMgcmVnaXN0ZXJlZCwga2V5J2QgYnkgdGhlIG5hbWUgb2YgdGhlIFN0YXRlIHByb3BlcnR5IHRoZXkgYnVpbGQgKi9cbiAgcHJpdmF0ZSBidWlsZGVyczogQnVpbGRlcnM7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBtYXRjaGVyOiBTdGF0ZU1hdGNoZXIsIHVybE1hdGNoZXJGYWN0b3J5OiBVcmxNYXRjaGVyRmFjdG9yeSkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgY29uc3Qgcm9vdCA9ICgpID0+IG1hdGNoZXIuZmluZCgnJyk7XG4gICAgY29uc3QgaXNSb290ID0gKHN0YXRlOiBTdGF0ZU9iamVjdCkgPT4gc3RhdGUubmFtZSA9PT0gJyc7XG5cbiAgICBmdW5jdGlvbiBwYXJlbnRCdWlsZGVyKHN0YXRlOiBTdGF0ZU9iamVjdCkge1xuICAgICAgaWYgKGlzUm9vdChzdGF0ZSkpIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIG1hdGNoZXIuZmluZChzZWxmLnBhcmVudE5hbWUoc3RhdGUpKSB8fCByb290KCk7XG4gICAgfVxuXG4gICAgdGhpcy5idWlsZGVycyA9IHtcbiAgICAgIG5hbWU6IFtuYW1lQnVpbGRlcl0sXG4gICAgICBzZWxmOiBbc2VsZkJ1aWxkZXJdLFxuICAgICAgcGFyZW50OiBbcGFyZW50QnVpbGRlcl0sXG4gICAgICBkYXRhOiBbZGF0YUJ1aWxkZXJdLFxuICAgICAgLy8gQnVpbGQgYSBVUkxNYXRjaGVyIGlmIG5lY2Vzc2FyeSwgZWl0aGVyIHZpYSBhIHJlbGF0aXZlIG9yIGFic29sdXRlIFVSTFxuICAgICAgdXJsOiBbZ2V0VXJsQnVpbGRlcih1cmxNYXRjaGVyRmFjdG9yeSwgcm9vdCldLFxuICAgICAgLy8gS2VlcCB0cmFjayBvZiB0aGUgY2xvc2VzdCBhbmNlc3RvciBzdGF0ZSB0aGF0IGhhcyBhIFVSTCAoaS5lLiBpcyBuYXZpZ2FibGUpXG4gICAgICBuYXZpZ2FibGU6IFtnZXROYXZpZ2FibGVCdWlsZGVyKGlzUm9vdCldLFxuICAgICAgcGFyYW1zOiBbZ2V0UGFyYW1zQnVpbGRlcih1cmxNYXRjaGVyRmFjdG9yeS5wYXJhbUZhY3RvcnkpXSxcbiAgICAgIC8vIEVhY2ggZnJhbWV3b3JrLXNwZWNpZmljIHVpLXJvdXRlciBpbXBsZW1lbnRhdGlvbiBzaG91bGQgZGVmaW5lIGl0cyBvd24gYHZpZXdzYCBidWlsZGVyXG4gICAgICAvLyBlLmcuLCBzcmMvbmcxL3N0YXRlYnVpbGRlcnMvdmlld3MudHNcbiAgICAgIHZpZXdzOiBbXSxcbiAgICAgIC8vIEtlZXAgYSBmdWxsIHBhdGggZnJvbSB0aGUgcm9vdCBkb3duIHRvIHRoaXMgc3RhdGUgYXMgdGhpcyBpcyBuZWVkZWQgZm9yIHN0YXRlIGFjdGl2YXRpb24uXG4gICAgICBwYXRoOiBbcGF0aEJ1aWxkZXJdLFxuICAgICAgLy8gU3BlZWQgdXAgJHN0YXRlLmluY2x1ZGVzKCkgYXMgaXQncyB1c2VkIGEgbG90XG4gICAgICBpbmNsdWRlczogW2luY2x1ZGVzQnVpbGRlcl0sXG4gICAgICByZXNvbHZhYmxlczogW3Jlc29sdmFibGVzQnVpbGRlcl0sXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBbW0J1aWxkZXJGdW5jdGlvbl1dIGZvciBhIHNwZWNpZmljIFtbU3RhdGVPYmplY3RdXSBwcm9wZXJ0eSAoZS5nLiwgYHBhcmVudGAsIGB1cmxgLCBvciBgcGF0aGApLlxuICAgKiBNb3JlIHRoYW4gb25lIEJ1aWxkZXJGdW5jdGlvbiBjYW4gYmUgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBwcm9wZXJ0eS5cbiAgICpcbiAgICogVGhlIEJ1aWxkZXJGdW5jdGlvbihzKSB3aWxsIGJlIHVzZWQgdG8gZGVmaW5lIHRoZSBwcm9wZXJ0eSBvbiBhbnkgc3Vic2VxdWVudGx5IGJ1aWx0IFtbU3RhdGVPYmplY3RdXSBvYmplY3RzLlxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgU3RhdGUgcHJvcGVydHkgYmVpbmcgcmVnaXN0ZXJlZCBmb3IuXG4gICAqIEBwYXJhbSBmbiBUaGUgQnVpbGRlckZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgdXNlZCB0byBidWlsZCB0aGUgU3RhdGUgcHJvcGVydHlcbiAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgQnVpbGRlckZ1bmN0aW9uXG4gICAqL1xuICBidWlsZGVyKG5hbWU6IHN0cmluZywgZm46IEJ1aWxkZXJGdW5jdGlvbik6IEJ1aWxkZXJGdW5jdGlvbiB8IEJ1aWxkZXJGdW5jdGlvbltdIHwgRnVuY3Rpb24ge1xuICAgIGNvbnN0IGJ1aWxkZXJzID0gdGhpcy5idWlsZGVycztcbiAgICBjb25zdCBhcnJheSA9IGJ1aWxkZXJzW25hbWVdIHx8IFtdO1xuICAgIC8vIEJhY2t3YXJkcyBjb21wYXQ6IGlmIG9ubHkgb25lIGJ1aWxkZXIgZXhpc3RzLCByZXR1cm4gaXQsIGVsc2UgcmV0dXJuIHdob2xlIGFyYXJ5LlxuICAgIGlmIChpc1N0cmluZyhuYW1lKSAmJiAhaXNEZWZpbmVkKGZuKSkgcmV0dXJuIGFycmF5Lmxlbmd0aCA+IDEgPyBhcnJheSA6IGFycmF5WzBdO1xuICAgIGlmICghaXNTdHJpbmcobmFtZSkgfHwgIWlzRnVuY3Rpb24oZm4pKSByZXR1cm47XG5cbiAgICBidWlsZGVyc1tuYW1lXSA9IGFycmF5O1xuICAgIGJ1aWxkZXJzW25hbWVdLnB1c2goZm4pO1xuICAgIHJldHVybiAoKSA9PiBidWlsZGVyc1tuYW1lXS5zcGxpY2UoYnVpbGRlcnNbbmFtZV0uaW5kZXhPZihmbiwgMSkpICYmIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGRzIGFsbCBvZiB0aGUgcHJvcGVydGllcyBvbiBhbiBlc3NlbnRpYWxseSBibGFuayBTdGF0ZSBvYmplY3QsIHJldHVybmluZyBhIFN0YXRlIG9iamVjdCB3aGljaCBoYXMgYWxsIGl0c1xuICAgKiBwcm9wZXJ0aWVzIGFuZCBBUEkgYnVpbHQuXG4gICAqXG4gICAqIEBwYXJhbSBzdGF0ZSBhbiB1bmluaXRpYWxpemVkIFN0YXRlIG9iamVjdFxuICAgKiBAcmV0dXJucyB0aGUgYnVpbHQgU3RhdGUgb2JqZWN0XG4gICAqL1xuICBidWlsZChzdGF0ZTogU3RhdGVPYmplY3QpOiBTdGF0ZU9iamVjdCB7XG4gICAgY29uc3QgeyBtYXRjaGVyLCBidWlsZGVycyB9ID0gdGhpcztcbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzLnBhcmVudE5hbWUoc3RhdGUpO1xuXG4gICAgaWYgKHBhcmVudCAmJiAhbWF0Y2hlci5maW5kKHBhcmVudCwgdW5kZWZpbmVkLCBmYWxzZSkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGZvciAoY29uc3Qga2V5IGluIGJ1aWxkZXJzKSB7XG4gICAgICBpZiAoIWJ1aWxkZXJzLmhhc093blByb3BlcnR5KGtleSkpIGNvbnRpbnVlO1xuICAgICAgY29uc3QgY2hhaW4gPSBidWlsZGVyc1trZXldLnJlZHVjZShcbiAgICAgICAgKHBhcmVudEZuOiBCdWlsZGVyRnVuY3Rpb24sIHN0ZXA6IEJ1aWxkZXJGdW5jdGlvbikgPT4gX3N0YXRlID0+IHN0ZXAoX3N0YXRlLCBwYXJlbnRGbiksXG4gICAgICAgIG5vb3BcbiAgICAgICk7XG4gICAgICBzdGF0ZVtrZXldID0gY2hhaW4oc3RhdGUpO1xuICAgIH1cbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICBwYXJlbnROYW1lKHN0YXRlOiBTdGF0ZU9iamVjdCkge1xuICAgIC8vIG5hbWUgPSAnZm9vLmJhci5iYXouKionXG4gICAgY29uc3QgbmFtZSA9IHN0YXRlLm5hbWUgfHwgJyc7XG4gICAgLy8gc2VnbWVudHMgPSBbJ2ZvbycsICdiYXInLCAnYmF6JywgJy4qKiddXG4gICAgY29uc3Qgc2VnbWVudHMgPSBuYW1lLnNwbGl0KCcuJyk7XG4gICAgLy8gc2VnbWVudHMgPSBbJ2ZvbycsICdiYXInLCAnYmF6J11cbiAgICBjb25zdCBsYXN0U2VnbWVudCA9IHNlZ21lbnRzLnBvcCgpO1xuICAgIC8vIHNlZ21lbnRzID0gWydmb28nLCAnYmFyJ10gKGlnbm9yZSAuKiogc2VnbWVudCBmb3IgZnV0dXJlIHN0YXRlcylcbiAgICBpZiAobGFzdFNlZ21lbnQgPT09ICcqKicpIHNlZ21lbnRzLnBvcCgpO1xuXG4gICAgaWYgKHNlZ21lbnRzLmxlbmd0aCkge1xuICAgICAgaWYgKHN0YXRlLnBhcmVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFN0YXRlcyB0aGF0IHNwZWNpZnkgdGhlICdwYXJlbnQ6JyBwcm9wZXJ0eSBzaG91bGQgbm90IGhhdmUgYSAnLicgaW4gdGhlaXIgbmFtZSAoJHtuYW1lfSlgKTtcbiAgICAgIH1cblxuICAgICAgLy8gJ2Zvby5iYXInXG4gICAgICByZXR1cm4gc2VnbWVudHMuam9pbignLicpO1xuICAgIH1cblxuICAgIGlmICghc3RhdGUucGFyZW50KSByZXR1cm4gJyc7XG4gICAgcmV0dXJuIGlzU3RyaW5nKHN0YXRlLnBhcmVudCkgPyBzdGF0ZS5wYXJlbnQgOiBzdGF0ZS5wYXJlbnQubmFtZTtcbiAgfVxuXG4gIG5hbWUoc3RhdGU6IFN0YXRlT2JqZWN0KSB7XG4gICAgY29uc3QgbmFtZSA9IHN0YXRlLm5hbWU7XG4gICAgaWYgKG5hbWUuaW5kZXhPZignLicpICE9PSAtMSB8fCAhc3RhdGUucGFyZW50KSByZXR1cm4gbmFtZTtcblxuICAgIGNvbnN0IHBhcmVudE5hbWUgPSBpc1N0cmluZyhzdGF0ZS5wYXJlbnQpID8gc3RhdGUucGFyZW50IDogc3RhdGUucGFyZW50Lm5hbWU7XG4gICAgcmV0dXJuIHBhcmVudE5hbWUgPyBwYXJlbnROYW1lICsgJy4nICsgbmFtZSA6IG5hbWU7XG4gIH1cbn1cbiIsIi8qKiBAcHVibGljYXBpIEBtb2R1bGUgc3RhdGUgKi8gLyoqICovXG5pbXBvcnQgeyBTdGF0ZURlY2xhcmF0aW9uLCBfVmlld0RlY2xhcmF0aW9uLCBfU3RhdGVEZWNsYXJhdGlvbiwgTGF6eUxvYWRSZXN1bHQgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBkZWZhdWx0cywgdmFsdWVzLCBmaW5kLCBpbmhlcml0IH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBwcm9wRXEgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IFBhcmFtIH0gZnJvbSAnLi4vcGFyYW1zL3BhcmFtJztcbmltcG9ydCB7IFVybE1hdGNoZXIgfSBmcm9tICcuLi91cmwvdXJsTWF0Y2hlcic7XG5pbXBvcnQgeyBSZXNvbHZhYmxlIH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZhYmxlJztcbmltcG9ydCB7IFRyYW5zaXRpb25TdGF0ZUhvb2tGbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vaW50ZXJmYWNlJztcbmltcG9ydCB7IFRhcmdldFN0YXRlIH0gZnJvbSAnLi90YXJnZXRTdGF0ZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uJztcbmltcG9ydCB7IEdsb2IgfSBmcm9tICcuLi9jb21tb24vZ2xvYic7XG5pbXBvcnQgeyBpc09iamVjdCwgaXNGdW5jdGlvbiB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcblxuLyoqXG4gKiBJbnRlcm5hbCByZXByZXNlbnRhdGlvbiBvZiBhIFVJLVJvdXRlciBzdGF0ZS5cbiAqXG4gKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgY3JlYXRlZCB3aGVuIGEgW1tTdGF0ZURlY2xhcmF0aW9uXV0gaXMgcmVnaXN0ZXJlZCB3aXRoIHRoZSBbW1N0YXRlUmVnaXN0cnldXS5cbiAqXG4gKiBBIHJlZ2lzdGVyZWQgW1tTdGF0ZURlY2xhcmF0aW9uXV0gaXMgYXVnbWVudGVkIHdpdGggYSBnZXR0ZXIgKFtbU3RhdGVEZWNsYXJhdGlvbi4kJHN0YXRlXV0pIHdoaWNoIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgW1tTdGF0ZU9iamVjdF1dIG9iamVjdC5cbiAqXG4gKiBUaGlzIGNsYXNzIHByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIHRoZSBjb3JyZXNwb25kaW5nIFtbU3RhdGVEZWNsYXJhdGlvbl1dLlxuICogRWFjaCBvZiBpdHMgb3duIHByb3BlcnRpZXMgKGkuZS4sIGBoYXNPd25Qcm9wZXJ0eWApIGFyZSBidWlsdCB1c2luZyBidWlsZGVycyBmcm9tIHRoZSBbW1N0YXRlQnVpbGRlcl1dLlxuICovXG5leHBvcnQgY2xhc3MgU3RhdGVPYmplY3Qge1xuICAvKiogVGhlIHBhcmVudCBbW1N0YXRlT2JqZWN0XV0gKi9cbiAgcHVibGljIHBhcmVudDogU3RhdGVPYmplY3Q7XG5cbiAgLyoqIFRoZSBuYW1lIHVzZWQgdG8gcmVnaXN0ZXIgdGhlIHN0YXRlICovXG4gIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG5cbiAgLyoqIFByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIFtbU3RhdGVEZWNsYXJhdGlvbi5hYnN0cmFjdF1dICovXG4gIHB1YmxpYyBhYnN0cmFjdDogYm9vbGVhbjtcblxuICAvKiogUHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXSAqL1xuICBwdWJsaWMgcmVzb2x2ZTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBhbnlbXSB8IEZ1bmN0aW9uIH0gfCBhbnlbXTtcblxuICAvKiogQSBsaXN0IG9mIFtbUmVzb2x2YWJsZV1dIG9iamVjdHMuICBUaGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gb2YgW1tyZXNvbHZlXV0uICovXG4gIHB1YmxpYyByZXNvbHZhYmxlczogUmVzb2x2YWJsZVtdO1xuXG4gIC8qKiBQcm90b3R5cGFsbHkgaW5oZXJpdHMgZnJvbSBbW1N0YXRlRGVjbGFyYXRpb24ucmVzb2x2ZVBvbGljeV1dICovXG4gIHB1YmxpYyByZXNvbHZlUG9saWN5OiBhbnk7XG5cbiAgLyoqIEEgY29tcGlsZWQgVVJMTWF0Y2hlciB3aGljaCBkZXRlY3RzIHdoZW4gdGhlIHN0YXRlJ3MgVVJMIGlzIG1hdGNoZWQgKi9cbiAgcHVibGljIHVybDogVXJsTWF0Y2hlcjtcblxuICAvKiogVGhlIHBhcmFtZXRlcnMgZm9yIHRoZSBzdGF0ZSwgYnVpbHQgZnJvbSB0aGUgVVJMIGFuZCBbW1N0YXRlRGVjbGFyYXRpb24ucGFyYW1zXV0gKi9cbiAgcHVibGljIHBhcmFtczogeyBba2V5OiBzdHJpbmddOiBQYXJhbSB9O1xuXG4gIC8qKlxuICAgKiBUaGUgdmlld3MgZm9yIHRoZSBzdGF0ZS5cbiAgICogTm90ZTogYEB1aXJvdXRlci9jb3JlYCBkb2VzIG5vdCByZWdpc3RlciBhIGJ1aWxkZXIgZm9yIHZpZXdzLlxuICAgKiBUaGUgZnJhbWV3b3JrIHNwZWNpZmljIGNvZGUgc2hvdWxkIHJlZ2lzdGVyIGEgYHZpZXdzYCBidWlsZGVyLlxuICAgKi9cbiAgcHVibGljIHZpZXdzOiB7IFtrZXk6IHN0cmluZ106IF9WaWV3RGVjbGFyYXRpb24gfTtcblxuICAvKipcbiAgICogVGhlIG9yaWdpbmFsIFtbU3RhdGVEZWNsYXJhdGlvbl1dIHVzZWQgdG8gYnVpbGQgdGhpcyBbW1N0YXRlT2JqZWN0XV0uXG4gICAqIE5vdGU6IGB0aGlzYCBvYmplY3QgYWxzbyBwcm90b3R5cGFsbHkgaW5oZXJpdHMgZnJvbSB0aGUgYHNlbGZgIGRlY2xhcmF0aW9uIG9iamVjdC5cbiAgICovXG4gIHB1YmxpYyBzZWxmOiBTdGF0ZURlY2xhcmF0aW9uO1xuXG4gIC8qKiBUaGUgbmVhcmVzdCBwYXJlbnQgW1tTdGF0ZU9iamVjdF1dIHdoaWNoIGhhcyBhIFVSTCAqL1xuICBwdWJsaWMgbmF2aWdhYmxlOiBTdGF0ZU9iamVjdDtcblxuICAvKiogVGhlIHBhcmVudCBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0cyBmcm9tIHRoaXMgc3RhdGUgdXAgdG8gdGhlIHJvb3QgKi9cbiAgcHVibGljIHBhdGg6IFN0YXRlT2JqZWN0W107XG5cbiAgLyoqXG4gICAqIFByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIFtbU3RhdGVEZWNsYXJhdGlvbi5kYXRhXV1cbiAgICogTm90ZTogVGhpcyBpcyB0aGUgb25seSBmaWVsZCBvbiB0aGUgW1tTdGF0ZURlY2xhcmF0aW9uXV0gd2hpY2ggaXMgbXV0YXRlZC5cbiAgICogVGhlIGRlZmluaXRpb24gb2JqZWN0J3MgYGRhdGFgIGZpZWxkIGlzIHJlcGxhY2VkIHdpdGggYSBuZXcgb2JqZWN0XG4gICAqIHdoaWNoIHByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIHRoZSBwYXJlbnQgc3RhdGUgZGVmaW5pdGlvbidzIGBkYXRhYCBmaWVsZC5cbiAgICovXG4gIHB1YmxpYyBkYXRhOiBhbnk7XG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBwYXJlbnQgU3RhdGVzJyBuYW1lcyBhcyBrZXlzIGFuZFxuICAgKiB0cnVlIGFzIHRoZWlyIHZhbHVlcy5cbiAgICovXG4gIHB1YmxpYyBpbmNsdWRlczogeyBbbmFtZTogc3RyaW5nXTogYm9vbGVhbiB9O1xuXG4gIC8qKiBQcm90b3R5cGFsbHkgaW5oZXJpdHMgZnJvbSBbW1N0YXRlRGVjbGFyYXRpb24ub25FeGl0XV0gKi9cbiAgcHVibGljIG9uRXhpdDogVHJhbnNpdGlvblN0YXRlSG9va0ZuO1xuICAvKiogUHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gW1tTdGF0ZURlY2xhcmF0aW9uLm9uUmV0YWluXV0gKi9cbiAgcHVibGljIG9uUmV0YWluOiBUcmFuc2l0aW9uU3RhdGVIb29rRm47XG4gIC8qKiBQcm90b3R5cGFsbHkgaW5oZXJpdHMgZnJvbSBbW1N0YXRlRGVjbGFyYXRpb24ub25FbnRlcl1dICovXG4gIHB1YmxpYyBvbkVudGVyOiBUcmFuc2l0aW9uU3RhdGVIb29rRm47XG5cbiAgLyoqIFByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIFtbU3RhdGVEZWNsYXJhdGlvbi5sYXp5TG9hZF1dICovXG4gIHB1YmxpYyBsYXp5TG9hZDogKHRyYW5zaXRpb246IFRyYW5zaXRpb24sIHN0YXRlOiBTdGF0ZURlY2xhcmF0aW9uKSA9PiBQcm9taXNlPExhenlMb2FkUmVzdWx0PjtcblxuICAvKiogUHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gW1tTdGF0ZURlY2xhcmF0aW9uLnJlZGlyZWN0VG9dXSAqL1xuICByZWRpcmVjdFRvOlxuICAgIHwgc3RyaW5nXG4gICAgfCAoKCR0cmFuc2l0aW9uJDogVHJhbnNpdGlvbikgPT4gVGFyZ2V0U3RhdGUpXG4gICAgfCB7IHN0YXRlOiBzdHJpbmcgfCBTdGF0ZURlY2xhcmF0aW9uOyBwYXJhbXM6IHsgW2tleTogc3RyaW5nXTogYW55IH0gfTtcblxuICAvKiogQGhpZGRlbiAqL1xuICBfX3N0YXRlT2JqZWN0Q2FjaGU6IHtcbiAgICAvKiogTWlnaHQgYmUgbnVsbCAqL1xuICAgIG5hbWVHbG9iPzogR2xvYjtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgc3RhdGUgb2JqZWN0IHRvIHB1dCB0aGUgcHJpdmF0ZS9pbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzIG9udG8uXG4gICAqIFRoZSBvYmplY3QncyBwcm90b3R5cGUgY2hhaW4gbG9va3MgbGlrZTpcbiAgICogKEludGVybmFsIFN0YXRlIE9iamVjdCkgLT4gKENvcHkgb2YgU3RhdGUucHJvdG90eXBlKSAtPiAoU3RhdGUgRGVjbGFyYXRpb24gb2JqZWN0KSAtPiAoU3RhdGUgRGVjbGFyYXRpb24ncyBwcm90b3R5cGUuLi4pXG4gICAqXG4gICAqIEBwYXJhbSBzdGF0ZURlY2wgdGhlIHVzZXItc3VwcGxpZWQgU3RhdGUgRGVjbGFyYXRpb25cbiAgICogQHJldHVybnMge1N0YXRlT2JqZWN0fSBhbiBpbnRlcm5hbCBTdGF0ZSBvYmplY3RcbiAgICovXG4gIHN0YXRpYyBjcmVhdGUoc3RhdGVEZWNsOiBfU3RhdGVEZWNsYXJhdGlvbik6IFN0YXRlT2JqZWN0IHtcbiAgICBzdGF0ZURlY2wgPSBTdGF0ZU9iamVjdC5pc1N0YXRlQ2xhc3Moc3RhdGVEZWNsKSA/IG5ldyBzdGF0ZURlY2woKSA6IHN0YXRlRGVjbDtcblxuICAgIGNvbnN0IHN0YXRlID0gaW5oZXJpdChpbmhlcml0KHN0YXRlRGVjbCwgU3RhdGVPYmplY3QucHJvdG90eXBlKSkgYXMgU3RhdGVPYmplY3Q7XG4gICAgc3RhdGVEZWNsLiQkc3RhdGUgPSAoKSA9PiBzdGF0ZTtcbiAgICBzdGF0ZS5zZWxmID0gc3RhdGVEZWNsO1xuICAgIHN0YXRlLl9fc3RhdGVPYmplY3RDYWNoZSA9IHtcbiAgICAgIG5hbWVHbG9iOiBHbG9iLmZyb21TdHJpbmcoc3RhdGUubmFtZSksIC8vIG1pZ2h0IHJldHVybiBudWxsXG4gICAgfTtcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICAvKiogUHJlZGljYXRlIHdoaWNoIHJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIGFuIGNsYXNzIHdpdGggQFN0YXRlKCkgZGVjb3JhdG9yICovXG4gIHN0YXRpYyBpc1N0YXRlQ2xhc3MgPSAoc3RhdGVEZWNsOiBfU3RhdGVEZWNsYXJhdGlvbik6IHN0YXRlRGVjbCBpcyB7IG5ldyAoKTogU3RhdGVEZWNsYXJhdGlvbiB9ID0+XG4gICAgaXNGdW5jdGlvbihzdGF0ZURlY2wpICYmIHN0YXRlRGVjbFsnX191aVJvdXRlclN0YXRlJ10gPT09IHRydWU7XG5cbiAgLyoqIFByZWRpY2F0ZSB3aGljaCByZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhbiBpbnRlcm5hbCBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0ICovXG4gIHN0YXRpYyBpc1N0YXRlID0gKG9iajogYW55KTogb2JqIGlzIFN0YXRlT2JqZWN0ID0+IGlzT2JqZWN0KG9ialsnX19zdGF0ZU9iamVjdENhY2hlJ10pO1xuXG4gIC8qKiBAZGVwcmVjYXRlZCB1c2UgU3RhdGUuY3JlYXRlKCkgKi9cbiAgY29uc3RydWN0b3IoY29uZmlnPzogU3RhdGVEZWNsYXJhdGlvbikge1xuICAgIHJldHVybiBTdGF0ZU9iamVjdC5jcmVhdGUoY29uZmlnIHx8IHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHBhcmFtZXRlciBpcyB0aGUgc2FtZSBzdGF0ZS5cbiAgICpcbiAgICogQ29tcGFyZXMgdGhlIGlkZW50aXR5IG9mIHRoZSBzdGF0ZSBhZ2FpbnN0IHRoZSBwYXNzZWQgdmFsdWUsIHdoaWNoIGlzIGVpdGhlciBhbiBvYmplY3RcbiAgICogcmVmZXJlbmNlIHRvIHRoZSBhY3R1YWwgYFN0YXRlYCBpbnN0YW5jZSwgdGhlIG9yaWdpbmFsIGRlZmluaXRpb24gb2JqZWN0IHBhc3NlZCB0b1xuICAgKiBgJHN0YXRlUHJvdmlkZXIuc3RhdGUoKWAsIG9yIHRoZSBmdWxseS1xdWFsaWZpZWQgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHJlZiBDYW4gYmUgb25lIG9mIChhKSBhIGBTdGF0ZWAgaW5zdGFuY2UsIChiKSBhbiBvYmplY3QgdGhhdCB3YXMgcGFzc2VkXG4gICAqICAgICAgICBpbnRvIGAkc3RhdGVQcm92aWRlci5zdGF0ZSgpYCwgKGMpIHRoZSBmdWxseS1xdWFsaWZpZWQgbmFtZSBvZiBhIHN0YXRlIGFzIGEgc3RyaW5nLlxuICAgKiBAcmV0dXJucyBSZXR1cm5zIGB0cnVlYCBpZiBgcmVmYCBtYXRjaGVzIHRoZSBjdXJyZW50IGBTdGF0ZWAgaW5zdGFuY2UuXG4gICAqL1xuICBpcyhyZWY6IFN0YXRlT2JqZWN0IHwgU3RhdGVEZWNsYXJhdGlvbiB8IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzID09PSByZWYgfHwgdGhpcy5zZWxmID09PSByZWYgfHwgdGhpcy5mcW4oKSA9PT0gcmVmO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHRoaXMgZG9lcyBub3QgcHJvcGVybHkgaGFuZGxlIGRvdCBub3RhdGlvblxuICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgZG90LXNlcGFyYXRlZCBuYW1lIG9mIHRoZSBzdGF0ZS5cbiAgICovXG4gIGZxbigpOiBzdHJpbmcge1xuICAgIGlmICghdGhpcy5wYXJlbnQgfHwgISh0aGlzLnBhcmVudCBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3IpKSByZXR1cm4gdGhpcy5uYW1lO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcmVudC5mcW4oKTtcbiAgICByZXR1cm4gbmFtZSA/IG5hbWUgKyAnLicgKyB0aGlzLm5hbWUgOiB0aGlzLm5hbWU7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcm9vdCBub2RlIG9mIHRoaXMgc3RhdGUncyB0cmVlLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgcm9vdCBvZiB0aGlzIHN0YXRlJ3MgdHJlZS5cbiAgICovXG4gIHJvb3QoKTogU3RhdGVPYmplY3Qge1xuICAgIHJldHVybiAodGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQucm9vdCgpKSB8fCB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHN0YXRlJ3MgYFBhcmFtYCBvYmplY3RzXG4gICAqXG4gICAqIEdldHMgdGhlIGxpc3Qgb2YgW1tQYXJhbV1dIG9iamVjdHMgb3duZWQgYnkgdGhlIHN0YXRlLlxuICAgKiBJZiBgb3B0cy5pbmhlcml0YCBpcyB0cnVlLCBpdCBhbHNvIGluY2x1ZGVzIHRoZSBhbmNlc3RvciBzdGF0ZXMnIFtbUGFyYW1dXSBvYmplY3RzLlxuICAgKiBJZiBgb3B0cy5tYXRjaGluZ0tleXNgIGV4aXN0cywgcmV0dXJucyBvbmx5IGBQYXJhbWBzIHdob3NlIGBpZGAgaXMgYSBrZXkgb24gdGhlIGBtYXRjaGluZ0tleXNgIG9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0gb3B0cyBvcHRpb25zXG4gICAqL1xuICBwYXJhbWV0ZXJzKG9wdHM/OiB7IGluaGVyaXQ/OiBib29sZWFuOyBtYXRjaGluZ0tleXM/OiBhbnkgfSk6IFBhcmFtW10ge1xuICAgIG9wdHMgPSBkZWZhdWx0cyhvcHRzLCB7IGluaGVyaXQ6IHRydWUsIG1hdGNoaW5nS2V5czogbnVsbCB9KTtcbiAgICBjb25zdCBpbmhlcml0ZWQgPSAob3B0cy5pbmhlcml0ICYmIHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LnBhcmFtZXRlcnMoKSkgfHwgW107XG4gICAgcmV0dXJuIGluaGVyaXRlZFxuICAgICAgLmNvbmNhdCh2YWx1ZXModGhpcy5wYXJhbXMpKVxuICAgICAgLmZpbHRlcihwYXJhbSA9PiAhb3B0cy5tYXRjaGluZ0tleXMgfHwgb3B0cy5tYXRjaGluZ0tleXMuaGFzT3duUHJvcGVydHkocGFyYW0uaWQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc2luZ2xlIFtbUGFyYW1dXSB0aGF0IGlzIG93bmVkIGJ5IHRoZSBzdGF0ZVxuICAgKlxuICAgKiBJZiBgb3B0cy5pbmhlcml0YCBpcyB0cnVlLCBpdCBhbHNvIHNlYXJjaGVzIHRoZSBhbmNlc3RvciBzdGF0ZXNgIFtbUGFyYW1dXXMuXG4gICAqIEBwYXJhbSBpZCB0aGUgbmFtZSBvZiB0aGUgW1tQYXJhbV1dIHRvIHJldHVyblxuICAgKiBAcGFyYW0gb3B0cyBvcHRpb25zXG4gICAqL1xuICBwYXJhbWV0ZXIoaWQ6IHN0cmluZywgb3B0czogeyBpbmhlcml0PzogYm9vbGVhbiB9ID0ge30pOiBQYXJhbSB7XG4gICAgcmV0dXJuIChcbiAgICAgICh0aGlzLnVybCAmJiB0aGlzLnVybC5wYXJhbWV0ZXIoaWQsIG9wdHMpKSB8fFxuICAgICAgZmluZCh2YWx1ZXModGhpcy5wYXJhbXMpLCBwcm9wRXEoJ2lkJywgaWQpKSB8fFxuICAgICAgKG9wdHMuaW5oZXJpdCAmJiB0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC5wYXJhbWV0ZXIoaWQpKVxuICAgICk7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5mcW4oKTtcbiAgfVxufVxuIiwiLyoqIEBwdWJsaWNhcGkgQG1vZHVsZSBzdGF0ZSAqLyAvKiogKi9cbmltcG9ydCB7IGlzU3RyaW5nIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgU3RhdGVPck5hbWUgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4vc3RhdGVPYmplY3QnO1xuaW1wb3J0IHsgdmFsdWVzIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBzYWZlQ29uc29sZSB9IGZyb20gJy4uL2NvbW1vbi9zYWZlQ29uc29sZSc7XG5cbmV4cG9ydCBjbGFzcyBTdGF0ZU1hdGNoZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9zdGF0ZXM6IHsgW2tleTogc3RyaW5nXTogU3RhdGVPYmplY3QgfSkge31cblxuICBpc1JlbGF0aXZlKHN0YXRlTmFtZTogc3RyaW5nKSB7XG4gICAgc3RhdGVOYW1lID0gc3RhdGVOYW1lIHx8ICcnO1xuICAgIHJldHVybiBzdGF0ZU5hbWUuaW5kZXhPZignLicpID09PSAwIHx8IHN0YXRlTmFtZS5pbmRleE9mKCdeJykgPT09IDA7XG4gIH1cblxuICBmaW5kKHN0YXRlT3JOYW1lOiBTdGF0ZU9yTmFtZSwgYmFzZT86IFN0YXRlT3JOYW1lLCBtYXRjaEdsb2IgPSB0cnVlKTogU3RhdGVPYmplY3Qge1xuICAgIGlmICghc3RhdGVPck5hbWUgJiYgc3RhdGVPck5hbWUgIT09ICcnKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IGlzU3RyID0gaXNTdHJpbmcoc3RhdGVPck5hbWUpO1xuICAgIGxldCBuYW1lOiBzdHJpbmcgPSBpc1N0ciA/IHN0YXRlT3JOYW1lIDogKDxhbnk+c3RhdGVPck5hbWUpLm5hbWU7XG5cbiAgICBpZiAodGhpcy5pc1JlbGF0aXZlKG5hbWUpKSBuYW1lID0gdGhpcy5yZXNvbHZlUGF0aChuYW1lLCBiYXNlKTtcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX3N0YXRlc1tuYW1lXTtcblxuICAgIGlmIChzdGF0ZSAmJiAoaXNTdHIgfHwgKCFpc1N0ciAmJiAoc3RhdGUgPT09IHN0YXRlT3JOYW1lIHx8IHN0YXRlLnNlbGYgPT09IHN0YXRlT3JOYW1lKSkpKSB7XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfSBlbHNlIGlmIChpc1N0ciAmJiBtYXRjaEdsb2IpIHtcbiAgICAgIGNvbnN0IF9zdGF0ZXMgPSB2YWx1ZXModGhpcy5fc3RhdGVzKTtcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSBfc3RhdGVzLmZpbHRlcihcbiAgICAgICAgX3N0YXRlID0+IF9zdGF0ZS5fX3N0YXRlT2JqZWN0Q2FjaGUubmFtZUdsb2IgJiYgX3N0YXRlLl9fc3RhdGVPYmplY3RDYWNoZS5uYW1lR2xvYi5tYXRjaGVzKG5hbWUpXG4gICAgICApO1xuXG4gICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHNhZmVDb25zb2xlLmVycm9yKFxuICAgICAgICAgIGBzdGF0ZU1hdGNoZXIuZmluZDogRm91bmQgbXVsdGlwbGUgbWF0Y2hlcyBmb3IgJHtuYW1lfSB1c2luZyBnbG9iOiBgLFxuICAgICAgICAgIG1hdGNoZXMubWFwKG1hdGNoID0+IG1hdGNoLm5hbWUpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWF0Y2hlc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHJlc29sdmVQYXRoKG5hbWU6IHN0cmluZywgYmFzZTogU3RhdGVPck5hbWUpIHtcbiAgICBpZiAoIWJhc2UpIHRocm93IG5ldyBFcnJvcihgTm8gcmVmZXJlbmNlIHBvaW50IGdpdmVuIGZvciBwYXRoICcke25hbWV9J2ApO1xuXG4gICAgY29uc3QgYmFzZVN0YXRlOiBTdGF0ZU9iamVjdCA9IHRoaXMuZmluZChiYXNlKTtcblxuICAgIGNvbnN0IHNwbGl0TmFtZSA9IG5hbWUuc3BsaXQoJy4nKTtcbiAgICBjb25zdCBwYXRoTGVuZ3RoID0gc3BsaXROYW1lLmxlbmd0aDtcbiAgICBsZXQgaSA9IDAsXG4gICAgICBjdXJyZW50ID0gYmFzZVN0YXRlO1xuXG4gICAgZm9yICg7IGkgPCBwYXRoTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChzcGxpdE5hbWVbaV0gPT09ICcnICYmIGkgPT09IDApIHtcbiAgICAgICAgY3VycmVudCA9IGJhc2VTdGF0ZTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoc3BsaXROYW1lW2ldID09PSAnXicpIHtcbiAgICAgICAgaWYgKCFjdXJyZW50LnBhcmVudCkgdGhyb3cgbmV3IEVycm9yKGBQYXRoICcke25hbWV9JyBub3QgdmFsaWQgZm9yIHN0YXRlICcke2Jhc2VTdGF0ZS5uYW1lfSdgKTtcbiAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjb25zdCByZWxOYW1lID0gc3BsaXROYW1lLnNsaWNlKGkpLmpvaW4oJy4nKTtcbiAgICByZXR1cm4gY3VycmVudC5uYW1lICsgKGN1cnJlbnQubmFtZSAmJiByZWxOYW1lID8gJy4nIDogJycpICsgcmVsTmFtZTtcbiAgfVxufVxuIiwiLyoqIEBwdWJsaWNhcGkgQG1vZHVsZSBzdGF0ZSAqLyAvKiogKi9cbmltcG9ydCB7IGluQXJyYXksIGlzU3RyaW5nLCBwcm9wIH0gZnJvbSAnLi4vY29tbW9uJztcbmltcG9ydCB7IF9TdGF0ZURlY2xhcmF0aW9uIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuL3N0YXRlT2JqZWN0JztcbmltcG9ydCB7IFN0YXRlQnVpbGRlciB9IGZyb20gJy4vc3RhdGVCdWlsZGVyJztcbmltcG9ydCB7IFN0YXRlUmVnaXN0cnlMaXN0ZW5lciB9IGZyb20gJy4vc3RhdGVSZWdpc3RyeSc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB7IFVJUm91dGVyIH0gZnJvbSAnLi4vcm91dGVyJztcblxuLyoqIEBpbnRlcm5hbGFwaSAqL1xuZXhwb3J0IGNsYXNzIFN0YXRlUXVldWVNYW5hZ2VyIGltcGxlbWVudHMgRGlzcG9zYWJsZSB7XG4gIHF1ZXVlOiBTdGF0ZU9iamVjdFtdID0gW107XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByb3V0ZXI6IFVJUm91dGVyLFxuICAgIHB1YmxpYyBzdGF0ZXM6IHsgW2tleTogc3RyaW5nXTogU3RhdGVPYmplY3QgfSxcbiAgICBwdWJsaWMgYnVpbGRlcjogU3RhdGVCdWlsZGVyLFxuICAgIHB1YmxpYyBsaXN0ZW5lcnM6IFN0YXRlUmVnaXN0cnlMaXN0ZW5lcltdXG4gICkge31cblxuICAvKiogQGludGVybmFsYXBpICovXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5xdWV1ZSA9IFtdO1xuICB9XG5cbiAgcmVnaXN0ZXIoc3RhdGVEZWNsOiBfU3RhdGVEZWNsYXJhdGlvbikge1xuICAgIGNvbnN0IHF1ZXVlID0gdGhpcy5xdWV1ZTtcbiAgICBjb25zdCBzdGF0ZSA9IFN0YXRlT2JqZWN0LmNyZWF0ZShzdGF0ZURlY2wpO1xuICAgIGNvbnN0IG5hbWUgPSBzdGF0ZS5uYW1lO1xuXG4gICAgaWYgKCFpc1N0cmluZyhuYW1lKSkgdGhyb3cgbmV3IEVycm9yKCdTdGF0ZSBtdXN0IGhhdmUgYSB2YWxpZCBuYW1lJyk7XG4gICAgaWYgKHRoaXMuc3RhdGVzLmhhc093blByb3BlcnR5KG5hbWUpIHx8IGluQXJyYXkocXVldWUubWFwKHByb3AoJ25hbWUnKSksIG5hbWUpKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTdGF0ZSAnJHtuYW1lfScgaXMgYWxyZWFkeSBkZWZpbmVkYCk7XG5cbiAgICBxdWV1ZS5wdXNoKHN0YXRlKTtcbiAgICB0aGlzLmZsdXNoKCk7XG5cbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICBmbHVzaCgpIHtcbiAgICBjb25zdCB7IHF1ZXVlLCBzdGF0ZXMsIGJ1aWxkZXIgfSA9IHRoaXM7XG4gICAgY29uc3QgcmVnaXN0ZXJlZDogU3RhdGVPYmplY3RbXSA9IFtdLCAvLyBzdGF0ZXMgdGhhdCBnb3QgcmVnaXN0ZXJlZFxuICAgICAgb3JwaGFuczogU3RhdGVPYmplY3RbXSA9IFtdLCAvLyBzdGF0ZXMgdGhhdCBkb24ndCB5ZXQgaGF2ZSBhIHBhcmVudCByZWdpc3RlcmVkXG4gICAgICBwcmV2aW91c1F1ZXVlTGVuZ3RoID0ge307IC8vIGtlZXAgdHJhY2sgb2YgaG93IGxvbmcgdGhlIHF1ZXVlIHdoZW4gYW4gb3JwaGFuIHdhcyBmaXJzdCBlbmNvdW50ZXJlZFxuICAgIGNvbnN0IGdldFN0YXRlID0gbmFtZSA9PiB0aGlzLnN0YXRlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiB0aGlzLnN0YXRlc1tuYW1lXTtcbiAgICBjb25zdCBub3RpZnlMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICBpZiAocmVnaXN0ZXJlZC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcigncmVnaXN0ZXJlZCcsIHJlZ2lzdGVyZWQubWFwKHMgPT4gcy5zZWxmKSkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc3RhdGU6IFN0YXRlT2JqZWN0ID0gcXVldWUuc2hpZnQoKTtcbiAgICAgIGNvbnN0IG5hbWUgPSBzdGF0ZS5uYW1lO1xuICAgICAgY29uc3QgcmVzdWx0OiBTdGF0ZU9iamVjdCA9IGJ1aWxkZXIuYnVpbGQoc3RhdGUpO1xuICAgICAgY29uc3Qgb3JwaGFuSWR4OiBudW1iZXIgPSBvcnBoYW5zLmluZGV4T2Yoc3RhdGUpO1xuXG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU3RhdGUgPSBnZXRTdGF0ZShuYW1lKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nU3RhdGUgJiYgZXhpc3RpbmdTdGF0ZS5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTdGF0ZSAnJHtuYW1lfScgaXMgYWxyZWFkeSBkZWZpbmVkYCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBleGlzdGluZ0Z1dHVyZVN0YXRlID0gZ2V0U3RhdGUobmFtZSArICcuKionKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nRnV0dXJlU3RhdGUpIHtcbiAgICAgICAgICAvLyBSZW1vdmUgZnV0dXJlIHN0YXRlIG9mIHRoZSBzYW1lIG5hbWVcbiAgICAgICAgICB0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LmRlcmVnaXN0ZXIoZXhpc3RpbmdGdXR1cmVTdGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZXNbbmFtZV0gPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5hdHRhY2hSb3V0ZShzdGF0ZSk7XG4gICAgICAgIGlmIChvcnBoYW5JZHggPj0gMCkgb3JwaGFucy5zcGxpY2Uob3JwaGFuSWR4LCAxKTtcbiAgICAgICAgcmVnaXN0ZXJlZC5wdXNoKHN0YXRlKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByZXYgPSBwcmV2aW91c1F1ZXVlTGVuZ3RoW25hbWVdO1xuICAgICAgcHJldmlvdXNRdWV1ZUxlbmd0aFtuYW1lXSA9IHF1ZXVlLmxlbmd0aDtcbiAgICAgIGlmIChvcnBoYW5JZHggPj0gMCAmJiBwcmV2ID09PSBxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgLy8gV2FpdCB1bnRpbCB0d28gY29uc2VjdXRpdmUgaXRlcmF0aW9ucyB3aGVyZSBubyBhZGRpdGlvbmFsIHN0YXRlcyB3ZXJlIGRlcXVldWVkIHN1Y2Nlc3NmdWxseS5cbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVnaXN0ZXIgb3JwaGFuZWQgc3RhdGUgJyR7bmFtZX0nYCk7XG4gICAgICAgIHF1ZXVlLnB1c2goc3RhdGUpO1xuICAgICAgICBub3RpZnlMaXN0ZW5lcnMoKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlcztcbiAgICAgIH0gZWxzZSBpZiAob3JwaGFuSWR4IDwgMCkge1xuICAgICAgICBvcnBoYW5zLnB1c2goc3RhdGUpO1xuICAgICAgfVxuXG4gICAgICBxdWV1ZS5wdXNoKHN0YXRlKTtcbiAgICB9XG5cbiAgICBub3RpZnlMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gc3RhdGVzO1xuICB9XG5cbiAgYXR0YWNoUm91dGUoc3RhdGU6IFN0YXRlT2JqZWN0KSB7XG4gICAgaWYgKHN0YXRlLmFic3RyYWN0IHx8ICFzdGF0ZS51cmwpIHJldHVybjtcbiAgICBjb25zdCBydWxlc0FwaSA9IHRoaXMucm91dGVyLnVybFNlcnZpY2UucnVsZXM7XG4gICAgcnVsZXNBcGkucnVsZShydWxlc0FwaS51cmxSdWxlRmFjdG9yeS5jcmVhdGUoc3RhdGUpKTtcbiAgfVxufVxuIiwiLyoqIEBwdWJsaWNhcGkgQG1vZHVsZSBzdGF0ZSAqLyAvKiogKi9cblxuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuL3N0YXRlT2JqZWN0JztcbmltcG9ydCB7IFN0YXRlTWF0Y2hlciB9IGZyb20gJy4vc3RhdGVNYXRjaGVyJztcbmltcG9ydCB7IFN0YXRlQnVpbGRlciB9IGZyb20gJy4vc3RhdGVCdWlsZGVyJztcbmltcG9ydCB7IFN0YXRlUXVldWVNYW5hZ2VyIH0gZnJvbSAnLi9zdGF0ZVF1ZXVlTWFuYWdlcic7XG5pbXBvcnQgeyBTdGF0ZURlY2xhcmF0aW9uLCBfU3RhdGVEZWNsYXJhdGlvbiB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IEJ1aWxkZXJGdW5jdGlvbiB9IGZyb20gJy4vc3RhdGVCdWlsZGVyJztcbmltcG9ydCB7IFN0YXRlT3JOYW1lIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgcmVtb3ZlRnJvbSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgVUlSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuaW1wb3J0IHsgcHJvcEVxIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5cbi8qKlxuICogVGhlIHNpZ25hdHVyZSBmb3IgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHByb3ZpZGVkIHRvIFtbU3RhdGVSZWdpc3RyeS5vblN0YXRlc0NoYW5nZWRdXS5cbiAqXG4gKiBUaGlzIGNhbGxiYWNrIHJlY2VpdmVzIHR3byBwYXJhbWV0ZXJzOlxuICpcbiAqIEBwYXJhbSBldmVudCBhIHN0cmluZzsgZWl0aGVyIFwicmVnaXN0ZXJlZFwiIG9yIFwiZGVyZWdpc3RlcmVkXCJcbiAqIEBwYXJhbSBzdGF0ZXMgdGhlIGxpc3Qgb2YgW1tTdGF0ZURlY2xhcmF0aW9uXV1zIHRoYXQgd2VyZSByZWdpc3RlcmVkIChvciBkZXJlZ2lzdGVyZWQpLlxuICovXG5leHBvcnQgdHlwZSBTdGF0ZVJlZ2lzdHJ5TGlzdGVuZXIgPSAoZXZlbnQ6ICdyZWdpc3RlcmVkJyB8ICdkZXJlZ2lzdGVyZWQnLCBzdGF0ZXM6IFN0YXRlRGVjbGFyYXRpb25bXSkgPT4gdm9pZDtcblxuZXhwb3J0IGNsYXNzIFN0YXRlUmVnaXN0cnkge1xuICBwcml2YXRlIF9yb290OiBTdGF0ZU9iamVjdDtcbiAgcHJpdmF0ZSBzdGF0ZXM6IHsgW2tleTogc3RyaW5nXTogU3RhdGVPYmplY3QgfSA9IHt9O1xuXG4gIG1hdGNoZXI6IFN0YXRlTWF0Y2hlcjtcbiAgcHJpdmF0ZSBidWlsZGVyOiBTdGF0ZUJ1aWxkZXI7XG4gIHN0YXRlUXVldWU6IFN0YXRlUXVldWVNYW5hZ2VyO1xuXG4gIGxpc3RlbmVyczogU3RhdGVSZWdpc3RyeUxpc3RlbmVyW10gPSBbXTtcblxuICAvKiogQGludGVybmFsYXBpICovXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcm91dGVyOiBVSVJvdXRlcikge1xuICAgIHRoaXMubWF0Y2hlciA9IG5ldyBTdGF0ZU1hdGNoZXIodGhpcy5zdGF0ZXMpO1xuICAgIHRoaXMuYnVpbGRlciA9IG5ldyBTdGF0ZUJ1aWxkZXIodGhpcy5tYXRjaGVyLCByb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnkpO1xuICAgIHRoaXMuc3RhdGVRdWV1ZSA9IG5ldyBTdGF0ZVF1ZXVlTWFuYWdlcihyb3V0ZXIsIHRoaXMuc3RhdGVzLCB0aGlzLmJ1aWxkZXIsIHRoaXMubGlzdGVuZXJzKTtcbiAgICB0aGlzLl9yZWdpc3RlclJvb3QoKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgcHJpdmF0ZSBfcmVnaXN0ZXJSb290KCkge1xuICAgIGNvbnN0IHJvb3RTdGF0ZURlZjogU3RhdGVEZWNsYXJhdGlvbiA9IHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgdXJsOiAnXicsXG4gICAgICB2aWV3czogbnVsbCxcbiAgICAgIHBhcmFtczoge1xuICAgICAgICAnIyc6IHsgdmFsdWU6IG51bGwsIHR5cGU6ICdoYXNoJywgZHluYW1pYzogdHJ1ZSB9LFxuICAgICAgfSxcbiAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgIH07XG5cbiAgICBjb25zdCBfcm9vdCA9ICh0aGlzLl9yb290ID0gdGhpcy5zdGF0ZVF1ZXVlLnJlZ2lzdGVyKHJvb3RTdGF0ZURlZikpO1xuICAgIF9yb290Lm5hdmlnYWJsZSA9IG51bGw7XG4gIH1cblxuICAvKiogQGludGVybmFsYXBpICovXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5zdGF0ZVF1ZXVlLmRpc3Bvc2UoKTtcbiAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMuZ2V0KCkuZm9yRWFjaChzdGF0ZSA9PiB0aGlzLmdldChzdGF0ZSkgJiYgdGhpcy5kZXJlZ2lzdGVyKHN0YXRlKSk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdGVuIGZvciBhIFN0YXRlIFJlZ2lzdHJ5IGV2ZW50c1xuICAgKlxuICAgKiBBZGRzIGEgY2FsbGJhY2sgdGhhdCBpcyBpbnZva2VkIHdoZW4gc3RhdGVzIGFyZSByZWdpc3RlcmVkIG9yIGRlcmVnaXN0ZXJlZCB3aXRoIHRoZSBTdGF0ZVJlZ2lzdHJ5LlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIGxldCBhbGxTdGF0ZXMgPSByZWdpc3RyeS5nZXQoKTtcbiAgICpcbiAgICogLy8gTGF0ZXIsIGludm9rZSBkZXJlZ2lzdGVyRm4oKSB0byByZW1vdmUgdGhlIGxpc3RlbmVyXG4gICAqIGxldCBkZXJlZ2lzdGVyRm4gPSByZWdpc3RyeS5vblN0YXRlc0NoYW5nZWQoKGV2ZW50LCBzdGF0ZXMpID0+IHtcbiAgICogICBzd2l0Y2goZXZlbnQpIHtcbiAgICogICAgIGNhc2U6ICdyZWdpc3RlcmVkJzpcbiAgICogICAgICAgc3RhdGVzLmZvckVhY2goc3RhdGUgPT4gYWxsU3RhdGVzLnB1c2goc3RhdGUpKTtcbiAgICogICAgICAgYnJlYWs7XG4gICAqICAgICBjYXNlOiAnZGVyZWdpc3RlcmVkJzpcbiAgICogICAgICAgc3RhdGVzLmZvckVhY2goc3RhdGUgPT4ge1xuICAgKiAgICAgICAgIGxldCBpZHggPSBhbGxTdGF0ZXMuaW5kZXhPZihzdGF0ZSk7XG4gICAqICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIGFsbFN0YXRlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICogICAgICAgfSk7XG4gICAqICAgICAgIGJyZWFrO1xuICAgKiAgIH1cbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gbGlzdGVuZXIgYSBjYWxsYmFjayBmdW5jdGlvbiBpbnZva2VkIHdoZW4gdGhlIHJlZ2lzdGVyZWQgc3RhdGVzIGNoYW5nZXMuXG4gICAqICAgICAgICBUaGUgZnVuY3Rpb24gcmVjZWl2ZXMgdHdvIHBhcmFtZXRlcnMsIGBldmVudGAgYW5kIGBzdGF0ZWAuXG4gICAqICAgICAgICBTZWUgW1tTdGF0ZVJlZ2lzdHJ5TGlzdGVuZXJdXVxuICAgKiBAcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCBkZXJlZ2lzdGVycyB0aGUgbGlzdGVuZXJcbiAgICovXG4gIG9uU3RhdGVzQ2hhbmdlZChsaXN0ZW5lcjogU3RhdGVSZWdpc3RyeUxpc3RlbmVyKTogKCkgPT4gdm9pZCB7XG4gICAgdGhpcy5saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGRlcmVnaXN0ZXJMaXN0ZW5lcigpIHtcbiAgICAgIHJlbW92ZUZyb20odGhpcy5saXN0ZW5lcnMpKGxpc3RlbmVyKTtcbiAgICB9LmJpbmQodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgaW1wbGljaXQgcm9vdCBzdGF0ZVxuICAgKlxuICAgKiBHZXRzIHRoZSByb290IG9mIHRoZSBzdGF0ZSB0cmVlLlxuICAgKiBUaGUgcm9vdCBzdGF0ZSBpcyBpbXBsaWNpdGx5IGNyZWF0ZWQgYnkgVUktUm91dGVyLlxuICAgKiBOb3RlOiB0aGlzIHJldHVybnMgdGhlIGludGVybmFsIFtbU3RhdGVPYmplY3RdXSByZXByZXNlbnRhdGlvbiwgbm90IGEgW1tTdGF0ZURlY2xhcmF0aW9uXV1cbiAgICpcbiAgICogQHJldHVybiB0aGUgcm9vdCBbW1N0YXRlT2JqZWN0XV1cbiAgICovXG4gIHJvb3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Jvb3Q7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIHN0YXRlIHRvIHRoZSByZWdpc3RyeVxuICAgKlxuICAgKiBSZWdpc3RlcnMgYSBbW1N0YXRlRGVjbGFyYXRpb25dXSBvciBxdWV1ZXMgaXQgZm9yIHJlZ2lzdHJhdGlvbi5cbiAgICpcbiAgICogTm90ZTogYSBzdGF0ZSB3aWxsIGJlIHF1ZXVlZCBpZiB0aGUgc3RhdGUncyBwYXJlbnQgaXNuJ3QgeWV0IHJlZ2lzdGVyZWQuXG4gICAqXG4gICAqIEBwYXJhbSBzdGF0ZURlZmluaXRpb24gdGhlIGRlZmluaXRpb24gb2YgdGhlIHN0YXRlIHRvIHJlZ2lzdGVyLlxuICAgKiBAcmV0dXJucyB0aGUgaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIG9iamVjdC5cbiAgICogICAgICAgICAgSWYgdGhlIHN0YXRlIHdhcyBzdWNjZXNzZnVsbHkgcmVnaXN0ZXJlZCwgdGhlbiB0aGUgb2JqZWN0IGlzIGZ1bGx5IGJ1aWx0IChTZWU6IFtbU3RhdGVCdWlsZGVyXV0pLlxuICAgKiAgICAgICAgICBJZiB0aGUgc3RhdGUgd2FzIG9ubHkgcXVldWVkLCB0aGVuIHRoZSBvYmplY3QgaXMgbm90IGZ1bGx5IGJ1aWx0LlxuICAgKi9cbiAgcmVnaXN0ZXIoc3RhdGVEZWZpbml0aW9uOiBfU3RhdGVEZWNsYXJhdGlvbik6IFN0YXRlT2JqZWN0IHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZVF1ZXVlLnJlZ2lzdGVyKHN0YXRlRGVmaW5pdGlvbik7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF9kZXJlZ2lzdGVyVHJlZShzdGF0ZTogU3RhdGVPYmplY3QpIHtcbiAgICBjb25zdCBhbGwgPSB0aGlzLmdldCgpLm1hcChzID0+IHMuJCRzdGF0ZSgpKTtcbiAgICBjb25zdCBnZXRDaGlsZHJlbiA9IChzdGF0ZXM6IFN0YXRlT2JqZWN0W10pID0+IHtcbiAgICAgIGNvbnN0IF9jaGlsZHJlbiA9IGFsbC5maWx0ZXIocyA9PiBzdGF0ZXMuaW5kZXhPZihzLnBhcmVudCkgIT09IC0xKTtcbiAgICAgIHJldHVybiBfY2hpbGRyZW4ubGVuZ3RoID09PSAwID8gX2NoaWxkcmVuIDogX2NoaWxkcmVuLmNvbmNhdChnZXRDaGlsZHJlbihfY2hpbGRyZW4pKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY2hpbGRyZW4gPSBnZXRDaGlsZHJlbihbc3RhdGVdKTtcbiAgICBjb25zdCBkZXJlZ2lzdGVyZWQ6IFN0YXRlT2JqZWN0W10gPSBbc3RhdGVdLmNvbmNhdChjaGlsZHJlbikucmV2ZXJzZSgpO1xuXG4gICAgZGVyZWdpc3RlcmVkLmZvckVhY2goX3N0YXRlID0+IHtcbiAgICAgIGNvbnN0IHJ1bGVzQXBpID0gdGhpcy5yb3V0ZXIudXJsU2VydmljZS5ydWxlcztcblxuICAgICAgLy8gUmVtb3ZlIFVSTCBydWxlXG4gICAgICBydWxlc0FwaVxuICAgICAgICAucnVsZXMoKVxuICAgICAgICAuZmlsdGVyKHByb3BFcSgnc3RhdGUnLCBfc3RhdGUpKVxuICAgICAgICAuZm9yRWFjaChydWxlID0+IHJ1bGVzQXBpLnJlbW92ZVJ1bGUocnVsZSkpO1xuXG4gICAgICAvLyBSZW1vdmUgc3RhdGUgZnJvbSByZWdpc3RyeVxuICAgICAgZGVsZXRlIHRoaXMuc3RhdGVzW19zdGF0ZS5uYW1lXTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZXJlZ2lzdGVyZWQ7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhIHN0YXRlIGZyb20gdGhlIHJlZ2lzdHJ5XG4gICAqXG4gICAqIFRoaXMgcmVtb3ZlcyBhIHN0YXRlIGZyb20gdGhlIHJlZ2lzdHJ5LlxuICAgKiBJZiB0aGUgc3RhdGUgaGFzIGNoaWxkcmVuLCB0aGV5IGFyZSBhcmUgYWxzbyByZW1vdmVkIGZyb20gdGhlIHJlZ2lzdHJ5LlxuICAgKlxuICAgKiBAcGFyYW0gc3RhdGVPck5hbWUgdGhlIHN0YXRlJ3MgbmFtZSBvciBvYmplY3QgcmVwcmVzZW50YXRpb25cbiAgICogQHJldHVybnMge1N0YXRlT2JqZWN0W119IGEgbGlzdCBvZiByZW1vdmVkIHN0YXRlc1xuICAgKi9cbiAgZGVyZWdpc3RlcihzdGF0ZU9yTmFtZTogU3RhdGVPck5hbWUpIHtcbiAgICBjb25zdCBfc3RhdGUgPSB0aGlzLmdldChzdGF0ZU9yTmFtZSk7XG4gICAgaWYgKCFfc3RhdGUpIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGRlcmVnaXN0ZXIgc3RhdGU7IG5vdCBmb3VuZDogXCIgKyBzdGF0ZU9yTmFtZSk7XG4gICAgY29uc3QgZGVyZWdpc3RlcmVkU3RhdGVzID0gdGhpcy5fZGVyZWdpc3RlclRyZWUoX3N0YXRlLiQkc3RhdGUoKSk7XG5cbiAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKCdkZXJlZ2lzdGVyZWQnLCBkZXJlZ2lzdGVyZWRTdGF0ZXMubWFwKHMgPT4gcy5zZWxmKSkpO1xuICAgIHJldHVybiBkZXJlZ2lzdGVyZWRTdGF0ZXM7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhbGwgcmVnaXN0ZXJlZCBzdGF0ZXNcbiAgICpcbiAgICogQ2FsbGluZyB0aGlzIG1ldGhvZCB3aXRoIG5vIGFyZ3VtZW50cyB3aWxsIHJldHVybiBhIGxpc3Qgb2YgYWxsIHRoZSBzdGF0ZXMgdGhhdCBhcmUgY3VycmVudGx5IHJlZ2lzdGVyZWQuXG4gICAqIE5vdGU6IHRoaXMgZG9lcyBub3QgcmV0dXJuIHN0YXRlcyB0aGF0IGFyZSAqcXVldWVkKiBidXQgbm90IHlldCByZWdpc3RlcmVkLlxuICAgKlxuICAgKiBAcmV0dXJuIGEgbGlzdCBvZiBbW1N0YXRlRGVjbGFyYXRpb25dXXNcbiAgICovXG4gIGdldCgpOiBTdGF0ZURlY2xhcmF0aW9uW107XG5cbiAgLyoqXG4gICAqIEdldHMgYSByZWdpc3RlcmVkIHN0YXRlXG4gICAqXG4gICAqIEdpdmVuIGEgc3RhdGUgb3IgYSBuYW1lLCBmaW5kcyBhbmQgcmV0dXJucyB0aGUgW1tTdGF0ZURlY2xhcmF0aW9uXV0gZnJvbSB0aGUgcmVnaXN0cnkuXG4gICAqIE5vdGU6IHRoaXMgZG9lcyBub3QgcmV0dXJuIHN0YXRlcyB0aGF0IGFyZSAqcXVldWVkKiBidXQgbm90IHlldCByZWdpc3RlcmVkLlxuICAgKlxuICAgKiBAcGFyYW0gc3RhdGVPck5hbWUgZWl0aGVyIHRoZSBuYW1lIG9mIGEgc3RhdGUsIG9yIGEgc3RhdGUgb2JqZWN0LlxuICAgKiBAcGFyYW0gYmFzZSB0aGUgYmFzZSBzdGF0ZSB0byB1c2Ugd2hlbiBzdGF0ZU9yTmFtZSBpcyByZWxhdGl2ZS5cbiAgICogQHJldHVybiBhIHJlZ2lzdGVyZWQgW1tTdGF0ZURlY2xhcmF0aW9uXV0gdGhhdCBtYXRjaGVkIHRoZSBgc3RhdGVPck5hbWVgLCBvciBudWxsIGlmIHRoZSBzdGF0ZSBpc24ndCByZWdpc3RlcmVkLlxuICAgKi9cbiAgZ2V0KHN0YXRlT3JOYW1lOiBTdGF0ZU9yTmFtZSwgYmFzZT86IFN0YXRlT3JOYW1lKTogU3RhdGVEZWNsYXJhdGlvbjtcbiAgZ2V0KHN0YXRlT3JOYW1lPzogU3RhdGVPck5hbWUsIGJhc2U/OiBTdGF0ZU9yTmFtZSk6IGFueSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiA8U3RhdGVEZWNsYXJhdGlvbltdPk9iamVjdC5rZXlzKHRoaXMuc3RhdGVzKS5tYXAobmFtZSA9PiB0aGlzLnN0YXRlc1tuYW1lXS5zZWxmKTtcbiAgICBjb25zdCBmb3VuZCA9IHRoaXMubWF0Y2hlci5maW5kKHN0YXRlT3JOYW1lLCBiYXNlKTtcbiAgICByZXR1cm4gKGZvdW5kICYmIGZvdW5kLnNlbGYpIHx8IG51bGw7XG4gIH1cblxuICBkZWNvcmF0b3IobmFtZTogc3RyaW5nLCBmdW5jOiBCdWlsZGVyRnVuY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy5idWlsZGVyLmJ1aWxkZXIobmFtZSwgZnVuYyk7XG4gIH1cbn1cbiIsIi8qKiBAcHVibGljYXBpIEBtb2R1bGUgdHJhbnNpdGlvbiAqLyAvKiogKi9cbmltcG9ydCB7IFN0YXRlRGVjbGFyYXRpb24gfSBmcm9tICcuLi9zdGF0ZS9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUHJlZGljYXRlQmluYXJ5IH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5cbmltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICcuL3RyYW5zaXRpb24nO1xuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZU9iamVjdCc7XG5pbXBvcnQgeyBQYXRoTm9kZSB9IGZyb20gJy4uL3BhdGgvcGF0aE5vZGUnO1xuaW1wb3J0IHsgVGFyZ2V0U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS90YXJnZXRTdGF0ZSc7XG5pbXBvcnQgeyBSZWdpc3RlcmVkSG9vayB9IGZyb20gJy4vaG9va1JlZ2lzdHJ5JztcblxuLyoqXG4gKiBUaGUgVHJhbnNpdGlvbk9wdGlvbnMgb2JqZWN0IGNhbiBiZSB1c2VkIHRvIGNoYW5nZSB0aGUgYmVoYXZpb3Igb2YgYSB0cmFuc2l0aW9uLlxuICpcbiAqIEl0IGlzIHBhc3NlZCBhcyB0aGUgdGhpcmQgYXJndW1lbnQgdG8gW1tTdGF0ZVNlcnZpY2UuZ29dXSwgW1tTdGF0ZVNlcnZpY2UudHJhbnNpdGlvblRvXV0uXG4gKiBJdCBjYW4gYWxzbyBiZSB1c2VkIHdpdGggYSBgdWlTcmVmYC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUcmFuc2l0aW9uT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBUaGlzIG9wdGlvbiBjaGFuZ2VzIGhvdyB0aGUgVHJhbnNpdGlvbiBpbnRlcmFjdHMgd2l0aCB0aGUgYnJvd3NlcidzIGxvY2F0aW9uIGJhciAoVVJMKS5cbiAgICpcbiAgICogLSBJZiBgdHJ1ZWAsIGl0IHdpbGwgdXBkYXRlIHRoZSB1cmwgaW4gdGhlIGxvY2F0aW9uIGJhci5cbiAgICogLSBJZiBgZmFsc2VgLCBpdCB3aWxsIG5vdCB1cGRhdGUgdGhlIHVybCBpbiB0aGUgbG9jYXRpb24gYmFyLlxuICAgKiAtIElmIGl0IGlzIHRoZSBzdHJpbmcgYFwicmVwbGFjZVwiYCwgaXQgd2lsbCB1cGRhdGUgdGhlIHVybCBhbmQgYWxzbyByZXBsYWNlIHRoZSBsYXN0IGhpc3RvcnkgcmVjb3JkLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgdHJ1ZWBcbiAgICovXG4gIGxvY2F0aW9uPzogYm9vbGVhbiB8IHN0cmluZztcblxuICAvKipcbiAgICogV2hlbiB0cmFuc2l0aW9uaW5nIHRvIHJlbGF0aXZlIHBhdGggKGUuZyAnYF5gJyksIHRoaXMgb3B0aW9uIGRlZmluZXMgd2hpY2ggc3RhdGUgdG8gYmUgcmVsYXRpdmUgZnJvbS5cbiAgICogQGRlZmF1bHQgYCRzdGF0ZS5jdXJyZW50YFxuICAgKi9cbiAgcmVsYXRpdmU/OiBzdHJpbmcgfCBTdGF0ZURlY2xhcmF0aW9uIHwgU3RhdGVPYmplY3Q7XG5cbiAgLyoqXG4gICAqIFRoaXMgb3B0aW9uIHNldHMgd2hldGhlciBvciBub3QgdGhlIHRyYW5zaXRpb24ncyBwYXJhbWV0ZXIgdmFsdWVzIHNob3VsZCBiZSBpbmhlcml0ZWQgZnJvbVxuICAgKiB0aGUgY3VycmVudCBwYXJhbWV0ZXIgdmFsdWVzLlxuICAgKlxuICAgKiAtIElmIGB0cnVlYCwgaXQgd2lsbCBpbmhlcml0IHBhcmFtZXRlciB2YWx1ZXMgZnJvbSB0aGUgY3VycmVudCBwYXJhbWV0ZXIgdmFsdWVzLlxuICAgKiAtIElmIGBmYWxzZWAsIG9ubHkgdGhlIHBhcmFtZXRlcnMgd2hpY2ggYXJlIHByb3ZpZGVkIHRvIGB0cmFuc2l0aW9uVG9gIHdpbGwgYmUgdXNlZC5cbiAgICpcbiAgICogQGRlZmF1bHQgYGZhbHNlYFxuICAgKi9cbiAgaW5oZXJpdD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICBub3RpZnk/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBUaGlzIG9wdGlvbiBtYXkgYmUgdXNlZCB0byBmb3JjZSBzdGF0ZXMgd2hpY2ggYXJlIGN1cnJlbnRseSBhY3RpdmUgdG8gcmVsb2FkLlxuICAgKlxuICAgKiBEdXJpbmcgYSBub3JtYWwgdHJhbnNpdGlvbiwgYSBzdGF0ZSBpcyBcInJldGFpbmVkXCIgaWY6XG4gICAqIC0gSXQgd2FzIHByZXZpb3VzbHkgYWN0aXZlXG4gICAqIC0gVGhlIHN0YXRlJ3MgcGFyYW1ldGVyIHZhbHVlcyBoYXZlIG5vdCBjaGFuZ2VkXG4gICAqIC0gQWxsIHRoZSBwYXJlbnQgc3RhdGVzJyBwYXJhbWV0ZXIgdmFsdWVzIGhhdmUgbm90IGNoYW5nZWRcbiAgICpcbiAgICogRm9yY2luZyBhIHJlbG9hZCBvZiBhIHN0YXRlIHdpbGwgY2F1c2UgaXQgdG8gYmUgZXhpdGVkIGFuZCBlbnRlcmVkLCB3aGljaCB3aWxsOlxuICAgKiAtIFJlZmV0Y2ggdGhhdCBzdGF0ZSdzIHJlc29sdmUgZGF0YVxuICAgKiAtIEV4aXQgdGhlIHN0YXRlIChvbkV4aXQgaG9vaylcbiAgICogLSBSZS1lbnRlciB0aGUgc3RhdGUgKG9uRW50ZXIgaG9vaylcbiAgICogLSBSZS1yZW5kZXIgdGhlIHZpZXdzIChjb250cm9sbGVycyBhbmQgdGVtcGxhdGVzKVxuICAgKlxuICAgKiAtIFdoZW4gYHRydWVgLCB0aGUgZGVzdGluYXRpb24gc3RhdGUgKGFuZCBhbGwgcGFyZW50IHN0YXRlcykgd2lsbCBiZSByZWxvYWRlZC5cbiAgICogLSBXaGVuIGl0IGlzIGEgc3RyaW5nIGFuZCBpcyB0aGUgbmFtZSBvZiBhIHN0YXRlLCBvciB3aGVuIGl0IGlzIGEgU3RhdGUgb2JqZWN0LFxuICAgKiAgIHRoYXQgc3RhdGUgYW5kIGFueSBjaGlsZHJlbiBzdGF0ZXMgd2lsbCBiZSByZWxvYWRlZC5cbiAgICpcbiAgICogQGRlZmF1bHQgYGZhbHNlYFxuICAgKi9cbiAgcmVsb2FkPzogYm9vbGVhbiB8IHN0cmluZyB8IFN0YXRlRGVjbGFyYXRpb24gfCBTdGF0ZU9iamVjdDtcbiAgLyoqXG4gICAqIFlvdSBjYW4gZGVmaW5lIHlvdXIgb3duIFRyYW5zaXRpb24gT3B0aW9ucyBpbnNpZGUgdGhpcyBwcm9wZXJ0eSBhbmQgdXNlIHRoZW0sIGUuZy4sIGZyb20gYSBUcmFuc2l0aW9uIEhvb2tcbiAgICovXG4gIGN1c3RvbT86IGFueTtcbiAgLyoqXG4gICAqIFRoaXMgb3B0aW9uIG1heSBiZSB1c2VkIHRvIGNhbmNlbCB0aGUgYWN0aXZlIHRyYW5zaXRpb24gKGlmIG9uZSBpcyBhY3RpdmUpIGluIGZhdm91ciBvZiB0aGUgdGhpcyBvbmUuXG4gICAqIFRoaXMgaXMgdGhlIGRlZmF1bHQgYmVoYXZpb3VyIG9yIHVpLXJvdXRlci5cbiAgICpcbiAgICpcbiAgICogLSBXaGVuIGB0cnVlYCwgdGhlIGFjdGl2ZSB0cmFuc2l0aW9uIHdpbGwgYmUgY2FuY2VsZWQgYW5kIG5ldyB0cmFuc2l0aW9uIHdpbGwgYmVnaW4uXG4gICAqIC0gd2hlbiBgZmFsc2VgLCB0aGUgdHJhbnNpdGlvbiB3aWxsIGJlIGNhbmNlbGVkIGlmIGEgdHJhbnNpdGlvbiBpcyBhbHJlYWR5IHJ1bm5pbmcuIFRoaXMgY2FuIGJlIHVzZWZ1bCBpbiBjYXNlcyB3aGVyZVxuICAgKiB5b3Ugb25seSB3YW50IHRvIG5hdmlnYXRlIHRvIGEgZGlmZmVyZW50IHN0YXRlIGlmIHlvdSBhcmUgbm90IGFscmVhZHkgbmF2aWdhdGluZyBzb21ld2hlcmUuXG4gICAqXG4gICAqIEBkZWZhdWx0IGB0cnVlYFxuICAgKi9cbiAgc3VwZXJjZWRlPzogYm9vbGVhbjtcbiAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICByZWxvYWRTdGF0ZT86IFN0YXRlT2JqZWN0O1xuICAvKiogQGludGVybmFsYXBpXG4gICAqIElmIHRoaXMgdHJhbnNpdGlvbiBpcyBhIHJlZGlyZWN0LCB0aGlzIHByb3BlcnR5IHNob3VsZCBiZSB0aGUgb3JpZ2luYWwgVHJhbnNpdGlvbiAod2hpY2ggd2FzIHJlZGlyZWN0ZWQgdG8gdGhpcyBvbmUpXG4gICAqL1xuICByZWRpcmVjdGVkRnJvbT86IFRyYW5zaXRpb247XG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgY3VycmVudD86ICgpID0+IFRyYW5zaXRpb247XG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgc291cmNlPzogJ3NyZWYnIHwgJ3VybCcgfCAncmVkaXJlY3QnIHwgJ290aGVyd2lzZScgfCAndW5rbm93bic7XG59XG5cbi8qKiBAaW50ZXJuYWxhcGkgKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNpdGlvbkhvb2tPcHRpb25zIHtcbiAgY3VycmVudD86ICgpID0+IFRyYW5zaXRpb247IC8vIHBhdGg/XG4gIHRyYW5zaXRpb24/OiBUcmFuc2l0aW9uO1xuICBob29rVHlwZT86IHN0cmluZztcbiAgdGFyZ2V0PzogYW55O1xuICB0cmFjZURhdGE/OiBhbnk7XG4gIGJpbmQ/OiBhbnk7XG4gIHN0YXRlSG9vaz86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVHJlZUNoYW5nZXMgZW5jYXBzdWxhdGVzIHRoZSB2YXJpb3VzIFBhdGhzIHRoYXQgYXJlIGludm9sdmVkIGluIGEgVHJhbnNpdGlvbi5cbiAqXG4gKiBHZXQgYSBUcmVlQ2hhbmdlcyBvYmplY3QgdXNpbmcgW1tUcmFuc2l0aW9uLnRyZWVDaGFuZ2VzXV1cbiAqXG4gKiBBIFVJLVJvdXRlciBUcmFuc2l0aW9uIGlzIGZyb20gb25lIFBhdGggaW4gYSBTdGF0ZSBUcmVlIHRvIGFub3RoZXIgUGF0aC4gIEZvciBhIGdpdmVuIFRyYW5zaXRpb24sXG4gKiB0aGlzIG9iamVjdCBzdG9yZXMgdGhlIFwidG9cIiBhbmQgXCJmcm9tXCIgcGF0aHMsIGFzIHdlbGwgYXMgc3Vic2V0cyBvZiB0aG9zZTogdGhlIFwicmV0YWluZWRcIixcbiAqIFwiZXhpdGluZ1wiIGFuZCBcImVudGVyaW5nXCIgcGF0aHMuXG4gKlxuICogRWFjaCBwYXRoIGluIFRyZWVDaGFuZ2VzIGlzIGFuIGFycmF5IG9mIFtbUGF0aE5vZGVdXSBvYmplY3RzLiBFYWNoIFBhdGhOb2RlIGluIHRoZSBhcnJheSBjb3JyZXNwb25kcyB0byBhIHBvcnRpb25cbiAqIG9mIGEgbmVzdGVkIHN0YXRlLlxuICpcbiAqIEZvciBleGFtcGxlLCBpZiB5b3UgaGFkIGEgbmVzdGVkIHN0YXRlIG5hbWVkIGBmb28uYmFyLmJhemAsIGl0IHdvdWxkIGhhdmUgdGhyZWVcbiAqIHBvcnRpb25zLCBgZm9vLCBiYXIsIGJhemAuICBJZiB5b3UgdHJhbnNpdGlvbmVkICoqdG8qKiBgZm9vLmJhci5iYXpgIGFuZCBpbnNwZWN0ZWQgdGhlIFtbVHJlZUNoYW5nZXMudG9dXVxuICogUGF0aCwgeW91IHdvdWxkIGZpbmQgYSBub2RlIGluIHRoZSBhcnJheSBmb3IgZWFjaCBwb3J0aW9uOiBgZm9vYCwgYGJhcmAsIGFuZCBgYmF6YC5cbiAqXG4gKiAtLS1cbiAqXG4gKiBAdG9kbyBzaG93IHZpc3VhbCBzdGF0ZSB0cmVlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJlZUNoYW5nZXMge1xuICAvKiogQG5vZG9jICovXG4gIFtrZXk6IHN0cmluZ106IFBhdGhOb2RlW10gfCB1bmRlZmluZWQ7XG5cbiAgLyoqIFRoZSBwYXRoIG9mIG5vZGVzIGluIHRoZSBzdGF0ZSB0cmVlIHRoYXQgdGhlIHRyYW5zaXRpb24gaXMgY29taW5nICpmcm9tKiAqL1xuICBmcm9tOiBQYXRoTm9kZVtdO1xuXG4gIC8qKiBUaGUgcGF0aCBvZiBub2RlcyBpbiB0aGUgc3RhdGUgdHJlZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGdvaW5nICp0byogKi9cbiAgdG86IFBhdGhOb2RlW107XG5cbiAgLyoqXG4gICAqIFRoZSBwYXRoIG9mIGFjdGl2ZSBub2RlcyB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIHJldGFpbmluZy5cbiAgICpcbiAgICogVGhlc2Ugbm9kZXMgYXJlIG5laXRoZXIgZXhpdGVkLCBub3IgZW50ZXJlZC5cbiAgICogQmVmb3JlIGFuZCBhZnRlciB0aGUgdHJhbnNpdGlvbiBpcyBzdWNjZXNzZnVsLCB0aGVzZSBub2RlcyBhcmUgYWN0aXZlLlxuICAgKi9cbiAgcmV0YWluZWQ6IFBhdGhOb2RlW107XG5cbiAgLyoqXG4gICAqIFRoZSBwYXRoIG9mIGFjdGl2ZSBub2RlcyB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIHJldGFpbmluZyB3aXRoIHVwZGF0ZWQgXCJ0byBwYXJhbXNcIiBhcHBsaWVkLlxuICAgKlxuICAgKiBUaGVzZSBub2RlcyBhcmUgbmVpdGhlciBleGl0ZWQsIG5vciBlbnRlcmVkLlxuICAgKiBCZWZvcmUgYW5kIGFmdGVyIHRoZSB0cmFuc2l0aW9uIGlzIHN1Y2Nlc3NmdWwsIHRoZXNlIG5vZGVzIGFyZSBhY3RpdmUuXG4gICAqXG4gICAqIFRoaXMgaXMgYSBzaGFsbG93IGNvcHkgb2YgW1tyZXRhaW5lZF1dLCBidXQgd2l0aCBuZXcgKGR5bmFtaWMpIHBhcmFtZXRlciB2YWx1ZXMgZnJvbSBbW3RvXV0gYXBwbGllZC5cbiAgICovXG4gIHJldGFpbmVkV2l0aFRvUGFyYW1zOiBQYXRoTm9kZVtdO1xuXG4gIC8qKlxuICAgKiBUaGUgcGF0aCBvZiBwcmV2aW91c2x5IGFjdGl2ZSBub2RlcyB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGV4aXRpbmcuXG4gICAqXG4gICAqIEFmdGVyIHRoZSBUcmFuc2l0aW9uIGlzIHN1Y2Nlc3NmdWwsIHRoZXNlIG5vZGVzIGFyZSBubyBsb25nZXIgYWN0aXZlLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgYSBzdGF0ZSB0aGF0IGlzIGJlaW5nIHJlbG9hZGVkIChkdWUgdG8gcGFyYW1ldGVyIHZhbHVlcyBjaGFuZ2luZywgb3IgYHJlbG9hZDogdHJ1ZWApIG1heSBiZSBpbiBib3RoIHRoZVxuICAgKiBgZXhpdGluZ2AgYW5kIGBlbnRlcmluZ2AgcGF0aHMuXG4gICAqL1xuICBleGl0aW5nOiBQYXRoTm9kZVtdO1xuXG4gIC8qKlxuICAgKiBUaGUgcGF0aCBvZiBub2RlcyB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGVudGVyaW5nLlxuICAgKlxuICAgKiBBZnRlciB0aGUgVHJhbnNpdGlvbiBpcyBzdWNjZXNzZnVsLCB0aGVzZSBub2RlcyB3aWxsIGJlIGFjdGl2ZS5cbiAgICogQmVjYXVzZSB0aGV5IGFyZSBlbnRlcmluZywgdGhleSBoYXZlIHRoZWlyIHJlc29sdmVzIGZldGNoZWQsIGBvbkVudGVyYCBob29rcyBydW4sIGFuZCB0aGVpciB2aWV3c1xuICAgKiAoY29tcG9uZW50KHMpIG9yIGNvbnRyb2xsZXIocykrdGVtcGxhdGUocykpIHJlZnJlc2hlZC5cbiAgICpcbiAgICogTm90ZSB0aGF0IGEgc3RhdGUgdGhhdCBpcyByZWxvYWRlZCAoZHVlIHRvIHBhcmFtZXRlciB2YWx1ZXMgY2hhbmdpbmcsIG9yIGByZWxvYWQ6IHRydWVgKSBtYXkgYmUgaW4gYm90aCB0aGVcbiAgICogYGV4aXRpbmdgIGFuZCBgZW50ZXJpbmdgIHBhdGhzLlxuICAgKi9cbiAgZW50ZXJpbmc6IFBhdGhOb2RlW107XG59XG5cbmV4cG9ydCB0eXBlIElIb29rUmVnaXN0cmF0aW9uID0gKFxuICBtYXRjaENyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSxcbiAgY2FsbGJhY2s6IEhvb2tGbixcbiAgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zXG4pID0+IEZ1bmN0aW9uO1xuXG4vKipcbiAqIFRoZSBzaWduYXR1cmUgZm9yIFRyYW5zaXRpb24gSG9va3MuXG4gKlxuICogVHJhbnNpdGlvbiBob29rcyBhcmUgY2FsbGJhY2sgZnVuY3Rpb25zIHRoYXQgaG9vayBpbnRvIHRoZSBsaWZlY3ljbGUgb2YgdHJhbnNpdGlvbnMuXG4gKiBBcyBhIHRyYW5zaXRpb24gcnVucywgaXQgcmVhY2hlcyBjZXJ0YWluIGxpZmVjeWNsZSBldmVudHMuXG4gKiBBcyBlYWNoIGV2ZW50IG9jY3VycywgdGhlIGhvb2tzIHdoaWNoIGFyZSByZWdpc3RlcmVkIGZvciB0aGUgZXZlbnQgYXJlIGNhbGxlZCAoaW4gcHJpb3JpdHkgb3JkZXIpLlxuICpcbiAqIEEgdHJhbnNpdGlvbiBob29rIG1heSBhbHRlciBhIFRyYW5zaXRpb24gYnkgcmV0dXJuaW5nIGEgW1tIb29rUmVzdWx0XV0uXG4gKlxuICogIyMjIyBTZWU6XG4gKlxuICogLSBbW0lIb29rUmVnaXN0cnkub25CZWZvcmVdXVxuICogLSBbW0lIb29rUmVnaXN0cnkub25TdGFydF1dXG4gKiAtIFtbSUhvb2tSZWdpc3RyeS5vbkZpbmlzaF1dXG4gKiAtIFtbSUhvb2tSZWdpc3RyeS5vblN1Y2Nlc3NdXVxuICogLSBbW0lIb29rUmVnaXN0cnkub25FcnJvcl1dXG4gKlxuICogQHBhcmFtIHRyYW5zaXRpb24gdGhlIGN1cnJlbnQgW1tUcmFuc2l0aW9uXV1cbiAqIEBwYXJhbSBpbmplY3RvciAoZm9yIG5nMSBvciBuZzIgb25seSkgdGhlIGluamVjdG9yIHNlcnZpY2VcbiAqXG4gKiBAcmV0dXJucyBhIFtbSG9va1Jlc3VsdF1dIHdoaWNoIG1heSBhbHRlciB0aGUgdHJhbnNpdGlvblxuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUcmFuc2l0aW9uSG9va0ZuIHtcbiAgKHRyYW5zaXRpb246IFRyYW5zaXRpb24pOiBIb29rUmVzdWx0O1xufVxuXG4vKipcbiAqIFRoZSBzaWduYXR1cmUgZm9yIFRyYW5zaXRpb24gU3RhdGUgSG9va3MuXG4gKlxuICogQSBmdW5jdGlvbiB3aGljaCBob29rcyBpbnRvIGEgbGlmZWN5Y2xlIGV2ZW50IGZvciBhIHNwZWNpZmljIHN0YXRlLlxuICpcbiAqIFRyYW5zaXRpb24gU3RhdGUgSG9va3MgYXJlIGNhbGxiYWNrIGZ1bmN0aW9ucyB0aGF0IGhvb2sgaW50byB0aGUgbGlmZWN5Y2xlIGV2ZW50cyBvZiBzcGVjaWZpYyBzdGF0ZXMgZHVyaW5nIGEgdHJhbnNpdGlvbi5cbiAqIEFzIGEgdHJhbnNpdGlvbiBydW5zLCBpdCBtYXkgZXhpdCBzb21lIHN0YXRlcywgcmV0YWluIChrZWVwKSBzdGF0ZXMsIGFuZCBlbnRlciBzdGF0ZXMuXG4gKiBBcyBlYWNoIGxpZmVjeWNsZSBldmVudCBvY2N1cnMsIHRoZSBob29rcyB3aGljaCBhcmUgcmVnaXN0ZXJlZCBmb3IgdGhlIGV2ZW50IGFuZCB0aGF0IHN0YXRlIGFyZSBjYWxsZWQgKGluIHByaW9yaXR5IG9yZGVyKS5cbiAqXG4gKiAjIyMjIFNlZTpcbiAqXG4gKiAtIFtbSUhvb2tSZWdpc3RyeS5vbkV4aXRdXVxuICogLSBbW0lIb29rUmVnaXN0cnkub25SZXRhaW5dXVxuICogLSBbW0lIb29rUmVnaXN0cnkub25FbnRlcl1dXG4gKlxuICogQHBhcmFtIHRyYW5zaXRpb24gdGhlIGN1cnJlbnQgW1tUcmFuc2l0aW9uXV1cbiAqIEBwYXJhbSBzdGF0ZSB0aGUgW1tTdGF0ZU9iamVjdF1dIHRoYXQgdGhlIGhvb2sgaXMgYm91bmQgdG9cbiAqIEBwYXJhbSBpbmplY3RvciAoZm9yIG5nMSBvciBuZzIgb25seSkgdGhlIGluamVjdG9yIHNlcnZpY2VcbiAqXG4gKiBAcmV0dXJucyBhIFtbSG9va1Jlc3VsdF1dIHdoaWNoIG1heSBhbHRlciB0aGUgdHJhbnNpdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zaXRpb25TdGF0ZUhvb2tGbiB7XG4gICh0cmFuc2l0aW9uOiBUcmFuc2l0aW9uLCBzdGF0ZTogU3RhdGVEZWNsYXJhdGlvbik6IEhvb2tSZXN1bHQ7XG59XG5cbi8qKlxuICogVGhlIHNpZ25hdHVyZSBmb3IgVHJhbnNpdGlvbiBvbkNyZWF0ZSBIb29rcy5cbiAqXG4gKiBUcmFuc2l0aW9uIG9uQ3JlYXRlIEhvb2tzIGFyZSBjYWxsYmFja3MgdGhhdCBhbGxvdyBjdXN0b21pemF0aW9uIG9yIHByZXByb2Nlc3Npbmcgb2ZcbiAqIGEgVHJhbnNpdGlvbiBiZWZvcmUgaXQgaXMgcmV0dXJuZWQgZnJvbSBbW1RyYW5zaXRpb25TZXJ2aWNlLmNyZWF0ZV1dXG4gKlxuICogQHBhcmFtIHRyYW5zaXRpb24gdGhlIFtbVHJhbnNpdGlvbl1dIHRoYXQgd2FzIGp1c3QgY3JlYXRlZFxuICogQHJldHVybiBhIFtbVHJhbnNpdGlvbl1dIHdoaWNoIHdpbGwgdGhlbiBiZSByZXR1cm5lZCBmcm9tIFtbVHJhbnNpdGlvblNlcnZpY2UuY3JlYXRlXV1cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUcmFuc2l0aW9uQ3JlYXRlSG9va0ZuIHtcbiAgKHRyYW5zaXRpb246IFRyYW5zaXRpb24pOiB2b2lkO1xufVxuXG5leHBvcnQgdHlwZSBIb29rRm4gPSBUcmFuc2l0aW9uSG9va0ZuIHwgVHJhbnNpdGlvblN0YXRlSG9va0ZuIHwgVHJhbnNpdGlvbkNyZWF0ZUhvb2tGbjtcblxuLyoqXG4gKiBUaGUgcmV0dXJuIHZhbHVlIG9mIGEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gb3IgW1tUcmFuc2l0aW9uU3RhdGVIb29rRm5dXVxuICpcbiAqIFdoZW4gcmV0dXJuZWQgZnJvbSBhIFtbVHJhbnNpdGlvbkhvb2tGbl1dIG9yIFtbVHJhbnNpdGlvblN0YXRlSG9va0ZuXV0sIHRoZXNlIHZhbHVlcyBhbHRlciB0aGUgcnVubmluZyBbW1RyYW5zaXRpb25dXTpcbiAqXG4gKiAtIGBmYWxzZWA6IHRoZSB0cmFuc2l0aW9uIHdpbGwgYmUgY2FuY2VsbGVkLlxuICogLSBbW1RhcmdldFN0YXRlXV06IHRoZSB0cmFuc2l0aW9uIHdpbGwgYmUgcmVkaXJlY3RlZCB0byB0aGUgbmV3IHRhcmdldCBzdGF0ZSAoc2VlOiBbW1N0YXRlU2VydmljZS50YXJnZXRdXSlcbiAqIC0gYFByb21pc2VgOiB0aGUgdHJhbnNpdGlvbiB3aWxsIHdhaXQgZm9yIHRoZSBwcm9taXNlIHRvIHJlc29sdmUgb3IgcmVqZWN0XG4gKiAgICAtIElmIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIChvciByZXNvbHZlcyB0byBgZmFsc2VgKSwgdGhlIHRyYW5zaXRpb24gd2lsbCBiZSBjYW5jZWxsZWRcbiAqICAgIC0gSWYgdGhlIHByb21pc2UgcmVzb2x2ZXMgdG8gYSBbW1RhcmdldFN0YXRlXV0sIHRoZSB0cmFuc2l0aW9uIHdpbGwgYmUgcmVkaXJlY3RlZFxuICogICAgLSBJZiB0aGUgcHJvbWlzZSByZXNvbHZlcyB0byBhbnl0aGluZyBlbHNlLCB0aGUgdHJhbnNpdGlvbiB3aWxsIHJlc3VtZVxuICogLSBBbnl0aGluZyBlbHNlOiB0aGUgdHJhbnNpdGlvbiB3aWxsIHJlc3VtZVxuICovXG5leHBvcnQgdHlwZSBIb29rUmVzdWx0ID0gYm9vbGVhbiB8IFRhcmdldFN0YXRlIHwgdm9pZCB8IFByb21pc2U8Ym9vbGVhbiB8IFRhcmdldFN0YXRlIHwgdm9pZD47XG5cbi8qKlxuICogVGhlc2Ugb3B0aW9ucyBtYXkgYmUgcHJvdmlkZWQgd2hlbiByZWdpc3RlcmluZyBhIFRyYW5zaXRpb24gSG9vayAoc3VjaCBhcyBgb25TdGFydGApXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSG9va1JlZ09wdGlvbnMge1xuICAvKipcbiAgICogU2V0cyB0aGUgcHJpb3JpdHkgb2YgdGhlIHJlZ2lzdGVyZWQgaG9va1xuICAgKlxuICAgKiBIb29rcyBvZiB0aGUgc2FtZSB0eXBlIChvbkJlZm9yZSwgb25TdGFydCwgZXRjKSBhcmUgaW52b2tlZCBpbiBwcmlvcml0eSBvcmRlci4gIEEgaG9vayB3aXRoIGEgaGlnaGVyIHByaW9yaXR5XG4gICAqIGlzIGludm9rZWQgYmVmb3JlIGEgaG9vayB3aXRoIGEgbG93ZXIgcHJpb3JpdHkuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IGhvb2sgcHJpb3JpdHkgaXMgMFxuICAgKi9cbiAgcHJpb3JpdHk/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFNwZWNpZmllcyB3aGF0IGB0aGlzYCBpcyBib3VuZCB0byBkdXJpbmcgaG9vayBpbnZvY2F0aW9uLlxuICAgKi9cbiAgYmluZD86IGFueTtcblxuICAvKipcbiAgICogTGltaXRzIHRoZSBudW1iZXIgb2YgdGltZXMgdGhhdCB0aGUgaG9vayB3aWxsIGJlIGludm9rZWQuXG4gICAqIE9uY2UgdGhlIGhvb2sgaGFzIGJlZW4gaW52b2tlZCB0aGlzIG1hbnkgdGltZXMsIGl0IGlzIGF1dG9tYXRpY2FsbHkgZGVyZWdpc3RlcmVkLlxuICAgKi9cbiAgaW52b2tlTGltaXQ/OiBudW1iZXI7XG59XG5cbi8qKlxuICogVGhpcyBpbnRlcmZhY2Ugc3BlY2lmaWVzIHRoZSBhcGkgZm9yIHJlZ2lzdGVyaW5nIFRyYW5zaXRpb24gSG9va3MuICBCb3RoIHRoZVxuICogW1tUcmFuc2l0aW9uU2VydmljZV1dIGFuZCBhbHNvIHRoZSBbW1RyYW5zaXRpb25dXSBvYmplY3QgaXRzZWxmIGltcGxlbWVudCB0aGlzIGludGVyZmFjZS5cbiAqIE5vdGU6IHRoZSBUcmFuc2l0aW9uIG9iamVjdCBvbmx5IGFsbG93cyBob29rcyB0byBiZSByZWdpc3RlcmVkIGJlZm9yZSB0aGUgVHJhbnNpdGlvbiBpcyBzdGFydGVkLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElIb29rUmVnaXN0cnkge1xuICAvKiogQGhpZGRlbiBwbGFjZSB0byBzdG9yZSB0aGUgaG9va3MgKi9cbiAgX3JlZ2lzdGVyZWRIb29rczogeyBba2V5OiBzdHJpbmddOiBSZWdpc3RlcmVkSG9va1tdIH07XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIFtbVHJhbnNpdGlvbkhvb2tGbl1dLCBjYWxsZWQgKmJlZm9yZSBhIHRyYW5zaXRpb24gc3RhcnRzKi5cbiAgICpcbiAgICogUmVnaXN0ZXJzIGEgdHJhbnNpdGlvbiBsaWZlY3ljbGUgaG9vaywgd2hpY2ggaXMgaW52b2tlZCBiZWZvcmUgYSB0cmFuc2l0aW9uIGV2ZW4gYmVnaW5zLlxuICAgKiBUaGlzIGhvb2sgY2FuIGJlIHVzZWZ1bCB0byBpbXBsZW1lbnQgbG9naWMgd2hpY2ggcHJldmVudHMgYSB0cmFuc2l0aW9uIGZyb20gZXZlbiBzdGFydGluZywgc3VjaFxuICAgKiBhcyBhdXRoZW50aWNhdGlvbiwgcmVkaXJlY3Rpb25cbiAgICpcbiAgICogU2VlIFtbVHJhbnNpdGlvbkhvb2tGbl1dIGZvciB0aGUgc2lnbmF0dXJlIG9mIHRoZSBmdW5jdGlvbi5cbiAgICpcbiAgICogVGhlIFtbSG9va01hdGNoQ3JpdGVyaWFdXSBpcyB1c2VkIHRvIGRldGVybWluZSB3aGljaCBUcmFuc2l0aW9ucyB0aGUgaG9vayBzaG91bGQgYmUgaW52b2tlZCBmb3IuXG4gICAqIFRvIG1hdGNoIGFsbCBUcmFuc2l0aW9ucywgdXNlIGFuIGVtcHR5IGNyaXRlcmlhIG9iamVjdCBge31gLlxuICAgKlxuICAgKiAjIyMgTGlmZWN5Y2xlXG4gICAqXG4gICAqIGBvbkJlZm9yZWAgaG9va3MgYXJlIGludm9rZWQgKmJlZm9yZSBhIFRyYW5zaXRpb24gc3RhcnRzKi5cbiAgICogTm8gcmVzb2x2ZXMgaGF2ZSBiZWVuIGZldGNoZWQgeWV0LlxuICAgKiBFYWNoIGBvbkJlZm9yZWAgaG9vayBpcyBpbnZva2VkIHN5bmNocm9ub3VzbHksIGluIHRoZSBzYW1lIGNhbGwgc3RhY2sgYXMgW1tTdGF0ZVNlcnZpY2UudHJhbnNpdGlvblRvXV0uXG4gICAqIFRoZSByZWdpc3RlcmVkIGBvbkJlZm9yZWAgaG9va3MgYXJlIGludm9rZWQgaW4gcHJpb3JpdHkgb3JkZXIuXG4gICAqXG4gICAqIE5vdGU6IGR1cmluZyB0aGUgYG9uQmVmb3JlYCBwaGFzZSwgYWRkaXRpb25hbCBob29rcyBjYW4gYmUgYWRkZWQgdG8gdGhlIHNwZWNpZmljIFtbVHJhbnNpdGlvbl1dIGluc3RhbmNlLlxuICAgKiBUaGVzZSBcIm9uLXRoZS1mbHlcIiBob29rcyBvbmx5IGFmZmVjdCB0aGUgY3VycmVudGx5IHJ1bm5pbmcgdHJhbnNpdGlvbi4uXG4gICAqXG4gICAqICMjIyBSZXR1cm4gdmFsdWVcbiAgICpcbiAgICogVGhlIGhvb2sncyByZXR1cm4gdmFsdWUgY2FuIGJlIHVzZWQgdG8gcGF1c2UsIGNhbmNlbCwgb3IgcmVkaXJlY3QgdGhlIGN1cnJlbnQgVHJhbnNpdGlvbi5cbiAgICogU2VlIFtbSG9va1Jlc3VsdF1dIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgKlxuICAgKiBJZiBhbnkgaG9vayBtb2RpZmllcyB0aGUgdHJhbnNpdGlvbiAqc3luY2hyb25vdXNseSogKGJ5IHRocm93aW5nLCByZXR1cm5pbmcgYGZhbHNlYCwgb3IgcmV0dXJuaW5nXG4gICAqIGEgW1tUYXJnZXRTdGF0ZV1dKSwgdGhlIHJlbWFpbmRlciBvZiB0aGUgaG9va3MgYXJlIHNraXBwZWQuXG4gICAqIElmIGEgaG9vayByZXR1cm5zIGEgcHJvbWlzZSwgdGhlIHJlbWFpbmRlciBvZiB0aGUgYG9uQmVmb3JlYCBob29rcyBhcmUgc3RpbGwgaW52b2tlZCBzeW5jaHJvbm91c2x5LlxuICAgKiBBbGwgcHJvbWlzZXMgYXJlIHJlc29sdmVkLCBhbmQgcHJvY2Vzc2VkIGFzeW5jaHJvbm91c2x5IGJlZm9yZSB0aGUgYG9uU3RhcnRgIHBoYXNlIG9mIHRoZSBUcmFuc2l0aW9uLlxuICAgKlxuICAgKiAjIyMgRXhhbXBsZXNcbiAgICpcbiAgICogIyMjIyBEZWZhdWx0IFN1YnN0YXRlXG4gICAqXG4gICAqIFRoaXMgZXhhbXBsZSByZWRpcmVjdHMgYW55IHRyYW5zaXRpb24gZnJvbSAnaG9tZScgdG8gJ2hvbWUuZGFzaGJvYXJkJy4gIFRoaXMgaXMgY29tbW9ubHkgcmVmZXJyZWQgdG8gYXMgYVxuICAgKiBcImRlZmF1bHQgc3Vic3RhdGVcIi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICogLy8gbmcyXG4gICAqIHRyYW5zaXRpb25TZXJ2aWNlLm9uQmVmb3JlKHsgdG86ICdob21lJyB9LCAodHJhbnM6IFRyYW5zaXRpb24pID0+XG4gICAqICAgICB0cmFucy5yb3V0ZXIuc3RhdGVTZXJ2aWNlLnRhcmdldChcImhvbWUuZGFzaGJvYXJkXCIpKTtcbiAgICogYGBgXG4gICAqXG4gICAqICMjIyMgRGF0YSBEcml2ZW4gRGVmYXVsdCBTdWJzdGF0ZVxuICAgKlxuICAgKiBUaGlzIGV4YW1wbGUgcHJvdmlkZXMgZGF0YS1kcml2ZW4gZGVmYXVsdCBzdWJzdGF0ZSBmdW5jdGlvbmFsaXR5LiBJdCBtYXRjaGVzIG9uIGEgdHJhbnNpdGlvbiB0byBhbnkgc3RhdGVcbiAgICogd2hpY2ggaGFzIGBkZWZhdWx0U3Vic3RhdGU6IFwic29tZS5zdWIuc3RhdGVcImAgZGVmaW5lZC4gIFNlZTogW1tUcmFuc2l0aW9uLnRvXV0gd2hpY2ggcmV0dXJucyB0aGUgXCJ0byBzdGF0ZVwiXG4gICAqIGRlZmluaXRpb24uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIC8vIG5nMVxuICAgKiAvLyBzdGF0ZSBkZWNsYXJhdGlvblxuICAgKiB7XG4gICAqICAgbmFtZTogJ2hvbWUnLFxuICAgKiAgIHRlbXBsYXRlOiAnPGRpdiB1aS12aWV3Lz4nLFxuICAgKiAgIGRlZmF1bHRTdWJzdGF0ZTogJ2hvbWUuZGFzaGJvYXJkJ1xuICAgKiB9XG4gICAqXG4gICAqIHZhciBjcml0ZXJpYSA9IHtcbiAgICogICB0bzogZnVuY3Rpb24oc3RhdGUpIHtcbiAgICogICAgIHJldHVybiBzdGF0ZS5kZWZhdWx0U3Vic3RhdGUgIT0gbnVsbDtcbiAgICogICB9XG4gICAqIH1cbiAgICpcbiAgICogJHRyYW5zaXRpb25zLm9uQmVmb3JlKGNyaXRlcmlhLCBmdW5jdGlvbih0cmFuczogVHJhbnNpdGlvbikge1xuICAgKiAgIHZhciBzdWJzdGF0ZSA9IHRyYW5zLnRvKCkuZGVmYXVsdFN1YnN0YXRlO1xuICAgKiAgIHJldHVybiB0cmFucy5yb3V0ZXIuc3RhdGVTZXJ2aWNlLnRhcmdldChzdWJzdGF0ZSk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICpcbiAgICogIyMjIyBSZXF1aXJlIGF1dGhlbnRpY2F0aW9uXG4gICAqXG4gICAqIFRoaXMgZXhhbXBsZSBjYW5jZWxzIGEgdHJhbnNpdGlvbiB0byBhIHN0YXRlIHdoaWNoIHJlcXVpcmVzIGF1dGhlbnRpY2F0aW9uLCBpZiB0aGUgdXNlciBpcyBub3QgY3VycmVudGx5IGF1dGhlbnRpY2F0ZWQuXG4gICAqXG4gICAqIFRoaXMgZXhhbXBsZSBhc3N1bWVzIGEgc3RhdGUgdHJlZSB3aGVyZSBhbGwgc3RhdGVzIHdoaWNoIHJlcXVpcmUgYXV0aGVudGljYXRpb24gYXJlIGNoaWxkcmVuIG9mIGEgcGFyZW50IGAncmVxdWlyZWF1dGgnYCBzdGF0ZS5cbiAgICogVGhpcyBleGFtcGxlIGFzc3VtZXMgYE15QXV0aFNlcnZpY2VgIHN5bmNocm9ub3VzbHkgcmV0dXJucyBhIGJvb2xlYW4gZnJvbSBgaXNBdXRoZW50aWNhdGVkKClgLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIC8vIG5nMVxuICAgKiAkdHJhbnNpdGlvbnMub25CZWZvcmUoIHsgdG86ICdyZXF1aXJlYXV0aC4qKicgfSwgZnVuY3Rpb24odHJhbnMpIHtcbiAgICogICB2YXIgbXlBdXRoU2VydmljZSA9IHRyYW5zLmluamVjdG9yKCkuZ2V0KCdNeUF1dGhTZXJ2aWNlJyk7XG4gICAqICAgLy8gSWYgaXNBdXRoZW50aWNhdGVkIHJldHVybnMgZmFsc2UsIHRoZSB0cmFuc2l0aW9uIGlzIGNhbmNlbGxlZC5cbiAgICogICByZXR1cm4gbXlBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gbWF0Y2hDcml0ZXJpYSBkZWZpbmVzIHdoaWNoIFRyYW5zaXRpb25zIHRoZSBIb29rIHNob3VsZCBiZSBpbnZva2VkIGZvci5cbiAgICogQHBhcmFtIGNhbGxiYWNrIHRoZSBob29rIGZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgaW52b2tlZC5cbiAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgaG9vay5cbiAgICovXG4gIG9uQmVmb3JlKG1hdGNoQ3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvbkhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb247XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIFtbVHJhbnNpdGlvbkhvb2tGbl1dLCBjYWxsZWQgd2hlbiBhIHRyYW5zaXRpb24gc3RhcnRzLlxuICAgKlxuICAgKiBSZWdpc3RlcnMgYSB0cmFuc2l0aW9uIGxpZmVjeWNsZSBob29rLCB3aGljaCBpcyBpbnZva2VkIGFzIGEgdHJhbnNpdGlvbiBzdGFydHMgcnVubmluZy5cbiAgICogVGhpcyBob29rIGNhbiBiZSB1c2VmdWwgdG8gcGVyZm9ybSBzb21lIGFzeW5jaHJvbm91cyBhY3Rpb24gYmVmb3JlIGNvbXBsZXRpbmcgYSB0cmFuc2l0aW9uLlxuICAgKlxuICAgKiBTZWUgW1tUcmFuc2l0aW9uSG9va0ZuXV0gZm9yIHRoZSBzaWduYXR1cmUgb2YgdGhlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBUaGUgW1tIb29rTWF0Y2hDcml0ZXJpYV1dIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIFRyYW5zaXRpb25zIHRoZSBob29rIHNob3VsZCBiZSBpbnZva2VkIGZvci5cbiAgICogVG8gbWF0Y2ggYWxsIFRyYW5zaXRpb25zLCB1c2UgYW4gZW1wdHkgY3JpdGVyaWEgb2JqZWN0IGB7fWAuXG4gICAqXG4gICAqICMjIyBMaWZlY3ljbGVcbiAgICpcbiAgICogYG9uU3RhcnRgIGhvb2tzIGFyZSBpbnZva2VkIGFzeW5jaHJvbm91c2x5IHdoZW4gdGhlIFRyYW5zaXRpb24gc3RhcnRzIHJ1bm5pbmcuXG4gICAqIFRoaXMgaGFwcGVucyBhZnRlciB0aGUgYG9uQmVmb3JlYCBwaGFzZSBpcyBjb21wbGV0ZS5cbiAgICogQXQgdGhpcyBwb2ludCwgdGhlIFRyYW5zaXRpb24gaGFzIG5vdCB5ZXQgZXhpdGVkIG5vciBlbnRlcmVkIGFueSBzdGF0ZXMuXG4gICAqIFRoZSByZWdpc3RlcmVkIGBvblN0YXJ0YCBob29rcyBhcmUgaW52b2tlZCBpbiBwcmlvcml0eSBvcmRlci5cbiAgICpcbiAgICogTm90ZTogQSBidWlsdC1pbiBgb25TdGFydGAgaG9vayB3aXRoIGhpZ2ggcHJpb3JpdHkgaXMgdXNlZCB0byBmZXRjaCBhbnkgZWFnZXIgcmVzb2x2ZSBkYXRhLlxuICAgKlxuICAgKiAjIyMgUmV0dXJuIHZhbHVlXG4gICAqXG4gICAqIFRoZSBob29rJ3MgcmV0dXJuIHZhbHVlIGNhbiBiZSB1c2VkIHRvIHBhdXNlLCBjYW5jZWwsIG9yIHJlZGlyZWN0IHRoZSBjdXJyZW50IFRyYW5zaXRpb24uXG4gICAqIFNlZSBbW0hvb2tSZXN1bHRdXSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICpcbiAgICogIyMjIEV4YW1wbGVcbiAgICpcbiAgICogIyMjIyBMb2dpbiBkdXJpbmcgdHJhbnNpdGlvblxuICAgKlxuICAgKiBUaGlzIGV4YW1wbGUgaW50ZXJjZXB0cyBhbnkgdHJhbnNpdGlvbiB0byBhIHN0YXRlIHdoaWNoIHJlcXVpcmVzIGF1dGhlbnRpY2F0aW9uLCB3aGVuIHRoZSB1c2VyIGlzXG4gICAqIG5vdCBjdXJyZW50bHkgYXV0aGVudGljYXRlZC4gIEl0IGFsbG93cyB0aGUgdXNlciB0byBhdXRoZW50aWNhdGUgYXN5bmNocm9ub3VzbHksIHRoZW4gcmVzdW1lcyB0aGVcbiAgICogdHJhbnNpdGlvbi4gIElmIHRoZSB1c2VyIGRpZCBub3QgYXV0aGVudGljYXRlIHN1Y2Nlc3NmdWxseSwgaXQgcmVkaXJlY3RzIHRvIHRoZSBcImd1ZXN0XCIgc3RhdGUsIHdoaWNoXG4gICAqIGRvZXMgbm90IHJlcXVpcmUgYXV0aGVudGljYXRpb24uXG4gICAqXG4gICAqIFRoaXMgZXhhbXBsZSBhc3N1bWVzOlxuICAgKiAtIGEgc3RhdGUgdHJlZSB3aGVyZSBhbGwgc3RhdGVzIHdoaWNoIHJlcXVpcmUgYXV0aGVudGljYXRpb24gYXJlIGNoaWxkcmVuIG9mIGEgcGFyZW50IGAnYXV0aCdgIHN0YXRlLlxuICAgKiAtIGBNeUF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpYCBzeW5jaHJvbm91c2x5IHJldHVybnMgYSBib29sZWFuLlxuICAgKiAtIGBNeUF1dGhTZXJ2aWNlLmF1dGhlbnRpY2F0ZSgpYCBwcmVzZW50cyBhIGxvZ2luIGRpYWxvZywgYW5kIHJldHVybnMgYSBwcm9taXNlIHdoaWNoIGlzIHJlc29sdmVkXG4gICAqICAgb3IgcmVqZWN0ZWQsIHdoZXRoZXIgb3Igbm90IHRoZSBsb2dpbiBhdHRlbXB0IHdhcyBzdWNjZXNzZnVsLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIC8vIG5nMVxuICAgKiAkdHJhbnNpdGlvbnMub25TdGFydCggeyB0bzogJ2F1dGguKionIH0sIGZ1bmN0aW9uKHRyYW5zKSB7XG4gICAqICAgdmFyICRzdGF0ZSA9IHRyYW5zLnJvdXRlci5zdGF0ZVNlcnZpY2U7XG4gICAqICAgdmFyIE15QXV0aFNlcnZpY2UgPSB0cmFucy5pbmplY3RvcigpLmdldCgnTXlBdXRoU2VydmljZScpO1xuICAgKlxuICAgKiAgIC8vIElmIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXG4gICAqICAgaWYgKCFNeUF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAqXG4gICAqICAgICAvLyBUaGVuIHJldHVybiBhIHByb21pc2UgZm9yIGEgc3VjY2Vzc2Z1bCBsb2dpbi5cbiAgICogICAgIC8vIFRoZSB0cmFuc2l0aW9uIHdpbGwgd2FpdCBmb3IgdGhpcyBwcm9taXNlIHRvIHNldHRsZVxuICAgKlxuICAgKiAgICAgcmV0dXJuIE15QXV0aFNlcnZpY2UuYXV0aGVudGljYXRlKCkuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAqXG4gICAqICAgICAgIC8vIElmIHRoZSBhdXRoZW50aWNhdGUoKSBtZXRob2QgZmFpbGVkIGZvciB3aGF0ZXZlciByZWFzb24sXG4gICAqICAgICAgIC8vIHJlZGlyZWN0IHRvIGEgJ2d1ZXN0JyBzdGF0ZSB3aGljaCBkb2Vzbid0IHJlcXVpcmUgYXV0aC5cbiAgICogICAgICAgcmV0dXJuICRzdGF0ZS50YXJnZXQoXCJndWVzdFwiKTtcbiAgICogICAgIH0pO1xuICAgKiAgIH1cbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gbWF0Y2hDcml0ZXJpYSBkZWZpbmVzIHdoaWNoIFRyYW5zaXRpb25zIHRoZSBIb29rIHNob3VsZCBiZSBpbnZva2VkIGZvci5cbiAgICogQHBhcmFtIGNhbGxiYWNrIHRoZSBob29rIGZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgaW5qZWN0ZWQgYW5kIGludm9rZWQuXG4gICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggZGVyZWdpc3RlcnMgdGhlIGhvb2suXG4gICAqL1xuICBvblN0YXJ0KG1hdGNoQ3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvbkhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb247XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIFtbVHJhbnNpdGlvblN0YXRlSG9va0ZuXV0sIGNhbGxlZCB3aGVuIGEgc3BlY2lmaWMgc3RhdGUgaXMgZW50ZXJlZC5cbiAgICpcbiAgICogUmVnaXN0ZXJzIGEgbGlmZWN5Y2xlIGhvb2ssIHdoaWNoIGlzIGludm9rZWQgKGR1cmluZyBhIHRyYW5zaXRpb24pIHdoZW4gYSBzcGVjaWZpYyBzdGF0ZSBpcyBiZWluZyBlbnRlcmVkLlxuICAgKlxuICAgKiBTaW5jZSB0aGlzIGhvb2sgaXMgcnVuIG9ubHkgd2hlbiB0aGUgc3BlY2lmaWMgc3RhdGUgaXMgYmVpbmcgKmVudGVyZWQqLCBpdCBjYW4gYmUgdXNlZnVsIGZvclxuICAgKiBwZXJmb3JtaW5nIHRhc2tzIHdoZW4gZW50ZXJpbmcgYSBzdWJtb2R1bGUvZmVhdHVyZSBhcmVhIHN1Y2ggYXMgaW5pdGlhbGl6aW5nIGEgc3RhdGVmdWwgc2VydmljZSxcbiAgICogb3IgZm9yIGd1YXJkaW5nIGFjY2VzcyB0byBhIHN1Ym1vZHVsZS9mZWF0dXJlIGFyZWEuXG4gICAqXG4gICAqIFNlZSBbW1RyYW5zaXRpb25TdGF0ZUhvb2tGbl1dIGZvciB0aGUgc2lnbmF0dXJlIG9mIHRoZSBmdW5jdGlvbi5cbiAgICpcbiAgICogVGhlIFtbSG9va01hdGNoQ3JpdGVyaWFdXSBpcyB1c2VkIHRvIGRldGVybWluZSB3aGljaCBUcmFuc2l0aW9ucyB0aGUgaG9vayBzaG91bGQgYmUgaW52b2tlZCBmb3IuXG4gICAqIGBvbkVudGVyYCBob29rcyBnZW5lcmFsbHkgc3BlY2lmeSBgeyBlbnRlcmluZzogJ3NvbWVzdGF0ZScgfWAuXG4gICAqIFRvIG1hdGNoIGFsbCBUcmFuc2l0aW9ucywgdXNlIGFuIGVtcHR5IGNyaXRlcmlhIG9iamVjdCBge31gLlxuICAgKlxuICAgKiAjIyMgTGlmZWN5Y2xlXG4gICAqXG4gICAqIGBvbkVudGVyYCBob29rcyBhcmUgaW52b2tlZCB3aGVuIHRoZSBUcmFuc2l0aW9uIGlzIGVudGVyaW5nIGEgc3RhdGUuXG4gICAqIFN0YXRlcyBhcmUgZW50ZXJlZCBhZnRlciB0aGUgYG9uUmV0YWluYCBwaGFzZSBpcyBjb21wbGV0ZS5cbiAgICogSWYgbW9yZSB0aGFuIG9uZSBzdGF0ZSBpcyBiZWluZyBlbnRlcmVkLCB0aGUgcGFyZW50IHN0YXRlIGlzIGVudGVyZWQgZmlyc3QuXG4gICAqIFRoZSByZWdpc3RlcmVkIGBvbkVudGVyYCBob29rcyBmb3IgYSBzdGF0ZSBhcmUgaW52b2tlZCBpbiBwcmlvcml0eSBvcmRlci5cbiAgICpcbiAgICogTm90ZTogQSBidWlsdC1pbiBgb25FbnRlcmAgaG9vayB3aXRoIGhpZ2ggcHJpb3JpdHkgaXMgdXNlZCB0byBmZXRjaCBsYXp5IHJlc29sdmUgZGF0YSBmb3Igc3RhdGVzIGJlaW5nIGVudGVyZWQuXG4gICAqXG4gICAqICMjIyBSZXR1cm4gdmFsdWVcbiAgICpcbiAgICogVGhlIGhvb2sncyByZXR1cm4gdmFsdWUgY2FuIGJlIHVzZWQgdG8gcGF1c2UsIGNhbmNlbCwgb3IgcmVkaXJlY3QgdGhlIGN1cnJlbnQgVHJhbnNpdGlvbi5cbiAgICogU2VlIFtbSG9va1Jlc3VsdF1dIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgKlxuICAgKiAjIyMgSW5zaWRlIGEgc3RhdGUgZGVjbGFyYXRpb25cbiAgICpcbiAgICogSW5zdGVhZCBvZiByZWdpc3RlcmluZyBgb25FbnRlcmAgaG9va3MgdXNpbmcgdGhlIFtbVHJhbnNpdGlvblNlcnZpY2VdXSwgeW91IG1heSBkZWZpbmUgYW4gYG9uRW50ZXJgIGhvb2tcbiAgICogZGlyZWN0bHkgb24gYSBzdGF0ZSBkZWNsYXJhdGlvbiAoc2VlOiBbW1N0YXRlRGVjbGFyYXRpb24ub25FbnRlcl1dKS5cbiAgICpcbiAgICpcbiAgICogIyMjIEV4YW1wbGVzXG4gICAqXG4gICAqICMjIyMgQXVkaXQgTG9nXG4gICAqXG4gICAqIFRoaXMgZXhhbXBsZSB1c2VzIGEgc2VydmljZSB0byBsb2cgdGhhdCBhIHVzZXIgaGFzIGVudGVyZWQgdGhlIGFkbWluIHNlY3Rpb24gb2YgYW4gYXBwLlxuICAgKiBUaGlzIGFzc3VtZXMgdGhhdCB0aGVyZSBhcmUgc3Vic3RhdGVzIG9mIHRoZSBcImFkbWluXCIgc3RhdGUsIHN1Y2ggYXMgXCJhZG1pbi51c2Vyc1wiLCBcImFkbWluLnBhZ2VzXCIsIGV0Yy5cbiAgICogQGV4YW1wbGVcbiAgICogYGBgXG4gICAqXG4gICAqICR0cmFuc2l0aW9ucy5vbkVudGVyKHsgZW50ZXJpbmc6ICdhZG1pbicgfSwgZnVuY3Rpb24odHJhbnNpdGlvbiwgc3RhdGUpIHtcbiAgICogICB2YXIgQXVkaXRTZXJ2aWNlID0gdHJhbnMuaW5qZWN0b3IoKS5nZXQoJ0F1ZGl0U2VydmljZScpO1xuICAgKiAgIEF1ZGl0U2VydmljZS5sb2coXCJFbnRlcmVkIFwiICsgc3RhdGUubmFtZSArIFwiIG1vZHVsZSB3aGlsZSB0cmFuc2l0aW9uaW5nIHRvIFwiICsgdHJhbnNpdGlvbi50bygpLm5hbWUpO1xuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyMjIEF1ZGl0IExvZyAoaW5zaWRlIGEgc3RhdGUgZGVjbGFyYXRpb24pXG4gICAqXG4gICAqIFRoZSBgb25FbnRlcmAgaW5zaWRlIHRoaXMgc3RhdGUgZGVjbGFyYXRpb24gaXMgc3ludGFjdGljIHN1Z2FyIGZvciB0aGUgcHJldmlvdXMgQXVkaXQgTG9nIGV4YW1wbGUuXG4gICAqIGBgYFxuICAgKiB7XG4gICAqICAgbmFtZTogJ2FkbWluJyxcbiAgICogICBjb21wb25lbnQ6ICdhZG1pbicsXG4gICAqICAgb25FbnRlcjogZnVuY3Rpb24oJHRyYW5zaXRpb24kLCAkc3RhdGUkKSB7XG4gICAqICAgICB2YXIgQXVkaXRTZXJ2aWNlID0gJHRyYW5zaXRpb24kLmluamVjdG9yKCkuZ2V0KCdBdWRpdFNlcnZpY2UnKTtcbiAgICogICAgIEF1ZGl0U2VydmljZS5sb2coXCJFbnRlcmVkIFwiICsgc3RhdGUubmFtZSArIFwiIG1vZHVsZSB3aGlsZSB0cmFuc2l0aW9uaW5nIHRvIFwiICsgdHJhbnNpdGlvbi50bygpLm5hbWUpO1xuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogTm90ZTogQSBzdGF0ZSBkZWNsYXJhdGlvbidzIGBvbkVudGVyYCBmdW5jdGlvbiBpcyBpbmplY3RlZCBmb3IgQW5ndWxhciAxIG9ubHkuXG4gICAqXG4gICAqIEBwYXJhbSBtYXRjaENyaXRlcmlhIGRlZmluZXMgd2hpY2ggVHJhbnNpdGlvbnMgdGhlIEhvb2sgc2hvdWxkIGJlIGludm9rZWQgZm9yLlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgdGhlIGhvb2sgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBpbmplY3RlZCBhbmQgaW52b2tlZC5cbiAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgaG9vay5cbiAgICovXG4gIG9uRW50ZXIobWF0Y2hDcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uU3RhdGVIb29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uO1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBbW1RyYW5zaXRpb25TdGF0ZUhvb2tGbl1dLCBjYWxsZWQgd2hlbiBhIHNwZWNpZmljIHN0YXRlIGlzIHJldGFpbmVkL2tlcHQuXG4gICAqXG4gICAqIFJlZ2lzdGVycyBhIGxpZmVjeWNsZSBob29rLCB3aGljaCBpcyBpbnZva2VkIChkdXJpbmcgYSB0cmFuc2l0aW9uKSBmb3JcbiAgICogYSBzcGVjaWZpYyBzdGF0ZSB0aGF0IHdhcyBwcmV2aW91c2x5IGFjdGl2ZSB3aWxsIHJlbWFpbiBhY3RpdmUgKGlzIG5vdCBiZWluZyBlbnRlcmVkIG5vciBleGl0ZWQpLlxuICAgKlxuICAgKiBUaGlzIGhvb2sgaXMgaW52b2tlZCB3aGVuIGEgc3RhdGUgaXMgXCJyZXRhaW5lZFwiIG9yIFwia2VwdFwiLlxuICAgKiBJdCBtZWFucyB0aGUgdHJhbnNpdGlvbiBpcyBjb21pbmcgKmZyb20qIGEgc3Vic3RhdGUgb2YgdGhlIHJldGFpbmVkIHN0YXRlICp0byogYSBzdWJzdGF0ZSBvZiB0aGUgcmV0YWluZWQgc3RhdGUuXG4gICAqIFRoaXMgaG9vayBjYW4gYmUgdXNlZCB0byBwZXJmb3JtIGFjdGlvbnMgd2hlbiB0aGUgdXNlciBtb3ZlcyBmcm9tIG9uZSBzdWJzdGF0ZSB0byBhbm90aGVyLCBzdWNoIGFzIGJldHdlZW4gc3RlcHMgaW4gYSB3aXphcmQuXG4gICAqXG4gICAqIFRoZSBbW0hvb2tNYXRjaENyaXRlcmlhXV0gaXMgdXNlZCB0byBkZXRlcm1pbmUgd2hpY2ggVHJhbnNpdGlvbnMgdGhlIGhvb2sgc2hvdWxkIGJlIGludm9rZWQgZm9yLlxuICAgKiBgb25SZXRhaW5gIGhvb2tzIGdlbmVyYWxseSBzcGVjaWZ5IGB7IHJldGFpbmVkOiAnc29tZXN0YXRlJyB9YC5cbiAgICogVG8gbWF0Y2ggYWxsIFRyYW5zaXRpb25zLCB1c2UgYW4gZW1wdHkgY3JpdGVyaWEgb2JqZWN0IGB7fWAuXG4gICAqXG4gICAqICMjIyBMaWZlY3ljbGVcbiAgICpcbiAgICogYG9uUmV0YWluYCBob29rcyBhcmUgaW52b2tlZCBhZnRlciBhbnkgYG9uRXhpdGAgaG9va3MgaGF2ZSBiZWVuIGZpcmVkLlxuICAgKiBJZiBtb3JlIHRoYW4gb25lIHN0YXRlIGlzIHJldGFpbmVkLCB0aGUgY2hpbGQgc3RhdGVzJyBgb25SZXRhaW5gIGhvb2tzIGFyZSBpbnZva2VkIGZpcnN0LlxuICAgKiBUaGUgcmVnaXN0ZXJlZCBgb25SZXRhaW5gIGhvb2tzIGZvciBhIHN0YXRlIGFyZSBpbnZva2VkIGluIHByaW9yaXR5IG9yZGVyLlxuICAgKlxuICAgKiAjIyMgUmV0dXJuIHZhbHVlXG4gICAqXG4gICAqIFRoZSBob29rJ3MgcmV0dXJuIHZhbHVlIGNhbiBiZSB1c2VkIHRvIHBhdXNlLCBjYW5jZWwsIG9yIHJlZGlyZWN0IHRoZSBjdXJyZW50IFRyYW5zaXRpb24uXG4gICAqIFNlZSBbW0hvb2tSZXN1bHRdXSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICpcbiAgICogIyMjIEluc2lkZSBhIHN0YXRlIGRlY2xhcmF0aW9uXG4gICAqXG4gICAqIEluc3RlYWQgb2YgcmVnaXN0ZXJpbmcgYG9uUmV0YWluYCBob29rcyB1c2luZyB0aGUgW1tUcmFuc2l0aW9uU2VydmljZV1dLCB5b3UgbWF5IGRlZmluZSBhbiBgb25SZXRhaW5gIGhvb2tcbiAgICogZGlyZWN0bHkgb24gYSBzdGF0ZSBkZWNsYXJhdGlvbiAoc2VlOiBbW1N0YXRlRGVjbGFyYXRpb24ub25SZXRhaW5dXSkuXG4gICAqXG4gICAqIE5vdGU6IEEgc3RhdGUgZGVjbGFyYXRpb24ncyBgb25SZXRhaW5gIGZ1bmN0aW9uIGlzIGluamVjdGVkIGZvciBBbmd1bGFyIDEgb25seS5cbiAgICpcbiAgICogQHBhcmFtIG1hdGNoQ3JpdGVyaWEgZGVmaW5lcyB3aGljaCBUcmFuc2l0aW9ucyB0aGUgSG9vayBzaG91bGQgYmUgaW52b2tlZCBmb3IuXG4gICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgaG9vayBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIGluamVjdGVkIGFuZCBpbnZva2VkLlxuICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIGRlcmVnaXN0ZXJzIHRoZSBob29rLlxuICAgKi9cbiAgb25SZXRhaW4obWF0Y2hDcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uU3RhdGVIb29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uO1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBbW1RyYW5zaXRpb25TdGF0ZUhvb2tGbl1dLCBjYWxsZWQgd2hlbiBhIHNwZWNpZmljIHN0YXRlIGlzIGV4aXRlZC5cbiAgICpcbiAgICogUmVnaXN0ZXJzIGEgbGlmZWN5Y2xlIGhvb2ssIHdoaWNoIGlzIGludm9rZWQgKGR1cmluZyBhIHRyYW5zaXRpb24pIHdoZW4gYSBzcGVjaWZpYyBzdGF0ZSBpcyBiZWluZyBleGl0ZWQuXG4gICAqXG4gICAqIFNpbmNlIHRoaXMgaG9vayBpcyBydW4gb25seSB3aGVuIHRoZSBzcGVjaWZpYyBzdGF0ZSBpcyBiZWluZyAqZXhpdGVkKiwgaXQgY2FuIGJlIHVzZWZ1bCBmb3JcbiAgICogcGVyZm9ybWluZyB0YXNrcyB3aGVuIGxlYXZpbmcgYSBzdWJtb2R1bGUvZmVhdHVyZSBhcmVhIHN1Y2ggYXMgY2xlYW5pbmcgdXAgYSBzdGF0ZWZ1bCBzZXJ2aWNlLFxuICAgKiBvciBmb3IgcHJldmVudGluZyB0aGUgdXNlciBmcm9tIGxlYXZpbmcgYSBzdGF0ZSBvciBzdWJtb2R1bGUgdW50aWwgc29tZSBjcml0ZXJpYSBpcyBzYXRpc2ZpZWQuXG4gICAqXG4gICAqIFNlZSBbW1RyYW5zaXRpb25TdGF0ZUhvb2tGbl1dIGZvciB0aGUgc2lnbmF0dXJlIG9mIHRoZSBmdW5jdGlvbi5cbiAgICpcbiAgICogVGhlIFtbSG9va01hdGNoQ3JpdGVyaWFdXSBpcyB1c2VkIHRvIGRldGVybWluZSB3aGljaCBUcmFuc2l0aW9ucyB0aGUgaG9vayBzaG91bGQgYmUgaW52b2tlZCBmb3IuXG4gICAqIGBvbkV4aXRgIGhvb2tzIGdlbmVyYWxseSBzcGVjaWZ5IGB7IGV4aXRpbmc6ICdzb21lc3RhdGUnIH1gLlxuICAgKiBUbyBtYXRjaCBhbGwgVHJhbnNpdGlvbnMsIHVzZSBhbiBlbXB0eSBjcml0ZXJpYSBvYmplY3QgYHt9YC5cbiAgICpcbiAgICogIyMjIExpZmVjeWNsZVxuICAgKlxuICAgKiBgb25FeGl0YCBob29rcyBhcmUgaW52b2tlZCB3aGVuIHRoZSBUcmFuc2l0aW9uIGlzIGV4aXRpbmcgYSBzdGF0ZS5cbiAgICogU3RhdGVzIGFyZSBleGl0ZWQgYWZ0ZXIgYW55IGBvblN0YXJ0YCBwaGFzZSBpcyBjb21wbGV0ZS5cbiAgICogSWYgbW9yZSB0aGFuIG9uZSBzdGF0ZSBpcyBiZWluZyBleGl0ZWQsIHRoZSBjaGlsZCBzdGF0ZXMgYXJlIGV4aXRlZCBmaXJzdC5cbiAgICogVGhlIHJlZ2lzdGVyZWQgYG9uRXhpdGAgaG9va3MgZm9yIGEgc3RhdGUgYXJlIGludm9rZWQgaW4gcHJpb3JpdHkgb3JkZXIuXG4gICAqXG4gICAqICMjIyBSZXR1cm4gdmFsdWVcbiAgICpcbiAgICogVGhlIGhvb2sncyByZXR1cm4gdmFsdWUgY2FuIGJlIHVzZWQgdG8gcGF1c2UsIGNhbmNlbCwgb3IgcmVkaXJlY3QgdGhlIGN1cnJlbnQgVHJhbnNpdGlvbi5cbiAgICogU2VlIFtbSG9va1Jlc3VsdF1dIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgKlxuICAgKiAjIyMgSW5zaWRlIGEgc3RhdGUgZGVjbGFyYXRpb25cbiAgICpcbiAgICogSW5zdGVhZCBvZiByZWdpc3RlcmluZyBgb25FeGl0YCBob29rcyB1c2luZyB0aGUgW1tUcmFuc2l0aW9uU2VydmljZV1dLCB5b3UgbWF5IGRlZmluZSBhbiBgb25FeGl0YCBob29rXG4gICAqIGRpcmVjdGx5IG9uIGEgc3RhdGUgZGVjbGFyYXRpb24gKHNlZTogW1tTdGF0ZURlY2xhcmF0aW9uLm9uRXhpdF1dKS5cbiAgICpcbiAgICogTm90ZTogQSBzdGF0ZSBkZWNsYXJhdGlvbidzIGBvbkV4aXRgIGZ1bmN0aW9uIGlzIGluamVjdGVkIGZvciBBbmd1bGFyIDEgb25seS5cbiAgICpcbiAgICogQHBhcmFtIG1hdGNoQ3JpdGVyaWEgZGVmaW5lcyB3aGljaCBUcmFuc2l0aW9ucyB0aGUgSG9vayBzaG91bGQgYmUgaW52b2tlZCBmb3IuXG4gICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgaG9vayBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIGluamVjdGVkIGFuZCBpbnZva2VkLlxuICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIGRlcmVnaXN0ZXJzIHRoZSBob29rLlxuICAgKi9cbiAgb25FeGl0KG1hdGNoQ3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvblN0YXRlSG9va0ZuLCBvcHRpb25zPzogSG9va1JlZ09wdGlvbnMpOiBGdW5jdGlvbjtcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgW1tUcmFuc2l0aW9uSG9va0ZuXV0sIGNhbGxlZCAqanVzdCBiZWZvcmUgYSB0cmFuc2l0aW9uIGZpbmlzaGVzKi5cbiAgICpcbiAgICogUmVnaXN0ZXJzIGEgdHJhbnNpdGlvbiBsaWZlY3ljbGUgaG9vaywgd2hpY2ggaXMgaW52b2tlZCBqdXN0IGJlZm9yZSBhIHRyYW5zaXRpb24gZmluaXNoZXMuXG4gICAqIFRoaXMgaG9vayBpcyBhIGxhc3QgY2hhbmNlIHRvIGNhbmNlbCBvciByZWRpcmVjdCBhIHRyYW5zaXRpb24uXG4gICAqXG4gICAqIFNlZSBbW1RyYW5zaXRpb25Ib29rRm5dXSBmb3IgdGhlIHNpZ25hdHVyZSBvZiB0aGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIFRoZSBbW0hvb2tNYXRjaENyaXRlcmlhXV0gaXMgdXNlZCB0byBkZXRlcm1pbmUgd2hpY2ggVHJhbnNpdGlvbnMgdGhlIGhvb2sgc2hvdWxkIGJlIGludm9rZWQgZm9yLlxuICAgKiBUbyBtYXRjaCBhbGwgVHJhbnNpdGlvbnMsIHVzZSBhbiBlbXB0eSBjcml0ZXJpYSBvYmplY3QgYHt9YC5cbiAgICpcbiAgICogIyMjIExpZmVjeWNsZVxuICAgKlxuICAgKiBgb25GaW5pc2hgIGhvb2tzIGFyZSBpbnZva2VkIGFmdGVyIHRoZSBgb25FbnRlcmAgcGhhc2UgaXMgY29tcGxldGUuXG4gICAqIFRoZXNlIGhvb2tzIGFyZSBpbnZva2VkIGp1c3QgYmVmb3JlIHRoZSB0cmFuc2l0aW9uIGlzIFwiY29tbWl0dGVkXCIuXG4gICAqIEVhY2ggaG9vayBpcyBpbnZva2VkIGluIHByaW9yaXR5IG9yZGVyLlxuICAgKlxuICAgKiAjIyMgUmV0dXJuIHZhbHVlXG4gICAqXG4gICAqIFRoZSBob29rJ3MgcmV0dXJuIHZhbHVlIGNhbiBiZSB1c2VkIHRvIHBhdXNlLCBjYW5jZWwsIG9yIHJlZGlyZWN0IHRoZSBjdXJyZW50IFRyYW5zaXRpb24uXG4gICAqIFNlZSBbW0hvb2tSZXN1bHRdXSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIG1hdGNoQ3JpdGVyaWEgZGVmaW5lcyB3aGljaCBUcmFuc2l0aW9ucyB0aGUgSG9vayBzaG91bGQgYmUgaW52b2tlZCBmb3IuXG4gICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgaG9vayBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIGluamVjdGVkIGFuZCBpbnZva2VkLlxuICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIGRlcmVnaXN0ZXJzIHRoZSBob29rLlxuICAgKi9cbiAgb25GaW5pc2gobWF0Y2hDcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uSG9va0ZuLCBvcHRpb25zPzogSG9va1JlZ09wdGlvbnMpOiBGdW5jdGlvbjtcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgW1tUcmFuc2l0aW9uSG9va0ZuXV0sIGNhbGxlZCBhZnRlciBhIHN1Y2Nlc3NmdWwgdHJhbnNpdGlvbiBjb21wbGV0ZWQuXG4gICAqXG4gICAqIFJlZ2lzdGVycyBhIHRyYW5zaXRpb24gbGlmZWN5Y2xlIGhvb2ssIHdoaWNoIGlzIGludm9rZWQgYWZ0ZXIgYSB0cmFuc2l0aW9uIHN1Y2Nlc3NmdWxseSBjb21wbGV0ZXMuXG4gICAqXG4gICAqIFNlZSBbW1RyYW5zaXRpb25Ib29rRm5dXSBmb3IgdGhlIHNpZ25hdHVyZSBvZiB0aGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIFRoZSBbW0hvb2tNYXRjaENyaXRlcmlhXV0gaXMgdXNlZCB0byBkZXRlcm1pbmUgd2hpY2ggVHJhbnNpdGlvbnMgdGhlIGhvb2sgc2hvdWxkIGJlIGludm9rZWQgZm9yLlxuICAgKiBUbyBtYXRjaCBhbGwgVHJhbnNpdGlvbnMsIHVzZSBhbiBlbXB0eSBjcml0ZXJpYSBvYmplY3QgYHt9YC5cbiAgICpcbiAgICogIyMjIExpZmVjeWNsZVxuICAgKlxuICAgKiBgb25TdWNjZXNzYCBob29rcyBhcmUgY2hhaW5lZCBvZmYgdGhlIFRyYW5zaXRpb24ncyBwcm9taXNlIChzZWUgW1tUcmFuc2l0aW9uLnByb21pc2VdXSkuXG4gICAqIElmIHRoZSBUcmFuc2l0aW9uIGlzIHN1Y2Nlc3NmdWwgYW5kIGl0cyBwcm9taXNlIGlzIHJlc29sdmVkLCB0aGVuIHRoZSBgb25TdWNjZXNzYCBob29rcyBhcmUgaW52b2tlZC5cbiAgICogU2luY2UgdGhlc2UgaG9va3MgYXJlIHJ1biBhZnRlciB0aGUgdHJhbnNpdGlvbiBpcyBvdmVyLCB0aGVpciByZXR1cm4gdmFsdWUgaXMgaWdub3JlZC5cbiAgICogVGhlIGBvblN1Y2Nlc3NgIGhvb2tzIGFyZSBpbnZva2VkIGluIHByaW9yaXR5IG9yZGVyLlxuICAgKlxuICAgKiAjIyMgUmV0dXJuIHZhbHVlXG4gICAqXG4gICAqIFNpbmNlIHRoZSBUcmFuc2l0aW9uIGlzIGFscmVhZHkgY29tcGxldGVkLCB0aGUgaG9vaydzIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAqXG4gICAqIEBwYXJhbSBtYXRjaENyaXRlcmlhIGRlZmluZXMgd2hpY2ggVHJhbnNpdGlvbnMgdGhlIEhvb2sgc2hvdWxkIGJlIGludm9rZWQgZm9yLlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgdGhlIGhvb2sgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBpbmplY3RlZCBhbmQgaW52b2tlZC5cbiAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgaG9vay5cbiAgICovXG4gIG9uU3VjY2VzcyhtYXRjaENyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25Ib29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uO1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBbW1RyYW5zaXRpb25Ib29rRm5dXSwgY2FsbGVkIGFmdGVyIGEgdHJhbnNpdGlvbiBoYXMgZXJyb3JlZC5cbiAgICpcbiAgICogUmVnaXN0ZXJzIGEgdHJhbnNpdGlvbiBsaWZlY3ljbGUgaG9vaywgd2hpY2ggaXMgaW52b2tlZCBhZnRlciBhIHRyYW5zaXRpb24gaGFzIGJlZW4gcmVqZWN0ZWQgZm9yIGFueSByZWFzb24uXG4gICAqXG4gICAqIFNlZSBbW1RyYW5zaXRpb25Ib29rRm5dXSBmb3IgdGhlIHNpZ25hdHVyZSBvZiB0aGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIFRoZSBbW0hvb2tNYXRjaENyaXRlcmlhXV0gaXMgdXNlZCB0byBkZXRlcm1pbmUgd2hpY2ggVHJhbnNpdGlvbnMgdGhlIGhvb2sgc2hvdWxkIGJlIGludm9rZWQgZm9yLlxuICAgKiBUbyBtYXRjaCBhbGwgVHJhbnNpdGlvbnMsIHVzZSBhbiBlbXB0eSBjcml0ZXJpYSBvYmplY3QgYHt9YC5cbiAgICpcbiAgICogIyMjIExpZmVjeWNsZVxuICAgKlxuICAgKiBUaGUgYG9uRXJyb3JgIGhvb2tzIGFyZSBjaGFpbmVkIG9mZiB0aGUgVHJhbnNpdGlvbidzIHByb21pc2UgKHNlZSBbW1RyYW5zaXRpb24ucHJvbWlzZV1dKS5cbiAgICogSWYgYSBUcmFuc2l0aW9uIGZhaWxzLCBpdHMgcHJvbWlzZSBpcyByZWplY3RlZCBhbmQgdGhlIGBvbkVycm9yYCBob29rcyBhcmUgaW52b2tlZC5cbiAgICogVGhlIGBvbkVycm9yYCBob29rcyBhcmUgaW52b2tlZCBpbiBwcmlvcml0eSBvcmRlci5cbiAgICpcbiAgICogU2luY2UgdGhlc2UgaG9va3MgYXJlIHJ1biBhZnRlciB0aGUgdHJhbnNpdGlvbiBpcyBvdmVyLCB0aGVpciByZXR1cm4gdmFsdWUgaXMgaWdub3JlZC5cbiAgICpcbiAgICogQSB0cmFuc2l0aW9uIFwiZXJyb3JzXCIgaWYgaXQgd2FzIHN0YXJ0ZWQsIGJ1dCBmYWlsZWQgdG8gY29tcGxldGUgKGZvciBhbnkgcmVhc29uKS5cbiAgICogQSAqbm9uLWV4aGF1c3RpdmUgbGlzdCogb2YgcmVhc29ucyBhIHRyYW5zaXRpb24gY2FuIGVycm9yOlxuICAgKlxuICAgKiAtIEEgdHJhbnNpdGlvbiB3YXMgY2FuY2VsbGVkIGJlY2F1c2UgYSBuZXcgdHJhbnNpdGlvbiBzdGFydGVkIHdoaWxlIGl0IHdhcyBzdGlsbCBydW5uaW5nIChgVHJhbnNpdGlvbiBzdXBlcnNlZGVkYClcbiAgICogLSBBIHRyYW5zaXRpb24gd2FzIGNhbmNlbGxlZCBieSBhIFRyYW5zaXRpb24gSG9vayByZXR1cm5pbmcgZmFsc2VcbiAgICogLSBBIHRyYW5zaXRpb24gd2FzIHJlZGlyZWN0ZWQgYnkgYSBUcmFuc2l0aW9uIEhvb2sgcmV0dXJuaW5nIGEgW1tUYXJnZXRTdGF0ZV1dXG4gICAqIC0gQSBUcmFuc2l0aW9uIEhvb2sgb3IgcmVzb2x2ZSBmdW5jdGlvbiB0aHJldyBhbiBlcnJvclxuICAgKiAtIEEgVHJhbnNpdGlvbiBIb29rIHJldHVybmVkIGEgcmVqZWN0ZWQgcHJvbWlzZVxuICAgKiAtIEEgcmVzb2x2ZSBmdW5jdGlvbiByZXR1cm5lZCBhIHJlamVjdGVkIHByb21pc2VcbiAgICpcbiAgICogVG8gY2hlY2sgdGhlIGZhaWx1cmUgcmVhc29uLCBpbnNwZWN0IHRoZSByZXR1cm4gdmFsdWUgb2YgW1tUcmFuc2l0aW9uLmVycm9yXV0uXG4gICAqXG4gICAqIE5vdGU6IGBvbkVycm9yYCBzaG91bGQgYmUgdXNlZCBmb3IgdGFyZ2V0ZWQgZXJyb3IgaGFuZGxpbmcsIG9yIGVycm9yIHJlY292ZXJ5LlxuICAgKiBGb3Igc2ltcGxlIGNhdGNoLWFsbCBlcnJvciByZXBvcnRpbmcsIHVzZSBbW1N0YXRlU2VydmljZS5kZWZhdWx0RXJyb3JIYW5kbGVyXV0uXG4gICAqXG4gICAqICMjIyBSZXR1cm4gdmFsdWVcbiAgICpcbiAgICogU2luY2UgdGhlIFRyYW5zaXRpb24gaXMgYWxyZWFkeSBjb21wbGV0ZWQsIHRoZSBob29rJ3MgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWRcbiAgICpcbiAgICogQHBhcmFtIG1hdGNoQ3JpdGVyaWEgZGVmaW5lcyB3aGljaCBUcmFuc2l0aW9ucyB0aGUgSG9vayBzaG91bGQgYmUgaW52b2tlZCBmb3IuXG4gICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgaG9vayBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIGluamVjdGVkIGFuZCBpbnZva2VkLlxuICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIGRlcmVnaXN0ZXJzIHRoZSBob29rLlxuICAgKi9cbiAgb25FcnJvcihtYXRjaENyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25Ib29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCB0aGUgcmVnaXN0ZXJlZCBob29rcyBvZiBhIGdpdmVuIGBob29rTmFtZWAgdHlwZVxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYFxuICAgKiAkdHJhbnNpdGlvbnMuZ2V0SG9va3MoXCJvbkVudGVyXCIpXG4gICAqIGBgYFxuICAgKi9cbiAgZ2V0SG9va3MoaG9va05hbWU6IHN0cmluZyk6IFJlZ2lzdGVyZWRIb29rW107XG59XG5cbi8qKiBBIHByZWRpY2F0ZSB0eXBlIHdoaWNoIHRlc3RzIGlmIGEgW1tTdGF0ZU9iamVjdF1dIGFuZCBbW1RyYW5zaXRpb25dXSBwYXNzZXMgc29tZSB0ZXN0LiBSZXR1cm5zIGEgYm9vbGVhbi4gKi9cbmV4cG9ydCB0eXBlIElTdGF0ZU1hdGNoID0gUHJlZGljYXRlQmluYXJ5PFN0YXRlT2JqZWN0LCBUcmFuc2l0aW9uPjtcblxuLyoqXG4gKiBUaGlzIG9iamVjdCBpcyB1c2VkIHRvIGNvbmZpZ3VyZSB3aGV0aGVyIG9yIG5vdCBhIFRyYW5zaXRpb24gSG9vayBpcyBpbnZva2VkIGZvciBhIHBhcnRpY3VsYXIgdHJhbnNpdGlvbixcbiAqIGJhc2VkIG9uIHRoZSBUcmFuc2l0aW9uJ3MgXCJ0byBzdGF0ZVwiIGFuZCBcImZyb20gc3RhdGVcIi5cbiAqXG4gKiBFYWNoIHByb3BlcnR5IChgdG9gLCBgZnJvbWAsIGBleGl0aW5nYCwgYHJldGFpbmVkYCwgYW5kIGBlbnRlcmluZ2ApIGNhbiBiZSBhIHN0YXRlIFtbR2xvYl1dIHN0cmluZyxcbiAqIGEgYm9vbGVhbiwgb3IgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgc3RhdGUgYW5kIHJldHVybnMgYSBib29sZWFuIChzZWUgW1tIb29rTWF0Y2hDcml0ZXJpb25dXSlcbiAqXG4gKiBBbGwgcHJvcGVydGllcyBhcmUgb3B0aW9uYWwuICBJZiBhbnkgcHJvcGVydHkgaXMgb21pdHRlZCwgaXQgaXMgcmVwbGFjZWQgd2l0aCB0aGUgdmFsdWUgYHRydWVgLCBhbmQgYWx3YXlzIG1hdGNoZXMuXG4gKiBUbyBtYXRjaCBhbnkgdHJhbnNpdGlvbiwgdXNlIGFuIGVtcHR5IGNyaXRlcmlhIG9iamVjdCBge31gLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGpzXG4gKiAvLyBUaGlzIG1hdGNoZXMgYSB0cmFuc2l0aW9uIGNvbWluZyBmcm9tIHRoZSBgcGFyZW50YCBzdGF0ZSBhbmQgZ29pbmcgdG8gdGhlIGBwYXJlbnQuY2hpbGRgIHN0YXRlLlxuICogdmFyIG1hdGNoID0ge1xuICogICB0bzogJ3BhcmVudCcsXG4gKiAgIGZyb206ICdwYXJlbnQuY2hpbGQnXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogLy8gVGhpcyBtYXRjaGVzIGEgdHJhbnNpdGlvbiBjb21pbmcgZnJvbSBhbnkgc3Vic3RhdGUgb2YgYHBhcmVudGAgYW5kIGdvaW5nIGRpcmVjdGx5IHRvIHRoZSBgcGFyZW50YCBzdGF0ZS5cbiAqIHZhciBtYXRjaCA9IHtcbiAqICAgdG86ICdwYXJlbnQnLFxuICogICBmcm9tOiAncGFyZW50LioqJ1xuICogfVxuICogYGBgXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBganNcbiAqIC8vIFRoaXMgbWF0Y2hlcyBhIHRyYW5zaXRpb24gY29taW5nIGZyb20gYW55IHN0YXRlIGFuZCBnb2luZyB0byBhbnkgc3Vic3RhdGUgb2YgYG15bW9kdWxlYFxuICogdmFyIG1hdGNoID0ge1xuICogICB0bzogJ215bW9kdWxlLioqJ1xuICogfVxuICogYGBgXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBganNcbiAqIC8vIFRoaXMgbWF0Y2hlcyBhIHRyYW5zaXRpb24gY29taW5nIGZyb20gYW55IHN0YXRlIGFuZCBnb2luZyB0byBhbnkgc3RhdGUgdGhhdCBoYXMgYGRhdGEuYXV0aFJlcXVpcmVkYFxuICogLy8gc2V0IHRvIGEgdHJ1dGh5IHZhbHVlLlxuICogdmFyIG1hdGNoID0ge1xuICogICB0bzogZnVuY3Rpb24oc3RhdGUpIHtcbiAqICAgICByZXR1cm4gc3RhdGUuZGF0YSAhPSBudWxsICYmIHN0YXRlLmRhdGEuYXV0aFJlcXVpcmVkID09PSB0cnVlO1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGpzXG4gKiAvLyBUaGlzIHdpbGwgbWF0Y2ggd2hlbiByb3V0ZSBpcyBqdXN0IGVudGVyZWQgKGluaXRpYWwgbG9hZCkgb3Igd2hlbiB0aGUgc3RhdGUgaXMgaGFyZC1yZWZyZXNoZWRcbiAqIC8vIGJ5IHNwZWNpZnlpbmcgYHtyZWZyZXNoOiB0cnVlfWAgYXMgdHJhbnNpdGlvbiBvcHRpb25zLlxuICogdmFyIG1hdGNoID0ge1xuICogICBmcm9tOiAoc3RhdGUsIHRyYW5zaXRpb24pID0+IHN0YXRlLnNlbGYubmFtZSA9PT0gJycgfHwgdHJhbnNpdGlvbi5vcHRpb25zKCkucmVsb2FkXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogLy8gVGhpcyBtYXRjaGVzIGEgdHJhbnNpdGlvbiB0aGF0IGlzIGV4aXRpbmcgYHBhcmVudC5jaGlsZGBcbiAqIHZhciBtYXRjaCA9IHtcbiAqICAgZXhpdGluZzogJ3BhcmVudC5jaGlsZCdcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEhvb2tNYXRjaENyaXRlcmlhIHtcbiAgW2tleTogc3RyaW5nXTogSG9va01hdGNoQ3JpdGVyaW9uIHwgdW5kZWZpbmVkO1xuXG4gIC8qKiBBIFtbSG9va01hdGNoQ3JpdGVyaW9uXV0gdG8gbWF0Y2ggdGhlIGRlc3RpbmF0aW9uIHN0YXRlICovXG4gIHRvPzogSG9va01hdGNoQ3JpdGVyaW9uO1xuICAvKiogQSBbW0hvb2tNYXRjaENyaXRlcmlvbl1dIHRvIG1hdGNoIHRoZSBvcmlnaW5hbCAoZnJvbSkgc3RhdGUgKi9cbiAgZnJvbT86IEhvb2tNYXRjaENyaXRlcmlvbjtcbiAgLyoqIEEgW1tIb29rTWF0Y2hDcml0ZXJpb25dXSB0byBtYXRjaCBhbnkgc3RhdGUgdGhhdCB3b3VsZCBiZSBleGl0aW5nICovXG4gIGV4aXRpbmc/OiBIb29rTWF0Y2hDcml0ZXJpb247XG4gIC8qKiBBIFtbSG9va01hdGNoQ3JpdGVyaW9uXV0gdG8gbWF0Y2ggYW55IHN0YXRlIHRoYXQgd291bGQgYmUgcmV0YWluZWQgKi9cbiAgcmV0YWluZWQ/OiBIb29rTWF0Y2hDcml0ZXJpb247XG4gIC8qKiBBIFtbSG9va01hdGNoQ3JpdGVyaW9uXV0gdG8gbWF0Y2ggYW55IHN0YXRlIHRoYXQgd291bGQgYmUgZW50ZXJpbmcgKi9cbiAgZW50ZXJpbmc/OiBIb29rTWF0Y2hDcml0ZXJpb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU1hdGNoaW5nTm9kZXMge1xuICBba2V5OiBzdHJpbmddOiBQYXRoTm9kZVtdO1xuXG4gIHRvOiBQYXRoTm9kZVtdO1xuICBmcm9tOiBQYXRoTm9kZVtdO1xuICBleGl0aW5nOiBQYXRoTm9kZVtdO1xuICByZXRhaW5lZDogUGF0aE5vZGVbXTtcbiAgZW50ZXJpbmc6IFBhdGhOb2RlW107XG59XG5cbi8qKiBAaGlkZGVuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlZ2lzdGVyZWRIb29rcyB7XG4gIFtrZXk6IHN0cmluZ106IFJlZ2lzdGVyZWRIb29rW107XG59XG5cbi8qKiBAaGlkZGVuICovXG5leHBvcnQgaW50ZXJmYWNlIFBhdGhUeXBlcyB7XG4gIFtrZXk6IHN0cmluZ106IFBhdGhUeXBlO1xuXG4gIHRvOiBQYXRoVHlwZTtcbiAgZnJvbTogUGF0aFR5cGU7XG4gIGV4aXRpbmc6IFBhdGhUeXBlO1xuICByZXRhaW5lZDogUGF0aFR5cGU7XG4gIGVudGVyaW5nOiBQYXRoVHlwZTtcbn1cblxuLyoqIEBoaWRkZW4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aFR5cGUge1xuICBuYW1lOiBzdHJpbmc7XG4gIHNjb3BlOiBUcmFuc2l0aW9uSG9va1Njb3BlO1xufVxuXG4vKipcbiAqIEhvb2sgQ3JpdGVyaW9uIHVzZWQgdG8gbWF0Y2ggYSB0cmFuc2l0aW9uLlxuICpcbiAqIEEgW1tHbG9iXV0gc3RyaW5nIHRoYXQgbWF0Y2hlcyB0aGUgbmFtZSBvZiBhIHN0YXRlLlxuICpcbiAqIE9yLCBhIGZ1bmN0aW9uIHdpdGggdGhlIHNpZ25hdHVyZSBgZnVuY3Rpb24oc3RhdGUsIHRyYW5zaXRpb24pIHsgcmV0dXJuIG1hdGNoZXM7IH1gXG4gKiB3aGljaCBzaG91bGQgcmV0dXJuIGEgYm9vbGVhbiB0byBpbmRpY2F0ZSBpZiBhIHN0YXRlIG1hdGNoZXMuXG4gKlxuICogT3IsIGB0cnVlYCB0byBhbHdheXMgbWF0Y2hcbiAqL1xuZXhwb3J0IHR5cGUgSG9va01hdGNoQ3JpdGVyaW9uID0gc3RyaW5nIHwgSVN0YXRlTWF0Y2ggfCBib29sZWFuO1xuXG5lbnVtIFRyYW5zaXRpb25Ib29rUGhhc2Uge1xuICBDUkVBVEUsXG4gIEJFRk9SRSxcbiAgUlVOLFxuICBTVUNDRVNTLFxuICBFUlJPUixcbn1cbmVudW0gVHJhbnNpdGlvbkhvb2tTY29wZSB7XG4gIFRSQU5TSVRJT04sXG4gIFNUQVRFLFxufVxuXG5leHBvcnQgeyBUcmFuc2l0aW9uSG9va1BoYXNlLCBUcmFuc2l0aW9uSG9va1Njb3BlIH07XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIHRyYW5zaXRpb24gKi8gLyoqICovXG5pbXBvcnQgeyBUcmFuc2l0aW9uSG9va09wdGlvbnMsIEhvb2tSZXN1bHQsIFRyYW5zaXRpb25Ib29rUGhhc2UgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBkZWZhdWx0cywgbm9vcCwgc2lsZW50UmVqZWN0aW9uIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBmblRvU3RyaW5nLCBtYXhMZW5ndGggfSBmcm9tICcuLi9jb21tb24vc3RyaW5ncyc7XG5pbXBvcnQgeyBpc1Byb21pc2UgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBpcywgcGFyc2UgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IHRyYWNlIH0gZnJvbSAnLi4vY29tbW9uL3RyYWNlJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyBSZWplY3Rpb24gfSBmcm9tICcuL3JlamVjdEZhY3RvcnknO1xuaW1wb3J0IHsgVGFyZ2V0U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS90YXJnZXRTdGF0ZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uIH0gZnJvbSAnLi90cmFuc2l0aW9uJztcbmltcG9ydCB7IFRyYW5zaXRpb25FdmVudFR5cGUgfSBmcm9tICcuL3RyYW5zaXRpb25FdmVudFR5cGUnO1xuaW1wb3J0IHsgUmVnaXN0ZXJlZEhvb2sgfSBmcm9tICcuL2hvb2tSZWdpc3RyeSc7XG5pbXBvcnQgeyBTdGF0ZURlY2xhcmF0aW9uIH0gZnJvbSAnLi4vc3RhdGUvaW50ZXJmYWNlJztcblxuY29uc3QgZGVmYXVsdE9wdGlvbnM6IFRyYW5zaXRpb25Ib29rT3B0aW9ucyA9IHtcbiAgY3VycmVudDogbm9vcCxcbiAgdHJhbnNpdGlvbjogbnVsbCxcbiAgdHJhY2VEYXRhOiB7fSxcbiAgYmluZDogbnVsbCxcbn07XG5cbmV4cG9ydCB0eXBlIEdldFJlc3VsdEhhbmRsZXIgPSAoaG9vazogVHJhbnNpdGlvbkhvb2spID0+IFJlc3VsdEhhbmRsZXI7XG5leHBvcnQgdHlwZSBHZXRFcnJvckhhbmRsZXIgPSAoaG9vazogVHJhbnNpdGlvbkhvb2spID0+IEVycm9ySGFuZGxlcjtcblxuZXhwb3J0IHR5cGUgUmVzdWx0SGFuZGxlciA9IChyZXN1bHQ6IEhvb2tSZXN1bHQpID0+IFByb21pc2U8SG9va1Jlc3VsdD47XG5leHBvcnQgdHlwZSBFcnJvckhhbmRsZXIgPSAoZXJyb3I6IGFueSkgPT4gUHJvbWlzZTxhbnk+O1xuXG4vKiogQGhpZGRlbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zaXRpb25Ib29rIHtcbiAgdHlwZTogVHJhbnNpdGlvbkV2ZW50VHlwZTtcblxuICAvKipcbiAgICogVGhlc2UgR2V0UmVzdWx0SGFuZGxlcihzKSBhcmUgdXNlZCBieSBbW2ludm9rZUhvb2tdXSBiZWxvd1xuICAgKiBFYWNoIEhvb2tUeXBlIGNob29zZXMgYSBHZXRSZXN1bHRIYW5kbGVyIChTZWU6IFtbVHJhbnNpdGlvblNlcnZpY2UuX2RlZmluZUNvcmVFdmVudHNdXSlcbiAgICovXG4gIHN0YXRpYyBIQU5ETEVfUkVTVUxUOiBHZXRSZXN1bHRIYW5kbGVyID0gKGhvb2s6IFRyYW5zaXRpb25Ib29rKSA9PiAocmVzdWx0OiBIb29rUmVzdWx0KSA9PlxuICAgIGhvb2suaGFuZGxlSG9va1Jlc3VsdChyZXN1bHQpO1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgcmVzdWx0IGlzIGEgcHJvbWlzZSByZWplY3Rpb24sIGxvZyBpdC5cbiAgICogT3RoZXJ3aXNlLCBpZ25vcmUgdGhlIHJlc3VsdC5cbiAgICovXG4gIHN0YXRpYyBMT0dfUkVKRUNURURfUkVTVUxUOiBHZXRSZXN1bHRIYW5kbGVyID0gKGhvb2s6IFRyYW5zaXRpb25Ib29rKSA9PiAocmVzdWx0OiBIb29rUmVzdWx0KSA9PiB7XG4gICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgcmVzdWx0LmNhdGNoKGVyciA9PiBob29rLmxvZ0Vycm9yKFJlamVjdGlvbi5ub3JtYWxpemUoZXJyKSkpO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRoZXNlIEdldEVycm9ySGFuZGxlcihzKSBhcmUgdXNlZCBieSBbW2ludm9rZUhvb2tdXSBiZWxvd1xuICAgKiBFYWNoIEhvb2tUeXBlIGNob29zZXMgYSBHZXRFcnJvckhhbmRsZXIgKFNlZTogW1tUcmFuc2l0aW9uU2VydmljZS5fZGVmaW5lQ29yZUV2ZW50c11dKVxuICAgKi9cbiAgc3RhdGljIExPR19FUlJPUjogR2V0RXJyb3JIYW5kbGVyID0gKGhvb2s6IFRyYW5zaXRpb25Ib29rKSA9PiAoZXJyb3I6IGFueSkgPT4gaG9vay5sb2dFcnJvcihlcnJvcik7XG5cbiAgc3RhdGljIFJFSkVDVF9FUlJPUjogR2V0RXJyb3JIYW5kbGVyID0gKGhvb2s6IFRyYW5zaXRpb25Ib29rKSA9PiAoZXJyb3I6IGFueSkgPT4gc2lsZW50UmVqZWN0aW9uKGVycm9yKTtcblxuICBzdGF0aWMgVEhST1dfRVJST1I6IEdldEVycm9ySGFuZGxlciA9IChob29rOiBUcmFuc2l0aW9uSG9vaykgPT4gKGVycm9yOiBhbnkpID0+IHtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfTtcblxuICAvKipcbiAgICogQ2hhaW5zIHRvZ2V0aGVyIGFuIGFycmF5IG9mIFRyYW5zaXRpb25Ib29rcy5cbiAgICpcbiAgICogR2l2ZW4gYSBsaXN0IG9mIFtbVHJhbnNpdGlvbkhvb2tdXSBvYmplY3RzLCBjaGFpbnMgdGhlbSB0b2dldGhlci5cbiAgICogRWFjaCBob29rIGlzIGludm9rZWQgYWZ0ZXIgdGhlIHByZXZpb3VzIG9uZSBjb21wbGV0ZXMuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogdmFyIGhvb2tzOiBUcmFuc2l0aW9uSG9va1tdID0gZ2V0SG9va3MoKTtcbiAgICogbGV0IHByb21pc2U6IFByb21pc2U8YW55PiA9IFRyYW5zaXRpb25Ib29rLmNoYWluKGhvb2tzKTtcbiAgICpcbiAgICogcHJvbWlzZS50aGVuKGhhbmRsZVN1Y2Nlc3MsIGhhbmRsZUVycm9yKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBob29rcyB0aGUgbGlzdCBvZiBob29rcyB0byBjaGFpbiB0b2dldGhlclxuICAgKiBAcGFyYW0gd2FpdEZvciBpZiBwcm92aWRlZCwgdGhlIGNoYWluIGlzIGAudGhlbigpYCdlZCBvZmYgdGhpcyBwcm9taXNlXG4gICAqIEByZXR1cm5zIGEgYFByb21pc2VgIGZvciBzZXF1ZW50aWFsbHkgaW52b2tpbmcgdGhlIGhvb2tzIChpbiBvcmRlcilcbiAgICovXG4gIHN0YXRpYyBjaGFpbihob29rczogVHJhbnNpdGlvbkhvb2tbXSwgd2FpdEZvcj86IFByb21pc2U8YW55Pik6IFByb21pc2U8YW55PiB7XG4gICAgLy8gQ2hhaW4gdGhlIG5leHQgaG9vayBvZmYgdGhlIHByZXZpb3VzXG4gICAgY29uc3QgY3JlYXRlSG9va0NoYWluUiA9IChwcmV2OiBQcm9taXNlPGFueT4sIG5leHRIb29rOiBUcmFuc2l0aW9uSG9vaykgPT4gcHJldi50aGVuKCgpID0+IG5leHRIb29rLmludm9rZUhvb2soKSk7XG4gICAgcmV0dXJuIGhvb2tzLnJlZHVjZShjcmVhdGVIb29rQ2hhaW5SLCB3YWl0Rm9yIHx8IHNlcnZpY2VzLiRxLndoZW4oKSk7XG4gIH1cblxuICAvKipcbiAgICogSW52b2tlcyBhbGwgdGhlIHByb3ZpZGVkIFRyYW5zaXRpb25Ib29rcywgaW4gb3JkZXIuXG4gICAqIEVhY2ggaG9vaydzIHJldHVybiB2YWx1ZSBpcyBjaGVja2VkLlxuICAgKiBJZiBhbnkgaG9vayByZXR1cm5zIGEgcHJvbWlzZSwgdGhlbiB0aGUgcmVzdCBvZiB0aGUgaG9va3MgYXJlIGNoYWluZWQgb2ZmIHRoYXQgcHJvbWlzZSwgYW5kIHRoZSBwcm9taXNlIGlzIHJldHVybmVkLlxuICAgKiBJZiBubyBob29rIHJldHVybnMgYSBwcm9taXNlLCB0aGVuIGFsbCBob29rcyBhcmUgcHJvY2Vzc2VkIHN5bmNocm9ub3VzbHkuXG4gICAqXG4gICAqIEBwYXJhbSBob29rcyB0aGUgbGlzdCBvZiBUcmFuc2l0aW9uSG9va3MgdG8gaW52b2tlXG4gICAqIEBwYXJhbSBkb25lQ2FsbGJhY2sgYSBjYWxsYmFjayB0aGF0IGlzIGludm9rZWQgYWZ0ZXIgYWxsIHRoZSBob29rcyBoYXZlIHN1Y2Nlc3NmdWxseSBjb21wbGV0ZWRcbiAgICpcbiAgICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgYXN5bmMgcmVzdWx0LCBvciB0aGUgcmVzdWx0IG9mIHRoZSBjYWxsYmFja1xuICAgKi9cbiAgc3RhdGljIGludm9rZUhvb2tzPFQ+KGhvb2tzOiBUcmFuc2l0aW9uSG9va1tdLCBkb25lQ2FsbGJhY2s6IChyZXN1bHQ/OiBIb29rUmVzdWx0KSA9PiBUKTogUHJvbWlzZTxhbnk+IHwgVCB7XG4gICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgaG9va3MubGVuZ3RoOyBpZHgrKykge1xuICAgICAgY29uc3QgaG9va1Jlc3VsdCA9IGhvb2tzW2lkeF0uaW52b2tlSG9vaygpO1xuXG4gICAgICBpZiAoaXNQcm9taXNlKGhvb2tSZXN1bHQpKSB7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0hvb2tzID0gaG9va3Muc2xpY2UoaWR4ICsgMSk7XG5cbiAgICAgICAgcmV0dXJuIFRyYW5zaXRpb25Ib29rLmNoYWluKHJlbWFpbmluZ0hvb2tzLCBob29rUmVzdWx0KS50aGVuKGRvbmVDYWxsYmFjayk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRvbmVDYWxsYmFjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1biBhbGwgVHJhbnNpdGlvbkhvb2tzLCBpZ25vcmluZyB0aGVpciByZXR1cm4gdmFsdWUuXG4gICAqL1xuICBzdGF0aWMgcnVuQWxsSG9va3MoaG9va3M6IFRyYW5zaXRpb25Ib29rW10pOiB2b2lkIHtcbiAgICBob29rcy5mb3JFYWNoKGhvb2sgPT4gaG9vay5pbnZva2VIb29rKCkpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSB0cmFuc2l0aW9uOiBUcmFuc2l0aW9uLFxuICAgIHByaXZhdGUgc3RhdGVDb250ZXh0OiBTdGF0ZURlY2xhcmF0aW9uLFxuICAgIHByaXZhdGUgcmVnaXN0ZXJlZEhvb2s6IFJlZ2lzdGVyZWRIb29rLFxuICAgIHByaXZhdGUgb3B0aW9uczogVHJhbnNpdGlvbkhvb2tPcHRpb25zXG4gICkge1xuICAgIHRoaXMub3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1bHRPcHRpb25zKTtcbiAgICB0aGlzLnR5cGUgPSByZWdpc3RlcmVkSG9vay5ldmVudFR5cGU7XG4gIH1cblxuICBwcml2YXRlIGlzU3VwZXJzZWRlZCA9ICgpID0+IHRoaXMudHlwZS5ob29rUGhhc2UgPT09IFRyYW5zaXRpb25Ib29rUGhhc2UuUlVOICYmICF0aGlzLm9wdGlvbnMudHJhbnNpdGlvbi5pc0FjdGl2ZSgpO1xuXG4gIGxvZ0Vycm9yKGVycik6IGFueSB7XG4gICAgdGhpcy50cmFuc2l0aW9uLnJvdXRlci5zdGF0ZVNlcnZpY2UuZGVmYXVsdEVycm9ySGFuZGxlcigpKGVycik7XG4gIH1cblxuICBpbnZva2VIb29rKCk6IFByb21pc2U8SG9va1Jlc3VsdD4gfCB2b2lkIHtcbiAgICBjb25zdCBob29rID0gdGhpcy5yZWdpc3RlcmVkSG9vaztcbiAgICBpZiAoaG9vay5fZGVyZWdpc3RlcmVkKSByZXR1cm47XG5cbiAgICBjb25zdCBub3RDdXJyZW50ID0gdGhpcy5nZXROb3RDdXJyZW50UmVqZWN0aW9uKCk7XG4gICAgaWYgKG5vdEN1cnJlbnQpIHJldHVybiBub3RDdXJyZW50O1xuXG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICB0cmFjZS50cmFjZUhvb2tJbnZvY2F0aW9uKHRoaXMsIHRoaXMudHJhbnNpdGlvbiwgb3B0aW9ucyk7XG5cbiAgICBjb25zdCBpbnZva2VDYWxsYmFjayA9ICgpID0+IGhvb2suY2FsbGJhY2suY2FsbChvcHRpb25zLmJpbmQsIHRoaXMudHJhbnNpdGlvbiwgdGhpcy5zdGF0ZUNvbnRleHQpO1xuXG4gICAgY29uc3Qgbm9ybWFsaXplRXJyID0gZXJyID0+IFJlamVjdGlvbi5ub3JtYWxpemUoZXJyKS50b1Byb21pc2UoKTtcblxuICAgIGNvbnN0IGhhbmRsZUVycm9yID0gZXJyID0+IGhvb2suZXZlbnRUeXBlLmdldEVycm9ySGFuZGxlcih0aGlzKShlcnIpO1xuXG4gICAgY29uc3QgaGFuZGxlUmVzdWx0ID0gcmVzdWx0ID0+IGhvb2suZXZlbnRUeXBlLmdldFJlc3VsdEhhbmRsZXIodGhpcykocmVzdWx0KTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBpbnZva2VDYWxsYmFjaygpO1xuXG4gICAgICBpZiAoIXRoaXMudHlwZS5zeW5jaHJvbm91cyAmJiBpc1Byb21pc2UocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0LmNhdGNoKG5vcm1hbGl6ZUVycikudGhlbihoYW5kbGVSZXN1bHQsIGhhbmRsZUVycm9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vIElmIGNhbGxiYWNrIHRocm93cyAoc3luY2hyb25vdXNseSlcbiAgICAgIHJldHVybiBoYW5kbGVFcnJvcihSZWplY3Rpb24ubm9ybWFsaXplKGVycikpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoaG9vay5pbnZva2VMaW1pdCAmJiArK2hvb2suaW52b2tlQ291bnQgPj0gaG9vay5pbnZva2VMaW1pdCkge1xuICAgICAgICBob29rLmRlcmVnaXN0ZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgaGFuZGxlcyB0aGUgcmV0dXJuIHZhbHVlIG9mIGEgVHJhbnNpdGlvbiBIb29rLlxuICAgKlxuICAgKiBBIGhvb2sgY2FuIHJldHVybiBmYWxzZSAoY2FuY2VsKSwgYSBUYXJnZXRTdGF0ZSAocmVkaXJlY3QpLFxuICAgKiBvciBhIHByb21pc2UgKHdoaWNoIG1heSBsYXRlciByZXNvbHZlIHRvIGZhbHNlIG9yIGEgcmVkaXJlY3QpXG4gICAqXG4gICAqIFRoaXMgYWxzbyBoYW5kbGVzIFwidHJhbnNpdGlvbiBzdXBlcnNlZGVkXCIgLS0gd2hlbiBhIG5ldyB0cmFuc2l0aW9uXG4gICAqIHdhcyBzdGFydGVkIHdoaWxlIHRoZSBob29rIHdhcyBzdGlsbCBydW5uaW5nXG4gICAqL1xuICBoYW5kbGVIb29rUmVzdWx0KHJlc3VsdDogSG9va1Jlc3VsdCk6IFByb21pc2U8SG9va1Jlc3VsdD4ge1xuICAgIGNvbnN0IG5vdEN1cnJlbnQgPSB0aGlzLmdldE5vdEN1cnJlbnRSZWplY3Rpb24oKTtcbiAgICBpZiAobm90Q3VycmVudCkgcmV0dXJuIG5vdEN1cnJlbnQ7XG5cbiAgICAvLyBIb29rIHJldHVybmVkIGEgcHJvbWlzZVxuICAgIGlmIChpc1Byb21pc2UocmVzdWx0KSkge1xuICAgICAgLy8gV2FpdCBmb3IgdGhlIHByb21pc2UsIHRoZW4gcmVwcm9jZXNzIHdpdGggdGhlIHJlc3VsdGluZyB2YWx1ZVxuICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKHZhbCA9PiB0aGlzLmhhbmRsZUhvb2tSZXN1bHQodmFsKSk7XG4gICAgfVxuXG4gICAgdHJhY2UudHJhY2VIb29rUmVzdWx0KHJlc3VsdCwgdGhpcy50cmFuc2l0aW9uLCB0aGlzLm9wdGlvbnMpO1xuXG4gICAgLy8gSG9vayByZXR1cm5lZCBmYWxzZVxuICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAvLyBBYm9ydCB0aGlzIFRyYW5zaXRpb25cbiAgICAgIHJldHVybiBSZWplY3Rpb24uYWJvcnRlZCgnSG9vayBhYm9ydGVkIHRyYW5zaXRpb24nKS50b1Byb21pc2UoKTtcbiAgICB9XG5cbiAgICBjb25zdCBpc1RhcmdldFN0YXRlID0gaXMoVGFyZ2V0U3RhdGUpO1xuICAgIC8vIGhvb2sgcmV0dXJuZWQgYSBUYXJnZXRTdGF0ZVxuICAgIGlmIChpc1RhcmdldFN0YXRlKHJlc3VsdCkpIHtcbiAgICAgIC8vIEhhbHQgdGhlIGN1cnJlbnQgVHJhbnNpdGlvbiBhbmQgcmVkaXJlY3QgKGEgbmV3IFRyYW5zaXRpb24pIHRvIHRoZSBUYXJnZXRTdGF0ZS5cbiAgICAgIHJldHVybiBSZWplY3Rpb24ucmVkaXJlY3RlZChyZXN1bHQpLnRvUHJvbWlzZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBSZWplY3Rpb24gcHJvbWlzZSBpZiB0aGUgdHJhbnNpdGlvbiBpcyBubyBsb25nZXIgY3VycmVudCBkdWVcbiAgICogdG8gYSBzdG9wcGVkIHJvdXRlciAoZGlzcG9zZWQpLCBvciBhIG5ldyB0cmFuc2l0aW9uIGhhcyBzdGFydGVkIGFuZCBzdXBlcnNlZGVkIHRoaXMgb25lLlxuICAgKi9cbiAgcHJpdmF0ZSBnZXROb3RDdXJyZW50UmVqZWN0aW9uKCkge1xuICAgIGNvbnN0IHJvdXRlciA9IHRoaXMudHJhbnNpdGlvbi5yb3V0ZXI7XG5cbiAgICAvLyBUaGUgcm91dGVyIGlzIHN0b3BwZWRcbiAgICBpZiAocm91dGVyLl9kaXNwb3NlZCkge1xuICAgICAgcmV0dXJuIFJlamVjdGlvbi5hYm9ydGVkKGBVSVJvdXRlciBpbnN0YW5jZSAjJHtyb3V0ZXIuJGlkfSBoYXMgYmVlbiBzdG9wcGVkIChkaXNwb3NlZClgKS50b1Byb21pc2UoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy50cmFuc2l0aW9uLl9hYm9ydGVkKSB7XG4gICAgICByZXR1cm4gUmVqZWN0aW9uLmFib3J0ZWQoKS50b1Byb21pc2UoKTtcbiAgICB9XG5cbiAgICAvLyBUaGlzIHRyYW5zaXRpb24gaXMgbm8gbG9uZ2VyIGN1cnJlbnQuXG4gICAgLy8gQW5vdGhlciB0cmFuc2l0aW9uIHN0YXJ0ZWQgd2hpbGUgdGhpcyBob29rIHdhcyBzdGlsbCBydW5uaW5nLlxuICAgIGlmICh0aGlzLmlzU3VwZXJzZWRlZCgpKSB7XG4gICAgICAvLyBBYm9ydCB0aGlzIHRyYW5zaXRpb25cbiAgICAgIHJldHVybiBSZWplY3Rpb24uc3VwZXJzZWRlZCh0aGlzLm9wdGlvbnMuY3VycmVudCgpKS50b1Byb21pc2UoKTtcbiAgICB9XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICBjb25zdCB7IG9wdGlvbnMsIHJlZ2lzdGVyZWRIb29rIH0gPSB0aGlzO1xuICAgIGNvbnN0IGV2ZW50ID0gcGFyc2UoJ3RyYWNlRGF0YS5ob29rVHlwZScpKG9wdGlvbnMpIHx8ICdpbnRlcm5hbCcsXG4gICAgICBjb250ZXh0ID0gcGFyc2UoJ3RyYWNlRGF0YS5jb250ZXh0LnN0YXRlLm5hbWUnKShvcHRpb25zKSB8fCBwYXJzZSgndHJhY2VEYXRhLmNvbnRleHQnKShvcHRpb25zKSB8fCAndW5rbm93bicsXG4gICAgICBuYW1lID0gZm5Ub1N0cmluZyhyZWdpc3RlcmVkSG9vay5jYWxsYmFjayk7XG4gICAgcmV0dXJuIGAke2V2ZW50fSBjb250ZXh0OiAke2NvbnRleHR9LCAke21heExlbmd0aCgyMDAsIG5hbWUpfWA7XG4gIH1cbn1cbiIsIi8qKiBAcHVibGljYXBpIEBtb2R1bGUgdHJhbnNpdGlvbiAqLyAvKiogKi9cbmltcG9ydCB7IGlzU3RyaW5nLCBpc0Z1bmN0aW9uLCBHbG9iLCBleHRlbmQsIHJlbW92ZUZyb20sIHRhaWwsIHZhbHVlcywgaWRlbnRpdHksIG1hcE9iaiB9IGZyb20gJy4uL2NvbW1vbic7XG5pbXBvcnQgeyBQYXRoTm9kZSB9IGZyb20gJy4uL3BhdGgvcGF0aE5vZGUnO1xuaW1wb3J0IHtcbiAgVHJhbnNpdGlvblN0YXRlSG9va0ZuLFxuICBUcmFuc2l0aW9uSG9va0ZuLFxuICBUcmFuc2l0aW9uSG9va1BoYXNlLCAvLyBoYXMgb3IgaXMgdXNpbmdcbiAgVHJhbnNpdGlvbkhvb2tTY29wZSxcbiAgSUhvb2tSZWdpc3RyeSxcbiAgUGF0aFR5cGUsXG59IGZyb20gJy4vaW50ZXJmYWNlJztcblxuaW1wb3J0IHtcbiAgSG9va1JlZ09wdGlvbnMsXG4gIEhvb2tNYXRjaENyaXRlcmlhLFxuICBUcmVlQ2hhbmdlcyxcbiAgSG9va01hdGNoQ3JpdGVyaW9uLFxuICBJTWF0Y2hpbmdOb2RlcyxcbiAgSG9va0ZuLFxufSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uIH0gZnJvbSAnLi90cmFuc2l0aW9uJztcbmltcG9ydCB7IFN0YXRlT2JqZWN0IH0gZnJvbSAnLi4vc3RhdGUvc3RhdGVPYmplY3QnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbkV2ZW50VHlwZSB9IGZyb20gJy4vdHJhbnNpdGlvbkV2ZW50VHlwZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uU2VydmljZSB9IGZyb20gJy4vdHJhbnNpdGlvblNlcnZpY2UnO1xuXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGdpdmVuIHN0YXRlIG1hdGNoZXMgdGhlIG1hdGNoQ3JpdGVyaWFcbiAqXG4gKiBAaGlkZGVuXG4gKlxuICogQHBhcmFtIHN0YXRlIGEgU3RhdGUgT2JqZWN0IHRvIHRlc3QgYWdhaW5zdFxuICogQHBhcmFtIGNyaXRlcmlvblxuICogLSBJZiBhIHN0cmluZywgbWF0Y2hTdGF0ZSB1c2VzIHRoZSBzdHJpbmcgYXMgYSBnbG9iLW1hdGNoZXIgYWdhaW5zdCB0aGUgc3RhdGUgbmFtZVxuICogLSBJZiBhbiBhcnJheSAob2Ygc3RyaW5ncyksIG1hdGNoU3RhdGUgdXNlcyBlYWNoIHN0cmluZyBpbiB0aGUgYXJyYXkgYXMgYSBnbG9iLW1hdGNoZXJzIGFnYWluc3QgdGhlIHN0YXRlIG5hbWVcbiAqICAgYW5kIHJldHVybnMgYSBwb3NpdGl2ZSBtYXRjaCBpZiBhbnkgb2YgdGhlIGdsb2JzIG1hdGNoLlxuICogLSBJZiBhIGZ1bmN0aW9uLCBtYXRjaFN0YXRlIGNhbGxzIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBzdGF0ZSBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBmdW5jdGlvbidzIHJlc3VsdCBpcyB0cnV0aHkuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoU3RhdGUoc3RhdGU6IFN0YXRlT2JqZWN0LCBjcml0ZXJpb246IEhvb2tNYXRjaENyaXRlcmlvbiwgdHJhbnNpdGlvbjogVHJhbnNpdGlvbikge1xuICBjb25zdCB0b01hdGNoID0gaXNTdHJpbmcoY3JpdGVyaW9uKSA/IFtjcml0ZXJpb25dIDogY3JpdGVyaW9uO1xuXG4gIGZ1bmN0aW9uIG1hdGNoR2xvYnMoX3N0YXRlOiBTdGF0ZU9iamVjdCkge1xuICAgIGNvbnN0IGdsb2JTdHJpbmdzID0gPHN0cmluZ1tdPnRvTWF0Y2g7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnbG9iU3RyaW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZ2xvYiA9IG5ldyBHbG9iKGdsb2JTdHJpbmdzW2ldKTtcblxuICAgICAgaWYgKChnbG9iICYmIGdsb2IubWF0Y2hlcyhfc3RhdGUubmFtZSkpIHx8ICghZ2xvYiAmJiBnbG9iU3RyaW5nc1tpXSA9PT0gX3N0YXRlLm5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBtYXRjaEZuID0gPGFueT4oaXNGdW5jdGlvbih0b01hdGNoKSA/IHRvTWF0Y2ggOiBtYXRjaEdsb2JzKTtcbiAgcmV0dXJuICEhbWF0Y2hGbihzdGF0ZSwgdHJhbnNpdGlvbik7XG59XG5cbi8qKlxuICogQGludGVybmFsYXBpXG4gKiBUaGUgcmVnaXN0cmF0aW9uIGRhdGEgZm9yIGEgcmVnaXN0ZXJlZCB0cmFuc2l0aW9uIGhvb2tcbiAqL1xuZXhwb3J0IGNsYXNzIFJlZ2lzdGVyZWRIb29rIHtcbiAgcHJpb3JpdHk6IG51bWJlcjtcbiAgYmluZDogYW55O1xuICBpbnZva2VDb3VudCA9IDA7XG4gIGludm9rZUxpbWl0OiBudW1iZXI7XG4gIF9kZXJlZ2lzdGVyZWQgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgdHJhblN2YzogVHJhbnNpdGlvblNlcnZpY2UsXG4gICAgcHVibGljIGV2ZW50VHlwZTogVHJhbnNpdGlvbkV2ZW50VHlwZSxcbiAgICBwdWJsaWMgY2FsbGJhY2s6IEhvb2tGbixcbiAgICBwdWJsaWMgbWF0Y2hDcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsXG4gICAgcHVibGljIHJlbW92ZUhvb2tGcm9tUmVnaXN0cnk6IChob29rOiBSZWdpc3RlcmVkSG9vaykgPT4gdm9pZCxcbiAgICBvcHRpb25zOiBIb29rUmVnT3B0aW9ucyA9IHt9IGFzIGFueVxuICApIHtcbiAgICB0aGlzLnByaW9yaXR5ID0gb3B0aW9ucy5wcmlvcml0eSB8fCAwO1xuICAgIHRoaXMuYmluZCA9IG9wdGlvbnMuYmluZCB8fCBudWxsO1xuICAgIHRoaXMuaW52b2tlTGltaXQgPSBvcHRpb25zLmludm9rZUxpbWl0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG1hdGNoaW5nIFtbUGF0aE5vZGVdXXNcbiAgICpcbiAgICogR2l2ZW4gYW4gYXJyYXkgb2YgW1tQYXRoTm9kZV1dcywgYW5kIGEgW1tIb29rTWF0Y2hDcml0ZXJpb25dXSwgcmV0dXJucyBhbiBhcnJheSBjb250YWluaW5nXG4gICAqIHRoZSBbW1BhdGhOb2RlXV1zIHRoYXQgdGhlIGNyaXRlcmlhIG1hdGNoZXMsIG9yIGBudWxsYCBpZiB0aGVyZSB3ZXJlIG5vIG1hdGNoaW5nIG5vZGVzLlxuICAgKlxuICAgKiBSZXR1cm5pbmcgYG51bGxgIGlzIHNpZ25pZmljYW50IHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gdGhlIGRlZmF1bHRcbiAgICogXCJtYXRjaC1hbGwgY3JpdGVyaW9uIHZhbHVlXCIgb2YgYHRydWVgIGNvbXBhcmVkIHRvIGEgYCgpID0+IHRydWVgIGZ1bmN0aW9uLFxuICAgKiB3aGVuIHRoZSBub2RlcyBpcyBhbiBlbXB0eSBhcnJheS5cbiAgICpcbiAgICogVGhpcyBpcyB1c2VmdWwgdG8gYWxsb3cgYSB0cmFuc2l0aW9uIG1hdGNoIGNyaXRlcmlhIG9mIGBlbnRlcmluZzogdHJ1ZWBcbiAgICogdG8gc3RpbGwgbWF0Y2ggYSB0cmFuc2l0aW9uLCBldmVuIHdoZW4gYGVudGVyaW5nID09PSBbXWAuICBDb250cmFzdCB0aGF0XG4gICAqIHdpdGggYGVudGVyaW5nOiAoc3RhdGUpID0+IHRydWVgIHdoaWNoIG9ubHkgbWF0Y2hlcyB3aGVuIGEgc3RhdGUgaXMgYWN0dWFsbHlcbiAgICogYmVpbmcgZW50ZXJlZC5cbiAgICovXG4gIHByaXZhdGUgX21hdGNoaW5nTm9kZXMobm9kZXM6IFBhdGhOb2RlW10sIGNyaXRlcmlvbjogSG9va01hdGNoQ3JpdGVyaW9uLCB0cmFuc2l0aW9uOiBUcmFuc2l0aW9uKTogUGF0aE5vZGVbXSB7XG4gICAgaWYgKGNyaXRlcmlvbiA9PT0gdHJ1ZSkgcmV0dXJuIG5vZGVzO1xuICAgIGNvbnN0IG1hdGNoaW5nID0gbm9kZXMuZmlsdGVyKG5vZGUgPT4gbWF0Y2hTdGF0ZShub2RlLnN0YXRlLCBjcml0ZXJpb24sIHRyYW5zaXRpb24pKTtcbiAgICByZXR1cm4gbWF0Y2hpbmcubGVuZ3RoID8gbWF0Y2hpbmcgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRlZmF1bHQgbWF0Y2ggY3JpdGVyaWEgKGFsbCBgdHJ1ZWApXG4gICAqXG4gICAqIFJldHVybnMgYW4gb2JqZWN0IHdoaWNoIGhhcyBhbGwgdGhlIGNyaXRlcmlhIG1hdGNoIHBhdGhzIGFzIGtleXMgYW5kIGB0cnVlYCBhcyB2YWx1ZXMsIGkuZS46XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICB0bzogdHJ1ZSxcbiAgICogICBmcm9tOiB0cnVlLFxuICAgKiAgIGVudGVyaW5nOiB0cnVlLFxuICAgKiAgIGV4aXRpbmc6IHRydWUsXG4gICAqICAgcmV0YWluZWQ6IHRydWUsXG4gICAqIH1cbiAgICovXG4gIHByaXZhdGUgX2dldERlZmF1bHRNYXRjaENyaXRlcmlhKCk6IEhvb2tNYXRjaENyaXRlcmlhIHtcbiAgICByZXR1cm4gbWFwT2JqKHRoaXMudHJhblN2Yy5fcGx1Z2luYXBpLl9nZXRQYXRoVHlwZXMoKSwgKCkgPT4gdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBtYXRjaGluZyBub2RlcyBhcyBbW0lNYXRjaGluZ05vZGVzXV1cbiAgICpcbiAgICogQ3JlYXRlIGEgSU1hdGNoaW5nTm9kZXMgb2JqZWN0IGZyb20gdGhlIFRyYW5zaXRpb25Ib29rVHlwZXMgdGhhdCBpcyByb3VnaGx5IGVxdWl2YWxlbnQgdG86XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGxldCBtYXRjaGVzOiBJTWF0Y2hpbmdOb2RlcyA9IHtcbiAgICogICB0bzogICAgICAgX21hdGNoaW5nTm9kZXMoW3RhaWwodHJlZUNoYW5nZXMudG8pXSwgICBtYy50byksXG4gICAqICAgZnJvbTogICAgIF9tYXRjaGluZ05vZGVzKFt0YWlsKHRyZWVDaGFuZ2VzLmZyb20pXSwgbWMuZnJvbSksXG4gICAqICAgZXhpdGluZzogIF9tYXRjaGluZ05vZGVzKHRyZWVDaGFuZ2VzLmV4aXRpbmcsICAgICAgbWMuZXhpdGluZyksXG4gICAqICAgcmV0YWluZWQ6IF9tYXRjaGluZ05vZGVzKHRyZWVDaGFuZ2VzLnJldGFpbmVkLCAgICAgbWMucmV0YWluZWQpLFxuICAgKiAgIGVudGVyaW5nOiBfbWF0Y2hpbmdOb2Rlcyh0cmVlQ2hhbmdlcy5lbnRlcmluZywgICAgIG1jLmVudGVyaW5nKSxcbiAgICogfTtcbiAgICogYGBgXG4gICAqL1xuICBwcml2YXRlIF9nZXRNYXRjaGluZ05vZGVzKHRyZWVDaGFuZ2VzOiBUcmVlQ2hhbmdlcywgdHJhbnNpdGlvbjogVHJhbnNpdGlvbik6IElNYXRjaGluZ05vZGVzIHtcbiAgICBjb25zdCBjcml0ZXJpYSA9IGV4dGVuZCh0aGlzLl9nZXREZWZhdWx0TWF0Y2hDcml0ZXJpYSgpLCB0aGlzLm1hdGNoQ3JpdGVyaWEpO1xuICAgIGNvbnN0IHBhdGhzOiBQYXRoVHlwZVtdID0gdmFsdWVzKHRoaXMudHJhblN2Yy5fcGx1Z2luYXBpLl9nZXRQYXRoVHlwZXMoKSk7XG5cbiAgICByZXR1cm4gcGF0aHMucmVkdWNlKFxuICAgICAgKG1uOiBJTWF0Y2hpbmdOb2RlcywgcGF0aHR5cGU6IFBhdGhUeXBlKSA9PiB7XG4gICAgICAgIC8vIFNUQVRFIHNjb3BlIGNyaXRlcmlhIG1hdGNoZXMgYWdhaW5zdCBldmVyeSBub2RlIGluIHRoZSBwYXRoLlxuICAgICAgICAvLyBUUkFOU0lUSU9OIHNjb3BlIGNyaXRlcmlhIG1hdGNoZXMgYWdhaW5zdCBvbmx5IHRoZSBsYXN0IG5vZGUgaW4gdGhlIHBhdGhcbiAgICAgICAgY29uc3QgaXNTdGF0ZUhvb2sgPSBwYXRodHlwZS5zY29wZSA9PT0gVHJhbnNpdGlvbkhvb2tTY29wZS5TVEFURTtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRyZWVDaGFuZ2VzW3BhdGh0eXBlLm5hbWVdIHx8IFtdO1xuICAgICAgICBjb25zdCBub2RlczogUGF0aE5vZGVbXSA9IGlzU3RhdGVIb29rID8gcGF0aCA6IFt0YWlsKHBhdGgpXTtcblxuICAgICAgICBtbltwYXRodHlwZS5uYW1lXSA9IHRoaXMuX21hdGNoaW5nTm9kZXMobm9kZXMsIGNyaXRlcmlhW3BhdGh0eXBlLm5hbWVdLCB0cmFuc2l0aW9uKTtcbiAgICAgICAgcmV0dXJuIG1uO1xuICAgICAgfSxcbiAgICAgIHt9IGFzIElNYXRjaGluZ05vZGVzXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIHRoaXMgaG9vaydzIFtbbWF0Y2hDcml0ZXJpYV1dIG1hdGNoIHRoZSBnaXZlbiBbW1RyZWVDaGFuZ2VzXV1cbiAgICpcbiAgICogQHJldHVybnMgYW4gSU1hdGNoaW5nTm9kZXMgb2JqZWN0LCBvciBudWxsLiBJZiBhbiBJTWF0Y2hpbmdOb2RlcyBvYmplY3QgaXMgcmV0dXJuZWQsIGl0cyB2YWx1ZXNcbiAgICogYXJlIHRoZSBtYXRjaGluZyBbW1BhdGhOb2RlXV1zIGZvciBlYWNoIFtbSG9va01hdGNoQ3JpdGVyaW9uXV0gKHRvLCBmcm9tLCBleGl0aW5nLCByZXRhaW5lZCwgZW50ZXJpbmcpXG4gICAqL1xuICBtYXRjaGVzKHRyZWVDaGFuZ2VzOiBUcmVlQ2hhbmdlcywgdHJhbnNpdGlvbjogVHJhbnNpdGlvbik6IElNYXRjaGluZ05vZGVzIHtcbiAgICBjb25zdCBtYXRjaGVzID0gdGhpcy5fZ2V0TWF0Y2hpbmdOb2Rlcyh0cmVlQ2hhbmdlcywgdHJhbnNpdGlvbik7XG5cbiAgICAvLyBDaGVjayBpZiBhbGwgdGhlIGNyaXRlcmlhIG1hdGNoZWQgdGhlIFRyZWVDaGFuZ2VzIG9iamVjdFxuICAgIGNvbnN0IGFsbE1hdGNoZWQgPSB2YWx1ZXMobWF0Y2hlcykuZXZlcnkoaWRlbnRpdHkpO1xuICAgIHJldHVybiBhbGxNYXRjaGVkID8gbWF0Y2hlcyA6IG51bGw7XG4gIH1cblxuICBkZXJlZ2lzdGVyKCkge1xuICAgIHRoaXMucmVtb3ZlSG9va0Zyb21SZWdpc3RyeSh0aGlzKTtcbiAgICB0aGlzLl9kZXJlZ2lzdGVyZWQgPSB0cnVlO1xuICB9XG59XG5cbi8qKiBAaGlkZGVuIFJldHVybiBhIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBvZiB0aGUgcmVxdWVzdGVkIHR5cGUuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZUV2ZW50KFxuICByZWdpc3RyeTogSUhvb2tSZWdpc3RyeSxcbiAgdHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlLFxuICBldmVudFR5cGU6IFRyYW5zaXRpb25FdmVudFR5cGVcbikge1xuICAvLyBDcmVhdGUgdGhlIG9iamVjdCB3aGljaCBob2xkcyB0aGUgcmVnaXN0ZXJlZCB0cmFuc2l0aW9uIGhvb2tzLlxuICBjb25zdCBfcmVnaXN0ZXJlZEhvb2tzID0gKHJlZ2lzdHJ5Ll9yZWdpc3RlcmVkSG9va3MgPSByZWdpc3RyeS5fcmVnaXN0ZXJlZEhvb2tzIHx8IHt9KTtcbiAgY29uc3QgaG9va3MgPSAoX3JlZ2lzdGVyZWRIb29rc1tldmVudFR5cGUubmFtZV0gPSBbXSk7XG4gIGNvbnN0IHJlbW92ZUhvb2tGbjogKGhvb2s6IFJlZ2lzdGVyZWRIb29rKSA9PiB2b2lkID0gcmVtb3ZlRnJvbShob29rcyk7XG5cbiAgLy8gQ3JlYXRlIGhvb2sgcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIG9uIHRoZSBJSG9va1JlZ2lzdHJ5IGZvciB0aGUgZXZlbnRcbiAgcmVnaXN0cnlbZXZlbnRUeXBlLm5hbWVdID0gaG9va1JlZ2lzdHJhdGlvbkZuO1xuXG4gIGZ1bmN0aW9uIGhvb2tSZWdpc3RyYXRpb25GbihtYXRjaE9iamVjdCwgY2FsbGJhY2ssIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHJlZ2lzdGVyZWRIb29rID0gbmV3IFJlZ2lzdGVyZWRIb29rKFxuICAgICAgdHJhbnNpdGlvblNlcnZpY2UsXG4gICAgICBldmVudFR5cGUsXG4gICAgICBjYWxsYmFjayxcbiAgICAgIG1hdGNoT2JqZWN0LFxuICAgICAgcmVtb3ZlSG9va0ZuLFxuICAgICAgb3B0aW9uc1xuICAgICk7XG4gICAgaG9va3MucHVzaChyZWdpc3RlcmVkSG9vayk7XG4gICAgcmV0dXJuIHJlZ2lzdGVyZWRIb29rLmRlcmVnaXN0ZXIuYmluZChyZWdpc3RlcmVkSG9vayk7XG4gIH1cblxuICByZXR1cm4gaG9va1JlZ2lzdHJhdGlvbkZuO1xufVxuIiwiLyoqIEBwdWJsaWNhcGkgQG1vZHVsZSB0cmFuc2l0aW9uICovIC8qKiAqL1xuaW1wb3J0IHsgZXh0ZW5kLCB0YWlsLCBhc3NlcnRQcmVkaWNhdGUsIHVubmVzdFIsIGlkZW50aXR5IH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBpc0FycmF5IH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuXG5pbXBvcnQge1xuICBUcmFuc2l0aW9uT3B0aW9ucyxcbiAgVHJhbnNpdGlvbkhvb2tPcHRpb25zLFxuICBJSG9va1JlZ2lzdHJ5LFxuICBUcmVlQ2hhbmdlcyxcbiAgSU1hdGNoaW5nTm9kZXMsXG4gIFRyYW5zaXRpb25Ib29rUGhhc2UsXG4gIFRyYW5zaXRpb25Ib29rU2NvcGUsXG59IGZyb20gJy4vaW50ZXJmYWNlJztcblxuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBUcmFuc2l0aW9uSG9vayB9IGZyb20gJy4vdHJhbnNpdGlvbkhvb2snO1xuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZU9iamVjdCc7XG5pbXBvcnQgeyBQYXRoTm9kZSB9IGZyb20gJy4uL3BhdGgvcGF0aE5vZGUnO1xuaW1wb3J0IHsgVHJhbnNpdGlvblNlcnZpY2UgfSBmcm9tICcuL3RyYW5zaXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IFRyYW5zaXRpb25FdmVudFR5cGUgfSBmcm9tICcuL3RyYW5zaXRpb25FdmVudFR5cGUnO1xuaW1wb3J0IHsgUmVnaXN0ZXJlZEhvb2sgfSBmcm9tICcuL2hvb2tSZWdpc3RyeSc7XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXR1cm5zIGFwcGxpY2FibGUgVHJhbnNpdGlvbkhvb2tzIGZvciBhIHNwZWNpZmljIFRyYW5zaXRpb24gaW5zdGFuY2UuXG4gKlxuICogSG9va3MgKFtbUmVnaXN0ZXJlZEhvb2tdXSkgbWF5IGJlIHJlZ2lzdGVyZWQgZ2xvYmFsbHksIGUuZy4sICR0cmFuc2l0aW9ucy5vbkVudGVyKC4uLiksIG9yIGxvY2FsbHksIGUuZy5cbiAqIG15VHJhbnNpdGlvbi5vbkVudGVyKC4uLikuICBUaGUgSG9va0J1aWxkZXIgZmluZHMgbWF0Y2hpbmcgUmVnaXN0ZXJlZEhvb2tzICh3aGVyZSB0aGUgbWF0Y2ggY3JpdGVyaWEgaXNcbiAqIGRldGVybWluZWQgYnkgdGhlIHR5cGUgb2YgaG9vaylcbiAqXG4gKiBUaGUgSG9va0J1aWxkZXIgYWxzbyBjb252ZXJ0cyBSZWdpc3RlcmVkSG9va3Mgb2JqZWN0cyB0byBUcmFuc2l0aW9uSG9vayBvYmplY3RzLCB3aGljaCBhcmUgdXNlZCB0byBydW4gYSBUcmFuc2l0aW9uLlxuICpcbiAqIFRoZSBIb29rQnVpbGRlciBjb25zdHJ1Y3RvciBpcyBnaXZlbiB0aGUgJHRyYW5zaXRpb25zIHNlcnZpY2UgYW5kIGEgVHJhbnNpdGlvbiBpbnN0YW5jZS4gIFRodXMsIGEgSG9va0J1aWxkZXJcbiAqIGluc3RhbmNlIG1heSBvbmx5IGJlIHVzZWQgZm9yIG9uZSBzcGVjaWZpYyBUcmFuc2l0aW9uIG9iamVjdC4gKHNpZGUgbm90ZTogdGhlIF90cmVlQ2hhbmdlcyBhY2Nlc3NvciBpcyBwcml2YXRlXG4gKiBpbiB0aGUgVHJhbnNpdGlvbiBjbGFzcywgc28gd2UgbXVzdCBhbHNvIHByb3ZpZGUgdGhlIFRyYW5zaXRpb24ncyBfdHJlZUNoYW5nZXMpXG4gKlxuICovXG5leHBvcnQgY2xhc3MgSG9va0J1aWxkZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRyYW5zaXRpb246IFRyYW5zaXRpb24pIHt9XG5cbiAgYnVpbGRIb29rc0ZvclBoYXNlKHBoYXNlOiBUcmFuc2l0aW9uSG9va1BoYXNlKTogVHJhbnNpdGlvbkhvb2tbXSB7XG4gICAgY29uc3QgJHRyYW5zaXRpb25zID0gdGhpcy50cmFuc2l0aW9uLnJvdXRlci50cmFuc2l0aW9uU2VydmljZTtcbiAgICByZXR1cm4gJHRyYW5zaXRpb25zLl9wbHVnaW5hcGlcbiAgICAgIC5fZ2V0RXZlbnRzKHBoYXNlKVxuICAgICAgLm1hcCh0eXBlID0+IHRoaXMuYnVpbGRIb29rcyh0eXBlKSlcbiAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAuZmlsdGVyKGlkZW50aXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIG5ld2x5IGJ1aWx0IFRyYW5zaXRpb25Ib29rIG9iamVjdHMuXG4gICAqXG4gICAqIC0gRmluZHMgYWxsIFJlZ2lzdGVyZWRIb29rcyByZWdpc3RlcmVkIGZvciB0aGUgZ2l2ZW4gYGhvb2tUeXBlYCB3aGljaCBtYXRjaGVkIHRoZSB0cmFuc2l0aW9uJ3MgW1tUcmVlQ2hhbmdlc11dLlxuICAgKiAtIEZpbmRzIFtbUGF0aE5vZGVdXSAob3IgYFBhdGhOb2RlW11gKSB0byB1c2UgYXMgdGhlIFRyYW5zaXRpb25Ib29rIGNvbnRleHQocylcbiAgICogLSBGb3IgZWFjaCBvZiB0aGUgW1tQYXRoTm9kZV1dcywgY3JlYXRlcyBhIFRyYW5zaXRpb25Ib29rXG4gICAqXG4gICAqIEBwYXJhbSBob29rVHlwZSB0aGUgdHlwZSBvZiB0aGUgaG9vayByZWdpc3RyYXRpb24gZnVuY3Rpb24sIGUuZy4sICdvbkVudGVyJywgJ29uRmluaXNoJy5cbiAgICovXG4gIGJ1aWxkSG9va3MoaG9va1R5cGU6IFRyYW5zaXRpb25FdmVudFR5cGUpOiBUcmFuc2l0aW9uSG9va1tdIHtcbiAgICBjb25zdCB0cmFuc2l0aW9uID0gdGhpcy50cmFuc2l0aW9uO1xuICAgIGNvbnN0IHRyZWVDaGFuZ2VzID0gdHJhbnNpdGlvbi50cmVlQ2hhbmdlcygpO1xuXG4gICAgLy8gRmluZCBhbGwgdGhlIG1hdGNoaW5nIHJlZ2lzdGVyZWQgaG9va3MgZm9yIGEgZ2l2ZW4gaG9vayB0eXBlXG4gICAgY29uc3QgbWF0Y2hpbmdIb29rcyA9IHRoaXMuZ2V0TWF0Y2hpbmdIb29rcyhob29rVHlwZSwgdHJlZUNoYW5nZXMsIHRyYW5zaXRpb24pO1xuICAgIGlmICghbWF0Y2hpbmdIb29rcykgcmV0dXJuIFtdO1xuXG4gICAgY29uc3QgYmFzZUhvb2tPcHRpb25zID0gPFRyYW5zaXRpb25Ib29rT3B0aW9ucz57XG4gICAgICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uLFxuICAgICAgY3VycmVudDogdHJhbnNpdGlvbi5vcHRpb25zKCkuY3VycmVudCxcbiAgICB9O1xuXG4gICAgY29uc3QgbWFrZVRyYW5zaXRpb25Ib29rcyA9IChob29rOiBSZWdpc3RlcmVkSG9vaykgPT4ge1xuICAgICAgLy8gRmV0Y2ggdGhlIE5vZGVzIHRoYXQgY2F1c2VkIHRoaXMgaG9vayB0byBtYXRjaC5cbiAgICAgIGNvbnN0IG1hdGNoZXM6IElNYXRjaGluZ05vZGVzID0gaG9vay5tYXRjaGVzKHRyZWVDaGFuZ2VzLCB0cmFuc2l0aW9uKTtcbiAgICAgIC8vIFNlbGVjdCB0aGUgUGF0aE5vZGVbXSB0aGF0IHdpbGwgYmUgdXNlZCBhcyBUcmFuc2l0aW9uSG9vayBjb250ZXh0IG9iamVjdHNcbiAgICAgIGNvbnN0IG1hdGNoaW5nTm9kZXM6IFBhdGhOb2RlW10gPSBtYXRjaGVzW2hvb2tUeXBlLmNyaXRlcmlhTWF0Y2hQYXRoLm5hbWVdO1xuXG4gICAgICAvLyBSZXR1cm4gYW4gYXJyYXkgb2YgSG9va1R1cGxlc1xuICAgICAgcmV0dXJuIG1hdGNoaW5nTm9kZXMubWFwKG5vZGUgPT4ge1xuICAgICAgICBjb25zdCBfb3B0aW9ucyA9IGV4dGVuZChcbiAgICAgICAgICB7XG4gICAgICAgICAgICBiaW5kOiBob29rLmJpbmQsXG4gICAgICAgICAgICB0cmFjZURhdGE6IHsgaG9va1R5cGU6IGhvb2tUeXBlLm5hbWUsIGNvbnRleHQ6IG5vZGUgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJhc2VIb29rT3B0aW9uc1xuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gaG9va1R5cGUuY3JpdGVyaWFNYXRjaFBhdGguc2NvcGUgPT09IFRyYW5zaXRpb25Ib29rU2NvcGUuU1RBVEUgPyBub2RlLnN0YXRlLnNlbGYgOiBudWxsO1xuICAgICAgICBjb25zdCB0cmFuc2l0aW9uSG9vayA9IG5ldyBUcmFuc2l0aW9uSG9vayh0cmFuc2l0aW9uLCBzdGF0ZSwgaG9vaywgX29wdGlvbnMpO1xuICAgICAgICByZXR1cm4gPEhvb2tUdXBsZT57IGhvb2ssIG5vZGUsIHRyYW5zaXRpb25Ib29rIH07XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG1hdGNoaW5nSG9va3NcbiAgICAgIC5tYXAobWFrZVRyYW5zaXRpb25Ib29rcylcbiAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAuc29ydCh0dXBsZVNvcnQoaG9va1R5cGUucmV2ZXJzZVNvcnQpKVxuICAgICAgLm1hcCh0dXBsZSA9PiB0dXBsZS50cmFuc2l0aW9uSG9vayk7XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgYWxsIFJlZ2lzdGVyZWRIb29rcyBmcm9tOlxuICAgKiAtIFRoZSBUcmFuc2l0aW9uIG9iamVjdCBpbnN0YW5jZSBob29rIHJlZ2lzdHJ5XG4gICAqIC0gVGhlIFRyYW5zaXRpb25TZXJ2aWNlICgkdHJhbnNpdGlvbnMpIGdsb2JhbCBob29rIHJlZ2lzdHJ5XG4gICAqXG4gICAqIHdoaWNoIG1hdGNoZWQ6XG4gICAqIC0gdGhlIGV2ZW50VHlwZVxuICAgKiAtIHRoZSBtYXRjaENyaXRlcmlhICh0bywgZnJvbSwgZXhpdGluZywgcmV0YWluZWQsIGVudGVyaW5nKVxuICAgKlxuICAgKiBAcmV0dXJucyBhbiBhcnJheSBvZiBtYXRjaGVkIFtbUmVnaXN0ZXJlZEhvb2tdXXNcbiAgICovXG4gIHB1YmxpYyBnZXRNYXRjaGluZ0hvb2tzKFxuICAgIGhvb2tUeXBlOiBUcmFuc2l0aW9uRXZlbnRUeXBlLFxuICAgIHRyZWVDaGFuZ2VzOiBUcmVlQ2hhbmdlcyxcbiAgICB0cmFuc2l0aW9uOiBUcmFuc2l0aW9uXG4gICk6IFJlZ2lzdGVyZWRIb29rW10ge1xuICAgIGNvbnN0IGlzQ3JlYXRlID0gaG9va1R5cGUuaG9va1BoYXNlID09PSBUcmFuc2l0aW9uSG9va1BoYXNlLkNSRUFURTtcblxuICAgIC8vIEluc3RhbmNlIGFuZCBHbG9iYWwgaG9vayByZWdpc3RyaWVzXG4gICAgY29uc3QgJHRyYW5zaXRpb25zID0gdGhpcy50cmFuc2l0aW9uLnJvdXRlci50cmFuc2l0aW9uU2VydmljZTtcbiAgICBjb25zdCByZWdpc3RyaWVzID0gaXNDcmVhdGUgPyBbJHRyYW5zaXRpb25zXSA6IFt0aGlzLnRyYW5zaXRpb24sICR0cmFuc2l0aW9uc107XG5cbiAgICByZXR1cm4gcmVnaXN0cmllc1xuICAgICAgLm1hcCgocmVnOiBJSG9va1JlZ2lzdHJ5KSA9PiByZWcuZ2V0SG9va3MoaG9va1R5cGUubmFtZSkpIC8vIEdldCBuYW1lZCBob29rcyBmcm9tIHJlZ2lzdHJpZXNcbiAgICAgIC5maWx0ZXIoYXNzZXJ0UHJlZGljYXRlKGlzQXJyYXksIGBicm9rZW4gZXZlbnQgbmFtZWQ6ICR7aG9va1R5cGUubmFtZX1gKSkgLy8gU2FuaXR5IGNoZWNrXG4gICAgICAucmVkdWNlKHVubmVzdFIsIFtdKSAvLyBVbi1uZXN0IFJlZ2lzdGVyZWRIb29rW11bXSB0byBSZWdpc3RlcmVkSG9va1tdIGFycmF5XG4gICAgICAuZmlsdGVyKGhvb2sgPT4gaG9vay5tYXRjaGVzKHRyZWVDaGFuZ2VzLCB0cmFuc2l0aW9uKSk7IC8vIE9ubHkgdGhvc2Ugc2F0aXNmeWluZyBtYXRjaENyaXRlcmlhXG4gIH1cbn1cblxuaW50ZXJmYWNlIEhvb2tUdXBsZSB7XG4gIGhvb2s6IFJlZ2lzdGVyZWRIb29rO1xuICBub2RlOiBQYXRoTm9kZTtcbiAgdHJhbnNpdGlvbkhvb2s6IFRyYW5zaXRpb25Ib29rO1xufVxuXG4vKipcbiAqIEEgZmFjdG9yeSBmb3IgYSBzb3J0IGZ1bmN0aW9uIGZvciBIb29rVHVwbGVzLlxuICpcbiAqIFRoZSBzb3J0IGZ1bmN0aW9uIGZpcnN0IGNvbXBhcmVzIHRoZSBQYXRoTm9kZSBkZXB0aCAoaG93IGRlZXAgaW4gdGhlIHN0YXRlIHRyZWUgYSBub2RlIGlzKSwgdGhlbiBjb21wYXJlc1xuICogdGhlIEV2ZW50SG9vayBwcmlvcml0eS5cbiAqXG4gKiBAcGFyYW0gcmV2ZXJzZURlcHRoU29ydCBhIGJvb2xlYW4sIHdoZW4gdHJ1ZSwgcmV2ZXJzZXMgdGhlIHNvcnQgb3JkZXIgZm9yIHRoZSBub2RlIGRlcHRoXG4gKiBAcmV0dXJucyBhIHR1cGxlIHNvcnQgZnVuY3Rpb25cbiAqL1xuZnVuY3Rpb24gdHVwbGVTb3J0KHJldmVyc2VEZXB0aFNvcnQgPSBmYWxzZSkge1xuICByZXR1cm4gZnVuY3Rpb24gbm9kZURlcHRoVGhlblByaW9yaXR5KGw6IEhvb2tUdXBsZSwgcjogSG9va1R1cGxlKTogbnVtYmVyIHtcbiAgICBjb25zdCBmYWN0b3IgPSByZXZlcnNlRGVwdGhTb3J0ID8gLTEgOiAxO1xuICAgIGNvbnN0IGRlcHRoRGVsdGEgPSAobC5ub2RlLnN0YXRlLnBhdGgubGVuZ3RoIC0gci5ub2RlLnN0YXRlLnBhdGgubGVuZ3RoKSAqIGZhY3RvcjtcbiAgICByZXR1cm4gZGVwdGhEZWx0YSAhPT0gMCA/IGRlcHRoRGVsdGEgOiByLmhvb2sucHJpb3JpdHkgLSBsLmhvb2sucHJpb3JpdHk7XG4gIH07XG59XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIHRyYW5zaXRpb24gKi8gLyoqICovXG5pbXBvcnQgeyB0cmFjZSB9IGZyb20gJy4uL2NvbW1vbi90cmFjZSc7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnLi4vY29tbW9uL3N0cmluZ3MnO1xuaW1wb3J0IHsgbWFwLCBmaW5kLCBleHRlbmQsIG1lcmdlUiwgdGFpbCwgb21pdCwgYXJyYXlUdXBsZXMsIHVubmVzdFIsIGlkZW50aXR5LCBhbnlUcnVlUiB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgaXNPYmplY3QsIGlzVW5kZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgcHJvcCwgcHJvcEVxLCB2YWwsIG5vdCwgaXMgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IFN0YXRlRGVjbGFyYXRpb24sIFN0YXRlT3JOYW1lIH0gZnJvbSAnLi4vc3RhdGUvaW50ZXJmYWNlJztcbmltcG9ydCB7XG4gIFRyYW5zaXRpb25PcHRpb25zLFxuICBUcmVlQ2hhbmdlcyxcbiAgSUhvb2tSZWdpc3RyeSxcbiAgVHJhbnNpdGlvbkhvb2tQaGFzZSxcbiAgUmVnaXN0ZXJlZEhvb2tzLFxuICBIb29rUmVnT3B0aW9ucyxcbiAgSG9va01hdGNoQ3JpdGVyaWEsXG4gIFRyYW5zaXRpb25TdGF0ZUhvb2tGbixcbiAgVHJhbnNpdGlvbkhvb2tGbixcbn0gZnJvbSAnLi9pbnRlcmZhY2UnOyAvLyBoYXMgb3IgaXMgdXNpbmdcbmltcG9ydCB7IFRyYW5zaXRpb25Ib29rIH0gZnJvbSAnLi90cmFuc2l0aW9uSG9vayc7XG5pbXBvcnQgeyBtYXRjaFN0YXRlLCBtYWtlRXZlbnQsIFJlZ2lzdGVyZWRIb29rIH0gZnJvbSAnLi9ob29rUmVnaXN0cnknO1xuaW1wb3J0IHsgSG9va0J1aWxkZXIgfSBmcm9tICcuL2hvb2tCdWlsZGVyJztcbmltcG9ydCB7IFBhdGhOb2RlIH0gZnJvbSAnLi4vcGF0aC9wYXRoTm9kZSc7XG5pbXBvcnQgeyBQYXRoVXRpbHMgfSBmcm9tICcuLi9wYXRoL3BhdGhVdGlscyc7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4uL3N0YXRlL3N0YXRlT2JqZWN0JztcbmltcG9ydCB7IFRhcmdldFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvdGFyZ2V0U3RhdGUnO1xuaW1wb3J0IHsgUGFyYW0gfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuaW1wb3J0IHsgUmVzb2x2YWJsZSB9IGZyb20gJy4uL3Jlc29sdmUvcmVzb2x2YWJsZSc7XG5pbXBvcnQgeyBWaWV3Q29uZmlnIH0gZnJvbSAnLi4vdmlldy9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUmVzb2x2ZUNvbnRleHQgfSBmcm9tICcuLi9yZXNvbHZlL3Jlc29sdmVDb250ZXh0JztcbmltcG9ydCB7IFVJUm91dGVyIH0gZnJvbSAnLi4vcm91dGVyJztcbmltcG9ydCB7IFVJSW5qZWN0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUmF3UGFyYW1zIH0gZnJvbSAnLi4vcGFyYW1zL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBSZXNvbHZhYmxlTGl0ZXJhbCB9IGZyb20gJy4uL3Jlc29sdmUvaW50ZXJmYWNlJztcbmltcG9ydCB7IFJlamVjdGlvbiB9IGZyb20gJy4vcmVqZWN0RmFjdG9yeSc7XG5pbXBvcnQgeyBhcHBseVBhaXJzLCBmbGF0dGVuUiwgdW5pcVIgfSBmcm9tICcuLi9jb21tb24nO1xuXG4vKiogQGhpZGRlbiAqL1xuY29uc3Qgc3RhdGVTZWxmOiAoX3N0YXRlOiBTdGF0ZU9iamVjdCkgPT4gU3RhdGVEZWNsYXJhdGlvbiA9IHByb3AoJ3NlbGYnKTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgdHJhbnNpdGlvbiBiZXR3ZWVuIHR3byBzdGF0ZXMuXG4gKlxuICogV2hlbiBuYXZpZ2F0aW5nIHRvIGEgc3RhdGUsIHdlIGFyZSB0cmFuc2l0aW9uaW5nICoqZnJvbSoqIHRoZSBjdXJyZW50IHN0YXRlICoqdG8qKiB0aGUgbmV3IHN0YXRlLlxuICpcbiAqIFRoaXMgb2JqZWN0IGNvbnRhaW5zIGFsbCBjb250ZXh0dWFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSB0by9mcm9tIHN0YXRlcywgcGFyYW1ldGVycywgcmVzb2x2ZXMuXG4gKiBJdCBoYXMgaW5mb3JtYXRpb24gYWJvdXQgYWxsIHN0YXRlcyBiZWluZyBlbnRlcmVkIGFuZCBleGl0ZWQgYXMgYSByZXN1bHQgb2YgdGhlIHRyYW5zaXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2l0aW9uIGltcGxlbWVudHMgSUhvb2tSZWdpc3RyeSB7XG4gIC8qKiBAaGlkZGVuICovXG4gIHN0YXRpYyBkaVRva2VuID0gVHJhbnNpdGlvbjtcblxuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRyYW5zaXRpb24uXG4gICAqXG4gICAqIFRoaXMgaXMgYW4gYXV0byBpbmNyZW1lbnRpbmcgaW50ZWdlciwgc3RhcnRpbmcgZnJvbSBgMGAuXG4gICAqL1xuICAkaWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogQSByZWZlcmVuY2UgdG8gdGhlIFtbVUlSb3V0ZXJdXSBpbnN0YW5jZVxuICAgKlxuICAgKiBUaGlzIHJlZmVyZW5jZSBjYW4gYmUgdXNlZCB0byBhY2Nlc3MgdGhlIHJvdXRlciBzZXJ2aWNlcywgc3VjaCBhcyB0aGUgW1tTdGF0ZVNlcnZpY2VdXVxuICAgKi9cbiAgcm91dGVyOiBVSVJvdXRlcjtcblxuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF9kZWZlcnJlZCA9IHNlcnZpY2VzLiRxLmRlZmVyKCk7XG4gIC8qKlxuICAgKiBUaGlzIHByb21pc2UgaXMgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgYmFzZWQgb24gdGhlIG91dGNvbWUgb2YgdGhlIFRyYW5zaXRpb24uXG4gICAqXG4gICAqIFdoZW4gdGhlIHRyYW5zaXRpb24gaXMgc3VjY2Vzc2Z1bCwgdGhlIHByb21pc2UgaXMgcmVzb2x2ZWRcbiAgICogV2hlbiB0aGUgdHJhbnNpdGlvbiBpcyB1bnN1Y2Nlc3NmdWwsIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIHdpdGggdGhlIFtbUmVqZWN0aW9uXV0gb3IgamF2YXNjcmlwdCBlcnJvclxuICAgKi9cbiAgcHJvbWlzZTogUHJvbWlzZTxhbnk+ID0gdGhpcy5fZGVmZXJyZWQucHJvbWlzZTtcbiAgLyoqXG4gICAqIEEgYm9vbGVhbiB3aGljaCBpbmRpY2F0ZXMgaWYgdGhlIHRyYW5zaXRpb24gd2FzIHN1Y2Nlc3NmdWxcbiAgICpcbiAgICogQWZ0ZXIgYSBzdWNjZXNzZnVsIHRyYW5zaXRpb24sIHRoaXMgdmFsdWUgaXMgc2V0IHRvIHRydWUuXG4gICAqIEFmdGVyIGFuIHVuc3VjY2Vzc2Z1bCB0cmFuc2l0aW9uLCB0aGlzIHZhbHVlIGlzIHNldCB0byBmYWxzZS5cbiAgICpcbiAgICogVGhlIHZhbHVlIHdpbGwgYmUgdW5kZWZpbmVkIGlmIHRoZSB0cmFuc2l0aW9uIGlzIG5vdCBjb21wbGV0ZVxuICAgKi9cbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgLyoqIEBoaWRkZW4gKi9cbiAgX2Fib3J0ZWQ6IGJvb2xlYW47XG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX2Vycm9yOiBSZWplY3Rpb247XG5cbiAgLyoqIEBoaWRkZW4gSG9sZHMgdGhlIGhvb2sgcmVnaXN0cmF0aW9uIGZ1bmN0aW9ucyBzdWNoIGFzIHRob3NlIHBhc3NlZCB0byBUcmFuc2l0aW9uLm9uU3RhcnQoKSAqL1xuICBfcmVnaXN0ZXJlZEhvb2tzOiBSZWdpc3RlcmVkSG9va3MgPSB7fTtcblxuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF9vcHRpb25zOiBUcmFuc2l0aW9uT3B0aW9ucztcbiAgLyoqIEBoaWRkZW4gKi9cbiAgcHJpdmF0ZSBfdHJlZUNoYW5nZXM6IFRyZWVDaGFuZ2VzO1xuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF90YXJnZXRTdGF0ZTogVGFyZ2V0U3RhdGU7XG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX2hvb2tCdWlsZGVyID0gbmV3IEhvb2tCdWlsZGVyKHRoaXMpO1xuXG4gIC8qKiBAaGlkZGVuICovXG4gIG9uQmVmb3JlKGNyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25Ib29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG9uU3RhcnQoY3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvbkhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb24ge1xuICAgIHJldHVybjtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgb25FeGl0KGNyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25TdGF0ZUhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb24ge1xuICAgIHJldHVybjtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgb25SZXRhaW4oY3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvblN0YXRlSG9va0ZuLCBvcHRpb25zPzogSG9va1JlZ09wdGlvbnMpOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBvbkVudGVyKGNyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25TdGF0ZUhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb24ge1xuICAgIHJldHVybjtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgb25GaW5pc2goY3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvbkhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb24ge1xuICAgIHJldHVybjtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgb25TdWNjZXNzKGNyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25Ib29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG9uRXJyb3IoY3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvbkhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb24ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKiBAaGlkZGVuXG4gICAqIENyZWF0ZXMgdGhlIHRyYW5zaXRpb24tbGV2ZWwgaG9vayByZWdpc3RyYXRpb24gZnVuY3Rpb25zXG4gICAqICh3aGljaCBjYW4gdGhlbiBiZSB1c2VkIHRvIHJlZ2lzdGVyIGhvb2tzKVxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVUcmFuc2l0aW9uSG9va1JlZ0ZucygpIHtcbiAgICB0aGlzLnJvdXRlci50cmFuc2l0aW9uU2VydmljZS5fcGx1Z2luYXBpXG4gICAgICAuX2dldEV2ZW50cygpXG4gICAgICAuZmlsdGVyKHR5cGUgPT4gdHlwZS5ob29rUGhhc2UgIT09IFRyYW5zaXRpb25Ib29rUGhhc2UuQ1JFQVRFKVxuICAgICAgLmZvckVhY2godHlwZSA9PiBtYWtlRXZlbnQodGhpcywgdGhpcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UsIHR5cGUpKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgZ2V0SG9va3MoaG9va05hbWU6IHN0cmluZyk6IFJlZ2lzdGVyZWRIb29rW10ge1xuICAgIHJldHVybiB0aGlzLl9yZWdpc3RlcmVkSG9va3NbaG9va05hbWVdO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgVHJhbnNpdGlvbiBvYmplY3QuXG4gICAqXG4gICAqIElmIHRoZSB0YXJnZXQgc3RhdGUgaXMgbm90IHZhbGlkLCBhbiBlcnJvciBpcyB0aHJvd24uXG4gICAqXG4gICAqIEBpbnRlcm5hbGFwaVxuICAgKlxuICAgKiBAcGFyYW0gZnJvbVBhdGggVGhlIHBhdGggb2YgW1tQYXRoTm9kZV1dcyBmcm9tIHdoaWNoIHRoZSB0cmFuc2l0aW9uIGlzIGxlYXZpbmcuICBUaGUgbGFzdCBub2RlIGluIHRoZSBgZnJvbVBhdGhgXG4gICAqICAgICAgICBlbmNhcHN1bGF0ZXMgdGhlIFwiZnJvbSBzdGF0ZVwiLlxuICAgKiBAcGFyYW0gdGFyZ2V0U3RhdGUgVGhlIHRhcmdldCBzdGF0ZSBhbmQgcGFyYW1ldGVycyBiZWluZyB0cmFuc2l0aW9uZWQgdG8gKGFsc28sIHRoZSB0cmFuc2l0aW9uIG9wdGlvbnMpXG4gICAqIEBwYXJhbSByb3V0ZXIgVGhlIFtbVUlSb3V0ZXJdXSBpbnN0YW5jZVxuICAgKi9cbiAgY29uc3RydWN0b3IoZnJvbVBhdGg6IFBhdGhOb2RlW10sIHRhcmdldFN0YXRlOiBUYXJnZXRTdGF0ZSwgcm91dGVyOiBVSVJvdXRlcikge1xuICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgIHRoaXMuX3RhcmdldFN0YXRlID0gdGFyZ2V0U3RhdGU7XG5cbiAgICBpZiAoIXRhcmdldFN0YXRlLnZhbGlkKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcih0YXJnZXRTdGF0ZS5lcnJvcigpKTtcbiAgICB9XG5cbiAgICAvLyBjdXJyZW50KCkgaXMgYXNzdW1lZCB0byBjb21lIGZyb20gdGFyZ2V0U3RhdGUub3B0aW9ucywgYnV0IHByb3ZpZGUgYSBuYWl2ZSBpbXBsZW1lbnRhdGlvbiBvdGhlcndpc2UuXG4gICAgdGhpcy5fb3B0aW9ucyA9IGV4dGVuZCh7IGN1cnJlbnQ6IHZhbCh0aGlzKSB9LCB0YXJnZXRTdGF0ZS5vcHRpb25zKCkpO1xuICAgIHRoaXMuJGlkID0gcm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLl90cmFuc2l0aW9uQ291bnQrKztcbiAgICBjb25zdCB0b1BhdGggPSBQYXRoVXRpbHMuYnVpbGRUb1BhdGgoZnJvbVBhdGgsIHRhcmdldFN0YXRlKTtcbiAgICB0aGlzLl90cmVlQ2hhbmdlcyA9IFBhdGhVdGlscy50cmVlQ2hhbmdlcyhmcm9tUGF0aCwgdG9QYXRoLCB0aGlzLl9vcHRpb25zLnJlbG9hZFN0YXRlKTtcbiAgICB0aGlzLmNyZWF0ZVRyYW5zaXRpb25Ib29rUmVnRm5zKCk7XG5cbiAgICBjb25zdCBvbkNyZWF0ZUhvb2tzID0gdGhpcy5faG9va0J1aWxkZXIuYnVpbGRIb29rc0ZvclBoYXNlKFRyYW5zaXRpb25Ib29rUGhhc2UuQ1JFQVRFKTtcbiAgICBUcmFuc2l0aW9uSG9vay5pbnZva2VIb29rcyhvbkNyZWF0ZUhvb2tzLCAoKSA9PiBudWxsKTtcblxuICAgIHRoaXMuYXBwbHlWaWV3Q29uZmlncyhyb3V0ZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBhcHBseVZpZXdDb25maWdzKHJvdXRlcjogVUlSb3V0ZXIpIHtcbiAgICBjb25zdCBlbnRlcmluZ1N0YXRlcyA9IHRoaXMuX3RyZWVDaGFuZ2VzLmVudGVyaW5nLm1hcChub2RlID0+IG5vZGUuc3RhdGUpO1xuICAgIFBhdGhVdGlscy5hcHBseVZpZXdDb25maWdzKHJvdXRlci50cmFuc2l0aW9uU2VydmljZS4kdmlldywgdGhpcy5fdHJlZUNoYW5nZXMudG8sIGVudGVyaW5nU3RhdGVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxhcGlcbiAgICpcbiAgICogQHJldHVybnMgdGhlIGludGVybmFsIGZyb20gW1N0YXRlXSBvYmplY3RcbiAgICovXG4gICRmcm9tKCkge1xuICAgIHJldHVybiB0YWlsKHRoaXMuX3RyZWVDaGFuZ2VzLmZyb20pLnN0YXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbGFwaVxuICAgKlxuICAgKiBAcmV0dXJucyB0aGUgaW50ZXJuYWwgdG8gW1N0YXRlXSBvYmplY3RcbiAgICovXG4gICR0bygpIHtcbiAgICByZXR1cm4gdGFpbCh0aGlzLl90cmVlQ2hhbmdlcy50bykuc3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgXCJmcm9tIHN0YXRlXCJcbiAgICpcbiAgICogUmV0dXJucyB0aGUgc3RhdGUgdGhhdCB0aGUgdHJhbnNpdGlvbiBpcyBjb21pbmcgKmZyb20qLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgc3RhdGUgZGVjbGFyYXRpb24gb2JqZWN0IGZvciB0aGUgVHJhbnNpdGlvbidzIChcImZyb20gc3RhdGVcIikuXG4gICAqL1xuICBmcm9tKCk6IFN0YXRlRGVjbGFyYXRpb24ge1xuICAgIHJldHVybiB0aGlzLiRmcm9tKCkuc2VsZjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBcInRvIHN0YXRlXCJcbiAgICpcbiAgICogUmV0dXJucyB0aGUgc3RhdGUgdGhhdCB0aGUgdHJhbnNpdGlvbiBpcyBnb2luZyAqdG8qLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgc3RhdGUgZGVjbGFyYXRpb24gb2JqZWN0IGZvciB0aGUgVHJhbnNpdGlvbidzIHRhcmdldCBzdGF0ZSAoXCJ0byBzdGF0ZVwiKS5cbiAgICovXG4gIHRvKCk6IFN0YXRlRGVjbGFyYXRpb24ge1xuICAgIHJldHVybiB0aGlzLiR0bygpLnNlbGY7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgVGFyZ2V0IFN0YXRlXG4gICAqXG4gICAqIEEgdHJhbnNpdGlvbidzIFtbVGFyZ2V0U3RhdGVdXSBlbmNhcHN1bGF0ZXMgdGhlIFtbdG9dXSBzdGF0ZSwgdGhlIFtbcGFyYW1zXV0sIGFuZCB0aGUgW1tvcHRpb25zXV0gYXMgYSBzaW5nbGUgb2JqZWN0LlxuICAgKlxuICAgKiBAcmV0dXJucyB0aGUgW1tUYXJnZXRTdGF0ZV1dIG9mIHRoaXMgVHJhbnNpdGlvblxuICAgKi9cbiAgdGFyZ2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldFN0YXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciB0d28gdHJhbnNpdGlvbnMgYXJlIGVxdWl2YWxlbnQuXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICBpcyhjb21wYXJlOiBUcmFuc2l0aW9uIHwgeyB0bz86IGFueTsgZnJvbT86IGFueSB9KTogYm9vbGVhbiB7XG4gICAgaWYgKGNvbXBhcmUgaW5zdGFuY2VvZiBUcmFuc2l0aW9uKSB7XG4gICAgICAvLyBUT0RPOiBBbHNvIGNvbXBhcmUgcGFyYW1ldGVyc1xuICAgICAgcmV0dXJuIHRoaXMuaXMoeyB0bzogY29tcGFyZS4kdG8oKS5uYW1lLCBmcm9tOiBjb21wYXJlLiRmcm9tKCkubmFtZSB9KTtcbiAgICB9XG4gICAgcmV0dXJuICEoXG4gICAgICAoY29tcGFyZS50byAmJiAhbWF0Y2hTdGF0ZSh0aGlzLiR0bygpLCBjb21wYXJlLnRvLCB0aGlzKSkgfHxcbiAgICAgIChjb21wYXJlLmZyb20gJiYgIW1hdGNoU3RhdGUodGhpcy4kZnJvbSgpLCBjb21wYXJlLmZyb20sIHRoaXMpKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0cmFuc2l0aW9uIHBhcmFtZXRlciB2YWx1ZXNcbiAgICpcbiAgICogUmV0dXJucyB0aGUgcGFyYW1ldGVyIHZhbHVlcyBmb3IgYSB0cmFuc2l0aW9uIGFzIGtleS92YWx1ZSBwYWlycy5cbiAgICogVGhpcyBvYmplY3QgaXMgaW1tdXRhYmxlLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCByZXR1cm5zIHRoZSBuZXcgcGFyYW1ldGVyIHZhbHVlcyAoZm9yIHRoZSBcInRvIHN0YXRlXCIpLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIHZhciB0b1BhcmFtcyA9IHRyYW5zaXRpb24ucGFyYW1zKCk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBUbyByZXR1cm4gdGhlIHByZXZpb3VzIHBhcmFtZXRlciB2YWx1ZXMsICBzdXBwbHkgYCdmcm9tJ2AgYXMgdGhlIGBwYXRobmFtZWAgYXJndW1lbnQuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogdmFyIGZyb21QYXJhbXMgPSB0cmFuc2l0aW9uLnBhcmFtcygnZnJvbScpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBhdGhuYW1lIHRoZSBuYW1lIG9mIHRoZSB0cmVlQ2hhbmdlcyBwYXRoIHRvIGdldCBwYXJhbWV0ZXIgdmFsdWVzIGZvcjpcbiAgICogICAoYCd0bydgLCBgJ2Zyb20nYCwgYCdlbnRlcmluZydgLCBgJ2V4aXRpbmcnYCwgYCdyZXRhaW5lZCdgKVxuICAgKlxuICAgKiBAcmV0dXJucyB0cmFuc2l0aW9uIHBhcmFtZXRlciB2YWx1ZXMgZm9yIHRoZSBkZXNpcmVkIHBhdGguXG4gICAqL1xuICBwYXJhbXMocGF0aG5hbWU/OiBzdHJpbmcpOiB7IFtwYXJhbU5hbWU6IHN0cmluZ106IGFueSB9O1xuICBwYXJhbXM8VD4ocGF0aG5hbWU/OiBzdHJpbmcpOiBUO1xuICBwYXJhbXMocGF0aG5hbWUgPSAndG8nKSB7XG4gICAgcmV0dXJuIE9iamVjdC5mcmVlemUodGhpcy5fdHJlZUNoYW5nZXNbcGF0aG5hbWVdLm1hcChwcm9wKCdwYXJhbVZhbHVlcycpKS5yZWR1Y2UobWVyZ2VSLCB7fSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG5ldyB2YWx1ZXMgb2YgYW55IHBhcmFtZXRlcnMgdGhhdCBjaGFuZ2VkIGR1cmluZyB0aGlzIHRyYW5zaXRpb24uXG4gICAqXG4gICAqIFJldHVybnMgYW55IHBhcmFtZXRlciB2YWx1ZXMgdGhhdCBoYXZlIGNoYW5nZWQgZHVyaW5nIGEgdHJhbnNpdGlvbiwgYXMga2V5L3ZhbHVlIHBhaXJzLlxuICAgKlxuICAgKiAtIEFueSBwYXJhbWV0ZXIgdmFsdWVzIHRoYXQgaGF2ZSBjaGFuZ2VkIHdpbGwgYmUgcHJlc2VudCBvbiB0aGUgcmV0dXJuZWQgb2JqZWN0IHJlZmxlY3RpbmcgdGhlIG5ldyB2YWx1ZS5cbiAgICogLSBBbnkgcGFyYW1ldGVycyB0aGF0ICpub3QqIGhhdmUgY2hhbmdlZCB3aWxsIG5vdCBiZSBwcmVzZW50IG9uIHRoZSByZXR1cm5lZCBvYmplY3QuXG4gICAqIC0gQW55IG5ldyBwYXJhbWV0ZXJzIHRoYXQgd2VyZW4ndCBwcmVzZW50IGluIHRoZSBcImZyb21cIiBzdGF0ZSwgYnV0IGFyZSBub3cgcHJlc2VudCBpbiB0aGUgXCJ0b1wiIHN0YXRlIHdpbGwgYmUgcHJlc2VudCBvbiB0aGUgcmV0dXJuZWQgb2JqZWN0LlxuICAgKiAtIEFueSBwcmV2aW91cyBwYXJhbWV0ZXJzIHRoYXQgYXJlIG5vIGxvbmdlciBwcmVzZW50IChiZWNhdXNlIHRoZSBcInRvXCIgc3RhdGUgZG9lc24ndCBoYXZlIHRoZW0pIHdpbGwgYmUgaW5jbHVkZWQgd2l0aCBhIHZhbHVlIG9mIGB1bmRlZmluZWRgLlxuICAgKlxuICAgKiBUaGUgcmV0dXJuZWQgb2JqZWN0IGlzIGltbXV0YWJsZS5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlczpcbiAgICpcbiAgICogR2l2ZW46XG4gICAqIGBgYGpzXG4gICAqIHZhciBzdGF0ZUEgPSB7IG5hbWU6ICdzdGF0ZUEnLCB1cmw6ICcvc3RhdGVBLzpwYXJhbTEvcGFyYW0yJyB9XG4gICAqIHZhciBzdGF0ZUIgPSB7IG5hbWU6ICdzdGF0ZUInLCB1cmw6ICcvc3RhdGVCLzpwYXJhbTMnIH1cbiAgICogdmFyIHN0YXRlQyA9IHsgbmFtZTogJ3N0YXRlQi5uZXN0JywgdXJsOiAnL25lc3QvOnBhcmFtNCcgfVxuICAgKiBgYGBcbiAgICpcbiAgICogIyMjIyBFeGFtcGxlIDFcbiAgICpcbiAgICogRnJvbSBgL3N0YXRlQS9hYmMvZGVmYCB0byBgL3N0YXRlQS9hYmMveHl6YFxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB2YXIgY2hhbmdlZCA9IHRyYW5zaXRpb24ucGFyYW1zQ2hhbmdlZCgpXG4gICAqIC8vIGNoYW5nZWQgaXMgeyBwYXJhbTI6ICd4eXonIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFRoZSB2YWx1ZSBvZiBgcGFyYW0yYCBjaGFuZ2VkIHRvIGB4eXpgLlxuICAgKiBUaGUgdmFsdWUgb2YgYHBhcmFtMWAgc3RheWVkIHRoZSBzYW1lIHNvIGl0cyB2YWx1ZSBpcyBub3QgcHJlc2VudC5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlIDJcbiAgICpcbiAgICogRnJvbSBgL3N0YXRlQS9hYmMvZGVmYCB0byBgL3N0YXRlQi8xMjNgXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHZhciBjaGFuZ2VkID0gdHJhbnNpdGlvbi5wYXJhbXNDaGFuZ2VkKClcbiAgICogLy8gY2hhbmdlZCBpcyB7IHBhcmFtMTogdW5kZWZpbmVkLCBwYXJhbTI6IHVuZGVmaW5lZCwgcGFyYW0zOiAnMTIzJyB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBUaGUgdmFsdWUgYHBhcmFtM2AgaXMgcHJlc2VudCBiZWNhdXNlIGl0IGlzIGEgbmV3IHBhcmFtLlxuICAgKiBCb3RoIGBwYXJhbTFgIGFuZCBgcGFyYW0yYCBhcmUgbm8gbG9uZ2VyIHByZXNlbnQgc28gdGhlaXIgdmFsdWUgaXMgdW5kZWZpbmVkLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGUgM1xuICAgKlxuICAgKiBGcm9tIGAvc3RhdGVCLzEyM2AgdG8gYC9zdGF0ZUIvMTIzL25lc3QvNDU2YFxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB2YXIgY2hhbmdlZCA9IHRyYW5zaXRpb24ucGFyYW1zQ2hhbmdlZCgpXG4gICAqIC8vIGNoYW5nZWQgaXMgeyBwYXJhbTQ6ICc0NTYnIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFRoZSB2YWx1ZSBgcGFyYW00YCBpcyBwcmVzZW50IGJlY2F1c2UgaXQgaXMgYSBuZXcgcGFyYW0uXG4gICAqIFRoZSB2YWx1ZSBvZiBgcGFyYW0zYCBkaWQgbm90IGNoYW5nZSwgc28gaXRzIHZhbHVlIGlzIG5vdCBwcmVzZW50LlxuICAgKlxuICAgKiBAcmV0dXJucyBhbiBpbW11dGFibGUgb2JqZWN0IHdpdGggY2hhbmdlZCBwYXJhbWV0ZXIga2V5cy92YWx1ZXMuXG4gICAqL1xuICBwYXJhbXNDaGFuZ2VkKCk6IHsgW3BhcmFtTmFtZTogc3RyaW5nXTogYW55IH07XG4gIHBhcmFtc0NoYW5nZWQ8VD4oKTogVDtcbiAgcGFyYW1zQ2hhbmdlZCgpIHtcbiAgICBjb25zdCBmcm9tUGFyYW1zID0gdGhpcy5wYXJhbXMoJ2Zyb20nKTtcbiAgICBjb25zdCB0b1BhcmFtcyA9IHRoaXMucGFyYW1zKCd0bycpO1xuXG4gICAgLy8gQWxsIHRoZSBwYXJhbWV0ZXJzIGRlY2xhcmVkIG9uIGJvdGggdGhlIFwidG9cIiBhbmQgXCJmcm9tXCIgcGF0aHNcbiAgICBjb25zdCBhbGxQYXJhbURlc2NyaXB0b3JzOiBQYXJhbVtdID0gW11cbiAgICAgIC5jb25jYXQodGhpcy5fdHJlZUNoYW5nZXMudG8pXG4gICAgICAuY29uY2F0KHRoaXMuX3RyZWVDaGFuZ2VzLmZyb20pXG4gICAgICAubWFwKHBhdGhOb2RlID0+IHBhdGhOb2RlLnBhcmFtU2NoZW1hKVxuICAgICAgLnJlZHVjZShmbGF0dGVuUiwgW10pXG4gICAgICAucmVkdWNlKHVuaXFSLCBbXSk7XG5cbiAgICBjb25zdCBjaGFuZ2VkUGFyYW1EZXNjcmlwdG9ycyA9IFBhcmFtLmNoYW5nZWQoYWxsUGFyYW1EZXNjcmlwdG9ycywgZnJvbVBhcmFtcywgdG9QYXJhbXMpO1xuXG4gICAgcmV0dXJuIGNoYW5nZWRQYXJhbURlc2NyaXB0b3JzLnJlZHVjZSgoY2hhbmdlZFZhbHVlcywgZGVzY3JpcHRvcikgPT4ge1xuICAgICAgY2hhbmdlZFZhbHVlc1tkZXNjcmlwdG9yLmlkXSA9IHRvUGFyYW1zW2Rlc2NyaXB0b3IuaWRdO1xuICAgICAgcmV0dXJuIGNoYW5nZWRWYWx1ZXM7XG4gICAgfSwge30pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBbW1VJSW5qZWN0b3JdXSBEZXBlbmRlbmN5IEluamVjdG9yXG4gICAqXG4gICAqIFJldHVybnMgYSBEZXBlbmRlbmN5IEluamVjdG9yIGZvciB0aGUgVHJhbnNpdGlvbidzIHRhcmdldCBzdGF0ZSAodG8gc3RhdGUpLlxuICAgKiBUaGUgaW5qZWN0b3IgcHJvdmlkZXMgcmVzb2x2ZSB2YWx1ZXMgd2hpY2ggdGhlIHRhcmdldCBzdGF0ZSBoYXMgYWNjZXNzIHRvLlxuICAgKlxuICAgKiBUaGUgYFVJSW5qZWN0b3JgIGNhbiBhbHNvIHByb3ZpZGUgdmFsdWVzIGZyb20gdGhlIG5hdGl2ZSByb290L2dsb2JhbCBpbmplY3RvciAobmcxL25nMikuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogLm9uRW50ZXIoeyBlbnRlcmluZzogJ215U3RhdGUnIH0sIHRyYW5zID0+IHtcbiAgICogICB2YXIgbXlSZXNvbHZlVmFsdWUgPSB0cmFucy5pbmplY3RvcigpLmdldCgnbXlSZXNvbHZlJyk7XG4gICAqICAgLy8gSW5qZWN0IGEgZ2xvYmFsIHNlcnZpY2UgZnJvbSB0aGUgZ2xvYmFsL25hdGl2ZSBpbmplY3RvciAoaWYgaXQgZXhpc3RzKVxuICAgKiAgIHZhciBNeVNlcnZpY2UgPSB0cmFucy5pbmplY3RvcigpLmdldCgnTXlTZXJ2aWNlJyk7XG4gICAqIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBJbiBzb21lIGNhc2VzIChzdWNoIGFzIGBvbkJlZm9yZWApLCB5b3UgbWF5IG5lZWQgYWNjZXNzIHRvIHNvbWUgcmVzb2x2ZSBkYXRhIGJ1dCBpdCBoYXMgbm90IHlldCBiZWVuIGZldGNoZWQuXG4gICAqIFlvdSBjYW4gdXNlIFtbVUlJbmplY3Rvci5nZXRBc3luY11dIHRvIGdldCBhIHByb21pc2UgZm9yIHRoZSBkYXRhLlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIC5vbkJlZm9yZSh7fSwgdHJhbnMgPT4ge1xuICAgKiAgIHJldHVybiB0cmFucy5pbmplY3RvcigpLmdldEFzeW5jKCdteVJlc29sdmUnKS50aGVuKG15UmVzb2x2ZVZhbHVlID0+XG4gICAqICAgICByZXR1cm4gbXlSZXNvbHZlVmFsdWUgIT09ICdBQk9SVCc7XG4gICAqICAgfSk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogSWYgYSBgc3RhdGVgIGlzIHByb3ZpZGVkLCB0aGUgaW5qZWN0b3IgdGhhdCBpcyByZXR1cm5lZCB3aWxsIGJlIGxpbWl0ZWQgdG8gcmVzb2x2ZSB2YWx1ZXMgdGhhdCB0aGUgcHJvdmlkZWQgc3RhdGUgaGFzIGFjY2VzcyB0by5cbiAgICogVGhpcyBjYW4gYmUgdXNlZnVsIGlmIGJvdGggYSBwYXJlbnQgc3RhdGUgYGZvb2AgYW5kIGEgY2hpbGQgc3RhdGUgYGZvby5iYXJgIGhhdmUgYm90aCBkZWZpbmVkIGEgcmVzb2x2ZSBzdWNoIGFzIGBkYXRhYC5cbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiAub25FbnRlcih7IHRvOiAnZm9vLmJhcicgfSwgdHJhbnMgPT4ge1xuICAgKiAgIC8vIHJldHVybnMgcmVzdWx0IG9mIGBmb29gIHN0YXRlJ3MgYG15UmVzb2x2ZWAgcmVzb2x2ZVxuICAgKiAgIC8vIGV2ZW4gdGhvdWdoIGBmb28uYmFyYCBhbHNvIGhhcyBhIGBteVJlc29sdmVgIHJlc29sdmVcbiAgICogICB2YXIgZm9vRGF0YSA9IHRyYW5zLmluamVjdG9yKCdmb28nKS5nZXQoJ215UmVzb2x2ZScpO1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIElmIHlvdSBuZWVkIHJlc29sdmUgZGF0YSBmcm9tIHRoZSBleGl0aW5nIHN0YXRlcywgcGFzcyBgJ2Zyb20nYCBhcyBgcGF0aE5hbWVgLlxuICAgKiBUaGUgcmVzb2x2ZSBkYXRhIGZyb20gdGhlIGBmcm9tYCBwYXRoIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogLm9uRXhpdCh7IGV4aXRpbmc6ICdmb28uYmFyJyB9LCB0cmFucyA9PiB7XG4gICAqICAgLy8gR2V0cyB0aGUgcmVzb2x2ZSB2YWx1ZSBvZiBgbXlSZXNvbHZlYCBmcm9tIHRoZSBzdGF0ZSBiZWluZyBleGl0ZWRcbiAgICogICB2YXIgZm9vRGF0YSA9IHRyYW5zLmluamVjdG9yKG51bGwsICdmcm9tJykuZ2V0KCdteVJlc29sdmUnKTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKlxuICAgKiBAcGFyYW0gc3RhdGUgTGltaXRzIHRoZSByZXNvbHZlcyBwcm92aWRlZCB0byBvbmx5IHRoZSByZXNvbHZlcyB0aGUgcHJvdmlkZWQgc3RhdGUgaGFzIGFjY2VzcyB0by5cbiAgICogQHBhcmFtIHBhdGhOYW1lIERlZmF1bHQ6IGAndG8nYDogQ2hvb3NlcyB0aGUgcGF0aCBmb3Igd2hpY2ggdG8gY3JlYXRlIHRoZSBpbmplY3Rvci4gVXNlIHRoaXMgdG8gYWNjZXNzIHJlc29sdmVzIGZvciBgZXhpdGluZ2Agc3RhdGVzLlxuICAgKlxuICAgKiBAcmV0dXJucyBhIFtbVUlJbmplY3Rvcl1dXG4gICAqL1xuICBpbmplY3RvcihzdGF0ZT86IFN0YXRlT3JOYW1lLCBwYXRoTmFtZSA9ICd0bycpOiBVSUluamVjdG9yIHtcbiAgICBsZXQgcGF0aDogUGF0aE5vZGVbXSA9IHRoaXMuX3RyZWVDaGFuZ2VzW3BhdGhOYW1lXTtcbiAgICBpZiAoc3RhdGUpIHBhdGggPSBQYXRoVXRpbHMuc3ViUGF0aChwYXRoLCBub2RlID0+IG5vZGUuc3RhdGUgPT09IHN0YXRlIHx8IG5vZGUuc3RhdGUubmFtZSA9PT0gc3RhdGUpO1xuICAgIHJldHVybiBuZXcgUmVzb2x2ZUNvbnRleHQocGF0aCkuaW5qZWN0b3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGFsbCBhdmFpbGFibGUgcmVzb2x2ZSB0b2tlbnMgKGtleXMpXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggW1tpbmplY3Rvcl1dIHRvIGluc3BlY3QgdGhlIHJlc29sdmUgdmFsdWVzXG4gICAqIGF2YWlsYWJsZSB0byB0aGUgVHJhbnNpdGlvbi5cbiAgICpcbiAgICogVGhpcyByZXR1cm5zIGFsbCB0aGUgdG9rZW5zIGRlZmluZWQgb24gW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXSBibG9ja3MsIGZvciB0aGUgc3RhdGVzXG4gICAqIGluIHRoZSBUcmFuc2l0aW9uJ3MgW1tUcmVlQ2hhbmdlcy50b11dIHBhdGguXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogVGhpcyBleGFtcGxlIGxvZ3MgYWxsIHJlc29sdmUgdmFsdWVzXG4gICAqIGBgYGpzXG4gICAqIGxldCB0b2tlbnMgPSB0cmFucy5nZXRSZXNvbHZlVG9rZW5zKCk7XG4gICAqIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IGNvbnNvbGUubG9nKHRva2VuICsgXCIgPSBcIiArIHRyYW5zLmluamVjdG9yKCkuZ2V0KHRva2VuKSkpO1xuICAgKiBgYGBcbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBUaGlzIGV4YW1wbGUgY3JlYXRlcyBwcm9taXNlcyBmb3IgZWFjaCByZXNvbHZlIHZhbHVlLlxuICAgKiBUaGlzIHRyaWdnZXJzIGZldGNoZXMgb2YgcmVzb2x2ZXMgKGlmIGFueSBoYXZlIG5vdCB5ZXQgYmVlbiBmZXRjaGVkKS5cbiAgICogV2hlbiBhbGwgcHJvbWlzZXMgaGF2ZSBhbGwgc2V0dGxlZCwgaXQgbG9ncyB0aGUgcmVzb2x2ZSB2YWx1ZXMuXG4gICAqIGBgYGpzXG4gICAqIGxldCB0b2tlbnMgPSB0cmFucy5nZXRSZXNvbHZlVG9rZW5zKCk7XG4gICAqIGxldCBwcm9taXNlID0gdG9rZW5zLm1hcCh0b2tlbiA9PiB0cmFucy5pbmplY3RvcigpLmdldEFzeW5jKHRva2VuKSk7XG4gICAqIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKHZhbHVlcyA9PiBjb25zb2xlLmxvZyhcIlJlc29sdmVkIHZhbHVlczogXCIgKyB2YWx1ZXMpKTtcbiAgICogYGBgXG4gICAqXG4gICAqIE5vdGU6IEFuZ3VsYXIgMSB1c2VycyB3aG91bGQgdXNlIGAkcS5hbGwoKWBcbiAgICpcbiAgICogQHBhcmFtIHBhdGhuYW1lIHJlc29sdmUgY29udGV4dCdzIHBhdGggbmFtZSAoZS5nLiwgYHRvYCBvciBgZnJvbWApXG4gICAqXG4gICAqIEByZXR1cm5zIGFuIGFycmF5IG9mIHJlc29sdmUgdG9rZW5zIChrZXlzKVxuICAgKi9cbiAgZ2V0UmVzb2x2ZVRva2VucyhwYXRobmFtZSA9ICd0bycpOiBhbnlbXSB7XG4gICAgcmV0dXJuIG5ldyBSZXNvbHZlQ29udGV4dCh0aGlzLl90cmVlQ2hhbmdlc1twYXRobmFtZV0pLmdldFRva2VucygpO1xuICB9XG5cbiAgLyoqXG4gICAqIER5bmFtaWNhbGx5IGFkZHMgYSBuZXcgW1tSZXNvbHZhYmxlXV0gKGkuZS4sIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV0pIHRvIHRoaXMgdHJhbnNpdGlvbi5cbiAgICpcbiAgICogQWxsb3dzIGEgdHJhbnNpdGlvbiBob29rIHRvIGR5bmFtaWNhbGx5IGFkZCBhIFJlc29sdmFibGUgdG8gdGhpcyBUcmFuc2l0aW9uLlxuICAgKlxuICAgKiBVc2UgdGhlIFtbVHJhbnNpdGlvbi5pbmplY3Rvcl1dIHRvIHJldHJpZXZlIHRoZSByZXNvbHZlZCBkYXRhIGluIHN1YnNlcXVlbnQgaG9va3MgKFtbVUlJbmplY3Rvci5nZXRdXSkuXG4gICAqXG4gICAqIElmIGEgYHN0YXRlYCBhcmd1bWVudCBpcyBwcm92aWRlZCwgdGhlIFJlc29sdmFibGUgaXMgcHJvY2Vzc2VkIHdoZW4gdGhhdCBzdGF0ZSBpcyBiZWluZyBlbnRlcmVkLlxuICAgKiBJZiBubyBgc3RhdGVgIGlzIHByb3ZpZGVkIHRoZW4gdGhlIHJvb3Qgc3RhdGUgaXMgdXNlZC5cbiAgICogSWYgdGhlIGdpdmVuIGBzdGF0ZWAgaGFzIGFscmVhZHkgYmVlbiBlbnRlcmVkLCB0aGUgUmVzb2x2YWJsZSBpcyBwcm9jZXNzZWQgd2hlbiBhbnkgY2hpbGQgc3RhdGUgaXMgZW50ZXJlZC5cbiAgICogSWYgbm8gY2hpbGQgc3RhdGVzIHdpbGwgYmUgZW50ZXJlZCwgdGhlIFJlc29sdmFibGUgaXMgcHJvY2Vzc2VkIGR1cmluZyB0aGUgYG9uRmluaXNoYCBwaGFzZSBvZiB0aGUgVHJhbnNpdGlvbi5cbiAgICpcbiAgICogVGhlIGBzdGF0ZWAgYXJndW1lbnQgYWxzbyBzY29wZXMgdGhlIHJlc29sdmVkIGRhdGEuXG4gICAqIFRoZSByZXNvbHZlZCBkYXRhIGlzIGF2YWlsYWJsZSBmcm9tIHRoZSBpbmplY3RvciBmb3IgdGhhdCBgc3RhdGVgIGFuZCBhbnkgY2hpbGRyZW4gc3RhdGVzLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIHRyYW5zaXRpb25TZXJ2aWNlLm9uQmVmb3JlKHt9LCB0cmFuc2l0aW9uID0+IHtcbiAgICogICB0cmFuc2l0aW9uLmFkZFJlc29sdmFibGUoe1xuICAgKiAgICAgdG9rZW46ICdteVJlc29sdmUnLFxuICAgKiAgICAgZGVwczogWydNeVNlcnZpY2UnXSxcbiAgICogICAgIHJlc29sdmVGbjogbXlTZXJ2aWNlID0+IG15U2VydmljZS5nZXREYXRhKClcbiAgICogICB9KTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcmVzb2x2YWJsZSBhIFtbUmVzb2x2YWJsZUxpdGVyYWxdXSBvYmplY3QgKG9yIGEgW1tSZXNvbHZhYmxlXV0pXG4gICAqIEBwYXJhbSBzdGF0ZSB0aGUgc3RhdGUgaW4gdGhlIFwidG8gcGF0aFwiIHdoaWNoIHNob3VsZCByZWNlaXZlIHRoZSBuZXcgcmVzb2x2ZSAob3RoZXJ3aXNlLCB0aGUgcm9vdCBzdGF0ZSlcbiAgICovXG4gIGFkZFJlc29sdmFibGUocmVzb2x2YWJsZTogUmVzb2x2YWJsZSB8IFJlc29sdmFibGVMaXRlcmFsLCBzdGF0ZTogU3RhdGVPck5hbWUgPSAnJyk6IHZvaWQge1xuICAgIHJlc29sdmFibGUgPSBpcyhSZXNvbHZhYmxlKShyZXNvbHZhYmxlKSA/IHJlc29sdmFibGUgOiBuZXcgUmVzb2x2YWJsZShyZXNvbHZhYmxlKTtcblxuICAgIGNvbnN0IHN0YXRlTmFtZTogc3RyaW5nID0gdHlwZW9mIHN0YXRlID09PSAnc3RyaW5nJyA/IHN0YXRlIDogc3RhdGUubmFtZTtcbiAgICBjb25zdCB0b3BhdGggPSB0aGlzLl90cmVlQ2hhbmdlcy50bztcbiAgICBjb25zdCB0YXJnZXROb2RlID0gZmluZCh0b3BhdGgsIG5vZGUgPT4gbm9kZS5zdGF0ZS5uYW1lID09PSBzdGF0ZU5hbWUpO1xuICAgIGNvbnN0IHJlc29sdmVDb250ZXh0OiBSZXNvbHZlQ29udGV4dCA9IG5ldyBSZXNvbHZlQ29udGV4dCh0b3BhdGgpO1xuICAgIHJlc29sdmVDb250ZXh0LmFkZFJlc29sdmFibGVzKFtyZXNvbHZhYmxlIGFzIFJlc29sdmFibGVdLCB0YXJnZXROb2RlLnN0YXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0cmFuc2l0aW9uIGZyb20gd2hpY2ggdGhpcyB0cmFuc2l0aW9uIHdhcyByZWRpcmVjdGVkLlxuICAgKlxuICAgKiBJZiB0aGUgY3VycmVudCB0cmFuc2l0aW9uIGlzIGEgcmVkaXJlY3QsIHRoaXMgbWV0aG9kIHJldHVybnMgdGhlIHRyYW5zaXRpb24gdGhhdCB3YXMgcmVkaXJlY3RlZC5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiBsZXQgdHJhbnNpdGlvbkEgPSAkc3RhdGUuZ28oJ0EnKS50cmFuc2l0aW9uXG4gICAqIHRyYW5zaXRpb25BLm9uU3RhcnQoe30sICgpID0+ICRzdGF0ZS50YXJnZXQoJ0InKSk7XG4gICAqICR0cmFuc2l0aW9ucy5vblN1Y2Nlc3MoeyB0bzogJ0InIH0sICh0cmFucykgPT4ge1xuICAgKiAgIHRyYW5zLnRvKCkubmFtZSA9PT0gJ0InOyAvLyB0cnVlXG4gICAqICAgdHJhbnMucmVkaXJlY3RlZEZyb20oKSA9PT0gdHJhbnNpdGlvbkE7IC8vIHRydWVcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgcHJldmlvdXMgVHJhbnNpdGlvbiwgb3IgbnVsbCBpZiB0aGlzIFRyYW5zaXRpb24gaXMgbm90IHRoZSByZXN1bHQgb2YgYSByZWRpcmVjdGlvblxuICAgKi9cbiAgcmVkaXJlY3RlZEZyb20oKTogVHJhbnNpdGlvbiB7XG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbnMucmVkaXJlY3RlZEZyb20gfHwgbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBvcmlnaW5hbCB0cmFuc2l0aW9uIGluIGEgcmVkaXJlY3QgY2hhaW5cbiAgICpcbiAgICogQSB0cmFuc2l0aW9uIG1pZ2h0IGJlbG9uZyB0byBhIGxvbmcgY2hhaW4gb2YgbXVsdGlwbGUgcmVkaXJlY3RzLlxuICAgKiBUaGlzIG1ldGhvZCB3YWxrcyB0aGUgW1tyZWRpcmVjdGVkRnJvbV1dIGNoYWluIGJhY2sgdG8gdGhlIG9yaWdpbmFsIChmaXJzdCkgdHJhbnNpdGlvbiBpbiB0aGUgY2hhaW4uXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogLy8gc3RhdGVzXG4gICAqIHJlZ2lzdHJ5LnJlZ2lzdGVyKHsgbmFtZTogJ0EnLCByZWRpcmVjdFRvOiAnQicgfSk7XG4gICAqIHJlZ2lzdHJ5LnJlZ2lzdGVyKHsgbmFtZTogJ0InLCByZWRpcmVjdFRvOiAnQycgfSk7XG4gICAqIHJlZ2lzdHJ5LnJlZ2lzdGVyKHsgbmFtZTogJ0MnLCByZWRpcmVjdFRvOiAnRCcgfSk7XG4gICAqIHJlZ2lzdHJ5LnJlZ2lzdGVyKHsgbmFtZTogJ0QnIH0pO1xuICAgKlxuICAgKiBsZXQgdHJhbnNpdGlvbkEgPSAkc3RhdGUuZ28oJ0EnKS50cmFuc2l0aW9uXG4gICAqXG4gICAqICR0cmFuc2l0aW9ucy5vblN1Y2Nlc3MoeyB0bzogJ0QnIH0sICh0cmFucykgPT4ge1xuICAgKiAgIHRyYW5zLnRvKCkubmFtZSA9PT0gJ0QnOyAvLyB0cnVlXG4gICAqICAgdHJhbnMucmVkaXJlY3RlZEZyb20oKS50bygpLm5hbWUgPT09ICdDJzsgLy8gdHJ1ZVxuICAgKiAgIHRyYW5zLm9yaWdpbmFsVHJhbnNpdGlvbigpID09PSB0cmFuc2l0aW9uQTsgLy8gdHJ1ZVxuICAgKiAgIHRyYW5zLm9yaWdpbmFsVHJhbnNpdGlvbigpLnRvKCkubmFtZSA9PT0gJ0EnOyAvLyB0cnVlXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHJldHVybnMgVGhlIG9yaWdpbmFsIFRyYW5zaXRpb24gdGhhdCBzdGFydGVkIGEgcmVkaXJlY3QgY2hhaW5cbiAgICovXG4gIG9yaWdpbmFsVHJhbnNpdGlvbigpOiBUcmFuc2l0aW9uIHtcbiAgICBjb25zdCByZiA9IHRoaXMucmVkaXJlY3RlZEZyb20oKTtcbiAgICByZXR1cm4gKHJmICYmIHJmLm9yaWdpbmFsVHJhbnNpdGlvbigpKSB8fCB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdHJhbnNpdGlvbiBvcHRpb25zXG4gICAqXG4gICAqIEByZXR1cm5zIHRoZSBvcHRpb25zIGZvciB0aGlzIFRyYW5zaXRpb24uXG4gICAqL1xuICBvcHRpb25zKCk6IFRyYW5zaXRpb25PcHRpb25zIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBzdGF0ZXMgYmVpbmcgZW50ZXJlZC5cbiAgICpcbiAgICogQHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGVzIHRoYXQgd2lsbCBiZSBlbnRlcmVkIGR1cmluZyB0aGlzIHRyYW5zaXRpb24uXG4gICAqL1xuICBlbnRlcmluZygpOiBTdGF0ZURlY2xhcmF0aW9uW10ge1xuICAgIHJldHVybiBtYXAodGhpcy5fdHJlZUNoYW5nZXMuZW50ZXJpbmcsIHByb3AoJ3N0YXRlJykpLm1hcChzdGF0ZVNlbGYpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHN0YXRlcyBiZWluZyBleGl0ZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIGFuIGFycmF5IG9mIHN0YXRlcyB0aGF0IHdpbGwgYmUgZXhpdGVkIGR1cmluZyB0aGlzIHRyYW5zaXRpb24uXG4gICAqL1xuICBleGl0aW5nKCk6IFN0YXRlRGVjbGFyYXRpb25bXSB7XG4gICAgcmV0dXJuIG1hcCh0aGlzLl90cmVlQ2hhbmdlcy5leGl0aW5nLCBwcm9wKCdzdGF0ZScpKVxuICAgICAgLm1hcChzdGF0ZVNlbGYpXG4gICAgICAucmV2ZXJzZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHN0YXRlcyBiZWluZyByZXRhaW5lZC5cbiAgICpcbiAgICogQHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGVzIHRoYXQgYXJlIGFscmVhZHkgZW50ZXJlZCBmcm9tIGEgcHJldmlvdXMgVHJhbnNpdGlvbiwgdGhhdCB3aWxsIG5vdCBiZVxuICAgKiAgICBleGl0ZWQgZHVyaW5nIHRoaXMgVHJhbnNpdGlvblxuICAgKi9cbiAgcmV0YWluZWQoKTogU3RhdGVEZWNsYXJhdGlvbltdIHtcbiAgICByZXR1cm4gbWFwKHRoaXMuX3RyZWVDaGFuZ2VzLnJldGFpbmVkLCBwcm9wKCdzdGF0ZScpKS5tYXAoc3RhdGVTZWxmKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIFtbVmlld0NvbmZpZ11dcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBUcmFuc2l0aW9uXG4gICAqXG4gICAqIEVhY2ggc3RhdGUgY2FuIGRlZmluZSBvbmUgb3IgbW9yZSB2aWV3cyAodGVtcGxhdGUvY29udHJvbGxlciksIHdoaWNoIGFyZSBlbmNhcHN1bGF0ZWQgYXMgYFZpZXdDb25maWdgIG9iamVjdHMuXG4gICAqIFRoaXMgbWV0aG9kIGZldGNoZXMgdGhlIGBWaWV3Q29uZmlnc2AgZm9yIGEgZ2l2ZW4gcGF0aCBpbiB0aGUgVHJhbnNpdGlvbiAoZS5nLiwgXCJ0b1wiIG9yIFwiZW50ZXJpbmdcIikuXG4gICAqXG4gICAqIEBwYXJhbSBwYXRobmFtZSB0aGUgbmFtZSBvZiB0aGUgcGF0aCB0byBmZXRjaCB2aWV3cyBmb3I6XG4gICAqICAgKGAndG8nYCwgYCdmcm9tJ2AsIGAnZW50ZXJpbmcnYCwgYCdleGl0aW5nJ2AsIGAncmV0YWluZWQnYClcbiAgICogQHBhcmFtIHN0YXRlIElmIHByb3ZpZGVkLCBvbmx5IHJldHVybnMgdGhlIGBWaWV3Q29uZmlnYHMgZm9yIGEgc2luZ2xlIHN0YXRlIGluIHRoZSBwYXRoXG4gICAqXG4gICAqIEByZXR1cm5zIGEgbGlzdCBvZiBWaWV3Q29uZmlnIG9iamVjdHMgZm9yIHRoZSBnaXZlbiBwYXRoLlxuICAgKi9cbiAgdmlld3MocGF0aG5hbWUgPSAnZW50ZXJpbmcnLCBzdGF0ZT86IFN0YXRlT2JqZWN0KTogVmlld0NvbmZpZ1tdIHtcbiAgICBsZXQgcGF0aCA9IHRoaXMuX3RyZWVDaGFuZ2VzW3BhdGhuYW1lXTtcbiAgICBwYXRoID0gIXN0YXRlID8gcGF0aCA6IHBhdGguZmlsdGVyKHByb3BFcSgnc3RhdGUnLCBzdGF0ZSkpO1xuICAgIHJldHVybiBwYXRoXG4gICAgICAubWFwKHByb3AoJ3ZpZXdzJykpXG4gICAgICAuZmlsdGVyKGlkZW50aXR5KVxuICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSB0cmFuc2l0aW9uJ3MgdHJlZSBjaGFuZ2VzXG4gICAqXG4gICAqIEEgdHJhbnNpdGlvbiBnb2VzIGZyb20gb25lIHN0YXRlL3BhcmFtZXRlcnMgdG8gYW5vdGhlciBzdGF0ZS9wYXJhbWV0ZXJzLlxuICAgKiBEdXJpbmcgYSB0cmFuc2l0aW9uLCBzdGF0ZXMgYXJlIGVudGVyZWQgYW5kL29yIGV4aXRlZC5cbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIHZhcmlvdXMgYnJhbmNoZXMgKHBhdGhzKSB3aGljaCByZXByZXNlbnQgdGhlIGNoYW5nZXMgdG8gdGhlXG4gICAqIGFjdGl2ZSBzdGF0ZSB0cmVlIHRoYXQgYXJlIGNhdXNlZCBieSB0aGUgdHJhbnNpdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHBhdGhuYW1lIFRoZSBuYW1lIG9mIHRoZSB0cmVlIGNoYW5nZXMgcGF0aCB0byBnZXQ6XG4gICAqICAgKGAndG8nYCwgYCdmcm9tJ2AsIGAnZW50ZXJpbmcnYCwgYCdleGl0aW5nJ2AsIGAncmV0YWluZWQnYClcbiAgICovXG4gIHRyZWVDaGFuZ2VzKHBhdGhuYW1lOiBzdHJpbmcpOiBQYXRoTm9kZVtdO1xuICB0cmVlQ2hhbmdlcygpOiBUcmVlQ2hhbmdlcztcbiAgdHJlZUNoYW5nZXMocGF0aG5hbWU/OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gcGF0aG5hbWUgPyB0aGlzLl90cmVlQ2hhbmdlc1twYXRobmFtZV0gOiB0aGlzLl90cmVlQ2hhbmdlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHRyYW5zaXRpb24gdGhhdCBpcyBhIHJlZGlyZWN0aW9uIG9mIHRoZSBjdXJyZW50IG9uZS5cbiAgICpcbiAgICogVGhpcyB0cmFuc2l0aW9uIGNhbiBiZSByZXR1cm5lZCBmcm9tIGEgW1tUcmFuc2l0aW9uU2VydmljZV1dIGhvb2sgdG9cbiAgICogcmVkaXJlY3QgYSB0cmFuc2l0aW9uIHRvIGEgbmV3IHN0YXRlIGFuZC9vciBzZXQgb2YgcGFyYW1ldGVycy5cbiAgICpcbiAgICogQGludGVybmFsYXBpXG4gICAqXG4gICAqIEByZXR1cm5zIFJldHVybnMgYSBuZXcgW1tUcmFuc2l0aW9uXV0gaW5zdGFuY2UuXG4gICAqL1xuICByZWRpcmVjdCh0YXJnZXRTdGF0ZTogVGFyZ2V0U3RhdGUpOiBUcmFuc2l0aW9uIHtcbiAgICBsZXQgcmVkaXJlY3RzID0gMSxcbiAgICAgIHRyYW5zOiBUcmFuc2l0aW9uID0gdGhpcztcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uZGl0aW9uYWwtYXNzaWdubWVudFxuICAgIHdoaWxlICgodHJhbnMgPSB0cmFucy5yZWRpcmVjdGVkRnJvbSgpKSAhPSBudWxsKSB7XG4gICAgICBpZiAoKytyZWRpcmVjdHMgPiAyMCkgdGhyb3cgbmV3IEVycm9yKGBUb28gbWFueSBjb25zZWN1dGl2ZSBUcmFuc2l0aW9uIHJlZGlyZWN0cyAoMjArKWApO1xuICAgIH1cblxuICAgIGNvbnN0IHJlZGlyZWN0T3B0czogVHJhbnNpdGlvbk9wdGlvbnMgPSB7IHJlZGlyZWN0ZWRGcm9tOiB0aGlzLCBzb3VyY2U6ICdyZWRpcmVjdCcgfTtcbiAgICAvLyBJZiB0aGUgb3JpZ2luYWwgdHJhbnNpdGlvbiB3YXMgY2F1c2VkIGJ5IFVSTCBzeW5jLCB0aGVuIHVzZSB7IGxvY2F0aW9uOiAncmVwbGFjZScgfVxuICAgIC8vIG9uIHRoZSBuZXcgdHJhbnNpdGlvbiAodW5sZXNzIHRoZSB0YXJnZXQgc3RhdGUgZXhwbGljaXRseSBzcGVjaWZpZXMgbG9jYXRpb246IGZhbHNlKS5cbiAgICAvLyBUaGlzIGNhdXNlcyB0aGUgb3JpZ2luYWwgdXJsIHRvIGJlIHJlcGxhY2VkIHdpdGggdGhlIHVybCBmb3IgdGhlIHJlZGlyZWN0IHRhcmdldFxuICAgIC8vIHNvIHRoZSBvcmlnaW5hbCB1cmwgZGlzYXBwZWFycyBmcm9tIHRoZSBicm93c2VyIGhpc3RvcnkuXG4gICAgaWYgKHRoaXMub3B0aW9ucygpLnNvdXJjZSA9PT0gJ3VybCcgJiYgdGFyZ2V0U3RhdGUub3B0aW9ucygpLmxvY2F0aW9uICE9PSBmYWxzZSkge1xuICAgICAgcmVkaXJlY3RPcHRzLmxvY2F0aW9uID0gJ3JlcGxhY2UnO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld09wdGlvbnMgPSBleHRlbmQoe30sIHRoaXMub3B0aW9ucygpLCB0YXJnZXRTdGF0ZS5vcHRpb25zKCksIHJlZGlyZWN0T3B0cyk7XG4gICAgdGFyZ2V0U3RhdGUgPSB0YXJnZXRTdGF0ZS53aXRoT3B0aW9ucyhuZXdPcHRpb25zLCB0cnVlKTtcblxuICAgIGNvbnN0IG5ld1RyYW5zaXRpb24gPSB0aGlzLnJvdXRlci50cmFuc2l0aW9uU2VydmljZS5jcmVhdGUodGhpcy5fdHJlZUNoYW5nZXMuZnJvbSwgdGFyZ2V0U3RhdGUpO1xuICAgIGNvbnN0IG9yaWdpbmFsRW50ZXJpbmdOb2RlcyA9IHRoaXMuX3RyZWVDaGFuZ2VzLmVudGVyaW5nO1xuICAgIGNvbnN0IHJlZGlyZWN0RW50ZXJpbmdOb2RlcyA9IG5ld1RyYW5zaXRpb24uX3RyZWVDaGFuZ2VzLmVudGVyaW5nO1xuXG4gICAgLy8gLS0tIFJlLXVzZSByZXNvbHZlIGRhdGEgZnJvbSBvcmlnaW5hbCB0cmFuc2l0aW9uIC0tLVxuICAgIC8vIFdoZW4gcmVkaXJlY3RpbmcgZnJvbSBhIHBhcmVudCBzdGF0ZSB0byBhIGNoaWxkIHN0YXRlIHdoZXJlIHRoZSBwYXJlbnQgcGFyYW1ldGVyIHZhbHVlcyBoYXZlbid0IGNoYW5nZWRcbiAgICAvLyAoYmVjYXVzZSBvZiB0aGUgcmVkaXJlY3QpLCB0aGUgcmVzb2x2ZXMgZmV0Y2hlZCBieSB0aGUgb3JpZ2luYWwgdHJhbnNpdGlvbiBhcmUgc3RpbGwgdmFsaWQgaW4gdGhlXG4gICAgLy8gcmVkaXJlY3RlZCB0cmFuc2l0aW9uLlxuICAgIC8vXG4gICAgLy8gVGhpcyBhbGxvd3MgeW91IHRvIGRlZmluZSBhIHJlZGlyZWN0IG9uIGEgcGFyZW50IHN0YXRlIHdoaWNoIGRlcGVuZHMgb24gYW4gYXN5bmMgcmVzb2x2ZSB2YWx1ZS5cbiAgICAvLyBZb3UgY2FuIHdhaXQgZm9yIHRoZSByZXNvbHZlLCB0aGVuIHJlZGlyZWN0IHRvIGEgY2hpbGQgc3RhdGUgYmFzZWQgb24gdGhlIHJlc3VsdC5cbiAgICAvLyBUaGUgcmVkaXJlY3RlZCB0cmFuc2l0aW9uIGRvZXMgbm90IGhhdmUgdG8gcmUtZmV0Y2ggdGhlIHJlc29sdmUuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBjb25zdCBub2RlSXNSZWxvYWRpbmcgPSAocmVsb2FkU3RhdGU6IFN0YXRlT2JqZWN0KSA9PiAobm9kZTogUGF0aE5vZGUpID0+IHtcbiAgICAgIHJldHVybiByZWxvYWRTdGF0ZSAmJiBub2RlLnN0YXRlLmluY2x1ZGVzW3JlbG9hZFN0YXRlLm5hbWVdO1xuICAgIH07XG5cbiAgICAvLyBGaW5kIGFueSBcImVudGVyaW5nXCIgbm9kZXMgaW4gdGhlIHJlZGlyZWN0IHBhdGggdGhhdCBtYXRjaCB0aGUgb3JpZ2luYWwgcGF0aCBhbmQgYXJlbid0IGJlaW5nIHJlbG9hZGVkXG4gICAgY29uc3QgbWF0Y2hpbmdFbnRlcmluZ05vZGVzOiBQYXRoTm9kZVtdID0gUGF0aFV0aWxzLm1hdGNoaW5nKFxuICAgICAgcmVkaXJlY3RFbnRlcmluZ05vZGVzLFxuICAgICAgb3JpZ2luYWxFbnRlcmluZ05vZGVzLFxuICAgICAgUGF0aFV0aWxzLm5vbkR5bmFtaWNQYXJhbXNcbiAgICApLmZpbHRlcihub3Qobm9kZUlzUmVsb2FkaW5nKHRhcmdldFN0YXRlLm9wdGlvbnMoKS5yZWxvYWRTdGF0ZSkpKTtcblxuICAgIC8vIFVzZSB0aGUgZXhpc3RpbmcgKHBvc3NpYmx5IHByZS1yZXNvbHZlZCkgcmVzb2x2YWJsZXMgZm9yIHRoZSBtYXRjaGluZyBlbnRlcmluZyBub2Rlcy5cbiAgICBtYXRjaGluZ0VudGVyaW5nTm9kZXMuZm9yRWFjaCgobm9kZSwgaWR4KSA9PiB7XG4gICAgICBub2RlLnJlc29sdmFibGVzID0gb3JpZ2luYWxFbnRlcmluZ05vZGVzW2lkeF0ucmVzb2x2YWJsZXM7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbmV3VHJhbnNpdGlvbjtcbiAgfVxuXG4gIC8qKiBAaGlkZGVuIElmIGEgdHJhbnNpdGlvbiBkb2Vzbid0IGV4aXQvZW50ZXIgYW55IHN0YXRlcywgcmV0dXJucyBhbnkgW1tQYXJhbV1dIHdob3NlIHZhbHVlIGNoYW5nZWQgKi9cbiAgcHJpdmF0ZSBfY2hhbmdlZFBhcmFtcygpOiBQYXJhbVtdIHtcbiAgICBjb25zdCB0YyA9IHRoaXMuX3RyZWVDaGFuZ2VzO1xuXG4gICAgLyoqIFJldHVybiB1bmRlZmluZWQgaWYgaXQncyBub3QgYSBcImR5bmFtaWNcIiB0cmFuc2l0aW9uLCBmb3IgdGhlIGZvbGxvd2luZyByZWFzb25zICovXG4gICAgLy8gSWYgdXNlciBleHBsaWNpdGx5IHdhbnRzIGEgcmVsb2FkXG4gICAgaWYgKHRoaXMuX29wdGlvbnMucmVsb2FkKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIC8vIElmIGFueSBzdGF0ZXMgYXJlIGV4aXRpbmcgb3IgZW50ZXJpbmdcbiAgICBpZiAodGMuZXhpdGluZy5sZW5ndGggfHwgdGMuZW50ZXJpbmcubGVuZ3RoKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIC8vIElmIHRvL2Zyb20gcGF0aCBsZW5ndGhzIGRpZmZlclxuICAgIGlmICh0Yy50by5sZW5ndGggIT09IHRjLmZyb20ubGVuZ3RoKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIC8vIElmIHRoZSB0by9mcm9tIHBhdGhzIGFyZSBkaWZmZXJlbnRcbiAgICBjb25zdCBwYXRoc0RpZmZlcjogYm9vbGVhbiA9IGFycmF5VHVwbGVzKHRjLnRvLCB0Yy5mcm9tKVxuICAgICAgLm1hcCh0dXBsZSA9PiB0dXBsZVswXS5zdGF0ZSAhPT0gdHVwbGVbMV0uc3RhdGUpXG4gICAgICAucmVkdWNlKGFueVRydWVSLCBmYWxzZSk7XG4gICAgaWYgKHBhdGhzRGlmZmVyKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgLy8gRmluZCBhbnkgcGFyYW1ldGVyIHZhbHVlcyB0aGF0IGRpZmZlclxuICAgIGNvbnN0IG5vZGVTY2hlbWFzOiBQYXJhbVtdW10gPSB0Yy50by5tYXAoKG5vZGU6IFBhdGhOb2RlKSA9PiBub2RlLnBhcmFtU2NoZW1hKTtcbiAgICBjb25zdCBbdG9WYWx1ZXMsIGZyb21WYWx1ZXNdID0gW3RjLnRvLCB0Yy5mcm9tXS5tYXAocGF0aCA9PiBwYXRoLm1hcCh4ID0+IHgucGFyYW1WYWx1ZXMpKTtcbiAgICBjb25zdCB0dXBsZXMgPSBhcnJheVR1cGxlcyhub2RlU2NoZW1hcywgdG9WYWx1ZXMsIGZyb21WYWx1ZXMpO1xuXG4gICAgcmV0dXJuIHR1cGxlcy5tYXAoKFtzY2hlbWEsIHRvVmFscywgZnJvbVZhbHNdKSA9PiBQYXJhbS5jaGFuZ2VkKHNjaGVtYSwgdG9WYWxzLCBmcm9tVmFscykpLnJlZHVjZSh1bm5lc3RSLCBbXSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB0cmFuc2l0aW9uIGlzIGR5bmFtaWMuXG4gICAqXG4gICAqIEEgdHJhbnNpdGlvbiBpcyBkeW5hbWljIGlmIG5vIHN0YXRlcyBhcmUgZW50ZXJlZCBub3IgZXhpdGVkLCBidXQgYXQgbGVhc3Qgb25lIGR5bmFtaWMgcGFyYW1ldGVyIGhhcyBjaGFuZ2VkLlxuICAgKlxuICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBUcmFuc2l0aW9uIGlzIGR5bmFtaWNcbiAgICovXG4gIGR5bmFtaWMoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY2hhbmdlcyA9IHRoaXMuX2NoYW5nZWRQYXJhbXMoKTtcbiAgICByZXR1cm4gIWNoYW5nZXMgPyBmYWxzZSA6IGNoYW5nZXMubWFwKHggPT4geC5keW5hbWljKS5yZWR1Y2UoYW55VHJ1ZVIsIGZhbHNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHRyYW5zaXRpb24gaXMgaWdub3JlZC5cbiAgICpcbiAgICogQSB0cmFuc2l0aW9uIGlzIGlnbm9yZWQgaWYgbm8gc3RhdGVzIGFyZSBlbnRlcmVkIG5vciBleGl0ZWQsIGFuZCBubyBwYXJhbWV0ZXIgdmFsdWVzIGhhdmUgY2hhbmdlZC5cbiAgICpcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgVHJhbnNpdGlvbiBpcyBpZ25vcmVkLlxuICAgKi9cbiAgaWdub3JlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLl9pZ25vcmVkUmVhc29uKCk7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICBfaWdub3JlZFJlYXNvbigpOiAnU2FtZUFzQ3VycmVudCcgfCAnU2FtZUFzUGVuZGluZycgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLnJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb247XG4gICAgY29uc3QgcmVsb2FkU3RhdGUgPSB0aGlzLl9vcHRpb25zLnJlbG9hZFN0YXRlO1xuXG4gICAgY29uc3Qgc2FtZSA9IChwYXRoQSwgcGF0aEIpID0+IHtcbiAgICAgIGlmIChwYXRoQS5sZW5ndGggIT09IHBhdGhCLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgY29uc3QgbWF0Y2hpbmcgPSBQYXRoVXRpbHMubWF0Y2hpbmcocGF0aEEsIHBhdGhCKTtcbiAgICAgIHJldHVybiBwYXRoQS5sZW5ndGggPT09IG1hdGNoaW5nLmZpbHRlcihub2RlID0+ICFyZWxvYWRTdGF0ZSB8fCAhbm9kZS5zdGF0ZS5pbmNsdWRlc1tyZWxvYWRTdGF0ZS5uYW1lXSkubGVuZ3RoO1xuICAgIH07XG5cbiAgICBjb25zdCBuZXdUQyA9IHRoaXMudHJlZUNoYW5nZXMoKTtcbiAgICBjb25zdCBwZW5kVEMgPSBwZW5kaW5nICYmIHBlbmRpbmcudHJlZUNoYW5nZXMoKTtcblxuICAgIGlmIChwZW5kVEMgJiYgc2FtZShwZW5kVEMudG8sIG5ld1RDLnRvKSAmJiBzYW1lKHBlbmRUQy5leGl0aW5nLCBuZXdUQy5leGl0aW5nKSkgcmV0dXJuICdTYW1lQXNQZW5kaW5nJztcbiAgICBpZiAobmV3VEMuZXhpdGluZy5sZW5ndGggPT09IDAgJiYgbmV3VEMuZW50ZXJpbmcubGVuZ3RoID09PSAwICYmIHNhbWUobmV3VEMuZnJvbSwgbmV3VEMudG8pKSByZXR1cm4gJ1NhbWVBc0N1cnJlbnQnO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1bnMgdGhlIHRyYW5zaXRpb25cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgZ2VuZXJhbGx5IGNhbGxlZCBmcm9tIHRoZSBbW1N0YXRlU2VydmljZS50cmFuc2l0aW9uVG9dXVxuICAgKlxuICAgKiBAaW50ZXJuYWxhcGlcbiAgICpcbiAgICogQHJldHVybnMgYSBwcm9taXNlIGZvciBhIHN1Y2Nlc3NmdWwgdHJhbnNpdGlvbi5cbiAgICovXG4gIHJ1bigpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHJ1bkFsbEhvb2tzID0gVHJhbnNpdGlvbkhvb2sucnVuQWxsSG9va3M7XG5cbiAgICAvLyBHZXRzIHRyYW5zaXRpb24gaG9va3MgYXJyYXkgZm9yIHRoZSBnaXZlbiBwaGFzZVxuICAgIGNvbnN0IGdldEhvb2tzRm9yID0gKHBoYXNlOiBUcmFuc2l0aW9uSG9va1BoYXNlKSA9PiB0aGlzLl9ob29rQnVpbGRlci5idWlsZEhvb2tzRm9yUGhhc2UocGhhc2UpO1xuXG4gICAgLy8gV2hlbiB0aGUgY2hhaW4gaXMgY29tcGxldGUsIHRoZW4gcmVzb2x2ZSBvciByZWplY3QgdGhlIGRlZmVycmVkXG4gICAgY29uc3QgdHJhbnNpdGlvblN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICB0cmFjZS50cmFjZVN1Y2Nlc3ModGhpcy4kdG8oKSwgdGhpcyk7XG4gICAgICB0aGlzLnN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgdGhpcy5fZGVmZXJyZWQucmVzb2x2ZSh0aGlzLnRvKCkpO1xuICAgICAgcnVuQWxsSG9va3MoZ2V0SG9va3NGb3IoVHJhbnNpdGlvbkhvb2tQaGFzZS5TVUNDRVNTKSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHRyYW5zaXRpb25FcnJvciA9IChyZWFzb246IFJlamVjdGlvbikgPT4ge1xuICAgICAgdHJhY2UudHJhY2VFcnJvcihyZWFzb24sIHRoaXMpO1xuICAgICAgdGhpcy5zdWNjZXNzID0gZmFsc2U7XG4gICAgICB0aGlzLl9kZWZlcnJlZC5yZWplY3QocmVhc29uKTtcbiAgICAgIHRoaXMuX2Vycm9yID0gcmVhc29uO1xuICAgICAgcnVuQWxsSG9va3MoZ2V0SG9va3NGb3IoVHJhbnNpdGlvbkhvb2tQaGFzZS5FUlJPUikpO1xuICAgIH07XG5cbiAgICBjb25zdCBydW5UcmFuc2l0aW9uID0gKCkgPT4ge1xuICAgICAgLy8gV2FpdCB0byBidWlsZCB0aGUgUlVOIGhvb2sgY2hhaW4gdW50aWwgdGhlIEJFRk9SRSBob29rcyBhcmUgZG9uZVxuICAgICAgLy8gVGhpcyBhbGxvd3MgYSBCRUZPUkUgaG9vayB0byBkeW5hbWljYWxseSBhZGQgYWRkaXRpb25hbCBSVU4gaG9va3MgdmlhIHRoZSBUcmFuc2l0aW9uIG9iamVjdC5cbiAgICAgIGNvbnN0IGFsbFJ1bkhvb2tzID0gZ2V0SG9va3NGb3IoVHJhbnNpdGlvbkhvb2tQaGFzZS5SVU4pO1xuICAgICAgY29uc3QgZG9uZSA9ICgpID0+IHNlcnZpY2VzLiRxLndoZW4odW5kZWZpbmVkKTtcbiAgICAgIHJldHVybiBUcmFuc2l0aW9uSG9vay5pbnZva2VIb29rcyhhbGxSdW5Ib29rcywgZG9uZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHN0YXJ0VHJhbnNpdGlvbiA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGdsb2JhbHMgPSB0aGlzLnJvdXRlci5nbG9iYWxzO1xuXG4gICAgICBnbG9iYWxzLmxhc3RTdGFydGVkVHJhbnNpdGlvbklkID0gdGhpcy4kaWQ7XG4gICAgICBnbG9iYWxzLnRyYW5zaXRpb24gPSB0aGlzO1xuICAgICAgZ2xvYmFscy50cmFuc2l0aW9uSGlzdG9yeS5lbnF1ZXVlKHRoaXMpO1xuXG4gICAgICB0cmFjZS50cmFjZVRyYW5zaXRpb25TdGFydCh0aGlzKTtcblxuICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLndoZW4odW5kZWZpbmVkKTtcbiAgICB9O1xuXG4gICAgY29uc3QgYWxsQmVmb3JlSG9va3MgPSBnZXRIb29rc0ZvcihUcmFuc2l0aW9uSG9va1BoYXNlLkJFRk9SRSk7XG4gICAgVHJhbnNpdGlvbkhvb2suaW52b2tlSG9va3MoYWxsQmVmb3JlSG9va3MsIHN0YXJ0VHJhbnNpdGlvbilcbiAgICAgIC50aGVuKHJ1blRyYW5zaXRpb24pXG4gICAgICAudGhlbih0cmFuc2l0aW9uU3VjY2VzcywgdHJhbnNpdGlvbkVycm9yKTtcblxuICAgIHJldHVybiB0aGlzLnByb21pc2U7XG4gIH1cblxuICAvKiogQ2hlY2tzIGlmIHRoaXMgdHJhbnNpdGlvbiBpcyBjdXJyZW50bHkgYWN0aXZlL3J1bm5pbmcuICovXG4gIGlzQWN0aXZlID0gKCkgPT4gdGhpcy5yb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uID09PSB0aGlzO1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIFRyYW5zaXRpb24gaXMgdmFsaWRcbiAgICpcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgVHJhbnNpdGlvbiBpcyB2YWxpZFxuICAgKi9cbiAgdmFsaWQoKSB7XG4gICAgcmV0dXJuICF0aGlzLmVycm9yKCkgfHwgdGhpcy5zdWNjZXNzICE9PSB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogQWJvcnRzIHRoaXMgdHJhbnNpdGlvblxuICAgKlxuICAgKiBJbXBlcmF0aXZlIEFQSSB0byBhYm9ydCBhIFRyYW5zaXRpb24uXG4gICAqIFRoaXMgb25seSBhcHBsaWVzIHRvIFRyYW5zaXRpb25zIHRoYXQgYXJlIG5vdCB5ZXQgY29tcGxldGUuXG4gICAqL1xuICBhYm9ydCgpIHtcbiAgICAvLyBEbyBub3Qgc2V0IGZsYWcgaWYgdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBjb21wbGV0ZVxuICAgIGlmIChpc1VuZGVmaW5lZCh0aGlzLnN1Y2Nlc3MpKSB7XG4gICAgICB0aGlzLl9hYm9ydGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIFRyYW5zaXRpb24gZXJyb3IgcmVhc29uLlxuICAgKlxuICAgKiBJZiB0aGUgdHJhbnNpdGlvbiBpcyBpbnZhbGlkIChhbmQgY291bGQgbm90IGJlIHJ1biksIHJldHVybnMgdGhlIHJlYXNvbiB0aGUgdHJhbnNpdGlvbiBpcyBpbnZhbGlkLlxuICAgKiBJZiB0aGUgdHJhbnNpdGlvbiB3YXMgdmFsaWQgYW5kIHJhbiwgYnV0IHdhcyBub3Qgc3VjY2Vzc2Z1bCwgcmV0dXJucyB0aGUgcmVhc29uIHRoZSB0cmFuc2l0aW9uIGZhaWxlZC5cbiAgICpcbiAgICogQHJldHVybnMgYSB0cmFuc2l0aW9uIHJlamVjdGlvbiBleHBsYWluaW5nIHdoeSB0aGUgdHJhbnNpdGlvbiBpcyBpbnZhbGlkLCBvciB0aGUgcmVhc29uIHRoZSB0cmFuc2l0aW9uIGZhaWxlZC5cbiAgICovXG4gIGVycm9yKCk6IFJlamVjdGlvbiB7XG4gICAgY29uc3Qgc3RhdGU6IFN0YXRlT2JqZWN0ID0gdGhpcy4kdG8oKTtcblxuICAgIGlmIChzdGF0ZS5zZWxmLmFic3RyYWN0KSB7XG4gICAgICByZXR1cm4gUmVqZWN0aW9uLmludmFsaWQoYENhbm5vdCB0cmFuc2l0aW9uIHRvIGFic3RyYWN0IHN0YXRlICcke3N0YXRlLm5hbWV9J2ApO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcmFtRGVmcyA9IHN0YXRlLnBhcmFtZXRlcnMoKTtcbiAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLnBhcmFtcygpO1xuICAgIGNvbnN0IGludmFsaWRQYXJhbXMgPSBwYXJhbURlZnMuZmlsdGVyKHBhcmFtID0+ICFwYXJhbS52YWxpZGF0ZXModmFsdWVzW3BhcmFtLmlkXSkpO1xuXG4gICAgaWYgKGludmFsaWRQYXJhbXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBpbnZhbGlkVmFsdWVzID0gaW52YWxpZFBhcmFtcy5tYXAocGFyYW0gPT4gYFske3BhcmFtLmlkfToke3N0cmluZ2lmeSh2YWx1ZXNbcGFyYW0uaWRdKX1dYCkuam9pbignLCAnKTtcbiAgICAgIGNvbnN0IGRldGFpbCA9IGBUaGUgZm9sbG93aW5nIHBhcmFtZXRlciB2YWx1ZXMgYXJlIG5vdCB2YWxpZCBmb3Igc3RhdGUgJyR7c3RhdGUubmFtZX0nOiAke2ludmFsaWRWYWx1ZXN9YDtcbiAgICAgIHJldHVybiBSZWplY3Rpb24uaW52YWxpZChkZXRhaWwpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN1Y2Nlc3MgPT09IGZhbHNlKSByZXR1cm4gdGhpcy5fZXJyb3I7XG4gIH1cblxuICAvKipcbiAgICogQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIFRyYW5zaXRpb25cbiAgICpcbiAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIFRyYW5zaXRpb25cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIGNvbnN0IGZyb21TdGF0ZU9yTmFtZSA9IHRoaXMuZnJvbSgpO1xuICAgIGNvbnN0IHRvU3RhdGVPck5hbWUgPSB0aGlzLnRvKCk7XG5cbiAgICBjb25zdCBhdm9pZEVtcHR5SGFzaCA9IChwYXJhbXM6IFJhd1BhcmFtcykgPT5cbiAgICAgIHBhcmFtc1snIyddICE9PSBudWxsICYmIHBhcmFtc1snIyddICE9PSB1bmRlZmluZWQgPyBwYXJhbXMgOiBvbWl0KHBhcmFtcywgWycjJ10pO1xuXG4gICAgLy8gKFgpIG1lYW5zIHRoZSB0byBzdGF0ZSBpcyBpbnZhbGlkLlxuICAgIGNvbnN0IGlkID0gdGhpcy4kaWQsXG4gICAgICBmcm9tID0gaXNPYmplY3QoZnJvbVN0YXRlT3JOYW1lKSA/IGZyb21TdGF0ZU9yTmFtZS5uYW1lIDogZnJvbVN0YXRlT3JOYW1lLFxuICAgICAgZnJvbVBhcmFtcyA9IHN0cmluZ2lmeShhdm9pZEVtcHR5SGFzaCh0aGlzLl90cmVlQ2hhbmdlcy5mcm9tLm1hcChwcm9wKCdwYXJhbVZhbHVlcycpKS5yZWR1Y2UobWVyZ2VSLCB7fSkpKSxcbiAgICAgIHRvVmFsaWQgPSB0aGlzLnZhbGlkKCkgPyAnJyA6ICcoWCkgJyxcbiAgICAgIHRvID0gaXNPYmplY3QodG9TdGF0ZU9yTmFtZSkgPyB0b1N0YXRlT3JOYW1lLm5hbWUgOiB0b1N0YXRlT3JOYW1lLFxuICAgICAgdG9QYXJhbXMgPSBzdHJpbmdpZnkoYXZvaWRFbXB0eUhhc2godGhpcy5wYXJhbXMoKSkpO1xuXG4gICAgcmV0dXJuIGBUcmFuc2l0aW9uIyR7aWR9KCAnJHtmcm9tfScke2Zyb21QYXJhbXN9IC0+ICR7dG9WYWxpZH0nJHt0b30nJHt0b1BhcmFtc30gKWA7XG4gIH1cbn1cbiIsIi8qKiBAcHVibGljYXBpIEBtb2R1bGUgdXJsICovIC8qKiAqL1xuaW1wb3J0IHsgbWFwLCBpbmhlcml0LCBpZGVudGl0eSwgdW5uZXN0LCB0YWlsLCBmaW5kLCBPYmosIGFsbFRydWVSLCB1bm5lc3RSLCBhcnJheVR1cGxlcyB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgcHJvcCwgcHJvcEVxIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBpc0FycmF5LCBpc1N0cmluZywgaXNEZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgUGFyYW0sIERlZlR5cGUgfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuaW1wb3J0IHsgUGFyYW1UeXBlcyB9IGZyb20gJy4uL3BhcmFtcy9wYXJhbVR5cGVzJztcbmltcG9ydCB7IFJhd1BhcmFtcyB9IGZyb20gJy4uL3BhcmFtcy9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVXJsTWF0Y2hlckNvbXBpbGVDb25maWcgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBqb2luTmVpZ2hib3JzUiwgc3BsaXRPbkRlbGltIH0gZnJvbSAnLi4vY29tbW9uL3N0cmluZ3MnO1xuaW1wb3J0IHsgUGFyYW1UeXBlIH0gZnJvbSAnLi4vcGFyYW1zJztcbmltcG9ydCB7IGRlZmF1bHRzIH0gZnJvbSAnLi4vY29tbW9uJztcbmltcG9ydCB7IFBhcmFtRmFjdG9yeSB9IGZyb20gJy4vdXJsTWF0Y2hlckZhY3RvcnknO1xuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gcXVvdGVSZWdFeHAoc3RyOiBhbnksIHBhcmFtPzogYW55KSB7XG4gIGxldCBzdXJyb3VuZFBhdHRlcm4gPSBbJycsICcnXSxcbiAgICByZXN1bHQgPSBzdHIucmVwbGFjZSgvW1xcXFxcXFtcXF1cXF4kKis/LigpfHt9XS9nLCAnXFxcXCQmJyk7XG4gIGlmICghcGFyYW0pIHJldHVybiByZXN1bHQ7XG5cbiAgc3dpdGNoIChwYXJhbS5zcXVhc2gpIHtcbiAgICBjYXNlIGZhbHNlOlxuICAgICAgc3Vycm91bmRQYXR0ZXJuID0gWycoJywgJyknICsgKHBhcmFtLmlzT3B0aW9uYWwgPyAnPycgOiAnJyldO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB0cnVlOlxuICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL1xcLyQvLCAnJyk7XG4gICAgICBzdXJyb3VuZFBhdHRlcm4gPSBbJyg/Oi8oJywgJyl8Lyk/J107XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgc3Vycm91bmRQYXR0ZXJuID0gW2AoJHtwYXJhbS5zcXVhc2h9fGAsICcpPyddO1xuICAgICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdCArIHN1cnJvdW5kUGF0dGVyblswXSArIHBhcmFtLnR5cGUucGF0dGVybi5zb3VyY2UgKyBzdXJyb3VuZFBhdHRlcm5bMV07XG59XG5cbi8qKiBAaGlkZGVuICovXG5jb25zdCBtZW1vaXplVG8gPSAob2JqOiBPYmosIF9wcm9wOiBzdHJpbmcsIGZuOiBGdW5jdGlvbikgPT4gKG9ialtfcHJvcF0gPSBvYmpbX3Byb3BdIHx8IGZuKCkpO1xuXG4vKiogQGhpZGRlbiAqL1xuY29uc3Qgc3BsaXRPblNsYXNoID0gc3BsaXRPbkRlbGltKCcvJyk7XG5cbi8qKiBAaGlkZGVuICovXG5pbnRlcmZhY2UgVXJsTWF0Y2hlckNhY2hlIHtcbiAgc2VnbWVudHM/OiBhbnlbXTtcbiAgd2VpZ2h0cz86IG51bWJlcltdO1xuICBwYXRoPzogVXJsTWF0Y2hlcltdO1xuICBwYXJlbnQ/OiBVcmxNYXRjaGVyO1xuICBwYXR0ZXJuPzogUmVnRXhwO1xufVxuXG4vKiogQGhpZGRlbiAqL1xuaW50ZXJmYWNlIE1hdGNoRGV0YWlscyB7XG4gIGlkOiBzdHJpbmc7XG4gIHJlZ2V4cDogc3RyaW5nO1xuICBzZWdtZW50OiBzdHJpbmc7XG4gIHR5cGU6IFBhcmFtVHlwZTtcbn1cblxuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IGRlZmF1bHRDb25maWc6IFVybE1hdGNoZXJDb21waWxlQ29uZmlnID0ge1xuICBzdGF0ZTogeyBwYXJhbXM6IHt9IH0sXG4gIHN0cmljdDogdHJ1ZSxcbiAgY2FzZUluc2Vuc2l0aXZlOiB0cnVlLFxufTtcblxuLyoqXG4gKiBNYXRjaGVzIFVSTHMgYWdhaW5zdCBwYXR0ZXJucy5cbiAqXG4gKiBNYXRjaGVzIFVSTHMgYWdhaW5zdCBwYXR0ZXJucyBhbmQgZXh0cmFjdHMgbmFtZWQgcGFyYW1ldGVycyBmcm9tIHRoZSBwYXRoIG9yIHRoZSBzZWFyY2hcbiAqIHBhcnQgb2YgdGhlIFVSTC5cbiAqXG4gKiBBIFVSTCBwYXR0ZXJuIGNvbnNpc3RzIG9mIGEgcGF0aCBwYXR0ZXJuLCBvcHRpb25hbGx5IGZvbGxvd2VkIGJ5ICc/JyBhbmQgYSBsaXN0IG9mIHNlYXJjaCAocXVlcnkpXG4gKiBwYXJhbWV0ZXJzLiBNdWx0aXBsZSBzZWFyY2ggcGFyYW1ldGVyIG5hbWVzIGFyZSBzZXBhcmF0ZWQgYnkgJyYnLiBTZWFyY2ggcGFyYW1ldGVyc1xuICogZG8gbm90IGluZmx1ZW5jZSB3aGV0aGVyIG9yIG5vdCBhIFVSTCBpcyBtYXRjaGVkLCBidXQgdGhlaXIgdmFsdWVzIGFyZSBwYXNzZWQgdGhyb3VnaCBpbnRvXG4gKiB0aGUgbWF0Y2hlZCBwYXJhbWV0ZXJzIHJldHVybmVkIGJ5IFtbVXJsTWF0Y2hlci5leGVjXV0uXG4gKlxuICogLSAqUGF0aCBwYXJhbWV0ZXJzKiBhcmUgZGVmaW5lZCB1c2luZyBjdXJseSBicmFjZSBwbGFjZWhvbGRlcnMgKGAvc29tZXBhdGgve3BhcmFtfWApXG4gKiBvciBjb2xvbiBwbGFjZWhvbGRlcnMgKGAvc29tZVBhdGgvOnBhcmFtYCkuXG4gKlxuICogLSAqQSBwYXJhbWV0ZXIgUmVnRXhwKiBtYXkgYmUgZGVmaW5lZCBmb3IgYSBwYXJhbSBhZnRlciBhIGNvbG9uXG4gKiAoYC9zb21lUGF0aC97cGFyYW06W2EtekEtWjAtOV0rfWApIGluIGEgY3VybHkgYnJhY2UgcGxhY2Vob2xkZXIuXG4gKiBUaGUgcmVnZXhwIG11c3QgbWF0Y2ggZm9yIHRoZSB1cmwgdG8gYmUgbWF0Y2hlZC5cbiAqIFNob3VsZCB0aGUgcmVnZXhwIGl0c2VsZiBjb250YWluIGN1cmx5IGJyYWNlcywgdGhleSBtdXN0IGJlIGluIG1hdGNoZWQgcGFpcnMgb3IgZXNjYXBlZCB3aXRoIGEgYmFja3NsYXNoLlxuICpcbiAqIE5vdGU6IGEgUmVnRXhwIHBhcmFtZXRlciB3aWxsIGVuY29kZSBpdHMgdmFsdWUgdXNpbmcgZWl0aGVyIFtbUGFyYW1UeXBlcy5wYXRoXV0gb3IgW1tQYXJhbVR5cGVzLnF1ZXJ5XV0uXG4gKlxuICogLSAqQ3VzdG9tIHBhcmFtZXRlciB0eXBlcyogbWF5IGFsc28gYmUgc3BlY2lmaWVkIGFmdGVyIGEgY29sb24gKGAvc29tZVBhdGgve3BhcmFtOmludH1gKSBpbiBjdXJseSBicmFjZSBwYXJhbWV0ZXJzLlxuICogICBTZWUgW1tVcmxNYXRjaGVyRmFjdG9yeS50eXBlXV0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogLSAqQ2F0Y2gtYWxsIHBhcmFtZXRlcnMqIGFyZSBkZWZpbmVkIHVzaW5nIGFuIGFzdGVyaXNrIHBsYWNlaG9sZGVyIChgL3NvbWVwYXRoLypjYXRjaGFsbHBhcmFtYCkuXG4gKiAgIEEgY2F0Y2gtYWxsICogcGFyYW1ldGVyIHZhbHVlIHdpbGwgY29udGFpbiB0aGUgcmVtYWluZGVyIG9mIHRoZSBVUkwuXG4gKlxuICogLS0tXG4gKlxuICogUGFyYW1ldGVyIG5hbWVzIG1heSBjb250YWluIG9ubHkgd29yZCBjaGFyYWN0ZXJzIChsYXRpbiBsZXR0ZXJzLCBkaWdpdHMsIGFuZCB1bmRlcnNjb3JlKSBhbmRcbiAqIG11c3QgYmUgdW5pcXVlIHdpdGhpbiB0aGUgcGF0dGVybiAoYWNyb3NzIGJvdGggcGF0aCBhbmQgc2VhcmNoIHBhcmFtZXRlcnMpLlxuICogQSBwYXRoIHBhcmFtZXRlciBtYXRjaGVzIGFueSBudW1iZXIgb2YgY2hhcmFjdGVycyBvdGhlciB0aGFuICcvJy4gRm9yIGNhdGNoLWFsbFxuICogcGxhY2Vob2xkZXJzIHRoZSBwYXRoIHBhcmFtZXRlciBtYXRjaGVzIGFueSBudW1iZXIgb2YgY2hhcmFjdGVycy5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAqIGAnL2hlbGxvLydgIC0gTWF0Y2hlcyBvbmx5IGlmIHRoZSBwYXRoIGlzIGV4YWN0bHkgJy9oZWxsby8nLiBUaGVyZSBpcyBubyBzcGVjaWFsIHRyZWF0bWVudCBmb3JcbiAqICAgdHJhaWxpbmcgc2xhc2hlcywgYW5kIHBhdHRlcm5zIGhhdmUgdG8gbWF0Y2ggdGhlIGVudGlyZSBwYXRoLCBub3QganVzdCBhIHByZWZpeC5cbiAqICogYCcvdXNlci86aWQnYCAtIE1hdGNoZXMgJy91c2VyL2JvYicgb3IgJy91c2VyLzEyMzQhISEnIG9yIGV2ZW4gJy91c2VyLycgYnV0IG5vdCAnL3VzZXInIG9yXG4gKiAgICcvdXNlci9ib2IvZGV0YWlscycuIFRoZSBzZWNvbmQgcGF0aCBzZWdtZW50IHdpbGwgYmUgY2FwdHVyZWQgYXMgdGhlIHBhcmFtZXRlciAnaWQnLlxuICogKiBgJy91c2VyL3tpZH0nYCAtIFNhbWUgYXMgdGhlIHByZXZpb3VzIGV4YW1wbGUsIGJ1dCB1c2luZyBjdXJseSBicmFjZSBzeW50YXguXG4gKiAqIGAnL3VzZXIve2lkOlteL10qfSdgIC0gU2FtZSBhcyB0aGUgcHJldmlvdXMgZXhhbXBsZS5cbiAqICogYCcvdXNlci97aWQ6WzAtOWEtZkEtRl17MSw4fX0nYCAtIFNpbWlsYXIgdG8gdGhlIHByZXZpb3VzIGV4YW1wbGUsIGJ1dCBvbmx5IG1hdGNoZXMgaWYgdGhlIGlkXG4gKiAgIHBhcmFtZXRlciBjb25zaXN0cyBvZiAxIHRvIDggaGV4IGRpZ2l0cy5cbiAqICogYCcvZmlsZXMve3BhdGg6Lip9J2AgLSBNYXRjaGVzIGFueSBVUkwgc3RhcnRpbmcgd2l0aCAnL2ZpbGVzLycgYW5kIGNhcHR1cmVzIHRoZSByZXN0IG9mIHRoZVxuICogICBwYXRoIGludG8gdGhlIHBhcmFtZXRlciAncGF0aCcuXG4gKiAqIGAnL2ZpbGVzLypwYXRoJ2AgLSBkaXR0by5cbiAqICogYCcvY2FsZW5kYXIve3N0YXJ0OmRhdGV9J2AgLSBNYXRjaGVzIFwiL2NhbGVuZGFyLzIwMTQtMTEtMTJcIiAoYmVjYXVzZSB0aGUgcGF0dGVybiBkZWZpbmVkXG4gKiAgIGluIHRoZSBidWlsdC1pbiAgYGRhdGVgIFBhcmFtVHlwZSBtYXRjaGVzIGAyMDE0LTExLTEyYCkgYW5kIHByb3ZpZGVzIGEgRGF0ZSBvYmplY3QgaW4gJHN0YXRlUGFyYW1zLnN0YXJ0XG4gKlxuICovXG5leHBvcnQgY2xhc3MgVXJsTWF0Y2hlciB7XG4gIC8qKiBAaGlkZGVuICovXG4gIHN0YXRpYyBuYW1lVmFsaWRhdG9yOiBSZWdFeHAgPSAvXlxcdysoWy0uXStcXHcrKSooPzpcXFtcXF0pPyQvO1xuXG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX2NhY2hlOiBVcmxNYXRjaGVyQ2FjaGUgPSB7IHBhdGg6IFt0aGlzXSB9O1xuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF9jaGlsZHJlbjogVXJsTWF0Y2hlcltdID0gW107XG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX3BhcmFtczogUGFyYW1bXSA9IFtdO1xuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF9zZWdtZW50czogc3RyaW5nW10gPSBbXTtcbiAgLyoqIEBoaWRkZW4gKi9cbiAgcHJpdmF0ZSBfY29tcGlsZWQ6IHN0cmluZ1tdID0gW107XG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgcmVhZG9ubHkgY29uZmlnOiBVcmxNYXRjaGVyQ29tcGlsZUNvbmZpZztcblxuICAvKiogVGhlIHBhdHRlcm4gdGhhdCB3YXMgcGFzc2VkIGludG8gdGhlIGNvbnN0cnVjdG9yICovXG4gIHB1YmxpYyBwYXR0ZXJuOiBzdHJpbmc7XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgc3RhdGljIGVuY29kZURhc2hlcyhzdHI6IHN0cmluZykge1xuICAgIC8vIFJlcGxhY2UgZGFzaGVzIHdpdGggZW5jb2RlZCBcIlxcLVwiXG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHIpLnJlcGxhY2UoXG4gICAgICAvLS9nLFxuICAgICAgYyA9PlxuICAgICAgICBgJTVDJSR7Y1xuICAgICAgICAgIC5jaGFyQ29kZUF0KDApXG4gICAgICAgICAgLnRvU3RyaW5nKDE2KVxuICAgICAgICAgIC50b1VwcGVyQ2FzZSgpfWBcbiAgICApO1xuICB9XG5cbiAgLyoqIEBoaWRkZW4gR2l2ZW4gYSBtYXRjaGVyLCByZXR1cm4gYW4gYXJyYXkgd2l0aCB0aGUgbWF0Y2hlcidzIHBhdGggc2VnbWVudHMgYW5kIHBhdGggcGFyYW1zLCBpbiBvcmRlciAqL1xuICBzdGF0aWMgcGF0aFNlZ21lbnRzQW5kUGFyYW1zKG1hdGNoZXI6IFVybE1hdGNoZXIpIHtcbiAgICBjb25zdCBzdGF0aWNTZWdtZW50cyA9IG1hdGNoZXIuX3NlZ21lbnRzO1xuICAgIGNvbnN0IHBhdGhQYXJhbXMgPSBtYXRjaGVyLl9wYXJhbXMuZmlsdGVyKHAgPT4gcC5sb2NhdGlvbiA9PT0gRGVmVHlwZS5QQVRIKTtcbiAgICByZXR1cm4gYXJyYXlUdXBsZXMoc3RhdGljU2VnbWVudHMsIHBhdGhQYXJhbXMuY29uY2F0KHVuZGVmaW5lZCkpXG4gICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgLmZpbHRlcih4ID0+IHggIT09ICcnICYmIGlzRGVmaW5lZCh4KSk7XG4gIH1cblxuICAvKiogQGhpZGRlbiBHaXZlbiBhIG1hdGNoZXIsIHJldHVybiBhbiBhcnJheSB3aXRoIHRoZSBtYXRjaGVyJ3MgcXVlcnkgcGFyYW1zICovXG4gIHN0YXRpYyBxdWVyeVBhcmFtcyhtYXRjaGVyOiBVcmxNYXRjaGVyKTogUGFyYW1bXSB7XG4gICAgcmV0dXJuIG1hdGNoZXIuX3BhcmFtcy5maWx0ZXIocCA9PiBwLmxvY2F0aW9uID09PSBEZWZUeXBlLlNFQVJDSCk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZSB0d28gVXJsTWF0Y2hlcnNcbiAgICpcbiAgICogVGhpcyBjb21wYXJpc29uIGZ1bmN0aW9uIGNvbnZlcnRzIGEgVXJsTWF0Y2hlciBpbnRvIHN0YXRpYyBhbmQgZHluYW1pYyBwYXRoIHNlZ21lbnRzLlxuICAgKiBFYWNoIHN0YXRpYyBwYXRoIHNlZ21lbnQgaXMgYSBzdGF0aWMgc3RyaW5nIGJldHdlZW4gYSBwYXRoIHNlcGFyYXRvciAoc2xhc2ggY2hhcmFjdGVyKS5cbiAgICogRWFjaCBkeW5hbWljIHNlZ21lbnQgaXMgYSBwYXRoIHBhcmFtZXRlci5cbiAgICpcbiAgICogVGhlIGNvbXBhcmlzb24gZnVuY3Rpb24gc29ydHMgc3RhdGljIHNlZ21lbnRzIGJlZm9yZSBkeW5hbWljIG9uZXMuXG4gICAqL1xuICBzdGF0aWMgY29tcGFyZShhOiBVcmxNYXRjaGVyLCBiOiBVcmxNYXRjaGVyKTogbnVtYmVyIHtcbiAgICAvKipcbiAgICAgKiBUdXJuIGEgVXJsTWF0Y2hlciBhbmQgYWxsIGl0cyBwYXJlbnQgbWF0Y2hlcnMgaW50byBhbiBhcnJheVxuICAgICAqIG9mIHNsYXNoIGxpdGVyYWxzICcvJywgc3RyaW5nIGxpdGVyYWxzLCBhbmQgUGFyYW0gb2JqZWN0c1xuICAgICAqXG4gICAgICogVGhpcyBleGFtcGxlIG1hdGNoZXIgbWF0Y2hlcyBzdHJpbmdzIGxpa2UgXCIvZm9vLzpwYXJhbS90YWlsXCI6XG4gICAgICogdmFyIG1hdGNoZXIgPSAkdW1mLmNvbXBpbGUoXCIvZm9vXCIpLmFwcGVuZCgkdW1mLmNvbXBpbGUoXCIvOnBhcmFtXCIpKS5hcHBlbmQoJHVtZi5jb21waWxlKFwiL1wiKSkuYXBwZW5kKCR1bWYuY29tcGlsZShcInRhaWxcIikpO1xuICAgICAqIHZhciByZXN1bHQgPSBzZWdtZW50cyhtYXRjaGVyKTsgLy8gWyAnLycsICdmb28nLCAnLycsIFBhcmFtLCAnLycsICd0YWlsJyBdXG4gICAgICpcbiAgICAgKiBDYWNoZXMgdGhlIHJlc3VsdCBhcyBgbWF0Y2hlci5fY2FjaGUuc2VnbWVudHNgXG4gICAgICovXG4gICAgY29uc3Qgc2VnbWVudHMgPSAobWF0Y2hlcjogVXJsTWF0Y2hlcikgPT5cbiAgICAgIChtYXRjaGVyLl9jYWNoZS5zZWdtZW50cyA9XG4gICAgICAgIG1hdGNoZXIuX2NhY2hlLnNlZ21lbnRzIHx8XG4gICAgICAgIG1hdGNoZXIuX2NhY2hlLnBhdGhcbiAgICAgICAgICAubWFwKFVybE1hdGNoZXIucGF0aFNlZ21lbnRzQW5kUGFyYW1zKVxuICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAgICAgLnJlZHVjZShqb2luTmVpZ2hib3JzUiwgW10pXG4gICAgICAgICAgLm1hcCh4ID0+IChpc1N0cmluZyh4KSA/IHNwbGl0T25TbGFzaCh4KSA6IHgpKVxuICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pKTtcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHNvcnQgd2VpZ2h0IGZvciBlYWNoIHNlZ21lbnQgb2YgYSBVcmxNYXRjaGVyXG4gICAgICpcbiAgICAgKiBDYWNoZXMgdGhlIHJlc3VsdCBhcyBgbWF0Y2hlci5fY2FjaGUud2VpZ2h0c2BcbiAgICAgKi9cbiAgICBjb25zdCB3ZWlnaHRzID0gKG1hdGNoZXI6IFVybE1hdGNoZXIpID0+XG4gICAgICAobWF0Y2hlci5fY2FjaGUud2VpZ2h0cyA9XG4gICAgICAgIG1hdGNoZXIuX2NhY2hlLndlaWdodHMgfHxcbiAgICAgICAgc2VnbWVudHMobWF0Y2hlcikubWFwKHNlZ21lbnQgPT4ge1xuICAgICAgICAgIC8vIFNvcnQgc2xhc2hlcyBmaXJzdCwgdGhlbiBzdGF0aWMgc3RyaW5ncywgdGhlIFBhcmFtc1xuICAgICAgICAgIGlmIChzZWdtZW50ID09PSAnLycpIHJldHVybiAxO1xuICAgICAgICAgIGlmIChpc1N0cmluZyhzZWdtZW50KSkgcmV0dXJuIDI7XG4gICAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBQYXJhbSkgcmV0dXJuIDM7XG4gICAgICAgIH0pKTtcblxuICAgIC8qKlxuICAgICAqIFBhZHMgc2hvcnRlciBhcnJheSBpbi1wbGFjZSAobXV0YXRlcylcbiAgICAgKi9cbiAgICBjb25zdCBwYWRBcnJheXMgPSAobDogYW55W10sIHI6IGFueVtdLCBwYWRWYWw6IGFueSkgPT4ge1xuICAgICAgY29uc3QgbGVuID0gTWF0aC5tYXgobC5sZW5ndGgsIHIubGVuZ3RoKTtcbiAgICAgIHdoaWxlIChsLmxlbmd0aCA8IGxlbikgbC5wdXNoKHBhZFZhbCk7XG4gICAgICB3aGlsZSAoci5sZW5ndGggPCBsZW4pIHIucHVzaChwYWRWYWwpO1xuICAgIH07XG5cbiAgICBjb25zdCB3ZWlnaHRzQSA9IHdlaWdodHMoYSksXG4gICAgICB3ZWlnaHRzQiA9IHdlaWdodHMoYik7XG4gICAgcGFkQXJyYXlzKHdlaWdodHNBLCB3ZWlnaHRzQiwgMCk7XG5cbiAgICBjb25zdCBfcGFpcnMgPSBhcnJheVR1cGxlcyh3ZWlnaHRzQSwgd2VpZ2h0c0IpO1xuICAgIGxldCBjbXAsIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgX3BhaXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjbXAgPSBfcGFpcnNbaV1bMF0gLSBfcGFpcnNbaV1bMV07XG4gICAgICBpZiAoY21wICE9PSAwKSByZXR1cm4gY21wO1xuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBwYXR0ZXJuIFRoZSBwYXR0ZXJuIHRvIGNvbXBpbGUgaW50byBhIG1hdGNoZXIuXG4gICAqIEBwYXJhbSBwYXJhbVR5cGVzIFRoZSBbW1BhcmFtVHlwZXNdXSByZWdpc3RyeVxuICAgKiBAcGFyYW0gcGFyYW1GYWN0b3J5IEEgW1tQYXJhbUZhY3RvcnldXSBvYmplY3RcbiAgICogQHBhcmFtIGNvbmZpZyAgQSBbW1VybE1hdGNoZXJDb21waWxlQ29uZmlnXV0gY29uZmlndXJhdGlvbiBvYmplY3RcbiAgICovXG4gIGNvbnN0cnVjdG9yKHBhdHRlcm46IHN0cmluZywgcGFyYW1UeXBlczogUGFyYW1UeXBlcywgcGFyYW1GYWN0b3J5OiBQYXJhbUZhY3RvcnksIGNvbmZpZz86IFVybE1hdGNoZXJDb21waWxlQ29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWcgPSBkZWZhdWx0cyhjb25maWcsIGRlZmF1bHRDb25maWcpO1xuICAgIHRoaXMucGF0dGVybiA9IHBhdHRlcm47XG5cbiAgICAvLyBGaW5kIGFsbCBwbGFjZWhvbGRlcnMgYW5kIGNyZWF0ZSBhIGNvbXBpbGVkIHBhdHRlcm4sIHVzaW5nIGVpdGhlciBjbGFzc2ljIG9yIGN1cmx5IHN5bnRheDpcbiAgICAvLyAgICcqJyBuYW1lXG4gICAgLy8gICAnOicgbmFtZVxuICAgIC8vICAgJ3snIG5hbWUgJ30nXG4gICAgLy8gICAneycgbmFtZSAnOicgcmVnZXhwICd9J1xuICAgIC8vIFRoZSByZWd1bGFyIGV4cHJlc3Npb24gaXMgc29tZXdoYXQgY29tcGxpY2F0ZWQgZHVlIHRvIHRoZSBuZWVkIHRvIGFsbG93IGN1cmx5IGJyYWNlc1xuICAgIC8vIGluc2lkZSB0aGUgcmVndWxhciBleHByZXNzaW9uLiBUaGUgcGxhY2Vob2xkZXIgcmVnZXhwIGJyZWFrcyBkb3duIGFzIGZvbGxvd3M6XG4gICAgLy8gICAgKFs6Kl0pKFtcXHdcXFtcXF1dKykgICAgICAgICAgICAgIC0gY2xhc3NpYyBwbGFjZWhvbGRlciAoJDEgLyAkMikgKHNlYXJjaCB2ZXJzaW9uIGhhcyAtIGZvciBzbmFrZS1jYXNlKVxuICAgIC8vICAgIFxceyhbXFx3XFxbXFxdXSspKD86XFw6XFxzKiggLi4uICkpP1xcfSAgLSBjdXJseSBicmFjZSBwbGFjZWhvbGRlciAoJDMpIHdpdGggb3B0aW9uYWwgcmVnZXhwL3R5cGUgLi4uICgkNCkgKHNlYXJjaCB2ZXJzaW9uIGhhcyAtIGZvciBzbmFrZS1jYXNlXG4gICAgLy8gICAgKD86IC4uLiB8IC4uLiB8IC4uLiApKyAgICAgICAgIC0gdGhlIHJlZ2V4cCBjb25zaXN0cyBvZiBhbnkgbnVtYmVyIG9mIGF0b21zLCBhbiBhdG9tIGJlaW5nIGVpdGhlclxuICAgIC8vICAgIFtee31cXFxcXSsgICAgICAgICAgICAgICAgICAgICAgIC0gYW55dGhpbmcgb3RoZXIgdGhhbiBjdXJseSBicmFjZXMgb3IgYmFja3NsYXNoXG4gICAgLy8gICAgXFxcXC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBhIGJhY2tzbGFzaCBlc2NhcGVcbiAgICAvLyAgICBcXHsoPzpbXnt9XFxcXF0rfFxcXFwuKSpcXH0gICAgICAgICAgLSBhIG1hdGNoZWQgc2V0IG9mIGN1cmx5IGJyYWNlcyBjb250YWluaW5nIG90aGVyIGF0b21zXG4gICAgY29uc3QgcGxhY2Vob2xkZXIgPSAvKFs6Kl0pKFtcXHdcXFtcXF1dKyl8XFx7KFtcXHdcXFtcXF1dKykoPzpcXDpcXHMqKCg/Oltee31cXFxcXSt8XFxcXC58XFx7KD86W157fVxcXFxdK3xcXFxcLikqXFx9KSspKT9cXH0vZztcbiAgICBjb25zdCBzZWFyY2hQbGFjZWhvbGRlciA9IC8oWzpdPykoW1xcd1xcW1xcXS4tXSspfFxceyhbXFx3XFxbXFxdLi1dKykoPzpcXDpcXHMqKCg/Oltee31cXFxcXSt8XFxcXC58XFx7KD86W157fVxcXFxdK3xcXFxcLikqXFx9KSspKT9cXH0vZztcbiAgICBjb25zdCBwYXR0ZXJuczogYW55W11bXSA9IFtdO1xuICAgIGxldCBsYXN0ID0gMDtcbiAgICBsZXQgbWF0Y2hBcnJheTogUmVnRXhwRXhlY0FycmF5O1xuXG4gICAgY29uc3QgY2hlY2tQYXJhbUVycm9ycyA9IChpZDogc3RyaW5nKSA9PiB7XG4gICAgICBpZiAoIVVybE1hdGNoZXIubmFtZVZhbGlkYXRvci50ZXN0KGlkKSkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHBhcmFtZXRlciBuYW1lICcke2lkfScgaW4gcGF0dGVybiAnJHtwYXR0ZXJufSdgKTtcbiAgICAgIGlmIChmaW5kKHRoaXMuX3BhcmFtcywgcHJvcEVxKCdpZCcsIGlkKSkpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRHVwbGljYXRlIHBhcmFtZXRlciBuYW1lICcke2lkfScgaW4gcGF0dGVybiAnJHtwYXR0ZXJufSdgKTtcbiAgICB9O1xuXG4gICAgLy8gU3BsaXQgaW50byBzdGF0aWMgc2VnbWVudHMgc2VwYXJhdGVkIGJ5IHBhdGggcGFyYW1ldGVyIHBsYWNlaG9sZGVycy5cbiAgICAvLyBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIGlzIGFsd2F5cyAxIG1vcmUgdGhhbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnMuXG4gICAgY29uc3QgbWF0Y2hEZXRhaWxzID0gKG06IFJlZ0V4cEV4ZWNBcnJheSwgaXNTZWFyY2g6IGJvb2xlYW4pOiBNYXRjaERldGFpbHMgPT4ge1xuICAgICAgLy8gSUVbNzhdIHJldHVybnMgJycgZm9yIHVubWF0Y2hlZCBncm91cHMgaW5zdGVhZCBvZiBudWxsXG4gICAgICBjb25zdCBpZDogc3RyaW5nID0gbVsyXSB8fCBtWzNdO1xuICAgICAgY29uc3QgcmVnZXhwOiBzdHJpbmcgPSBpc1NlYXJjaCA/IG1bNF0gOiBtWzRdIHx8IChtWzFdID09PSAnKicgPyAnW1xcXFxzXFxcXFNdKicgOiBudWxsKTtcblxuICAgICAgY29uc3QgbWFrZVJlZ2V4cFR5cGUgPSBzdHIgPT5cbiAgICAgICAgaW5oZXJpdChwYXJhbVR5cGVzLnR5cGUoaXNTZWFyY2ggPyAncXVlcnknIDogJ3BhdGgnKSwge1xuICAgICAgICAgIHBhdHRlcm46IG5ldyBSZWdFeHAoc3RyLCB0aGlzLmNvbmZpZy5jYXNlSW5zZW5zaXRpdmUgPyAnaScgOiB1bmRlZmluZWQpLFxuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQsXG4gICAgICAgIHJlZ2V4cCxcbiAgICAgICAgc2VnbWVudDogcGF0dGVybi5zdWJzdHJpbmcobGFzdCwgbS5pbmRleCksXG4gICAgICAgIHR5cGU6ICFyZWdleHAgPyBudWxsIDogcGFyYW1UeXBlcy50eXBlKHJlZ2V4cCkgfHwgbWFrZVJlZ2V4cFR5cGUocmVnZXhwKSxcbiAgICAgIH07XG4gICAgfTtcblxuICAgIGxldCBkZXRhaWxzOiBNYXRjaERldGFpbHM7XG4gICAgbGV0IHNlZ21lbnQ6IHN0cmluZztcblxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25kaXRpb25hbC1hc3NpZ25tZW50XG4gICAgd2hpbGUgKChtYXRjaEFycmF5ID0gcGxhY2Vob2xkZXIuZXhlYyhwYXR0ZXJuKSkpIHtcbiAgICAgIGRldGFpbHMgPSBtYXRjaERldGFpbHMobWF0Y2hBcnJheSwgZmFsc2UpO1xuICAgICAgaWYgKGRldGFpbHMuc2VnbWVudC5pbmRleE9mKCc/JykgPj0gMCkgYnJlYWs7IC8vIHdlJ3JlIGludG8gdGhlIHNlYXJjaCBwYXJ0XG5cbiAgICAgIGNoZWNrUGFyYW1FcnJvcnMoZGV0YWlscy5pZCk7XG4gICAgICB0aGlzLl9wYXJhbXMucHVzaChwYXJhbUZhY3RvcnkuZnJvbVBhdGgoZGV0YWlscy5pZCwgZGV0YWlscy50eXBlLCBjb25maWcuc3RhdGUpKTtcbiAgICAgIHRoaXMuX3NlZ21lbnRzLnB1c2goZGV0YWlscy5zZWdtZW50KTtcbiAgICAgIHBhdHRlcm5zLnB1c2goW2RldGFpbHMuc2VnbWVudCwgdGFpbCh0aGlzLl9wYXJhbXMpXSk7XG4gICAgICBsYXN0ID0gcGxhY2Vob2xkZXIubGFzdEluZGV4O1xuICAgIH1cbiAgICBzZWdtZW50ID0gcGF0dGVybi5zdWJzdHJpbmcobGFzdCk7XG5cbiAgICAvLyBGaW5kIGFueSBzZWFyY2ggcGFyYW1ldGVyIG5hbWVzIGFuZCByZW1vdmUgdGhlbSBmcm9tIHRoZSBsYXN0IHNlZ21lbnRcbiAgICBjb25zdCBpID0gc2VnbWVudC5pbmRleE9mKCc/Jyk7XG5cbiAgICBpZiAoaSA+PSAwKSB7XG4gICAgICBjb25zdCBzZWFyY2ggPSBzZWdtZW50LnN1YnN0cmluZyhpKTtcbiAgICAgIHNlZ21lbnQgPSBzZWdtZW50LnN1YnN0cmluZygwLCBpKTtcblxuICAgICAgaWYgKHNlYXJjaC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGxhc3QgPSAwO1xuXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25kaXRpb25hbC1hc3NpZ25tZW50XG4gICAgICAgIHdoaWxlICgobWF0Y2hBcnJheSA9IHNlYXJjaFBsYWNlaG9sZGVyLmV4ZWMoc2VhcmNoKSkpIHtcbiAgICAgICAgICBkZXRhaWxzID0gbWF0Y2hEZXRhaWxzKG1hdGNoQXJyYXksIHRydWUpO1xuICAgICAgICAgIGNoZWNrUGFyYW1FcnJvcnMoZGV0YWlscy5pZCk7XG4gICAgICAgICAgdGhpcy5fcGFyYW1zLnB1c2gocGFyYW1GYWN0b3J5LmZyb21TZWFyY2goZGV0YWlscy5pZCwgZGV0YWlscy50eXBlLCBjb25maWcuc3RhdGUpKTtcbiAgICAgICAgICBsYXN0ID0gcGxhY2Vob2xkZXIubGFzdEluZGV4O1xuICAgICAgICAgIC8vIGNoZWNrIGlmID8mXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9zZWdtZW50cy5wdXNoKHNlZ21lbnQpO1xuICAgIHRoaXMuX2NvbXBpbGVkID0gcGF0dGVybnMubWFwKF9wYXR0ZXJuID0+IHF1b3RlUmVnRXhwLmFwcGx5KG51bGwsIF9wYXR0ZXJuKSkuY29uY2F0KHF1b3RlUmVnRXhwKHNlZ21lbnQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGNvbmNhdGVuYXRlZCBVcmxNYXRjaGVyXG4gICAqXG4gICAqIEJ1aWxkcyBhIG5ldyBVcmxNYXRjaGVyIGJ5IGFwcGVuZGluZyBhbm90aGVyIFVybE1hdGNoZXIgdG8gdGhpcyBvbmUuXG4gICAqXG4gICAqIEBwYXJhbSB1cmwgQSBgVXJsTWF0Y2hlcmAgaW5zdGFuY2UgdG8gYXBwZW5kIGFzIGEgY2hpbGQgb2YgdGhlIGN1cnJlbnQgYFVybE1hdGNoZXJgLlxuICAgKi9cbiAgYXBwZW5kKHVybDogVXJsTWF0Y2hlcik6IFVybE1hdGNoZXIge1xuICAgIHRoaXMuX2NoaWxkcmVuLnB1c2godXJsKTtcbiAgICB1cmwuX2NhY2hlID0ge1xuICAgICAgcGF0aDogdGhpcy5fY2FjaGUucGF0aC5jb25jYXQodXJsKSxcbiAgICAgIHBhcmVudDogdGhpcyxcbiAgICAgIHBhdHRlcm46IG51bGwsXG4gICAgfTtcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgaXNSb290KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9jYWNoZS5wYXRoWzBdID09PSB0aGlzO1xuICB9XG5cbiAgLyoqIFJldHVybnMgdGhlIGlucHV0IHBhdHRlcm4gc3RyaW5nICovXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMucGF0dGVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0cyB0aGUgc3BlY2lmaWVkIHVybC9wYXRoIGFnYWluc3QgdGhpcyBtYXRjaGVyLlxuICAgKlxuICAgKiBUZXN0cyBpZiB0aGUgZ2l2ZW4gdXJsIG1hdGNoZXMgdGhpcyBtYXRjaGVyJ3MgcGF0dGVybiwgYW5kIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNhcHR1cmVkXG4gICAqIHBhcmFtZXRlciB2YWx1ZXMuICBSZXR1cm5zIG51bGwgaWYgdGhlIHBhdGggZG9lcyBub3QgbWF0Y2guXG4gICAqXG4gICAqIFRoZSByZXR1cm5lZCBvYmplY3QgY29udGFpbnMgdGhlIHZhbHVlc1xuICAgKiBvZiBhbnkgc2VhcmNoIHBhcmFtZXRlcnMgdGhhdCBhcmUgbWVudGlvbmVkIGluIHRoZSBwYXR0ZXJuLCBidXQgdGhlaXIgdmFsdWUgbWF5IGJlIG51bGwgaWZcbiAgICogdGhleSBhcmUgbm90IHByZXNlbnQgaW4gYHNlYXJjaGAuIFRoaXMgbWVhbnMgdGhhdCBzZWFyY2ggcGFyYW1ldGVycyBhcmUgYWx3YXlzIHRyZWF0ZWRcbiAgICogYXMgb3B0aW9uYWwuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogbmV3IFVybE1hdGNoZXIoJy91c2VyL3tpZH0/cSZyJykuZXhlYygnL3VzZXIvYm9iJywge1xuICAgKiAgIHg6ICcxJywgcTogJ2hlbGxvJ1xuICAgKiB9KTtcbiAgICogLy8gcmV0dXJucyB7IGlkOiAnYm9iJywgcTogJ2hlbGxvJywgcjogbnVsbCB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGF0aCAgICBUaGUgVVJMIHBhdGggdG8gbWF0Y2gsIGUuZy4gYCRsb2NhdGlvbi5wYXRoKClgLlxuICAgKiBAcGFyYW0gc2VhcmNoICBVUkwgc2VhcmNoIHBhcmFtZXRlcnMsIGUuZy4gYCRsb2NhdGlvbi5zZWFyY2goKWAuXG4gICAqIEBwYXJhbSBoYXNoICAgIFVSTCBoYXNoIGUuZy4gYCRsb2NhdGlvbi5oYXNoKClgLlxuICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgY2FwdHVyZWQgcGFyYW1ldGVyIHZhbHVlcy5cbiAgICovXG4gIGV4ZWMocGF0aDogc3RyaW5nLCBzZWFyY2g6IGFueSA9IHt9LCBoYXNoPzogc3RyaW5nLCBvcHRpb25zOiBhbnkgPSB7fSk6IFJhd1BhcmFtcyB7XG4gICAgY29uc3QgbWF0Y2ggPSBtZW1vaXplVG8odGhpcy5fY2FjaGUsICdwYXR0ZXJuJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoXG4gICAgICAgIFtcbiAgICAgICAgICAnXicsXG4gICAgICAgICAgdW5uZXN0KHRoaXMuX2NhY2hlLnBhdGgubWFwKHByb3AoJ19jb21waWxlZCcpKSkuam9pbignJyksXG4gICAgICAgICAgdGhpcy5jb25maWcuc3RyaWN0ID09PSBmYWxzZSA/ICcvPycgOiAnJyxcbiAgICAgICAgICAnJCcsXG4gICAgICAgIF0uam9pbignJyksXG4gICAgICAgIHRoaXMuY29uZmlnLmNhc2VJbnNlbnNpdGl2ZSA/ICdpJyA6IHVuZGVmaW5lZFxuICAgICAgKTtcbiAgICB9KS5leGVjKHBhdGgpO1xuXG4gICAgaWYgKCFtYXRjaCkgcmV0dXJuIG51bGw7XG5cbiAgICAvLyBvcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywgeyBpc29sYXRlOiBmYWxzZSB9KTtcblxuICAgIGNvbnN0IGFsbFBhcmFtczogUGFyYW1bXSA9IHRoaXMucGFyYW1ldGVycygpLFxuICAgICAgcGF0aFBhcmFtczogUGFyYW1bXSA9IGFsbFBhcmFtcy5maWx0ZXIocGFyYW0gPT4gIXBhcmFtLmlzU2VhcmNoKCkpLFxuICAgICAgc2VhcmNoUGFyYW1zOiBQYXJhbVtdID0gYWxsUGFyYW1zLmZpbHRlcihwYXJhbSA9PiBwYXJhbS5pc1NlYXJjaCgpKSxcbiAgICAgIG5QYXRoU2VnbWVudHMgPSB0aGlzLl9jYWNoZS5wYXRoLm1hcCh1cmxtID0+IHVybG0uX3NlZ21lbnRzLmxlbmd0aCAtIDEpLnJlZHVjZSgoYSwgeCkgPT4gYSArIHgpLFxuICAgICAgdmFsdWVzOiBSYXdQYXJhbXMgPSB7fTtcblxuICAgIGlmIChuUGF0aFNlZ21lbnRzICE9PSBtYXRjaC5sZW5ndGggLSAxKSB0aHJvdyBuZXcgRXJyb3IoYFVuYmFsYW5jZWQgY2FwdHVyZSBncm91cCBpbiByb3V0ZSAnJHt0aGlzLnBhdHRlcm59J2ApO1xuXG4gICAgZnVuY3Rpb24gZGVjb2RlUGF0aEFycmF5KHBhcmFtVmFsOiBzdHJpbmcpIHtcbiAgICAgIGNvbnN0IHJldmVyc2VTdHJpbmcgPSAoc3RyOiBzdHJpbmcpID0+XG4gICAgICAgIHN0clxuICAgICAgICAgIC5zcGxpdCgnJylcbiAgICAgICAgICAucmV2ZXJzZSgpXG4gICAgICAgICAgLmpvaW4oJycpO1xuICAgICAgY29uc3QgdW5xdW90ZURhc2hlcyA9IChzdHI6IHN0cmluZykgPT4gc3RyLnJlcGxhY2UoL1xcXFwtL2csICctJyk7XG5cbiAgICAgIGNvbnN0IHNwbGl0ID0gcmV2ZXJzZVN0cmluZyhwYXJhbVZhbCkuc3BsaXQoLy0oPyFcXFxcKS8pO1xuICAgICAgY29uc3QgYWxsUmV2ZXJzZWQgPSBtYXAoc3BsaXQsIHJldmVyc2VTdHJpbmcpO1xuICAgICAgcmV0dXJuIG1hcChhbGxSZXZlcnNlZCwgdW5xdW90ZURhc2hlcykucmV2ZXJzZSgpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgblBhdGhTZWdtZW50czsgaSsrKSB7XG4gICAgICBjb25zdCBwYXJhbTogUGFyYW0gPSBwYXRoUGFyYW1zW2ldO1xuICAgICAgbGV0IHZhbHVlOiBhbnkgfCBhbnlbXSA9IG1hdGNoW2kgKyAxXTtcblxuICAgICAgLy8gaWYgdGhlIHBhcmFtIHZhbHVlIG1hdGNoZXMgYSBwcmUtcmVwbGFjZSBwYWlyLCByZXBsYWNlIHRoZSB2YWx1ZSBiZWZvcmUgZGVjb2RpbmcuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBhcmFtLnJlcGxhY2UubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHBhcmFtLnJlcGxhY2Vbal0uZnJvbSA9PT0gdmFsdWUpIHZhbHVlID0gcGFyYW0ucmVwbGFjZVtqXS50bztcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSAmJiBwYXJhbS5hcnJheSA9PT0gdHJ1ZSkgdmFsdWUgPSBkZWNvZGVQYXRoQXJyYXkodmFsdWUpO1xuICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHZhbHVlID0gcGFyYW0udHlwZS5kZWNvZGUodmFsdWUpO1xuICAgICAgdmFsdWVzW3BhcmFtLmlkXSA9IHBhcmFtLnZhbHVlKHZhbHVlKTtcbiAgICB9XG4gICAgc2VhcmNoUGFyYW1zLmZvckVhY2gocGFyYW0gPT4ge1xuICAgICAgbGV0IHZhbHVlID0gc2VhcmNoW3BhcmFtLmlkXTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcGFyYW0ucmVwbGFjZS5sZW5ndGg7IGorKykge1xuICAgICAgICBpZiAocGFyYW0ucmVwbGFjZVtqXS5mcm9tID09PSB2YWx1ZSkgdmFsdWUgPSBwYXJhbS5yZXBsYWNlW2pdLnRvO1xuICAgICAgfVxuICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHZhbHVlID0gcGFyYW0udHlwZS5kZWNvZGUodmFsdWUpO1xuICAgICAgdmFsdWVzW3BhcmFtLmlkXSA9IHBhcmFtLnZhbHVlKHZhbHVlKTtcbiAgICB9KTtcblxuICAgIGlmIChoYXNoKSB2YWx1ZXNbJyMnXSA9IGhhc2g7XG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBoaWRkZW5cbiAgICogUmV0dXJucyBhbGwgdGhlIFtbUGFyYW1dXSBvYmplY3RzIG9mIGFsbCBwYXRoIGFuZCBzZWFyY2ggcGFyYW1ldGVycyBvZiB0aGlzIHBhdHRlcm4gaW4gb3JkZXIgb2YgYXBwZWFyYW5jZS5cbiAgICpcbiAgICogQHJldHVybnMge0FycmF5LjxQYXJhbT59ICBBbiBhcnJheSBvZiBbW1BhcmFtXV0gb2JqZWN0cy4gTXVzdCBiZSB0cmVhdGVkIGFzIHJlYWQtb25seS4gSWYgdGhlXG4gICAqICAgIHBhdHRlcm4gaGFzIG5vIHBhcmFtZXRlcnMsIGFuIGVtcHR5IGFycmF5IGlzIHJldHVybmVkLlxuICAgKi9cbiAgcGFyYW1ldGVycyhvcHRzOiBhbnkgPSB7fSk6IFBhcmFtW10ge1xuICAgIGlmIChvcHRzLmluaGVyaXQgPT09IGZhbHNlKSByZXR1cm4gdGhpcy5fcGFyYW1zO1xuICAgIHJldHVybiB1bm5lc3QodGhpcy5fY2FjaGUucGF0aC5tYXAobWF0Y2hlciA9PiBtYXRjaGVyLl9wYXJhbXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaGlkZGVuXG4gICAqIFJldHVybnMgYSBzaW5nbGUgcGFyYW1ldGVyIGZyb20gdGhpcyBVcmxNYXRjaGVyIGJ5IGlkXG4gICAqXG4gICAqIEBwYXJhbSBpZFxuICAgKiBAcGFyYW0gb3B0c1xuICAgKiBAcmV0dXJucyB7VHxQYXJhbXxhbnl8Ym9vbGVhbnxVcmxNYXRjaGVyfG51bGx9XG4gICAqL1xuICBwYXJhbWV0ZXIoaWQ6IHN0cmluZywgb3B0czogYW55ID0ge30pOiBQYXJhbSB7XG4gICAgY29uc3QgZmluZFBhcmFtID0gKCkgPT4ge1xuICAgICAgZm9yIChjb25zdCBwYXJhbSBvZiB0aGlzLl9wYXJhbXMpIHtcbiAgICAgICAgaWYgKHBhcmFtLmlkID09PSBpZCkgcmV0dXJuIHBhcmFtO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzLl9jYWNoZS5wYXJlbnQ7XG4gICAgcmV0dXJuIGZpbmRQYXJhbSgpIHx8IChvcHRzLmluaGVyaXQgIT09IGZhbHNlICYmIHBhcmVudCAmJiBwYXJlbnQucGFyYW1ldGVyKGlkLCBvcHRzKSkgfHwgbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhlIGlucHV0IHBhcmFtZXRlciB2YWx1ZXMgYWdhaW5zdCB0aGlzIFVybE1hdGNoZXJcbiAgICpcbiAgICogQ2hlY2tzIGFuIG9iamVjdCBoYXNoIG9mIHBhcmFtZXRlcnMgdG8gdmFsaWRhdGUgdGhlaXIgY29ycmVjdG5lc3MgYWNjb3JkaW5nIHRvIHRoZSBwYXJhbWV0ZXJcbiAgICogdHlwZXMgb2YgdGhpcyBgVXJsTWF0Y2hlcmAuXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMgVGhlIG9iamVjdCBoYXNoIG9mIHBhcmFtZXRlcnMgdG8gdmFsaWRhdGUuXG4gICAqIEByZXR1cm5zIFJldHVybnMgYHRydWVgIGlmIGBwYXJhbXNgIHZhbGlkYXRlcywgb3RoZXJ3aXNlIGBmYWxzZWAuXG4gICAqL1xuICB2YWxpZGF0ZXMocGFyYW1zOiBSYXdQYXJhbXMpOiBib29sZWFuIHtcbiAgICBjb25zdCB2YWxpZFBhcmFtVmFsID0gKHBhcmFtOiBQYXJhbSwgdmFsOiBhbnkpID0+ICFwYXJhbSB8fCBwYXJhbS52YWxpZGF0ZXModmFsKTtcblxuICAgIHBhcmFtcyA9IHBhcmFtcyB8fCB7fTtcblxuICAgIC8vIEknbSBub3Qgc3VyZSB3aHkgdGhpcyBjaGVja3Mgb25seSB0aGUgcGFyYW0ga2V5cyBwYXNzZWQgaW4sIGFuZCBub3QgYWxsIHRoZSBwYXJhbXMga25vd24gdG8gdGhlIG1hdGNoZXJcbiAgICBjb25zdCBwYXJhbVNjaGVtYSA9IHRoaXMucGFyYW1ldGVycygpLmZpbHRlcihwYXJhbURlZiA9PiBwYXJhbXMuaGFzT3duUHJvcGVydHkocGFyYW1EZWYuaWQpKTtcbiAgICByZXR1cm4gcGFyYW1TY2hlbWEubWFwKHBhcmFtRGVmID0+IHZhbGlkUGFyYW1WYWwocGFyYW1EZWYsIHBhcmFtc1twYXJhbURlZi5pZF0pKS5yZWR1Y2UoYWxsVHJ1ZVIsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgc2V0IG9mIHBhcmFtZXRlciB2YWx1ZXMsIGNyZWF0ZXMgYSBVUkwgZnJvbSB0aGlzIFVybE1hdGNoZXIuXG4gICAqXG4gICAqIENyZWF0ZXMgYSBVUkwgdGhhdCBtYXRjaGVzIHRoaXMgcGF0dGVybiBieSBzdWJzdGl0dXRpbmcgdGhlIHNwZWNpZmllZCB2YWx1ZXNcbiAgICogZm9yIHRoZSBwYXRoIGFuZCBzZWFyY2ggcGFyYW1ldGVycy5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiBuZXcgVXJsTWF0Y2hlcignL3VzZXIve2lkfT9xJykuZm9ybWF0KHsgaWQ6J2JvYicsIHE6J3llcycgfSk7XG4gICAqIC8vIHJldHVybnMgJy91c2VyL2JvYj9xPXllcydcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB2YWx1ZXMgIHRoZSB2YWx1ZXMgdG8gc3Vic3RpdHV0ZSBmb3IgdGhlIHBhcmFtZXRlcnMgaW4gdGhpcyBwYXR0ZXJuLlxuICAgKiBAcmV0dXJucyB0aGUgZm9ybWF0dGVkIFVSTCAocGF0aCBhbmQgb3B0aW9uYWxseSBzZWFyY2ggcGFydCkuXG4gICAqL1xuICBmb3JtYXQodmFsdWVzOiBSYXdQYXJhbXMgPSB7fSkge1xuICAgIC8vIEJ1aWxkIHRoZSBmdWxsIHBhdGggb2YgVXJsTWF0Y2hlcnMgKGluY2x1ZGluZyBhbGwgcGFyZW50IFVybE1hdGNoZXJzKVxuICAgIGNvbnN0IHVybE1hdGNoZXJzID0gdGhpcy5fY2FjaGUucGF0aDtcblxuICAgIC8vIEV4dHJhY3QgYWxsIHRoZSBzdGF0aWMgc2VnbWVudHMgYW5kIFBhcmFtcyAocHJvY2Vzc2VkIGFzIFBhcmFtRGV0YWlscylcbiAgICAvLyBpbnRvIGFuIG9yZGVyZWQgYXJyYXlcbiAgICBjb25zdCBwYXRoU2VnbWVudHNBbmRQYXJhbXM6IEFycmF5PHN0cmluZyB8IFBhcmFtRGV0YWlscz4gPSB1cmxNYXRjaGVyc1xuICAgICAgLm1hcChVcmxNYXRjaGVyLnBhdGhTZWdtZW50c0FuZFBhcmFtcylcbiAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAubWFwKHggPT4gKGlzU3RyaW5nKHgpID8geCA6IGdldERldGFpbHMoeCkpKTtcblxuICAgIC8vIEV4dHJhY3QgdGhlIHF1ZXJ5IHBhcmFtcyBpbnRvIGEgc2VwYXJhdGUgYXJyYXlcbiAgICBjb25zdCBxdWVyeVBhcmFtczogQXJyYXk8UGFyYW1EZXRhaWxzPiA9IHVybE1hdGNoZXJzXG4gICAgICAubWFwKFVybE1hdGNoZXIucXVlcnlQYXJhbXMpXG4gICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgLm1hcChnZXREZXRhaWxzKTtcblxuICAgIGNvbnN0IGlzSW52YWxpZCA9IChwYXJhbTogUGFyYW1EZXRhaWxzKSA9PiBwYXJhbS5pc1ZhbGlkID09PSBmYWxzZTtcbiAgICBpZiAocGF0aFNlZ21lbnRzQW5kUGFyYW1zLmNvbmNhdChxdWVyeVBhcmFtcykuZmlsdGVyKGlzSW52YWxpZCkubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIFBhcmFtLCBhcHBsaWVzIHRoZSBwYXJhbWV0ZXIgdmFsdWUsIHRoZW4gcmV0dXJucyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBpdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldERldGFpbHMocGFyYW06IFBhcmFtKTogUGFyYW1EZXRhaWxzIHtcbiAgICAgIC8vIE5vcm1hbGl6ZSB0byB0eXBlZCB2YWx1ZVxuICAgICAgY29uc3QgdmFsdWUgPSBwYXJhbS52YWx1ZSh2YWx1ZXNbcGFyYW0uaWRdKTtcbiAgICAgIGNvbnN0IGlzVmFsaWQgPSBwYXJhbS52YWxpZGF0ZXModmFsdWUpO1xuICAgICAgY29uc3QgaXNEZWZhdWx0VmFsdWUgPSBwYXJhbS5pc0RlZmF1bHRWYWx1ZSh2YWx1ZSk7XG4gICAgICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBzcXVhc2ggbW9kZSBmb3IgdGhlIHBhcmFtZXRlclxuICAgICAgY29uc3Qgc3F1YXNoID0gaXNEZWZhdWx0VmFsdWUgPyBwYXJhbS5zcXVhc2ggOiBmYWxzZTtcbiAgICAgIC8vIEFsbG93IHRoZSBQYXJhbWV0ZXIncyBUeXBlIHRvIGVuY29kZSB0aGUgdmFsdWVcbiAgICAgIGNvbnN0IGVuY29kZWQgPSBwYXJhbS50eXBlLmVuY29kZSh2YWx1ZSk7XG5cbiAgICAgIHJldHVybiB7IHBhcmFtLCB2YWx1ZSwgaXNWYWxpZCwgaXNEZWZhdWx0VmFsdWUsIHNxdWFzaCwgZW5jb2RlZCB9O1xuICAgIH1cblxuICAgIC8vIEJ1aWxkIHVwIHRoZSBwYXRoLXBvcnRpb24gZnJvbSB0aGUgbGlzdCBvZiBzdGF0aWMgc2VnbWVudHMgYW5kIHBhcmFtZXRlcnNcbiAgICBjb25zdCBwYXRoU3RyaW5nID0gcGF0aFNlZ21lbnRzQW5kUGFyYW1zLnJlZHVjZSgoYWNjOiBzdHJpbmcsIHg6IHN0cmluZyB8IFBhcmFtRGV0YWlscykgPT4ge1xuICAgICAgLy8gVGhlIGVsZW1lbnQgaXMgYSBzdGF0aWMgc2VnbWVudCAoYSByYXcgc3RyaW5nKTsganVzdCBhcHBlbmQgaXRcbiAgICAgIGlmIChpc1N0cmluZyh4KSkgcmV0dXJuIGFjYyArIHg7XG5cbiAgICAgIC8vIE90aGVyd2lzZSwgaXQncyBhIFBhcmFtRGV0YWlscy5cbiAgICAgIGNvbnN0IHsgc3F1YXNoLCBlbmNvZGVkLCBwYXJhbSB9ID0geDtcblxuICAgICAgLy8gSWYgc3F1YXNoIGlzID09PSB0cnVlLCB0cnkgdG8gcmVtb3ZlIGEgc2xhc2ggZnJvbSB0aGUgcGF0aFxuICAgICAgaWYgKHNxdWFzaCA9PT0gdHJ1ZSkgcmV0dXJuIGFjYy5tYXRjaCgvXFwvJC8pID8gYWNjLnNsaWNlKDAsIC0xKSA6IGFjYztcbiAgICAgIC8vIElmIHNxdWFzaCBpcyBhIHN0cmluZywgdXNlIHRoZSBzdHJpbmcgZm9yIHRoZSBwYXJhbSB2YWx1ZVxuICAgICAgaWYgKGlzU3RyaW5nKHNxdWFzaCkpIHJldHVybiBhY2MgKyBzcXVhc2g7XG4gICAgICBpZiAoc3F1YXNoICE9PSBmYWxzZSkgcmV0dXJuIGFjYzsgLy8gP1xuICAgICAgaWYgKGVuY29kZWQgPT0gbnVsbCkgcmV0dXJuIGFjYztcbiAgICAgIC8vIElmIHRoaXMgcGFyYW1ldGVyIHZhbHVlIGlzIGFuIGFycmF5LCBlbmNvZGUgdGhlIHZhbHVlIHVzaW5nIGVuY29kZURhc2hlc1xuICAgICAgaWYgKGlzQXJyYXkoZW5jb2RlZCkpIHJldHVybiBhY2MgKyBtYXAoPHN0cmluZ1tdPmVuY29kZWQsIFVybE1hdGNoZXIuZW5jb2RlRGFzaGVzKS5qb2luKCctJyk7XG4gICAgICAvLyBJZiB0aGUgcGFyYW1ldGVyIHR5cGUgaXMgXCJyYXdcIiwgdGhlbiBkbyBub3QgZW5jb2RlVVJJQ29tcG9uZW50XG4gICAgICBpZiAocGFyYW0ucmF3KSByZXR1cm4gYWNjICsgZW5jb2RlZDtcbiAgICAgIC8vIEVuY29kZSB0aGUgdmFsdWVcbiAgICAgIHJldHVybiBhY2MgKyBlbmNvZGVVUklDb21wb25lbnQoPHN0cmluZz5lbmNvZGVkKTtcbiAgICB9LCAnJyk7XG5cbiAgICAvLyBCdWlsZCB0aGUgcXVlcnkgc3RyaW5nIGJ5IGFwcGx5aW5nIHBhcmFtZXRlciB2YWx1ZXMgKGFycmF5IG9yIHJlZ3VsYXIpXG4gICAgLy8gdGhlbiBtYXBwaW5nIHRvIGtleT12YWx1ZSwgdGhlbiBmbGF0dGVuaW5nIGFuZCBqb2luaW5nIHVzaW5nIFwiJlwiXG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBxdWVyeVBhcmFtc1xuICAgICAgLm1hcCgocGFyYW1EZXRhaWxzOiBQYXJhbURldGFpbHMpID0+IHtcbiAgICAgICAgbGV0IHsgcGFyYW0sIHNxdWFzaCwgZW5jb2RlZCwgaXNEZWZhdWx0VmFsdWUgfSA9IHBhcmFtRGV0YWlscztcbiAgICAgICAgaWYgKGVuY29kZWQgPT0gbnVsbCB8fCAoaXNEZWZhdWx0VmFsdWUgJiYgc3F1YXNoICE9PSBmYWxzZSkpIHJldHVybjtcbiAgICAgICAgaWYgKCFpc0FycmF5KGVuY29kZWQpKSBlbmNvZGVkID0gWzxzdHJpbmc+ZW5jb2RlZF07XG4gICAgICAgIGlmIChlbmNvZGVkLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgICAgICBpZiAoIXBhcmFtLnJhdykgZW5jb2RlZCA9IG1hcCg8c3RyaW5nW10+ZW5jb2RlZCwgZW5jb2RlVVJJQ29tcG9uZW50KTtcblxuICAgICAgICByZXR1cm4gKDxzdHJpbmdbXT5lbmNvZGVkKS5tYXAodmFsID0+IGAke3BhcmFtLmlkfT0ke3ZhbH1gKTtcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKGlkZW50aXR5KVxuICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAgIC5qb2luKCcmJyk7XG5cbiAgICAvLyBDb25jYXQgdGhlIHBhdGhzdHJpbmcgd2l0aCB0aGUgcXVlcnlTdHJpbmcgKGlmIGV4aXN0cykgYW5kIHRoZSBoYXNoU3RyaW5nIChpZiBleGlzdHMpXG4gICAgcmV0dXJuIHBhdGhTdHJpbmcgKyAocXVlcnlTdHJpbmcgPyBgPyR7cXVlcnlTdHJpbmd9YCA6ICcnKSArICh2YWx1ZXNbJyMnXSA/ICcjJyArIHZhbHVlc1snIyddIDogJycpO1xuICB9XG59XG5cbi8qKiBAaGlkZGVuICovXG5pbnRlcmZhY2UgUGFyYW1EZXRhaWxzIHtcbiAgcGFyYW06IFBhcmFtO1xuICB2YWx1ZTogYW55O1xuICBpc1ZhbGlkOiBib29sZWFuO1xuICBpc0RlZmF1bHRWYWx1ZTogYm9vbGVhbjtcbiAgc3F1YXNoOiBib29sZWFuIHwgc3RyaW5nO1xuICBlbmNvZGVkOiBzdHJpbmcgfCBzdHJpbmdbXTtcbn1cbiIsIi8qKiBAcHVibGljYXBpIEBtb2R1bGUgdXJsICovIC8qKiAqL1xuaW1wb3J0IHsgZXh0ZW5kLCBmb3JFYWNoLCBpc0RlZmluZWQsIGlzRnVuY3Rpb24sIGlzT2JqZWN0IH0gZnJvbSAnLi4vY29tbW9uJztcbmltcG9ydCB7IFVybE1hdGNoZXIgfSBmcm9tICcuL3VybE1hdGNoZXInO1xuaW1wb3J0IHsgRGVmVHlwZSwgUGFyYW0sIFBhcmFtVHlwZSwgUGFyYW1UeXBlRGVmaW5pdGlvbiB9IGZyb20gJy4uL3BhcmFtcyc7XG5pbXBvcnQgeyBVcmxNYXRjaGVyQ29tcGlsZUNvbmZpZyB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IFN0YXRlRGVjbGFyYXRpb24gfSBmcm9tICcuLi9zdGF0ZSc7XG5pbXBvcnQgeyBVSVJvdXRlciB9IGZyb20gJy4uL3JvdXRlcic7XG5cbi8qKiBAaW50ZXJuYWxhcGkgKi9cbmV4cG9ydCBjbGFzcyBQYXJhbUZhY3Rvcnkge1xuICBmcm9tQ29uZmlnKGlkOiBzdHJpbmcsIHR5cGU6IFBhcmFtVHlwZSwgc3RhdGU6IFN0YXRlRGVjbGFyYXRpb24pIHtcbiAgICByZXR1cm4gbmV3IFBhcmFtKGlkLCB0eXBlLCBEZWZUeXBlLkNPTkZJRywgdGhpcy5yb3V0ZXIudXJsU2VydmljZS5jb25maWcsIHN0YXRlKTtcbiAgfVxuXG4gIGZyb21QYXRoKGlkOiBzdHJpbmcsIHR5cGU6IFBhcmFtVHlwZSwgc3RhdGU6IFN0YXRlRGVjbGFyYXRpb24pIHtcbiAgICByZXR1cm4gbmV3IFBhcmFtKGlkLCB0eXBlLCBEZWZUeXBlLlBBVEgsIHRoaXMucm91dGVyLnVybFNlcnZpY2UuY29uZmlnLCBzdGF0ZSk7XG4gIH1cblxuICBmcm9tU2VhcmNoKGlkOiBzdHJpbmcsIHR5cGU6IFBhcmFtVHlwZSwgc3RhdGU6IFN0YXRlRGVjbGFyYXRpb24pIHtcbiAgICByZXR1cm4gbmV3IFBhcmFtKGlkLCB0eXBlLCBEZWZUeXBlLlNFQVJDSCwgdGhpcy5yb3V0ZXIudXJsU2VydmljZS5jb25maWcsIHN0YXRlKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcm91dGVyOiBVSVJvdXRlcikge31cbn1cblxuLyoqXG4gKiBGYWN0b3J5IGZvciBbW1VybE1hdGNoZXJdXSBpbnN0YW5jZXMuXG4gKlxuICogVGhlIGZhY3RvcnkgaXMgYXZhaWxhYmxlIHRvIG5nMSBzZXJ2aWNlcyBhc1xuICogYCR1cmxNYXRjaGVyRmFjdG9yeWAgb3IgbmcxIHByb3ZpZGVycyBhcyBgJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXJgLlxuICpcbiAqIEBpbnRlcm5hbGFwaVxuICovXG5leHBvcnQgY2xhc3MgVXJsTWF0Y2hlckZhY3Rvcnkge1xuICAvKiogQGludGVybmFsYXBpIENyZWF0ZXMgYSBuZXcgW1tQYXJhbV1dIGZvciBhIGdpdmVuIGxvY2F0aW9uIChEZWZUeXBlKSAqL1xuICBwYXJhbUZhY3RvcnkgPSBuZXcgUGFyYW1GYWN0b3J5KHRoaXMucm91dGVyKTtcblxuICAvLyBUT0RPOiBtb3ZlIGltcGxlbWVudGF0aW9ucyB0byBVcmxDb25maWcgKHVybFNlcnZpY2UuY29uZmlnKVxuICBjb25zdHJ1Y3RvcigvKiogQGhpZGRlbiAqLyBwcml2YXRlIHJvdXRlcjogVUlSb3V0ZXIpIHtcbiAgICBleHRlbmQodGhpcywgeyBVcmxNYXRjaGVyLCBQYXJhbSB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgW1tVcmxNYXRjaGVyXV0gZm9yIHRoZSBzcGVjaWZpZWQgcGF0dGVybi5cbiAgICpcbiAgICogQHBhcmFtIHBhdHRlcm4gIFRoZSBVUkwgcGF0dGVybi5cbiAgICogQHBhcmFtIGNvbmZpZyAgVGhlIGNvbmZpZyBvYmplY3QgaGFzaC5cbiAgICogQHJldHVybnMgVGhlIFVybE1hdGNoZXIuXG4gICAqL1xuICBjb21waWxlKHBhdHRlcm46IHN0cmluZywgY29uZmlnPzogVXJsTWF0Y2hlckNvbXBpbGVDb25maWcpIHtcbiAgICBjb25zdCB1cmxDb25maWcgPSB0aGlzLnJvdXRlci51cmxTZXJ2aWNlLmNvbmZpZztcbiAgICAvLyBiYWNrd2FyZC1jb21wYXRpYmxlIHN1cHBvcnQgZm9yIGNvbmZpZy5wYXJhbXMgLT4gY29uZmlnLnN0YXRlLnBhcmFtc1xuICAgIGNvbnN0IHBhcmFtcyA9IGNvbmZpZyAmJiAhY29uZmlnLnN0YXRlICYmIChjb25maWcgYXMgYW55KS5wYXJhbXM7XG4gICAgY29uZmlnID0gcGFyYW1zID8geyBzdGF0ZTogeyBwYXJhbXMgfSwgLi4uY29uZmlnIH0gOiBjb25maWc7XG4gICAgY29uc3QgZ2xvYmFsQ29uZmlnID0geyBzdHJpY3Q6IHVybENvbmZpZy5faXNTdHJpY3RNb2RlLCBjYXNlSW5zZW5zaXRpdmU6IHVybENvbmZpZy5faXNDYXNlSW5zZW5zaXRpdmUgfTtcbiAgICByZXR1cm4gbmV3IFVybE1hdGNoZXIocGF0dGVybiwgdXJsQ29uZmlnLnBhcmFtVHlwZXMsIHRoaXMucGFyYW1GYWN0b3J5LCBleHRlbmQoZ2xvYmFsQ29uZmlnLCBjb25maWcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHNwZWNpZmllZCBvYmplY3QgaXMgYSBbW1VybE1hdGNoZXJdXSwgb3IgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKlxuICAgKiBAcGFyYW0gb2JqZWN0ICBUaGUgb2JqZWN0IHRvIHBlcmZvcm0gdGhlIHR5cGUgY2hlY2sgYWdhaW5zdC5cbiAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3QgbWF0Y2hlcyB0aGUgYFVybE1hdGNoZXJgIGludGVyZmFjZSwgYnlcbiAgICogICAgICAgICAgaW1wbGVtZW50aW5nIGFsbCB0aGUgc2FtZSBtZXRob2RzLlxuICAgKi9cbiAgaXNNYXRjaGVyKG9iamVjdDogYW55KTogYm9vbGVhbiB7XG4gICAgLy8gVE9ETzogdHlwZW9mP1xuICAgIGlmICghaXNPYmplY3Qob2JqZWN0KSkgcmV0dXJuIGZhbHNlO1xuICAgIGxldCByZXN1bHQgPSB0cnVlO1xuXG4gICAgZm9yRWFjaChVcmxNYXRjaGVyLnByb3RvdHlwZSwgKHZhbCwgbmFtZSkgPT4ge1xuICAgICAgaWYgKGlzRnVuY3Rpb24odmFsKSkgcmVzdWx0ID0gcmVzdWx0ICYmIChpc0RlZmluZWQob2JqZWN0W25hbWVdKSAmJiBpc0Z1bmN0aW9uKG9iamVjdFtuYW1lXSkpO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICAkZ2V0KCkge1xuICAgIGNvbnN0IHVybENvbmZpZyA9IHRoaXMucm91dGVyLnVybFNlcnZpY2UuY29uZmlnO1xuICAgIHVybENvbmZpZy5wYXJhbVR5cGVzLmVucXVldWUgPSBmYWxzZTtcbiAgICB1cmxDb25maWcucGFyYW1UeXBlcy5fZmx1c2hUeXBlUXVldWUoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBAZGVwcmVjYXRlZCB1c2UgW1tVcmxDb25maWcuY2FzZUluc2Vuc2l0aXZlXV0gKi9cbiAgY2FzZUluc2Vuc2l0aXZlID0gKHZhbHVlPzogYm9vbGVhbikgPT4gdGhpcy5yb3V0ZXIudXJsU2VydmljZS5jb25maWcuY2FzZUluc2Vuc2l0aXZlKHZhbHVlKTtcblxuICAvKiogQGRlcHJlY2F0ZWQgdXNlIFtbVXJsQ29uZmlnLmRlZmF1bHRTcXVhc2hQb2xpY3ldXSAqL1xuICBkZWZhdWx0U3F1YXNoUG9saWN5ID0gKHZhbHVlPzogYm9vbGVhbiB8IHN0cmluZykgPT4gdGhpcy5yb3V0ZXIudXJsU2VydmljZS5jb25maWcuZGVmYXVsdFNxdWFzaFBvbGljeSh2YWx1ZSk7XG5cbiAgLyoqIEBkZXByZWNhdGVkIHVzZSBbW1VybENvbmZpZy5zdHJpY3RNb2RlXV0gKi9cbiAgc3RyaWN0TW9kZSA9ICh2YWx1ZT86IGJvb2xlYW4pID0+IHRoaXMucm91dGVyLnVybFNlcnZpY2UuY29uZmlnLnN0cmljdE1vZGUodmFsdWUpO1xuXG4gIC8qKiBAZGVwcmVjYXRlZCB1c2UgW1tVcmxDb25maWcudHlwZV1dICovXG4gIHR5cGUgPSAobmFtZTogc3RyaW5nLCBkZWZpbml0aW9uPzogUGFyYW1UeXBlRGVmaW5pdGlvbiwgZGVmaW5pdGlvbkZuPzogKCkgPT4gUGFyYW1UeXBlRGVmaW5pdGlvbikgPT4ge1xuICAgIHJldHVybiB0aGlzLnJvdXRlci51cmxTZXJ2aWNlLmNvbmZpZy50eXBlKG5hbWUsIGRlZmluaXRpb24sIGRlZmluaXRpb25GbikgfHwgdGhpcztcbiAgfTtcbn1cbiIsIi8qKiBAcHVibGljYXBpIEBtb2R1bGUgdXJsICovIC8qKiAqL1xuaW1wb3J0IHsgVXJsTWF0Y2hlciB9IGZyb20gJy4vdXJsTWF0Y2hlcic7XG5pbXBvcnQgeyBpc1N0cmluZywgaXNEZWZpbmVkLCBpc0Z1bmN0aW9uIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgVUlSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuaW1wb3J0IHsgaWRlbnRpdHksIGV4dGVuZCB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgaXMsIHBhdHRlcm4gfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IFN0YXRlT2JqZWN0IH0gZnJvbSAnLi4vc3RhdGUvc3RhdGVPYmplY3QnO1xuaW1wb3J0IHsgUmF3UGFyYW1zIH0gZnJvbSAnLi4vcGFyYW1zL2ludGVyZmFjZSc7XG5pbXBvcnQge1xuICBVcmxSdWxlLFxuICBVcmxSdWxlTWF0Y2hGbixcbiAgVXJsUnVsZUhhbmRsZXJGbixcbiAgVXJsUnVsZVR5cGUsXG4gIFVybFBhcnRzLFxuICBNYXRjaGVyVXJsUnVsZSxcbiAgU3RhdGVSdWxlLFxuICBSZWdFeHBSdWxlLFxufSBmcm9tICcuL2ludGVyZmFjZSc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIFtbVXJsUnVsZV1dXG4gKlxuICogQ3JlYXRlcyBhIFtbVXJsUnVsZV1dIGZyb20gYTpcbiAqXG4gKiAtIGBzdHJpbmdgXG4gKiAtIFtbVXJsTWF0Y2hlcl1dXG4gKiAtIGBSZWdFeHBgXG4gKiAtIFtbU3RhdGVPYmplY3RdXVxuICogQGludGVybmFsYXBpXG4gKi9cbmV4cG9ydCBjbGFzcyBVcmxSdWxlRmFjdG9yeSB7XG4gIHN0YXRpYyBpc1VybFJ1bGUgPSBvYmogPT4gb2JqICYmIFsndHlwZScsICdtYXRjaCcsICdoYW5kbGVyJ10uZXZlcnkoa2V5ID0+IGlzRGVmaW5lZChvYmpba2V5XSkpO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByb3V0ZXI6IFVJUm91dGVyKSB7fVxuXG4gIGNvbXBpbGUoc3RyOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5yb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnkuY29tcGlsZShzdHIpO1xuICB9XG5cbiAgY3JlYXRlKFxuICAgIHdoYXQ6IHN0cmluZyB8IFVybE1hdGNoZXIgfCBTdGF0ZU9iamVjdCB8IFJlZ0V4cCB8IFVybFJ1bGVNYXRjaEZuLFxuICAgIGhhbmRsZXI/OiBzdHJpbmcgfCBVcmxSdWxlSGFuZGxlckZuXG4gICk6IFVybFJ1bGUge1xuICAgIGNvbnN0IGlzU3RhdGUgPSBTdGF0ZU9iamVjdC5pc1N0YXRlO1xuICAgIGNvbnN0IG1ha2VSdWxlID0gcGF0dGVybihbXG4gICAgICBbaXNTdHJpbmcsIChfd2hhdDogc3RyaW5nKSA9PiBtYWtlUnVsZSh0aGlzLmNvbXBpbGUoX3doYXQpKV0sXG4gICAgICBbaXMoVXJsTWF0Y2hlciksIChfd2hhdDogVXJsTWF0Y2hlcikgPT4gdGhpcy5mcm9tVXJsTWF0Y2hlcihfd2hhdCwgaGFuZGxlcildLFxuICAgICAgW2lzU3RhdGUsIChfd2hhdDogU3RhdGVPYmplY3QpID0+IHRoaXMuZnJvbVN0YXRlKF93aGF0LCB0aGlzLnJvdXRlcildLFxuICAgICAgW2lzKFJlZ0V4cCksIChfd2hhdDogUmVnRXhwKSA9PiB0aGlzLmZyb21SZWdFeHAoX3doYXQsIGhhbmRsZXIpXSxcbiAgICAgIFtpc0Z1bmN0aW9uLCAoX3doYXQ6IFVybFJ1bGVNYXRjaEZuKSA9PiBuZXcgQmFzZVVybFJ1bGUoX3doYXQsIGhhbmRsZXIgYXMgVXJsUnVsZUhhbmRsZXJGbildLFxuICAgIF0pO1xuXG4gICAgY29uc3QgcnVsZSA9IG1ha2VSdWxlKHdoYXQpO1xuICAgIGlmICghcnVsZSkgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCAnd2hhdCcgaW4gd2hlbigpXCIpO1xuICAgIHJldHVybiBydWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgVXJsUnVsZSB3aGljaCBtYXRjaGVzIGJhc2VkIG9uIGEgVXJsTWF0Y2hlclxuICAgKlxuICAgKiBUaGUgYGhhbmRsZXJgIG1heSBiZSBlaXRoZXIgYSBgc3RyaW5nYCwgYSBbW1VybFJ1bGVIYW5kbGVyRm5dXSBvciBhbm90aGVyIFtbVXJsTWF0Y2hlcl1dXG4gICAqXG4gICAqICMjIEhhbmRsZXIgYXMgYSBmdW5jdGlvblxuICAgKlxuICAgKiBJZiBgaGFuZGxlcmAgaXMgYSBmdW5jdGlvbiwgdGhlIGZ1bmN0aW9uIGlzIGludm9rZWQgd2l0aDpcbiAgICpcbiAgICogLSBtYXRjaGVkIHBhcmFtZXRlciB2YWx1ZXMgKFtbUmF3UGFyYW1zXV0gZnJvbSBbW1VybE1hdGNoZXIuZXhlY11dKVxuICAgKiAtIHVybDogdGhlIGN1cnJlbnQgVXJsIChbW1VybFBhcnRzXV0pXG4gICAqIC0gcm91dGVyOiB0aGUgcm91dGVyIG9iamVjdCAoW1tVSVJvdXRlcl1dKVxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIHZhciB1cmxNYXRjaGVyID0gJHVtZi5jb21waWxlKFwiL2Zvby86Zm9vSWQvOmJhcklkXCIpO1xuICAgKiB2YXIgcnVsZSA9IGZhY3RvcnkuZnJvbVVybE1hdGNoZXIodXJsTWF0Y2hlciwgbWF0Y2ggPT4gXCIvaG9tZS9cIiArIG1hdGNoLmZvb0lkICsgXCIvXCIgKyBtYXRjaC5iYXJJZCk7XG4gICAqIHZhciBtYXRjaCA9IHJ1bGUubWF0Y2goJy9mb28vMTIzLzQ1NicpOyAvLyByZXN1bHRzIGluIHsgZm9vSWQ6ICcxMjMnLCBiYXJJZDogJzQ1NicgfVxuICAgKiB2YXIgcmVzdWx0ID0gcnVsZS5oYW5kbGVyKG1hdGNoKTsgLy8gJy9ob21lLzEyMy80NTYnXG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyBIYW5kbGVyIGFzIFVybE1hdGNoZXJcbiAgICpcbiAgICogSWYgYGhhbmRsZXJgIGlzIGEgVXJsTWF0Y2hlciwgdGhlIGhhbmRsZXIgbWF0Y2hlciBpcyB1c2VkIHRvIGNyZWF0ZSB0aGUgbmV3IHVybC5cbiAgICogVGhlIGBoYW5kbGVyYCBVcmxNYXRjaGVyIGlzIGZvcm1hdHRlZCB1c2luZyB0aGUgbWF0Y2hlZCBwYXJhbSBmcm9tIHRoZSBmaXJzdCBtYXRjaGVyLlxuICAgKiBUaGUgdXJsIGlzIHJlcGxhY2VkIHdpdGggdGhlIHJlc3VsdC5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiB2YXIgdXJsTWF0Y2hlciA9ICR1bWYuY29tcGlsZShcIi9mb28vOmZvb0lkLzpiYXJJZFwiKTtcbiAgICogdmFyIGhhbmRsZXIgPSAkdW1mLmNvbXBpbGUoXCIvaG9tZS86Zm9vSWQvOmJhcklkXCIpO1xuICAgKiB2YXIgcnVsZSA9IGZhY3RvcnkuZnJvbVVybE1hdGNoZXIodXJsTWF0Y2hlciwgaGFuZGxlcik7XG4gICAqIHZhciBtYXRjaCA9IHJ1bGUubWF0Y2goJy9mb28vMTIzLzQ1NicpOyAvLyByZXN1bHRzIGluIHsgZm9vSWQ6ICcxMjMnLCBiYXJJZDogJzQ1NicgfVxuICAgKiB2YXIgcmVzdWx0ID0gcnVsZS5oYW5kbGVyKG1hdGNoKTsgLy8gJy9ob21lLzEyMy80NTYnXG4gICAqIGBgYFxuICAgKi9cbiAgZnJvbVVybE1hdGNoZXIodXJsTWF0Y2hlcjogVXJsTWF0Y2hlciwgaGFuZGxlcjogc3RyaW5nIHwgVXJsTWF0Y2hlciB8IFVybFJ1bGVIYW5kbGVyRm4pOiBNYXRjaGVyVXJsUnVsZSB7XG4gICAgbGV0IF9oYW5kbGVyOiBVcmxSdWxlSGFuZGxlckZuID0gaGFuZGxlciBhcyBhbnk7XG4gICAgaWYgKGlzU3RyaW5nKGhhbmRsZXIpKSBoYW5kbGVyID0gdGhpcy5yb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnkuY29tcGlsZShoYW5kbGVyKTtcbiAgICBpZiAoaXMoVXJsTWF0Y2hlcikoaGFuZGxlcikpIF9oYW5kbGVyID0gKG1hdGNoOiBSYXdQYXJhbXMpID0+IChoYW5kbGVyIGFzIFVybE1hdGNoZXIpLmZvcm1hdChtYXRjaCk7XG5cbiAgICBmdW5jdGlvbiBtYXRjaFVybFBhcmFtdGVycyh1cmw6IFVybFBhcnRzKTogUmF3UGFyYW1zIHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHVybE1hdGNoZXIuZXhlYyh1cmwucGF0aCwgdXJsLnNlYXJjaCwgdXJsLmhhc2gpO1xuICAgICAgcmV0dXJuIHVybE1hdGNoZXIudmFsaWRhdGVzKHBhcmFtcykgJiYgcGFyYW1zO1xuICAgIH1cblxuICAgIC8vIFByaW9yaXRpemUgVVJMcywgbG93ZXN0IHRvIGhpZ2hlc3Q6XG4gICAgLy8gLSBTb21lIG9wdGlvbmFsIFVSTCBwYXJhbWV0ZXJzLCBidXQgbm9uZSBtYXRjaGVkXG4gICAgLy8gLSBObyBvcHRpb25hbCBwYXJhbWV0ZXJzIGluIFVSTFxuICAgIC8vIC0gU29tZSBvcHRpb25hbCBwYXJhbWV0ZXJzLCBzb21lIG1hdGNoZWRcbiAgICAvLyAtIFNvbWUgb3B0aW9uYWwgcGFyYW1ldGVycywgYWxsIG1hdGNoZWRcbiAgICBmdW5jdGlvbiBtYXRjaFByaW9yaXR5KHBhcmFtczogUmF3UGFyYW1zKTogbnVtYmVyIHtcbiAgICAgIGNvbnN0IG9wdGlvbmFsID0gdXJsTWF0Y2hlci5wYXJhbWV0ZXJzKCkuZmlsdGVyKHBhcmFtID0+IHBhcmFtLmlzT3B0aW9uYWwpO1xuICAgICAgaWYgKCFvcHRpb25hbC5sZW5ndGgpIHJldHVybiAwLjAwMDAwMTtcbiAgICAgIGNvbnN0IG1hdGNoZWQgPSBvcHRpb25hbC5maWx0ZXIocGFyYW0gPT4gcGFyYW1zW3BhcmFtLmlkXSk7XG4gICAgICByZXR1cm4gbWF0Y2hlZC5sZW5ndGggLyBvcHRpb25hbC5sZW5ndGg7XG4gICAgfVxuXG4gICAgY29uc3QgZGV0YWlscyA9IHsgdXJsTWF0Y2hlciwgbWF0Y2hQcmlvcml0eSwgdHlwZTogJ1VSTE1BVENIRVInIH07XG4gICAgcmV0dXJuIGV4dGVuZChuZXcgQmFzZVVybFJ1bGUobWF0Y2hVcmxQYXJhbXRlcnMsIF9oYW5kbGVyKSwgZGV0YWlscykgYXMgTWF0Y2hlclVybFJ1bGU7XG4gIH1cblxuICAvKipcbiAgICogQSBVcmxSdWxlIHdoaWNoIG1hdGNoZXMgYSBzdGF0ZSBieSBpdHMgdXJsXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogdmFyIHJ1bGUgPSBmYWN0b3J5LmZyb21TdGF0ZSgkc3RhdGUuZ2V0KCdmb28nKSwgcm91dGVyKTtcbiAgICogdmFyIG1hdGNoID0gcnVsZS5tYXRjaCgnL2Zvby8xMjMvNDU2Jyk7IC8vIHJlc3VsdHMgaW4geyBmb29JZDogJzEyMycsIGJhcklkOiAnNDU2JyB9XG4gICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpO1xuICAgKiAvLyBTdGFydHMgYSB0cmFuc2l0aW9uIHRvICdmb28nIHdpdGggcGFyYW1zOiB7IGZvb0lkOiAnMTIzJywgYmFySWQ6ICc0NTYnIH1cbiAgICogYGBgXG4gICAqL1xuICBmcm9tU3RhdGUoc3RhdGU6IFN0YXRlT2JqZWN0LCByb3V0ZXI6IFVJUm91dGVyKTogU3RhdGVSdWxlIHtcbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIG1hdGNoIGJ5IHRyYW5zaXRpb25pbmcgdG8gbWF0Y2hlZCBzdGF0ZVxuICAgICAqXG4gICAgICogRmlyc3QgY2hlY2tzIGlmIHRoZSByb3V0ZXIgc2hvdWxkIHN0YXJ0IGEgbmV3IHRyYW5zaXRpb24uXG4gICAgICogQSBuZXcgdHJhbnNpdGlvbiBpcyBub3QgcmVxdWlyZWQgaWYgdGhlIGN1cnJlbnQgc3RhdGUncyBVUkxcbiAgICAgKiBhbmQgdGhlIG5ldyBVUkwgYXJlIGFscmVhZHkgaWRlbnRpY2FsXG4gICAgICovXG4gICAgY29uc3QgaGFuZGxlciA9IChtYXRjaDogUmF3UGFyYW1zKSA9PiB7XG4gICAgICBjb25zdCAkc3RhdGUgPSByb3V0ZXIuc3RhdGVTZXJ2aWNlO1xuICAgICAgY29uc3QgZ2xvYmFscyA9IHJvdXRlci5nbG9iYWxzO1xuICAgICAgaWYgKCRzdGF0ZS5ocmVmKHN0YXRlLCBtYXRjaCkgIT09ICRzdGF0ZS5ocmVmKGdsb2JhbHMuY3VycmVudCwgZ2xvYmFscy5wYXJhbXMpKSB7XG4gICAgICAgICRzdGF0ZS50cmFuc2l0aW9uVG8oc3RhdGUsIG1hdGNoLCB7IGluaGVyaXQ6IHRydWUsIHNvdXJjZTogJ3VybCcgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGRldGFpbHMgPSB7IHN0YXRlLCB0eXBlOiAnU1RBVEUnIH07XG4gICAgcmV0dXJuIGV4dGVuZCh0aGlzLmZyb21VcmxNYXRjaGVyKHN0YXRlLnVybCwgaGFuZGxlciksIGRldGFpbHMpIGFzIFN0YXRlUnVsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIFVybFJ1bGUgd2hpY2ggbWF0Y2hlcyBiYXNlZCBvbiBhIHJlZ3VsYXIgZXhwcmVzc2lvblxuICAgKlxuICAgKiBUaGUgYGhhbmRsZXJgIG1heSBiZSBlaXRoZXIgYSBbW1VybFJ1bGVIYW5kbGVyRm5dXSBvciBhIHN0cmluZy5cbiAgICpcbiAgICogIyMgSGFuZGxlciBhcyBhIGZ1bmN0aW9uXG4gICAqXG4gICAqIElmIGBoYW5kbGVyYCBpcyBhIGZ1bmN0aW9uLCB0aGUgZnVuY3Rpb24gaXMgaW52b2tlZCB3aXRoOlxuICAgKlxuICAgKiAtIHJlZ2V4cCBtYXRjaCBhcnJheSAoZnJvbSBgcmVnZXhwYClcbiAgICogLSB1cmw6IHRoZSBjdXJyZW50IFVybCAoW1tVcmxQYXJ0c11dKVxuICAgKiAtIHJvdXRlcjogdGhlIHJvdXRlciBvYmplY3QgKFtbVUlSb3V0ZXJdXSlcbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiB2YXIgcnVsZSA9IGZhY3RvcnkuZnJvbVJlZ0V4cCgvXlxcL2Zvb1xcLyhiYXJ8YmF6KSQvLCBtYXRjaCA9PiBcIi9ob21lL1wiICsgbWF0Y2hbMV0pXG4gICAqIHZhciBtYXRjaCA9IHJ1bGUubWF0Y2goJy9mb28vYmFyJyk7IC8vIHJlc3VsdHMgaW4gWyAnL2Zvby9iYXInLCAnYmFyJyBdXG4gICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpOyAvLyAnL2hvbWUvYmFyJ1xuICAgKiBgYGBcbiAgICpcbiAgICogIyMgSGFuZGxlciBhcyBzdHJpbmdcbiAgICpcbiAgICogSWYgYGhhbmRsZXJgIGlzIGEgc3RyaW5nLCB0aGUgdXJsIGlzICpyZXBsYWNlZCBieSB0aGUgc3RyaW5nKiB3aGVuIHRoZSBSdWxlIGlzIGludm9rZWQuXG4gICAqIFRoZSBzdHJpbmcgaXMgZmlyc3QgaW50ZXJwb2xhdGVkIHVzaW5nIGBzdHJpbmcucmVwbGFjZSgpYCBzdHlsZSBwYXR0ZXJuLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIHZhciBydWxlID0gZmFjdG9yeS5mcm9tUmVnRXhwKC9eXFwvZm9vXFwvKGJhcnxiYXopJC8sIFwiL2hvbWUvJDFcIilcbiAgICogdmFyIG1hdGNoID0gcnVsZS5tYXRjaCgnL2Zvby9iYXInKTsgLy8gcmVzdWx0cyBpbiBbICcvZm9vL2JhcicsICdiYXInIF1cbiAgICogdmFyIHJlc3VsdCA9IHJ1bGUuaGFuZGxlcihtYXRjaCk7IC8vICcvaG9tZS9iYXInXG4gICAqIGBgYFxuICAgKi9cbiAgZnJvbVJlZ0V4cChyZWdleHA6IFJlZ0V4cCwgaGFuZGxlcjogc3RyaW5nIHwgVXJsUnVsZUhhbmRsZXJGbik6IFJlZ0V4cFJ1bGUge1xuICAgIGlmIChyZWdleHAuZ2xvYmFsIHx8IHJlZ2V4cC5zdGlja3kpIHRocm93IG5ldyBFcnJvcignUnVsZSBSZWdFeHAgbXVzdCBub3QgYmUgZ2xvYmFsIG9yIHN0aWNreScpO1xuXG4gICAgLyoqXG4gICAgICogSWYgaGFuZGxlciBpcyBhIHN0cmluZywgdGhlIHVybCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHRoZSBzdHJpbmcuXG4gICAgICogSWYgdGhlIHN0cmluZyBoYXMgYW55IFN0cmluZy5yZXBsYWNlKCkgc3R5bGUgdmFyaWFibGVzIGluIGl0IChsaWtlIGAkMmApLFxuICAgICAqIHRoZXkgd2lsbCBiZSByZXBsYWNlZCBieSB0aGUgY2FwdHVyZXMgZnJvbSBbW21hdGNoXV1cbiAgICAgKi9cbiAgICBjb25zdCByZWRpcmVjdFVybFRvID0gKG1hdGNoOiBSZWdFeHBFeGVjQXJyYXkpID0+XG4gICAgICAvLyBJbnRlcnBvbGF0ZXMgbWF0Y2hlZCB2YWx1ZXMgaW50byAkMSAkMiwgZXRjIHVzaW5nIGEgU3RyaW5nLnJlcGxhY2UoKS1zdHlsZSBwYXR0ZXJuXG4gICAgICAoaGFuZGxlciBhcyBzdHJpbmcpLnJlcGxhY2UoL1xcJChcXCR8XFxkezEsMn0pLywgKG0sIHdoYXQpID0+IG1hdGNoW3doYXQgPT09ICckJyA/IDAgOiBOdW1iZXIod2hhdCldKTtcblxuICAgIGNvbnN0IF9oYW5kbGVyID0gaXNTdHJpbmcoaGFuZGxlcikgPyByZWRpcmVjdFVybFRvIDogaGFuZGxlcjtcblxuICAgIGNvbnN0IG1hdGNoUGFyYW1zRnJvbVJlZ2V4cCA9ICh1cmw6IFVybFBhcnRzKTogUmVnRXhwRXhlY0FycmF5ID0+IHJlZ2V4cC5leGVjKHVybC5wYXRoKTtcblxuICAgIGNvbnN0IGRldGFpbHMgPSB7IHJlZ2V4cCwgdHlwZTogJ1JFR0VYUCcgfTtcbiAgICByZXR1cm4gZXh0ZW5kKG5ldyBCYXNlVXJsUnVsZShtYXRjaFBhcmFtc0Zyb21SZWdleHAsIF9oYW5kbGVyKSwgZGV0YWlscykgYXMgUmVnRXhwUnVsZTtcbiAgfVxufVxuXG4vKipcbiAqIEEgYmFzZSBydWxlIHdoaWNoIGNhbGxzIGBtYXRjaGBcbiAqXG4gKiBUaGUgdmFsdWUgZnJvbSB0aGUgYG1hdGNoYCBmdW5jdGlvbiBpcyBwYXNzZWQgdGhyb3VnaCB0byB0aGUgYGhhbmRsZXJgLlxuICogQGludGVybmFsYXBpXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlVXJsUnVsZSBpbXBsZW1lbnRzIFVybFJ1bGUge1xuICAkaWQ6IG51bWJlcjtcbiAgcHJpb3JpdHk6IG51bWJlcjtcbiAgX2dyb3VwOiBudW1iZXI7XG4gIHR5cGU6IFVybFJ1bGVUeXBlID0gJ1JBVyc7XG4gIGhhbmRsZXI6IFVybFJ1bGVIYW5kbGVyRm47XG4gIG1hdGNoUHJpb3JpdHkgPSBtYXRjaCA9PiAwIC0gdGhpcy4kaWQ7XG5cbiAgY29uc3RydWN0b3IocHVibGljIG1hdGNoOiBVcmxSdWxlTWF0Y2hGbiwgaGFuZGxlcj86IFVybFJ1bGVIYW5kbGVyRm4pIHtcbiAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyIHx8IGlkZW50aXR5O1xuICB9XG59XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIHVybCAqLyAvKiogKi9cbmltcG9ydCB7IHN0cmlwTGFzdFBhdGhFbGVtZW50IH0gZnJvbSAnLi4vY29tbW9uJztcbmltcG9ydCB7IFVybE1hdGNoZXIgfSBmcm9tICcuL3VybE1hdGNoZXInO1xuaW1wb3J0IHsgUmF3UGFyYW1zIH0gZnJvbSAnLi4vcGFyYW1zJztcbmltcG9ydCB7IFVJUm91dGVyIH0gZnJvbSAnLi4vcm91dGVyJztcbmltcG9ydCB7IFVybFJ1bGVGYWN0b3J5IH0gZnJvbSAnLi91cmxSdWxlJztcbmltcG9ydCB7IE1hdGNoUmVzdWx0LCBVcmxQYXJ0cywgVXJsUnVsZSwgVXJsUnVsZUhhbmRsZXJGbiB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IFRhcmdldFN0YXRlLCBUYXJnZXRTdGF0ZURlZiB9IGZyb20gJy4uL3N0YXRlJztcblxuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIGFwcGVuZEJhc2VQYXRoKHVybDogc3RyaW5nLCBpc0h0bWw1OiBib29sZWFuLCBhYnNvbHV0ZTogYm9vbGVhbiwgYmFzZUhyZWY6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmIChiYXNlSHJlZiA9PT0gJy8nKSByZXR1cm4gdXJsO1xuICBpZiAoaXNIdG1sNSkgcmV0dXJuIHN0cmlwTGFzdFBhdGhFbGVtZW50KGJhc2VIcmVmKSArIHVybDtcbiAgaWYgKGFic29sdXRlKSByZXR1cm4gYmFzZUhyZWYuc2xpY2UoMSkgKyB1cmw7XG4gIHJldHVybiB1cmw7XG59XG5cbi8qKlxuICogVXBkYXRlcyBVUkwgYW5kIHJlc3BvbmRzIHRvIFVSTCBjaGFuZ2VzXG4gKlxuICogIyMjIERlcHJlY2F0aW9uIHdhcm5pbmc6XG4gKiBUaGlzIGNsYXNzIGlzIG5vdyBjb25zaWRlcmVkIHRvIGJlIGFuIGludGVybmFsIEFQSVxuICogVXNlIHRoZSBbW1VybFNlcnZpY2VdXSBpbnN0ZWFkLlxuICogRm9yIGNvbmZpZ3VyaW5nIFVSTCBydWxlcywgdXNlIHRoZSBbW1VybFJ1bGVzXV0gd2hpY2ggY2FuIGJlIGZvdW5kIGFzIFtbVXJsU2VydmljZS5ydWxlc11dLlxuICpcbiAqIEBpbnRlcm5hbGFwaVxuICovXG5leHBvcnQgY2xhc3MgVXJsUm91dGVyIHtcbiAgLyoqIHVzZWQgdG8gY3JlYXRlIFtbVXJsUnVsZV1dIG9iamVjdHMgZm9yIGNvbW1vbiBjYXNlcyAqL1xuICBwdWJsaWMgdXJsUnVsZUZhY3Rvcnk6IFVybFJ1bGVGYWN0b3J5O1xuICAvKiogQGhpZGRlbiAqLyBwcml2YXRlIGxvY2F0aW9uOiBzdHJpbmc7XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgY29uc3RydWN0b3IoLyoqIEBoaWRkZW4gKi8gcHJpdmF0ZSByb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgdGhpcy51cmxSdWxlRmFjdG9yeSA9IG5ldyBVcmxSdWxlRmFjdG9yeShyb3V0ZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEludGVybmFsIEFQSS5cbiAgICogQGludGVybmFsYXBpXG4gICAqL1xuICB1cGRhdGUocmVhZD86IGJvb2xlYW4pIHtcbiAgICBjb25zdCAkdXJsID0gdGhpcy5yb3V0ZXIubG9jYXRpb25TZXJ2aWNlO1xuICAgIGlmIChyZWFkKSB7XG4gICAgICB0aGlzLmxvY2F0aW9uID0gJHVybC51cmwoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCR1cmwudXJsKCkgPT09IHRoaXMubG9jYXRpb24pIHJldHVybjtcblxuICAgICR1cmwudXJsKHRoaXMubG9jYXRpb24sIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEludGVybmFsIEFQSS5cbiAgICpcbiAgICogUHVzaGVzIGEgbmV3IGxvY2F0aW9uIHRvIHRoZSBicm93c2VyIGhpc3RvcnkuXG4gICAqXG4gICAqIEBpbnRlcm5hbGFwaVxuICAgKiBAcGFyYW0gdXJsTWF0Y2hlclxuICAgKiBAcGFyYW0gcGFyYW1zXG4gICAqIEBwYXJhbSBvcHRpb25zXG4gICAqL1xuICBwdXNoKHVybE1hdGNoZXI6IFVybE1hdGNoZXIsIHBhcmFtcz86IFJhd1BhcmFtcywgb3B0aW9ucz86IHsgcmVwbGFjZT86IHN0cmluZyB8IGJvb2xlYW4gfSkge1xuICAgIGNvbnN0IHJlcGxhY2UgPSBvcHRpb25zICYmICEhb3B0aW9ucy5yZXBsYWNlO1xuICAgIHRoaXMucm91dGVyLnVybFNlcnZpY2UudXJsKHVybE1hdGNoZXIuZm9ybWF0KHBhcmFtcyB8fCB7fSksIHJlcGxhY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkcyBhbmQgcmV0dXJucyBhIFVSTCB3aXRoIGludGVycG9sYXRlZCBwYXJhbWV0ZXJzXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogbWF0Y2hlciA9ICR1bWYuY29tcGlsZShcIi9hYm91dC86cGVyc29uXCIpO1xuICAgKiBwYXJhbXMgPSB7IHBlcnNvbjogXCJib2JcIiB9O1xuICAgKiAkYm9iID0gJHVybFJvdXRlci5ocmVmKG1hdGNoZXIsIHBhcmFtcyk7XG4gICAqIC8vICRib2IgPT0gXCIvYWJvdXQvYm9iXCI7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gdXJsTWF0Y2hlciBUaGUgW1tVcmxNYXRjaGVyXV0gb2JqZWN0IHdoaWNoIGlzIHVzZWQgYXMgdGhlIHRlbXBsYXRlIG9mIHRoZSBVUkwgdG8gZ2VuZXJhdGUuXG4gICAqIEBwYXJhbSBwYXJhbXMgQW4gb2JqZWN0IG9mIHBhcmFtZXRlciB2YWx1ZXMgdG8gZmlsbCB0aGUgbWF0Y2hlcidzIHJlcXVpcmVkIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0LiBUaGUgb3B0aW9ucyBhcmU6XG4gICAqXG4gICAqIC0gKipgYWJzb2x1dGVgKiogLSB7Ym9vbGVhbj1mYWxzZX0sICBJZiB0cnVlIHdpbGwgZ2VuZXJhdGUgYW4gYWJzb2x1dGUgdXJsLCBlLmcuIFwiaHR0cDovL3d3dy5leGFtcGxlLmNvbS9mdWxsdXJsXCIuXG4gICAqXG4gICAqIEByZXR1cm5zIFJldHVybnMgdGhlIGZ1bGx5IGNvbXBpbGVkIFVSTCwgb3IgYG51bGxgIGlmIGBwYXJhbXNgIGZhaWwgdmFsaWRhdGlvbiBhZ2FpbnN0IGB1cmxNYXRjaGVyYFxuICAgKi9cbiAgaHJlZih1cmxNYXRjaGVyOiBVcmxNYXRjaGVyLCBwYXJhbXM/OiBhbnksIG9wdGlvbnM/OiB7IGFic29sdXRlOiBib29sZWFuIH0pOiBzdHJpbmcge1xuICAgIGxldCB1cmwgPSB1cmxNYXRjaGVyLmZvcm1hdChwYXJhbXMpO1xuICAgIGlmICh1cmwgPT0gbnVsbCkgcmV0dXJuIG51bGw7XG5cbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGFic29sdXRlOiBmYWxzZSB9O1xuXG4gICAgY29uc3QgY2ZnID0gdGhpcy5yb3V0ZXIudXJsU2VydmljZS5jb25maWc7XG4gICAgY29uc3QgaXNIdG1sNSA9IGNmZy5odG1sNU1vZGUoKTtcbiAgICBpZiAoIWlzSHRtbDUgJiYgdXJsICE9PSBudWxsKSB7XG4gICAgICB1cmwgPSAnIycgKyBjZmcuaGFzaFByZWZpeCgpICsgdXJsO1xuICAgIH1cbiAgICB1cmwgPSBhcHBlbmRCYXNlUGF0aCh1cmwsIGlzSHRtbDUsIG9wdGlvbnMuYWJzb2x1dGUsIGNmZy5iYXNlSHJlZigpKTtcblxuICAgIGlmICghb3B0aW9ucy5hYnNvbHV0ZSB8fCAhdXJsKSB7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH1cblxuICAgIGNvbnN0IHNsYXNoID0gIWlzSHRtbDUgJiYgdXJsID8gJy8nIDogJyc7XG4gICAgY29uc3QgY2ZnUG9ydCA9IGNmZy5wb3J0KCk7XG4gICAgY29uc3QgcG9ydCA9IDxhbnk+KGNmZ1BvcnQgPT09IDgwIHx8IGNmZ1BvcnQgPT09IDQ0MyA/ICcnIDogJzonICsgY2ZnUG9ydCk7XG5cbiAgICByZXR1cm4gW2NmZy5wcm90b2NvbCgpLCAnOi8vJywgY2ZnLmhvc3QoKSwgcG9ydCwgc2xhc2gsIHVybF0uam9pbignJyk7XG4gIH1cblxuICAvLyBEZWxlZ2F0ZSB0aGVzZSBjYWxscyB0byBbW1VybFNlcnZpY2VdXVxuICAvKiogQGRlcHJlY2F0ZWQgdXNlIFtbVXJsU2VydmljZS5zeW5jXV0qL1xuICBwdWJsaWMgc3luYyA9IChldnQ/KSA9PiB0aGlzLnJvdXRlci51cmxTZXJ2aWNlLnN5bmMoZXZ0KTtcbiAgLyoqIEBkZXByZWNhdGVkIHVzZSBbW1VybFNlcnZpY2UubGlzdGVuXV0qL1xuICBwdWJsaWMgbGlzdGVuID0gKGVuYWJsZWQ/OiBib29sZWFuKTogRnVuY3Rpb24gPT4gdGhpcy5yb3V0ZXIudXJsU2VydmljZS5saXN0ZW4oZW5hYmxlZCk7XG4gIC8qKiBAZGVwcmVjYXRlZCB1c2UgW1tVcmxTZXJ2aWNlLmRlZmVySW50ZXJjZXB0XV0qL1xuICBwdWJsaWMgZGVmZXJJbnRlcmNlcHQgPSAoZGVmZXI/OiBib29sZWFuKSA9PiB0aGlzLnJvdXRlci51cmxTZXJ2aWNlLmRlZmVySW50ZXJjZXB0KGRlZmVyKTtcbiAgLyoqIEBkZXByZWNhdGVkIHVzZSBbW1VybFNlcnZpY2UuaW50ZXJjZXB0RGVmZXJyZWRdXSovXG4gIHB1YmxpYyBnZXQgaW50ZXJjZXB0RGVmZXJyZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucm91dGVyLnVybFNlcnZpY2UuaW50ZXJjZXB0RGVmZXJyZWQ7XG4gIH1cbiAgLyoqIEBkZXByZWNhdGVkIHVzZSBbW1VybFNlcnZpY2UubWF0Y2hdXSovXG4gIHB1YmxpYyBtYXRjaCA9ICh1cmxQYXJ0czogVXJsUGFydHMpOiBNYXRjaFJlc3VsdCA9PiB0aGlzLnJvdXRlci51cmxTZXJ2aWNlLm1hdGNoKHVybFBhcnRzKTtcblxuICAvLyBEZWxlZ2F0ZSB0aGVzZSBjYWxscyB0byBbW1VybFJ1bGVzXV1cbiAgLyoqIEBkZXByZWNhdGVkIHVzZSBbW1VybFJ1bGVzLmluaXRpYWxdXSovXG4gIHB1YmxpYyBpbml0aWFsID0gKGhhbmRsZXI6IHN0cmluZyB8IFVybFJ1bGVIYW5kbGVyRm4gfCBUYXJnZXRTdGF0ZSB8IFRhcmdldFN0YXRlRGVmKTogdm9pZCA9PlxuICAgIHRoaXMucm91dGVyLnVybFNlcnZpY2UucnVsZXMuaW5pdGlhbChoYW5kbGVyKTtcbiAgLyoqIEBkZXByZWNhdGVkIHVzZSBbW1VybFJ1bGVzLm90aGVyd2lzZV1dKi9cbiAgcHVibGljIG90aGVyd2lzZSA9IChoYW5kbGVyOiBzdHJpbmcgfCBVcmxSdWxlSGFuZGxlckZuIHwgVGFyZ2V0U3RhdGUgfCBUYXJnZXRTdGF0ZURlZik6IHZvaWQgPT5cbiAgICB0aGlzLnJvdXRlci51cmxTZXJ2aWNlLnJ1bGVzLm90aGVyd2lzZShoYW5kbGVyKTtcbiAgLyoqIEBkZXByZWNhdGVkIHVzZSBbW1VybFJ1bGVzLnJlbW92ZVJ1bGVdXSovXG4gIHB1YmxpYyByZW1vdmVSdWxlID0gKHJ1bGU6IFVybFJ1bGUpOiB2b2lkID0+IHRoaXMucm91dGVyLnVybFNlcnZpY2UucnVsZXMucmVtb3ZlUnVsZShydWxlKTtcbiAgLyoqIEBkZXByZWNhdGVkIHVzZSBbW1VybFJ1bGVzLnJ1bGVdXSovXG4gIHB1YmxpYyBydWxlID0gKHJ1bGU6IFVybFJ1bGUpOiBGdW5jdGlvbiA9PiB0aGlzLnJvdXRlci51cmxTZXJ2aWNlLnJ1bGVzLnJ1bGUocnVsZSk7XG4gIC8qKiBAZGVwcmVjYXRlZCB1c2UgW1tVcmxSdWxlcy5ydWxlc11dKi9cbiAgcHVibGljIHJ1bGVzID0gKCk6IFVybFJ1bGVbXSA9PiB0aGlzLnJvdXRlci51cmxTZXJ2aWNlLnJ1bGVzLnJ1bGVzKCk7XG4gIC8qKiBAZGVwcmVjYXRlZCB1c2UgW1tVcmxSdWxlcy5zb3J0XV0qL1xuICBwdWJsaWMgc29ydCA9IChjb21wYXJlRm4/OiAoYTogVXJsUnVsZSwgYjogVXJsUnVsZSkgPT4gbnVtYmVyKSA9PiB0aGlzLnJvdXRlci51cmxTZXJ2aWNlLnJ1bGVzLnNvcnQoY29tcGFyZUZuKTtcbiAgLyoqIEBkZXByZWNhdGVkIHVzZSBbW1VybFJ1bGVzLndoZW5dXSovXG4gIHB1YmxpYyB3aGVuID0gKFxuICAgIG1hdGNoZXI6IFJlZ0V4cCB8IFVybE1hdGNoZXIgfCBzdHJpbmcsXG4gICAgaGFuZGxlcjogc3RyaW5nIHwgVXJsUnVsZUhhbmRsZXJGbixcbiAgICBvcHRpb25zPzogeyBwcmlvcml0eTogbnVtYmVyIH1cbiAgKTogVXJsUnVsZSA9PiB0aGlzLnJvdXRlci51cmxTZXJ2aWNlLnJ1bGVzLndoZW4obWF0Y2hlciwgaGFuZGxlciwgb3B0aW9ucyk7XG59XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIHZpZXcgKi8gLyoqICovXG5pbXBvcnQgeyBlcXVhbHMsIGFwcGx5UGFpcnMsIHJlbW92ZUZyb20sIFR5cGVkTWFwLCBpbkFycmF5LCBmaW5kIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBjdXJyeSwgcHJvcCB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzQXJyYXkgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyB0cmFjZSB9IGZyb20gJy4uL2NvbW1vbi90cmFjZSc7XG5pbXBvcnQgeyBQYXRoTm9kZSB9IGZyb20gJy4uL3BhdGgvcGF0aE5vZGUnO1xuaW1wb3J0IHsgQWN0aXZlVUlWaWV3LCBWaWV3Q29udGV4dCwgVmlld0NvbmZpZyB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IF9WaWV3RGVjbGFyYXRpb24gfSBmcm9tICcuLi9zdGF0ZS9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVUlSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuXG5leHBvcnQgdHlwZSBWaWV3Q29uZmlnRmFjdG9yeSA9IChwYXRoOiBQYXRoTm9kZVtdLCBkZWNsOiBfVmlld0RlY2xhcmF0aW9uKSA9PiBWaWV3Q29uZmlnIHwgVmlld0NvbmZpZ1tdO1xuXG5leHBvcnQgaW50ZXJmYWNlIFZpZXdTZXJ2aWNlUGx1Z2luQVBJIHtcbiAgX3Jvb3RWaWV3Q29udGV4dChjb250ZXh0PzogVmlld0NvbnRleHQpOiBWaWV3Q29udGV4dDtcbiAgX3ZpZXdDb25maWdGYWN0b3J5KHZpZXdUeXBlOiBzdHJpbmcsIGZhY3Rvcnk6IFZpZXdDb25maWdGYWN0b3J5KTtcbiAgLyoqIEBwYXJhbSBpZCByb3V0ZXIuJGlkICsgXCIuXCIgKyB1aVZpZXcuaWQgKi9cbiAgX3JlZ2lzdGVyZWRVSVZpZXcoaWQ6IHN0cmluZyk6IEFjdGl2ZVVJVmlldztcbiAgX3JlZ2lzdGVyZWRVSVZpZXdzKCk6IEFjdGl2ZVVJVmlld1tdO1xuICBfYWN0aXZlVmlld0NvbmZpZ3MoKTogVmlld0NvbmZpZ1tdO1xuICBfb25TeW5jKGxpc3RlbmVyOiBWaWV3U3luY0xpc3RlbmVyKTogRnVuY3Rpb247XG59XG5cbi8vIEEgdWlWaWV3IGFuZCBpdHMgbWF0Y2hpbmcgdmlld0NvbmZpZ1xuZXhwb3J0IGludGVyZmFjZSBWaWV3VHVwbGUge1xuICB1aVZpZXc6IEFjdGl2ZVVJVmlldztcbiAgdmlld0NvbmZpZzogVmlld0NvbmZpZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWaWV3U3luY0xpc3RlbmVyIHtcbiAgKHZpZXdUdXBsZXM6IFZpZXdUdXBsZVtdKTogdm9pZDtcbn1cblxuLyoqXG4gKiBUaGUgVmlldyBzZXJ2aWNlXG4gKlxuICogVGhpcyBzZXJ2aWNlIHBhaXJzIGV4aXN0aW5nIGB1aS12aWV3YCBjb21wb25lbnRzICh3aGljaCBsaXZlIGluIHRoZSBET00pXG4gKiB3aXRoIHZpZXcgY29uZmlncyAoZnJvbSB0aGUgc3RhdGUgZGVjbGFyYXRpb24gb2JqZWN0czogW1tTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV0pLlxuICpcbiAqIC0gQWZ0ZXIgYSBzdWNjZXNzZnVsIFRyYW5zaXRpb24sIHRoZSB2aWV3cyBmcm9tIHRoZSBuZXdseSBlbnRlcmVkIHN0YXRlcyBhcmUgYWN0aXZhdGVkIHZpYSBbW2FjdGl2YXRlVmlld0NvbmZpZ11dLlxuICogICBUaGUgdmlld3MgZnJvbSBleGl0ZWQgc3RhdGVzIGFyZSBkZWFjdGl2YXRlZCB2aWEgW1tkZWFjdGl2YXRlVmlld0NvbmZpZ11dLlxuICogICAoU2VlOiB0aGUgW1tyZWdpc3RlckFjdGl2YXRlVmlld3NdXSBUcmFuc2l0aW9uIEhvb2spXG4gKlxuICogLSBBcyBgdWktdmlld2AgY29tcG9uZW50cyBwb3AgaW4gYW5kIG91dCBvZiBleGlzdGVuY2UsIHRoZXkgcmVnaXN0ZXIgdGhlbXNlbHZlcyB1c2luZyBbW3JlZ2lzdGVyVUlWaWV3XV0uXG4gKlxuICogLSBXaGVuIHRoZSBbW3N5bmNdXSBmdW5jdGlvbiBpcyBjYWxsZWQsIHRoZSByZWdpc3RlcmVkIGB1aS12aWV3YChzKSAoW1tBY3RpdmVVSVZpZXddXSlcbiAqIGFyZSBjb25maWd1cmVkIHdpdGggdGhlIG1hdGNoaW5nIFtbVmlld0NvbmZpZ11dKHMpXG4gKlxuICovXG5leHBvcnQgY2xhc3MgVmlld1NlcnZpY2Uge1xuICAvKiogQGhpZGRlbiAqLyBwcml2YXRlIF91aVZpZXdzOiBBY3RpdmVVSVZpZXdbXSA9IFtdO1xuICAvKiogQGhpZGRlbiAqLyBwcml2YXRlIF92aWV3Q29uZmlnczogVmlld0NvbmZpZ1tdID0gW107XG4gIC8qKiBAaGlkZGVuICovIHByaXZhdGUgX3Jvb3RDb250ZXh0OiBWaWV3Q29udGV4dDtcbiAgLyoqIEBoaWRkZW4gKi8gcHJpdmF0ZSBfdmlld0NvbmZpZ0ZhY3RvcmllczogeyBba2V5OiBzdHJpbmddOiBWaWV3Q29uZmlnRmFjdG9yeSB9ID0ge307XG4gIC8qKiBAaGlkZGVuICovIHByaXZhdGUgX2xpc3RlbmVyczogVmlld1N5bmNMaXN0ZW5lcltdID0gW107XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICBwdWJsaWMgX3BsdWdpbmFwaTogVmlld1NlcnZpY2VQbHVnaW5BUEkgPSB7XG4gICAgX3Jvb3RWaWV3Q29udGV4dDogdGhpcy5fcm9vdFZpZXdDb250ZXh0LmJpbmQodGhpcyksXG4gICAgX3ZpZXdDb25maWdGYWN0b3J5OiB0aGlzLl92aWV3Q29uZmlnRmFjdG9yeS5iaW5kKHRoaXMpLFxuICAgIF9yZWdpc3RlcmVkVUlWaWV3OiAoaWQ6IHN0cmluZykgPT4gZmluZCh0aGlzLl91aVZpZXdzLCB2aWV3ID0+IGAke3RoaXMucm91dGVyLiRpZH0uJHt2aWV3LmlkfWAgPT09IGlkKSxcbiAgICBfcmVnaXN0ZXJlZFVJVmlld3M6ICgpID0+IHRoaXMuX3VpVmlld3MsXG4gICAgX2FjdGl2ZVZpZXdDb25maWdzOiAoKSA9PiB0aGlzLl92aWV3Q29uZmlncyxcbiAgICBfb25TeW5jOiAobGlzdGVuZXI6IFZpZXdTeW5jTGlzdGVuZXIpID0+IHtcbiAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgIHJldHVybiAoKSA9PiByZW1vdmVGcm9tKHRoaXMuX2xpc3RlbmVycywgbGlzdGVuZXIpO1xuICAgIH0sXG4gIH07XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgdWktdmlldyBhbmQgYSBWaWV3Q29uZmlnLCBkZXRlcm1pbmVzIGlmIHRoZXkgXCJtYXRjaFwiLlxuICAgKlxuICAgKiBBIHVpLXZpZXcgaGFzIGEgZnVsbHkgcXVhbGlmaWVkIG5hbWUgKGZxbikgYW5kIGEgY29udGV4dCBvYmplY3QuICBUaGUgZnFuIGlzIGJ1aWx0IGZyb20gaXRzIG92ZXJhbGwgbG9jYXRpb24gaW5cbiAgICogdGhlIERPTSwgZGVzY3JpYmluZyBpdHMgbmVzdGluZyByZWxhdGlvbnNoaXAgdG8gYW55IHBhcmVudCB1aS12aWV3IHRhZ3MgaXQgaXMgbmVzdGVkIGluc2lkZSBvZi5cbiAgICpcbiAgICogQSBWaWV3Q29uZmlnIGhhcyBhIHRhcmdldCB1aS12aWV3IG5hbWUgYW5kIGEgY29udGV4dCBhbmNob3IuICBUaGUgdWktdmlldyBuYW1lIGNhbiBiZSBhIHNpbXBsZSBuYW1lLCBvclxuICAgKiBjYW4gYmUgYSBzZWdtZW50ZWQgdWktdmlldyBwYXRoLCBkZXNjcmliaW5nIGEgcG9ydGlvbiBvZiBhIHVpLXZpZXcgZnFuLlxuICAgKlxuICAgKiBJbiBvcmRlciBmb3IgYSB1aS12aWV3IHRvIG1hdGNoIFZpZXdDb25maWcsIHVpLXZpZXcncyAkdHlwZSBtdXN0IG1hdGNoIHRoZSBWaWV3Q29uZmlnJ3MgJHR5cGVcbiAgICpcbiAgICogSWYgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgdWktdmlldyBuYW1lIGlzIGEgc2ltcGxlIG5hbWUgKG5vIGRvdHMpLCB0aGVuIGEgdWktdmlldyBtYXRjaGVzIGlmOlxuICAgKiAtIHRoZSB1aS12aWV3J3MgbmFtZSBtYXRjaGVzIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWVcbiAgICogLSB0aGUgdWktdmlldydzIGNvbnRleHQgbWF0Y2hlcyB0aGUgVmlld0NvbmZpZydzIGFuY2hvclxuICAgKlxuICAgKiBJZiB0aGUgVmlld0NvbmZpZydzIHRhcmdldCB1aS12aWV3IG5hbWUgaXMgYSBzZWdtZW50ZWQgbmFtZSAod2l0aCBkb3RzKSwgdGhlbiBhIHVpLXZpZXcgbWF0Y2hlcyBpZjpcbiAgICogLSBUaGVyZSBleGlzdHMgYSBwYXJlbnQgdWktdmlldyB3aGVyZTpcbiAgICogICAgLSB0aGUgcGFyZW50IHVpLXZpZXcncyBuYW1lIG1hdGNoZXMgdGhlIGZpcnN0IHNlZ21lbnQgKGluZGV4IDApIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWVcbiAgICogICAgLSB0aGUgcGFyZW50IHVpLXZpZXcncyBjb250ZXh0IG1hdGNoZXMgdGhlIFZpZXdDb25maWcncyBhbmNob3JcbiAgICogLSBBbmQgdGhlIHJlbWFpbmluZyBzZWdtZW50cyAoaW5kZXggMS4ubikgb2YgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgbmFtZSBtYXRjaCB0aGUgdGFpbCBvZiB0aGUgdWktdmlldydzIGZxblxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKlxuICAgKiBET006XG4gICAqIDx1aS12aWV3PiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gY3JlYXRlZCBpbiB0aGUgcm9vdCBjb250ZXh0IChuYW1lOiBcIlwiKSAtLT5cbiAgICogICA8dWktdmlldyBuYW1lPVwiZm9vXCI+ICAgICAgICAgICAgICAgIDwhLS0gY3JlYXRlZCBpbiB0aGUgY29udGV4dCBuYW1lZDogXCJBXCIgICAgICAtLT5cbiAgICogICAgIDx1aS12aWV3PiAgICAgICAgICAgICAgICAgICAgPCEtLSBjcmVhdGVkIGluIHRoZSBjb250ZXh0IG5hbWVkOiBcIkEuQlwiICAgIC0tPlxuICAgKiAgICAgICA8dWktdmlldyBuYW1lPVwiYmFyXCI+ICAgICAgICAgICAgPCEtLSBjcmVhdGVkIGluIHRoZSBjb250ZXh0IG5hbWVkOiBcIkEuQi5DXCIgIC0tPlxuICAgKiAgICAgICA8L3VpLXZpZXc+XG4gICAqICAgICA8L3VpLXZpZXc+XG4gICAqICAgPC91aS12aWV3PlxuICAgKiA8L3VpLXZpZXc+XG4gICAqXG4gICAqIHVpVmlld3M6IFtcbiAgICogIHsgZnFuOiBcIiRkZWZhdWx0XCIsICAgICAgICAgICAgICAgICAgY3JlYXRpb25Db250ZXh0OiB7IG5hbWU6IFwiXCIgfSB9LFxuICAgKiAgeyBmcW46IFwiJGRlZmF1bHQuZm9vXCIsICAgICAgICAgICAgICBjcmVhdGlvbkNvbnRleHQ6IHsgbmFtZTogXCJBXCIgfSB9LFxuICAgKiAgeyBmcW46IFwiJGRlZmF1bHQuZm9vLiRkZWZhdWx0XCIsICAgICBjcmVhdGlvbkNvbnRleHQ6IHsgbmFtZTogXCJBLkJcIiB9IH1cbiAgICogIHsgZnFuOiBcIiRkZWZhdWx0LmZvby4kZGVmYXVsdC5iYXJcIiwgY3JlYXRpb25Db250ZXh0OiB7IG5hbWU6IFwiQS5CLkNcIiB9IH1cbiAgICogXVxuICAgKlxuICAgKiBUaGVzZSBmb3VyIHZpZXcgY29uZmlncyBhbGwgbWF0Y2ggdGhlIHVpLXZpZXcgd2l0aCB0aGUgZnFuOiBcIiRkZWZhdWx0LmZvby4kZGVmYXVsdC5iYXJcIjpcbiAgICpcbiAgICogLSBWaWV3Q29uZmlnMTogeyB1aVZpZXdOYW1lOiBcImJhclwiLCAgICAgICAgICAgICAgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvcjogXCJBLkIuQ1wiIH1cbiAgICogLSBWaWV3Q29uZmlnMjogeyB1aVZpZXdOYW1lOiBcIiRkZWZhdWx0LmJhclwiLCAgICAgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvcjogXCJBLkJcIiB9XG4gICAqIC0gVmlld0NvbmZpZzM6IHsgdWlWaWV3TmFtZTogXCJmb28uJGRlZmF1bHQuYmFyXCIsICAgICAgICAgIHVpVmlld0NvbnRleHRBbmNob3I6IFwiQVwiIH1cbiAgICogLSBWaWV3Q29uZmlnNDogeyB1aVZpZXdOYW1lOiBcIiRkZWZhdWx0LmZvby4kZGVmYXVsdC5iYXJcIiwgdWlWaWV3Q29udGV4dEFuY2hvcjogXCJcIiB9XG4gICAqXG4gICAqIFVzaW5nIFZpZXdDb25maWczIGFzIGFuIGV4YW1wbGUsIGl0IG1hdGNoZXMgdGhlIHVpLXZpZXcgd2l0aCBmcW4gXCIkZGVmYXVsdC5mb28uJGRlZmF1bHQuYmFyXCIgYmVjYXVzZTpcbiAgICogLSBUaGUgVmlld0NvbmZpZydzIHNlZ21lbnRlZCB0YXJnZXQgbmFtZSBpczogWyBcImZvb1wiLCBcIiRkZWZhdWx0XCIsIFwiYmFyXCIgXVxuICAgKiAtIFRoZXJlIGV4aXN0cyBhIHBhcmVudCB1aS12aWV3ICh3aGljaCBoYXMgZnFuOiBcIiRkZWZhdWx0LmZvb1wiKSB3aGVyZTpcbiAgICogICAgLSB0aGUgcGFyZW50IHVpLXZpZXcncyBuYW1lIFwiZm9vXCIgbWF0Y2hlcyB0aGUgZmlyc3Qgc2VnbWVudCBcImZvb1wiIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWVcbiAgICogICAgLSB0aGUgcGFyZW50IHVpLXZpZXcncyBjb250ZXh0IFwiQVwiIG1hdGNoZXMgdGhlIFZpZXdDb25maWcncyBhbmNob3IgY29udGV4dCBcIkFcIlxuICAgKiAtIEFuZCB0aGUgcmVtYWluaW5nIHNlZ21lbnRzIFsgXCIkZGVmYXVsdFwiLCBcImJhclwiIF0uam9pbihcIi5cIl8gb2YgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgbmFtZSBtYXRjaFxuICAgKiAgIHRoZSB0YWlsIG9mIHRoZSB1aS12aWV3J3MgZnFuIFwiZGVmYXVsdC5iYXJcIlxuICAgKlxuICAgKiBAaW50ZXJuYWxhcGlcbiAgICovXG4gIHN0YXRpYyBtYXRjaGVzID0gKHVpVmlld3NCeUZxbjogVHlwZWRNYXA8QWN0aXZlVUlWaWV3PiwgdWlWaWV3OiBBY3RpdmVVSVZpZXcpID0+ICh2aWV3Q29uZmlnOiBWaWV3Q29uZmlnKSA9PiB7XG4gICAgLy8gRG9uJ3Qgc3VwcGx5IGFuIG5nMSB1aS12aWV3IHdpdGggYW4gbmcyIFZpZXdDb25maWcsIGV0Y1xuICAgIGlmICh1aVZpZXcuJHR5cGUgIT09IHZpZXdDb25maWcudmlld0RlY2wuJHR5cGUpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFNwbGl0IG5hbWVzIGFwYXJ0IGZyb20gYm90aCB2aWV3Q29uZmlnIGFuZCB1aVZpZXcgaW50byBzZWdtZW50c1xuICAgIGNvbnN0IHZjID0gdmlld0NvbmZpZy52aWV3RGVjbDtcbiAgICBjb25zdCB2Y1NlZ21lbnRzID0gdmMuJHVpVmlld05hbWUuc3BsaXQoJy4nKTtcbiAgICBjb25zdCB1aXZTZWdtZW50cyA9IHVpVmlldy5mcW4uc3BsaXQoJy4nKTtcblxuICAgIC8vIENoZWNrIGlmIHRoZSB0YWlscyBvZiB0aGUgc2VnbWVudCBhcnJheXMgbWF0Y2guIGV4LCB0aGVzZSBhcnJheXMnIHRhaWxzIG1hdGNoOlxuICAgIC8vIHZjOiBbXCJmb29cIiwgXCJiYXJcIl0sIHVpdiBmcW46IFtcIiRkZWZhdWx0XCIsIFwiZm9vXCIsIFwiYmFyXCJdXG4gICAgaWYgKCFlcXVhbHModmNTZWdtZW50cywgdWl2U2VnbWVudHMuc2xpY2UoMCAtIHZjU2VnbWVudHMubGVuZ3RoKSkpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIE5vdyBjaGVjayBpZiB0aGUgZnFuIGVuZGluZyBhdCB0aGUgZmlyc3Qgc2VnbWVudCBvZiB0aGUgdmlld0NvbmZpZyBtYXRjaGVzIHRoZSBjb250ZXh0OlxuICAgIC8vIFtcIiRkZWZhdWx0XCIsIFwiZm9vXCJdLmpvaW4oXCIuXCIpID09IFwiJGRlZmF1bHQuZm9vXCIsIGRvZXMgdGhlIHVpLXZpZXcgJGRlZmF1bHQuZm9vIGNvbnRleHQgbWF0Y2g/XG4gICAgY29uc3QgbmVnT2Zmc2V0ID0gMSAtIHZjU2VnbWVudHMubGVuZ3RoIHx8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBmcW5Ub0ZpcnN0U2VnbWVudCA9IHVpdlNlZ21lbnRzLnNsaWNlKDAsIG5lZ09mZnNldCkuam9pbignLicpO1xuICAgIGNvbnN0IHVpVmlld0NvbnRleHQgPSB1aVZpZXdzQnlGcW5bZnFuVG9GaXJzdFNlZ21lbnRdLmNyZWF0aW9uQ29udGV4dDtcbiAgICByZXR1cm4gdmMuJHVpVmlld0NvbnRleHRBbmNob3IgPT09ICh1aVZpZXdDb250ZXh0ICYmIHVpVmlld0NvbnRleHQubmFtZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZXMgYSB2aWV3J3MgbmFtZSBmcm9tIGEgc3RhdGUudmlld3MgY29uZmlndXJhdGlvbiBibG9jay5cbiAgICpcbiAgICogVGhpcyBzaG91bGQgYmUgdXNlZCBieSBhIGZyYW1ld29yayBpbXBsZW1lbnRhdGlvbiB0byBjYWxjdWxhdGUgdGhlIHZhbHVlcyBmb3JcbiAgICogW1tfVmlld0RlY2xhcmF0aW9uLiR1aVZpZXdOYW1lXV0gYW5kIFtbX1ZpZXdEZWNsYXJhdGlvbi4kdWlWaWV3Q29udGV4dEFuY2hvcl1dLlxuICAgKlxuICAgKiBAcGFyYW0gY29udGV4dCB0aGUgY29udGV4dCBvYmplY3QgKHN0YXRlIGRlY2xhcmF0aW9uKSB0aGF0IHRoZSB2aWV3IGJlbG9uZ3MgdG9cbiAgICogQHBhcmFtIHJhd1ZpZXdOYW1lIHRoZSBuYW1lIG9mIHRoZSB2aWV3LCBhcyBkZWNsYXJlZCBpbiB0aGUgW1tTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV1cbiAgICpcbiAgICogQHJldHVybnMgdGhlIG5vcm1hbGl6ZWQgdWlWaWV3TmFtZSBhbmQgdWlWaWV3Q29udGV4dEFuY2hvciB0aGF0IHRoZSB2aWV3IHRhcmdldHNcbiAgICovXG4gIHN0YXRpYyBub3JtYWxpemVVSVZpZXdUYXJnZXQoY29udGV4dDogVmlld0NvbnRleHQsIHJhd1ZpZXdOYW1lID0gJycpIHtcbiAgICAvLyBUT0RPOiBWYWxpZGF0ZSBpbmNvbWluZyB2aWV3IG5hbWUgd2l0aCBhIHJlZ2V4cCB0byBhbGxvdzpcbiAgICAvLyBleDogXCJ2aWV3Lm5hbWVAZm9vLmJhclwiICwgXCJeLl4udmlldy5uYW1lXCIgLCBcInZpZXcubmFtZUBeLl5cIiAsIFwiXCIgLFxuICAgIC8vIFwiQFwiICwgXCIkZGVmYXVsdEBeXCIgLCBcIiEkZGVmYXVsdC4kZGVmYXVsdFwiICwgXCIhZm9vLmJhclwiXG4gICAgY29uc3Qgdmlld0F0Q29udGV4dDogc3RyaW5nW10gPSByYXdWaWV3TmFtZS5zcGxpdCgnQCcpO1xuICAgIGxldCB1aVZpZXdOYW1lID0gdmlld0F0Q29udGV4dFswXSB8fCAnJGRlZmF1bHQnOyAvLyBkZWZhdWx0IHRvIHVubmFtZWQgdmlld1xuICAgIGxldCB1aVZpZXdDb250ZXh0QW5jaG9yID0gaXNTdHJpbmcodmlld0F0Q29udGV4dFsxXSkgPyB2aWV3QXRDb250ZXh0WzFdIDogJ14nOyAvLyBkZWZhdWx0IHRvIHBhcmVudCBjb250ZXh0XG5cbiAgICAvLyBIYW5kbGUgcmVsYXRpdmUgdmlldy1uYW1lIHN1Z2FyIHN5bnRheC5cbiAgICAvLyBNYXRjaGVzIHJhd1ZpZXdOYW1lIFwiXi5eLl4uZm9vLmJhclwiIGludG8gYXJyYXk6IFtcIl4uXi5eLmZvby5iYXJcIiwgXCJeLl4uXlwiLCBcImZvby5iYXJcIl0sXG4gICAgY29uc3QgcmVsYXRpdmVWaWV3TmFtZVN1Z2FyID0gL14oXFxeKD86XFwuXFxeKSopXFwuKC4qJCkvLmV4ZWModWlWaWV3TmFtZSk7XG4gICAgaWYgKHJlbGF0aXZlVmlld05hbWVTdWdhcikge1xuICAgICAgLy8gQ2xvYmJlcnMgZXhpc3RpbmcgY29udGV4dEFuY2hvciAocmF3Vmlld05hbWUgdmFsaWRhdGlvbiB3aWxsIGZpeCB0aGlzKVxuICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9IHJlbGF0aXZlVmlld05hbWVTdWdhclsxXTsgLy8gc2V0IGFuY2hvciB0byBcIl4uXi5eXCJcbiAgICAgIHVpVmlld05hbWUgPSByZWxhdGl2ZVZpZXdOYW1lU3VnYXJbMl07IC8vIHNldCB2aWV3LW5hbWUgdG8gXCJmb28uYmFyXCJcbiAgICB9XG5cbiAgICBpZiAodWlWaWV3TmFtZS5jaGFyQXQoMCkgPT09ICchJykge1xuICAgICAgdWlWaWV3TmFtZSA9IHVpVmlld05hbWUuc3Vic3RyKDEpO1xuICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9ICcnOyAvLyB0YXJnZXQgYWJzb2x1dGVseSBmcm9tIHJvb3RcbiAgICB9XG5cbiAgICAvLyBoYW5kbGUgcGFyZW50IHJlbGF0aXZlIHRhcmdldGluZyBcIl4uXi5eXCJcbiAgICBjb25zdCByZWxhdGl2ZU1hdGNoID0gL14oXFxeKD86XFwuXFxeKSopJC87XG4gICAgaWYgKHJlbGF0aXZlTWF0Y2guZXhlYyh1aVZpZXdDb250ZXh0QW5jaG9yKSkge1xuICAgICAgY29uc3QgYW5jaG9yU3RhdGUgPSB1aVZpZXdDb250ZXh0QW5jaG9yLnNwbGl0KCcuJykucmVkdWNlKChhbmNob3IsIHgpID0+IGFuY2hvci5wYXJlbnQsIGNvbnRleHQpO1xuICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9IGFuY2hvclN0YXRlLm5hbWU7XG4gICAgfSBlbHNlIGlmICh1aVZpZXdDb250ZXh0QW5jaG9yID09PSAnLicpIHtcbiAgICAgIHVpVmlld0NvbnRleHRBbmNob3IgPSBjb250ZXh0Lm5hbWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgdWlWaWV3TmFtZSwgdWlWaWV3Q29udGV4dEFuY2hvciB9O1xuICB9XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgY29uc3RydWN0b3IoLyoqIEBoaWRkZW4gKi8gcHJpdmF0ZSByb3V0ZXI6IFVJUm91dGVyKSB7fVxuXG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX3Jvb3RWaWV3Q29udGV4dChjb250ZXh0PzogVmlld0NvbnRleHQpOiBWaWV3Q29udGV4dCB7XG4gICAgcmV0dXJuICh0aGlzLl9yb290Q29udGV4dCA9IGNvbnRleHQgfHwgdGhpcy5fcm9vdENvbnRleHQpO1xuICB9XG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX3ZpZXdDb25maWdGYWN0b3J5KHZpZXdUeXBlOiBzdHJpbmcsIGZhY3Rvcnk6IFZpZXdDb25maWdGYWN0b3J5KSB7XG4gICAgdGhpcy5fdmlld0NvbmZpZ0ZhY3Rvcmllc1t2aWV3VHlwZV0gPSBmYWN0b3J5O1xuICB9XG5cbiAgY3JlYXRlVmlld0NvbmZpZyhwYXRoOiBQYXRoTm9kZVtdLCBkZWNsOiBfVmlld0RlY2xhcmF0aW9uKTogVmlld0NvbmZpZ1tdIHtcbiAgICBjb25zdCBjZmdGYWN0b3J5ID0gdGhpcy5fdmlld0NvbmZpZ0ZhY3Rvcmllc1tkZWNsLiR0eXBlXTtcbiAgICBpZiAoIWNmZ0ZhY3RvcnkpIHRocm93IG5ldyBFcnJvcignVmlld1NlcnZpY2U6IE5vIHZpZXcgY29uZmlnIGZhY3RvcnkgcmVnaXN0ZXJlZCBmb3IgdHlwZSAnICsgZGVjbC4kdHlwZSk7XG4gICAgY29uc3QgY2ZncyA9IGNmZ0ZhY3RvcnkocGF0aCwgZGVjbCk7XG4gICAgcmV0dXJuIGlzQXJyYXkoY2ZncykgPyBjZmdzIDogW2NmZ3NdO1xuICB9XG5cbiAgLyoqXG4gICAqIERlYWN0aXZhdGVzIGEgVmlld0NvbmZpZy5cbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbiBkZWFjdGl2YXRlcyBhIGBWaWV3Q29uZmlnYC5cbiAgICogQWZ0ZXIgY2FsbGluZyBbW3N5bmNdXSwgaXQgd2lsbCB1bi1wYWlyIGZyb20gYW55IGB1aS12aWV3YCB3aXRoIHdoaWNoIGl0IGlzIGN1cnJlbnRseSBwYWlyZWQuXG4gICAqXG4gICAqIEBwYXJhbSB2aWV3Q29uZmlnIFRoZSBWaWV3Q29uZmlnIHZpZXcgdG8gZGVyZWdpc3Rlci5cbiAgICovXG4gIGRlYWN0aXZhdGVWaWV3Q29uZmlnKHZpZXdDb25maWc6IFZpZXdDb25maWcpIHtcbiAgICB0cmFjZS50cmFjZVZpZXdTZXJ2aWNlRXZlbnQoJzwtIFJlbW92aW5nJywgdmlld0NvbmZpZyk7XG4gICAgcmVtb3ZlRnJvbSh0aGlzLl92aWV3Q29uZmlncywgdmlld0NvbmZpZyk7XG4gIH1cblxuICBhY3RpdmF0ZVZpZXdDb25maWcodmlld0NvbmZpZzogVmlld0NvbmZpZykge1xuICAgIHRyYWNlLnRyYWNlVmlld1NlcnZpY2VFdmVudCgnLT4gUmVnaXN0ZXJpbmcnLCA8YW55PnZpZXdDb25maWcpO1xuICAgIHRoaXMuX3ZpZXdDb25maWdzLnB1c2godmlld0NvbmZpZyk7XG4gIH1cblxuICBzeW5jKCkge1xuICAgIGNvbnN0IHVpVmlld3NCeUZxbjogVHlwZWRNYXA8QWN0aXZlVUlWaWV3PiA9IHRoaXMuX3VpVmlld3MubWFwKHVpdiA9PiBbdWl2LmZxbiwgdWl2XSkucmVkdWNlKGFwcGx5UGFpcnMsIDxhbnk+e30pO1xuXG4gICAgLy8gUmV0dXJuIGEgd2VpZ2h0ZWQgZGVwdGggdmFsdWUgZm9yIGEgdWlWaWV3LlxuICAgIC8vIFRoZSBkZXB0aCBpcyB0aGUgbmVzdGluZyBkZXB0aCBvZiB1aS12aWV3cyAoYmFzZWQgb24gRlFOOyB0aW1lcyAxMCwwMDApXG4gICAgLy8gcGx1cyB0aGUgZGVwdGggb2YgdGhlIHN0YXRlIHRoYXQgaXMgcG9wdWxhdGluZyB0aGUgdWlWaWV3XG4gICAgZnVuY3Rpb24gdWlWaWV3RGVwdGgodWlWaWV3OiBBY3RpdmVVSVZpZXcpIHtcbiAgICAgIGNvbnN0IHN0YXRlRGVwdGggPSAoY29udGV4dDogVmlld0NvbnRleHQpID0+IChjb250ZXh0ICYmIGNvbnRleHQucGFyZW50ID8gc3RhdGVEZXB0aChjb250ZXh0LnBhcmVudCkgKyAxIDogMSk7XG4gICAgICByZXR1cm4gdWlWaWV3LmZxbi5zcGxpdCgnLicpLmxlbmd0aCAqIDEwMDAwICsgc3RhdGVEZXB0aCh1aVZpZXcuY3JlYXRpb25Db250ZXh0KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIFZpZXdDb25maWcncyBjb250ZXh0J3MgZGVwdGggaW4gdGhlIGNvbnRleHQgdHJlZS5cbiAgICBmdW5jdGlvbiB2aWV3Q29uZmlnRGVwdGgoY29uZmlnOiBWaWV3Q29uZmlnKSB7XG4gICAgICBsZXQgY29udGV4dDogVmlld0NvbnRleHQgPSBjb25maWcudmlld0RlY2wuJGNvbnRleHQsXG4gICAgICAgIGNvdW50ID0gMDtcbiAgICAgIHdoaWxlICgrK2NvdW50ICYmIGNvbnRleHQucGFyZW50KSBjb250ZXh0ID0gY29udGV4dC5wYXJlbnQ7XG4gICAgICByZXR1cm4gY291bnQ7XG4gICAgfVxuXG4gICAgLy8gR2l2ZW4gYSBkZXB0aCBmdW5jdGlvbiwgcmV0dXJucyBhIGNvbXBhcmUgZnVuY3Rpb24gd2hpY2ggY2FuIHJldHVybiBlaXRoZXIgYXNjZW5kaW5nIG9yIGRlc2NlbmRpbmcgb3JkZXJcbiAgICBjb25zdCBkZXB0aENvbXBhcmUgPSBjdXJyeSgoZGVwdGhGbiwgcG9zTmVnLCBsZWZ0LCByaWdodCkgPT4gcG9zTmVnICogKGRlcHRoRm4obGVmdCkgLSBkZXB0aEZuKHJpZ2h0KSkpO1xuXG4gICAgY29uc3QgbWF0Y2hpbmdDb25maWdQYWlyID0gKHVpVmlldzogQWN0aXZlVUlWaWV3KTogVmlld1R1cGxlID0+IHtcbiAgICAgIGNvbnN0IG1hdGNoaW5nQ29uZmlncyA9IHRoaXMuX3ZpZXdDb25maWdzLmZpbHRlcihWaWV3U2VydmljZS5tYXRjaGVzKHVpVmlld3NCeUZxbiwgdWlWaWV3KSk7XG4gICAgICBpZiAobWF0Y2hpbmdDb25maWdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBPSy4gIENoaWxkIHN0YXRlcyBjYW4gdGFyZ2V0IGEgdWktdmlldyB0aGF0IHRoZSBwYXJlbnQgc3RhdGUgYWxzbyB0YXJnZXRzICh0aGUgY2hpbGQgd2lucylcbiAgICAgICAgLy8gU29ydCBieSBkZXB0aCBhbmQgcmV0dXJuIHRoZSBtYXRjaCBmcm9tIHRoZSBkZWVwZXN0IGNoaWxkXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBNdWx0aXBsZSBtYXRjaGluZyB2aWV3IGNvbmZpZ3MgZm9yICR7dWlWaWV3LmZxbn1gLCBtYXRjaGluZ0NvbmZpZ3MpO1xuICAgICAgICBtYXRjaGluZ0NvbmZpZ3Muc29ydChkZXB0aENvbXBhcmUodmlld0NvbmZpZ0RlcHRoLCAtMSkpOyAvLyBkZXNjZW5kaW5nXG4gICAgICB9XG4gICAgICByZXR1cm4geyB1aVZpZXcsIHZpZXdDb25maWc6IG1hdGNoaW5nQ29uZmlnc1swXSB9O1xuICAgIH07XG5cbiAgICBjb25zdCBjb25maWd1cmVVSVZpZXcgPSAodHVwbGU6IFZpZXdUdXBsZSkgPT4ge1xuICAgICAgLy8gSWYgYSBwYXJlbnQgdWktdmlldyBpcyByZWNvbmZpZ3VyZWQsIGl0IGNvdWxkIGRlc3Ryb3kgY2hpbGQgdWktdmlld3MuXG4gICAgICAvLyBCZWZvcmUgY29uZmlndXJpbmcgYSBjaGlsZCB1aS12aWV3LCBtYWtlIHN1cmUgaXQncyBzdGlsbCBpbiB0aGUgYWN0aXZlIHVpVmlld3MgYXJyYXkuXG4gICAgICBpZiAodGhpcy5fdWlWaWV3cy5pbmRleE9mKHR1cGxlLnVpVmlldykgIT09IC0xKSB0dXBsZS51aVZpZXcuY29uZmlnVXBkYXRlZCh0dXBsZS52aWV3Q29uZmlnKTtcbiAgICB9O1xuXG4gICAgLy8gU29ydCB2aWV3cyBieSBGUU4gYW5kIHN0YXRlIGRlcHRoLiBQcm9jZXNzIHVpdmlld3MgbmVhcmVzdCB0aGUgcm9vdCBmaXJzdC5cbiAgICBjb25zdCB1aVZpZXdUdXBsZXMgPSB0aGlzLl91aVZpZXdzLnNvcnQoZGVwdGhDb21wYXJlKHVpVmlld0RlcHRoLCAxKSkubWFwKG1hdGNoaW5nQ29uZmlnUGFpcik7XG4gICAgY29uc3QgbWF0Y2hlZFZpZXdDb25maWdzID0gdWlWaWV3VHVwbGVzLm1hcCh0dXBsZSA9PiB0dXBsZS52aWV3Q29uZmlnKTtcbiAgICBjb25zdCB1bm1hdGNoZWRDb25maWdUdXBsZXMgPSB0aGlzLl92aWV3Q29uZmlnc1xuICAgICAgLmZpbHRlcihjb25maWcgPT4gIWluQXJyYXkobWF0Y2hlZFZpZXdDb25maWdzLCBjb25maWcpKVxuICAgICAgLm1hcCh2aWV3Q29uZmlnID0+ICh7IHVpVmlldzogdW5kZWZpbmVkLCB2aWV3Q29uZmlnIH0pKTtcblxuICAgIHVpVmlld1R1cGxlcy5mb3JFYWNoKGNvbmZpZ3VyZVVJVmlldyk7XG5cbiAgICBjb25zdCBhbGxUdXBsZXM6IFZpZXdUdXBsZVtdID0gdWlWaWV3VHVwbGVzLmNvbmNhdCh1bm1hdGNoZWRDb25maWdUdXBsZXMpO1xuICAgIHRoaXMuX2xpc3RlbmVycy5mb3JFYWNoKGNiID0+IGNiKGFsbFR1cGxlcykpO1xuICAgIHRyYWNlLnRyYWNlVmlld1N5bmMoYWxsVHVwbGVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBgdWktdmlld2AgY29tcG9uZW50XG4gICAqXG4gICAqIFdoZW4gYSBgdWktdmlld2AgY29tcG9uZW50IGlzIGNyZWF0ZWQsIGl0IHVzZXMgdGhpcyBtZXRob2QgdG8gcmVnaXN0ZXIgaXRzZWxmLlxuICAgKiBBZnRlciByZWdpc3RyYXRpb24gdGhlIFtbc3luY11dIG1ldGhvZCBpcyB1c2VkIHRvIGVuc3VyZSBhbGwgYHVpLXZpZXdgIGFyZSBjb25maWd1cmVkIHdpdGggdGhlIHByb3BlciBbW1ZpZXdDb25maWddXS5cbiAgICpcbiAgICogTm90ZTogdGhlIGB1aS12aWV3YCBjb21wb25lbnQgdXNlcyB0aGUgYFZpZXdDb25maWdgIHRvIGRldGVybWluZSB3aGF0IHZpZXcgc2hvdWxkIGJlIGxvYWRlZCBpbnNpZGUgdGhlIGB1aS12aWV3YCxcbiAgICogYW5kIHdoYXQgdGhlIHZpZXcncyBzdGF0ZSBjb250ZXh0IGlzLlxuICAgKlxuICAgKiBOb3RlOiBUaGVyZSBpcyBubyBjb3JyZXNwb25kaW5nIGBkZXJlZ2lzdGVyVUlWaWV3YC5cbiAgICogICAgICAgQSBgdWktdmlld2Agc2hvdWxkIGhhbmcgb24gdG8gdGhlIHJldHVybiB2YWx1ZSBvZiBgcmVnaXN0ZXJVSVZpZXdgIGFuZCBpbnZva2UgaXQgdG8gZGVyZWdpc3RlciBpdHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB1aVZpZXcgVGhlIG1ldGFkYXRhIGZvciBhIFVJVmlld1xuICAgKiBAcmV0dXJuIGEgZGUtcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIHVzZWQgd2hlbiB0aGUgdmlldyBpcyBkZXN0cm95ZWQuXG4gICAqL1xuICByZWdpc3RlclVJVmlldyh1aVZpZXc6IEFjdGl2ZVVJVmlldykge1xuICAgIHRyYWNlLnRyYWNlVmlld1NlcnZpY2VVSVZpZXdFdmVudCgnLT4gUmVnaXN0ZXJpbmcnLCB1aVZpZXcpO1xuICAgIGNvbnN0IHVpVmlld3MgPSB0aGlzLl91aVZpZXdzO1xuICAgIGNvbnN0IGZxbkFuZFR5cGVNYXRjaGVzID0gKHVpdjogQWN0aXZlVUlWaWV3KSA9PiB1aXYuZnFuID09PSB1aVZpZXcuZnFuICYmIHVpdi4kdHlwZSA9PT0gdWlWaWV3LiR0eXBlO1xuICAgIGlmICh1aVZpZXdzLmZpbHRlcihmcW5BbmRUeXBlTWF0Y2hlcykubGVuZ3RoKVxuICAgICAgdHJhY2UudHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50KCchISEhIGR1cGxpY2F0ZSB1aVZpZXcgbmFtZWQ6JywgdWlWaWV3KTtcblxuICAgIHVpVmlld3MucHVzaCh1aVZpZXcpO1xuICAgIHRoaXMuc3luYygpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IGlkeCA9IHVpVmlld3MuaW5kZXhPZih1aVZpZXcpO1xuICAgICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgICAgdHJhY2UudHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50KCdUcmllZCByZW1vdmluZyBub24tcmVnaXN0ZXJlZCB1aVZpZXcnLCB1aVZpZXcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0cmFjZS50cmFjZVZpZXdTZXJ2aWNlVUlWaWV3RXZlbnQoJzwtIERlcmVnaXN0ZXJpbmcnLCB1aVZpZXcpO1xuICAgICAgcmVtb3ZlRnJvbSh1aVZpZXdzKSh1aVZpZXcpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbGlzdCBvZiB2aWV3cyBjdXJyZW50bHkgYXZhaWxhYmxlIG9uIHRoZSBwYWdlLCBieSBmdWxseS1xdWFsaWZpZWQgbmFtZS5cbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgZnVsbHktcXVhbGlmaWVkIHZpZXcgbmFtZXMuXG4gICAqL1xuICBhdmFpbGFibGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VpVmlld3MubWFwKHByb3AoJ2ZxbicpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIHZpZXdzIG9uIHRoZSBwYWdlIGNvbnRhaW5pbmcgbG9hZGVkIGNvbnRlbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIGZ1bGx5LXF1YWxpZmllZCB2aWV3IG5hbWVzLlxuICAgKi9cbiAgYWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLl91aVZpZXdzLmZpbHRlcihwcm9wKCckY29uZmlnJykpLm1hcChwcm9wKCduYW1lJykpO1xuICB9XG59XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIGNvcmUgKi8gLyoqICovXG5pbXBvcnQgeyBTdGF0ZVBhcmFtcyB9IGZyb20gJy4vcGFyYW1zL3N0YXRlUGFyYW1zJztcbmltcG9ydCB7IFN0YXRlRGVjbGFyYXRpb24gfSBmcm9tICcuL3N0YXRlL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4vc3RhdGUvc3RhdGVPYmplY3QnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4vdHJhbnNpdGlvbi90cmFuc2l0aW9uJztcbmltcG9ydCB7IFF1ZXVlIH0gZnJvbSAnLi9jb21tb24vcXVldWUnO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJy4vaW50ZXJmYWNlJztcblxuLyoqXG4gKiBHbG9iYWwgcm91dGVyIHN0YXRlXG4gKlxuICogVGhpcyBpcyB3aGVyZSB3ZSBob2xkIHRoZSBnbG9iYWwgbXV0YWJsZSBzdGF0ZSBzdWNoIGFzIGN1cnJlbnQgc3RhdGUsIGN1cnJlbnRcbiAqIHBhcmFtcywgY3VycmVudCB0cmFuc2l0aW9uLCBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBVSVJvdXRlckdsb2JhbHMgaW1wbGVtZW50cyBEaXNwb3NhYmxlIHtcbiAgLyoqXG4gICAqIEN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlc1xuICAgKlxuICAgKiBUaGUgcGFyYW1ldGVyIHZhbHVlcyBmcm9tIHRoZSBsYXRlc3Qgc3VjY2Vzc2Z1bCB0cmFuc2l0aW9uXG4gICAqL1xuICBwYXJhbXM6IFN0YXRlUGFyYW1zID0gbmV3IFN0YXRlUGFyYW1zKCk7XG5cbiAgLyoqXG4gICAqIEN1cnJlbnQgc3RhdGVcbiAgICpcbiAgICogVGhlIHRvLXN0YXRlIGZyb20gdGhlIGxhdGVzdCBzdWNjZXNzZnVsIHRyYW5zaXRpb25cbiAgICovXG4gIGN1cnJlbnQ6IFN0YXRlRGVjbGFyYXRpb247XG5cbiAgLyoqXG4gICAqIEN1cnJlbnQgc3RhdGUgKGludGVybmFsIG9iamVjdClcbiAgICpcbiAgICogVGhlIHRvLXN0YXRlIGZyb20gdGhlIGxhdGVzdCBzdWNjZXNzZnVsIHRyYW5zaXRpb25cbiAgICogQGludGVybmFsYXBpXG4gICAqL1xuICAkY3VycmVudDogU3RhdGVPYmplY3Q7XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHN0YXJ0ZWQvcnVubmluZyB0cmFuc2l0aW9uLlxuICAgKiBUaGlzIHRyYW5zaXRpb24gaGFzIHJlYWNoZWQgYXQgbGVhc3QgdGhlIG9uU3RhcnQgcGhhc2UsIGJ1dCBpcyBub3QgeWV0IGNvbXBsZXRlXG4gICAqL1xuICB0cmFuc2l0aW9uOiBUcmFuc2l0aW9uO1xuXG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgbGFzdFN0YXJ0ZWRUcmFuc2l0aW9uSWQgPSAtMTtcblxuICAvKiogQGludGVybmFsYXBpICovXG4gIHRyYW5zaXRpb25IaXN0b3J5ID0gbmV3IFF1ZXVlPFRyYW5zaXRpb24+KFtdLCAxKTtcblxuICAvKiogQGludGVybmFsYXBpICovXG4gIHN1Y2Nlc3NmdWxUcmFuc2l0aW9ucyA9IG5ldyBRdWV1ZTxUcmFuc2l0aW9uPihbXSwgMSk7XG5cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLnRyYW5zaXRpb25IaXN0b3J5LmNsZWFyKCk7XG4gICAgdGhpcy5zdWNjZXNzZnVsVHJhbnNpdGlvbnMuY2xlYXIoKTtcbiAgICB0aGlzLnRyYW5zaXRpb24gPSBudWxsO1xuICB9XG59XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIHVybCAqLyAvKiogKi9cbmltcG9ydCB7IFVJUm91dGVyIH0gZnJvbSAnLi4vcm91dGVyJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgTWF0Y2hlclVybFJ1bGUsIFVybFJ1bGUsIFVybFJ1bGVIYW5kbGVyRm4sIFVybFJ1bGVNYXRjaEZuLCBVcmxSdWxlc0FwaSB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IFRhcmdldFN0YXRlLCBUYXJnZXRTdGF0ZURlZiB9IGZyb20gJy4uL3N0YXRlJztcbmltcG9ydCB7IFVybE1hdGNoZXIgfSBmcm9tICcuL3VybE1hdGNoZXInO1xuaW1wb3J0IHsgaXMsIGlzRGVmaW5lZCwgaXNGdW5jdGlvbiwgaXNTdHJpbmcsIHJlbW92ZUZyb20sIHZhbCB9IGZyb20gJy4uL2NvbW1vbic7XG5pbXBvcnQgeyBVcmxSdWxlRmFjdG9yeSB9IGZyb20gJy4vdXJsUnVsZSc7XG5cbi8qKiBAaGlkZGVuICovXG5jb25zdCBwcmlvcml0eVNvcnQgPSAoYTogVXJsUnVsZSwgYjogVXJsUnVsZSkgPT4gKGIucHJpb3JpdHkgfHwgMCkgLSAoYS5wcmlvcml0eSB8fCAwKTtcblxuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IHR5cGVTb3J0ID0gKGE6IFVybFJ1bGUsIGI6IFVybFJ1bGUpID0+IHtcbiAgY29uc3Qgd2VpZ2h0cyA9IHsgU1RBVEU6IDQsIFVSTE1BVENIRVI6IDQsIFJFR0VYUDogMywgUkFXOiAyLCBPVEhFUjogMSB9O1xuICByZXR1cm4gKHdlaWdodHNbYS50eXBlXSB8fCAwKSAtICh3ZWlnaHRzW2IudHlwZV0gfHwgMCk7XG59O1xuXG4vKiogQGhpZGRlbiAqL1xuY29uc3QgdXJsTWF0Y2hlclNvcnQgPSAoYTogTWF0Y2hlclVybFJ1bGUsIGI6IE1hdGNoZXJVcmxSdWxlKSA9PlxuICAhYS51cmxNYXRjaGVyIHx8ICFiLnVybE1hdGNoZXIgPyAwIDogVXJsTWF0Y2hlci5jb21wYXJlKGEudXJsTWF0Y2hlciwgYi51cmxNYXRjaGVyKTtcblxuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IGlkU29ydCA9IChhOiBVcmxSdWxlLCBiOiBVcmxSdWxlKSA9PiB7XG4gIC8vIElkZW50aWNhbGx5IHNvcnRlZCBTVEFURSBhbmQgVVJMTUFUQ0hFUiBiZXN0IHJ1bGUgd2lsbCBiZSBjaG9zZW4gYnkgYG1hdGNoUHJpb3JpdHlgIGFmdGVyIGVhY2ggcnVsZSBtYXRjaGVzIHRoZSBVUkxcbiAgY29uc3QgdXNlTWF0Y2hQcmlvcml0eSA9IHsgU1RBVEU6IHRydWUsIFVSTE1BVENIRVI6IHRydWUgfTtcbiAgY29uc3QgZXF1YWwgPSB1c2VNYXRjaFByaW9yaXR5W2EudHlwZV0gJiYgdXNlTWF0Y2hQcmlvcml0eVtiLnR5cGVdO1xuICByZXR1cm4gZXF1YWwgPyAwIDogKGEuJGlkIHx8IDApIC0gKGIuJGlkIHx8IDApO1xufTtcblxuLyoqXG4gKiBEZWZhdWx0IHJ1bGUgcHJpb3JpdHkgc29ydGluZyBmdW5jdGlvbi5cbiAqXG4gKiBTb3J0cyBydWxlcyBieTpcbiAqXG4gKiAtIEV4cGxpY2l0IHByaW9yaXR5IChzZXQgcnVsZSBwcmlvcml0eSB1c2luZyBbW1VybFJ1bGVzLndoZW5dXSlcbiAqIC0gUnVsZSB0eXBlIChTVEFURTogNCwgVVJMTUFUQ0hFUjogNCwgUkVHRVhQOiAzLCBSQVc6IDIsIE9USEVSOiAxKVxuICogLSBgVXJsTWF0Y2hlcmAgc3BlY2lmaWNpdHkgKFtbVXJsTWF0Y2hlci5jb21wYXJlXV0pOiB3b3JrcyBmb3IgU1RBVEUgYW5kIFVSTE1BVENIRVIgdHlwZXMgdG8gcGljayB0aGUgbW9zdCBzcGVjaWZpYyBydWxlLlxuICogLSBSdWxlIHJlZ2lzdHJhdGlvbiBvcmRlciAoZm9yIHJ1bGUgdHlwZXMgb3RoZXIgdGhhbiBTVEFURSBhbmQgVVJMTUFUQ0hFUilcbiAqICAgLSBFcXVhbGx5IHNvcnRlZCBTdGF0ZSBhbmQgVXJsTWF0Y2hlciBydWxlcyB3aWxsIGVhY2ggbWF0Y2ggdGhlIFVSTC5cbiAqICAgICBUaGVuLCB0aGUgKmJlc3QqIG1hdGNoIGlzIGNob3NlbiBiYXNlZCBvbiBob3cgbWFueSBwYXJhbWV0ZXIgdmFsdWVzIHdlcmUgbWF0Y2hlZC5cbiAqXG4gKiBAcHVibGljYXBpXG4gKi9cbmxldCBkZWZhdWx0UnVsZVNvcnRGbjogKGE6IFVybFJ1bGUsIGI6IFVybFJ1bGUpID0+IG51bWJlcjtcbmRlZmF1bHRSdWxlU29ydEZuID0gKGEsIGIpID0+IHtcbiAgbGV0IGNtcCA9IHByaW9yaXR5U29ydChhLCBiKTtcbiAgaWYgKGNtcCAhPT0gMCkgcmV0dXJuIGNtcDtcblxuICBjbXAgPSB0eXBlU29ydChhLCBiKTtcbiAgaWYgKGNtcCAhPT0gMCkgcmV0dXJuIGNtcDtcblxuICBjbXAgPSB1cmxNYXRjaGVyU29ydChhIGFzIE1hdGNoZXJVcmxSdWxlLCBiIGFzIE1hdGNoZXJVcmxSdWxlKTtcbiAgaWYgKGNtcCAhPT0gMCkgcmV0dXJuIGNtcDtcblxuICByZXR1cm4gaWRTb3J0KGEsIGIpO1xufTtcblxuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIGdldEhhbmRsZXJGbihoYW5kbGVyOiBzdHJpbmcgfCBVcmxSdWxlSGFuZGxlckZuIHwgVGFyZ2V0U3RhdGUgfCBUYXJnZXRTdGF0ZURlZik6IFVybFJ1bGVIYW5kbGVyRm4ge1xuICBpZiAoIWlzRnVuY3Rpb24oaGFuZGxlcikgJiYgIWlzU3RyaW5nKGhhbmRsZXIpICYmICFpcyhUYXJnZXRTdGF0ZSkoaGFuZGxlcikgJiYgIVRhcmdldFN0YXRlLmlzRGVmKGhhbmRsZXIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiJ2hhbmRsZXInIG11c3QgYmUgYSBzdHJpbmcsIGZ1bmN0aW9uLCBUYXJnZXRTdGF0ZSwgb3IgaGF2ZSBhIHN0YXRlOiAnbmV3dGFyZ2V0JyBwcm9wZXJ0eVwiKTtcbiAgfVxuICByZXR1cm4gaXNGdW5jdGlvbihoYW5kbGVyKSA/IChoYW5kbGVyIGFzIFVybFJ1bGVIYW5kbGVyRm4pIDogdmFsKGhhbmRsZXIpO1xufVxuXG4vKipcbiAqIEFQSSBmb3IgbWFuYWdpbmcgVVJMIHJ1bGVzXG4gKlxuICogVGhpcyBBUEkgaXMgdXNlZCB0byBjcmVhdGUgYW5kIG1hbmFnZSBVUkwgcnVsZXMuXG4gKiBVUkwgcnVsZXMgYXJlIGEgbWVjaGFuaXNtIHRvIHJlc3BvbmQgdG8gc3BlY2lmaWMgVVJMIHBhdHRlcm5zLlxuICpcbiAqIFRoZSBtb3N0IGNvbW1vbmx5IHVzZWQgbWV0aG9kcyBhcmUgW1tvdGhlcndpc2VdXSBhbmQgW1t3aGVuXV0uXG4gKlxuICogVGhpcyBBUEkgaXMgYSBwcm9wZXJ0eSBvZiBbW1VybFNlcnZpY2VdXSBhcyBbW1VybFNlcnZpY2UucnVsZXNdXVxuICpcbiAqIEBwdWJsaWNhcGlcbiAqL1xuZXhwb3J0IGNsYXNzIFVybFJ1bGVzIGltcGxlbWVudHMgRGlzcG9zYWJsZSB7XG4gIC8qKiB1c2VkIHRvIGNyZWF0ZSBbW1VybFJ1bGVdXSBvYmplY3RzIGZvciBjb21tb24gY2FzZXMgKi9cbiAgcHVibGljIHVybFJ1bGVGYWN0b3J5OiBVcmxSdWxlRmFjdG9yeTtcblxuICAvKiogQGhpZGRlbiAqLyBwcml2YXRlIF9zb3J0Rm4gPSBkZWZhdWx0UnVsZVNvcnRGbjtcbiAgLyoqIEBoaWRkZW4gKi8gcHJpdmF0ZSBfb3RoZXJ3aXNlRm46IFVybFJ1bGU7XG4gIC8qKiBAaGlkZGVuICovIHByaXZhdGUgX3NvcnRlZDogYm9vbGVhbjtcbiAgLyoqIEBoaWRkZW4gKi8gcHJpdmF0ZSBfcnVsZXM6IFVybFJ1bGVbXSA9IFtdO1xuICAvKiogQGhpZGRlbiAqLyBwcml2YXRlIF9pZCA9IDA7XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgY29uc3RydWN0b3IoLyoqIEBoaWRkZW4gKi8gcHJpdmF0ZSByb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgdGhpcy51cmxSdWxlRmFjdG9yeSA9IG5ldyBVcmxSdWxlRmFjdG9yeShyb3V0ZXIpO1xuICB9XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgcHVibGljIGRpc3Bvc2Uocm91dGVyPzogVUlSb3V0ZXIpIHtcbiAgICB0aGlzLl9ydWxlcyA9IFtdO1xuICAgIGRlbGV0ZSB0aGlzLl9vdGhlcndpc2VGbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWZpbmVzIHRoZSBpbml0aWFsIHN0YXRlLCBwYXRoLCBvciBiZWhhdmlvciB0byB1c2Ugd2hlbiB0aGUgYXBwIHN0YXJ0cy5cbiAgICpcbiAgICogVGhpcyBydWxlIGRlZmluZXMgdGhlIGluaXRpYWwvc3RhcnRpbmcgc3RhdGUgZm9yIHRoZSBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICogVGhpcyBydWxlIGlzIHRyaWdnZXJlZCB0aGUgZmlyc3QgdGltZSB0aGUgVVJMIGlzIGNoZWNrZWQgKHdoZW4gdGhlIGFwcCBpbml0aWFsbHkgbG9hZHMpLlxuICAgKiBUaGUgcnVsZSBpcyB0cmlnZ2VyZWQgb25seSB3aGVuIHRoZSB1cmwgbWF0Y2hlcyBlaXRoZXIgYFwiXCJgIG9yIGBcIi9cImAuXG4gICAqXG4gICAqIE5vdGU6IFRoZSBydWxlIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgd2hlbiB0aGUgcm9vdCBvZiB0aGUgYXBwbGljYXRpb24gaXMgZGlyZWN0bHkgbGlua2VkIHRvLlxuICAgKiBXaGVuIHRoZSBVUkwgaXMgKm5vdCogYFwiXCJgIG9yIGBcIi9cImAgYW5kIGRvZXNuJ3QgbWF0Y2ggb3RoZXIgcnVsZXMsIHRoZSBbW290aGVyd2lzZV1dIHJ1bGUgaXMgdHJpZ2dlcmVkLlxuICAgKiBUaGlzIGFsbG93cyA0MDQtbGlrZSBiZWhhdmlvciB3aGVuIGFuIHVua25vd24gVVJMIGlzIGRlZXAtbGlua2VkLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIFN0YXJ0IGFwcCBhdCBgaG9tZWAgc3RhdGUuXG4gICAqIGBgYGpzXG4gICAqIC5pbml0aWFsKHsgc3RhdGU6ICdob21lJyB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogU3RhcnQgYXBwIGF0IGAvaG9tZWAgKGJ5IHVybClcbiAgICogYGBganNcbiAgICogLmluaXRpYWwoJy9ob21lJyk7XG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIFdoZW4gbm8gb3RoZXIgdXJsIHJ1bGUgbWF0Y2hlcywgZ28gdG8gYGhvbWVgIHN0YXRlXG4gICAqIGBgYGpzXG4gICAqIC5pbml0aWFsKChtYXRjaFZhbHVlLCB1cmwsIHJvdXRlcikgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKCdpbml0aWFsIHN0YXRlJyk7XG4gICAqICAgcmV0dXJuIHsgc3RhdGU6ICdob21lJyB9O1xuICAgKiB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGhhbmRsZXIgVGhlIGluaXRpYWwgc3RhdGUgb3IgdXJsIHBhdGgsIG9yIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGUgc3RhdGUgb3IgdXJsIHBhdGggKG9yIHBlcmZvcm1zIGN1c3RvbSBsb2dpYykuXG4gICAqL1xuICBwdWJsaWMgaW5pdGlhbChoYW5kbGVyOiBzdHJpbmcgfCBVcmxSdWxlSGFuZGxlckZuIHwgVGFyZ2V0U3RhdGUgfCBUYXJnZXRTdGF0ZURlZikge1xuICAgIGNvbnN0IGhhbmRsZXJGbjogVXJsUnVsZUhhbmRsZXJGbiA9IGdldEhhbmRsZXJGbihoYW5kbGVyKTtcbiAgICBjb25zdCBtYXRjaEZuOiBVcmxSdWxlTWF0Y2hGbiA9ICh1cmxQYXJ0cywgcm91dGVyKSA9PlxuICAgICAgcm91dGVyLmdsb2JhbHMudHJhbnNpdGlvbkhpc3Rvcnkuc2l6ZSgpID09PSAwICYmICEhL15cXC8/JC8uZXhlYyh1cmxQYXJ0cy5wYXRoKTtcblxuICAgIHRoaXMucnVsZSh0aGlzLnVybFJ1bGVGYWN0b3J5LmNyZWF0ZShtYXRjaEZuLCBoYW5kbGVyRm4pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWZpbmVzIHRoZSBzdGF0ZSwgdXJsLCBvciBiZWhhdmlvciB0byB1c2Ugd2hlbiBubyBvdGhlciBydWxlIG1hdGNoZXMgdGhlIFVSTC5cbiAgICpcbiAgICogVGhpcyBydWxlIGlzIG1hdGNoZWQgd2hlbiAqbm8gb3RoZXIgcnVsZSogbWF0Y2hlcy5cbiAgICogSXQgaXMgZ2VuZXJhbGx5IHVzZWQgdG8gaGFuZGxlIHVua25vd24gVVJMcyAoc2ltaWxhciB0byBcIjQwNFwiIGJlaGF2aW9yLCBidXQgb24gdGhlIGNsaWVudCBzaWRlKS5cbiAgICpcbiAgICogLSBJZiBgaGFuZGxlcmAgYSBzdHJpbmcsIGl0IGlzIHRyZWF0ZWQgYXMgYSB1cmwgcmVkaXJlY3RcbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBXaGVuIG5vIG90aGVyIHVybCBydWxlIG1hdGNoZXMsIHJlZGlyZWN0IHRvIGAvaW5kZXhgXG4gICAqIGBgYGpzXG4gICAqIC5vdGhlcndpc2UoJy9pbmRleCcpO1xuICAgKiBgYGBcbiAgICpcbiAgICogLSBJZiBgaGFuZGxlcmAgaXMgYW4gb2JqZWN0IHdpdGggYSBgc3RhdGVgIHByb3BlcnR5LCB0aGUgc3RhdGUgaXMgYWN0aXZhdGVkLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIFdoZW4gbm8gb3RoZXIgdXJsIHJ1bGUgbWF0Y2hlcywgcmVkaXJlY3QgdG8gYGhvbWVgIGFuZCBwcm92aWRlIGEgYGRhc2hib2FyZGAgcGFyYW1ldGVyIHZhbHVlLlxuICAgKiBgYGBqc1xuICAgKiAub3RoZXJ3aXNlKHsgc3RhdGU6ICdob21lJywgcGFyYW1zOiB7IGRhc2hib2FyZDogJ2RlZmF1bHQnIH0gfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiAtIElmIGBoYW5kbGVyYCBpcyBhIGZ1bmN0aW9uLCB0aGUgZnVuY3Rpb24gcmVjZWl2ZXMgdGhlIGN1cnJlbnQgdXJsIChbW1VybFBhcnRzXV0pIGFuZCB0aGUgW1tVSVJvdXRlcl1dIG9iamVjdC5cbiAgICogICBUaGUgZnVuY3Rpb24gY2FuIHBlcmZvcm0gYWN0aW9ucywgYW5kL29yIHJldHVybiBhIHZhbHVlLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIFdoZW4gbm8gb3RoZXIgdXJsIHJ1bGUgbWF0Y2hlcywgbWFudWFsbHkgdHJpZ2dlciBhIHRyYW5zaXRpb24gdG8gdGhlIGBob21lYCBzdGF0ZVxuICAgKiBgYGBqc1xuICAgKiAub3RoZXJ3aXNlKChtYXRjaFZhbHVlLCB1cmxQYXJ0cywgcm91dGVyKSA9PiB7XG4gICAqICAgcm91dGVyLnN0YXRlU2VydmljZS5nbygnaG9tZScpO1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogV2hlbiBubyBvdGhlciB1cmwgcnVsZSBtYXRjaGVzLCBnbyB0byBgaG9tZWAgc3RhdGVcbiAgICogYGBganNcbiAgICogLm90aGVyd2lzZSgobWF0Y2hWYWx1ZSwgdXJsUGFydHMsIHJvdXRlcikgPT4ge1xuICAgKiAgIHJldHVybiB7IHN0YXRlOiAnaG9tZScgfTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gaGFuZGxlciBUaGUgdXJsIHBhdGggdG8gcmVkaXJlY3QgdG8sIG9yIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGUgdXJsIHBhdGggKG9yIHBlcmZvcm1zIGN1c3RvbSBsb2dpYykuXG4gICAqL1xuICBwdWJsaWMgb3RoZXJ3aXNlKGhhbmRsZXI6IHN0cmluZyB8IFVybFJ1bGVIYW5kbGVyRm4gfCBUYXJnZXRTdGF0ZSB8IFRhcmdldFN0YXRlRGVmKSB7XG4gICAgY29uc3QgaGFuZGxlckZuOiBVcmxSdWxlSGFuZGxlckZuID0gZ2V0SGFuZGxlckZuKGhhbmRsZXIpO1xuXG4gICAgdGhpcy5fb3RoZXJ3aXNlRm4gPSB0aGlzLnVybFJ1bGVGYWN0b3J5LmNyZWF0ZSh2YWwodHJ1ZSksIGhhbmRsZXJGbik7XG4gICAgdGhpcy5fc29ydGVkID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGEgcnVsZSBwcmV2aW91c2x5IHJlZ2lzdGVyZWRcbiAgICpcbiAgICogQHBhcmFtIHJ1bGUgdGhlIG1hdGNoZXIgcnVsZSB0aGF0IHdhcyBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgdXNpbmcgW1tydWxlXV1cbiAgICovXG4gIHB1YmxpYyByZW1vdmVSdWxlKHJ1bGUpOiB2b2lkIHtcbiAgICByZW1vdmVGcm9tKHRoaXMuX3J1bGVzLCBydWxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYW51YWxseSBhZGRzIGEgVVJMIFJ1bGUuXG4gICAqXG4gICAqIFVzdWFsbHksIGEgdXJsIHJ1bGUgaXMgYWRkZWQgdXNpbmcgW1tTdGF0ZURlY2xhcmF0aW9uLnVybF1dIG9yIFtbd2hlbl1dLlxuICAgKiBUaGlzIGFwaSBjYW4gYmUgdXNlZCBkaXJlY3RseSBmb3IgbW9yZSBjb250cm9sICh0byByZWdpc3RlciBhIFtbQmFzZVVybFJ1bGVdXSwgZm9yIGV4YW1wbGUpLlxuICAgKiBSdWxlcyBjYW4gYmUgY3JlYXRlZCB1c2luZyBbW3VybFJ1bGVGYWN0b3J5XV0sIG9yIGNyZWF0ZWQgbWFudWFsbHkgYXMgc2ltcGxlIG9iamVjdHMuXG4gICAqXG4gICAqIEEgcnVsZSBzaG91bGQgaGF2ZSBhIGBtYXRjaGAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0cnV0aHkgaWYgdGhlIHJ1bGUgbWF0Y2hlZC5cbiAgICogSXQgc2hvdWxkIGFsc28gaGF2ZSBhIGBoYW5kbGVyYCBmdW5jdGlvbiB3aGljaCBpcyBpbnZva2VkIGlmIHRoZSBydWxlIGlzIHRoZSBiZXN0IG1hdGNoLlxuICAgKlxuICAgKiBAcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCBkZXJlZ2lzdGVycyB0aGUgcnVsZVxuICAgKi9cbiAgcHVibGljIHJ1bGUocnVsZTogVXJsUnVsZSk6IEZ1bmN0aW9uIHtcbiAgICBpZiAoIVVybFJ1bGVGYWN0b3J5LmlzVXJsUnVsZShydWxlKSkgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHJ1bGUnKTtcbiAgICBydWxlLiRpZCA9IHRoaXMuX2lkKys7XG4gICAgcnVsZS5wcmlvcml0eSA9IHJ1bGUucHJpb3JpdHkgfHwgMDtcblxuICAgIHRoaXMuX3J1bGVzLnB1c2gocnVsZSk7XG4gICAgdGhpcy5fc29ydGVkID0gZmFsc2U7XG5cbiAgICByZXR1cm4gKCkgPT4gdGhpcy5yZW1vdmVSdWxlKHJ1bGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYWxsIHJlZ2lzdGVyZWQgcnVsZXNcbiAgICpcbiAgICogQHJldHVybnMgYW4gYXJyYXkgb2YgYWxsIHRoZSByZWdpc3RlcmVkIHJ1bGVzXG4gICAqL1xuICBwdWJsaWMgcnVsZXMoKTogVXJsUnVsZVtdIHtcbiAgICB0aGlzLmVuc3VyZVNvcnRlZCgpO1xuICAgIHJldHVybiB0aGlzLl9ydWxlcy5jb25jYXQodGhpcy5fb3RoZXJ3aXNlRm4gPyBbdGhpcy5fb3RoZXJ3aXNlRm5dIDogW10pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlZmluZXMgVVJMIFJ1bGUgcHJpb3JpdGllc1xuICAgKlxuICAgKiBNb3JlIHRoYW4gb25lIHJ1bGUgKFtbVXJsUnVsZV1dKSBtaWdodCBtYXRjaCBhIGdpdmVuIFVSTC5cbiAgICogVGhpcyBgY29tcGFyZUZuYCBpcyB1c2VkIHRvIHNvcnQgdGhlIHJ1bGVzIGJ5IHByaW9yaXR5LlxuICAgKiBIaWdoZXIgcHJpb3JpdHkgcnVsZXMgc2hvdWxkIHNvcnQgZWFybGllci5cbiAgICpcbiAgICogVGhlIFtbZGVmYXVsdFJ1bGVTb3J0Rm5dXSBpcyB1c2VkIGJ5IGRlZmF1bHQuXG4gICAqXG4gICAqIFlvdSBvbmx5IG5lZWQgdG8gY2FsbCB0aGlzIGZ1bmN0aW9uIG9uY2UuXG4gICAqIFRoZSBgY29tcGFyZUZuYCB3aWxsIGJlIHVzZWQgdG8gc29ydCB0aGUgcnVsZXMgYXMgZWFjaCBpcyByZWdpc3RlcmVkLlxuICAgKlxuICAgKiBJZiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLCBpdCB3aWxsIHJlLXNvcnQgdGhlIHJ1bGVzLlxuICAgKlxuICAgKiAtLS1cbiAgICpcbiAgICogVXJsIHJ1bGVzIG1heSBjb21lIGZyb20gbXVsdGlwbGUgc291cmNlczogc3RhdGVzJ3MgdXJscyAoW1tTdGF0ZURlY2xhcmF0aW9uLnVybF1dKSwgW1t3aGVuXV0sIGFuZCBbW3J1bGVdXS5cbiAgICogRWFjaCBydWxlIGhhcyBhICh1c2VyLXByb3ZpZGVkKSBbW1VybFJ1bGUucHJpb3JpdHldXSwgYSBbW1VybFJ1bGUudHlwZV1dLCBhbmQgYSBbW1VybFJ1bGUuJGlkXV1cbiAgICogVGhlIGAkaWRgIGlzIGlzIHRoZSBvcmRlciBpbiB3aGljaCB0aGUgcnVsZSB3YXMgcmVnaXN0ZXJlZC5cbiAgICpcbiAgICogVGhlIHNvcnQgZnVuY3Rpb24gc2hvdWxkIHVzZSB0aGVzZSBkYXRhLCBvciBkYXRhIGZvdW5kIG9uIGEgc3BlY2lmaWMgdHlwZVxuICAgKiBvZiBbW1VybFJ1bGVdXSAoc3VjaCBhcyBbW1N0YXRlUnVsZS5zdGF0ZV1dKSwgdG8gb3JkZXIgdGhlIHJ1bGVzIGFzIGRlc2lyZWQuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogVGhpcyBjb21wYXJlIGZ1bmN0aW9uIHByaW9yaXRpemVzIHJ1bGVzIGJ5IHRoZSBvcmRlciBpbiB3aGljaCB0aGUgcnVsZXMgd2VyZSByZWdpc3RlcmVkLlxuICAgKiBBIHJ1bGUgcmVnaXN0ZXJlZCBlYXJsaWVyIGhhcyBoaWdoZXIgcHJpb3JpdHkuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGZ1bmN0aW9uIGNvbXBhcmVGbihhLCBiKSB7XG4gICAqICAgcmV0dXJuIGEuJGlkIC0gYi4kaWQ7XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBjb21wYXJlRm4gYSBmdW5jdGlvbiB0aGF0IGNvbXBhcmVzIHRvIFtbVXJsUnVsZV1dIG9iamVjdHMuXG4gICAqICAgIFRoZSBgY29tcGFyZUZuYCBzaG91bGQgYWJpZGUgYnkgdGhlIGBBcnJheS5zb3J0YCBjb21wYXJlIGZ1bmN0aW9uIHJ1bGVzLlxuICAgKiAgICBHaXZlbiB0d28gcnVsZXMsIGBhYCBhbmQgYGJgLCByZXR1cm4gYSBuZWdhdGl2ZSBudW1iZXIgaWYgYGFgIHNob3VsZCBiZSBoaWdoZXIgcHJpb3JpdHkuXG4gICAqICAgIFJldHVybiBhIHBvc2l0aXZlIG51bWJlciBpZiBgYmAgc2hvdWxkIGJlIGhpZ2hlciBwcmlvcml0eS5cbiAgICogICAgUmV0dXJuIGAwYCBpZiB0aGUgcnVsZXMgYXJlIGlkZW50aWNhbC5cbiAgICpcbiAgICogICAgU2VlIHRoZSBbbW96aWxsYSByZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L3NvcnQjRGVzY3JpcHRpb24pXG4gICAqICAgIGZvciBkZXRhaWxzLlxuICAgKi9cbiAgc29ydChjb21wYXJlRm4/OiAoYTogVXJsUnVsZSwgYjogVXJsUnVsZSkgPT4gbnVtYmVyKSB7XG4gICAgY29uc3Qgc29ydGVkID0gdGhpcy5zdGFibGVTb3J0KHRoaXMuX3J1bGVzLCAodGhpcy5fc29ydEZuID0gY29tcGFyZUZuIHx8IHRoaXMuX3NvcnRGbikpO1xuXG4gICAgLy8gcHJlY29tcHV0ZSBfc29ydEdyb3VwIHZhbHVlcyBhbmQgYXBwbHkgdG8gZWFjaCBydWxlXG4gICAgbGV0IGdyb3VwID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvcnRlZC5sZW5ndGg7IGkrKykge1xuICAgICAgc29ydGVkW2ldLl9ncm91cCA9IGdyb3VwO1xuICAgICAgaWYgKGkgPCBzb3J0ZWQubGVuZ3RoIC0gMSAmJiB0aGlzLl9zb3J0Rm4oc29ydGVkW2ldLCBzb3J0ZWRbaSArIDFdKSAhPT0gMCkge1xuICAgICAgICBncm91cCsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3J1bGVzID0gc29ydGVkO1xuICAgIHRoaXMuX3NvcnRlZCA9IHRydWU7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIGVuc3VyZVNvcnRlZCgpIHtcbiAgICB0aGlzLl9zb3J0ZWQgfHwgdGhpcy5zb3J0KCk7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIHN0YWJsZVNvcnQoYXJyLCBjb21wYXJlRm4pIHtcbiAgICBjb25zdCBhcnJPZldyYXBwZXIgPSBhcnIubWFwKChlbGVtLCBpZHgpID0+ICh7IGVsZW0sIGlkeCB9KSk7XG5cbiAgICBhcnJPZldyYXBwZXIuc29ydCgod3JhcHBlckEsIHdyYXBwZXJCKSA9PiB7XG4gICAgICBjb25zdCBjbXBEaWZmID0gY29tcGFyZUZuKHdyYXBwZXJBLmVsZW0sIHdyYXBwZXJCLmVsZW0pO1xuICAgICAgcmV0dXJuIGNtcERpZmYgPT09IDAgPyB3cmFwcGVyQS5pZHggLSB3cmFwcGVyQi5pZHggOiBjbXBEaWZmO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGFyck9mV3JhcHBlci5tYXAod3JhcHBlciA9PiB3cmFwcGVyLmVsZW0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGBtYXRjaGVyYCBhbmQgYGhhbmRsZXJgIGZvciBjdXN0b20gVVJMcyBoYW5kbGluZy5cbiAgICpcbiAgICogVGhlIGBtYXRjaGVyYCBjYW4gYmU6XG4gICAqXG4gICAqIC0gYSBbW1VybE1hdGNoZXJdXTogU2VlOiBbW1VybE1hdGNoZXJGYWN0b3J5LmNvbXBpbGVdXVxuICAgKiAtIGEgYHN0cmluZ2A6IFRoZSBzdHJpbmcgaXMgY29tcGlsZWQgdG8gYSBbW1VybE1hdGNoZXJdXVxuICAgKiAtIGEgYFJlZ0V4cGA6IFRoZSByZWdleHAgaXMgdXNlZCB0byBtYXRjaCB0aGUgdXJsLlxuICAgKlxuICAgKiBUaGUgYGhhbmRsZXJgIGNhbiBiZTpcbiAgICpcbiAgICogLSBhIHN0cmluZzogVGhlIHVybCBpcyByZWRpcmVjdGVkIHRvIHRoZSB2YWx1ZSBvZiB0aGUgc3RyaW5nLlxuICAgKiAtIGEgZnVuY3Rpb246IFRoZSB1cmwgaXMgcmVkaXJlY3RlZCB0byB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbi5cbiAgICpcbiAgICogLS0tXG4gICAqXG4gICAqIFdoZW4gdGhlIGBoYW5kbGVyYCBpcyBhIGBzdHJpbmdgIGFuZCB0aGUgYG1hdGNoZXJgIGlzIGEgYFVybE1hdGNoZXJgIChvciBzdHJpbmcpLCB0aGUgcmVkaXJlY3RcbiAgICogc3RyaW5nIGlzIGludGVycG9sYXRlZCB3aXRoIHBhcmFtZXRlciB2YWx1ZXMuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogV2hlbiB0aGUgVVJMIGlzIGAvZm9vLzEyM2AgdGhlIHJ1bGUgd2lsbCByZWRpcmVjdCB0byBgL2Jhci8xMjNgLlxuICAgKiBgYGBqc1xuICAgKiAud2hlbihcIi9mb28vOnBhcmFtMVwiLCBcIi9iYXIvOnBhcmFtMVwiKVxuICAgKiBgYGBcbiAgICpcbiAgICogLS0tXG4gICAqXG4gICAqIFdoZW4gdGhlIGBoYW5kbGVyYCBpcyBhIHN0cmluZyBhbmQgdGhlIGBtYXRjaGVyYCBpcyBhIGBSZWdFeHBgLCB0aGUgcmVkaXJlY3Qgc3RyaW5nIGlzXG4gICAqIGludGVycG9sYXRlZCB3aXRoIGNhcHR1cmUgZ3JvdXBzIGZyb20gdGhlIFJlZ0V4cC5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBXaGVuIHRoZSBVUkwgaXMgYC9mb28vMTIzYCB0aGUgcnVsZSB3aWxsIHJlZGlyZWN0IHRvIGAvYmFyLzEyM2AuXG4gICAqIGBgYGpzXG4gICAqIC53aGVuKG5ldyBSZWdFeHAoXCJeL2Zvby8oLiopJFwiKSwgXCIvYmFyLyQxXCIpO1xuICAgKiBgYGBcbiAgICpcbiAgICogLS0tXG4gICAqXG4gICAqIFdoZW4gdGhlIGhhbmRsZXIgaXMgYSBmdW5jdGlvbiwgaXQgcmVjZWl2ZXMgdGhlIG1hdGNoZWQgdmFsdWUsIHRoZSBjdXJyZW50IFVSTCwgYW5kIHRoZSBgVUlSb3V0ZXJgIG9iamVjdCAoU2VlIFtbVXJsUnVsZUhhbmRsZXJGbl1dKS5cbiAgICogVGhlIFwibWF0Y2hlZCB2YWx1ZVwiIGRpZmZlcnMgYmFzZWQgb24gdGhlIGBtYXRjaGVyYC5cbiAgICogRm9yIFtbVXJsTWF0Y2hlcl1dcywgaXQgd2lsbCBiZSB0aGUgbWF0Y2hlZCBzdGF0ZSBwYXJhbXMuXG4gICAqIEZvciBgUmVnRXhwYCwgaXQgd2lsbCBiZSB0aGUgbWF0Y2ggYXJyYXkgZnJvbSBgcmVnZXhwLmV4ZWMoKWAuXG4gICAqXG4gICAqIElmIHRoZSBoYW5kbGVyIHJldHVybnMgYSBzdHJpbmcsIHRoZSBVUkwgaXMgcmVkaXJlY3RlZCB0byB0aGUgc3RyaW5nLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIFdoZW4gdGhlIFVSTCBpcyBgL2Zvby8xMjNgIHRoZSBydWxlIHdpbGwgcmVkaXJlY3QgdG8gYC9iYXIvMTIzYC5cbiAgICogYGBganNcbiAgICogLndoZW4obmV3IFJlZ0V4cChcIl4vZm9vLyguKikkXCIpLCBtYXRjaCA9PiBcIi9iYXIvXCIgKyBtYXRjaFsxXSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBOb3RlOiB0aGUgYGhhbmRsZXJgIG1heSBhbHNvIGludm9rZSBhcmJpdHJhcnkgY29kZSwgc3VjaCBhcyBgJHN0YXRlLmdvKClgXG4gICAqXG4gICAqIEBwYXJhbSBtYXRjaGVyIEEgcGF0dGVybiBgc3RyaW5nYCB0byBtYXRjaCwgY29tcGlsZWQgYXMgYSBbW1VybE1hdGNoZXJdXSwgb3IgYSBgUmVnRXhwYC5cbiAgICogQHBhcmFtIGhhbmRsZXIgVGhlIHBhdGggdG8gcmVkaXJlY3QgdG8sIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBwYXRoLlxuICAgKiBAcGFyYW0gb3B0aW9ucyBgeyBwcmlvcml0eTogbnVtYmVyIH1gXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIHJlZ2lzdGVyZWQgW1tVcmxSdWxlXV1cbiAgICovXG4gIHB1YmxpYyB3aGVuKFxuICAgIG1hdGNoZXI6IFJlZ0V4cCB8IFVybE1hdGNoZXIgfCBzdHJpbmcsXG4gICAgaGFuZGxlcjogc3RyaW5nIHwgVXJsUnVsZUhhbmRsZXJGbixcbiAgICBvcHRpb25zPzogeyBwcmlvcml0eTogbnVtYmVyIH1cbiAgKTogVXJsUnVsZSB7XG4gICAgY29uc3QgcnVsZSA9IHRoaXMudXJsUnVsZUZhY3RvcnkuY3JlYXRlKG1hdGNoZXIsIGhhbmRsZXIpO1xuICAgIGlmIChpc0RlZmluZWQob3B0aW9ucyAmJiBvcHRpb25zLnByaW9yaXR5KSkgcnVsZS5wcmlvcml0eSA9IG9wdGlvbnMucHJpb3JpdHk7XG4gICAgdGhpcy5ydWxlKHJ1bGUpO1xuICAgIHJldHVybiBydWxlO1xuICB9XG59XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIHVybCAqLyAvKiogKi9cbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVUlSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuaW1wb3J0IHsgUGFyYW1UeXBlRGVmaW5pdGlvbiwgUGFyYW1UeXBlcyB9IGZyb20gJy4uL3BhcmFtcyc7XG5pbXBvcnQgeyBpc0RlZmluZWQsIGlzU3RyaW5nIH0gZnJvbSAnLi4vY29tbW9uJztcblxuLyoqXG4gKiBBbiBBUEkgdG8gY3VzdG9taXplIHRoZSBVUkwgYmVoYXZpb3IgYW5kIHJldHJpZXZlIFVSTCBjb25maWd1cmF0aW9uXG4gKlxuICogVGhpcyBBUEkgaXMgdXNlZCB0byBjdXN0b21pemUgdGhlIGJlaGF2aW9yIG9mIHRoZSBVUkwuXG4gKiBUaGlzIGluY2x1ZGVzIG9wdGlvbmFsIHRyYWlsaW5nIHNsYXNoZXMgKFtbc3RyaWN0TW9kZV1dKSwgY2FzZSBzZW5zaXRpdml0eSAoW1tjYXNlSW5zZW5zaXRpdmVdXSksXG4gKiBhbmQgY3VzdG9tIHBhcmFtZXRlciBlbmNvZGluZyAoY3VzdG9tIFtbdHlwZV1dKS5cbiAqXG4gKiBJdCBhbHNvIGhhcyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbG9jYXRpb24gKHVybCkgY29uZmlndXJhdGlvbiBzdWNoIGFzIFtbcG9ydF1dIGFuZCBbW2Jhc2VIcmVmXV0uXG4gKiBUaGlzIGluZm9ybWF0aW9uIGNhbiBiZSB1c2VkIHRvIGJ1aWxkIGFic29sdXRlIFVSTHMsIHN1Y2ggYXNcbiAqIGBodHRwczovL2V4YW1wbGUuY29tOjQ0My9iYXNlcGF0aC9zdGF0ZS9zdWJzdGF0ZT9wYXJhbTE9YSNoYXNodmFsdWVgO1xuICpcbiAqIFRoaXMgQVBJIGlzIGEgcHJvcGVydHkgb2YgW1tVcmxTZXJ2aWNlXV0gYXMgW1tVcmxTZXJ2aWNlLmNvbmZpZ11dLlxuICovXG5leHBvcnQgY2xhc3MgVXJsQ29uZmlnIGltcGxlbWVudHMgRGlzcG9zYWJsZSB7XG4gIC8qKiBAaGlkZGVuICovIHBhcmFtVHlwZXMgPSBuZXcgUGFyYW1UeXBlcygpO1xuICAvKiogQGhpZGRlbiAqLyBfaXNDYXNlSW5zZW5zaXRpdmUgPSBmYWxzZTtcbiAgLyoqIEBoaWRkZW4gKi8gX2lzU3RyaWN0TW9kZSA9IHRydWU7XG4gIC8qKiBAaGlkZGVuICovIF9kZWZhdWx0U3F1YXNoUG9saWN5OiBib29sZWFuIHwgc3RyaW5nID0gZmFsc2U7XG5cbiAgLyoqIEBoaWRkZW4gKi8gY29uc3RydWN0b3IoLyoqIEBoaWRkZW4gKi8gcHJpdmF0ZSByb3V0ZXI6IFVJUm91dGVyKSB7fVxuICAvKiogQGludGVybmFsYXBpICovIHB1YmxpYyBkaXNwb3NlID0gKCkgPT4gdGhpcy5wYXJhbVR5cGVzLmRpc3Bvc2UoKTtcblxuICAvLyBEZWxlZ2F0ZSB0aGVzZSBjYWxscyB0byB0aGUgY3VycmVudCBMb2NhdGlvbkNvbmZpZyBpbXBsZW1lbnRhdGlvblxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBiYXNlIEhyZWYsIGUuZy4sIGBodHRwOi8vbG9jYWxob3N0L2FwcHJvb3QvYFxuICAgKlxuICAgKiBAcmV0dXJuIHRoZSBhcHBsaWNhdGlvbidzIGJhc2UgaHJlZlxuICAgKi9cbiAgcHVibGljIGJhc2VIcmVmID0gKCk6IHN0cmluZyA9PiB0aGlzLnJvdXRlci5sb2NhdGlvbkNvbmZpZy5iYXNlSHJlZigpO1xuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIGhhc2hQcmVmaXhcbiAgICpcbiAgICogVGhpcyBvbmx5IGFwcGxpZXMgd2hlbiBub3QgcnVubmluZyBpbiBbW2h0bWw1TW9kZV1dIChwdXNoc3RhdGUgbW9kZSlcbiAgICpcbiAgICogSWYgdGhlIGN1cnJlbnQgdXJsIGlzIGBodHRwOi8vbG9jYWxob3N0L2FwcCMhL3Vpcm91dGVyL3BhdGgvI2FuY2hvcmAsIGl0IHJldHVybnMgYCFgIHdoaWNoIGlzIHRoZSBwcmVmaXggZm9yIHRoZSBcImhhc2hiYW5nXCIgcG9ydGlvbi5cbiAgICpcbiAgICogQHJldHVybiB0aGUgaGFzaCBwcmVmaXhcbiAgICovXG5cbiAgcHVibGljIGhhc2hQcmVmaXggPSAobmV3cHJlZml4Pzogc3RyaW5nKTogc3RyaW5nID0+IHRoaXMucm91dGVyLmxvY2F0aW9uQ29uZmlnLmhhc2hQcmVmaXgobmV3cHJlZml4KTtcbiAgLyoqXG4gICAqIEdldHMgdGhlIGhvc3QsIGUuZy4sIGBsb2NhbGhvc3RgXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIHByb3RvY29sXG4gICAqL1xuICBwdWJsaWMgaG9zdCA9ICgpOiBzdHJpbmcgPT4gdGhpcy5yb3V0ZXIubG9jYXRpb25Db25maWcuaG9zdCgpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgd2hlbiBydW5uaW5nIGluIHB1c2hzdGF0ZSBtb2RlXG4gICAqXG4gICAqIEByZXR1cm4gdHJ1ZSB3aGVuIHJ1bm5pbmcgaW4gaHRtbDUgbW9kZSAocHVzaHN0YXRlIG1vZGUpLlxuICAgKi9cbiAgcHVibGljIGh0bWw1TW9kZSA9ICgpOiBib29sZWFuID0+IHRoaXMucm91dGVyLmxvY2F0aW9uQ29uZmlnLmh0bWw1TW9kZSgpO1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwb3J0LCBlLmcuLCBgODBgXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIHBvcnQgbnVtYmVyXG4gICAqL1xuICBwdWJsaWMgcG9ydCA9ICgpOiBudW1iZXIgPT4gdGhpcy5yb3V0ZXIubG9jYXRpb25Db25maWcucG9ydCgpO1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwcm90b2NvbCwgZS5nLiwgYGh0dHBgXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIHByb3RvY29sXG4gICAqL1xuICBwdWJsaWMgcHJvdG9jb2wgPSAoKTogc3RyaW5nID0+IHRoaXMucm91dGVyLmxvY2F0aW9uQ29uZmlnLnByb3RvY29sKCk7XG5cbiAgLyoqXG4gICAqIERlZmluZXMgd2hldGhlciBVUkwgbWF0Y2hpbmcgc2hvdWxkIGJlIGNhc2Ugc2Vuc2l0aXZlICh0aGUgZGVmYXVsdCBiZWhhdmlvciksIG9yIG5vdC5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiAvLyBBbGxvdyBjYXNlIGluc2Vuc2l0aXZlIHVybCBtYXRjaGVzXG4gICAqIHVybFNlcnZpY2UuY29uZmlnLmNhc2VJbnNlbnNpdGl2ZSh0cnVlKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB2YWx1ZSBgZmFsc2VgIHRvIG1hdGNoIFVSTCBpbiBhIGNhc2Ugc2Vuc2l0aXZlIG1hbm5lcjsgb3RoZXJ3aXNlIGB0cnVlYDtcbiAgICogQHJldHVybnMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgY2FzZUluc2Vuc2l0aXZlXG4gICAqL1xuICBwdWJsaWMgY2FzZUluc2Vuc2l0aXZlKHZhbHVlPzogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5faXNDYXNlSW5zZW5zaXRpdmUgPSBpc0RlZmluZWQodmFsdWUpID8gdmFsdWUgOiB0aGlzLl9pc0Nhc2VJbnNlbnNpdGl2ZSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZGVmYXVsdCBiZWhhdmlvciB3aGVuIGdlbmVyYXRpbmcgb3IgbWF0Y2hpbmcgVVJMcyB3aXRoIGRlZmF1bHQgcGFyYW1ldGVyIHZhbHVlcy5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiAvLyBSZW1vdmUgZGVmYXVsdCBwYXJhbWV0ZXIgdmFsdWVzIGZyb20gdGhlIHVybFxuICAgKiB1cmxTZXJ2aWNlLmNvbmZpZy5kZWZhdWx0U3F1YXNoUG9saWN5KHRydWUpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHZhbHVlIEEgc3RyaW5nIHRoYXQgZGVmaW5lcyB0aGUgZGVmYXVsdCBwYXJhbWV0ZXIgVVJMIHNxdWFzaGluZyBiZWhhdmlvci5cbiAgICogICAgLSBgbm9zcXVhc2hgOiBXaGVuIGdlbmVyYXRpbmcgYW4gaHJlZiB3aXRoIGEgZGVmYXVsdCBwYXJhbWV0ZXIgdmFsdWUsIGRvIG5vdCBzcXVhc2ggdGhlIHBhcmFtZXRlciB2YWx1ZSBmcm9tIHRoZSBVUkxcbiAgICogICAgLSBgc2xhc2hgOiBXaGVuIGdlbmVyYXRpbmcgYW4gaHJlZiB3aXRoIGEgZGVmYXVsdCBwYXJhbWV0ZXIgdmFsdWUsIHNxdWFzaCAocmVtb3ZlKSB0aGUgcGFyYW1ldGVyIHZhbHVlLCBhbmQsIGlmIHRoZVxuICAgKiAgICAgIHBhcmFtZXRlciBpcyBzdXJyb3VuZGVkIGJ5IHNsYXNoZXMsIHNxdWFzaCAocmVtb3ZlKSBvbmUgc2xhc2ggZnJvbSB0aGUgVVJMXG4gICAqICAgIC0gYW55IG90aGVyIHN0cmluZywgZS5nLiBcIn5cIjogV2hlbiBnZW5lcmF0aW5nIGFuIGhyZWYgd2l0aCBhIGRlZmF1bHQgcGFyYW1ldGVyIHZhbHVlLCBzcXVhc2ggKHJlbW92ZSlcbiAgICogICAgICB0aGUgcGFyYW1ldGVyIHZhbHVlIGZyb20gdGhlIFVSTCBhbmQgcmVwbGFjZSBpdCB3aXRoIHRoaXMgc3RyaW5nLlxuICAgKiBAcmV0dXJucyB0aGUgY3VycmVudCB2YWx1ZSBvZiBkZWZhdWx0U3F1YXNoUG9saWN5XG4gICAqL1xuICBwdWJsaWMgZGVmYXVsdFNxdWFzaFBvbGljeSh2YWx1ZT86IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSAmJiB2YWx1ZSAhPT0gdHJ1ZSAmJiB2YWx1ZSAhPT0gZmFsc2UgJiYgIWlzU3RyaW5nKHZhbHVlKSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzcXVhc2ggcG9saWN5OiAke3ZhbHVlfS4gVmFsaWQgcG9saWNpZXM6IGZhbHNlLCB0cnVlLCBhcmJpdHJhcnktc3RyaW5nYCk7XG4gICAgcmV0dXJuICh0aGlzLl9kZWZhdWx0U3F1YXNoUG9saWN5ID0gaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogdGhpcy5fZGVmYXVsdFNxdWFzaFBvbGljeSk7XG4gIH1cblxuICAvKipcbiAgICogRGVmaW5lcyB3aGV0aGVyIFVSTHMgc2hvdWxkIG1hdGNoIHRyYWlsaW5nIHNsYXNoZXMsIG9yIG5vdCAodGhlIGRlZmF1bHQgYmVoYXZpb3IpLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIC8vIEFsbG93IG9wdGlvbmFsIHRyYWlsaW5nIHNsYXNoZXNcbiAgICogdXJsU2VydmljZS5jb25maWcuc3RyaWN0TW9kZShmYWxzZSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gdmFsdWUgYGZhbHNlYCB0byBtYXRjaCB0cmFpbGluZyBzbGFzaGVzIGluIFVSTHMsIG90aGVyd2lzZSBgdHJ1ZWAuXG4gICAqIEByZXR1cm5zIHRoZSBjdXJyZW50IHZhbHVlIG9mIHN0cmljdE1vZGVcbiAgICovXG4gIHB1YmxpYyBzdHJpY3RNb2RlKHZhbHVlPzogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5faXNTdHJpY3RNb2RlID0gaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogdGhpcy5faXNTdHJpY3RNb2RlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuZCByZWdpc3RlcnMgYSBjdXN0b20gW1tQYXJhbVR5cGVdXSBvYmplY3RcbiAgICpcbiAgICogQSBjdXN0b20gcGFyYW1ldGVyIHR5cGUgY2FuIGJlIHVzZWQgdG8gZ2VuZXJhdGUgVVJMcyB3aXRoIHR5cGVkIHBhcmFtZXRlcnMgb3IgY3VzdG9tIGVuY29kaW5nL2RlY29kaW5nLlxuICAgKlxuICAgKiAjIyMjIE5vdGU6IFJlZ2lzdGVyIGN1c3RvbSB0eXBlcyAqYmVmb3JlIHVzaW5nIHRoZW0qIGluIGEgc3RhdGUgZGVmaW5pdGlvbi5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiAvLyBFbmNvZGUgb2JqZWN0IHBhcmFtZXRlciBhcyBKU09OIHN0cmluZ1xuICAgKiB1cmxTZXJ2aWNlLmNvbmZpZy50eXBlKCdteWpzb24nLCB7XG4gICAqICAgZW5jb2RlOiAob2JqKSA9PiBKU09OLnN0cmluZ2lmeShvYmopLFxuICAgKiAgIGRlY29kZTogKHN0cikgPT4gSlNPTi5wYXJzZShzdHIpLFxuICAgKiAgIGlzOiAodmFsKSA9PiB0eXBlb2YodmFsKSA9PT0gJ29iamVjdCcsXG4gICAqICAgcGF0dGVybjogL1teL10rLyxcbiAgICogICBlcXVhbHM6IChhLCBiKSA9PiBfLmlzRXF1YWwoYSwgYiksXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogU2VlIFtbUGFyYW1UeXBlRGVmaW5pdGlvbl1dIGZvciBtb3JlIGV4YW1wbGVzXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIFRoZSB0eXBlIG5hbWUuXG4gICAqIEBwYXJhbSBkZWZpbml0aW9uIFRoZSB0eXBlIGRlZmluaXRpb24uIFNlZSBbW1BhcmFtVHlwZURlZmluaXRpb25dXSBmb3IgaW5mb3JtYXRpb24gb24gdGhlIHZhbHVlcyBhY2NlcHRlZC5cbiAgICogQHBhcmFtIGRlZmluaXRpb25GbiBBIGZ1bmN0aW9uIHRoYXQgaXMgaW5qZWN0ZWQgYmVmb3JlIHRoZSBhcHAgcnVudGltZSBzdGFydHMuXG4gICAqICAgICAgICBUaGUgcmVzdWx0IG9mIHRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIGEgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0uXG4gICAqICAgICAgICBUaGUgcmVzdWx0IGlzIG1lcmdlZCBpbnRvIHRoZSBleGlzdGluZyBgZGVmaW5pdGlvbmAuXG4gICAqICAgICAgICBTZWUgW1tQYXJhbVR5cGVdXSBmb3IgaW5mb3JtYXRpb24gb24gdGhlIHZhbHVlcyBhY2NlcHRlZC5cbiAgICpcbiAgICogQHJldHVybnMgaWYgb25seSB0aGUgYG5hbWVgIHBhcmFtZXRlciB3YXMgc3BlY2lmaWVkOiB0aGUgY3VycmVudGx5IHJlZ2lzdGVyZWQgW1tQYXJhbVR5cGVdXSBvYmplY3QsIG9yIHVuZGVmaW5lZFxuICAgKi9cbiAgdHlwZShuYW1lOiBzdHJpbmcsIGRlZmluaXRpb24/OiBQYXJhbVR5cGVEZWZpbml0aW9uLCBkZWZpbml0aW9uRm4/OiAoKSA9PiBQYXJhbVR5cGVEZWZpbml0aW9uKSB7XG4gICAgY29uc3QgdHlwZSA9IHRoaXMucGFyYW1UeXBlcy50eXBlKG5hbWUsIGRlZmluaXRpb24sIGRlZmluaXRpb25Gbik7XG4gICAgcmV0dXJuICFpc0RlZmluZWQoZGVmaW5pdGlvbikgPyB0eXBlIDogdGhpcztcbiAgfVxufVxuIiwiLyoqIEBwdWJsaWNhcGkgQG1vZHVsZSB1cmwgKi8gLyoqICovXG5pbXBvcnQgeyBVSVJvdXRlciB9IGZyb20gJy4uL3JvdXRlcic7XG5pbXBvcnQgeyBleHRlbmQsIGlzLCBpc1N0cmluZywgTG9jYXRpb25TZXJ2aWNlcywgcGF0dGVybiB9IGZyb20gJy4uL2NvbW1vbic7XG5pbXBvcnQgeyBNYXRjaFJlc3VsdCwgVXJsUGFydHMsIFVybFJ1bGUsIFVybFN5bmNBcGkgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBVcmxSdWxlcyB9IGZyb20gJy4vdXJsUnVsZXMnO1xuaW1wb3J0IHsgVXJsQ29uZmlnIH0gZnJvbSAnLi91cmxDb25maWcnO1xuaW1wb3J0IHsgVGFyZ2V0U3RhdGUsIFRhcmdldFN0YXRlRGVmIH0gZnJvbSAnLi4vc3RhdGUnO1xuXG4vKiogQVBJIGZvciBVUkwgbWFuYWdlbWVudCAqL1xuZXhwb3J0IGNsYXNzIFVybFNlcnZpY2UgaW1wbGVtZW50cyBMb2NhdGlvblNlcnZpY2VzLCBVcmxTeW5jQXBpIHtcbiAgLyoqIEBoaWRkZW4gKi8gcHJpdmF0ZSBfc3RvcExpc3RlbmluZ0ZuOiBGdW5jdGlvbjtcbiAgLyoqIEBoaWRkZW4gKi8gaW50ZXJjZXB0RGVmZXJyZWQgPSBmYWxzZTtcblxuICAvKipcbiAgICogVGhlIG5lc3RlZCBbW1VybFJ1bGVzXV0gQVBJIGZvciBtYW5hZ2luZyBVUkwgcnVsZXMgYW5kIHJld3JpdGVzXG4gICAqXG4gICAqIFNlZTogW1tVcmxSdWxlc11dIGZvciBkZXRhaWxzXG4gICAqL1xuICBwdWJsaWMgcnVsZXMgPSBuZXcgVXJsUnVsZXModGhpcy5yb3V0ZXIpO1xuXG4gIC8qKlxuICAgKiBUaGUgbmVzdGVkIFtbVXJsQ29uZmlnXV0gQVBJIHRvIGNvbmZpZ3VyZSB0aGUgVVJMIGFuZCByZXRyaWV2ZSBVUkwgaW5mb3JtYXRpb25cbiAgICpcbiAgICogU2VlOiBbW1VybENvbmZpZ11dIGZvciBkZXRhaWxzXG4gICAqL1xuICBwdWJsaWMgY29uZmlnID0gbmV3IFVybENvbmZpZyh0aGlzLnJvdXRlcik7XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgY29uc3RydWN0b3IoLyoqIEBoaWRkZW4gKi8gcHJpdmF0ZSByb3V0ZXI6IFVJUm91dGVyKSB7fVxuICAvKiogQGhpZGRlbiAqL1xuICBwdWJsaWMgZGlzcG9zZSgpIHtcbiAgICB0aGlzLmxpc3RlbihmYWxzZSk7XG4gICAgKHRoaXMucnVsZXMgYXMgVXJsUnVsZXMpLmRpc3Bvc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IFVSTCBwYXJ0c1xuICAgKlxuICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBkaWZmZXJlbnQgcGFydHMgb2YgdGhlIGN1cnJlbnQgVVJMICh0aGUgW1twYXRoXV0sIFtbc2VhcmNoXV0sIGFuZCBbW2hhc2hdXSkgYXMgYSBbW1VybFBhcnRzXV0gb2JqZWN0LlxuICAgKi9cbiAgcHVibGljIHBhcnRzKCk6IFVybFBhcnRzIHtcbiAgICByZXR1cm4geyBwYXRoOiB0aGlzLnBhdGgoKSwgc2VhcmNoOiB0aGlzLnNlYXJjaCgpLCBoYXNoOiB0aGlzLmhhc2goKSB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlcyB0aGUgYmVzdCBydWxlIGZvciB0aGUgY3VycmVudCBVUkxcbiAgICpcbiAgICogQ2hlY2tzIHRoZSBjdXJyZW50IFVSTCBmb3IgYSBtYXRjaGluZyBbW1VybFJ1bGVdXSwgdGhlbiBpbnZva2VzIHRoYXQgcnVsZSdzIGhhbmRsZXIuXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBpbnRlcm5hbGx5IGFueSB0aW1lIHRoZSBVUkwgaGFzIGNoYW5nZWQuXG4gICAqXG4gICAqIFRoaXMgZWZmZWN0aXZlbHkgYWN0aXZhdGVzIHRoZSBzdGF0ZSAob3IgcmVkaXJlY3QsIGV0Yykgd2hpY2ggbWF0Y2hlcyB0aGUgY3VycmVudCBVUkwuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogdXJsU2VydmljZS5kZWZlckludGVyY2VwdCgpO1xuICAgKlxuICAgKiBmZXRjaCgnL3N0YXRlcy5qc29uJykudGhlbihyZXNwID0+IHJlc3AuanNvbigpKS50aGVuKGRhdGEgPT4ge1xuICAgKiAgIGRhdGEuZm9yRWFjaChzdGF0ZSA9PiAkc3RhdGVSZWdpc3RyeS5yZWdpc3RlcihzdGF0ZSkpO1xuICAgKiAgIHVybFNlcnZpY2UubGlzdGVuKCk7XG4gICAqICAgLy8gRmluZCB0aGUgbWF0Y2hpbmcgVVJMIGFuZCBpbnZva2UgdGhlIGhhbmRsZXIuXG4gICAqICAgdXJsU2VydmljZS5zeW5jKCk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICovXG4gIHB1YmxpYyBzeW5jKGV2dD8pIHtcbiAgICBpZiAoZXZ0ICYmIGV2dC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG4gICAgY29uc3QgeyB1cmxTZXJ2aWNlLCBzdGF0ZVNlcnZpY2UgfSA9IHRoaXMucm91dGVyO1xuXG4gICAgY29uc3QgdXJsOiBVcmxQYXJ0cyA9IHsgcGF0aDogdXJsU2VydmljZS5wYXRoKCksIHNlYXJjaDogdXJsU2VydmljZS5zZWFyY2goKSwgaGFzaDogdXJsU2VydmljZS5oYXNoKCkgfTtcbiAgICBjb25zdCBiZXN0ID0gdGhpcy5tYXRjaCh1cmwpO1xuXG4gICAgY29uc3QgYXBwbHlSZXN1bHQgPSBwYXR0ZXJuKFtcbiAgICAgIFtpc1N0cmluZywgKG5ld3VybDogc3RyaW5nKSA9PiB1cmxTZXJ2aWNlLnVybChuZXd1cmwsIHRydWUpXSxcbiAgICAgIFtUYXJnZXRTdGF0ZS5pc0RlZiwgKGRlZjogVGFyZ2V0U3RhdGVEZWYpID0+IHN0YXRlU2VydmljZS5nbyhkZWYuc3RhdGUsIGRlZi5wYXJhbXMsIGRlZi5vcHRpb25zKV0sXG4gICAgICBbaXMoVGFyZ2V0U3RhdGUpLCAodGFyZ2V0OiBUYXJnZXRTdGF0ZSkgPT4gc3RhdGVTZXJ2aWNlLmdvKHRhcmdldC5zdGF0ZSgpLCB0YXJnZXQucGFyYW1zKCksIHRhcmdldC5vcHRpb25zKCkpXSxcbiAgICBdKTtcblxuICAgIGFwcGx5UmVzdWx0KGJlc3QgJiYgYmVzdC5ydWxlLmhhbmRsZXIoYmVzdC5tYXRjaCwgdXJsLCB0aGlzLnJvdXRlcikpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyBvciBzdG9wcyBsaXN0ZW5pbmcgZm9yIFVSTCBjaGFuZ2VzXG4gICAqXG4gICAqIENhbGwgdGhpcyBzb21ldGltZSBhZnRlciBjYWxsaW5nIFtbZGVmZXJJbnRlcmNlcHRdXSB0byBzdGFydCBtb25pdG9yaW5nIHRoZSB1cmwuXG4gICAqIFRoaXMgY2F1c2VzIFVJLVJvdXRlciB0byBzdGFydCBsaXN0ZW5pbmcgZm9yIGNoYW5nZXMgdG8gdGhlIFVSTCwgaWYgaXQgd2Fzbid0IGFscmVhZHkgbGlzdGVuaW5nLlxuICAgKlxuICAgKiBJZiBjYWxsZWQgd2l0aCBgZmFsc2VgLCBVSS1Sb3V0ZXIgd2lsbCBzdG9wIGxpc3RlbmluZyAoY2FsbCBsaXN0ZW4odHJ1ZSkgdG8gc3RhcnQgbGlzdGVuaW5nIGFnYWluKS5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiB1cmxTZXJ2aWNlLmRlZmVySW50ZXJjZXB0KCk7XG4gICAqXG4gICAqIGZldGNoKCcvc3RhdGVzLmpzb24nKS50aGVuKHJlc3AgPT4gcmVzcC5qc29uKCkpLnRoZW4oZGF0YSA9PiB7XG4gICAqICAgZGF0YS5mb3JFYWNoKHN0YXRlID0+ICRzdGF0ZVJlZ2lzdHJ5LnJlZ2lzdGVyKHN0YXRlKSk7XG4gICAqICAgLy8gU3RhcnQgcmVzcG9uZGluZyB0byBVUkwgY2hhbmdlc1xuICAgKiAgIHVybFNlcnZpY2UubGlzdGVuKCk7XG4gICAqICAgdXJsU2VydmljZS5zeW5jKCk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGVuYWJsZWQgYHRydWVgIG9yIGBmYWxzZWAgdG8gc3RhcnQgb3Igc3RvcCBsaXN0ZW5pbmcgdG8gVVJMIGNoYW5nZXNcbiAgICovXG4gIHB1YmxpYyBsaXN0ZW4oZW5hYmxlZD86IGJvb2xlYW4pOiBGdW5jdGlvbiB7XG4gICAgaWYgKGVuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLl9zdG9wTGlzdGVuaW5nRm4gJiYgdGhpcy5fc3RvcExpc3RlbmluZ0ZuKCk7XG4gICAgICBkZWxldGUgdGhpcy5fc3RvcExpc3RlbmluZ0ZuO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKHRoaXMuX3N0b3BMaXN0ZW5pbmdGbiA9IHRoaXMuX3N0b3BMaXN0ZW5pbmdGbiB8fCB0aGlzLnJvdXRlci51cmxTZXJ2aWNlLm9uQ2hhbmdlKGV2dCA9PiB0aGlzLnN5bmMoZXZ0KSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNhYmxlcyBtb25pdG9yaW5nIG9mIHRoZSBVUkwuXG4gICAqXG4gICAqIENhbGwgdGhpcyBtZXRob2QgYmVmb3JlIFVJLVJvdXRlciBoYXMgYm9vdHN0cmFwcGVkLlxuICAgKiBJdCB3aWxsIHN0b3AgVUktUm91dGVyIGZyb20gcGVyZm9ybWluZyB0aGUgaW5pdGlhbCB1cmwgc3luYy5cbiAgICpcbiAgICogVGhpcyBjYW4gYmUgdXNlZnVsIHRvIHBlcmZvcm0gc29tZSBhc3luY2hyb25vdXMgaW5pdGlhbGl6YXRpb24gYmVmb3JlIHRoZSByb3V0ZXIgc3RhcnRzLlxuICAgKiBPbmNlIHRoZSBpbml0aWFsaXphdGlvbiBpcyBjb21wbGV0ZSwgY2FsbCBbW2xpc3Rlbl1dIHRvIHRlbGwgVUktUm91dGVyIHRvIHN0YXJ0IHdhdGNoaW5nIGFuZCBzeW5jaHJvbml6aW5nIHRoZSBVUkwuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogLy8gUHJldmVudCBVSS1Sb3V0ZXIgZnJvbSBhdXRvbWF0aWNhbGx5IGludGVyY2VwdGluZyBVUkwgY2hhbmdlcyB3aGVuIGl0IHN0YXJ0cztcbiAgICogdXJsU2VydmljZS5kZWZlckludGVyY2VwdCgpO1xuICAgKlxuICAgKiBmZXRjaCgnL3N0YXRlcy5qc29uJykudGhlbihyZXNwID0+IHJlc3AuanNvbigpKS50aGVuKGRhdGEgPT4ge1xuICAgKiAgIGRhdGEuZm9yRWFjaChzdGF0ZSA9PiAkc3RhdGVSZWdpc3RyeS5yZWdpc3RlcihzdGF0ZSkpO1xuICAgKiAgIHVybFNlcnZpY2UubGlzdGVuKCk7XG4gICAqICAgdXJsU2VydmljZS5zeW5jKCk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGRlZmVyIEluZGljYXRlcyB3aGV0aGVyIHRvIGRlZmVyIGxvY2F0aW9uIGNoYW5nZSBpbnRlcmNlcHRpb24uXG4gICAqICAgICAgICBQYXNzaW5nIG5vIHBhcmFtZXRlciBpcyBlcXVpdmFsZW50IHRvIGB0cnVlYC5cbiAgICovXG4gIHB1YmxpYyBkZWZlckludGVyY2VwdChkZWZlcj86IGJvb2xlYW4pIHtcbiAgICBpZiAoZGVmZXIgPT09IHVuZGVmaW5lZCkgZGVmZXIgPSB0cnVlO1xuICAgIHRoaXMuaW50ZXJjZXB0RGVmZXJyZWQgPSBkZWZlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXRjaGVzIGEgVVJMXG4gICAqXG4gICAqIEdpdmVuIGEgVVJMIChhcyBhIFtbVXJsUGFydHNdXSBvYmplY3QpLCBjaGVjayBhbGwgcnVsZXMgYW5kIGRldGVybWluZSB0aGUgYmVzdCBtYXRjaGluZyBydWxlLlxuICAgKiBSZXR1cm4gdGhlIHJlc3VsdCBhcyBhIFtbTWF0Y2hSZXN1bHRdXS5cbiAgICovXG4gIHB1YmxpYyBtYXRjaCh1cmw6IFVybFBhcnRzKTogTWF0Y2hSZXN1bHQge1xuICAgIHVybCA9IGV4dGVuZCh7IHBhdGg6ICcnLCBzZWFyY2g6IHt9LCBoYXNoOiAnJyB9LCB1cmwpO1xuICAgIGNvbnN0IHJ1bGVzID0gdGhpcy5ydWxlcy5ydWxlcygpO1xuXG4gICAgLy8gQ2hlY2tzIGEgc2luZ2xlIHJ1bGUuIFJldHVybnMgeyBydWxlOiBydWxlLCBtYXRjaDogbWF0Y2gsIHdlaWdodDogd2VpZ2h0IH0gaWYgaXQgbWF0Y2hlZCwgb3IgdW5kZWZpbmVkXG4gICAgY29uc3QgY2hlY2tSdWxlID0gKHJ1bGU6IFVybFJ1bGUpOiBNYXRjaFJlc3VsdCA9PiB7XG4gICAgICBjb25zdCBtYXRjaCA9IHJ1bGUubWF0Y2godXJsLCB0aGlzLnJvdXRlcik7XG4gICAgICByZXR1cm4gbWF0Y2ggJiYgeyBtYXRjaCwgcnVsZSwgd2VpZ2h0OiBydWxlLm1hdGNoUHJpb3JpdHkobWF0Y2gpIH07XG4gICAgfTtcblxuICAgIC8vIFRoZSBydWxlcyBhcmUgcHJlLXNvcnRlZC5cbiAgICAvLyAtIEZpbmQgdGhlIGZpcnN0IG1hdGNoaW5nIHJ1bGUuXG4gICAgLy8gLSBGaW5kIGFueSBvdGhlciBtYXRjaGluZyBydWxlIHRoYXQgc29ydGVkICpleGFjdGx5IHRoZSBzYW1lKiwgYWNjb3JkaW5nIHRvIGAuc29ydCgpYC5cbiAgICAvLyAtIENob29zZSB0aGUgcnVsZSB3aXRoIHRoZSBoaWdoZXN0IG1hdGNoIHdlaWdodC5cbiAgICBsZXQgYmVzdDogTWF0Y2hSZXN1bHQ7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gU3RvcCB3aGVuIHRoZXJlIGlzIGEgJ2Jlc3QnIHJ1bGUgYW5kIHRoZSBuZXh0IHJ1bGUgc29ydHMgZGlmZmVyZW50bHkgdGhhbiBpdC5cbiAgICAgIGlmIChiZXN0ICYmIGJlc3QucnVsZS5fZ3JvdXAgIT09IHJ1bGVzW2ldLl9ncm91cCkgYnJlYWs7XG5cbiAgICAgIGNvbnN0IGN1cnJlbnQgPSBjaGVja1J1bGUocnVsZXNbaV0pO1xuICAgICAgLy8gUGljayB0aGUgYmVzdCBNYXRjaFJlc3VsdFxuICAgICAgYmVzdCA9ICFiZXN0IHx8IChjdXJyZW50ICYmIGN1cnJlbnQud2VpZ2h0ID4gYmVzdC53ZWlnaHQpID8gY3VycmVudCA6IGJlc3Q7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJlc3Q7XG4gIH1cblxuICAvLyBEZWxlZ2F0ZSB0aGVzZSBjYWxscyB0byB0aGUgY3VycmVudCBMb2NhdGlvblNlcnZpY2VzIGltcGxlbWVudGF0aW9uXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IHVybCwgb3IgdXBkYXRlcyB0aGUgdXJsXG4gICAqXG4gICAqICMjIyBHZXR0aW5nIHRoZSBjdXJyZW50IFVSTFxuICAgKlxuICAgKiBXaGVuIG5vIGFyZ3VtZW50cyBhcmUgcGFzc2VkLCByZXR1cm5zIHRoZSBjdXJyZW50IFVSTC5cbiAgICogVGhlIFVSTCBpcyBub3JtYWxpemVkIHVzaW5nIHRoZSBpbnRlcm5hbCBbW3BhdGhdXS9bW3NlYXJjaF1dL1tbaGFzaF1dIHZhbHVlcy5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIHRoZSBVUkwgbWF5IGJlIHN0b3JlZCBpbiB0aGUgaGFzaCAoW1tIYXNoTG9jYXRpb25TZXJ2aWNlc11dKSBvclxuICAgKiBoYXZlIGEgYmFzZSBIUkVGIHByZXBlbmRlZCAoW1tQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2VzXV0pLlxuICAgKlxuICAgKiBUaGUgcmF3IFVSTCBpbiB0aGUgYnJvd3NlciBtaWdodCBiZTpcbiAgICpcbiAgICogYGBgXG4gICAqIGh0dHA6Ly9teXNpdGUuY29tL3NvbWVwYXRoL2luZGV4Lmh0bWwjL2ludGVybmFsL3BhdGgvMTIzP3BhcmFtMT1mb28jYW5jaG9yXG4gICAqIGBgYFxuICAgKlxuICAgKiBvclxuICAgKlxuICAgKiBgYGBcbiAgICogaHR0cDovL215c2l0ZS5jb20vYmFzZXBhdGgvaW50ZXJuYWwvcGF0aC8xMjM/cGFyYW0xPWZvbyNhbmNob3JcbiAgICogYGBgXG4gICAqXG4gICAqIHRoZW4gdGhpcyBtZXRob2QgcmV0dXJuczpcbiAgICpcbiAgICogYGBgXG4gICAqIC9pbnRlcm5hbC9wYXRoLzEyMz9wYXJhbTE9Zm9vI2FuY2hvclxuICAgKiBgYGBcbiAgICpcbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiBsb2NhdGlvblNlcnZpY2VzLnVybCgpOyAvLyBcIi9zb21lL3BhdGg/cXVlcnk9dmFsdWUjYW5jaG9yXCJcbiAgICogYGBgXG4gICAqXG4gICAqICMjIyBVcGRhdGluZyB0aGUgVVJMXG4gICAqXG4gICAqIFdoZW4gYG5ld3VybGAgYXJndW1lbnRzIGlzIHByb3ZpZGVkLCBjaGFuZ2VzIHRoZSBVUkwgdG8gcmVmbGVjdCBgbmV3dXJsYFxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIGxvY2F0aW9uU2VydmljZXMudXJsKFwiL3NvbWUvcGF0aD9xdWVyeT12YWx1ZSNhbmNob3JcIiwgdHJ1ZSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gbmV3dXJsIFRoZSBuZXcgdmFsdWUgZm9yIHRoZSBVUkwuXG4gICAqICAgICAgICAgICAgICAgVGhpcyB1cmwgc2hvdWxkIHJlZmxlY3Qgb25seSB0aGUgbmV3IGludGVybmFsIFtbcGF0aF1dLCBbW3NlYXJjaF1dLCBhbmQgW1toYXNoXV0gdmFsdWVzLlxuICAgKiAgICAgICAgICAgICAgIEl0IHNob3VsZCBub3QgaW5jbHVkZSB0aGUgcHJvdG9jb2wsIHNpdGUsIHBvcnQsIG9yIGJhc2UgcGF0aCBvZiBhbiBhYnNvbHV0ZSBIUkVGLlxuICAgKiBAcGFyYW0gcmVwbGFjZSBXaGVuIHRydWUsIHJlcGxhY2VzIHRoZSBjdXJyZW50IGhpc3RvcnkgZW50cnkgKGluc3RlYWQgb2YgYXBwZW5kaW5nIGl0KSB3aXRoIHRoaXMgbmV3IHVybFxuICAgKiBAcGFyYW0gc3RhdGUgVGhlIGhpc3RvcnkncyBzdGF0ZSBvYmplY3QsIGkuZS4sIHB1c2hTdGF0ZSAoaWYgdGhlIExvY2F0aW9uU2VydmljZXMgaW1wbGVtZW50YXRpb24gc3VwcG9ydHMgaXQpXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIHVybCAoYWZ0ZXIgcG90ZW50aWFsbHkgYmVpbmcgcHJvY2Vzc2VkKVxuICAgKi9cbiAgcHVibGljIHVybCA9IChuZXd1cmw/OiBzdHJpbmcsIHJlcGxhY2U/OiBib29sZWFuLCBzdGF0ZT86IGFueSk6IHN0cmluZyA9PlxuICAgIHRoaXMucm91dGVyLmxvY2F0aW9uU2VydmljZS51cmwobmV3dXJsLCByZXBsYWNlLCBzdGF0ZSk7XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHBhdGggcGFydCBvZiB0aGUgY3VycmVudCB1cmxcbiAgICpcbiAgICogSWYgdGhlIGN1cnJlbnQgVVJMIGlzIGAvc29tZS9wYXRoP3F1ZXJ5PXZhbHVlI2FuY2hvcmAsIHRoaXMgcmV0dXJucyBgL3NvbWUvcGF0aGBcbiAgICpcbiAgICogQHJldHVybiB0aGUgcGF0aCBwb3J0aW9uIG9mIHRoZSB1cmxcbiAgICovXG4gIHB1YmxpYyBwYXRoID0gKCk6IHN0cmluZyA9PiB0aGlzLnJvdXRlci5sb2NhdGlvblNlcnZpY2UucGF0aCgpO1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBzZWFyY2ggcGFydCBvZiB0aGUgY3VycmVudCB1cmwgYXMgYW4gb2JqZWN0XG4gICAqXG4gICAqIElmIHRoZSBjdXJyZW50IFVSTCBpcyBgL3NvbWUvcGF0aD9xdWVyeT12YWx1ZSNhbmNob3JgLCB0aGlzIHJldHVybnMgYHsgcXVlcnk6ICd2YWx1ZScgfWBcbiAgICpcbiAgICogQHJldHVybiB0aGUgc2VhcmNoIChxdWVyeSkgcG9ydGlvbiBvZiB0aGUgdXJsLCBhcyBhbiBvYmplY3RcbiAgICovXG4gIHB1YmxpYyBzZWFyY2ggPSAoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSA9PiB0aGlzLnJvdXRlci5sb2NhdGlvblNlcnZpY2Uuc2VhcmNoKCk7XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGhhc2ggcGFydCBvZiB0aGUgY3VycmVudCB1cmxcbiAgICpcbiAgICogSWYgdGhlIGN1cnJlbnQgVVJMIGlzIGAvc29tZS9wYXRoP3F1ZXJ5PXZhbHVlI2FuY2hvcmAsIHRoaXMgcmV0dXJucyBgYW5jaG9yYFxuICAgKlxuICAgKiBAcmV0dXJuIHRoZSBoYXNoIChhbmNob3IpIHBvcnRpb24gb2YgdGhlIHVybFxuICAgKi9cbiAgcHVibGljIGhhc2ggPSAoKTogc3RyaW5nID0+IHRoaXMucm91dGVyLmxvY2F0aW9uU2VydmljZS5oYXNoKCk7XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbGFwaVxuICAgKlxuICAgKiBSZWdpc3RlcnMgYSBsb3cgbGV2ZWwgdXJsIGNoYW5nZSBoYW5kbGVyXG4gICAqXG4gICAqIE5vdGU6IEJlY2F1c2UgdGhpcyBpcyBhIGxvdyBsZXZlbCBoYW5kbGVyLCBpdCdzIG5vdCByZWNvbW1lbmRlZCBmb3IgZ2VuZXJhbCB1c2UuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogbGV0IGRlcmVnaXN0ZXJGbiA9IGxvY2F0aW9uU2VydmljZXMub25DaGFuZ2UoKGV2dCkgPT4gY29uc29sZS5sb2coXCJ1cmwgY2hhbmdlXCIsIGV2dCkpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSB1cmwgaXMgY2hhbmdpbmdcbiAgICogQHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgZGUtcmVnaXN0ZXJzIHRoZSBjYWxsYmFja1xuICAgKi9cbiAgcHVibGljIG9uQ2hhbmdlID0gKGNhbGxiYWNrOiBFdmVudExpc3RlbmVyKTogRnVuY3Rpb24gPT4gdGhpcy5yb3V0ZXIubG9jYXRpb25TZXJ2aWNlLm9uQ2hhbmdlKGNhbGxiYWNrKTtcbn1cbiIsIi8qKiBAcHVibGljYXBpIEBtb2R1bGUgY29yZSAqLyAvKiogKi9cbmltcG9ydCB7IFVybE1hdGNoZXJGYWN0b3J5IH0gZnJvbSAnLi91cmwvdXJsTWF0Y2hlckZhY3RvcnknO1xuaW1wb3J0IHsgVXJsUm91dGVyIH0gZnJvbSAnLi91cmwvdXJsUm91dGVyJztcbmltcG9ydCB7IFRyYW5zaXRpb25TZXJ2aWNlIH0gZnJvbSAnLi90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IFZpZXdTZXJ2aWNlIH0gZnJvbSAnLi92aWV3L3ZpZXcnO1xuaW1wb3J0IHsgU3RhdGVSZWdpc3RyeSB9IGZyb20gJy4vc3RhdGUvc3RhdGVSZWdpc3RyeSc7XG5pbXBvcnQgeyBTdGF0ZVNlcnZpY2UgfSBmcm9tICcuL3N0YXRlL3N0YXRlU2VydmljZSc7XG5pbXBvcnQgeyBVSVJvdXRlckdsb2JhbHMgfSBmcm9tICcuL2dsb2JhbHMnO1xuaW1wb3J0IHsgVUlSb3V0ZXJQbHVnaW4sIERpc3Bvc2FibGUgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyB2YWx1ZXMsIHJlbW92ZUZyb20gfSBmcm9tICcuL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgVXJsU2VydmljZSB9IGZyb20gJy4vdXJsL3VybFNlcnZpY2UnO1xuaW1wb3J0IHsgTG9jYXRpb25TZXJ2aWNlcywgTG9jYXRpb25Db25maWcgfSBmcm9tICcuL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgVHJhY2UsIHRyYWNlIH0gZnJvbSAnLi9jb21tb24vdHJhY2UnO1xuaW1wb3J0IHsgbWFrZVN0dWIgfSBmcm9tICcuL2NvbW1vbic7XG5cbi8qKiBAaGlkZGVuICovXG5sZXQgX3JvdXRlckluc3RhbmNlID0gMDtcblxuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IGxvY1N2Y0ZuczogKGtleW9mIExvY2F0aW9uU2VydmljZXMpW10gPSBbJ3VybCcsICdwYXRoJywgJ3NlYXJjaCcsICdoYXNoJywgJ29uQ2hhbmdlJ107XG4vKiogQGhpZGRlbiAqL1xuY29uc3QgbG9jQ2ZnRm5zOiAoa2V5b2YgTG9jYXRpb25Db25maWcpW10gPSBbJ3BvcnQnLCAncHJvdG9jb2wnLCAnaG9zdCcsICdiYXNlSHJlZicsICdodG1sNU1vZGUnLCAnaGFzaFByZWZpeCddO1xuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IGxvY2F0aW9uU2VydmljZVN0dWIgPSBtYWtlU3R1YjxMb2NhdGlvblNlcnZpY2VzPignTG9jYXRpb25TZXJ2aWNlcycsIGxvY1N2Y0Zucyk7XG4vKiogQGhpZGRlbiAqL1xuY29uc3QgbG9jYXRpb25Db25maWdTdHViID0gbWFrZVN0dWI8TG9jYXRpb25Db25maWc+KCdMb2NhdGlvbkNvbmZpZycsIGxvY0NmZ0Zucyk7XG5cbi8qKlxuICogVGhlIG1hc3RlciBjbGFzcyB1c2VkIHRvIGluc3RhbnRpYXRlIGFuIGluc3RhbmNlIG9mIFVJLVJvdXRlci5cbiAqXG4gKiBVSS1Sb3V0ZXIgKGZvciBlYWNoIHNwZWNpZmljIGZyYW1ld29yaykgd2lsbCBjcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBkdXJpbmcgYm9vdHN0cmFwLlxuICogVGhpcyBjbGFzcyBpbnN0YW50aWF0ZXMgYW5kIHdpcmVzIHRoZSBVSS1Sb3V0ZXIgc2VydmljZXMgdG9nZXRoZXIuXG4gKlxuICogQWZ0ZXIgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFVJUm91dGVyIGNsYXNzIGlzIGNyZWF0ZWQsIGl0IHNob3VsZCBiZSBjb25maWd1cmVkIGZvciB5b3VyIGFwcC5cbiAqIEZvciBpbnN0YW5jZSwgYXBwIHN0YXRlcyBzaG91bGQgYmUgcmVnaXN0ZXJlZCB3aXRoIHRoZSBbW1VJUm91dGVyLnN0YXRlUmVnaXN0cnldXS5cbiAqXG4gKiAtLS1cbiAqXG4gKiBOb3JtYWxseSB0aGUgZnJhbWV3b3JrIGNvZGUgd2lsbCBib290c3RyYXAgVUktUm91dGVyLlxuICogSWYgeW91IGFyZSBib290c3RyYXBwaW5nIFVJUm91dGVyIG1hbnVhbGx5LCB0ZWxsIGl0IHRvIG1vbml0b3IgdGhlIFVSTCBieSBjYWxsaW5nXG4gKiBbW1VybFNlcnZpY2UubGlzdGVuXV0gdGhlbiBbW1VybFNlcnZpY2Uuc3luY11dLlxuICovXG5leHBvcnQgY2xhc3MgVUlSb3V0ZXIge1xuICAvKiogQGhpZGRlbiAqLyAkaWQgPSBfcm91dGVySW5zdGFuY2UrKztcbiAgLyoqIEBoaWRkZW4gKi8gX2Rpc3Bvc2VkID0gZmFsc2U7XG4gIC8qKiBAaGlkZGVuICovIHByaXZhdGUgX2Rpc3Bvc2FibGVzOiBEaXNwb3NhYmxlW10gPSBbXTtcblxuICAvKiogUHJvdmlkZXMgdHJhY2UgaW5mb3JtYXRpb24gdG8gdGhlIGNvbnNvbGUgKi9cbiAgdHJhY2U6IFRyYWNlID0gdHJhY2U7XG5cbiAgLyoqIFByb3ZpZGVzIHNlcnZpY2VzIHJlbGF0ZWQgdG8gdWktdmlldyBzeW5jaHJvbml6YXRpb24gKi9cbiAgdmlld1NlcnZpY2UgPSBuZXcgVmlld1NlcnZpY2UodGhpcyk7XG5cbiAgLyoqIEdsb2JhbCByb3V0ZXIgc3RhdGUgKi9cbiAgZ2xvYmFsczogVUlSb3V0ZXJHbG9iYWxzID0gbmV3IFVJUm91dGVyR2xvYmFscygpO1xuXG4gIC8qKiBQcm92aWRlcyBzZXJ2aWNlcyByZWxhdGVkIHRvIFRyYW5zaXRpb25zICovXG4gIHRyYW5zaXRpb25TZXJ2aWNlOiBUcmFuc2l0aW9uU2VydmljZSA9IG5ldyBUcmFuc2l0aW9uU2VydmljZSh0aGlzKTtcblxuICAvKipcbiAgICogRGVwcmVjYXRlZCBmb3IgcHVibGljIHVzZS4gVXNlIFtbdXJsU2VydmljZV1dIGluc3RlYWQuXG4gICAqIEBkZXByZWNhdGVkIFVzZSBbW3VybFNlcnZpY2VdXSBpbnN0ZWFkXG4gICAqL1xuICB1cmxNYXRjaGVyRmFjdG9yeTogVXJsTWF0Y2hlckZhY3RvcnkgPSBuZXcgVXJsTWF0Y2hlckZhY3RvcnkodGhpcyk7XG5cbiAgLyoqXG4gICAqIERlcHJlY2F0ZWQgZm9yIHB1YmxpYyB1c2UuIFVzZSBbW3VybFNlcnZpY2VdXSBpbnN0ZWFkLlxuICAgKiBAZGVwcmVjYXRlZCBVc2UgW1t1cmxTZXJ2aWNlXV0gaW5zdGVhZFxuICAgKi9cbiAgdXJsUm91dGVyOiBVcmxSb3V0ZXIgPSBuZXcgVXJsUm91dGVyKHRoaXMpO1xuXG4gIC8qKiBQcm92aWRlcyBzZXJ2aWNlcyByZWxhdGVkIHRvIHRoZSBVUkwgKi9cbiAgdXJsU2VydmljZTogVXJsU2VydmljZSA9IG5ldyBVcmxTZXJ2aWNlKHRoaXMpO1xuXG4gIC8qKiBQcm92aWRlcyBhIHJlZ2lzdHJ5IGZvciBzdGF0ZXMsIGFuZCByZWxhdGVkIHJlZ2lzdHJhdGlvbiBzZXJ2aWNlcyAqL1xuICBzdGF0ZVJlZ2lzdHJ5OiBTdGF0ZVJlZ2lzdHJ5ID0gbmV3IFN0YXRlUmVnaXN0cnkodGhpcyk7XG5cbiAgLyoqIFByb3ZpZGVzIHNlcnZpY2VzIHJlbGF0ZWQgdG8gc3RhdGVzICovXG4gIHN0YXRlU2VydmljZSA9IG5ldyBTdGF0ZVNlcnZpY2UodGhpcyk7XG5cbiAgLyoqIEBoaWRkZW4gcGx1Z2luIGluc3RhbmNlcyBhcmUgcmVnaXN0ZXJlZCBoZXJlICovXG4gIHByaXZhdGUgX3BsdWdpbnM6IHsgW2tleTogc3RyaW5nXTogVUlSb3V0ZXJQbHVnaW4gfSA9IHt9O1xuXG4gIC8qKiBSZWdpc3RlcnMgYW4gb2JqZWN0IHRvIGJlIG5vdGlmaWVkIHdoZW4gdGhlIHJvdXRlciBpcyBkaXNwb3NlZCAqL1xuICBkaXNwb3NhYmxlKGRpc3Bvc2FibGU6IERpc3Bvc2FibGUpIHtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKGRpc3Bvc2FibGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3Bvc2VzIHRoaXMgcm91dGVyIGluc3RhbmNlXG4gICAqXG4gICAqIFdoZW4gY2FsbGVkLCBjbGVhcnMgcmVzb3VyY2VzIHJldGFpbmVkIGJ5IHRoZSByb3V0ZXIgYnkgY2FsbGluZyBgZGlzcG9zZSh0aGlzKWAgb24gYWxsXG4gICAqIHJlZ2lzdGVyZWQgW1tkaXNwb3NhYmxlXV0gb2JqZWN0cy5cbiAgICpcbiAgICogT3IsIGlmIGEgYGRpc3Bvc2FibGVgIG9iamVjdCBpcyBwcm92aWRlZCwgY2FsbHMgYGRpc3Bvc2UodGhpcylgIG9uIHRoYXQgb2JqZWN0IG9ubHkuXG4gICAqXG4gICAqIEBwYXJhbSBkaXNwb3NhYmxlIChvcHRpb25hbCkgdGhlIGRpc3Bvc2FibGUgdG8gZGlzcG9zZVxuICAgKi9cbiAgZGlzcG9zZShkaXNwb3NhYmxlPzogYW55KTogdm9pZCB7XG4gICAgaWYgKGRpc3Bvc2FibGUgJiYgaXNGdW5jdGlvbihkaXNwb3NhYmxlLmRpc3Bvc2UpKSB7XG4gICAgICBkaXNwb3NhYmxlLmRpc3Bvc2UodGhpcyk7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHRoaXMuX2Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5zbGljZSgpLmZvckVhY2goZCA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICB0eXBlb2YgZC5kaXNwb3NlID09PSAnZnVuY3Rpb24nICYmIGQuZGlzcG9zZSh0aGlzKTtcbiAgICAgICAgcmVtb3ZlRnJvbSh0aGlzLl9kaXNwb3NhYmxlcywgZCk7XG4gICAgICB9IGNhdGNoIChpZ25vcmVkKSB7fVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgYFVJUm91dGVyYCBvYmplY3RcbiAgICpcbiAgICogQHBhcmFtIGxvY2F0aW9uU2VydmljZSBhIFtbTG9jYXRpb25TZXJ2aWNlc11dIGltcGxlbWVudGF0aW9uXG4gICAqIEBwYXJhbSBsb2NhdGlvbkNvbmZpZyBhIFtbTG9jYXRpb25Db25maWddXSBpbXBsZW1lbnRhdGlvblxuICAgKiBAaW50ZXJuYWxhcGlcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBsb2NhdGlvblNlcnZpY2U6IExvY2F0aW9uU2VydmljZXMgPSBsb2NhdGlvblNlcnZpY2VTdHViLFxuICAgIHB1YmxpYyBsb2NhdGlvbkNvbmZpZzogTG9jYXRpb25Db25maWcgPSBsb2NhdGlvbkNvbmZpZ1N0dWJcbiAgKSB7XG4gICAgdGhpcy52aWV3U2VydmljZS5fcGx1Z2luYXBpLl9yb290Vmlld0NvbnRleHQodGhpcy5zdGF0ZVJlZ2lzdHJ5LnJvb3QoKSk7XG4gICAgdGhpcy5nbG9iYWxzLiRjdXJyZW50ID0gdGhpcy5zdGF0ZVJlZ2lzdHJ5LnJvb3QoKTtcbiAgICB0aGlzLmdsb2JhbHMuY3VycmVudCA9IHRoaXMuZ2xvYmFscy4kY3VycmVudC5zZWxmO1xuXG4gICAgdGhpcy5kaXNwb3NhYmxlKHRoaXMuZ2xvYmFscyk7XG4gICAgdGhpcy5kaXNwb3NhYmxlKHRoaXMuc3RhdGVTZXJ2aWNlKTtcbiAgICB0aGlzLmRpc3Bvc2FibGUodGhpcy5zdGF0ZVJlZ2lzdHJ5KTtcbiAgICB0aGlzLmRpc3Bvc2FibGUodGhpcy50cmFuc2l0aW9uU2VydmljZSk7XG4gICAgdGhpcy5kaXNwb3NhYmxlKHRoaXMudXJsU2VydmljZSk7XG4gICAgdGhpcy5kaXNwb3NhYmxlKGxvY2F0aW9uU2VydmljZSk7XG4gICAgdGhpcy5kaXNwb3NhYmxlKGxvY2F0aW9uQ29uZmlnKTtcbiAgfVxuXG4gIC8qKiBBZGQgcGx1Z2luIChhcyBFUzYgY2xhc3MpICovXG4gIHBsdWdpbjxUIGV4dGVuZHMgVUlSb3V0ZXJQbHVnaW4+KHBsdWdpbjogeyBuZXcgKHJvdXRlcjogVUlSb3V0ZXIsIG9wdGlvbnM/OiBhbnkpOiBUIH0sIG9wdGlvbnM/OiBhbnkpOiBUO1xuICAvKiogQWRkIHBsdWdpbiAoYXMgamF2YXNjcmlwdCBjb25zdHJ1Y3RvciBmdW5jdGlvbikgKi9cbiAgcGx1Z2luPFQgZXh0ZW5kcyBVSVJvdXRlclBsdWdpbj4ocGx1Z2luOiB7IChyb3V0ZXI6IFVJUm91dGVyLCBvcHRpb25zPzogYW55KTogdm9pZCB9LCBvcHRpb25zPzogYW55KTogVDtcbiAgLyoqIEFkZCBwbHVnaW4gKGFzIGphdmFzY3JpcHQgZmFjdG9yeSBmdW5jdGlvbikgKi9cbiAgcGx1Z2luPFQgZXh0ZW5kcyBVSVJvdXRlclBsdWdpbj4ocGx1Z2luOiBQbHVnaW5GYWN0b3J5PFQ+LCBvcHRpb25zPzogYW55KTogVDtcbiAgLyoqXG4gICAqIEFkZHMgYSBwbHVnaW4gdG8gVUktUm91dGVyXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGFkZHMgYSBVSS1Sb3V0ZXIgUGx1Z2luLlxuICAgKiBBIHBsdWdpbiBjYW4gZW5oYW5jZSBvciBjaGFuZ2UgVUktUm91dGVyIGJlaGF2aW9yIHVzaW5nIGFueSBwdWJsaWMgQVBJLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIGltcG9ydCB7IE15Q29vbFBsdWdpbiB9IGZyb20gXCJ1aS1yb3V0ZXItY29vbC1wbHVnaW5cIjtcbiAgICpcbiAgICogdmFyIHBsdWdpbiA9IHJvdXRlci5hZGRQbHVnaW4oTXlDb29sUGx1Z2luKTtcbiAgICogYGBgXG4gICAqXG4gICAqICMjIyBQbHVnaW4gYXV0aG9yaW5nXG4gICAqXG4gICAqIEEgcGx1Z2luIGlzIHNpbXBseSBhIGNsYXNzIChvciBjb25zdHJ1Y3RvciBmdW5jdGlvbikgd2hpY2ggYWNjZXB0cyBhIFtbVUlSb3V0ZXJdXSBpbnN0YW5jZSBhbmQgKG9wdGlvbmFsbHkpIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgKlxuICAgKiBUaGUgcGx1Z2luIGNhbiBpbXBsZW1lbnQgaXRzIGZ1bmN0aW9uYWxpdHkgdXNpbmcgYW55IG9mIHRoZSBwdWJsaWMgQVBJcyBvZiBbW1VJUm91dGVyXV0uXG4gICAqIEZvciBleGFtcGxlLCBpdCBtYXkgY29uZmlndXJlIHJvdXRlciBvcHRpb25zIG9yIGFkZCBhIFRyYW5zaXRpb24gSG9vay5cbiAgICpcbiAgICogVGhlIHBsdWdpbiBjYW4gdGhlbiBiZSBwdWJsaXNoZWQgYXMgYSBzZXBhcmF0ZSBtb2R1bGUuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogZXhwb3J0IGNsYXNzIE15QXV0aFBsdWdpbiBpbXBsZW1lbnRzIFVJUm91dGVyUGx1Z2luIHtcbiAgICogICBjb25zdHJ1Y3Rvcihyb3V0ZXI6IFVJUm91dGVyLCBvcHRpb25zOiBhbnkpIHtcbiAgICogICAgIHRoaXMubmFtZSA9IFwiTXlBdXRoUGx1Z2luXCI7XG4gICAqICAgICBsZXQgJHRyYW5zaXRpb25zID0gcm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlO1xuICAgKiAgICAgbGV0ICRzdGF0ZSA9IHJvdXRlci5zdGF0ZVNlcnZpY2U7XG4gICAqXG4gICAqICAgICBsZXQgYXV0aENyaXRlcmlhID0ge1xuICAgKiAgICAgICB0bzogKHN0YXRlKSA9PiBzdGF0ZS5kYXRhICYmIHN0YXRlLmRhdGEucmVxdWlyZXNBdXRoXG4gICAqICAgICB9O1xuICAgKlxuICAgKiAgICAgZnVuY3Rpb24gYXV0aEhvb2sodHJhbnNpdGlvbjogVHJhbnNpdGlvbikge1xuICAgKiAgICAgICBsZXQgYXV0aFNlcnZpY2UgPSB0cmFuc2l0aW9uLmluamVjdG9yKCkuZ2V0KCdBdXRoU2VydmljZScpO1xuICAgKiAgICAgICBpZiAoIWF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XG4gICAqICAgICAgICAgcmV0dXJuICRzdGF0ZS50YXJnZXQoJ2xvZ2luJyk7XG4gICAqICAgICAgIH1cbiAgICogICAgIH1cbiAgICpcbiAgICogICAgICR0cmFuc2l0aW9ucy5vblN0YXJ0KGF1dGhDcml0ZXJpYSwgYXV0aEhvb2spO1xuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBsdWdpbiBvbmUgb2Y6XG4gICAqICAgICAgICAtIGEgcGx1Z2luIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgW1tVSVJvdXRlclBsdWdpbl1dXG4gICAqICAgICAgICAtIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gZm9yIGEgW1tVSVJvdXRlclBsdWdpbl1dIHdoaWNoIGFjY2VwdHMgYSBbW1VJUm91dGVyXV0gaW5zdGFuY2VcbiAgICogICAgICAgIC0gYSBmYWN0b3J5IGZ1bmN0aW9uIHdoaWNoIGFjY2VwdHMgYSBbW1VJUm91dGVyXV0gaW5zdGFuY2UgYW5kIHJldHVybnMgYSBbW1VJUm91dGVyUGx1Z2luXV0gaW5zdGFuY2VcbiAgICogQHBhcmFtIG9wdGlvbnMgb3B0aW9ucyB0byBwYXNzIHRvIHRoZSBwbHVnaW4gY2xhc3MvZmFjdG9yeVxuICAgKiBAcmV0dXJucyB0aGUgcmVnaXN0ZXJlZCBwbHVnaW4gaW5zdGFuY2VcbiAgICovXG4gIHBsdWdpbjxUIGV4dGVuZHMgVUlSb3V0ZXJQbHVnaW4+KHBsdWdpbjogYW55LCBvcHRpb25zOiBhbnkgPSB7fSk6IFQge1xuICAgIGNvbnN0IHBsdWdpbkluc3RhbmNlID0gbmV3IHBsdWdpbih0aGlzLCBvcHRpb25zKTtcbiAgICBpZiAoIXBsdWdpbkluc3RhbmNlLm5hbWUpIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcHJvcGVydHkgYG5hbWVgIG1pc3Npbmcgb24gcGx1Z2luOiAnICsgcGx1Z2luSW5zdGFuY2UpO1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2gocGx1Z2luSW5zdGFuY2UpO1xuICAgIHJldHVybiAodGhpcy5fcGx1Z2luc1twbHVnaW5JbnN0YW5jZS5uYW1lXSA9IHBsdWdpbkluc3RhbmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHJlZ2lzdGVyZWQgcGx1Z2luc1xuICAgKlxuICAgKiBSZXR1cm5zIHRoZSByZWdpc3RlcmVkIHBsdWdpbiBvZiB0aGUgZ2l2ZW4gYHBsdWdpbk5hbWVgLlxuICAgKiBJZiBubyBgcGx1Z2luTmFtZWAgaXMgZ2l2ZW4sIHJldHVybnMgYWxsIHJlZ2lzdGVyZWQgcGx1Z2luc1xuICAgKlxuICAgKiBAcGFyYW0gcGx1Z2luTmFtZSAob3B0aW9uYWwpIHRoZSBuYW1lIG9mIHRoZSBwbHVnaW4gdG8gZ2V0XG4gICAqIEByZXR1cm4gdGhlIG5hbWVkIHBsdWdpbiAodW5kZWZpbmVkIGlmIG5vdCBmb3VuZCksIG9yIGFsbCBwbHVnaW5zIChpZiBgcGx1Z2luTmFtZWAgaXMgb21pdHRlZClcbiAgICovXG4gIGdldFBsdWdpbihwbHVnaW5OYW1lOiBzdHJpbmcpOiBVSVJvdXRlclBsdWdpbjtcbiAgZ2V0UGx1Z2luKCk6IFVJUm91dGVyUGx1Z2luW107XG4gIGdldFBsdWdpbihwbHVnaW5OYW1lPzogc3RyaW5nKTogVUlSb3V0ZXJQbHVnaW4gfCBVSVJvdXRlclBsdWdpbltdIHtcbiAgICByZXR1cm4gcGx1Z2luTmFtZSA/IHRoaXMuX3BsdWdpbnNbcGx1Z2luTmFtZV0gOiB2YWx1ZXModGhpcy5fcGx1Z2lucyk7XG4gIH1cbn1cblxuLyoqIEBpbnRlcm5hbGFwaSAqL1xuZXhwb3J0IHR5cGUgUGx1Z2luRmFjdG9yeTxUPiA9IChyb3V0ZXI6IFVJUm91dGVyLCBvcHRpb25zPzogYW55KSA9PiBUO1xuIiwiLyoqIEBpbnRlcm5hbGFwaSBAbW9kdWxlIGhvb2tzICovIC8qKiAqL1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBVSVJvdXRlciB9IGZyb20gJy4uL3JvdXRlcic7XG5pbXBvcnQgeyBUcmFuc2l0aW9uU2VydmljZSB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgUmVzb2x2YWJsZSB9IGZyb20gJy4uL3Jlc29sdmUnO1xuaW1wb3J0IHsgaW5BcnJheSwgdW5pcVIsIHVubmVzdFIsIHZhbHVlcyB9IGZyb20gJy4uL2NvbW1vbic7XG5pbXBvcnQgeyBQYXRoTm9kZSB9IGZyb20gJy4uL3BhdGgnO1xuXG5mdW5jdGlvbiBhZGRDb3JlUmVzb2x2YWJsZXModHJhbnM6IFRyYW5zaXRpb24pIHtcbiAgdHJhbnMuYWRkUmVzb2x2YWJsZShSZXNvbHZhYmxlLmZyb21EYXRhKFVJUm91dGVyLCB0cmFucy5yb3V0ZXIpLCAnJyk7XG4gIHRyYW5zLmFkZFJlc29sdmFibGUoUmVzb2x2YWJsZS5mcm9tRGF0YShUcmFuc2l0aW9uLCB0cmFucyksICcnKTtcbiAgdHJhbnMuYWRkUmVzb2x2YWJsZShSZXNvbHZhYmxlLmZyb21EYXRhKCckdHJhbnNpdGlvbiQnLCB0cmFucyksICcnKTtcbiAgdHJhbnMuYWRkUmVzb2x2YWJsZShSZXNvbHZhYmxlLmZyb21EYXRhKCckc3RhdGVQYXJhbXMnLCB0cmFucy5wYXJhbXMoKSksICcnKTtcblxuICB0cmFucy5lbnRlcmluZygpLmZvckVhY2goc3RhdGUgPT4ge1xuICAgIHRyYW5zLmFkZFJlc29sdmFibGUoUmVzb2x2YWJsZS5mcm9tRGF0YSgnJHN0YXRlJCcsIHN0YXRlKSwgc3RhdGUpO1xuICB9KTtcbn1cblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyQWRkQ29yZVJlc29sdmFibGVzID0gKHRyYW5zaXRpb25TZXJ2aWNlOiBUcmFuc2l0aW9uU2VydmljZSkgPT5cbiAgdHJhbnNpdGlvblNlcnZpY2Uub25DcmVhdGUoe30sIGFkZENvcmVSZXNvbHZhYmxlcyk7XG5cbmNvbnN0IFRSQU5TSVRJT05fVE9LRU5TID0gWyckdHJhbnNpdGlvbiQnLCBUcmFuc2l0aW9uXTtcbmNvbnN0IGlzVHJhbnNpdGlvbiA9IGluQXJyYXkoVFJBTlNJVElPTl9UT0tFTlMpO1xuXG4vLyBSZWZlcmVuY2VzIHRvIFRyYW5zaXRpb24gaW4gdGhlIHRyZWVDaGFuZ2VzIHBhdGhub2RlcyBtYWtlcyBhbGxcbi8vIHByZXZpb3VzIFRyYW5zaXRpb25zIHJlYWNoYWJsZSBpbiBtZW1vcnksIGNhdXNpbmcgYSBtZW1vcnkgbGVha1xuLy8gVGhpcyBmdW5jdGlvbiByZW1vdmVzIHJlc29sdmVzIGZvciAnJHRyYW5zaXRpb24kJyBhbmQgYFRyYW5zaXRpb25gIGZyb20gdGhlIHRyZWVDaGFuZ2VzLlxuLy8gRG8gbm90IHVzZSB0aGlzIG9uIGN1cnJlbnQgdHJhbnNpdGlvbnMsIG9ubHkgb24gb2xkIG9uZXMuXG5leHBvcnQgY29uc3QgdHJlZUNoYW5nZXNDbGVhbnVwID0gKHRyYW5zOiBUcmFuc2l0aW9uKSA9PiB7XG4gIGNvbnN0IG5vZGVzID0gdmFsdWVzKHRyYW5zLnRyZWVDaGFuZ2VzKCkpXG4gICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAucmVkdWNlKHVuaXFSLCBbXSk7XG5cbiAgLy8gSWYgdGhlIHJlc29sdmFibGUgaXMgYSBUcmFuc2l0aW9uLCByZXR1cm4gYSBuZXcgcmVzb2x2YWJsZSB3aXRoIG51bGwgZGF0YVxuICBjb25zdCByZXBsYWNlVHJhbnNpdGlvbldpdGhOdWxsID0gKHI6IFJlc29sdmFibGUpOiBSZXNvbHZhYmxlID0+IHtcbiAgICByZXR1cm4gaXNUcmFuc2l0aW9uKHIudG9rZW4pID8gUmVzb2x2YWJsZS5mcm9tRGF0YShyLnRva2VuLCBudWxsKSA6IHI7XG4gIH07XG5cbiAgbm9kZXMuZm9yRWFjaCgobm9kZTogUGF0aE5vZGUpID0+IHtcbiAgICBub2RlLnJlc29sdmFibGVzID0gbm9kZS5yZXNvbHZhYmxlcy5tYXAocmVwbGFjZVRyYW5zaXRpb25XaXRoTnVsbCk7XG4gIH0pO1xufTtcbiIsIi8qKiBAaW50ZXJuYWxhcGkgQG1vZHVsZSBob29rcyAqLyAvKiogKi9cbmltcG9ydCB7IGlzU3RyaW5nLCBpc0Z1bmN0aW9uIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgVGFyZ2V0U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS90YXJnZXRTdGF0ZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uU2VydmljZSB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbkhvb2tGbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vaW50ZXJmYWNlJztcblxuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHRoYXQgcmVkaXJlY3RzIHRvIGEgZGlmZmVyZW50IHN0YXRlIG9yIHBhcmFtc1xuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnQoeyB0bzogKHN0YXRlKSA9PiAhIXN0YXRlLnJlZGlyZWN0VG8gfSwgcmVkaXJlY3RIb29rKTtgXG4gKlxuICogU2VlIFtbU3RhdGVEZWNsYXJhdGlvbi5yZWRpcmVjdFRvXV1cbiAqL1xuY29uc3QgcmVkaXJlY3RUb0hvb2s6IFRyYW5zaXRpb25Ib29rRm4gPSAodHJhbnM6IFRyYW5zaXRpb24pID0+IHtcbiAgY29uc3QgcmVkaXJlY3QgPSB0cmFucy50bygpLnJlZGlyZWN0VG87XG4gIGlmICghcmVkaXJlY3QpIHJldHVybjtcblxuICBjb25zdCAkc3RhdGUgPSB0cmFucy5yb3V0ZXIuc3RhdGVTZXJ2aWNlO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZVJlc3VsdChyZXN1bHQ6IGFueSkge1xuICAgIGlmICghcmVzdWx0KSByZXR1cm47XG4gICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFRhcmdldFN0YXRlKSByZXR1cm4gcmVzdWx0O1xuICAgIGlmIChpc1N0cmluZyhyZXN1bHQpKSByZXR1cm4gJHN0YXRlLnRhcmdldCg8YW55PnJlc3VsdCwgdHJhbnMucGFyYW1zKCksIHRyYW5zLm9wdGlvbnMoKSk7XG4gICAgaWYgKHJlc3VsdFsnc3RhdGUnXSB8fCByZXN1bHRbJ3BhcmFtcyddKVxuICAgICAgcmV0dXJuICRzdGF0ZS50YXJnZXQocmVzdWx0WydzdGF0ZSddIHx8IHRyYW5zLnRvKCksIHJlc3VsdFsncGFyYW1zJ10gfHwgdHJhbnMucGFyYW1zKCksIHRyYW5zLm9wdGlvbnMoKSk7XG4gIH1cblxuICBpZiAoaXNGdW5jdGlvbihyZWRpcmVjdCkpIHtcbiAgICByZXR1cm4gc2VydmljZXMuJHEud2hlbihyZWRpcmVjdCh0cmFucykpLnRoZW4oaGFuZGxlUmVzdWx0KTtcbiAgfVxuICByZXR1cm4gaGFuZGxlUmVzdWx0KHJlZGlyZWN0KTtcbn07XG5cbmV4cG9ydCBjb25zdCByZWdpc3RlclJlZGlyZWN0VG9Ib29rID0gKHRyYW5zaXRpb25TZXJ2aWNlOiBUcmFuc2l0aW9uU2VydmljZSkgPT5cbiAgdHJhbnNpdGlvblNlcnZpY2Uub25TdGFydCh7IHRvOiBzdGF0ZSA9PiAhIXN0YXRlLnJlZGlyZWN0VG8gfSwgcmVkaXJlY3RUb0hvb2spO1xuIiwiLyoqIEBpbnRlcm5hbGFwaSBAbW9kdWxlIGhvb2tzICovIC8qKiAqL1xuaW1wb3J0IHsgVHJhbnNpdGlvblN0YXRlSG9va0ZuIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBUcmFuc2l0aW9uU2VydmljZSB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgU3RhdGVEZWNsYXJhdGlvbiB9IGZyb20gJy4uL3N0YXRlL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4uL3N0YXRlL3N0YXRlT2JqZWN0JztcblxuLyoqXG4gKiBBIGZhY3Rvcnkgd2hpY2ggY3JlYXRlcyBhbiBvbkVudGVyLCBvbkV4aXQgb3Igb25SZXRhaW4gdHJhbnNpdGlvbiBob29rIGZ1bmN0aW9uXG4gKlxuICogVGhlIHJldHVybmVkIGZ1bmN0aW9uIGludm9rZXMgdGhlIChmb3IgaW5zdGFuY2UpIHN0YXRlLm9uRW50ZXIgaG9vayB3aGVuIHRoZVxuICogc3RhdGUgaXMgYmVpbmcgZW50ZXJlZC5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIG1ha2VFbnRlckV4aXRSZXRhaW5Ib29rKGhvb2tOYW1lOiBzdHJpbmcpOiBUcmFuc2l0aW9uU3RhdGVIb29rRm4ge1xuICByZXR1cm4gKHRyYW5zaXRpb246IFRyYW5zaXRpb24sIHN0YXRlOiBTdGF0ZURlY2xhcmF0aW9uKSA9PiB7XG4gICAgY29uc3QgX3N0YXRlOiBTdGF0ZU9iamVjdCA9IHN0YXRlLiQkc3RhdGUoKTtcbiAgICBjb25zdCBob29rRm46IFRyYW5zaXRpb25TdGF0ZUhvb2tGbiA9IF9zdGF0ZVtob29rTmFtZV07XG4gICAgcmV0dXJuIGhvb2tGbih0cmFuc2l0aW9uLCBzdGF0ZSk7XG4gIH07XG59XG5cbi8qKlxuICogVGhlIFtbVHJhbnNpdGlvblN0YXRlSG9va0ZuXV0gZm9yIG9uRXhpdFxuICpcbiAqIFdoZW4gdGhlIHN0YXRlIGlzIGJlaW5nIGV4aXRlZCwgdGhlIHN0YXRlJ3MgLm9uRXhpdCBmdW5jdGlvbiBpcyBpbnZva2VkLlxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uRXhpdCh7IGV4aXRpbmc6IChzdGF0ZSkgPT4gISFzdGF0ZS5vbkV4aXQgfSwgb25FeGl0SG9vayk7YFxuICpcbiAqIFNlZTogW1tJSG9va1JlZ2lzdHJ5Lm9uRXhpdF1dXG4gKi9cbmNvbnN0IG9uRXhpdEhvb2s6IFRyYW5zaXRpb25TdGF0ZUhvb2tGbiA9IG1ha2VFbnRlckV4aXRSZXRhaW5Ib29rKCdvbkV4aXQnKTtcbmV4cG9ydCBjb25zdCByZWdpc3Rlck9uRXhpdEhvb2sgPSAodHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlKSA9PlxuICB0cmFuc2l0aW9uU2VydmljZS5vbkV4aXQoeyBleGl0aW5nOiBzdGF0ZSA9PiAhIXN0YXRlLm9uRXhpdCB9LCBvbkV4aXRIb29rKTtcblxuLyoqXG4gKiBUaGUgW1tUcmFuc2l0aW9uU3RhdGVIb29rRm5dXSBmb3Igb25SZXRhaW5cbiAqXG4gKiBXaGVuIHRoZSBzdGF0ZSB3YXMgYWxyZWFkeSBlbnRlcmVkLCBhbmQgaXMgbm90IGJlaW5nIGV4aXRlZCBvciByZS1lbnRlcmVkLCB0aGUgc3RhdGUncyAub25SZXRhaW4gZnVuY3Rpb24gaXMgaW52b2tlZC5cbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vblJldGFpbih7IHJldGFpbmVkOiAoc3RhdGUpID0+ICEhc3RhdGUub25SZXRhaW4gfSwgb25SZXRhaW5Ib29rKTtgXG4gKlxuICogU2VlOiBbW0lIb29rUmVnaXN0cnkub25SZXRhaW5dXVxuICovXG5jb25zdCBvblJldGFpbkhvb2s6IFRyYW5zaXRpb25TdGF0ZUhvb2tGbiA9IG1ha2VFbnRlckV4aXRSZXRhaW5Ib29rKCdvblJldGFpbicpO1xuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyT25SZXRhaW5Ib29rID0gKHRyYW5zaXRpb25TZXJ2aWNlOiBUcmFuc2l0aW9uU2VydmljZSkgPT5cbiAgdHJhbnNpdGlvblNlcnZpY2Uub25SZXRhaW4oeyByZXRhaW5lZDogc3RhdGUgPT4gISFzdGF0ZS5vblJldGFpbiB9LCBvblJldGFpbkhvb2spO1xuXG4vKipcbiAqIFRoZSBbW1RyYW5zaXRpb25TdGF0ZUhvb2tGbl1dIGZvciBvbkVudGVyXG4gKlxuICogV2hlbiB0aGUgc3RhdGUgaXMgYmVpbmcgZW50ZXJlZCwgdGhlIHN0YXRlJ3MgLm9uRW50ZXIgZnVuY3Rpb24gaXMgaW52b2tlZC5cbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vbkVudGVyKHsgZW50ZXJpbmc6IChzdGF0ZSkgPT4gISFzdGF0ZS5vbkVudGVyIH0sIG9uRW50ZXJIb29rKTtgXG4gKlxuICogU2VlOiBbW0lIb29rUmVnaXN0cnkub25FbnRlcl1dXG4gKi9cbmNvbnN0IG9uRW50ZXJIb29rOiBUcmFuc2l0aW9uU3RhdGVIb29rRm4gPSBtYWtlRW50ZXJFeGl0UmV0YWluSG9vaygnb25FbnRlcicpO1xuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyT25FbnRlckhvb2sgPSAodHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlKSA9PlxuICB0cmFuc2l0aW9uU2VydmljZS5vbkVudGVyKHsgZW50ZXJpbmc6IHN0YXRlID0+ICEhc3RhdGUub25FbnRlciB9LCBvbkVudGVySG9vayk7XG4iLCIvKiogQGludGVybmFsYXBpIEBtb2R1bGUgaG9va3MgKi8gLyoqICovXG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBUcmFuc2l0aW9uIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uJztcbmltcG9ydCB7IFJlc29sdmVDb250ZXh0IH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZlQ29udGV4dCc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uU3RhdGVIb29rRm4sIFRyYW5zaXRpb25Ib29rRm4gfSBmcm9tICcuLi90cmFuc2l0aW9uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uU2VydmljZSB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgdmFsIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBTdGF0ZURlY2xhcmF0aW9uIH0gZnJvbSAnLi4vc3RhdGUvaW50ZXJmYWNlJztcblxuZXhwb3J0IGNvbnN0IFJFU09MVkVfSE9PS19QUklPUklUWSA9IDEwMDA7XG5cbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB3aGljaCByZXNvbHZlcyBhbGwgRUFHRVIgUmVzb2x2YWJsZXMgaW4gdGhlIFRvIFBhdGhcbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vblN0YXJ0KHt9LCBlYWdlclJlc29sdmVQYXRoLCB7IHByaW9yaXR5OiAxMDAwIH0pO2BcbiAqXG4gKiBXaGVuIGEgVHJhbnNpdGlvbiBzdGFydHMsIHRoaXMgaG9vayByZXNvbHZlcyBhbGwgdGhlIEVBR0VSIFJlc29sdmFibGVzLCB3aGljaCB0aGUgdHJhbnNpdGlvbiB0aGVuIHdhaXRzIGZvci5cbiAqXG4gKiBTZWUgW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXVxuICovXG5jb25zdCBlYWdlclJlc29sdmVQYXRoOiBUcmFuc2l0aW9uSG9va0ZuID0gKHRyYW5zOiBUcmFuc2l0aW9uKSA9PlxuICBuZXcgUmVzb2x2ZUNvbnRleHQodHJhbnMudHJlZUNoYW5nZXMoKS50bykucmVzb2x2ZVBhdGgoJ0VBR0VSJywgdHJhbnMpLnRoZW4obm9vcCk7XG5cbmV4cG9ydCBjb25zdCByZWdpc3RlckVhZ2VyUmVzb2x2ZVBhdGggPSAodHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlKSA9PlxuICB0cmFuc2l0aW9uU2VydmljZS5vblN0YXJ0KHt9LCBlYWdlclJlc29sdmVQYXRoLCB7IHByaW9yaXR5OiBSRVNPTFZFX0hPT0tfUFJJT1JJVFkgfSk7XG5cbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB3aGljaCByZXNvbHZlcyBhbGwgTEFaWSBSZXNvbHZhYmxlcyBmb3IgdGhlIHN0YXRlIChhbmQgYWxsIGl0cyBhbmNlc3RvcnMpIGluIHRoZSBUbyBQYXRoXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25FbnRlcih7IGVudGVyaW5nOiAoKSA9PiB0cnVlIH0sIGxhenlSZXNvbHZlU3RhdGUsIHsgcHJpb3JpdHk6IDEwMDAgfSk7YFxuICpcbiAqIFdoZW4gYSBTdGF0ZSBpcyBiZWluZyBlbnRlcmVkLCB0aGlzIGhvb2sgcmVzb2x2ZXMgYWxsIHRoZSBSZXNvbHZhYmxlcyBmb3IgdGhpcyBzdGF0ZSwgd2hpY2ggdGhlIHRyYW5zaXRpb24gdGhlbiB3YWl0cyBmb3IuXG4gKlxuICogU2VlIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV1cbiAqL1xuY29uc3QgbGF6eVJlc29sdmVTdGF0ZTogVHJhbnNpdGlvblN0YXRlSG9va0ZuID0gKHRyYW5zOiBUcmFuc2l0aW9uLCBzdGF0ZTogU3RhdGVEZWNsYXJhdGlvbikgPT5cbiAgbmV3IFJlc29sdmVDb250ZXh0KHRyYW5zLnRyZWVDaGFuZ2VzKCkudG8pXG4gICAgLnN1YkNvbnRleHQoc3RhdGUuJCRzdGF0ZSgpKVxuICAgIC5yZXNvbHZlUGF0aCgnTEFaWScsIHRyYW5zKVxuICAgIC50aGVuKG5vb3ApO1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJMYXp5UmVzb2x2ZVN0YXRlID0gKHRyYW5zaXRpb25TZXJ2aWNlOiBUcmFuc2l0aW9uU2VydmljZSkgPT5cbiAgdHJhbnNpdGlvblNlcnZpY2Uub25FbnRlcih7IGVudGVyaW5nOiB2YWwodHJ1ZSkgfSwgbGF6eVJlc29sdmVTdGF0ZSwgeyBwcmlvcml0eTogUkVTT0xWRV9IT09LX1BSSU9SSVRZIH0pO1xuXG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gd2hpY2ggcmVzb2x2ZXMgYW55IGR5bmFtaWNhbGx5IGFkZGVkIChMQVpZIG9yIEVBR0VSKSBSZXNvbHZhYmxlcy5cbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vbkZpbmlzaCh7fSwgZWFnZXJSZXNvbHZlUGF0aCwgeyBwcmlvcml0eTogMTAwMCB9KTtgXG4gKlxuICogQWZ0ZXIgYWxsIGVudGVyaW5nIHN0YXRlcyBoYXZlIGJlZW4gZW50ZXJlZCwgdGhpcyBob29rIHJlc29sdmVzIGFueSByZW1haW5pbmcgUmVzb2x2YWJsZXMuXG4gKiBUaGVzZSBhcmUgdHlwaWNhbGx5IGR5bmFtaWMgcmVzb2x2ZXMgd2hpY2ggd2VyZSBhZGRlZCBieSBzb21lIFRyYW5zaXRpb24gSG9vayB1c2luZyBbW1RyYW5zaXRpb24uYWRkUmVzb2x2YWJsZV1dLlxuICpcbiAqIFNlZSBbW1N0YXRlRGVjbGFyYXRpb24ucmVzb2x2ZV1dXG4gKi9cbmNvbnN0IHJlc29sdmVSZW1haW5pbmc6IFRyYW5zaXRpb25Ib29rRm4gPSAodHJhbnM6IFRyYW5zaXRpb24pID0+XG4gIG5ldyBSZXNvbHZlQ29udGV4dCh0cmFucy50cmVlQ2hhbmdlcygpLnRvKS5yZXNvbHZlUGF0aCgnTEFaWScsIHRyYW5zKS50aGVuKG5vb3ApO1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJSZXNvbHZlUmVtYWluaW5nID0gKHRyYW5zaXRpb25TZXJ2aWNlOiBUcmFuc2l0aW9uU2VydmljZSkgPT5cbiAgdHJhbnNpdGlvblNlcnZpY2Uub25GaW5pc2goe30sIHJlc29sdmVSZW1haW5pbmcsIHsgcHJpb3JpdHk6IFJFU09MVkVfSE9PS19QUklPUklUWSB9KTtcbiIsIi8qKiBAaW50ZXJuYWxhcGkgQG1vZHVsZSBob29rcyAqLyAvKiogKi9cbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uJztcbmltcG9ydCB7IFZpZXdTZXJ2aWNlIH0gZnJvbSAnLi4vdmlldy92aWV3JztcbmltcG9ydCB7IFZpZXdDb25maWcgfSBmcm9tICcuLi92aWV3L2ludGVyZmFjZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uSG9va0ZuIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvblNlcnZpY2UgfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlJztcblxuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHdhaXRzIGZvciB0aGUgdmlld3MgdG8gbG9hZFxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnQoe30sIGxvYWRFbnRlcmluZ1ZpZXdzKTtgXG4gKlxuICogQWxsb3dzIHRoZSB2aWV3cyB0byBkbyBhc3luYyB3b3JrIGluIFtbVmlld0NvbmZpZy5sb2FkXV0gYmVmb3JlIHRoZSB0cmFuc2l0aW9uIGNvbnRpbnVlcy5cbiAqIEluIGFuZ3VsYXIgMSwgdGhpcyBpbmNsdWRlcyBsb2FkaW5nIHRoZSB0ZW1wbGF0ZXMuXG4gKi9cbmNvbnN0IGxvYWRFbnRlcmluZ1ZpZXdzOiBUcmFuc2l0aW9uSG9va0ZuID0gKHRyYW5zaXRpb246IFRyYW5zaXRpb24pID0+IHtcbiAgY29uc3QgJHEgPSBzZXJ2aWNlcy4kcTtcbiAgY29uc3QgZW50ZXJpbmdWaWV3cyA9IHRyYW5zaXRpb24udmlld3MoJ2VudGVyaW5nJyk7XG4gIGlmICghZW50ZXJpbmdWaWV3cy5sZW5ndGgpIHJldHVybjtcbiAgcmV0dXJuICRxLmFsbChlbnRlcmluZ1ZpZXdzLm1hcCh2aWV3ID0+ICRxLndoZW4odmlldy5sb2FkKCkpKSkudGhlbihub29wKTtcbn07XG5cbmV4cG9ydCBjb25zdCByZWdpc3RlckxvYWRFbnRlcmluZ1ZpZXdzID0gKHRyYW5zaXRpb25TZXJ2aWNlOiBUcmFuc2l0aW9uU2VydmljZSkgPT5cbiAgdHJhbnNpdGlvblNlcnZpY2Uub25GaW5pc2goe30sIGxvYWRFbnRlcmluZ1ZpZXdzKTtcblxuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIGFjdGl2YXRlcyB0aGUgbmV3IHZpZXdzIHdoZW4gYSB0cmFuc2l0aW9uIGlzIHN1Y2Nlc3NmdWwuXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCBhY3RpdmF0ZVZpZXdzKTtgXG4gKlxuICogQWZ0ZXIgYSB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlLCB0aGlzIGhvb2sgZGVhY3RpdmF0ZXMgdGhlIG9sZCB2aWV3cyBmcm9tIHRoZSBwcmV2aW91cyBzdGF0ZSxcbiAqIGFuZCBhY3RpdmF0ZXMgdGhlIG5ldyB2aWV3cyBmcm9tIHRoZSBkZXN0aW5hdGlvbiBzdGF0ZS5cbiAqXG4gKiBTZWUgW1tWaWV3U2VydmljZV1dXG4gKi9cbmNvbnN0IGFjdGl2YXRlVmlld3M6IFRyYW5zaXRpb25Ib29rRm4gPSAodHJhbnNpdGlvbjogVHJhbnNpdGlvbikgPT4ge1xuICBjb25zdCBlbnRlcmluZ1ZpZXdzID0gdHJhbnNpdGlvbi52aWV3cygnZW50ZXJpbmcnKTtcbiAgY29uc3QgZXhpdGluZ1ZpZXdzID0gdHJhbnNpdGlvbi52aWV3cygnZXhpdGluZycpO1xuICBpZiAoIWVudGVyaW5nVmlld3MubGVuZ3RoICYmICFleGl0aW5nVmlld3MubGVuZ3RoKSByZXR1cm47XG5cbiAgY29uc3QgJHZpZXc6IFZpZXdTZXJ2aWNlID0gdHJhbnNpdGlvbi5yb3V0ZXIudmlld1NlcnZpY2U7XG5cbiAgZXhpdGluZ1ZpZXdzLmZvckVhY2goKHZjOiBWaWV3Q29uZmlnKSA9PiAkdmlldy5kZWFjdGl2YXRlVmlld0NvbmZpZyh2YykpO1xuICBlbnRlcmluZ1ZpZXdzLmZvckVhY2goKHZjOiBWaWV3Q29uZmlnKSA9PiAkdmlldy5hY3RpdmF0ZVZpZXdDb25maWcodmMpKTtcblxuICAkdmlldy5zeW5jKCk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJBY3RpdmF0ZVZpZXdzID0gKHRyYW5zaXRpb25TZXJ2aWNlOiBUcmFuc2l0aW9uU2VydmljZSkgPT5cbiAgdHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCBhY3RpdmF0ZVZpZXdzKTtcbiIsIi8qKiBAaW50ZXJuYWxhcGkgQG1vZHVsZSBob29rcyAqLyAvKiogKi9cbmltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb24nO1xuaW1wb3J0IHsgY29weSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgVHJhbnNpdGlvblNlcnZpY2UgfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlJztcblxuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHVwZGF0ZXMgZ2xvYmFsIFVJLVJvdXRlciBzdGF0ZVxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uQmVmb3JlKHt9LCB1cGRhdGVHbG9iYWxTdGF0ZSk7YFxuICpcbiAqIEJlZm9yZSBhIFtbVHJhbnNpdGlvbl1dIHN0YXJ0cywgdXBkYXRlcyB0aGUgZ2xvYmFsIHZhbHVlIG9mIFwidGhlIGN1cnJlbnQgdHJhbnNpdGlvblwiIChbW0dsb2JhbHMudHJhbnNpdGlvbl1dKS5cbiAqIEFmdGVyIGEgc3VjY2Vzc2Z1bCBbW1RyYW5zaXRpb25dXSwgdXBkYXRlcyB0aGUgZ2xvYmFsIHZhbHVlcyBvZiBcInRoZSBjdXJyZW50IHN0YXRlXCJcbiAqIChbW0dsb2JhbHMuY3VycmVudF1dIGFuZCBbW0dsb2JhbHMuJGN1cnJlbnRdXSkgYW5kIFwidGhlIGN1cnJlbnQgcGFyYW0gdmFsdWVzXCIgKFtbR2xvYmFscy5wYXJhbXNdXSkuXG4gKlxuICogU2VlIGFsc28gdGhlIGRlcHJlY2F0ZWQgcHJvcGVydGllczpcbiAqIFtbU3RhdGVTZXJ2aWNlLnRyYW5zaXRpb25dXSwgW1tTdGF0ZVNlcnZpY2UuY3VycmVudF1dLCBbW1N0YXRlU2VydmljZS5wYXJhbXNdXVxuICovXG5jb25zdCB1cGRhdGVHbG9iYWxTdGF0ZSA9ICh0cmFuczogVHJhbnNpdGlvbikgPT4ge1xuICBjb25zdCBnbG9iYWxzID0gdHJhbnMucm91dGVyLmdsb2JhbHM7XG5cbiAgY29uc3QgdHJhbnNpdGlvblN1Y2Nlc3NmdWwgPSAoKSA9PiB7XG4gICAgZ2xvYmFscy5zdWNjZXNzZnVsVHJhbnNpdGlvbnMuZW5xdWV1ZSh0cmFucyk7XG4gICAgZ2xvYmFscy4kY3VycmVudCA9IHRyYW5zLiR0bygpO1xuICAgIGdsb2JhbHMuY3VycmVudCA9IGdsb2JhbHMuJGN1cnJlbnQuc2VsZjtcblxuICAgIGNvcHkodHJhbnMucGFyYW1zKCksIGdsb2JhbHMucGFyYW1zKTtcbiAgfTtcblxuICBjb25zdCBjbGVhckN1cnJlbnRUcmFuc2l0aW9uID0gKCkgPT4ge1xuICAgIC8vIERvIG5vdCBjbGVhciBnbG9iYWxzLnRyYW5zaXRpb24gaWYgYSBkaWZmZXJlbnQgdHJhbnNpdGlvbiBoYXMgc3RhcnRlZCBpbiB0aGUgbWVhbnRpbWVcbiAgICBpZiAoZ2xvYmFscy50cmFuc2l0aW9uID09PSB0cmFucykgZ2xvYmFscy50cmFuc2l0aW9uID0gbnVsbDtcbiAgfTtcblxuICB0cmFucy5vblN1Y2Nlc3Moe30sIHRyYW5zaXRpb25TdWNjZXNzZnVsLCB7IHByaW9yaXR5OiAxMDAwMCB9KTtcbiAgdHJhbnMucHJvbWlzZS50aGVuKGNsZWFyQ3VycmVudFRyYW5zaXRpb24sIGNsZWFyQ3VycmVudFRyYW5zaXRpb24pO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyVXBkYXRlR2xvYmFsU3RhdGUgPSAodHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlKSA9PlxuICB0cmFuc2l0aW9uU2VydmljZS5vbkNyZWF0ZSh7fSwgdXBkYXRlR2xvYmFsU3RhdGUpO1xuIiwiLyoqIEBpbnRlcm5hbGFwaSBAbW9kdWxlIGhvb2tzICovIC8qKiAqL1xuaW1wb3J0IHsgVXJsUm91dGVyIH0gZnJvbSAnLi4vdXJsL3VybFJvdXRlcic7XG5pbXBvcnQgeyBTdGF0ZVNlcnZpY2UgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZVNlcnZpY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBUcmFuc2l0aW9uSG9va0ZuIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvblNlcnZpY2UgfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlJztcblxuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHVwZGF0ZXMgdGhlIFVSTCBhZnRlciBhIHN1Y2Nlc3NmdWwgdHJhbnNpdGlvblxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uU3VjY2Vzcyh7fSwgdXBkYXRlVXJsKTtgXG4gKi9cbmNvbnN0IHVwZGF0ZVVybDogVHJhbnNpdGlvbkhvb2tGbiA9ICh0cmFuc2l0aW9uOiBUcmFuc2l0aW9uKSA9PiB7XG4gIGNvbnN0IG9wdGlvbnMgPSB0cmFuc2l0aW9uLm9wdGlvbnMoKTtcbiAgY29uc3QgJHN0YXRlOiBTdGF0ZVNlcnZpY2UgPSB0cmFuc2l0aW9uLnJvdXRlci5zdGF0ZVNlcnZpY2U7XG4gIGNvbnN0ICR1cmxSb3V0ZXI6IFVybFJvdXRlciA9IHRyYW5zaXRpb24ucm91dGVyLnVybFJvdXRlcjtcblxuICAvLyBEb250IHVwZGF0ZSB0aGUgdXJsIGluIHRoZXNlIHNpdHVhdGlvbnM6XG4gIC8vIFRoZSB0cmFuc2l0aW9uIHdhcyB0cmlnZ2VyZWQgYnkgYSBVUkwgc3luYyAob3B0aW9ucy5zb3VyY2UgPT09ICd1cmwnKVxuICAvLyBUaGUgdXNlciBkb2Vzbid0IHdhbnQgdGhlIHVybCB0byB1cGRhdGUgKG9wdGlvbnMubG9jYXRpb24gPT09IGZhbHNlKVxuICAvLyBUaGUgZGVzdGluYXRpb24gc3RhdGUsIGFuZCBhbGwgcGFyZW50cyBoYXZlIG5vIG5hdmlnYWJsZSB1cmxcbiAgaWYgKG9wdGlvbnMuc291cmNlICE9PSAndXJsJyAmJiBvcHRpb25zLmxvY2F0aW9uICYmICRzdGF0ZS4kY3VycmVudC5uYXZpZ2FibGUpIHtcbiAgICBjb25zdCB1cmxPcHRpb25zID0geyByZXBsYWNlOiBvcHRpb25zLmxvY2F0aW9uID09PSAncmVwbGFjZScgfTtcbiAgICAkdXJsUm91dGVyLnB1c2goJHN0YXRlLiRjdXJyZW50Lm5hdmlnYWJsZS51cmwsICRzdGF0ZS5wYXJhbXMsIHVybE9wdGlvbnMpO1xuICB9XG5cbiAgJHVybFJvdXRlci51cGRhdGUodHJ1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJVcGRhdGVVcmwgPSAodHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlKSA9PlxuICB0cmFuc2l0aW9uU2VydmljZS5vblN1Y2Nlc3Moe30sIHVwZGF0ZVVybCwgeyBwcmlvcml0eTogOTk5OSB9KTtcbiIsIi8qKiBAaW50ZXJuYWxhcGkgQG1vZHVsZSBob29rcyAqLyAvKiogKi9cbmltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb24nO1xuaW1wb3J0IHsgVHJhbnNpdGlvblNlcnZpY2UgfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IFRyYW5zaXRpb25Ib29rRm4gfSBmcm9tICcuLi90cmFuc2l0aW9uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBTdGF0ZURlY2xhcmF0aW9uLCBMYXp5TG9hZFJlc3VsdCB9IGZyb20gJy4uL3N0YXRlL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgU3RhdGVSdWxlIH0gZnJvbSAnLi4vdXJsL2ludGVyZmFjZSc7XG5cbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB0aGF0IHBlcmZvcm1zIGxhenkgbG9hZGluZ1xuICpcbiAqIFdoZW4gZW50ZXJpbmcgYSBzdGF0ZSBcImFiY1wiIHdoaWNoIGhhcyBhIGBsYXp5TG9hZGAgZnVuY3Rpb24gZGVmaW5lZDpcbiAqIC0gSW52b2tlIHRoZSBgbGF6eUxvYWRgIGZ1bmN0aW9uICh1bmxlc3MgaXQgaXMgYWxyZWFkeSBpbiBwcm9jZXNzKVxuICogICAtIEZsYWcgdGhlIGhvb2sgZnVuY3Rpb24gYXMgXCJpbiBwcm9jZXNzXCJcbiAqICAgLSBUaGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhIHByb21pc2UgKHRoYXQgcmVzb2x2ZXMgd2hlbiBsYXp5IGxvYWRpbmcgaXMgY29tcGxldGUpXG4gKiAtIFdhaXQgZm9yIHRoZSBwcm9taXNlIHRvIHNldHRsZVxuICogICAtIElmIHRoZSBwcm9taXNlIHJlc29sdmVzIHRvIGEgW1tMYXp5TG9hZFJlc3VsdF1dLCB0aGVuIHJlZ2lzdGVyIHRob3NlIHN0YXRlc1xuICogICAtIEZsYWcgdGhlIGhvb2sgZnVuY3Rpb24gYXMgXCJub3QgaW4gcHJvY2Vzc1wiXG4gKiAtIElmIHRoZSBob29rIHdhcyBzdWNjZXNzZnVsXG4gKiAgIC0gUmVtb3ZlIHRoZSBgbGF6eUxvYWRgIGZ1bmN0aW9uIGZyb20gdGhlIHN0YXRlIGRlY2xhcmF0aW9uXG4gKiAtIElmIGFsbCB0aGUgaG9va3Mgd2VyZSBzdWNjZXNzZnVsXG4gKiAgIC0gUmV0cnkgdGhlIHRyYW5zaXRpb24gKGJ5IHJldHVybmluZyBhIFRhcmdldFN0YXRlKVxuICpcbiAqIGBgYFxuICogLnN0YXRlKCdhYmMnLCB7XG4gKiAgIGNvbXBvbmVudDogJ2Zvb0NvbXBvbmVudCcsXG4gKiAgIGxhenlMb2FkOiAoKSA9PiBpbXBvcnQoJy4vZm9vQ29tcG9uZW50JylcbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiBTZWUgW1tTdGF0ZURlY2xhcmF0aW9uLmxhenlMb2FkXV1cbiAqL1xuY29uc3QgbGF6eUxvYWRIb29rOiBUcmFuc2l0aW9uSG9va0ZuID0gKHRyYW5zaXRpb246IFRyYW5zaXRpb24pID0+IHtcbiAgY29uc3Qgcm91dGVyID0gdHJhbnNpdGlvbi5yb3V0ZXI7XG5cbiAgZnVuY3Rpb24gcmV0cnlUcmFuc2l0aW9uKCkge1xuICAgIGlmICh0cmFuc2l0aW9uLm9yaWdpbmFsVHJhbnNpdGlvbigpLm9wdGlvbnMoKS5zb3VyY2UgIT09ICd1cmwnKSB7XG4gICAgICAvLyBUaGUgb3JpZ2luYWwgdHJhbnNpdGlvbiB3YXMgbm90IHRyaWdnZXJlZCB2aWEgdXJsIHN5bmNcbiAgICAgIC8vIFRoZSBsYXp5IHN0YXRlIHNob3VsZCBiZSBsb2FkZWQgbm93LCBzbyByZS10cnkgdGhlIG9yaWdpbmFsIHRyYW5zaXRpb25cbiAgICAgIGNvbnN0IG9yaWcgPSB0cmFuc2l0aW9uLnRhcmdldFN0YXRlKCk7XG4gICAgICByZXR1cm4gcm91dGVyLnN0YXRlU2VydmljZS50YXJnZXQob3JpZy5pZGVudGlmaWVyKCksIG9yaWcucGFyYW1zKCksIG9yaWcub3B0aW9ucygpKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgb3JpZ2luYWwgdHJhbnNpdGlvbiB3YXMgdHJpZ2dlcmVkIHZpYSB1cmwgc3luY1xuICAgIC8vIFJ1biB0aGUgVVJMIHJ1bGVzIGFuZCBmaW5kIHRoZSBiZXN0IG1hdGNoXG4gICAgY29uc3QgJHVybCA9IHJvdXRlci51cmxTZXJ2aWNlO1xuICAgIGNvbnN0IHJlc3VsdCA9ICR1cmwubWF0Y2goJHVybC5wYXJ0cygpKTtcbiAgICBjb25zdCBydWxlID0gcmVzdWx0ICYmIHJlc3VsdC5ydWxlO1xuXG4gICAgLy8gSWYgdGhlIGJlc3QgbWF0Y2ggaXMgYSBzdGF0ZSwgcmVkaXJlY3QgdGhlIHRyYW5zaXRpb24gKGluc3RlYWRcbiAgICAvLyBvZiBjYWxsaW5nIHN5bmMoKSB3aGljaCBzdXBlcnNlZGVzIHRoZSBjdXJyZW50IHRyYW5zaXRpb24pXG4gICAgaWYgKHJ1bGUgJiYgcnVsZS50eXBlID09PSAnU1RBVEUnKSB7XG4gICAgICBjb25zdCBzdGF0ZSA9IChydWxlIGFzIFN0YXRlUnVsZSkuc3RhdGU7XG4gICAgICBjb25zdCBwYXJhbXMgPSByZXN1bHQubWF0Y2g7XG4gICAgICByZXR1cm4gcm91dGVyLnN0YXRlU2VydmljZS50YXJnZXQoc3RhdGUsIHBhcmFtcywgdHJhbnNpdGlvbi5vcHRpb25zKCkpO1xuICAgIH1cblxuICAgIC8vIE5vIG1hdGNoaW5nIHN0YXRlIGZvdW5kLCBzbyBsZXQgLnN5bmMoKSBjaG9vc2UgdGhlIGJlc3Qgbm9uLXN0YXRlIG1hdGNoL290aGVyd2lzZVxuICAgIHJvdXRlci51cmxTZXJ2aWNlLnN5bmMoKTtcbiAgfVxuXG4gIGNvbnN0IHByb21pc2VzID0gdHJhbnNpdGlvblxuICAgIC5lbnRlcmluZygpXG4gICAgLmZpbHRlcihzdGF0ZSA9PiAhIXN0YXRlLiQkc3RhdGUoKS5sYXp5TG9hZClcbiAgICAubWFwKHN0YXRlID0+IGxhenlMb2FkU3RhdGUodHJhbnNpdGlvbiwgc3RhdGUpKTtcblxuICByZXR1cm4gc2VydmljZXMuJHEuYWxsKHByb21pc2VzKS50aGVuKHJldHJ5VHJhbnNpdGlvbik7XG59O1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJMYXp5TG9hZEhvb2sgPSAodHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlKSA9PlxuICB0cmFuc2l0aW9uU2VydmljZS5vbkJlZm9yZSh7IGVudGVyaW5nOiBzdGF0ZSA9PiAhIXN0YXRlLmxhenlMb2FkIH0sIGxhenlMb2FkSG9vayk7XG5cbi8qKlxuICogSW52b2tlcyBhIHN0YXRlJ3MgbGF6eSBsb2FkIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHRyYW5zaXRpb24gYSBUcmFuc2l0aW9uIGNvbnRleHRcbiAqIEBwYXJhbSBzdGF0ZSB0aGUgc3RhdGUgdG8gbGF6eSBsb2FkXG4gKiBAcmV0dXJucyBBIHByb21pc2UgZm9yIHRoZSBsYXp5IGxvYWQgcmVzdWx0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXp5TG9hZFN0YXRlKHRyYW5zaXRpb246IFRyYW5zaXRpb24sIHN0YXRlOiBTdGF0ZURlY2xhcmF0aW9uKTogUHJvbWlzZTxMYXp5TG9hZFJlc3VsdD4ge1xuICBjb25zdCBsYXp5TG9hZEZuID0gc3RhdGUuJCRzdGF0ZSgpLmxhenlMb2FkO1xuXG4gIC8vIFN0b3JlL2dldCB0aGUgbGF6eSBsb2FkIHByb21pc2Ugb24vZnJvbSB0aGUgaG9va2ZuIHNvIGl0IGRvZXNuJ3QgZ2V0IHJlLWludm9rZWRcbiAgbGV0IHByb21pc2UgPSBsYXp5TG9hZEZuWydfcHJvbWlzZSddO1xuICBpZiAoIXByb21pc2UpIHtcbiAgICBjb25zdCBzdWNjZXNzID0gcmVzdWx0ID0+IHtcbiAgICAgIGRlbGV0ZSBzdGF0ZS5sYXp5TG9hZDtcbiAgICAgIGRlbGV0ZSBzdGF0ZS4kJHN0YXRlKCkubGF6eUxvYWQ7XG4gICAgICBkZWxldGUgbGF6eUxvYWRGblsnX3Byb21pc2UnXTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIGNvbnN0IGVycm9yID0gZXJyID0+IHtcbiAgICAgIGRlbGV0ZSBsYXp5TG9hZEZuWydfcHJvbWlzZSddO1xuICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLnJlamVjdChlcnIpO1xuICAgIH07XG5cbiAgICBwcm9taXNlID0gbGF6eUxvYWRGblsnX3Byb21pc2UnXSA9IHNlcnZpY2VzLiRxXG4gICAgICAud2hlbihsYXp5TG9hZEZuKHRyYW5zaXRpb24sIHN0YXRlKSlcbiAgICAgIC50aGVuKHVwZGF0ZVN0YXRlUmVnaXN0cnkpXG4gICAgICAudGhlbihzdWNjZXNzLCBlcnJvcik7XG4gIH1cblxuICAvKiogUmVnaXN0ZXIgYW55IGxhenkgbG9hZGVkIHN0YXRlIGRlZmluaXRpb25zICovXG4gIGZ1bmN0aW9uIHVwZGF0ZVN0YXRlUmVnaXN0cnkocmVzdWx0OiBMYXp5TG9hZFJlc3VsdCkge1xuICAgIGlmIChyZXN1bHQgJiYgQXJyYXkuaXNBcnJheShyZXN1bHQuc3RhdGVzKSkge1xuICAgICAgcmVzdWx0LnN0YXRlcy5mb3JFYWNoKF9zdGF0ZSA9PiB0cmFuc2l0aW9uLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LnJlZ2lzdGVyKF9zdGF0ZSkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcmV0dXJuIHByb21pc2U7XG59XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIHRyYW5zaXRpb24gKi8gLyoqICovXG5pbXBvcnQgeyBUcmFuc2l0aW9uSG9va1BoYXNlLCBQYXRoVHlwZSB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IEdldEVycm9ySGFuZGxlciwgR2V0UmVzdWx0SGFuZGxlciwgVHJhbnNpdGlvbkhvb2sgfSBmcm9tICcuL3RyYW5zaXRpb25Ib29rJztcbi8qKlxuICogVGhpcyBjbGFzcyBkZWZpbmVzIGEgdHlwZSBvZiBob29rLCBzdWNoIGFzIGBvbkJlZm9yZWAgb3IgYG9uRW50ZXJgLlxuICogUGx1Z2lucyBjYW4gZGVmaW5lIGN1c3RvbSBob29rIHR5cGVzLCBzdWNoIGFzIHN0aWNreSBzdGF0ZXMgZG9lcyBmb3IgYG9uSW5hY3RpdmVgLlxuICpcbiAqIEBpbnRlcmFsYXBpXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2l0aW9uRXZlbnRUeXBlIHtcbiAgLyogdHNsaW50OmRpc2FibGU6bm8taW5mZXJyYWJsZS10eXBlcyAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nLFxuICAgIHB1YmxpYyBob29rUGhhc2U6IFRyYW5zaXRpb25Ib29rUGhhc2UsXG4gICAgcHVibGljIGhvb2tPcmRlcjogbnVtYmVyLFxuICAgIHB1YmxpYyBjcml0ZXJpYU1hdGNoUGF0aDogUGF0aFR5cGUsXG4gICAgcHVibGljIHJldmVyc2VTb3J0OiBib29sZWFuID0gZmFsc2UsXG4gICAgcHVibGljIGdldFJlc3VsdEhhbmRsZXI6IEdldFJlc3VsdEhhbmRsZXIgPSBUcmFuc2l0aW9uSG9vay5IQU5ETEVfUkVTVUxULFxuICAgIHB1YmxpYyBnZXRFcnJvckhhbmRsZXI6IEdldEVycm9ySGFuZGxlciA9IFRyYW5zaXRpb25Ib29rLlJFSkVDVF9FUlJPUixcbiAgICBwdWJsaWMgc3luY2hyb25vdXM6IGJvb2xlYW4gPSBmYWxzZVxuICApIHt9XG59XG4iLCIvKiogQGludGVybmFsYXBpIEBtb2R1bGUgaG9va3MgKi8gLyoqICovXG5cbmltcG9ydCB7IHRyYWNlIH0gZnJvbSAnLi4vY29tbW9uL3RyYWNlJztcbmltcG9ydCB7IFJlamVjdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vcmVqZWN0RmFjdG9yeSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uU2VydmljZSB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5cbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB0aGF0IHNraXBzIGEgdHJhbnNpdGlvbiBpZiBpdCBzaG91bGQgYmUgaWdub3JlZFxuICpcbiAqIFRoaXMgaG9vayBpcyBpbnZva2VkIGF0IHRoZSBlbmQgb2YgdGhlIG9uQmVmb3JlIHBoYXNlLlxuICpcbiAqIElmIHRoZSB0cmFuc2l0aW9uIHNob3VsZCBiZSBpZ25vcmVkIChiZWNhdXNlIG5vIHBhcmFtZXRlciBvciBzdGF0ZXMgY2hhbmdlZClcbiAqIHRoZW4gdGhlIHRyYW5zaXRpb24gaXMgaWdub3JlZCBhbmQgbm90IHByb2Nlc3NlZC5cbiAqL1xuZnVuY3Rpb24gaWdub3JlZEhvb2sodHJhbnM6IFRyYW5zaXRpb24pIHtcbiAgY29uc3QgaWdub3JlZFJlYXNvbiA9IHRyYW5zLl9pZ25vcmVkUmVhc29uKCk7XG4gIGlmICghaWdub3JlZFJlYXNvbikgcmV0dXJuO1xuXG4gIHRyYWNlLnRyYWNlVHJhbnNpdGlvbklnbm9yZWQodHJhbnMpO1xuXG4gIGNvbnN0IHBlbmRpbmcgPSB0cmFucy5yb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uO1xuXG4gIC8vIFRoZSB1c2VyIGNsaWNrZWQgYSBsaW5rIGdvaW5nIGJhY2sgdG8gdGhlICpjdXJyZW50IHN0YXRlKiAoJ0EnKVxuICAvLyBIb3dldmVyLCB0aGVyZSBpcyBhbHNvIGEgcGVuZGluZyB0cmFuc2l0aW9uIGluIGZsaWdodCAodG8gJ0InKVxuICAvLyBBYm9ydCB0aGUgdHJhbnNpdGlvbiB0byAnQicgYmVjYXVzZSB0aGUgdXNlciBub3cgd2FudHMgdG8gYmUgYmFjayBhdCAnQScuXG4gIGlmIChpZ25vcmVkUmVhc29uID09PSAnU2FtZUFzQ3VycmVudCcgJiYgcGVuZGluZykge1xuICAgIHBlbmRpbmcuYWJvcnQoKTtcbiAgfVxuXG4gIHJldHVybiBSZWplY3Rpb24uaWdub3JlZCgpLnRvUHJvbWlzZSgpO1xufVxuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJJZ25vcmVkVHJhbnNpdGlvbkhvb2sgPSAodHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlKSA9PlxuICB0cmFuc2l0aW9uU2VydmljZS5vbkJlZm9yZSh7fSwgaWdub3JlZEhvb2ssIHsgcHJpb3JpdHk6IC05OTk5IH0pO1xuIiwiLyoqIEBpbnRlcm5hbGFwaSBAbW9kdWxlIGhvb2tzICovIC8qKiAqL1xuXG5pbXBvcnQgeyBUcmFuc2l0aW9uU2VydmljZSB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5cbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB0aGF0IHJlamVjdHMgdGhlIFRyYW5zaXRpb24gaWYgaXQgaXMgaW52YWxpZFxuICpcbiAqIFRoaXMgaG9vayBpcyBpbnZva2VkIGF0IHRoZSBlbmQgb2YgdGhlIG9uQmVmb3JlIHBoYXNlLlxuICogSWYgdGhlIHRyYW5zaXRpb24gaXMgaW52YWxpZCAoZm9yIGV4YW1wbGUsIHBhcmFtIHZhbHVlcyBkbyBub3QgdmFsaWRhdGUpXG4gKiB0aGVuIHRoZSB0cmFuc2l0aW9uIGlzIHJlamVjdGVkLlxuICovXG5mdW5jdGlvbiBpbnZhbGlkVHJhbnNpdGlvbkhvb2sodHJhbnM6IFRyYW5zaXRpb24pIHtcbiAgaWYgKCF0cmFucy52YWxpZCgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKHRyYW5zLmVycm9yKCkudG9TdHJpbmcoKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVySW52YWxpZFRyYW5zaXRpb25Ib29rID0gKHRyYW5zaXRpb25TZXJ2aWNlOiBUcmFuc2l0aW9uU2VydmljZSkgPT5cbiAgdHJhbnNpdGlvblNlcnZpY2Uub25CZWZvcmUoe30sIGludmFsaWRUcmFuc2l0aW9uSG9vaywgeyBwcmlvcml0eTogLTEwMDAwIH0pO1xuIiwiLyoqIEBwdWJsaWNhcGkgQG1vZHVsZSB0cmFuc2l0aW9uICovIC8qKiAqL1xuaW1wb3J0IHtcbiAgSUhvb2tSZWdpc3RyeSxcbiAgVHJhbnNpdGlvbk9wdGlvbnMsXG4gIFRyYW5zaXRpb25Ib29rU2NvcGUsXG4gIFRyYW5zaXRpb25Ib29rUGhhc2UsXG4gIFRyYW5zaXRpb25DcmVhdGVIb29rRm4sXG4gIEhvb2tNYXRjaENyaXRlcmlhLFxuICBIb29rUmVnT3B0aW9ucyxcbiAgUGF0aFR5cGVzLFxuICBQYXRoVHlwZSxcbiAgUmVnaXN0ZXJlZEhvb2tzLFxuICBUcmFuc2l0aW9uSG9va0ZuLFxuICBUcmFuc2l0aW9uU3RhdGVIb29rRm4sXG59IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICcuL3RyYW5zaXRpb24nO1xuaW1wb3J0IHsgbWFrZUV2ZW50LCBSZWdpc3RlcmVkSG9vayB9IGZyb20gJy4vaG9va1JlZ2lzdHJ5JztcbmltcG9ydCB7IFRhcmdldFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvdGFyZ2V0U3RhdGUnO1xuaW1wb3J0IHsgUGF0aE5vZGUgfSBmcm9tICcuLi9wYXRoL3BhdGhOb2RlJztcbmltcG9ydCB7IFZpZXdTZXJ2aWNlIH0gZnJvbSAnLi4vdmlldy92aWV3JztcbmltcG9ydCB7IFVJUm91dGVyIH0gZnJvbSAnLi4vcm91dGVyJztcbmltcG9ydCB7IHJlZ2lzdGVyQWRkQ29yZVJlc29sdmFibGVzLCB0cmVlQ2hhbmdlc0NsZWFudXAgfSBmcm9tICcuLi9ob29rcy9jb3JlUmVzb2x2YWJsZXMnO1xuaW1wb3J0IHsgcmVnaXN0ZXJSZWRpcmVjdFRvSG9vayB9IGZyb20gJy4uL2hvb2tzL3JlZGlyZWN0VG8nO1xuaW1wb3J0IHsgcmVnaXN0ZXJPbkV4aXRIb29rLCByZWdpc3Rlck9uUmV0YWluSG9vaywgcmVnaXN0ZXJPbkVudGVySG9vayB9IGZyb20gJy4uL2hvb2tzL29uRW50ZXJFeGl0UmV0YWluJztcbmltcG9ydCB7IHJlZ2lzdGVyRWFnZXJSZXNvbHZlUGF0aCwgcmVnaXN0ZXJMYXp5UmVzb2x2ZVN0YXRlLCByZWdpc3RlclJlc29sdmVSZW1haW5pbmcgfSBmcm9tICcuLi9ob29rcy9yZXNvbHZlJztcbmltcG9ydCB7IHJlZ2lzdGVyTG9hZEVudGVyaW5nVmlld3MsIHJlZ2lzdGVyQWN0aXZhdGVWaWV3cyB9IGZyb20gJy4uL2hvb2tzL3ZpZXdzJztcbmltcG9ydCB7IHJlZ2lzdGVyVXBkYXRlR2xvYmFsU3RhdGUgfSBmcm9tICcuLi9ob29rcy91cGRhdGVHbG9iYWxzJztcbmltcG9ydCB7IHJlZ2lzdGVyVXBkYXRlVXJsIH0gZnJvbSAnLi4vaG9va3MvdXJsJztcbmltcG9ydCB7IHJlZ2lzdGVyTGF6eUxvYWRIb29rIH0gZnJvbSAnLi4vaG9va3MvbGF6eUxvYWQnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbkV2ZW50VHlwZSB9IGZyb20gJy4vdHJhbnNpdGlvbkV2ZW50VHlwZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uSG9vaywgR2V0UmVzdWx0SGFuZGxlciwgR2V0RXJyb3JIYW5kbGVyIH0gZnJvbSAnLi90cmFuc2l0aW9uSG9vayc7XG5pbXBvcnQgeyBpc0RlZmluZWQgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyByZW1vdmVGcm9tLCB2YWx1ZXMsIGNyZWF0ZVByb3h5RnVuY3Rpb25zIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnLi4vaW50ZXJmYWNlJzsgLy8gaGFzIG9yIGlzIHVzaW5nXG5pbXBvcnQgeyB2YWwgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IHJlZ2lzdGVySWdub3JlZFRyYW5zaXRpb25Ib29rIH0gZnJvbSAnLi4vaG9va3MvaWdub3JlZFRyYW5zaXRpb24nO1xuaW1wb3J0IHsgcmVnaXN0ZXJJbnZhbGlkVHJhbnNpdGlvbkhvb2sgfSBmcm9tICcuLi9ob29rcy9pbnZhbGlkVHJhbnNpdGlvbic7XG5cbi8qKlxuICogVGhlIGRlZmF1bHQgW1tUcmFuc2l0aW9uXV0gb3B0aW9ucy5cbiAqXG4gKiBJbmNsdWRlIHRoaXMgb2JqZWN0IHdoZW4gYXBwbHlpbmcgY3VzdG9tIGRlZmF1bHRzOlxuICogbGV0IHJlbG9hZE9wdHMgPSB7IHJlbG9hZDogdHJ1ZSwgbm90aWZ5OiB0cnVlIH1cbiAqIGxldCBvcHRpb25zID0gZGVmYXVsdHModGhlaXJPcHRzLCBjdXN0b21EZWZhdWx0cywgZGVmYXVsdE9wdGlvbnMpO1xuICovXG5leHBvcnQgbGV0IGRlZmF1bHRUcmFuc09wdHM6IFRyYW5zaXRpb25PcHRpb25zID0ge1xuICBsb2NhdGlvbjogdHJ1ZSxcbiAgcmVsYXRpdmU6IG51bGwsXG4gIGluaGVyaXQ6IGZhbHNlLFxuICBub3RpZnk6IHRydWUsXG4gIHJlbG9hZDogZmFsc2UsXG4gIHN1cGVyY2VkZTogdHJ1ZSxcbiAgY3VzdG9tOiB7fSxcbiAgY3VycmVudDogKCkgPT4gbnVsbCxcbiAgc291cmNlOiAndW5rbm93bicsXG59O1xuXG4vKipcbiAqIFBsdWdpbiBBUEkgZm9yIFRyYW5zaXRpb24gU2VydmljZVxuICogQGludGVybmFsYXBpXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNpdGlvblNlcnZpY2VQbHVnaW5BUEkge1xuICAvKipcbiAgICogQWRkcyBhIFBhdGggdG8gYmUgdXNlZCBhcyBhIGNyaXRlcmlvbiBhZ2FpbnN0IGEgVHJlZUNoYW5nZXMgcGF0aFxuICAgKlxuICAgKiBGb3IgZXhhbXBsZTogdGhlIGBleGl0aW5nYCBwYXRoIGluIFtbSG9va01hdGNoQ3JpdGVyaWFdXSBpcyBhIFNUQVRFIHNjb3BlZCBwYXRoLlxuICAgKiBJdCB3YXMgZGVmaW5lZCBieSBjYWxsaW5nIGBkZWZpbmVUcmVlQ2hhbmdlc0NyaXRlcmlvbignZXhpdGluZycsIFRyYW5zaXRpb25Ib29rU2NvcGUuU1RBVEUpYFxuICAgKiBFYWNoIHN0YXRlIGluIHRoZSBleGl0aW5nIHBhdGggaXMgY2hlY2tlZCBhZ2FpbnN0IHRoZSBjcml0ZXJpYSBhbmQgcmV0dXJuZWQgYXMgcGFydCBvZiB0aGUgbWF0Y2guXG4gICAqXG4gICAqIEFub3RoZXIgZXhhbXBsZTogdGhlIGB0b2AgcGF0aCBpbiBbW0hvb2tNYXRjaENyaXRlcmlhXV0gaXMgYSBUUkFOU0lUSU9OIHNjb3BlZCBwYXRoLlxuICAgKiBJdCB3YXMgZGVmaW5lZCBieSBjYWxsaW5nIGBkZWZpbmVUcmVlQ2hhbmdlc0NyaXRlcmlvbigndG8nLCBUcmFuc2l0aW9uSG9va1Njb3BlLlRSQU5TSVRJT04pYFxuICAgKiBPbmx5IHRoZSB0YWlsIG9mIHRoZSBgdG9gIHBhdGggaXMgY2hlY2tlZCBhZ2FpbnN0IHRoZSBjcml0ZXJpYSBhbmQgcmV0dXJuZWQgYXMgcGFydCBvZiB0aGUgbWF0Y2guXG4gICAqL1xuICBfZGVmaW5lUGF0aFR5cGUobmFtZTogc3RyaW5nLCBob29rU2NvcGU6IFRyYW5zaXRpb25Ib29rU2NvcGUpO1xuXG4gIC8qKlxuICAgKiBHZXRzIGEgUGF0aCBkZWZpbml0aW9uIHVzZWQgYXMgYSBjcml0ZXJpb24gYWdhaW5zdCBhIFRyZWVDaGFuZ2VzIHBhdGhcbiAgICovXG4gIF9nZXRQYXRoVHlwZXMoKTogUGF0aFR5cGVzO1xuXG4gIC8qKlxuICAgKiBEZWZpbmVzIGEgdHJhbnNpdGlvbiBob29rIHR5cGUgYW5kIHJldHVybnMgYSB0cmFuc2l0aW9uIGhvb2sgcmVnaXN0cmF0aW9uXG4gICAqIGZ1bmN0aW9uICh3aGljaCBjYW4gdGhlbiBiZSB1c2VkIHRvIHJlZ2lzdGVyIGhvb2tzIG9mIHRoaXMgdHlwZSkuXG4gICAqL1xuICBfZGVmaW5lRXZlbnQoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGhvb2tQaGFzZTogVHJhbnNpdGlvbkhvb2tQaGFzZSxcbiAgICBob29rT3JkZXI6IG51bWJlcixcbiAgICBjcml0ZXJpYU1hdGNoUGF0aDogUGF0aFR5cGUsXG4gICAgcmV2ZXJzZVNvcnQ/OiBib29sZWFuLFxuICAgIGdldFJlc3VsdEhhbmRsZXI/OiBHZXRSZXN1bHRIYW5kbGVyLFxuICAgIGdldEVycm9ySGFuZGxlcj86IEdldEVycm9ySGFuZGxlcixcbiAgICByZWplY3RJZlN1cGVyc2VkZWQ/OiBib29sZWFuXG4gICk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGtub3duIGV2ZW50IHR5cGVzLCBzdWNoIGFzIGBvbkJlZm9yZWBcbiAgICogSWYgYSBwaGFzZSBhcmd1bWVudCBpcyBwcm92aWRlZCwgcmV0dXJucyBvbmx5IGV2ZW50cyBmb3IgdGhlIGdpdmVuIHBoYXNlLlxuICAgKi9cbiAgX2dldEV2ZW50cyhwaGFzZT86IFRyYW5zaXRpb25Ib29rUGhhc2UpOiBUcmFuc2l0aW9uRXZlbnRUeXBlW107XG5cbiAgLyoqIFJldHVybnMgdGhlIGhvb2tzIHJlZ2lzdGVyZWQgZm9yIHRoZSBnaXZlbiBob29rIG5hbWUgKi9cbiAgZ2V0SG9va3MoaG9va05hbWU6IHN0cmluZyk6IFJlZ2lzdGVyZWRIb29rW107XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyBwcm92aWRlcyBzZXJ2aWNlcyByZWxhdGVkIHRvIFRyYW5zaXRpb25zLlxuICpcbiAqIC0gTW9zdCBpbXBvcnRhbnRseSwgaXQgYWxsb3dzIGdsb2JhbCBUcmFuc2l0aW9uIEhvb2tzIHRvIGJlIHJlZ2lzdGVyZWQuXG4gKiAtIEl0IGFsbG93cyB0aGUgZGVmYXVsdCB0cmFuc2l0aW9uIGVycm9yIGhhbmRsZXIgdG8gYmUgc2V0LlxuICogLSBJdCBhbHNvIGhhcyBhIGZhY3RvcnkgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBbW1RyYW5zaXRpb25dXSBvYmplY3RzLCAodXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSBbW1N0YXRlU2VydmljZV1dKS5cbiAqXG4gKiBBdCBib290c3RyYXAsIFtbVUlSb3V0ZXJdXSBjcmVhdGVzIGEgc2luZ2xlIGluc3RhbmNlIChzaW5nbGV0b24pIG9mIHRoaXMgY2xhc3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2l0aW9uU2VydmljZSBpbXBsZW1lbnRzIElIb29rUmVnaXN0cnksIERpc3Bvc2FibGUge1xuICAvKiogQGhpZGRlbiAqL1xuICBfdHJhbnNpdGlvbkNvdW50ID0gMDtcblxuICAvKiogQGhpZGRlbiAqL1xuICBwdWJsaWMgJHZpZXc6IFZpZXdTZXJ2aWNlO1xuXG4gIC8qKiBAaGlkZGVuIFRoZSB0cmFuc2l0aW9uIGhvb2sgdHlwZXMsIHN1Y2ggYXMgYG9uRW50ZXJgLCBgb25TdGFydGAsIGV0YyAqL1xuICBwcml2YXRlIF9ldmVudFR5cGVzOiBUcmFuc2l0aW9uRXZlbnRUeXBlW10gPSBbXTtcbiAgLyoqIEBoaWRkZW4gVGhlIHJlZ2lzdGVyZWQgdHJhbnNpdGlvbiBob29rcyAqL1xuICBfcmVnaXN0ZXJlZEhvb2tzID0ge30gYXMgUmVnaXN0ZXJlZEhvb2tzO1xuICAvKiogQGhpZGRlbiBUaGUgIHBhdGhzIG9uIGEgY3JpdGVyaWEgb2JqZWN0ICovXG4gIHByaXZhdGUgX2NyaXRlcmlhUGF0aHMgPSB7fSBhcyBQYXRoVHlwZXM7XG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX3JvdXRlcjogVUlSb3V0ZXI7XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICBfcGx1Z2luYXBpOiBUcmFuc2l0aW9uU2VydmljZVBsdWdpbkFQSTtcblxuICAvKipcbiAgICogVGhpcyBvYmplY3QgaGFzIGhvb2sgZGUtcmVnaXN0cmF0aW9uIGZ1bmN0aW9ucyBmb3IgdGhlIGJ1aWx0LWluIGhvb2tzLlxuICAgKiBUaGlzIGNhbiBiZSB1c2VkIGJ5IHRoaXJkIHBhcnRpZXMgbGlicmFyaWVzIHRoYXQgd2lzaCB0byBjdXN0b21pemUgdGhlIGJlaGF2aW9yc1xuICAgKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBfZGVyZWdpc3Rlckhvb2tGbnM6IHtcbiAgICBhZGRDb3JlUmVzb2x2ZXM6IEZ1bmN0aW9uO1xuICAgIGlnbm9yZWQ6IEZ1bmN0aW9uO1xuICAgIGludmFsaWQ6IEZ1bmN0aW9uO1xuICAgIHJlZGlyZWN0VG86IEZ1bmN0aW9uO1xuICAgIG9uRXhpdDogRnVuY3Rpb247XG4gICAgb25SZXRhaW46IEZ1bmN0aW9uO1xuICAgIG9uRW50ZXI6IEZ1bmN0aW9uO1xuICAgIGVhZ2VyUmVzb2x2ZTogRnVuY3Rpb247XG4gICAgbGF6eVJlc29sdmU6IEZ1bmN0aW9uO1xuICAgIHJlc29sdmVBbGw6IEZ1bmN0aW9uO1xuICAgIGxvYWRWaWV3czogRnVuY3Rpb247XG4gICAgYWN0aXZhdGVWaWV3czogRnVuY3Rpb247XG4gICAgdXBkYXRlR2xvYmFsczogRnVuY3Rpb247XG4gICAgdXBkYXRlVXJsOiBGdW5jdGlvbjtcbiAgICBsYXp5TG9hZDogRnVuY3Rpb247XG4gIH07XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgY29uc3RydWN0b3IoX3JvdXRlcjogVUlSb3V0ZXIpIHtcbiAgICB0aGlzLl9yb3V0ZXIgPSBfcm91dGVyO1xuICAgIHRoaXMuJHZpZXcgPSBfcm91dGVyLnZpZXdTZXJ2aWNlO1xuICAgIHRoaXMuX2RlcmVnaXN0ZXJIb29rRm5zID0gPGFueT57fTtcbiAgICB0aGlzLl9wbHVnaW5hcGkgPSA8VHJhbnNpdGlvblNlcnZpY2VQbHVnaW5BUEk+KFxuICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnModmFsKHRoaXMpLCB7fSwgdmFsKHRoaXMpLCBbXG4gICAgICAgICdfZGVmaW5lUGF0aFR5cGUnLFxuICAgICAgICAnX2RlZmluZUV2ZW50JyxcbiAgICAgICAgJ19nZXRQYXRoVHlwZXMnLFxuICAgICAgICAnX2dldEV2ZW50cycsXG4gICAgICAgICdnZXRIb29rcycsXG4gICAgICBdKVxuICAgICk7XG5cbiAgICB0aGlzLl9kZWZpbmVDb3JlUGF0aHMoKTtcbiAgICB0aGlzLl9kZWZpbmVDb3JlRXZlbnRzKCk7XG4gICAgdGhpcy5fcmVnaXN0ZXJDb3JlVHJhbnNpdGlvbkhvb2tzKCk7XG4gICAgX3JvdXRlci5nbG9iYWxzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5vbkV2aWN0KHRyZWVDaGFuZ2VzQ2xlYW51cCk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgW1tUcmFuc2l0aW9uSG9va0ZuXV0sIGNhbGxlZCAqd2hpbGUgYSB0cmFuc2l0aW9uIGlzIGJlaW5nIGNvbnN0cnVjdGVkKi5cbiAgICpcbiAgICogUmVnaXN0ZXJzIGEgdHJhbnNpdGlvbiBsaWZlY3ljbGUgaG9vaywgd2hpY2ggaXMgaW52b2tlZCBkdXJpbmcgdHJhbnNpdGlvbiBjb25zdHJ1Y3Rpb24uXG4gICAqXG4gICAqIFRoaXMgbG93IGxldmVsIGhvb2sgc2hvdWxkIG9ubHkgYmUgdXNlZCBieSBwbHVnaW5zLlxuICAgKiBUaGlzIGNhbiBiZSBhIHVzZWZ1bCB0aW1lIGZvciBwbHVnaW5zIHRvIGFkZCByZXNvbHZlcyBvciBtdXRhdGUgdGhlIHRyYW5zaXRpb24gYXMgbmVlZGVkLlxuICAgKiBUaGUgU3RpY2t5IFN0YXRlcyBwbHVnaW4gdXNlcyB0aGlzIGhvb2sgdG8gbW9kaWZ5IHRoZSB0cmVlY2hhbmdlcy5cbiAgICpcbiAgICogIyMjIExpZmVjeWNsZVxuICAgKlxuICAgKiBgb25DcmVhdGVgIGhvb2tzIGFyZSBpbnZva2VkICp3aGlsZSBhIHRyYW5zaXRpb24gaXMgYmVpbmcgY29uc3RydWN0ZWQqLlxuICAgKlxuICAgKiAjIyMgUmV0dXJuIHZhbHVlXG4gICAqXG4gICAqIFRoZSBob29rJ3MgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWRcbiAgICpcbiAgICogQGludGVybmFsYXBpXG4gICAqIEBwYXJhbSBjcml0ZXJpYSBkZWZpbmVzIHdoaWNoIFRyYW5zaXRpb25zIHRoZSBIb29rIHNob3VsZCBiZSBpbnZva2VkIGZvci5cbiAgICogQHBhcmFtIGNhbGxiYWNrIHRoZSBob29rIGZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgaW52b2tlZC5cbiAgICogQHBhcmFtIG9wdGlvbnMgdGhlIHJlZ2lzdHJhdGlvbiBvcHRpb25zXG4gICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggZGVyZWdpc3RlcnMgdGhlIGhvb2suXG4gICAqL1xuICBvbkNyZWF0ZShjcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uQ3JlYXRlSG9va0ZuLCBvcHRpb25zPzogSG9va1JlZ09wdGlvbnMpOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBvbkJlZm9yZShjcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uSG9va0ZuLCBvcHRpb25zPzogSG9va1JlZ09wdGlvbnMpOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBvblN0YXJ0KGNyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25Ib29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG9uRXhpdChjcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uU3RhdGVIb29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG9uUmV0YWluKGNyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25TdGF0ZUhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb24ge1xuICAgIHJldHVybjtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgb25FbnRlcihjcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uU3RhdGVIb29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG9uRmluaXNoKGNyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25Ib29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG9uU3VjY2Vzcyhjcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uSG9va0ZuLCBvcHRpb25zPzogSG9va1JlZ09wdGlvbnMpOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBvbkVycm9yKGNyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25Ib29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogZGlzcG9zZVxuICAgKiBAaW50ZXJuYWxhcGlcbiAgICovXG4gIGRpc3Bvc2Uocm91dGVyOiBVSVJvdXRlcikge1xuICAgIHZhbHVlcyh0aGlzLl9yZWdpc3RlcmVkSG9va3MpLmZvckVhY2goKGhvb2tzQXJyYXk6IFJlZ2lzdGVyZWRIb29rW10pID0+XG4gICAgICBob29rc0FycmF5LmZvckVhY2goaG9vayA9PiB7XG4gICAgICAgIGhvb2suX2RlcmVnaXN0ZXJlZCA9IHRydWU7XG4gICAgICAgIHJlbW92ZUZyb20oaG9va3NBcnJheSwgaG9vayk7XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBbW1RyYW5zaXRpb25dXSBvYmplY3RcbiAgICpcbiAgICogVGhpcyBpcyBhIGZhY3RvcnkgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBUcmFuc2l0aW9uIG9iamVjdHMuXG4gICAqIEl0IGlzIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgW1tTdGF0ZVNlcnZpY2VdXSBhbmQgc2hvdWxkIGdlbmVyYWxseSBub3QgYmUgY2FsbGVkIGJ5IGFwcGxpY2F0aW9uIGNvZGUuXG4gICAqXG4gICAqIEBwYXJhbSBmcm9tUGF0aCB0aGUgcGF0aCB0byB0aGUgY3VycmVudCBzdGF0ZSAodGhlIGZyb20gc3RhdGUpXG4gICAqIEBwYXJhbSB0YXJnZXRTdGF0ZSB0aGUgdGFyZ2V0IHN0YXRlIChkZXN0aW5hdGlvbilcbiAgICogQHJldHVybnMgYSBUcmFuc2l0aW9uXG4gICAqL1xuICBjcmVhdGUoZnJvbVBhdGg6IFBhdGhOb2RlW10sIHRhcmdldFN0YXRlOiBUYXJnZXRTdGF0ZSk6IFRyYW5zaXRpb24ge1xuICAgIHJldHVybiBuZXcgVHJhbnNpdGlvbihmcm9tUGF0aCwgdGFyZ2V0U3RhdGUsIHRoaXMuX3JvdXRlcik7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF9kZWZpbmVDb3JlRXZlbnRzKCkge1xuICAgIGNvbnN0IFBoYXNlID0gVHJhbnNpdGlvbkhvb2tQaGFzZTtcbiAgICBjb25zdCBUSCA9IFRyYW5zaXRpb25Ib29rO1xuICAgIGNvbnN0IHBhdGhzID0gdGhpcy5fY3JpdGVyaWFQYXRocztcbiAgICBjb25zdCBOT1JNQUxfU09SVCA9IGZhbHNlLFxuICAgICAgUkVWRVJTRV9TT1JUID0gdHJ1ZTtcbiAgICBjb25zdCBTWU5DSFJPTk9VUyA9IHRydWU7XG5cbiAgICB0aGlzLl9kZWZpbmVFdmVudChcbiAgICAgICdvbkNyZWF0ZScsXG4gICAgICBQaGFzZS5DUkVBVEUsXG4gICAgICAwLFxuICAgICAgcGF0aHMudG8sXG4gICAgICBOT1JNQUxfU09SVCxcbiAgICAgIFRILkxPR19SRUpFQ1RFRF9SRVNVTFQsXG4gICAgICBUSC5USFJPV19FUlJPUixcbiAgICAgIFNZTkNIUk9OT1VTXG4gICAgKTtcblxuICAgIHRoaXMuX2RlZmluZUV2ZW50KCdvbkJlZm9yZScsIFBoYXNlLkJFRk9SRSwgMCwgcGF0aHMudG8pO1xuXG4gICAgdGhpcy5fZGVmaW5lRXZlbnQoJ29uU3RhcnQnLCBQaGFzZS5SVU4sIDAsIHBhdGhzLnRvKTtcbiAgICB0aGlzLl9kZWZpbmVFdmVudCgnb25FeGl0JywgUGhhc2UuUlVOLCAxMDAsIHBhdGhzLmV4aXRpbmcsIFJFVkVSU0VfU09SVCk7XG4gICAgdGhpcy5fZGVmaW5lRXZlbnQoJ29uUmV0YWluJywgUGhhc2UuUlVOLCAyMDAsIHBhdGhzLnJldGFpbmVkKTtcbiAgICB0aGlzLl9kZWZpbmVFdmVudCgnb25FbnRlcicsIFBoYXNlLlJVTiwgMzAwLCBwYXRocy5lbnRlcmluZyk7XG4gICAgdGhpcy5fZGVmaW5lRXZlbnQoJ29uRmluaXNoJywgUGhhc2UuUlVOLCA0MDAsIHBhdGhzLnRvKTtcblxuICAgIHRoaXMuX2RlZmluZUV2ZW50KFxuICAgICAgJ29uU3VjY2VzcycsXG4gICAgICBQaGFzZS5TVUNDRVNTLFxuICAgICAgMCxcbiAgICAgIHBhdGhzLnRvLFxuICAgICAgTk9STUFMX1NPUlQsXG4gICAgICBUSC5MT0dfUkVKRUNURURfUkVTVUxULFxuICAgICAgVEguTE9HX0VSUk9SLFxuICAgICAgU1lOQ0hST05PVVNcbiAgICApO1xuICAgIHRoaXMuX2RlZmluZUV2ZW50KFxuICAgICAgJ29uRXJyb3InLFxuICAgICAgUGhhc2UuRVJST1IsXG4gICAgICAwLFxuICAgICAgcGF0aHMudG8sXG4gICAgICBOT1JNQUxfU09SVCxcbiAgICAgIFRILkxPR19SRUpFQ1RFRF9SRVNVTFQsXG4gICAgICBUSC5MT0dfRVJST1IsXG4gICAgICBTWU5DSFJPTk9VU1xuICAgICk7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF9kZWZpbmVDb3JlUGF0aHMoKSB7XG4gICAgY29uc3QgeyBTVEFURSwgVFJBTlNJVElPTiB9ID0gVHJhbnNpdGlvbkhvb2tTY29wZTtcblxuICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKCd0bycsIFRSQU5TSVRJT04pO1xuICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKCdmcm9tJywgVFJBTlNJVElPTik7XG4gICAgdGhpcy5fZGVmaW5lUGF0aFR5cGUoJ2V4aXRpbmcnLCBTVEFURSk7XG4gICAgdGhpcy5fZGVmaW5lUGF0aFR5cGUoJ3JldGFpbmVkJywgU1RBVEUpO1xuICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKCdlbnRlcmluZycsIFNUQVRFKTtcbiAgfVxuXG4gIC8qKiBAaGlkZGVuICovXG4gIF9kZWZpbmVFdmVudChcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgaG9va1BoYXNlOiBUcmFuc2l0aW9uSG9va1BoYXNlLFxuICAgIGhvb2tPcmRlcjogbnVtYmVyLFxuICAgIGNyaXRlcmlhTWF0Y2hQYXRoOiBQYXRoVHlwZSxcbiAgICByZXZlcnNlU29ydCA9IGZhbHNlLFxuICAgIGdldFJlc3VsdEhhbmRsZXI6IEdldFJlc3VsdEhhbmRsZXIgPSBUcmFuc2l0aW9uSG9vay5IQU5ETEVfUkVTVUxULFxuICAgIGdldEVycm9ySGFuZGxlcjogR2V0RXJyb3JIYW5kbGVyID0gVHJhbnNpdGlvbkhvb2suUkVKRUNUX0VSUk9SLFxuICAgIHN5bmNocm9ub3VzID0gZmFsc2VcbiAgKSB7XG4gICAgY29uc3QgZXZlbnRUeXBlID0gbmV3IFRyYW5zaXRpb25FdmVudFR5cGUoXG4gICAgICBuYW1lLFxuICAgICAgaG9va1BoYXNlLFxuICAgICAgaG9va09yZGVyLFxuICAgICAgY3JpdGVyaWFNYXRjaFBhdGgsXG4gICAgICByZXZlcnNlU29ydCxcbiAgICAgIGdldFJlc3VsdEhhbmRsZXIsXG4gICAgICBnZXRFcnJvckhhbmRsZXIsXG4gICAgICBzeW5jaHJvbm91c1xuICAgICk7XG5cbiAgICB0aGlzLl9ldmVudFR5cGVzLnB1c2goZXZlbnRUeXBlKTtcbiAgICBtYWtlRXZlbnQodGhpcywgdGhpcywgZXZlbnRUeXBlKTtcbiAgfVxuXG4gIC8qKiBAaGlkZGVuICovXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxuICBwcml2YXRlIF9nZXRFdmVudHMocGhhc2U/OiBUcmFuc2l0aW9uSG9va1BoYXNlKTogVHJhbnNpdGlvbkV2ZW50VHlwZVtdIHtcbiAgICBjb25zdCB0cmFuc2l0aW9uSG9va1R5cGVzID0gaXNEZWZpbmVkKHBoYXNlKVxuICAgICAgPyB0aGlzLl9ldmVudFR5cGVzLmZpbHRlcih0eXBlID0+IHR5cGUuaG9va1BoYXNlID09PSBwaGFzZSlcbiAgICAgIDogdGhpcy5fZXZlbnRUeXBlcy5zbGljZSgpO1xuXG4gICAgcmV0dXJuIHRyYW5zaXRpb25Ib29rVHlwZXMuc29ydCgobCwgcikgPT4ge1xuICAgICAgY29uc3QgY21wQnlQaGFzZSA9IGwuaG9va1BoYXNlIC0gci5ob29rUGhhc2U7XG4gICAgICByZXR1cm4gY21wQnlQaGFzZSA9PT0gMCA/IGwuaG9va09yZGVyIC0gci5ob29rT3JkZXIgOiBjbXBCeVBoYXNlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBQYXRoIHRvIGJlIHVzZWQgYXMgYSBjcml0ZXJpb24gYWdhaW5zdCBhIFRyZWVDaGFuZ2VzIHBhdGhcbiAgICpcbiAgICogRm9yIGV4YW1wbGU6IHRoZSBgZXhpdGluZ2AgcGF0aCBpbiBbW0hvb2tNYXRjaENyaXRlcmlhXV0gaXMgYSBTVEFURSBzY29wZWQgcGF0aC5cbiAgICogSXQgd2FzIGRlZmluZWQgYnkgY2FsbGluZyBgZGVmaW5lVHJlZUNoYW5nZXNDcml0ZXJpb24oJ2V4aXRpbmcnLCBUcmFuc2l0aW9uSG9va1Njb3BlLlNUQVRFKWBcbiAgICogRWFjaCBzdGF0ZSBpbiB0aGUgZXhpdGluZyBwYXRoIGlzIGNoZWNrZWQgYWdhaW5zdCB0aGUgY3JpdGVyaWEgYW5kIHJldHVybmVkIGFzIHBhcnQgb2YgdGhlIG1hdGNoLlxuICAgKlxuICAgKiBBbm90aGVyIGV4YW1wbGU6IHRoZSBgdG9gIHBhdGggaW4gW1tIb29rTWF0Y2hDcml0ZXJpYV1dIGlzIGEgVFJBTlNJVElPTiBzY29wZWQgcGF0aC5cbiAgICogSXQgd2FzIGRlZmluZWQgYnkgY2FsbGluZyBgZGVmaW5lVHJlZUNoYW5nZXNDcml0ZXJpb24oJ3RvJywgVHJhbnNpdGlvbkhvb2tTY29wZS5UUkFOU0lUSU9OKWBcbiAgICogT25seSB0aGUgdGFpbCBvZiB0aGUgYHRvYCBwYXRoIGlzIGNoZWNrZWQgYWdhaW5zdCB0aGUgY3JpdGVyaWEgYW5kIHJldHVybmVkIGFzIHBhcnQgb2YgdGhlIG1hdGNoLlxuICAgKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBwcml2YXRlIF9kZWZpbmVQYXRoVHlwZShuYW1lOiBzdHJpbmcsIGhvb2tTY29wZTogVHJhbnNpdGlvbkhvb2tTY29wZSkge1xuICAgIHRoaXMuX2NyaXRlcmlhUGF0aHNbbmFtZV0gPSB7IG5hbWUsIHNjb3BlOiBob29rU2NvcGUgfTtcbiAgfVxuXG4gIC8qKiAqIEBoaWRkZW4gKi9cbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG4gIHByaXZhdGUgX2dldFBhdGhUeXBlcygpOiBQYXRoVHlwZXMge1xuICAgIHJldHVybiB0aGlzLl9jcml0ZXJpYVBhdGhzO1xuICB9XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgcHVibGljIGdldEhvb2tzKGhvb2tOYW1lOiBzdHJpbmcpOiBSZWdpc3RlcmVkSG9va1tdIHtcbiAgICByZXR1cm4gdGhpcy5fcmVnaXN0ZXJlZEhvb2tzW2hvb2tOYW1lXTtcbiAgfVxuXG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX3JlZ2lzdGVyQ29yZVRyYW5zaXRpb25Ib29rcygpIHtcbiAgICBjb25zdCBmbnMgPSB0aGlzLl9kZXJlZ2lzdGVySG9va0ZucztcblxuICAgIGZucy5hZGRDb3JlUmVzb2x2ZXMgPSByZWdpc3RlckFkZENvcmVSZXNvbHZhYmxlcyh0aGlzKTtcbiAgICBmbnMuaWdub3JlZCA9IHJlZ2lzdGVySWdub3JlZFRyYW5zaXRpb25Ib29rKHRoaXMpO1xuICAgIGZucy5pbnZhbGlkID0gcmVnaXN0ZXJJbnZhbGlkVHJhbnNpdGlvbkhvb2sodGhpcyk7XG5cbiAgICAvLyBXaXJlIHVwIHJlZGlyZWN0VG8gaG9va1xuICAgIGZucy5yZWRpcmVjdFRvID0gcmVnaXN0ZXJSZWRpcmVjdFRvSG9vayh0aGlzKTtcblxuICAgIC8vIFdpcmUgdXAgb25FeGl0L1JldGFpbi9FbnRlciBzdGF0ZSBob29rc1xuICAgIGZucy5vbkV4aXQgPSByZWdpc3Rlck9uRXhpdEhvb2sodGhpcyk7XG4gICAgZm5zLm9uUmV0YWluID0gcmVnaXN0ZXJPblJldGFpbkhvb2sodGhpcyk7XG4gICAgZm5zLm9uRW50ZXIgPSByZWdpc3Rlck9uRW50ZXJIb29rKHRoaXMpO1xuXG4gICAgLy8gV2lyZSB1cCBSZXNvbHZlIGhvb2tzXG4gICAgZm5zLmVhZ2VyUmVzb2x2ZSA9IHJlZ2lzdGVyRWFnZXJSZXNvbHZlUGF0aCh0aGlzKTtcbiAgICBmbnMubGF6eVJlc29sdmUgPSByZWdpc3RlckxhenlSZXNvbHZlU3RhdGUodGhpcyk7XG4gICAgZm5zLnJlc29sdmVBbGwgPSByZWdpc3RlclJlc29sdmVSZW1haW5pbmcodGhpcyk7XG5cbiAgICAvLyBXaXJlIHVwIHRoZSBWaWV3IG1hbmFnZW1lbnQgaG9va3NcbiAgICBmbnMubG9hZFZpZXdzID0gcmVnaXN0ZXJMb2FkRW50ZXJpbmdWaWV3cyh0aGlzKTtcbiAgICBmbnMuYWN0aXZhdGVWaWV3cyA9IHJlZ2lzdGVyQWN0aXZhdGVWaWV3cyh0aGlzKTtcblxuICAgIC8vIFVwZGF0ZXMgZ2xvYmFsIHN0YXRlIGFmdGVyIGEgdHJhbnNpdGlvblxuICAgIGZucy51cGRhdGVHbG9iYWxzID0gcmVnaXN0ZXJVcGRhdGVHbG9iYWxTdGF0ZSh0aGlzKTtcblxuICAgIC8vIEFmdGVyIGdsb2JhbHMuY3VycmVudCBpcyB1cGRhdGVkIGF0IHByaW9yaXR5OiAxMDAwMFxuICAgIGZucy51cGRhdGVVcmwgPSByZWdpc3RlclVwZGF0ZVVybCh0aGlzKTtcblxuICAgIC8vIExhenkgbG9hZCBzdGF0ZSB0cmVlc1xuICAgIGZucy5sYXp5TG9hZCA9IHJlZ2lzdGVyTGF6eUxvYWRIb29rKHRoaXMpO1xuICB9XG59XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIHN0YXRlICovIC8qKiAqL1xuaW1wb3J0IHtcbiAgY3JlYXRlUHJveHlGdW5jdGlvbnMsXG4gIGRlZmF1bHRzLFxuICBleHRlbmQsXG4gIGluQXJyYXksXG4gIG5vb3AsXG4gIHJlbW92ZUZyb20sXG4gIHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZSxcbiAgc2lsZW50UmVqZWN0aW9uLFxufSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGlzRGVmaW5lZCwgaXNPYmplY3QsIGlzU3RyaW5nIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgUXVldWUgfSBmcm9tICcuLi9jb21tb24vcXVldWUnO1xuaW1wb3J0IHsgc2VydmljZXMgfSBmcm9tICcuLi9jb21tb24vY29yZXNlcnZpY2VzJztcblxuaW1wb3J0IHsgUGF0aFV0aWxzIH0gZnJvbSAnLi4vcGF0aC9wYXRoVXRpbHMnO1xuaW1wb3J0IHsgUGF0aE5vZGUgfSBmcm9tICcuLi9wYXRoL3BhdGhOb2RlJztcblxuaW1wb3J0IHsgSG9va1Jlc3VsdCwgVHJhbnNpdGlvbk9wdGlvbnMgfSBmcm9tICcuLi90cmFuc2l0aW9uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBkZWZhdWx0VHJhbnNPcHRzIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBSZWplY3Rpb24sIFJlamVjdFR5cGUgfSBmcm9tICcuLi90cmFuc2l0aW9uL3JlamVjdEZhY3RvcnknO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5cbmltcG9ydCB7IEhyZWZPcHRpb25zLCBMYXp5TG9hZFJlc3VsdCwgU3RhdGVEZWNsYXJhdGlvbiwgU3RhdGVPck5hbWUsIFRyYW5zaXRpb25Qcm9taXNlIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuL3N0YXRlT2JqZWN0JztcbmltcG9ydCB7IFRhcmdldFN0YXRlIH0gZnJvbSAnLi90YXJnZXRTdGF0ZSc7XG5cbmltcG9ydCB7IFJhd1BhcmFtcyB9IGZyb20gJy4uL3BhcmFtcy9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUGFyYW0gfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuaW1wb3J0IHsgR2xvYiB9IGZyb20gJy4uL2NvbW1vbi9nbG9iJztcbmltcG9ydCB7IFVJUm91dGVyIH0gZnJvbSAnLi4vcm91dGVyJztcbmltcG9ydCB7IFVJSW5qZWN0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUmVzb2x2ZUNvbnRleHQgfSBmcm9tICcuLi9yZXNvbHZlL3Jlc29sdmVDb250ZXh0JztcbmltcG9ydCB7IGxhenlMb2FkU3RhdGUgfSBmcm9tICcuLi9ob29rcy9sYXp5TG9hZCc7XG5pbXBvcnQgeyBub3QsIHZhbCB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgU3RhdGVQYXJhbXMgfSBmcm9tICcuLi9wYXJhbXMvc3RhdGVQYXJhbXMnO1xuXG5leHBvcnQgdHlwZSBPbkludmFsaWRDYWxsYmFjayA9ICh0b1N0YXRlPzogVGFyZ2V0U3RhdGUsIGZyb21TdGF0ZT86IFRhcmdldFN0YXRlLCBpbmplY3Rvcj86IFVJSW5qZWN0b3IpID0+IEhvb2tSZXN1bHQ7XG5cbi8qKlxuICogUHJvdmlkZXMgc3RhdGUgcmVsYXRlZCBzZXJ2aWNlIGZ1bmN0aW9uc1xuICpcbiAqIFRoaXMgY2xhc3MgcHJvdmlkZXMgc2VydmljZXMgcmVsYXRlZCB0byB1aS1yb3V0ZXIgc3RhdGVzLlxuICogQW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBpcyBsb2NhdGVkIG9uIHRoZSBnbG9iYWwgW1tVSVJvdXRlcl1dIG9iamVjdC5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0YXRlU2VydmljZSB7XG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgaW52YWxpZENhbGxiYWNrczogT25JbnZhbGlkQ2FsbGJhY2tbXSA9IFtdO1xuXG4gIC8qKlxuICAgKiBUaGUgW1tUcmFuc2l0aW9uXV0gY3VycmVudGx5IGluIHByb2dyZXNzIChvciBudWxsKVxuICAgKlxuICAgKiBUaGlzIGlzIGEgcGFzc3Rocm91Z2ggdGhyb3VnaCB0byBbW1VJUm91dGVyR2xvYmFscy50cmFuc2l0aW9uXV1cbiAgICovXG4gIGdldCB0cmFuc2l0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb247XG4gIH1cbiAgLyoqXG4gICAqIFRoZSBsYXRlc3Qgc3VjY2Vzc2Z1bCBzdGF0ZSBwYXJhbWV0ZXJzXG4gICAqXG4gICAqIFRoaXMgaXMgYSBwYXNzdGhyb3VnaCB0aHJvdWdoIHRvIFtbVUlSb3V0ZXJHbG9iYWxzLnBhcmFtc11dXG4gICAqL1xuICBnZXQgcGFyYW1zKCk6IFN0YXRlUGFyYW1zIHtcbiAgICByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy5wYXJhbXM7XG4gIH1cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IFtbU3RhdGVEZWNsYXJhdGlvbl1dXG4gICAqXG4gICAqIFRoaXMgaXMgYSBwYXNzdGhyb3VnaCB0aHJvdWdoIHRvIFtbVUlSb3V0ZXJHbG9iYWxzLmN1cnJlbnRdXVxuICAgKi9cbiAgZ2V0IGN1cnJlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMucm91dGVyLmdsb2JhbHMuY3VycmVudDtcbiAgfVxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgW1tTdGF0ZU9iamVjdF1dXG4gICAqXG4gICAqIFRoaXMgaXMgYSBwYXNzdGhyb3VnaCB0aHJvdWdoIHRvIFtbVUlSb3V0ZXJHbG9iYWxzLiRjdXJyZW50XV1cbiAgICovXG4gIGdldCAkY3VycmVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy4kY3VycmVudDtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgY29uc3RydWN0b3IoLyoqIEBoaWRkZW4gKi8gcHJpdmF0ZSByb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgY29uc3QgZ2V0dGVycyA9IFsnY3VycmVudCcsICckY3VycmVudCcsICdwYXJhbXMnLCAndHJhbnNpdGlvbiddO1xuICAgIGNvbnN0IGJvdW5kRm5zID0gT2JqZWN0LmtleXMoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSkuZmlsdGVyKG5vdChpbkFycmF5KGdldHRlcnMpKSk7XG4gICAgY3JlYXRlUHJveHlGdW5jdGlvbnModmFsKFN0YXRlU2VydmljZS5wcm90b3R5cGUpLCB0aGlzLCB2YWwodGhpcyksIGJvdW5kRm5zKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLmRlZmF1bHRFcnJvckhhbmRsZXIobm9vcCk7XG4gICAgdGhpcy5pbnZhbGlkQ2FsbGJhY2tzID0gW107XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlciBmb3Igd2hlbiBbW3RyYW5zaXRpb25Ub11dIGlzIGNhbGxlZCB3aXRoIGFuIGludmFsaWQgc3RhdGUuXG4gICAqXG4gICAqIEludm9rZXMgdGhlIFtbb25JbnZhbGlkXV0gY2FsbGJhY2tzLCBpbiBuYXR1cmFsIG9yZGVyLlxuICAgKiBFYWNoIGNhbGxiYWNrJ3MgcmV0dXJuIHZhbHVlIGlzIGNoZWNrZWQgaW4gc2VxdWVuY2UgdW50aWwgb25lIG9mIHRoZW0gcmV0dXJucyBhbiBpbnN0YW5jZSBvZiBUYXJnZXRTdGF0ZS5cbiAgICogVGhlIHJlc3VsdHMgb2YgdGhlIGNhbGxiYWNrcyBhcmUgd3JhcHBlZCBpbiAkcS53aGVuKCksIHNvIHRoZSBjYWxsYmFja3MgbWF5IHJldHVybiBwcm9taXNlcy5cbiAgICpcbiAgICogSWYgYSBjYWxsYmFjayByZXR1cm5zIGFuIFRhcmdldFN0YXRlLCB0aGVuIGl0IGlzIHVzZWQgYXMgYXJndW1lbnRzIHRvICRzdGF0ZS50cmFuc2l0aW9uVG8oKSBhbmQgdGhlIHJlc3VsdCByZXR1cm5lZC5cbiAgICpcbiAgICogQGludGVybmFsYXBpXG4gICAqL1xuICBwcml2YXRlIF9oYW5kbGVJbnZhbGlkVGFyZ2V0U3RhdGUoZnJvbVBhdGg6IFBhdGhOb2RlW10sIHRvU3RhdGU6IFRhcmdldFN0YXRlKSB7XG4gICAgY29uc3QgZnJvbVN0YXRlID0gUGF0aFV0aWxzLm1ha2VUYXJnZXRTdGF0ZSh0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LCBmcm9tUGF0aCk7XG4gICAgY29uc3QgZ2xvYmFscyA9IHRoaXMucm91dGVyLmdsb2JhbHM7XG4gICAgY29uc3QgbGF0ZXN0VGhpbmcgPSAoKSA9PiBnbG9iYWxzLnRyYW5zaXRpb25IaXN0b3J5LnBlZWtUYWlsKCk7XG4gICAgY29uc3QgbGF0ZXN0ID0gbGF0ZXN0VGhpbmcoKTtcbiAgICBjb25zdCBjYWxsYmFja1F1ZXVlID0gbmV3IFF1ZXVlPE9uSW52YWxpZENhbGxiYWNrPih0aGlzLmludmFsaWRDYWxsYmFja3Muc2xpY2UoKSk7XG4gICAgY29uc3QgaW5qZWN0b3IgPSBuZXcgUmVzb2x2ZUNvbnRleHQoZnJvbVBhdGgpLmluamVjdG9yKCk7XG5cbiAgICBjb25zdCBjaGVja0ZvclJlZGlyZWN0ID0gKHJlc3VsdDogSG9va1Jlc3VsdCkgPT4ge1xuICAgICAgaWYgKCEocmVzdWx0IGluc3RhbmNlb2YgVGFyZ2V0U3RhdGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IHRhcmdldCA9IDxUYXJnZXRTdGF0ZT5yZXN1bHQ7XG4gICAgICAvLyBSZWNyZWF0ZSB0aGUgVGFyZ2V0U3RhdGUsIGluIGNhc2UgdGhlIHN0YXRlIGlzIG5vdyBkZWZpbmVkLlxuICAgICAgdGFyZ2V0ID0gdGhpcy50YXJnZXQodGFyZ2V0LmlkZW50aWZpZXIoKSwgdGFyZ2V0LnBhcmFtcygpLCB0YXJnZXQub3B0aW9ucygpKTtcblxuICAgICAgaWYgKCF0YXJnZXQudmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gUmVqZWN0aW9uLmludmFsaWQodGFyZ2V0LmVycm9yKCkpLnRvUHJvbWlzZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAobGF0ZXN0VGhpbmcoKSAhPT0gbGF0ZXN0KSB7XG4gICAgICAgIHJldHVybiBSZWplY3Rpb24uc3VwZXJzZWRlZCgpLnRvUHJvbWlzZSgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uVG8odGFyZ2V0LmlkZW50aWZpZXIoKSwgdGFyZ2V0LnBhcmFtcygpLCB0YXJnZXQub3B0aW9ucygpKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaW52b2tlTmV4dENhbGxiYWNrKCkge1xuICAgICAgY29uc3QgbmV4dENhbGxiYWNrID0gY2FsbGJhY2tRdWV1ZS5kZXF1ZXVlKCk7XG4gICAgICBpZiAobmV4dENhbGxiYWNrID09PSB1bmRlZmluZWQpIHJldHVybiBSZWplY3Rpb24uaW52YWxpZCh0b1N0YXRlLmVycm9yKCkpLnRvUHJvbWlzZSgpO1xuXG4gICAgICBjb25zdCBjYWxsYmFja1Jlc3VsdCA9IHNlcnZpY2VzLiRxLndoZW4obmV4dENhbGxiYWNrKHRvU3RhdGUsIGZyb21TdGF0ZSwgaW5qZWN0b3IpKTtcbiAgICAgIHJldHVybiBjYWxsYmFja1Jlc3VsdC50aGVuKGNoZWNrRm9yUmVkaXJlY3QpLnRoZW4ocmVzdWx0ID0+IHJlc3VsdCB8fCBpbnZva2VOZXh0Q2FsbGJhY2soKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGludm9rZU5leHRDYWxsYmFjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhbiBJbnZhbGlkIFN0YXRlIGhhbmRsZXJcbiAgICpcbiAgICogUmVnaXN0ZXJzIGEgW1tPbkludmFsaWRDYWxsYmFja11dIGZ1bmN0aW9uIHRvIGJlIGludm9rZWQgd2hlbiBbW1N0YXRlU2VydmljZS50cmFuc2l0aW9uVG9dXVxuICAgKiBoYXMgYmVlbiBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIHN0YXRlIHJlZmVyZW5jZSBwYXJhbWV0ZXJcbiAgICpcbiAgICogRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogc3RhdGVTZXJ2aWNlLm9uSW52YWxpZChmdW5jdGlvbih0bywgZnJvbSwgaW5qZWN0b3IpIHtcbiAgICogICBpZiAodG8ubmFtZSgpID09PSAnZm9vJykge1xuICAgKiAgICAgbGV0IGxhenlMb2FkZXIgPSBpbmplY3Rvci5nZXQoJ0xhenlMb2FkU2VydmljZScpO1xuICAgKiAgICAgcmV0dXJuIGxhenlMb2FkZXIubG9hZCgnZm9vJylcbiAgICogICAgICAgICAudGhlbigoKSA9PiBzdGF0ZVNlcnZpY2UudGFyZ2V0KCdmb28nKSk7XG4gICAqICAgfVxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIGludm9rZWQgd2hlbiB0aGUgdG9TdGF0ZSBpcyBpbnZhbGlkXG4gICAqICAgVGhpcyBmdW5jdGlvbiByZWNlaXZlcyB0aGUgKGludmFsaWQpIHRvU3RhdGUsIHRoZSBmcm9tU3RhdGUsIGFuZCBhbiBpbmplY3Rvci5cbiAgICogICBUaGUgZnVuY3Rpb24gbWF5IG9wdGlvbmFsbHkgcmV0dXJuIGEgW1tUYXJnZXRTdGF0ZV1dIG9yIGEgUHJvbWlzZSBmb3IgYSBUYXJnZXRTdGF0ZS5cbiAgICogICBJZiBvbmUgaXMgcmV0dXJuZWQsIGl0IGlzIHRyZWF0ZWQgYXMgYSByZWRpcmVjdC5cbiAgICpcbiAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgY2FsbGJhY2tcbiAgICovXG4gIG9uSW52YWxpZChjYWxsYmFjazogT25JbnZhbGlkQ2FsbGJhY2spOiBGdW5jdGlvbiB7XG4gICAgdGhpcy5pbnZhbGlkQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIHJldHVybiBmdW5jdGlvbiBkZXJlZ2lzdGVyTGlzdGVuZXIoKSB7XG4gICAgICByZW1vdmVGcm9tKHRoaXMuaW52YWxpZENhbGxiYWNrcykoY2FsbGJhY2spO1xuICAgIH0uYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxvYWRzIHRoZSBjdXJyZW50IHN0YXRlXG4gICAqXG4gICAqIEEgbWV0aG9kIHRoYXQgZm9yY2UgcmVsb2FkcyB0aGUgY3VycmVudCBzdGF0ZSwgb3IgYSBwYXJ0aWFsIHN0YXRlIGhpZXJhcmNoeS5cbiAgICogQWxsIHJlc29sdmVzIGFyZSByZS1yZXNvbHZlZCwgYW5kIGNvbXBvbmVudHMgcmVpbnN0YW50aWF0ZWQuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogbGV0IGFwcCBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXInXSk7XG4gICAqXG4gICAqIGFwcC5jb250cm9sbGVyKCdjdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlKSB7XG4gICAqICAgJHNjb3BlLnJlbG9hZCA9IGZ1bmN0aW9uKCl7XG4gICAqICAgICAkc3RhdGUucmVsb2FkKCk7XG4gICAqICAgfVxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIE5vdGU6IGByZWxvYWQoKWAgaXMganVzdCBhbiBhbGlhcyBmb3I6XG4gICAqXG4gICAqIGBgYGpzXG4gICAqICRzdGF0ZS50cmFuc2l0aW9uVG8oJHN0YXRlLmN1cnJlbnQsICRzdGF0ZS5wYXJhbXMsIHtcbiAgICogICByZWxvYWQ6IHRydWUsIGluaGVyaXQ6IGZhbHNlXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHJlbG9hZFN0YXRlIEEgc3RhdGUgbmFtZSBvciBhIHN0YXRlIG9iamVjdC5cbiAgICogICAgSWYgcHJlc2VudCwgdGhpcyBzdGF0ZSBhbmQgYWxsIGl0cyBjaGlsZHJlbiB3aWxsIGJlIHJlbG9hZGVkLCBidXQgYW5jZXN0b3JzIHdpbGwgbm90IHJlbG9hZC5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiAvL2Fzc3VtaW5nIGFwcCBhcHBsaWNhdGlvbiBjb25zaXN0cyBvZiAzIHN0YXRlczogJ2NvbnRhY3RzJywgJ2NvbnRhY3RzLmRldGFpbCcsICdjb250YWN0cy5kZXRhaWwuaXRlbSdcbiAgICogLy9hbmQgY3VycmVudCBzdGF0ZSBpcyAnY29udGFjdHMuZGV0YWlsLml0ZW0nXG4gICAqIGxldCBhcHAgYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyJ10pO1xuICAgKlxuICAgKiBhcHAuY29udHJvbGxlcignY3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSkge1xuICAgKiAgICRzY29wZS5yZWxvYWQgPSBmdW5jdGlvbigpe1xuICAgKiAgICAgLy93aWxsIHJlbG9hZCAnY29udGFjdC5kZXRhaWwnIGFuZCBuZXN0ZWQgJ2NvbnRhY3QuZGV0YWlsLml0ZW0nIHN0YXRlc1xuICAgKiAgICAgJHN0YXRlLnJlbG9hZCgnY29udGFjdC5kZXRhaWwnKTtcbiAgICogICB9XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHJldHVybnMgQSBwcm9taXNlIHJlcHJlc2VudGluZyB0aGUgc3RhdGUgb2YgdGhlIG5ldyB0cmFuc2l0aW9uLiBTZWUgW1tTdGF0ZVNlcnZpY2UuZ29dXVxuICAgKi9cbiAgcmVsb2FkKHJlbG9hZFN0YXRlPzogU3RhdGVPck5hbWUpOiBQcm9taXNlPFN0YXRlT2JqZWN0PiB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNpdGlvblRvKHRoaXMuY3VycmVudCwgdGhpcy5wYXJhbXMsIHtcbiAgICAgIHJlbG9hZDogaXNEZWZpbmVkKHJlbG9hZFN0YXRlKSA/IHJlbG9hZFN0YXRlIDogdHJ1ZSxcbiAgICAgIGluaGVyaXQ6IGZhbHNlLFxuICAgICAgbm90aWZ5OiBmYWxzZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2l0aW9uIHRvIGEgZGlmZmVyZW50IHN0YXRlIGFuZC9vciBwYXJhbWV0ZXJzXG4gICAqXG4gICAqIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgdHJhbnNpdGlvbmluZyB0byBhIG5ldyBzdGF0ZS5cbiAgICpcbiAgICogYCRzdGF0ZS5nb2AgY2FsbHMgYCRzdGF0ZS50cmFuc2l0aW9uVG9gIGludGVybmFsbHkgYnV0IGF1dG9tYXRpY2FsbHkgc2V0cyBvcHRpb25zIHRvXG4gICAqIGB7IGxvY2F0aW9uOiB0cnVlLCBpbmhlcml0OiB0cnVlLCByZWxhdGl2ZTogcm91dGVyLmdsb2JhbHMuJGN1cnJlbnQsIG5vdGlmeTogdHJ1ZSB9YC5cbiAgICogVGhpcyBhbGxvd3MgeW91IHRvIHVzZSBlaXRoZXIgYW4gYWJzb2x1dGUgb3IgcmVsYXRpdmUgYHRvYCBhcmd1bWVudCAoYmVjYXVzZSBvZiBgcmVsYXRpdmU6IHJvdXRlci5nbG9iYWxzLiRjdXJyZW50YCkuXG4gICAqIEl0IGFsc28gYWxsb3dzIHlvdSB0byBzcGVjaWZ5ICogb25seSB0aGUgcGFyYW1ldGVycyB5b3UnZCBsaWtlIHRvIHVwZGF0ZSwgd2hpbGUgbGV0dGluZyB1bnNwZWNpZmllZCBwYXJhbWV0ZXJzXG4gICAqIGluaGVyaXQgZnJvbSB0aGUgY3VycmVudCBwYXJhbWV0ZXIgdmFsdWVzIChiZWNhdXNlIG9mIGBpbmhlcml0OiB0cnVlYCkuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogbGV0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlciddKTtcbiAgICpcbiAgICogYXBwLmNvbnRyb2xsZXIoJ2N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUpIHtcbiAgICogICAkc2NvcGUuY2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAqICAgICAkc3RhdGUuZ28oJ2NvbnRhY3QuZGV0YWlsJyk7XG4gICAqICAgfTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gdG8gQWJzb2x1dGUgc3RhdGUgbmFtZSwgc3RhdGUgb2JqZWN0LCBvciByZWxhdGl2ZSBzdGF0ZSBwYXRoIChyZWxhdGl2ZSB0byBjdXJyZW50IHN0YXRlKS5cbiAgICpcbiAgICogU29tZSBleGFtcGxlczpcbiAgICpcbiAgICogLSBgJHN0YXRlLmdvKCdjb250YWN0LmRldGFpbCcpYCAtIHdpbGwgZ28gdG8gdGhlIGBjb250YWN0LmRldGFpbGAgc3RhdGVcbiAgICogLSBgJHN0YXRlLmdvKCdeJylgIC0gd2lsbCBnbyB0byB0aGUgcGFyZW50IHN0YXRlXG4gICAqIC0gYCRzdGF0ZS5nbygnXi5zaWJsaW5nJylgIC0gaWYgY3VycmVudCBzdGF0ZSBpcyBgaG9tZS5jaGlsZGAsIHdpbGwgZ28gdG8gdGhlIGBob21lLnNpYmxpbmdgIHN0YXRlXG4gICAqIC0gYCRzdGF0ZS5nbygnLmNoaWxkLmdyYW5kY2hpbGQnKWAgLSBpZiBjdXJyZW50IHN0YXRlIGlzIGhvbWUsIHdpbGwgZ28gdG8gdGhlIGBob21lLmNoaWxkLmdyYW5kY2hpbGRgIHN0YXRlXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMgQSBtYXAgb2YgdGhlIHBhcmFtZXRlcnMgdGhhdCB3aWxsIGJlIHNlbnQgdG8gdGhlIHN0YXRlLCB3aWxsIHBvcHVsYXRlICRzdGF0ZVBhcmFtcy5cbiAgICpcbiAgICogICAgQW55IHBhcmFtZXRlcnMgdGhhdCBhcmUgbm90IHNwZWNpZmllZCB3aWxsIGJlIGluaGVyaXRlZCBmcm9tIGN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlcyAoYmVjYXVzZSBvZiBgaW5oZXJpdDogdHJ1ZWApLlxuICAgKiAgICBUaGlzIGFsbG93cywgZm9yIGV4YW1wbGUsIGdvaW5nIHRvIGEgc2libGluZyBzdGF0ZSB0aGF0IHNoYXJlcyBwYXJhbWV0ZXJzIGRlZmluZWQgYnkgYSBwYXJlbnQgc3RhdGUuXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIFRyYW5zaXRpb24gb3B0aW9uc1xuICAgKlxuICAgKiBAcmV0dXJucyB7cHJvbWlzZX0gQSBwcm9taXNlIHJlcHJlc2VudGluZyB0aGUgc3RhdGUgb2YgdGhlIG5ldyB0cmFuc2l0aW9uLlxuICAgKi9cbiAgZ28odG86IFN0YXRlT3JOYW1lLCBwYXJhbXM/OiBSYXdQYXJhbXMsIG9wdGlvbnM/OiBUcmFuc2l0aW9uT3B0aW9ucyk6IFRyYW5zaXRpb25Qcm9taXNlIHtcbiAgICBjb25zdCBkZWZhdXRHb09wdHMgPSB7IHJlbGF0aXZlOiB0aGlzLiRjdXJyZW50LCBpbmhlcml0OiB0cnVlIH07XG4gICAgY29uc3QgdHJhbnNPcHRzID0gZGVmYXVsdHMob3B0aW9ucywgZGVmYXV0R29PcHRzLCBkZWZhdWx0VHJhbnNPcHRzKTtcbiAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uVG8odG8sIHBhcmFtcywgdHJhbnNPcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgW1tUYXJnZXRTdGF0ZV1dXG4gICAqXG4gICAqIFRoaXMgaXMgYSBmYWN0b3J5IG1ldGhvZCBmb3IgY3JlYXRpbmcgYSBUYXJnZXRTdGF0ZVxuICAgKlxuICAgKiBUaGlzIG1heSBiZSByZXR1cm5lZCBmcm9tIGEgVHJhbnNpdGlvbiBIb29rIHRvIHJlZGlyZWN0IGEgdHJhbnNpdGlvbiwgZm9yIGV4YW1wbGUuXG4gICAqL1xuICB0YXJnZXQoaWRlbnRpZmllcjogU3RhdGVPck5hbWUsIHBhcmFtcz86IFJhd1BhcmFtcywgb3B0aW9uczogVHJhbnNpdGlvbk9wdGlvbnMgPSB7fSk6IFRhcmdldFN0YXRlIHtcbiAgICAvLyBJZiB3ZSdyZSByZWxvYWRpbmcsIGZpbmQgdGhlIHN0YXRlIG9iamVjdCB0byByZWxvYWQgZnJvbVxuICAgIGlmIChpc09iamVjdChvcHRpb25zLnJlbG9hZCkgJiYgISg8YW55Pm9wdGlvbnMucmVsb2FkKS5uYW1lKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVsb2FkIHN0YXRlIG9iamVjdCcpO1xuICAgIGNvbnN0IHJlZyA9IHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnk7XG4gICAgb3B0aW9ucy5yZWxvYWRTdGF0ZSA9XG4gICAgICBvcHRpb25zLnJlbG9hZCA9PT0gdHJ1ZSA/IHJlZy5yb290KCkgOiByZWcubWF0Y2hlci5maW5kKDxhbnk+b3B0aW9ucy5yZWxvYWQsIG9wdGlvbnMucmVsYXRpdmUpO1xuXG4gICAgaWYgKG9wdGlvbnMucmVsb2FkICYmICFvcHRpb25zLnJlbG9hZFN0YXRlKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgTm8gc3VjaCByZWxvYWQgc3RhdGUgJyR7aXNTdHJpbmcob3B0aW9ucy5yZWxvYWQpID8gb3B0aW9ucy5yZWxvYWQgOiAoPGFueT5vcHRpb25zLnJlbG9hZCkubmFtZX0nYFxuICAgICAgKTtcblxuICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUodGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeSwgaWRlbnRpZmllciwgcGFyYW1zLCBvcHRpb25zKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Q3VycmVudFBhdGgoKTogUGF0aE5vZGVbXSB7XG4gICAgY29uc3QgZ2xvYmFscyA9IHRoaXMucm91dGVyLmdsb2JhbHM7XG4gICAgY29uc3QgbGF0ZXN0U3VjY2VzczogVHJhbnNpdGlvbiA9IGdsb2JhbHMuc3VjY2Vzc2Z1bFRyYW5zaXRpb25zLnBlZWtUYWlsKCk7XG4gICAgY29uc3Qgcm9vdFBhdGggPSAoKSA9PiBbbmV3IFBhdGhOb2RlKHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnkucm9vdCgpKV07XG4gICAgcmV0dXJuIGxhdGVzdFN1Y2Nlc3MgPyBsYXRlc3RTdWNjZXNzLnRyZWVDaGFuZ2VzKCkudG8gOiByb290UGF0aCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIExvdy1sZXZlbCBtZXRob2QgZm9yIHRyYW5zaXRpb25pbmcgdG8gYSBuZXcgc3RhdGUuXG4gICAqXG4gICAqIFRoZSBbW2dvXV0gbWV0aG9kICh3aGljaCB1c2VzIGB0cmFuc2l0aW9uVG9gIGludGVybmFsbHkpIGlzIHJlY29tbWVuZGVkIGluIG1vc3Qgc2l0dWF0aW9ucy5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiBsZXQgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyJ10pO1xuICAgKlxuICAgKiBhcHAuY29udHJvbGxlcignY3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSkge1xuICAgKiAgICRzY29wZS5jaGFuZ2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICogICAgICRzdGF0ZS50cmFuc2l0aW9uVG8oJ2NvbnRhY3QuZGV0YWlsJyk7XG4gICAqICAgfTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gdG8gU3RhdGUgbmFtZSBvciBzdGF0ZSBvYmplY3QuXG4gICAqIEBwYXJhbSB0b1BhcmFtcyBBIG1hcCBvZiB0aGUgcGFyYW1ldGVycyB0aGF0IHdpbGwgYmUgc2VudCB0byB0aGUgc3RhdGUsXG4gICAqICAgICAgd2lsbCBwb3B1bGF0ZSAkc3RhdGVQYXJhbXMuXG4gICAqIEBwYXJhbSBvcHRpb25zIFRyYW5zaXRpb24gb3B0aW9uc1xuICAgKlxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgcmVwcmVzZW50aW5nIHRoZSBzdGF0ZSBvZiB0aGUgbmV3IHRyYW5zaXRpb24uIFNlZSBbW2dvXV1cbiAgICovXG4gIHRyYW5zaXRpb25Ubyh0bzogU3RhdGVPck5hbWUsIHRvUGFyYW1zOiBSYXdQYXJhbXMgPSB7fSwgb3B0aW9uczogVHJhbnNpdGlvbk9wdGlvbnMgPSB7fSk6IFRyYW5zaXRpb25Qcm9taXNlIHtcbiAgICBjb25zdCByb3V0ZXIgPSB0aGlzLnJvdXRlcjtcbiAgICBjb25zdCBnbG9iYWxzID0gcm91dGVyLmdsb2JhbHM7XG4gICAgb3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1bHRUcmFuc09wdHMpO1xuICAgIGNvbnN0IGdldEN1cnJlbnQgPSAoKSA9PiBnbG9iYWxzLnRyYW5zaXRpb247XG4gICAgb3B0aW9ucyA9IGV4dGVuZChvcHRpb25zLCB7IGN1cnJlbnQ6IGdldEN1cnJlbnQgfSk7XG5cbiAgICBjb25zdCByZWY6IFRhcmdldFN0YXRlID0gdGhpcy50YXJnZXQodG8sIHRvUGFyYW1zLCBvcHRpb25zKTtcbiAgICBjb25zdCBjdXJyZW50UGF0aCA9IHRoaXMuZ2V0Q3VycmVudFBhdGgoKTtcblxuICAgIGlmICghcmVmLmV4aXN0cygpKSByZXR1cm4gdGhpcy5faGFuZGxlSW52YWxpZFRhcmdldFN0YXRlKGN1cnJlbnRQYXRoLCByZWYpO1xuXG4gICAgaWYgKCFyZWYudmFsaWQoKSkgcmV0dXJuIDxUcmFuc2l0aW9uUHJvbWlzZT5zaWxlbnRSZWplY3Rpb24ocmVmLmVycm9yKCkpO1xuXG4gICAgaWYgKG9wdGlvbnMuc3VwZXJjZWRlID09PSBmYWxzZSAmJiBnZXRDdXJyZW50KCkpIHtcbiAgICAgIHJldHVybiA8VHJhbnNpdGlvblByb21pc2U+UmVqZWN0aW9uLmlnbm9yZWQoJ0Fub3RoZXIgdHJhbnNpdGlvbiBpcyBpbiBwcm9ncmVzcyBhbmQgc3VwZXJjZWRlIGhhcyBiZWVuIHNldCB0byBmYWxzZSBpbiBUcmFuc2l0aW9uT3B0aW9ucyBmb3IgdGhlIHRyYW5zaXRpb24uIFNvIHRoZSB0cmFuc2l0aW9uIHdhcyBpZ25vcmVkIGluIGZhdm91ciBvZiB0aGUgZXhpc3Rpbmcgb25lIGluIHByb2dyZXNzLicpLnRvUHJvbWlzZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNwZWNpYWwgaGFuZGxpbmcgZm9yIElnbm9yZWQsIEFib3J0ZWQsIGFuZCBSZWRpcmVjdGVkIHRyYW5zaXRpb25zXG4gICAgICpcbiAgICAgKiBUaGUgc2VtYW50aWNzIGZvciB0aGUgdHJhbnNpdGlvbi5ydW4oKSBwcm9taXNlIGFuZCB0aGUgU3RhdGVTZXJ2aWNlLnRyYW5zaXRpb25UbygpXG4gICAgICogcHJvbWlzZSBkaWZmZXIuIEZvciBpbnN0YW5jZSwgdGhlIHJ1bigpIHByb21pc2UgbWF5IGJlIHJlamVjdGVkIGJlY2F1c2UgaXQgd2FzXG4gICAgICogSUdOT1JFRCwgYnV0IHRoZSB0cmFuc2l0aW9uVG8oKSBwcm9taXNlIGlzIHJlc29sdmVkIGJlY2F1c2UgZnJvbSB0aGUgdXNlciBwZXJzcGVjdGl2ZVxuICAgICAqIG5vIGVycm9yIG9jY3VycmVkLiAgTGlrZXdpc2UsIHRoZSB0cmFuc2l0aW9uLnJ1bigpIHByb21pc2UgbWF5IGJlIHJlamVjdGVkIGJlY2F1c2Ugb2ZcbiAgICAgKiBhIFJlZGlyZWN0LCBidXQgdGhlIHRyYW5zaXRpb25UbygpIHByb21pc2UgaXMgY2hhaW5lZCB0byB0aGUgbmV3IFRyYW5zaXRpb24ncyBwcm9taXNlLlxuICAgICAqL1xuICAgIGNvbnN0IHJlamVjdGVkVHJhbnNpdGlvbkhhbmRsZXIgPSAodHJhbnM6IFRyYW5zaXRpb24pID0+IChlcnJvcjogYW55KTogUHJvbWlzZTxhbnk+ID0+IHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFJlamVjdGlvbikge1xuICAgICAgICBjb25zdCBpc0xhdGVzdCA9IHJvdXRlci5nbG9iYWxzLmxhc3RTdGFydGVkVHJhbnNpdGlvbklkIDw9IHRyYW5zLiRpZDtcblxuICAgICAgICBpZiAoZXJyb3IudHlwZSA9PT0gUmVqZWN0VHlwZS5JR05PUkVEKSB7XG4gICAgICAgICAgaXNMYXRlc3QgJiYgcm91dGVyLnVybFJvdXRlci51cGRhdGUoKTtcbiAgICAgICAgICAvLyBDb25zaWRlciBpZ25vcmVkIGBUcmFuc2l0aW9uLnJ1bigpYCBhcyBhIHN1Y2Nlc3NmdWwgYHRyYW5zaXRpb25Ub2BcbiAgICAgICAgICByZXR1cm4gc2VydmljZXMuJHEud2hlbihnbG9iYWxzLmN1cnJlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGV0YWlsOiBhbnkgPSBlcnJvci5kZXRhaWw7XG4gICAgICAgIGlmIChlcnJvci50eXBlID09PSBSZWplY3RUeXBlLlNVUEVSU0VERUQgJiYgZXJyb3IucmVkaXJlY3RlZCAmJiBkZXRhaWwgaW5zdGFuY2VvZiBUYXJnZXRTdGF0ZSkge1xuICAgICAgICAgIC8vIElmIGBUcmFuc2l0aW9uLnJ1bigpYCB3YXMgcmVkaXJlY3RlZCwgYWxsb3cgdGhlIGB0cmFuc2l0aW9uVG8oKWAgcHJvbWlzZSB0byByZXNvbHZlIHN1Y2Nlc3NmdWxseVxuICAgICAgICAgIC8vIGJ5IHJldHVybmluZyB0aGUgcHJvbWlzZSBmb3IgdGhlIG5ldyAocmVkaXJlY3QpIGBUcmFuc2l0aW9uLnJ1bigpYC5cbiAgICAgICAgICBjb25zdCByZWRpcmVjdDogVHJhbnNpdGlvbiA9IHRyYW5zLnJlZGlyZWN0KGRldGFpbCk7XG4gICAgICAgICAgcmV0dXJuIHJlZGlyZWN0LnJ1bigpLmNhdGNoKHJlamVjdGVkVHJhbnNpdGlvbkhhbmRsZXIocmVkaXJlY3QpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlcnJvci50eXBlID09PSBSZWplY3RUeXBlLkFCT1JURUQpIHtcbiAgICAgICAgICBpc0xhdGVzdCAmJiByb3V0ZXIudXJsUm91dGVyLnVwZGF0ZSgpO1xuICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVycm9ySGFuZGxlciA9IHRoaXMuZGVmYXVsdEVycm9ySGFuZGxlcigpO1xuICAgICAgZXJyb3JIYW5kbGVyKGVycm9yKTtcblxuICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLnJlamVjdChlcnJvcik7XG4gICAgfTtcblxuICAgIGNvbnN0IHRyYW5zaXRpb24gPSB0aGlzLnJvdXRlci50cmFuc2l0aW9uU2VydmljZS5jcmVhdGUoY3VycmVudFBhdGgsIHJlZik7XG4gICAgY29uc3QgdHJhbnNpdGlvblRvUHJvbWlzZSA9IHRyYW5zaXRpb24ucnVuKCkuY2F0Y2gocmVqZWN0ZWRUcmFuc2l0aW9uSGFuZGxlcih0cmFuc2l0aW9uKSk7XG4gICAgc2lsZW5jZVVuY2F1Z2h0SW5Qcm9taXNlKHRyYW5zaXRpb25Ub1Byb21pc2UpOyAvLyBpc3N1ZSAjMjY3NlxuXG4gICAgLy8gUmV0dXJuIGEgcHJvbWlzZSBmb3IgdGhlIHRyYW5zaXRpb24sIHdoaWNoIGFsc28gaGFzIHRoZSB0cmFuc2l0aW9uIG9iamVjdCBvbiBpdC5cbiAgICByZXR1cm4gZXh0ZW5kKHRyYW5zaXRpb25Ub1Byb21pc2UsIHsgdHJhbnNpdGlvbiB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGN1cnJlbnQgc3RhdGUgKmlzKiB0aGUgcHJvdmlkZWQgc3RhdGVcbiAgICpcbiAgICogU2ltaWxhciB0byBbW2luY2x1ZGVzXV0gYnV0IG9ubHkgY2hlY2tzIGZvciB0aGUgZnVsbCBzdGF0ZSBuYW1lLlxuICAgKiBJZiBwYXJhbXMgaXMgc3VwcGxpZWQgdGhlbiBpdCB3aWxsIGJlIHRlc3RlZCBmb3Igc3RyaWN0IGVxdWFsaXR5IGFnYWluc3QgdGhlIGN1cnJlbnRcbiAgICogYWN0aXZlIHBhcmFtcyBvYmplY3QsIHNvIGFsbCBwYXJhbXMgbXVzdCBtYXRjaCB3aXRoIG5vbmUgbWlzc2luZyBhbmQgbm8gZXh0cmFzLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqICRzdGF0ZS4kY3VycmVudC5uYW1lID0gJ2NvbnRhY3RzLmRldGFpbHMuaXRlbSc7XG4gICAqXG4gICAqIC8vIGFic29sdXRlIG5hbWVcbiAgICogJHN0YXRlLmlzKCdjb250YWN0LmRldGFpbHMuaXRlbScpOyAvLyByZXR1cm5zIHRydWVcbiAgICogJHN0YXRlLmlzKGNvbnRhY3REZXRhaWxJdGVtU3RhdGVPYmplY3QpOyAvLyByZXR1cm5zIHRydWVcbiAgICogYGBgXG4gICAqXG4gICAqIC8vIHJlbGF0aXZlIG5hbWUgKC4gYW5kIF4pLCB0eXBpY2FsbHkgZnJvbSBhIHRlbXBsYXRlXG4gICAqIC8vIEUuZy4gZnJvbSB0aGUgJ2NvbnRhY3RzLmRldGFpbHMnIHRlbXBsYXRlXG4gICAqIGBgYGh0bWxcbiAgICogPGRpdiBuZy1jbGFzcz1cIntoaWdobGlnaHRlZDogJHN0YXRlLmlzKCcuaXRlbScpfVwiPkl0ZW08L2Rpdj5cbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzdGF0ZU9yTmFtZSBUaGUgc3RhdGUgbmFtZSAoYWJzb2x1dGUgb3IgcmVsYXRpdmUpIG9yIHN0YXRlIG9iamVjdCB5b3UnZCBsaWtlIHRvIGNoZWNrLlxuICAgKiBAcGFyYW0gcGFyYW1zIEEgcGFyYW0gb2JqZWN0LCBlLmcuIGB7c2VjdGlvbklkOiBzZWN0aW9uLmlkfWAsIHRoYXQgeW91J2QgbGlrZVxuICAgKiB0byB0ZXN0IGFnYWluc3QgdGhlIGN1cnJlbnQgYWN0aXZlIHN0YXRlLlxuICAgKiBAcGFyYW0gb3B0aW9ucyBBbiBvcHRpb25zIG9iamVjdC4gVGhlIG9wdGlvbnMgYXJlOlxuICAgKiAgIC0gYHJlbGF0aXZlYDogSWYgYHN0YXRlT3JOYW1lYCBpcyBhIHJlbGF0aXZlIHN0YXRlIG5hbWUgYW5kIGBvcHRpb25zLnJlbGF0aXZlYCBpcyBzZXQsIC5pcyB3aWxsXG4gICAqICAgICB0ZXN0IHJlbGF0aXZlIHRvIGBvcHRpb25zLnJlbGF0aXZlYCBzdGF0ZSAob3IgbmFtZSkuXG4gICAqXG4gICAqIEByZXR1cm5zIFJldHVybnMgdHJ1ZSBpZiBpdCBpcyB0aGUgc3RhdGUuXG4gICAqL1xuICBpcyhzdGF0ZU9yTmFtZTogU3RhdGVPck5hbWUsIHBhcmFtcz86IFJhd1BhcmFtcywgb3B0aW9ucz86IHsgcmVsYXRpdmU/OiBTdGF0ZU9yTmFtZSB9KTogYm9vbGVhbiB7XG4gICAgb3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIHsgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnQgfSk7XG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5Lm1hdGNoZXIuZmluZChzdGF0ZU9yTmFtZSwgb3B0aW9ucy5yZWxhdGl2ZSk7XG4gICAgaWYgKCFpc0RlZmluZWQoc3RhdGUpKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGlmICh0aGlzLiRjdXJyZW50ICE9PSBzdGF0ZSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghcGFyYW1zKSByZXR1cm4gdHJ1ZTtcblxuICAgIGNvbnN0IHNjaGVtYTogUGFyYW1bXSA9IHN0YXRlLnBhcmFtZXRlcnMoeyBpbmhlcml0OiB0cnVlLCBtYXRjaGluZ0tleXM6IHBhcmFtcyB9KTtcbiAgICByZXR1cm4gUGFyYW0uZXF1YWxzKHNjaGVtYSwgUGFyYW0udmFsdWVzKHNjaGVtYSwgcGFyYW1zKSwgdGhpcy5wYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgY3VycmVudCBzdGF0ZSAqaW5jbHVkZXMqIHRoZSBwcm92aWRlZCBzdGF0ZVxuICAgKlxuICAgKiBBIG1ldGhvZCB0byBkZXRlcm1pbmUgaWYgdGhlIGN1cnJlbnQgYWN0aXZlIHN0YXRlIGlzIGVxdWFsIHRvIG9yIGlzIHRoZSBjaGlsZCBvZiB0aGVcbiAgICogc3RhdGUgc3RhdGVOYW1lLiBJZiBhbnkgcGFyYW1zIGFyZSBwYXNzZWQgdGhlbiB0aGV5IHdpbGwgYmUgdGVzdGVkIGZvciBhIG1hdGNoIGFzIHdlbGwuXG4gICAqIE5vdCBhbGwgdGhlIHBhcmFtZXRlcnMgbmVlZCB0byBiZSBwYXNzZWQsIGp1c3QgdGhlIG9uZXMgeW91J2QgbGlrZSB0byB0ZXN0IGZvciBlcXVhbGl0eS5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlIHdoZW4gYCRzdGF0ZS4kY3VycmVudC5uYW1lID09PSAnY29udGFjdHMuZGV0YWlscy5pdGVtJ2BcbiAgICogYGBganNcbiAgICogLy8gVXNpbmcgcGFydGlhbCBuYW1lc1xuICAgKiAkc3RhdGUuaW5jbHVkZXMoXCJjb250YWN0c1wiKTsgLy8gcmV0dXJucyB0cnVlXG4gICAqICRzdGF0ZS5pbmNsdWRlcyhcImNvbnRhY3RzLmRldGFpbHNcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgKiAkc3RhdGUuaW5jbHVkZXMoXCJjb250YWN0cy5kZXRhaWxzLml0ZW1cIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgKiAkc3RhdGUuaW5jbHVkZXMoXCJjb250YWN0cy5saXN0XCIpOyAvLyByZXR1cm5zIGZhbHNlXG4gICAqICRzdGF0ZS5pbmNsdWRlcyhcImFib3V0XCIpOyAvLyByZXR1cm5zIGZhbHNlXG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyMjIEdsb2IgRXhhbXBsZXMgd2hlbiBgKiAkc3RhdGUuJGN1cnJlbnQubmFtZSA9PT0gJ2NvbnRhY3RzLmRldGFpbHMuaXRlbS51cmwnYDpcbiAgICogYGBganNcbiAgICogJHN0YXRlLmluY2x1ZGVzKFwiKi5kZXRhaWxzLiouKlwiKTsgLy8gcmV0dXJucyB0cnVlXG4gICAqICRzdGF0ZS5pbmNsdWRlcyhcIiouZGV0YWlscy4qKlwiKTsgLy8gcmV0dXJucyB0cnVlXG4gICAqICRzdGF0ZS5pbmNsdWRlcyhcIioqLml0ZW0uKipcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgKiAkc3RhdGUuaW5jbHVkZXMoXCIqLmRldGFpbHMuaXRlbS51cmxcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgKiAkc3RhdGUuaW5jbHVkZXMoXCIqLmRldGFpbHMuKi51cmxcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgKiAkc3RhdGUuaW5jbHVkZXMoXCIqLmRldGFpbHMuKlwiKTsgLy8gcmV0dXJucyBmYWxzZVxuICAgKiAkc3RhdGUuaW5jbHVkZXMoXCJpdGVtLioqXCIpOyAvLyByZXR1cm5zIGZhbHNlXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc3RhdGVPck5hbWUgQSBwYXJ0aWFsIG5hbWUsIHJlbGF0aXZlIG5hbWUsIGdsb2IgcGF0dGVybixcbiAgICogICBvciBzdGF0ZSBvYmplY3QgdG8gYmUgc2VhcmNoZWQgZm9yIHdpdGhpbiB0aGUgY3VycmVudCBzdGF0ZSBuYW1lLlxuICAgKiBAcGFyYW0gcGFyYW1zIEEgcGFyYW0gb2JqZWN0LCBlLmcuIGB7c2VjdGlvbklkOiBzZWN0aW9uLmlkfWAsXG4gICAqICAgdGhhdCB5b3UnZCBsaWtlIHRvIHRlc3QgYWdhaW5zdCB0aGUgY3VycmVudCBhY3RpdmUgc3RhdGUuXG4gICAqIEBwYXJhbSBvcHRpb25zIEFuIG9wdGlvbnMgb2JqZWN0LiBUaGUgb3B0aW9ucyBhcmU6XG4gICAqICAgLSBgcmVsYXRpdmVgOiBJZiBgc3RhdGVPck5hbWVgIGlzIGEgcmVsYXRpdmUgc3RhdGUgbmFtZSBhbmQgYG9wdGlvbnMucmVsYXRpdmVgIGlzIHNldCwgLmlzIHdpbGxcbiAgICogICAgIHRlc3QgcmVsYXRpdmUgdG8gYG9wdGlvbnMucmVsYXRpdmVgIHN0YXRlIChvciBuYW1lKS5cbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiBpdCBkb2VzIGluY2x1ZGUgdGhlIHN0YXRlXG4gICAqL1xuICBpbmNsdWRlcyhzdGF0ZU9yTmFtZTogU3RhdGVPck5hbWUsIHBhcmFtcz86IFJhd1BhcmFtcywgb3B0aW9ucz86IFRyYW5zaXRpb25PcHRpb25zKTogYm9vbGVhbiB7XG4gICAgb3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIHsgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnQgfSk7XG4gICAgY29uc3QgZ2xvYiA9IGlzU3RyaW5nKHN0YXRlT3JOYW1lKSAmJiBHbG9iLmZyb21TdHJpbmcoPHN0cmluZz5zdGF0ZU9yTmFtZSk7XG5cbiAgICBpZiAoZ2xvYikge1xuICAgICAgaWYgKCFnbG9iLm1hdGNoZXModGhpcy4kY3VycmVudC5uYW1lKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgc3RhdGVPck5hbWUgPSB0aGlzLiRjdXJyZW50Lm5hbWU7XG4gICAgfVxuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeS5tYXRjaGVyLmZpbmQoc3RhdGVPck5hbWUsIG9wdGlvbnMucmVsYXRpdmUpLFxuICAgICAgaW5jbHVkZSA9IHRoaXMuJGN1cnJlbnQuaW5jbHVkZXM7XG5cbiAgICBpZiAoIWlzRGVmaW5lZChzdGF0ZSkpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgaWYgKCFpc0RlZmluZWQoaW5jbHVkZVtzdGF0ZS5uYW1lXSkpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIXBhcmFtcykgcmV0dXJuIHRydWU7XG5cbiAgICBjb25zdCBzY2hlbWE6IFBhcmFtW10gPSBzdGF0ZS5wYXJhbWV0ZXJzKHsgaW5oZXJpdDogdHJ1ZSwgbWF0Y2hpbmdLZXlzOiBwYXJhbXMgfSk7XG4gICAgcmV0dXJuIFBhcmFtLmVxdWFscyhzY2hlbWEsIFBhcmFtLnZhbHVlcyhzY2hlbWEsIHBhcmFtcyksIHRoaXMucGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBVUkwgZm9yIGEgc3RhdGUgYW5kIHBhcmFtZXRlcnNcbiAgICpcbiAgICogUmV0dXJucyB0aGUgdXJsIGZvciB0aGUgZ2l2ZW4gc3RhdGUgcG9wdWxhdGVkIHdpdGggdGhlIGdpdmVuIHBhcmFtcy5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiBleHBlY3QoJHN0YXRlLmhyZWYoXCJhYm91dC5wZXJzb25cIiwgeyBwZXJzb246IFwiYm9iXCIgfSkpLnRvRXF1YWwoXCIvYWJvdXQvYm9iXCIpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHN0YXRlT3JOYW1lIFRoZSBzdGF0ZSBuYW1lIG9yIHN0YXRlIG9iamVjdCB5b3UnZCBsaWtlIHRvIGdlbmVyYXRlIGEgdXJsIGZyb20uXG4gICAqIEBwYXJhbSBwYXJhbXMgQW4gb2JqZWN0IG9mIHBhcmFtZXRlciB2YWx1ZXMgdG8gZmlsbCB0aGUgc3RhdGUncyByZXF1aXJlZCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIG9iamVjdC4gVGhlIG9wdGlvbnMgYXJlOlxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb21waWxlZCBzdGF0ZSB1cmxcbiAgICovXG4gIGhyZWYoc3RhdGVPck5hbWU6IFN0YXRlT3JOYW1lLCBwYXJhbXM/OiBSYXdQYXJhbXMsIG9wdGlvbnM/OiBIcmVmT3B0aW9ucyk6IHN0cmluZyB7XG4gICAgY29uc3QgZGVmYXVsdEhyZWZPcHRzID0ge1xuICAgICAgbG9zc3k6IHRydWUsXG4gICAgICBpbmhlcml0OiB0cnVlLFxuICAgICAgYWJzb2x1dGU6IGZhbHNlLFxuICAgICAgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnQsXG4gICAgfTtcbiAgICBvcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywgZGVmYXVsdEhyZWZPcHRzKTtcbiAgICBwYXJhbXMgPSBwYXJhbXMgfHwge307XG5cbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnkubWF0Y2hlci5maW5kKHN0YXRlT3JOYW1lLCBvcHRpb25zLnJlbGF0aXZlKTtcblxuICAgIGlmICghaXNEZWZpbmVkKHN0YXRlKSkgcmV0dXJuIG51bGw7XG4gICAgaWYgKG9wdGlvbnMuaW5oZXJpdCkgcGFyYW1zID0gPGFueT50aGlzLnBhcmFtcy4kaW5oZXJpdChwYXJhbXMsIHRoaXMuJGN1cnJlbnQsIHN0YXRlKTtcblxuICAgIGNvbnN0IG5hdiA9IHN0YXRlICYmIG9wdGlvbnMubG9zc3kgPyBzdGF0ZS5uYXZpZ2FibGUgOiBzdGF0ZTtcblxuICAgIGlmICghbmF2IHx8IG5hdi51cmwgPT09IHVuZGVmaW5lZCB8fCBuYXYudXJsID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yb3V0ZXIudXJsUm91dGVyLmhyZWYobmF2LnVybCwgcGFyYW1zLCB7IGFic29sdXRlOiBvcHRpb25zLmFic29sdXRlIH0pO1xuICB9XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgcHJpdmF0ZSBfZGVmYXVsdEVycm9ySGFuZGxlcjogKChfZXJyb3I6IGFueSkgPT4gdm9pZCkgPSBmdW5jdGlvbiAkZGVmYXVsdEVycm9ySGFuZGxlcigkZXJyb3IkKSB7XG4gICAgaWYgKCRlcnJvciQgaW5zdGFuY2VvZiBFcnJvciAmJiAkZXJyb3IkLnN0YWNrKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCRlcnJvciQpO1xuICAgICAgY29uc29sZS5lcnJvcigkZXJyb3IkLnN0YWNrKTtcbiAgICB9IGVsc2UgaWYgKCRlcnJvciQgaW5zdGFuY2VvZiBSZWplY3Rpb24pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJGVycm9yJC50b1N0cmluZygpKTtcbiAgICAgIGlmICgkZXJyb3IkLmRldGFpbCAmJiAkZXJyb3IkLmRldGFpbC5zdGFjaykgY29uc29sZS5lcnJvcigkZXJyb3IkLmRldGFpbC5zdGFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJGVycm9yJCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIG9yIGdldHMgdGhlIGRlZmF1bHQgW1t0cmFuc2l0aW9uVG9dXSBlcnJvciBoYW5kbGVyLlxuICAgKlxuICAgKiBUaGUgZXJyb3IgaGFuZGxlciBpcyBjYWxsZWQgd2hlbiBhIFtbVHJhbnNpdGlvbl1dIGlzIHJlamVjdGVkIG9yIHdoZW4gYW55IGVycm9yIG9jY3VycmVkIGR1cmluZyB0aGUgVHJhbnNpdGlvbi5cbiAgICogVGhpcyBpbmNsdWRlcyBlcnJvcnMgY2F1c2VkIGJ5IHJlc29sdmVzIGFuZCB0cmFuc2l0aW9uIGhvb2tzLlxuICAgKlxuICAgKiBOb3RlOlxuICAgKiBUaGlzIGhhbmRsZXIgZG9lcyBub3QgcmVjZWl2ZSBjZXJ0YWluIFRyYW5zaXRpb24gcmVqZWN0aW9ucy5cbiAgICogUmVkaXJlY3RlZCBhbmQgSWdub3JlZCBUcmFuc2l0aW9ucyBhcmUgbm90IGNvbnNpZGVyZWQgdG8gYmUgZXJyb3JzIGJ5IFtbU3RhdGVTZXJ2aWNlLnRyYW5zaXRpb25Ub11dLlxuICAgKlxuICAgKiBUaGUgYnVpbHQtaW4gZGVmYXVsdCBlcnJvciBoYW5kbGVyIGxvZ3MgdGhlIGVycm9yIHRvIHRoZSBjb25zb2xlLlxuICAgKlxuICAgKiBZb3UgY2FuIHByb3ZpZGUgeW91ciBvd24gY3VzdG9tIGhhbmRsZXIuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogc3RhdGVTZXJ2aWNlLmRlZmF1bHRFcnJvckhhbmRsZXIoZnVuY3Rpb24oKSB7XG4gICAqICAgLy8gRG8gbm90IGxvZyB0cmFuc2l0aW9uVG8gZXJyb3JzXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGhhbmRsZXIgYSBnbG9iYWwgZXJyb3IgaGFuZGxlciBmdW5jdGlvblxuICAgKiBAcmV0dXJucyB0aGUgY3VycmVudCBnbG9iYWwgZXJyb3IgaGFuZGxlclxuICAgKi9cbiAgZGVmYXVsdEVycm9ySGFuZGxlcihoYW5kbGVyPzogKGVycm9yOiBhbnkpID0+IHZvaWQpOiAoZXJyb3I6IGFueSkgPT4gdm9pZCB7XG4gICAgcmV0dXJuICh0aGlzLl9kZWZhdWx0RXJyb3JIYW5kbGVyID0gaGFuZGxlciB8fCB0aGlzLl9kZWZhdWx0RXJyb3JIYW5kbGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgcmVnaXN0ZXJlZCBbW1N0YXRlRGVjbGFyYXRpb25dXSBvYmplY3RcbiAgICpcbiAgICogUmV0dXJucyB0aGUgc3RhdGUgZGVjbGFyYXRpb24gb2JqZWN0IGZvciBhbnkgc3BlY2lmaWMgc3RhdGUsIG9yIGZvciBhbGwgcmVnaXN0ZXJlZCBzdGF0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSBzdGF0ZU9yTmFtZSAoYWJzb2x1dGUgb3IgcmVsYXRpdmUpIElmIHByb3ZpZGVkLCB3aWxsIG9ubHkgZ2V0IHRoZSBkZWNsYXJhdGlvbiBvYmplY3QgZm9yIHRoZSByZXF1ZXN0ZWQgc3RhdGUuXG4gICAqIElmIG5vdCBwcm92aWRlZCwgcmV0dXJucyBhbiBhcnJheSBvZiBBTEwgc3RhdGVzLlxuICAgKiBAcGFyYW0gYmFzZSBXaGVuIGBzdGF0ZU9yTmFtZWAgaXMgYSByZWxhdGl2ZSBzdGF0ZSByZWZlcmVuY2UgKHN1Y2ggYXMgYC5iYXIuYmF6YCksIHRoZSBzdGF0ZSB3aWxsIGJlIHJldHJpZXZlZCByZWxhdGl2ZSB0byB0aGlzIHN0YXRlLlxuICAgKlxuICAgKiBAcmV0dXJucyBhIFtbU3RhdGVEZWNsYXJhdGlvbl1dIG9iamVjdCAob3IgYXJyYXkgb2YgYWxsIHJlZ2lzdGVyZWQgW1tTdGF0ZURlY2xhcmF0aW9uXV0gb2JqZWN0cy4pXG4gICAqL1xuICBnZXQoc3RhdGVPck5hbWU6IFN0YXRlT3JOYW1lLCBiYXNlOiBTdGF0ZU9yTmFtZSk6IFN0YXRlRGVjbGFyYXRpb247XG4gIGdldChzdGF0ZU9yTmFtZTogU3RhdGVPck5hbWUpOiBTdGF0ZURlY2xhcmF0aW9uO1xuICBnZXQoKTogU3RhdGVEZWNsYXJhdGlvbltdO1xuICBnZXQoc3RhdGVPck5hbWU/OiBTdGF0ZU9yTmFtZSwgYmFzZT86IFN0YXRlT3JOYW1lKTogYW55IHtcbiAgICBjb25zdCByZWcgPSB0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5O1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gcmVnLmdldCgpO1xuICAgIHJldHVybiByZWcuZ2V0KHN0YXRlT3JOYW1lLCBiYXNlIHx8IHRoaXMuJGN1cnJlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIExhenkgbG9hZHMgYSBzdGF0ZVxuICAgKlxuICAgKiBFeHBsaWNpdGx5IHJ1bnMgYSBzdGF0ZSdzIFtbU3RhdGVEZWNsYXJhdGlvbi5sYXp5TG9hZF1dIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gc3RhdGVPck5hbWUgdGhlIHN0YXRlIHRoYXQgc2hvdWxkIGJlIGxhenkgbG9hZGVkXG4gICAqIEBwYXJhbSB0cmFuc2l0aW9uIHRoZSBvcHRpb25hbCBUcmFuc2l0aW9uIGNvbnRleHQgdG8gdXNlIChpZiB0aGUgbGF6eUxvYWQgZnVuY3Rpb24gcmVxdWlyZXMgYW4gaW5qZWN0b3IsIGV0YylcbiAgICogTm90ZTogSWYgbm8gdHJhbnNpdGlvbiBpcyBwcm92aWRlZCwgYSBub29wIHRyYW5zaXRpb24gaXMgY3JlYXRlZCB1c2luZyB0aGUgZnJvbSB0aGUgY3VycmVudCBzdGF0ZSB0byB0aGUgY3VycmVudCBzdGF0ZS5cbiAgICogVGhpcyBub29wIHRyYW5zaXRpb24gaXMgbm90IGFjdHVhbGx5IHJ1bi5cbiAgICpcbiAgICogQHJldHVybnMgYSBwcm9taXNlIHRvIGxhenkgbG9hZFxuICAgKi9cbiAgbGF6eUxvYWQoc3RhdGVPck5hbWU6IFN0YXRlT3JOYW1lLCB0cmFuc2l0aW9uPzogVHJhbnNpdGlvbik6IFByb21pc2U8TGF6eUxvYWRSZXN1bHQ+IHtcbiAgICBjb25zdCBzdGF0ZTogU3RhdGVEZWNsYXJhdGlvbiA9IHRoaXMuZ2V0KHN0YXRlT3JOYW1lKTtcbiAgICBpZiAoIXN0YXRlIHx8ICFzdGF0ZS5sYXp5TG9hZCkgdGhyb3cgbmV3IEVycm9yKCdDYW4gbm90IGxhenkgbG9hZCAnICsgc3RhdGVPck5hbWUpO1xuXG4gICAgY29uc3QgY3VycmVudFBhdGggPSB0aGlzLmdldEN1cnJlbnRQYXRoKCk7XG4gICAgY29uc3QgdGFyZ2V0ID0gUGF0aFV0aWxzLm1ha2VUYXJnZXRTdGF0ZSh0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LCBjdXJyZW50UGF0aCk7XG4gICAgdHJhbnNpdGlvbiA9IHRyYW5zaXRpb24gfHwgdGhpcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuY3JlYXRlKGN1cnJlbnRQYXRoLCB0YXJnZXQpO1xuXG4gICAgcmV0dXJuIGxhenlMb2FkU3RhdGUodHJhbnNpdGlvbiwgc3RhdGUpO1xuICB9XG59XG4iLCIvKiogQGludGVybmFsYXBpIEBtb2R1bGUgdmFuaWxsYSAqLyAvKiogKi9cbmltcG9ydCB7IGlzQXJyYXksIGlzT2JqZWN0LCAkUUxpa2UgfSBmcm9tICcuLi9jb21tb24vaW5kZXgnO1xuXG4vKipcbiAqIEFuIGFuZ3VsYXIxLWxpa2UgcHJvbWlzZSBhcGlcbiAqXG4gKiBUaGlzIG9iamVjdCBpbXBsZW1lbnRzIGZvdXIgbWV0aG9kcyBzaW1pbGFyIHRvIHRoZVxuICogW2FuZ3VsYXIgMSBwcm9taXNlIGFwaV0oaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nL3NlcnZpY2UvJHEpXG4gKlxuICogVUktUm91dGVyIGV2b2x2ZWQgZnJvbSBhbiBhbmd1bGFyIDEgbGlicmFyeSB0byBhIGZyYW1ld29yayBhZ25vc3RpYyBsaWJyYXJ5LlxuICogSG93ZXZlciwgc29tZSBvZiB0aGUgYEB1aXJvdXRlci9jb3JlYCBjb2RlIHVzZXMgdGhlc2UgbmcxIHN0eWxlIEFQSXMgdG8gc3VwcG9ydCBuZzEgc3R5bGUgZGVwZW5kZW5jeSBpbmplY3Rpb24uXG4gKlxuICogVGhpcyBBUEkgcHJvdmlkZXMgbmF0aXZlIEVTNiBwcm9taXNlIHN1cHBvcnQgd3JhcHBlZCBhcyBhICRxLWxpa2UgQVBJLlxuICogSW50ZXJuYWxseSwgVUktUm91dGVyIHVzZXMgdGhpcyAkcSBvYmplY3QgdG8gcGVyZm9ybSBwcm9taXNlIG9wZXJhdGlvbnMuXG4gKiBUaGUgYGFuZ3VsYXItdWktcm91dGVyYCAodWktcm91dGVyIGZvciBhbmd1bGFyIDEpIHVzZXMgdGhlICRxIEFQSSBwcm92aWRlZCBieSBhbmd1bGFyLlxuICpcbiAqICRxLWxpa2UgcHJvbWlzZSBhcGlcbiAqL1xuZXhwb3J0IGNvbnN0ICRxID0ge1xuICAvKiogTm9ybWFsaXplcyBhIHZhbHVlIGFzIGEgcHJvbWlzZSAqL1xuICB3aGVuOiB2YWwgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gcmVzb2x2ZSh2YWwpKSxcblxuICAvKiogTm9ybWFsaXplcyBhIHZhbHVlIGFzIGEgcHJvbWlzZSByZWplY3Rpb24gKi9cbiAgcmVqZWN0OiB2YWwgPT5cbiAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICByZWplY3QodmFsKTtcbiAgICB9KSxcblxuICAvKiogQHJldHVybnMgYSBkZWZlcnJlZCBvYmplY3QsIHdoaWNoIGhhcyBgcmVzb2x2ZWAgYW5kIGByZWplY3RgIGZ1bmN0aW9ucyAqL1xuICBkZWZlcjogKCkgPT4ge1xuICAgIGNvbnN0IGRlZmVycmVkOiBhbnkgPSB7fTtcbiAgICBkZWZlcnJlZC5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICBkZWZlcnJlZC5yZWplY3QgPSByZWplY3Q7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkO1xuICB9LFxuXG4gIC8qKiBMaWtlIFByb21pc2UuYWxsKCksIGJ1dCBhbHNvIHN1cHBvcnRzIG9iamVjdCBrZXkvcHJvbWlzZSBub3RhdGlvbiBsaWtlICRxICovXG4gIGFsbDogKHByb21pc2VzOiB7IFtrZXk6IHN0cmluZ106IFByb21pc2U8YW55PiB9IHwgUHJvbWlzZTxhbnk+W10pID0+IHtcbiAgICBpZiAoaXNBcnJheShwcm9taXNlcykpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgfVxuXG4gICAgaWYgKGlzT2JqZWN0KHByb21pc2VzKSkge1xuICAgICAgLy8gQ29udmVydCBwcm9taXNlcyBtYXAgdG8gcHJvbWlzZXMgYXJyYXkuXG4gICAgICAvLyBXaGVuIGVhY2ggcHJvbWlzZSByZXNvbHZlcywgbWFwIGl0IHRvIGEgdHVwbGUgeyBrZXk6IGtleSwgdmFsOiB2YWwgfVxuICAgICAgY29uc3QgY2hhaW4gPSBPYmplY3Qua2V5cyhwcm9taXNlcykubWFwKGtleSA9PiBwcm9taXNlc1trZXldLnRoZW4odmFsID0+ICh7IGtleSwgdmFsIH0pKSk7XG5cbiAgICAgIC8vIFRoZW4gd2FpdCBmb3IgYWxsIHByb21pc2VzIHRvIHJlc29sdmUsIGFuZCBjb252ZXJ0IHRoZW0gYmFjayB0byBhbiBvYmplY3RcbiAgICAgIHJldHVybiAkcS5hbGwoY2hhaW4pLnRoZW4odmFsdWVzID0+XG4gICAgICAgIHZhbHVlcy5yZWR1Y2UoKGFjYywgdHVwbGUpID0+IHtcbiAgICAgICAgICBhY2NbdHVwbGUua2V5XSA9IHR1cGxlLnZhbDtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSlcbiAgICAgICk7XG4gICAgfVxuICB9LFxufSBhcyAkUUxpa2U7XG4iLCIvKiogQGludGVybmFsYXBpIEBtb2R1bGUgdmFuaWxsYSAqLyAvKiogKi9cbmltcG9ydCB7XG4gIGV4dGVuZCxcbiAgYXNzZXJ0UHJlZGljYXRlLFxuICBpc0Z1bmN0aW9uLFxuICBpc0FycmF5LFxuICBpc0luamVjdGFibGUsXG4gICRJbmplY3Rvckxpa2UsXG4gIElJbmplY3RhYmxlLFxufSBmcm9tICcuLi9jb21tb24vaW5kZXgnO1xuXG4vLyBnbG9iYWxseSBhdmFpbGFibGUgaW5qZWN0YWJsZXNcbmNvbnN0IGdsb2JhbHMgPSB7fTtcbmNvbnN0IFNUUklQX0NPTU1FTlRTID0gLygoXFwvXFwvLiokKXwoXFwvXFwqW1xcc1xcU10qP1xcKlxcLykpL2dtO1xuY29uc3QgQVJHVU1FTlRfTkFNRVMgPSAvKFteXFxzLF0rKS9nO1xuXG4vKipcbiAqIEEgYmFzaWMgYW5ndWxhcjEtbGlrZSBpbmplY3RvciBhcGlcbiAqXG4gKiBUaGlzIG9iamVjdCBpbXBsZW1lbnRzIGZvdXIgbWV0aG9kcyBzaW1pbGFyIHRvIHRoZVxuICogW2FuZ3VsYXIgMSBkZXBlbmRlbmN5IGluamVjdG9yXShodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvYXV0by9zZXJ2aWNlLyRpbmplY3RvcilcbiAqXG4gKiBVSS1Sb3V0ZXIgZXZvbHZlZCBmcm9tIGFuIGFuZ3VsYXIgMSBsaWJyYXJ5IHRvIGEgZnJhbWV3b3JrIGFnbm9zdGljIGxpYnJhcnkuXG4gKiBIb3dldmVyLCBzb21lIG9mIHRoZSBgQHVpcm91dGVyL2NvcmVgIGNvZGUgdXNlcyB0aGVzZSBuZzEgc3R5bGUgQVBJcyB0byBzdXBwb3J0IG5nMSBzdHlsZSBkZXBlbmRlbmN5IGluamVjdGlvbi5cbiAqXG4gKiBUaGlzIG9iamVjdCBwcm92aWRlcyBhIG5haXZlIGltcGxlbWVudGF0aW9uIG9mIGEgZ2xvYmFsbHkgc2NvcGVkIGRlcGVuZGVuY3kgaW5qZWN0aW9uIHN5c3RlbS5cbiAqIEl0IHN1cHBvcnRzIHRoZSBmb2xsb3dpbmcgREkgYXBwcm9hY2hlczpcbiAqXG4gKiAjIyMgRnVuY3Rpb24gcGFyYW1ldGVyIG5hbWVzXG4gKlxuICogQSBmdW5jdGlvbidzIGAudG9TdHJpbmcoKWAgaXMgY2FsbGVkLCBhbmQgdGhlIHBhcmFtZXRlciBuYW1lcyBhcmUgcGFyc2VkLlxuICogVGhpcyBvbmx5IHdvcmtzIHdoZW4gdGhlIHBhcmFtZXRlciBuYW1lcyBhcmVuJ3QgXCJtYW5nbGVkXCIgYnkgYSBtaW5pZmllciBzdWNoIGFzIFVnbGlmeUpTLlxuICpcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiBpbmplY3RlZEZ1bmN0aW9uKEZvb1NlcnZpY2UsIEJhclNlcnZpY2UpIHtcbiAqICAgLy8gRm9vU2VydmljZSBhbmQgQmFyU2VydmljZSBhcmUgaW5qZWN0ZWRcbiAqIH1cbiAqIGBgYFxuICpcbiAqICMjIyBGdW5jdGlvbiBhbm5vdGF0aW9uXG4gKlxuICogQSBmdW5jdGlvbiBtYXkgYmUgYW5ub3RhdGVkIHdpdGggYW4gYXJyYXkgb2YgZGVwZW5kZW5jeSBuYW1lcyBhcyB0aGUgYCRpbmplY3RgIHByb3BlcnR5LlxuICpcbiAqIGBgYGpzXG4gKiBpbmplY3RlZEZ1bmN0aW9uLiRpbmplY3QgPSBbICdGb29TZXJ2aWNlJywgJ0JhclNlcnZpY2UnIF07XG4gKiBmdW5jdGlvbiBpbmplY3RlZEZ1bmN0aW9uKGZzLCBicykge1xuICogICAvLyBGb29TZXJ2aWNlIGFuZCBCYXJTZXJ2aWNlIGFyZSBpbmplY3RlZCBhcyBmcyBhbmQgYnMgcGFyYW1ldGVyc1xuICogfVxuICogYGBgXG4gKlxuICogIyMjIEFycmF5IG5vdGF0aW9uXG4gKlxuICogQW4gYXJyYXkgcHJvdmlkZXMgdGhlIG5hbWVzIG9mIHRoZSBkZXBlbmRlbmNpZXMgdG8gaW5qZWN0IChhcyBzdHJpbmdzKS5cbiAqIFRoZSBmdW5jdGlvbiBpcyB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBhcnJheS5cbiAqXG4gKiBgYGBqc1xuICogWyAnRm9vU2VydmljZScsICdCYXJTZXJ2aWNlJywgZnVuY3Rpb24gKGZzLCBicykge1xuICogICAvLyBGb29TZXJ2aWNlIGFuZCBCYXJTZXJ2aWNlIGFyZSBpbmplY3RlZCBhcyBmcyBhbmQgYnMgcGFyYW1ldGVyc1xuICogfV1cbiAqIGBgYFxuICpcbiAqIEB0eXBlIHskSW5qZWN0b3JMaWtlfVxuICovXG5leHBvcnQgY29uc3QgJGluamVjdG9yID0ge1xuICAvKiogR2V0cyBhbiBvYmplY3QgZnJvbSBESSBiYXNlZCBvbiBhIHN0cmluZyB0b2tlbiAqL1xuICBnZXQ6IG5hbWUgPT4gZ2xvYmFsc1tuYW1lXSxcblxuICAvKiogUmV0dXJucyB0cnVlIGlmIGFuIG9iamVjdCBuYW1lZCBgbmFtZWAgZXhpc3RzIGluIGdsb2JhbCBESSAqL1xuICBoYXM6IG5hbWUgPT4gJGluamVjdG9yLmdldChuYW1lKSAhPSBudWxsLFxuXG4gIC8qKlxuICAgKiBJbmplY3RzIGEgZnVuY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIGZuIHRoZSBmdW5jdGlvbiB0byBpbmplY3RcbiAgICogQHBhcmFtIGNvbnRleHQgdGhlIGZ1bmN0aW9uJ3MgYHRoaXNgIGJpbmRpbmdcbiAgICogQHBhcmFtIGxvY2FscyBBbiBvYmplY3Qgd2l0aCBhZGRpdGlvbmFsIERJIHRva2VucyBhbmQgdmFsdWVzLCBzdWNoIGFzIGB7IHNvbWVUb2tlbjogeyBmb286IDEgfSB9YFxuICAgKi9cbiAgaW52b2tlOiAoZm46IElJbmplY3RhYmxlLCBjb250ZXh0PywgbG9jYWxzPykgPT4ge1xuICAgIGNvbnN0IGFsbCA9IGV4dGVuZCh7fSwgZ2xvYmFscywgbG9jYWxzIHx8IHt9KTtcbiAgICBjb25zdCBwYXJhbXMgPSAkaW5qZWN0b3IuYW5ub3RhdGUoZm4pO1xuICAgIGNvbnN0IGVuc3VyZUV4aXN0ID0gYXNzZXJ0UHJlZGljYXRlKFxuICAgICAgKGtleTogc3RyaW5nKSA9PiBhbGwuaGFzT3duUHJvcGVydHkoa2V5KSxcbiAgICAgIGtleSA9PiBgREkgY2FuJ3QgZmluZCBpbmplY3RhYmxlOiAnJHtrZXl9J2BcbiAgICApO1xuICAgIGNvbnN0IGFyZ3MgPSBwYXJhbXMuZmlsdGVyKGVuc3VyZUV4aXN0KS5tYXAoeCA9PiBhbGxbeF0pO1xuICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIGVsc2UgcmV0dXJuIChmbiBhcyBhbnlbXSkuc2xpY2UoLTEpWzBdLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24ncyBkZXBlbmRlbmNpZXNcbiAgICpcbiAgICogQW5hbHl6ZXMgYSBmdW5jdGlvbiAob3IgYXJyYXkpIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIERJIHRva2VucyB0aGF0IHRoZSBmdW5jdGlvbiByZXF1aXJlcy5cbiAgICogQHJldHVybiBhbiBhcnJheSBvZiBgc3RyaW5nYHNcbiAgICovXG4gIGFubm90YXRlOiAoZm46IElJbmplY3RhYmxlKTogYW55W10gPT4ge1xuICAgIGlmICghaXNJbmplY3RhYmxlKGZuKSkgdGhyb3cgbmV3IEVycm9yKGBOb3QgYW4gaW5qZWN0YWJsZSBmdW5jdGlvbjogJHtmbn1gKTtcbiAgICBpZiAoZm4gJiYgKGZuIGFzIGFueSkuJGluamVjdCkgcmV0dXJuIChmbiBhcyBhbnkpLiRpbmplY3Q7XG4gICAgaWYgKGlzQXJyYXkoZm4pKSByZXR1cm4gZm4uc2xpY2UoMCwgLTEpO1xuICAgIGNvbnN0IGZuU3RyID0gZm4udG9TdHJpbmcoKS5yZXBsYWNlKFNUUklQX0NPTU1FTlRTLCAnJyk7XG4gICAgY29uc3QgcmVzdWx0ID0gZm5TdHIuc2xpY2UoZm5TdHIuaW5kZXhPZignKCcpICsgMSwgZm5TdHIuaW5kZXhPZignKScpKS5tYXRjaChBUkdVTUVOVF9OQU1FUyk7XG4gICAgcmV0dXJuIHJlc3VsdCB8fCBbXTtcbiAgfSxcbn0gYXMgJEluamVjdG9yTGlrZTtcbiIsIi8qKiBAaW50ZXJuYWxhcGkgQG1vZHVsZSB2YW5pbGxhICovIC8qKiAqL1xuaW1wb3J0IHtcbiAgTG9jYXRpb25Db25maWcsXG4gIExvY2F0aW9uU2VydmljZXMsXG4gIGlkZW50aXR5LFxuICB1bm5lc3RSLFxuICBpc0FycmF5LFxuICBzcGxpdEVxdWFsLFxuICBzcGxpdEhhc2gsXG4gIHNwbGl0UXVlcnksXG59IGZyb20gJy4uL2NvbW1vbic7XG5pbXBvcnQgeyBVSVJvdXRlciB9IGZyb20gJy4uL3JvdXRlcic7XG5cbmV4cG9ydCBjb25zdCBrZXlWYWxzVG9PYmplY3RSID0gKGFjY3VtLCBba2V5LCB2YWxdKSA9PiB7XG4gIGlmICghYWNjdW0uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgIGFjY3VtW2tleV0gPSB2YWw7XG4gIH0gZWxzZSBpZiAoaXNBcnJheShhY2N1bVtrZXldKSkge1xuICAgIGFjY3VtW2tleV0ucHVzaCh2YWwpO1xuICB9IGVsc2Uge1xuICAgIGFjY3VtW2tleV0gPSBbYWNjdW1ba2V5XSwgdmFsXTtcbiAgfVxuICByZXR1cm4gYWNjdW07XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0UGFyYW1zID0gKHF1ZXJ5U3RyaW5nOiBzdHJpbmcpOiBhbnkgPT5cbiAgcXVlcnlTdHJpbmdcbiAgICAuc3BsaXQoJyYnKVxuICAgIC5maWx0ZXIoaWRlbnRpdHkpXG4gICAgLm1hcChzcGxpdEVxdWFsKVxuICAgIC5yZWR1Y2Uoa2V5VmFsc1RvT2JqZWN0Uiwge30pO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VVcmwodXJsOiBzdHJpbmcpIHtcbiAgY29uc3Qgb3JFbXB0eVN0cmluZyA9IHggPT4geCB8fCAnJztcbiAgY29uc3QgW2JlZm9yZWhhc2gsIGhhc2hdID0gc3BsaXRIYXNoKHVybCkubWFwKG9yRW1wdHlTdHJpbmcpO1xuICBjb25zdCBbcGF0aCwgc2VhcmNoXSA9IHNwbGl0UXVlcnkoYmVmb3JlaGFzaCkubWFwKG9yRW1wdHlTdHJpbmcpO1xuXG4gIHJldHVybiB7IHBhdGgsIHNlYXJjaCwgaGFzaCwgdXJsIH07XG59XG5cbmV4cG9ydCBjb25zdCBidWlsZFVybCA9IChsb2M6IExvY2F0aW9uU2VydmljZXMpID0+IHtcbiAgY29uc3QgcGF0aCA9IGxvYy5wYXRoKCk7XG4gIGNvbnN0IHNlYXJjaE9iamVjdCA9IGxvYy5zZWFyY2goKTtcbiAgY29uc3QgaGFzaCA9IGxvYy5oYXNoKCk7XG5cbiAgY29uc3Qgc2VhcmNoID0gT2JqZWN0LmtleXMoc2VhcmNoT2JqZWN0KVxuICAgIC5tYXAoa2V5ID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtID0gc2VhcmNoT2JqZWN0W2tleV07XG4gICAgICBjb25zdCB2YWxzID0gaXNBcnJheShwYXJhbSkgPyBwYXJhbSA6IFtwYXJhbV07XG4gICAgICByZXR1cm4gdmFscy5tYXAodmFsID0+IGtleSArICc9JyArIHZhbCk7XG4gICAgfSlcbiAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgIC5qb2luKCcmJyk7XG5cbiAgcmV0dXJuIHBhdGggKyAoc2VhcmNoID8gJz8nICsgc2VhcmNoIDogJycpICsgKGhhc2ggPyAnIycgKyBoYXNoIDogJycpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGxvY2F0aW9uUGx1Z2luRmFjdG9yeShcbiAgbmFtZTogc3RyaW5nLFxuICBpc0h0bWw1OiBib29sZWFuLFxuICBzZXJ2aWNlQ2xhc3M6IHsgbmV3ICh1aVJvdXRlcj86IFVJUm91dGVyKTogTG9jYXRpb25TZXJ2aWNlcyB9LFxuICBjb25maWd1cmF0aW9uQ2xhc3M6IHsgbmV3ICh1aVJvdXRlcj86IFVJUm91dGVyLCBpc0h0bWw1PzogYm9vbGVhbik6IExvY2F0aW9uQ29uZmlnIH1cbikge1xuICByZXR1cm4gZnVuY3Rpb24odWlSb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgY29uc3Qgc2VydmljZSA9ICh1aVJvdXRlci5sb2NhdGlvblNlcnZpY2UgPSBuZXcgc2VydmljZUNsYXNzKHVpUm91dGVyKSk7XG4gICAgY29uc3QgY29uZmlndXJhdGlvbiA9ICh1aVJvdXRlci5sb2NhdGlvbkNvbmZpZyA9IG5ldyBjb25maWd1cmF0aW9uQ2xhc3ModWlSb3V0ZXIsIGlzSHRtbDUpKTtcblxuICAgIGZ1bmN0aW9uIGRpc3Bvc2Uocm91dGVyOiBVSVJvdXRlcikge1xuICAgICAgcm91dGVyLmRpc3Bvc2Uoc2VydmljZSk7XG4gICAgICByb3V0ZXIuZGlzcG9zZShjb25maWd1cmF0aW9uKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBuYW1lLCBzZXJ2aWNlLCBjb25maWd1cmF0aW9uLCBkaXNwb3NlIH07XG4gIH07XG59XG4iLCIvKiogQGludGVybmFsYXBpIEBtb2R1bGUgdmFuaWxsYSAqLyAvKiogKi9cbmltcG9ydCB7IGRlcmVnQWxsLCBpc0RlZmluZWQsIExvY2F0aW9uU2VydmljZXMsIHJlbW92ZUZyb20sIHJvb3QgfSBmcm9tICcuLi9jb21tb24nO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBVSVJvdXRlciB9IGZyb20gJy4uL3JvdXRlcic7XG5pbXBvcnQgeyBIaXN0b3J5TGlrZSwgTG9jYXRpb25MaWtlIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgYnVpbGRVcmwsIGdldFBhcmFtcywgcGFyc2VVcmwgfSBmcm9tICcuL3V0aWxzJztcblxuLyoqIEEgYmFzZSBgTG9jYXRpb25TZXJ2aWNlc2AgKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlTG9jYXRpb25TZXJ2aWNlcyBpbXBsZW1lbnRzIExvY2F0aW9uU2VydmljZXMsIERpc3Bvc2FibGUge1xuICBwcml2YXRlIF9saXN0ZW5lcnM6IEZ1bmN0aW9uW10gPSBbXTtcbiAgX2xvY2F0aW9uOiBMb2NhdGlvbkxpa2U7XG4gIF9oaXN0b3J5OiBIaXN0b3J5TGlrZTtcblxuICBfbGlzdGVuZXIgPSBldnQgPT4gdGhpcy5fbGlzdGVuZXJzLmZvckVhY2goY2IgPT4gY2IoZXZ0KSk7XG5cbiAgY29uc3RydWN0b3Iocm91dGVyOiBVSVJvdXRlciwgcHVibGljIGZpcmVBZnRlclVwZGF0ZTogYm9vbGVhbikge1xuICAgIHRoaXMuX2xvY2F0aW9uID0gcm9vdC5sb2NhdGlvbjtcbiAgICB0aGlzLl9oaXN0b3J5ID0gcm9vdC5oaXN0b3J5O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgc2hvdWxkIHJldHVybiB0aGUgY3VycmVudCBpbnRlcm5hbCBVUkwgcmVwcmVzZW50YXRpb24uXG4gICAqXG4gICAqIFRoZSBpbnRlcm5hbCBVUkwgaW5jbHVkZXMgb25seSB0aGUgcG9ydGlvbiB0aGF0IFVJLVJvdXRlciBtYXRjaGVzLlxuICAgKiBJdCBkb2VzIG5vdCBpbmNsdWRlOlxuICAgKiAtIHByb3RvY29sXG4gICAqIC0gc2VydmVyXG4gICAqIC0gcG9ydFxuICAgKiAtIGJhc2UgaHJlZiBvciBoYXNoXG4gICAqL1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgX2dldCgpOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoaXMgc2hvdWxkIHNldCB0aGUgY3VycmVudCBVUkwuXG4gICAqXG4gICAqIFRoZSBgdXJsYCBwYXJhbSBzaG91bGQgaW5jbHVkZSBvbmx5IHRoZSBwb3J0aW9uIHRoYXQgVUktUm91dGVyIG1hdGNoZXMgb24uXG4gICAqIEl0IHNob3VsZCBub3QgaW5jbHVkZTpcbiAgICogLSBwcm90b2NvbFxuICAgKiAtIHNlcnZlclxuICAgKiAtIHBvcnRcbiAgICogLSBiYXNlIGhyZWYgb3IgaGFzaFxuICAgKlxuICAgKiBIb3dldmVyLCBhZnRlciB0aGlzIGZ1bmN0aW9uIGNvbXBsZXRlcywgdGhlIGJyb3dzZXIgVVJMIHNob3VsZCByZWZsZWN0IHRoZSBlbnRpcmUgKGZ1bGx5IHF1YWxpZmllZClcbiAgICogSFJFRiBpbmNsdWRpbmcgdGhvc2UgZGF0YS5cbiAgICovXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBfc2V0KHN0YXRlOiBhbnksIHRpdGxlOiBzdHJpbmcsIHVybDogc3RyaW5nLCByZXBsYWNlOiBib29sZWFuKTtcblxuICBoYXNoID0gKCkgPT4gcGFyc2VVcmwodGhpcy5fZ2V0KCkpLmhhc2g7XG4gIHBhdGggPSAoKSA9PiBwYXJzZVVybCh0aGlzLl9nZXQoKSkucGF0aDtcbiAgc2VhcmNoID0gKCkgPT4gZ2V0UGFyYW1zKHBhcnNlVXJsKHRoaXMuX2dldCgpKS5zZWFyY2gpO1xuXG4gIHVybCh1cmw/OiBzdHJpbmcsIHJlcGxhY2UgPSB0cnVlKTogc3RyaW5nIHtcbiAgICBpZiAoaXNEZWZpbmVkKHVybCkgJiYgdXJsICE9PSB0aGlzLl9nZXQoKSkge1xuICAgICAgdGhpcy5fc2V0KG51bGwsIG51bGwsIHVybCwgcmVwbGFjZSk7XG5cbiAgICAgIGlmICh0aGlzLmZpcmVBZnRlclVwZGF0ZSkge1xuICAgICAgICB0aGlzLl9saXN0ZW5lcnMuZm9yRWFjaChjYiA9PiBjYih7IHVybCB9KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1aWxkVXJsKHRoaXMpO1xuICB9XG5cbiAgb25DaGFuZ2UoY2I6IEV2ZW50TGlzdGVuZXIpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMucHVzaChjYik7XG4gICAgcmV0dXJuICgpID0+IHJlbW92ZUZyb20odGhpcy5fbGlzdGVuZXJzLCBjYik7XG4gIH1cblxuICBkaXNwb3NlKHJvdXRlcjogVUlSb3V0ZXIpIHtcbiAgICBkZXJlZ0FsbCh0aGlzLl9saXN0ZW5lcnMpO1xuICB9XG59XG4iLCIvKiogQGludGVybmFsYXBpIEBtb2R1bGUgdmFuaWxsYSAqLyAvKiogKi9cbmltcG9ydCB7IHJvb3QsIHRyaW1IYXNoVmFsIH0gZnJvbSAnLi4vY29tbW9uJztcbmltcG9ydCB7IFVJUm91dGVyIH0gZnJvbSAnLi4vcm91dGVyJztcbmltcG9ydCB7IEJhc2VMb2NhdGlvblNlcnZpY2VzIH0gZnJvbSAnLi9iYXNlTG9jYXRpb25TZXJ2aWNlJztcblxuLyoqIEEgYExvY2F0aW9uU2VydmljZXNgIHRoYXQgdXNlcyB0aGUgYnJvd3NlciBoYXNoIFwiI1wiIHRvIGdldC9zZXQgdGhlIGN1cnJlbnQgbG9jYXRpb24gKi9cbmV4cG9ydCBjbGFzcyBIYXNoTG9jYXRpb25TZXJ2aWNlIGV4dGVuZHMgQmFzZUxvY2F0aW9uU2VydmljZXMge1xuICBjb25zdHJ1Y3Rvcihyb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgc3VwZXIocm91dGVyLCBmYWxzZSk7XG4gICAgcm9vdC5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5fbGlzdGVuZXIsIGZhbHNlKTtcbiAgfVxuXG4gIF9nZXQoKSB7XG4gICAgcmV0dXJuIHRyaW1IYXNoVmFsKHRoaXMuX2xvY2F0aW9uLmhhc2gpO1xuICB9XG4gIF9zZXQoc3RhdGU6IGFueSwgdGl0bGU6IHN0cmluZywgdXJsOiBzdHJpbmcsIHJlcGxhY2U6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9sb2NhdGlvbi5oYXNoID0gdXJsO1xuICB9XG5cbiAgZGlzcG9zZShyb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgc3VwZXIuZGlzcG9zZShyb3V0ZXIpO1xuICAgIHJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuX2xpc3RlbmVyKTtcbiAgfVxufVxuIiwiLyoqIEBpbnRlcm5hbGFwaSBAbW9kdWxlIHZhbmlsbGEgKi8gLyoqICovXG5pbXBvcnQgeyBCYXNlTG9jYXRpb25TZXJ2aWNlcyB9IGZyb20gJy4vYmFzZUxvY2F0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBVSVJvdXRlciB9IGZyb20gJy4uL3JvdXRlcic7XG5cbi8qKiBBIGBMb2NhdGlvblNlcnZpY2VzYCB0aGF0IGdldHMvc2V0cyB0aGUgY3VycmVudCBsb2NhdGlvbiBmcm9tIGFuIGluLW1lbW9yeSBvYmplY3QgKi9cbmV4cG9ydCBjbGFzcyBNZW1vcnlMb2NhdGlvblNlcnZpY2UgZXh0ZW5kcyBCYXNlTG9jYXRpb25TZXJ2aWNlcyB7XG4gIF91cmw6IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcihyb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgc3VwZXIocm91dGVyLCB0cnVlKTtcbiAgfVxuXG4gIF9nZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VybDtcbiAgfVxuXG4gIF9zZXQoc3RhdGU6IGFueSwgdGl0bGU6IHN0cmluZywgdXJsOiBzdHJpbmcsIHJlcGxhY2U6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl91cmwgPSB1cmw7XG4gIH1cbn1cbiIsIi8qKiBAaW50ZXJuYWxhcGkgQG1vZHVsZSB2YW5pbGxhICovIC8qKiAqL1xuaW1wb3J0IHsgVUlSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuaW1wb3J0IHsgQmFzZUxvY2F0aW9uU2VydmljZXMgfSBmcm9tICcuL2Jhc2VMb2NhdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgTG9jYXRpb25Db25maWcsIHJvb3QsIHNwbGl0SGFzaCwgc3BsaXRRdWVyeSwgc3RyaXBMYXN0UGF0aEVsZW1lbnQgfSBmcm9tICcuLi9jb21tb24nO1xuXG4vKipcbiAqIEEgYExvY2F0aW9uU2VydmljZXNgIHRoYXQgZ2V0cy9zZXRzIHRoZSBjdXJyZW50IGxvY2F0aW9uIHVzaW5nIHRoZSBicm93c2VyJ3MgYGxvY2F0aW9uYCBhbmQgYGhpc3RvcnlgIGFwaXNcbiAqXG4gKiBVc2VzIGBoaXN0b3J5LnB1c2hTdGF0ZWAgYW5kIGBoaXN0b3J5LnJlcGxhY2VTdGF0ZWBcbiAqL1xuZXhwb3J0IGNsYXNzIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSBleHRlbmRzIEJhc2VMb2NhdGlvblNlcnZpY2VzIHtcbiAgX2NvbmZpZzogTG9jYXRpb25Db25maWc7XG5cbiAgY29uc3RydWN0b3Iocm91dGVyOiBVSVJvdXRlcikge1xuICAgIHN1cGVyKHJvdXRlciwgdHJ1ZSk7XG4gICAgdGhpcy5fY29uZmlnID0gcm91dGVyLnVybFNlcnZpY2UuY29uZmlnO1xuICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLl9saXN0ZW5lciwgZmFsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGJhc2UgcHJlZml4IHdpdGhvdXQ6XG4gICAqIC0gdHJhaWxpbmcgc2xhc2hcbiAgICogLSB0cmFpbGluZyBmaWxlbmFtZVxuICAgKiAtIHByb3RvY29sIGFuZCBob3N0bmFtZVxuICAgKlxuICAgKiBJZiA8YmFzZSBocmVmPScvYmFzZS8nPiwgdGhpcyByZXR1cm5zICcvYmFzZScuXG4gICAqIElmIDxiYXNlIGhyZWY9Jy9mb28vYmFzZS8nPiwgdGhpcyByZXR1cm5zICcvZm9vL2Jhc2UnLlxuICAgKiBJZiA8YmFzZSBocmVmPScvYmFzZS9pbmRleC5odG1sJz4sIHRoaXMgcmV0dXJucyAnL2Jhc2UnLlxuICAgKiBJZiA8YmFzZSBocmVmPSdodHRwOi8vbG9jYWxob3N0OjgwODAvYmFzZS9pbmRleC5odG1sJz4sIHRoaXMgcmV0dXJucyAnL2Jhc2UnLlxuICAgKiBJZiA8YmFzZSBocmVmPScvYmFzZSc+LCB0aGlzIHJldHVybnMgJycuXG4gICAqIElmIDxiYXNlIGhyZWY9J2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCc+LCB0aGlzIHJldHVybnMgJycuXG4gICAqIElmIDxiYXNlIGhyZWY9J2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC8nPiwgdGhpcyByZXR1cm5zICcnLlxuICAgKlxuICAgKiBTZWU6IGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvZGV2L3NlbWFudGljcy5odG1sI3RoZS1iYXNlLWVsZW1lbnRcbiAgICovXG4gIHByaXZhdGUgX2dldEJhc2VQcmVmaXgoKSB7XG4gICAgcmV0dXJuIHN0cmlwTGFzdFBhdGhFbGVtZW50KHRoaXMuX2NvbmZpZy5iYXNlSHJlZigpKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfZ2V0KCkge1xuICAgIGxldCB7IHBhdGhuYW1lLCBoYXNoLCBzZWFyY2ggfSA9IHRoaXMuX2xvY2F0aW9uO1xuICAgIHNlYXJjaCA9IHNwbGl0UXVlcnkoc2VhcmNoKVsxXTsgLy8gc3RyaXAgPyBpZiBmb3VuZFxuICAgIGhhc2ggPSBzcGxpdEhhc2goaGFzaClbMV07IC8vIHN0cmlwICMgaWYgZm91bmRcblxuICAgIGNvbnN0IGJhc2VQcmVmaXggPSB0aGlzLl9nZXRCYXNlUHJlZml4KCk7XG4gICAgY29uc3QgZXhhY3RCYXNlSHJlZk1hdGNoID0gcGF0aG5hbWUgPT09IHRoaXMuX2NvbmZpZy5iYXNlSHJlZigpO1xuICAgIGNvbnN0IHN0YXJ0c1dpdGhCYXNlID0gcGF0aG5hbWUuc3Vic3RyKDAsIGJhc2VQcmVmaXgubGVuZ3RoKSA9PT0gYmFzZVByZWZpeDtcbiAgICBwYXRobmFtZSA9IGV4YWN0QmFzZUhyZWZNYXRjaCA/ICcvJyA6IHN0YXJ0c1dpdGhCYXNlID8gcGF0aG5hbWUuc3Vic3RyaW5nKGJhc2VQcmVmaXgubGVuZ3RoKSA6IHBhdGhuYW1lO1xuXG4gICAgcmV0dXJuIHBhdGhuYW1lICsgKHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnKSArIChoYXNoID8gJyMnICsgaGFzaCA6ICcnKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfc2V0KHN0YXRlOiBhbnksIHRpdGxlOiBzdHJpbmcsIHVybDogc3RyaW5nLCByZXBsYWNlOiBib29sZWFuKSB7XG4gICAgY29uc3QgYmFzZVByZWZpeCA9IHRoaXMuX2dldEJhc2VQcmVmaXgoKTtcbiAgICBjb25zdCBzbGFzaCA9IHVybCAmJiB1cmxbMF0gIT09ICcvJyA/ICcvJyA6ICcnO1xuICAgIGNvbnN0IGZ1bGxVcmwgPSB1cmwgPT09ICcnIHx8IHVybCA9PT0gJy8nID8gdGhpcy5fY29uZmlnLmJhc2VIcmVmKCkgOiBiYXNlUHJlZml4ICsgc2xhc2ggKyB1cmw7XG5cbiAgICBpZiAocmVwbGFjZSkge1xuICAgICAgdGhpcy5faGlzdG9yeS5yZXBsYWNlU3RhdGUoc3RhdGUsIHRpdGxlLCBmdWxsVXJsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlzdG9yeS5wdXNoU3RhdGUoc3RhdGUsIHRpdGxlLCBmdWxsVXJsKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZShyb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgc3VwZXIuZGlzcG9zZShyb3V0ZXIpO1xuICAgIHJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLl9saXN0ZW5lcik7XG4gIH1cbn1cbiIsIi8qKiBAaW50ZXJuYWxhcGkgQG1vZHVsZSB2YW5pbGxhICovIC8qKiAqL1xuaW1wb3J0IHsgTG9jYXRpb25Db25maWcgfSBmcm9tICcuLi9jb21tb24vY29yZXNlcnZpY2VzJztcbmltcG9ydCB7IGlzRGVmaW5lZCB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcblxuLyoqIEEgYExvY2F0aW9uQ29uZmlnYCBtb2NrIHRoYXQgZ2V0cy9zZXRzIGFsbCBjb25maWcgZnJvbSBhbiBpbi1tZW1vcnkgb2JqZWN0ICovXG5leHBvcnQgY2xhc3MgTWVtb3J5TG9jYXRpb25Db25maWcgaW1wbGVtZW50cyBMb2NhdGlvbkNvbmZpZyB7XG4gIGRpc3Bvc2UgPSBub29wO1xuXG4gIF9iYXNlSHJlZiA9ICcnO1xuICBfcG9ydCA9IDgwO1xuICBfcHJvdG9jb2wgPSAnaHR0cCc7XG4gIF9ob3N0ID0gJ2xvY2FsaG9zdCc7XG4gIF9oYXNoUHJlZml4ID0gJyc7XG5cbiAgcG9ydCA9ICgpID0+IHRoaXMuX3BvcnQ7XG4gIHByb3RvY29sID0gKCkgPT4gdGhpcy5fcHJvdG9jb2w7XG4gIGhvc3QgPSAoKSA9PiB0aGlzLl9ob3N0O1xuICBiYXNlSHJlZiA9ICgpID0+IHRoaXMuX2Jhc2VIcmVmO1xuICBodG1sNU1vZGUgPSAoKSA9PiBmYWxzZTtcbiAgaGFzaFByZWZpeCA9IChuZXd2YWw/KSA9PiAoaXNEZWZpbmVkKG5ld3ZhbCkgPyAodGhpcy5faGFzaFByZWZpeCA9IG5ld3ZhbCkgOiB0aGlzLl9oYXNoUHJlZml4KTtcbn1cbiIsIi8qKiBAaW50ZXJuYWxhcGkgQG1vZHVsZSB2YW5pbGxhICovXG4vKiogKi9cbmltcG9ydCB7IGlzRGVmaW5lZCwgaXNVbmRlZmluZWQgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBMb2NhdGlvbkNvbmZpZyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuXG4vKiogQSBgTG9jYXRpb25Db25maWdgIHRoYXQgZGVsZWdhdGVzIHRvIHRoZSBicm93c2VyJ3MgYGxvY2F0aW9uYCBvYmplY3QgKi9cbmV4cG9ydCBjbGFzcyBCcm93c2VyTG9jYXRpb25Db25maWcgaW1wbGVtZW50cyBMb2NhdGlvbkNvbmZpZyB7XG4gIHByaXZhdGUgX2Jhc2VIcmVmID0gdW5kZWZpbmVkO1xuICBwcml2YXRlIF9oYXNoUHJlZml4ID0gJyc7XG5cbiAgY29uc3RydWN0b3Iocm91dGVyPywgcHJpdmF0ZSBfaXNIdG1sNSA9IGZhbHNlKSB7fVxuXG4gIHBvcnQoKTogbnVtYmVyIHtcbiAgICBpZiAobG9jYXRpb24ucG9ydCkge1xuICAgICAgcmV0dXJuIE51bWJlcihsb2NhdGlvbi5wb3J0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wcm90b2NvbCgpID09PSAnaHR0cHMnID8gNDQzIDogODA7XG4gIH1cblxuICBwcm90b2NvbCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBsb2NhdGlvbi5wcm90b2NvbC5yZXBsYWNlKC86L2csICcnKTtcbiAgfVxuXG4gIGhvc3QoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbG9jYXRpb24uaG9zdG5hbWU7XG4gIH1cblxuICBodG1sNU1vZGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2lzSHRtbDU7XG4gIH1cblxuICBoYXNoUHJlZml4KCk6IHN0cmluZztcbiAgaGFzaFByZWZpeChuZXdwcmVmaXg/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBpc0RlZmluZWQobmV3cHJlZml4KSA/ICh0aGlzLl9oYXNoUHJlZml4ID0gbmV3cHJlZml4KSA6IHRoaXMuX2hhc2hQcmVmaXg7XG4gIH1cblxuICBiYXNlSHJlZihocmVmPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoaXNEZWZpbmVkKGhyZWYpKSB0aGlzLl9iYXNlSHJlZiA9IGhyZWY7XG4gICAgaWYgKGlzVW5kZWZpbmVkKHRoaXMuX2Jhc2VIcmVmKSkgdGhpcy5fYmFzZUhyZWYgPSB0aGlzLmdldEJhc2VIcmVmKCk7XG4gICAgcmV0dXJuIHRoaXMuX2Jhc2VIcmVmO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRCYXNlSHJlZigpIHtcbiAgICBjb25zdCBiYXNlVGFnOiBIVE1MQmFzZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYmFzZScpWzBdO1xuICAgIGlmIChiYXNlVGFnICYmIGJhc2VUYWcuaHJlZikge1xuICAgICAgcmV0dXJuIGJhc2VUYWcuaHJlZi5yZXBsYWNlKC9eKFteLzpdKjopP1xcL1xcL1teL10qLywgJycpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9pc0h0bWw1ID8gJy8nIDogbG9jYXRpb24ucGF0aG5hbWUgfHwgJy8nO1xuICB9XG5cbiAgZGlzcG9zZSgpIHt9XG59XG4iLCIvKiogQGludGVybmFsYXBpIEBtb2R1bGUgdmFuaWxsYSAqLyAvKiogKi9cbmltcG9ydCB7IEJyb3dzZXJMb2NhdGlvbkNvbmZpZyB9IGZyb20gJy4vYnJvd3NlckxvY2F0aW9uQ29uZmlnJztcbmltcG9ydCB7IEhhc2hMb2NhdGlvblNlcnZpY2UgfSBmcm9tICcuL2hhc2hMb2NhdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgbG9jYXRpb25QbHVnaW5GYWN0b3J5IH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBMb2NhdGlvblBsdWdpbiwgU2VydmljZXNQbHVnaW4gfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBVSVJvdXRlciB9IGZyb20gJy4uL3JvdXRlcic7XG5pbXBvcnQgeyBQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UgfSBmcm9tICcuL3B1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBNZW1vcnlMb2NhdGlvblNlcnZpY2UgfSBmcm9tICcuL21lbW9yeUxvY2F0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBNZW1vcnlMb2NhdGlvbkNvbmZpZyB9IGZyb20gJy4vbWVtb3J5TG9jYXRpb25Db25maWcnO1xuaW1wb3J0IHsgJGluamVjdG9yIH0gZnJvbSAnLi9pbmplY3Rvcic7XG5pbXBvcnQgeyAkcSB9IGZyb20gJy4vcSc7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2VydmljZXNQbHVnaW4ocm91dGVyOiBVSVJvdXRlcik6IFNlcnZpY2VzUGx1Z2luIHtcbiAgc2VydmljZXMuJGluamVjdG9yID0gJGluamVjdG9yO1xuICBzZXJ2aWNlcy4kcSA9ICRxO1xuXG4gIHJldHVybiB7IG5hbWU6ICd2YW5pbGxhLnNlcnZpY2VzJywgJHEsICRpbmplY3RvciwgZGlzcG9zZTogKCkgPT4gbnVsbCB9O1xufVxuXG4vKiogQSBgVUlSb3V0ZXJQbHVnaW5gIHVzZXMgdGhlIGJyb3dzZXIgaGFzaCB0byBnZXQvc2V0IHRoZSBjdXJyZW50IGxvY2F0aW9uICovXG5leHBvcnQgY29uc3QgaGFzaExvY2F0aW9uUGx1Z2luOiAocm91dGVyOiBVSVJvdXRlcikgPT4gTG9jYXRpb25QbHVnaW4gPSBsb2NhdGlvblBsdWdpbkZhY3RvcnkoXG4gICd2YW5pbGxhLmhhc2hCYW5nTG9jYXRpb24nLFxuICBmYWxzZSxcbiAgSGFzaExvY2F0aW9uU2VydmljZSxcbiAgQnJvd3NlckxvY2F0aW9uQ29uZmlnXG4pO1xuXG4vKiogQSBgVUlSb3V0ZXJQbHVnaW5gIHRoYXQgZ2V0cy9zZXRzIHRoZSBjdXJyZW50IGxvY2F0aW9uIHVzaW5nIHRoZSBicm93c2VyJ3MgYGxvY2F0aW9uYCBhbmQgYGhpc3RvcnlgIGFwaXMgKi9cbmV4cG9ydCBjb25zdCBwdXNoU3RhdGVMb2NhdGlvblBsdWdpbjogKHJvdXRlcjogVUlSb3V0ZXIpID0+IExvY2F0aW9uUGx1Z2luID0gbG9jYXRpb25QbHVnaW5GYWN0b3J5KFxuICAndmFuaWxsYS5wdXNoU3RhdGVMb2NhdGlvbicsXG4gIHRydWUsXG4gIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSxcbiAgQnJvd3NlckxvY2F0aW9uQ29uZmlnXG4pO1xuXG4vKiogQSBgVUlSb3V0ZXJQbHVnaW5gIHRoYXQgZ2V0cy9zZXRzIHRoZSBjdXJyZW50IGxvY2F0aW9uIGZyb20gYW4gaW4tbWVtb3J5IG9iamVjdCAqL1xuZXhwb3J0IGNvbnN0IG1lbW9yeUxvY2F0aW9uUGx1Z2luOiAocm91dGVyOiBVSVJvdXRlcikgPT4gTG9jYXRpb25QbHVnaW4gPSBsb2NhdGlvblBsdWdpbkZhY3RvcnkoXG4gICd2YW5pbGxhLm1lbW9yeUxvY2F0aW9uJyxcbiAgZmFsc2UsXG4gIE1lbW9yeUxvY2F0aW9uU2VydmljZSxcbiAgTWVtb3J5TG9jYXRpb25Db25maWdcbik7XG4iLCIvKipcbiAqICMgQ29yZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzXG4gKlxuICogVGhlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMgdGhhdCBhcmUgY29yZSB0byB1aS1yb3V0ZXIgYW5kIGRvIG5vdCBiZWxvbmdcbiAqIHRvIGEgbW9yZSBzcGVjaWZpYyBzdWJzeXN0ZW0gKHN1Y2ggYXMgcmVzb2x2ZSkuXG4gKlxuICogQHByZWZlcnJlZCBAcHVibGljYXBpIEBtb2R1bGUgY29yZVxuICovIC8qKiAqL1xuXG4vLyBOZWVkIHRvIGltcG9ydCBvciBleHBvcnQgYXQgbGVhc3Qgb25lIGNvbmNyZXRlIHNvbWV0aGluZ1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBVSVJvdXRlciB9IGZyb20gJy4vcm91dGVyJztcblxuLyoqXG4gKiBBbiBpbnRlcmZhY2UgZm9yIGdldHRpbmcgdmFsdWVzIGZyb20gZGVwZW5kZW5jeSBpbmplY3Rpb24uXG4gKlxuICogVGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byBnZXQgcmVzb2x2ZSB2YWx1ZXMgZm9yIGEgZ2l2ZW4gdG9rZW4uXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgYFVJSW5qZWN0b3JgIGNhbiBiZSByZXRyaWV2ZWQgZnJvbSB0aGUgY3VycmVudCB0cmFuc2l0aW9uIHVzaW5nIFtbVHJhbnNpdGlvbi5pbmplY3Rvcl1dLlxuICpcbiAqIC0tLVxuICpcbiAqIElmIG5vIHJlc29sdmUgaXMgZm91bmQgZm9yIGEgdG9rZW4sIHRoZW4gaXQgd2lsbCBkZWxlZ2F0ZSB0byB0aGUgbmF0aXZlIGluamVjdG9yLlxuICogVGhlIG5hdGl2ZSBpbmplY3RvciBtYXkgYmUgQW5ndWxhciAxIGAkaW5qZWN0b3JgLCBBbmd1bGFyIDIgYEluamVjdG9yYCwgb3IgYSBzaW1wbGUgcG9seWZpbGwuXG4gKlxuICogSW4gQW5ndWxhciAyLCB0aGUgbmF0aXZlIGluamVjdG9yIG1pZ2h0IGJlIHRoZSByb290IEluamVjdG9yLFxuICogb3IgaXQgbWlnaHQgYmUgYSBsYXp5IGxvYWRlZCBgTmdNb2R1bGVgIGluamVjdG9yIHNjb3BlZCB0byBhIGxhenkgbG9hZCBzdGF0ZSB0cmVlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVJSW5qZWN0b3Ige1xuICAvKipcbiAgICogR2V0cyBhIHZhbHVlIGZyb20gdGhlIGluamVjdG9yLlxuICAgKlxuICAgKiBGb3IgYSBnaXZlbiB0b2tlbiwgcmV0dXJucyB0aGUgdmFsdWUgZnJvbSB0aGUgaW5qZWN0b3IgdGhhdCBtYXRjaGVzIHRoZSB0b2tlbi5cbiAgICogSWYgdGhlIHRva2VuIGlzIGZvciBhIHJlc29sdmUgdGhhdCBoYXMgbm90IHlldCBiZWVuIGZldGNoZWQsIHRoaXMgdGhyb3dzIGFuIGVycm9yLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIHZhciBteVJlc29sdmUgPSBpbmplY3Rvci5nZXQoJ215UmVzb2x2ZScpO1xuICAgKiBgYGBcbiAgICpcbiAgICogIyMjIyBuZzEgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogLy8gRmV0Y2ggU3RhdGVTZXJ2aWNlXG4gICAqIGluamVjdG9yLmdldCgnJHN0YXRlJykuZ28oJ2hvbWUnKTtcbiAgICogYGBgXG4gICAqXG4gICAqICMjIyMgbmcyIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIGltcG9ydCB7U3RhdGVTZXJ2aWNlfSBmcm9tIFwidWktcm91dGVyLW5nMlwiO1xuICAgKiAvLyBGZXRjaCBTdGF0ZVNlcnZpY2VcbiAgICogaW5qZWN0b3IuZ2V0KFN0YXRlU2VydmljZSkuZ28oJ2hvbWUnKTtcbiAgICogYGBgXG4gICAqXG4gICAqICMjIyMgVHlwZXNjcmlwdCBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiB2YXIgc3RyaW5nQXJyYXkgPSBpbmplY3Rvci5nZXQ8c3RyaW5nW10+KCdteVN0cmluZ0FycmF5Jyk7XG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyMgYE5PV0FJVGAgcG9saWN5XG4gICAqXG4gICAqIFdoZW4gdXNpbmcgW1tSZXNvbHZlUG9saWN5LmFzeW5jXV0gPT09IGBOT1dBSVRgLCB0aGUgdmFsdWUgcmV0dXJuZWQgZnJvbSBgZ2V0KClgIGlzIGEgcHJvbWlzZSBmb3IgdGhlIHJlc3VsdC5cbiAgICogVGhlIHByb21pc2UgaXMgbm90IGF1dG9tYXRpY2FsbHkgdW53cmFwcGVkLlxuICAgKlxuICAgKiBAcGFyYW0gdG9rZW4gdGhlIGtleSBmb3IgdGhlIHZhbHVlIHRvIGdldC4gIE1heSBiZSBhIHN0cmluZywgYSBjbGFzcywgb3IgYW55IGFyYml0cmFyeSBvYmplY3QuXG4gICAqIEByZXR1cm4gdGhlIERlcGVuZGVuY3kgSW5qZWN0aW9uIHZhbHVlIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW5cbiAgICovXG4gIGdldCh0b2tlbjogYW55KTogYW55O1xuICAvKiogR2V0cyBhIHZhbHVlIGFzIHR5cGUgYFRgIChnZW5lcmljcyBwYXJhbWV0ZXIpICovXG4gIGdldDxUPih0b2tlbjogYW55KTogVDtcblxuICAvKipcbiAgICogQXN5bmNocm9ub3VzbHkgZ2V0cyBhIHZhbHVlIGZyb20gdGhlIGluamVjdG9yXG4gICAqXG4gICAqIEZvciBhIGdpdmVuIHRva2VuLCByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHZhbHVlIGZyb20gdGhlIGluamVjdG9yIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW4uXG4gICAqIElmIHRoZSB0b2tlbiBpcyBmb3IgYSByZXNvbHZlIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBmZXRjaGVkLCB0aGlzIHRyaWdnZXJzIHRoZSByZXNvbHZlIHRvIGxvYWQuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogcmV0dXJuIGluamVjdG9yLmdldEFzeW5jKCdteVJlc29sdmUnKS50aGVuKHZhbHVlID0+IHtcbiAgICogICBpZiAodmFsdWUgPT09ICdkZWNsaW5lZCcpIHJldHVybiBmYWxzZTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gdG9rZW4gdGhlIGtleSBmb3IgdGhlIHZhbHVlIHRvIGdldC4gIE1heSBiZSBhIHN0cmluZyBvciBhcmJpdHJhcnkgb2JqZWN0LlxuICAgKiBAcmV0dXJuIGEgUHJvbWlzZSBmb3IgdGhlIERlcGVuZGVuY3kgSW5qZWN0aW9uIHZhbHVlIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW5cbiAgICovXG4gIGdldEFzeW5jKHRva2VuOiBhbnkpOiBQcm9taXNlPGFueT47XG4gIC8qKiBBc3luY2hyb25vdXNseSBnZXRzIGEgdmFsdWUgYXMgdHlwZSBgVGAgKGdlbmVyaWNzIHBhcmFtZXRlcikgKi9cbiAgZ2V0QXN5bmM8VD4odG9rZW46IGFueSk6IFByb21pc2U8VD47XG5cbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBmcm9tIHRoZSBuYXRpdmUgaW5qZWN0b3JcbiAgICpcbiAgICogUmV0dXJucyBhIHZhbHVlIGZyb20gdGhlIG5hdGl2ZSBpbmplY3RvciwgYnlwYXNzaW5nIGFueXRoaW5nIGluIHRoZSBbW1Jlc29sdmVDb250ZXh0XV0uXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIGxldCBzb21lVGhpbmcgPSBpbmplY3Rvci5nZXROYXRpdmUoU29tZVRva2VuKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB0b2tlbiB0aGUga2V5IGZvciB0aGUgdmFsdWUgdG8gZ2V0LiAgTWF5IGJlIGEgc3RyaW5nIG9yIGFyYml0cmFyeSBvYmplY3QuXG4gICAqIEByZXR1cm4gdGhlIERlcGVuZGVuY3kgSW5qZWN0aW9uIHZhbHVlIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW5cbiAgICovXG4gIGdldE5hdGl2ZSh0b2tlbjogYW55KTogYW55O1xuICBnZXROYXRpdmU8VD4odG9rZW46IGFueSk6IFQ7XG59XG5cbi8qKiBAaW50ZXJuYWxhcGkgKi9cbmV4cG9ydCBpbnRlcmZhY2UgVUlSb3V0ZXJQbHVnaW4gZXh0ZW5kcyBEaXNwb3NhYmxlIHtcbiAgbmFtZTogc3RyaW5nO1xufVxuXG4vKiogQGludGVybmFsYXBpICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVUlSb3V0ZXJQbHVnaW5CYXNlIGltcGxlbWVudHMgVUlSb3V0ZXJQbHVnaW4sIERpc3Bvc2FibGUge1xuICBhYnN0cmFjdCBuYW1lOiBzdHJpbmc7XG4gIGRpc3Bvc2Uocm91dGVyOiBVSVJvdXRlcikge31cbn1cblxuLyoqIEBpbnRlcm5hbGFwaSAqL1xuZXhwb3J0IGludGVyZmFjZSBEaXNwb3NhYmxlIHtcbiAgLyoqIEluc3RydWN0cyB0aGUgRGlzcG9zYWJsZSB0byBjbGVhbiB1cCBhbnkgcmVzb3VyY2VzICovXG4gIGRpc3Bvc2Uocm91dGVyPzogVUlSb3V0ZXIpO1xufVxuIiwiLyoqIEBwdWJsaWNhcGkgQG1vZHVsZSBjb21tb24gKi8gLyoqICovXG5cbmV4cG9ydCAqIGZyb20gJy4vY29tbW9uL2luZGV4JztcbmV4cG9ydCAqIGZyb20gJy4vcGFyYW1zL2luZGV4JztcbmV4cG9ydCAqIGZyb20gJy4vcGF0aC9pbmRleCc7XG5leHBvcnQgKiBmcm9tICcuL3Jlc29sdmUvaW5kZXgnO1xuZXhwb3J0ICogZnJvbSAnLi9zdGF0ZS9pbmRleCc7XG5leHBvcnQgKiBmcm9tICcuL3RyYW5zaXRpb24vaW5kZXgnO1xuZXhwb3J0ICogZnJvbSAnLi91cmwvaW5kZXgnO1xuZXhwb3J0ICogZnJvbSAnLi92aWV3L2luZGV4JztcbmV4cG9ydCAqIGZyb20gJy4vZ2xvYmFscyc7XG5cbmV4cG9ydCAqIGZyb20gJy4vcm91dGVyJztcbmV4cG9ydCAqIGZyb20gJy4vdmFuaWxsYSc7XG5leHBvcnQgKiBmcm9tICcuL2ludGVyZmFjZSc7XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIG5nMSAqLyAvKiogKi9cbmltcG9ydCB7IG5nIGFzIGFuZ3VsYXIgfSBmcm9tICcuLi9hbmd1bGFyJztcbmltcG9ydCB7XG4gIFN0YXRlT2JqZWN0LFxuICBwaWNrLFxuICBmb3JFYWNoLFxuICB0YWlsLFxuICBleHRlbmQsXG4gIGlzQXJyYXksXG4gIGlzSW5qZWN0YWJsZSxcbiAgaXNEZWZpbmVkLFxuICBpc1N0cmluZyxcbiAgc2VydmljZXMsXG4gIHRyYWNlLFxuICBWaWV3Q29uZmlnLFxuICBWaWV3U2VydmljZSxcbiAgVmlld0NvbmZpZ0ZhY3RvcnksXG4gIFBhdGhOb2RlLFxuICBSZXNvbHZlQ29udGV4dCxcbiAgUmVzb2x2YWJsZSxcbiAgSUluamVjdGFibGUsXG59IGZyb20gJ0B1aXJvdXRlci9jb3JlJztcbmltcG9ydCB7IE5nMVZpZXdEZWNsYXJhdGlvbiB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBUZW1wbGF0ZUZhY3RvcnkgfSBmcm9tICcuLi90ZW1wbGF0ZUZhY3RvcnknO1xuaW1wb3J0IElJbmplY3RvclNlcnZpY2UgPSBhbmd1bGFyLmF1dG8uSUluamVjdG9yU2VydmljZTtcblxuLyoqIEBpbnRlcm5hbGFwaSAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE5nMVZpZXdDb25maWdGYWN0b3J5KCk6IFZpZXdDb25maWdGYWN0b3J5IHtcbiAgbGV0IHRlbXBsYXRlRmFjdG9yeTogVGVtcGxhdGVGYWN0b3J5ID0gbnVsbDtcbiAgcmV0dXJuIChwYXRoLCB2aWV3KSA9PiB7XG4gICAgdGVtcGxhdGVGYWN0b3J5ID0gdGVtcGxhdGVGYWN0b3J5IHx8IHNlcnZpY2VzLiRpbmplY3Rvci5nZXQoJyR0ZW1wbGF0ZUZhY3RvcnknKTtcbiAgICByZXR1cm4gW25ldyBOZzFWaWV3Q29uZmlnKHBhdGgsIHZpZXcsIHRlbXBsYXRlRmFjdG9yeSldO1xuICB9O1xufVxuXG4vKiogQGludGVybmFsYXBpICovXG5jb25zdCBoYXNBbnlLZXkgPSAoa2V5cywgb2JqKSA9PiBrZXlzLnJlZHVjZSgoYWNjLCBrZXkpID0+IGFjYyB8fCBpc0RlZmluZWQob2JqW2tleV0pLCBmYWxzZSk7XG5cbi8qKlxuICogVGhpcyBpcyBhIFtbU3RhdGVCdWlsZGVyLmJ1aWxkZXJdXSBmdW5jdGlvbiBmb3IgYW5ndWxhcjEgYHZpZXdzYC5cbiAqXG4gKiBXaGVuIHRoZSBbW1N0YXRlQnVpbGRlcl1dIGJ1aWxkcyBhIFtbU3RhdGVPYmplY3RdXSBvYmplY3QgZnJvbSBhIHJhdyBbW1N0YXRlRGVjbGFyYXRpb25dXSwgdGhpcyBidWlsZGVyXG4gKiBoYW5kbGVzIHRoZSBgdmlld3NgIHByb3BlcnR5IHdpdGggbG9naWMgc3BlY2lmaWMgdG8gQHVpcm91dGVyL2FuZ3VsYXJqcyAobmcxKS5cbiAqXG4gKiBJZiBubyBgdmlld3M6IHt9YCBwcm9wZXJ0eSBleGlzdHMgb24gdGhlIFtbU3RhdGVEZWNsYXJhdGlvbl1dLCB0aGVuIGl0IGNyZWF0ZXMgdGhlIGB2aWV3c2Agb2JqZWN0XG4gKiBhbmQgYXBwbGllcyB0aGUgc3RhdGUtbGV2ZWwgY29uZmlndXJhdGlvbiB0byBhIHZpZXcgbmFtZWQgYCRkZWZhdWx0YC5cbiAqXG4gKiBAaW50ZXJuYWxhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5nMVZpZXdzQnVpbGRlcihzdGF0ZTogU3RhdGVPYmplY3QpIHtcbiAgLy8gRG8gbm90IHByb2Nlc3Mgcm9vdCBzdGF0ZVxuICBpZiAoIXN0YXRlLnBhcmVudCkgcmV0dXJuIHt9O1xuXG4gIGNvbnN0IHRwbEtleXMgPSBbJ3RlbXBsYXRlUHJvdmlkZXInLCAndGVtcGxhdGVVcmwnLCAndGVtcGxhdGUnLCAnbm90aWZ5JywgJ2FzeW5jJ10sXG4gICAgY3RybEtleXMgPSBbJ2NvbnRyb2xsZXInLCAnY29udHJvbGxlclByb3ZpZGVyJywgJ2NvbnRyb2xsZXJBcycsICdyZXNvbHZlQXMnXSxcbiAgICBjb21wS2V5cyA9IFsnY29tcG9uZW50JywgJ2JpbmRpbmdzJywgJ2NvbXBvbmVudFByb3ZpZGVyJ10sXG4gICAgbm9uQ29tcEtleXMgPSB0cGxLZXlzLmNvbmNhdChjdHJsS2V5cyksXG4gICAgYWxsVmlld0tleXMgPSBjb21wS2V5cy5jb25jYXQobm9uQ29tcEtleXMpO1xuXG4gIC8vIERvIG5vdCBhbGxvdyBhIHN0YXRlIHRvIGhhdmUgYm90aCBzdGF0ZS1sZXZlbCBwcm9wcyBhbmQgYWxzbyBhIGB2aWV3czoge31gIHByb3BlcnR5LlxuICAvLyBBIHN0YXRlIHdpdGhvdXQgYSBgdmlld3M6IHt9YCBwcm9wZXJ0eSBjYW4gZGVjbGFyZSBwcm9wZXJ0aWVzIGZvciB0aGUgYCRkZWZhdWx0YCB2aWV3IGFzIHByb3BlcnRpZXMgb2YgdGhlIHN0YXRlLlxuICAvLyBIb3dldmVyLCB0aGUgYCRkZWZhdWx0YCBhcHByb2FjaCBzaG91bGQgbm90IGJlIG1peGVkIHdpdGggYSBzZXBhcmF0ZSBgdmlld3M6IGAgYmxvY2suXG4gIGlmIChpc0RlZmluZWQoc3RhdGUudmlld3MpICYmIGhhc0FueUtleShhbGxWaWV3S2V5cywgc3RhdGUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFN0YXRlICcke3N0YXRlLm5hbWV9JyBoYXMgYSAndmlld3MnIG9iamVjdC4gYCArXG4gICAgICAgIGBJdCBjYW5ub3QgYWxzbyBoYXZlIFwidmlldyBwcm9wZXJ0aWVzXCIgYXQgdGhlIHN0YXRlIGxldmVsLiAgYCArXG4gICAgICAgIGBNb3ZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllcyBpbnRvIGEgdmlldyAoaW4gdGhlICd2aWV3cycgb2JqZWN0KTogYCArXG4gICAgICAgIGAgJHthbGxWaWV3S2V5cy5maWx0ZXIoa2V5ID0+IGlzRGVmaW5lZChzdGF0ZVtrZXldKSkuam9pbignLCAnKX1gXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IHZpZXdzOiB7IFtrZXk6IHN0cmluZ106IE5nMVZpZXdEZWNsYXJhdGlvbiB9ID0ge30sXG4gICAgdmlld3NPYmplY3QgPSBzdGF0ZS52aWV3cyB8fCB7ICRkZWZhdWx0OiBwaWNrKHN0YXRlLCBhbGxWaWV3S2V5cykgfTtcblxuICBmb3JFYWNoKHZpZXdzT2JqZWN0LCBmdW5jdGlvbihjb25maWc6IE5nMVZpZXdEZWNsYXJhdGlvbiwgbmFtZTogc3RyaW5nKSB7XG4gICAgLy8gQWNjb3VudCBmb3Igdmlld3M6IHsgXCJcIjogeyB0ZW1wbGF0ZS4uLiB9IH1cbiAgICBuYW1lID0gbmFtZSB8fCAnJGRlZmF1bHQnO1xuICAgIC8vIEFjY291bnQgZm9yIHZpZXdzOiB7IGhlYWRlcjogXCJoZWFkZXJDb21wb25lbnRcIiB9XG4gICAgaWYgKGlzU3RyaW5nKGNvbmZpZykpIGNvbmZpZyA9IHsgY29tcG9uZW50OiA8c3RyaW5nPmNvbmZpZyB9O1xuXG4gICAgLy8gTWFrZSBhIHNoYWxsb3cgY29weSBvZiB0aGUgY29uZmlnIG9iamVjdFxuICAgIGNvbmZpZyA9IGV4dGVuZCh7fSwgY29uZmlnKTtcblxuICAgIC8vIERvIG5vdCBhbGxvdyBhIHZpZXcgdG8gbWl4IHByb3BzIGZvciBjb21wb25lbnQtc3R5bGUgdmlldyB3aXRoIHByb3BzIGZvciB0ZW1wbGF0ZS9jb250cm9sbGVyLXN0eWxlIHZpZXdcbiAgICBpZiAoaGFzQW55S2V5KGNvbXBLZXlzLCBjb25maWcpICYmIGhhc0FueUtleShub25Db21wS2V5cywgY29uZmlnKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGNvbWJpbmU6ICR7Y29tcEtleXMuam9pbignfCcpfSB3aXRoOiAke25vbkNvbXBLZXlzLmpvaW4oJ3wnKX0gaW4gc3RhdGV2aWV3OiAnJHtuYW1lfUAke3N0YXRlLm5hbWV9J2BcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uZmlnLnJlc29sdmVBcyA9IGNvbmZpZy5yZXNvbHZlQXMgfHwgJyRyZXNvbHZlJztcbiAgICBjb25maWcuJHR5cGUgPSAnbmcxJztcbiAgICBjb25maWcuJGNvbnRleHQgPSBzdGF0ZTtcbiAgICBjb25maWcuJG5hbWUgPSBuYW1lO1xuXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IFZpZXdTZXJ2aWNlLm5vcm1hbGl6ZVVJVmlld1RhcmdldChjb25maWcuJGNvbnRleHQsIGNvbmZpZy4kbmFtZSk7XG4gICAgY29uZmlnLiR1aVZpZXdOYW1lID0gbm9ybWFsaXplZC51aVZpZXdOYW1lO1xuICAgIGNvbmZpZy4kdWlWaWV3Q29udGV4dEFuY2hvciA9IG5vcm1hbGl6ZWQudWlWaWV3Q29udGV4dEFuY2hvcjtcblxuICAgIHZpZXdzW25hbWVdID0gY29uZmlnO1xuICB9KTtcbiAgcmV0dXJuIHZpZXdzO1xufVxuXG4vKiogQGhpZGRlbiAqL1xubGV0IGlkID0gMDtcblxuLyoqIEBpbnRlcm5hbGFwaSAqL1xuZXhwb3J0IGNsYXNzIE5nMVZpZXdDb25maWcgaW1wbGVtZW50cyBWaWV3Q29uZmlnIHtcbiAgJGlkID0gaWQrKztcbiAgbG9hZGVkID0gZmFsc2U7XG4gIGNvbnRyb2xsZXI6IEZ1bmN0aW9uOyAvLyBhY3R1YWxseSBJSW5qZWN0YWJsZXxzdHJpbmdcbiAgdGVtcGxhdGU6IHN0cmluZztcbiAgY29tcG9uZW50OiBzdHJpbmc7XG4gIGxvY2FsczogYW55OyAvLyBUT0RPOiBkZWxldGUgbWVcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgcGF0aDogUGF0aE5vZGVbXSwgcHVibGljIHZpZXdEZWNsOiBOZzFWaWV3RGVjbGFyYXRpb24sIHB1YmxpYyBmYWN0b3J5OiBUZW1wbGF0ZUZhY3RvcnkpIHt9XG5cbiAgbG9hZCgpIHtcbiAgICBjb25zdCAkcSA9IHNlcnZpY2VzLiRxO1xuICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgUmVzb2x2ZUNvbnRleHQodGhpcy5wYXRoKTtcbiAgICBjb25zdCBwYXJhbXMgPSB0aGlzLnBhdGgucmVkdWNlKChhY2MsIG5vZGUpID0+IGV4dGVuZChhY2MsIG5vZGUucGFyYW1WYWx1ZXMpLCB7fSk7XG5cbiAgICBjb25zdCBwcm9taXNlczogYW55ID0ge1xuICAgICAgdGVtcGxhdGU6ICRxLndoZW4odGhpcy5mYWN0b3J5LmZyb21Db25maWcodGhpcy52aWV3RGVjbCwgcGFyYW1zLCBjb250ZXh0KSksXG4gICAgICBjb250cm9sbGVyOiAkcS53aGVuKHRoaXMuZ2V0Q29udHJvbGxlcihjb250ZXh0KSksXG4gICAgfTtcblxuICAgIHJldHVybiAkcS5hbGwocHJvbWlzZXMpLnRoZW4ocmVzdWx0cyA9PiB7XG4gICAgICB0cmFjZS50cmFjZVZpZXdTZXJ2aWNlRXZlbnQoJ0xvYWRlZCcsIHRoaXMpO1xuICAgICAgdGhpcy5jb250cm9sbGVyID0gcmVzdWx0cy5jb250cm9sbGVyO1xuICAgICAgZXh0ZW5kKHRoaXMsIHJlc3VsdHMudGVtcGxhdGUpOyAvLyBFaXRoZXIgeyB0ZW1wbGF0ZTogXCJ0cGxcIiB9IG9yIHsgY29tcG9uZW50OiBcImNtcE5hbWVcIiB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9KTtcbiAgfVxuXG4gIGdldFRlbXBsYXRlID0gKHVpVmlldywgY29udGV4dDogUmVzb2x2ZUNvbnRleHQpID0+XG4gICAgdGhpcy5jb21wb25lbnRcbiAgICAgID8gdGhpcy5mYWN0b3J5Lm1ha2VDb21wb25lbnRUZW1wbGF0ZSh1aVZpZXcsIGNvbnRleHQsIHRoaXMuY29tcG9uZW50LCB0aGlzLnZpZXdEZWNsLmJpbmRpbmdzKVxuICAgICAgOiB0aGlzLnRlbXBsYXRlO1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjb250cm9sbGVyIGZvciBhIHZpZXcgY29uZmlndXJhdGlvbi5cbiAgICpcbiAgICogQHJldHVybnMge0Z1bmN0aW9ufFByb21pc2UuPEZ1bmN0aW9uPn0gUmV0dXJucyBhIGNvbnRyb2xsZXIsIG9yIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgY29udHJvbGxlci5cbiAgICovXG4gIGdldENvbnRyb2xsZXIoY29udGV4dDogUmVzb2x2ZUNvbnRleHQpOiBJSW5qZWN0YWJsZSB8IHN0cmluZyB8IFByb21pc2U8SUluamVjdGFibGUgfCBzdHJpbmc+IHtcbiAgICBjb25zdCBwcm92aWRlciA9IHRoaXMudmlld0RlY2wuY29udHJvbGxlclByb3ZpZGVyO1xuICAgIGlmICghaXNJbmplY3RhYmxlKHByb3ZpZGVyKSkgcmV0dXJuIHRoaXMudmlld0RlY2wuY29udHJvbGxlcjtcbiAgICBjb25zdCBkZXBzID0gc2VydmljZXMuJGluamVjdG9yLmFubm90YXRlKHByb3ZpZGVyKTtcbiAgICBjb25zdCBwcm92aWRlckZuID0gaXNBcnJheShwcm92aWRlcikgPyB0YWlsKDxhbnk+cHJvdmlkZXIpIDogcHJvdmlkZXI7XG4gICAgY29uc3QgcmVzb2x2YWJsZSA9IG5ldyBSZXNvbHZhYmxlKCcnLCA8YW55PnByb3ZpZGVyRm4sIGRlcHMpO1xuICAgIHJldHVybiByZXNvbHZhYmxlLmdldChjb250ZXh0KTtcbiAgfVxufVxuIiwiLyoqIEBwdWJsaWNhcGkgQG1vZHVsZSB2aWV3ICovIC8qKiAqL1xuaW1wb3J0IHsgbmcgYXMgYW5ndWxhciB9IGZyb20gJy4vYW5ndWxhcic7XG5pbXBvcnQgeyBJQXVnbWVudGVkSlF1ZXJ5IH0gZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQge1xuICBpc0FycmF5LFxuICBpc0RlZmluZWQsXG4gIGlzRnVuY3Rpb24sXG4gIGlzT2JqZWN0LFxuICBzZXJ2aWNlcyxcbiAgT2JqLFxuICBJSW5qZWN0YWJsZSxcbiAgdGFpbCxcbiAga2Vib2JTdHJpbmcsXG4gIHVubmVzdFIsXG4gIFJlc29sdmVDb250ZXh0LFxuICBSZXNvbHZhYmxlLFxuICBSYXdQYXJhbXMsXG59IGZyb20gJ0B1aXJvdXRlci9jb3JlJztcbmltcG9ydCB7IE5nMVZpZXdEZWNsYXJhdGlvbiwgVGVtcGxhdGVGYWN0b3J5UHJvdmlkZXIgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5cbi8qKlxuICogU2VydmljZSB3aGljaCBtYW5hZ2VzIGxvYWRpbmcgb2YgdGVtcGxhdGVzIGZyb20gYSBWaWV3Q29uZmlnLlxuICovXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVGYWN0b3J5IGltcGxlbWVudHMgVGVtcGxhdGVGYWN0b3J5UHJvdmlkZXIge1xuICAvKiogQGhpZGRlbiAqLyBwcml2YXRlIF91c2VIdHRwID0gYW5ndWxhci52ZXJzaW9uLm1pbm9yIDwgMztcbiAgLyoqIEBoaWRkZW4gKi8gcHJpdmF0ZSAkdGVtcGxhdGVSZXF1ZXN0O1xuICAvKiogQGhpZGRlbiAqLyBwcml2YXRlICR0ZW1wbGF0ZUNhY2hlO1xuICAvKiogQGhpZGRlbiAqLyBwcml2YXRlICRodHRwO1xuXG4gIC8qKiBAaGlkZGVuICovICRnZXQgPSBbXG4gICAgJyRodHRwJyxcbiAgICAnJHRlbXBsYXRlQ2FjaGUnLFxuICAgICckaW5qZWN0b3InLFxuICAgICgkaHR0cCwgJHRlbXBsYXRlQ2FjaGUsICRpbmplY3RvcikgPT4ge1xuICAgICAgdGhpcy4kdGVtcGxhdGVSZXF1ZXN0ID0gJGluamVjdG9yLmhhcyAmJiAkaW5qZWN0b3IuaGFzKCckdGVtcGxhdGVSZXF1ZXN0JykgJiYgJGluamVjdG9yLmdldCgnJHRlbXBsYXRlUmVxdWVzdCcpO1xuICAgICAgdGhpcy4kaHR0cCA9ICRodHRwO1xuICAgICAgdGhpcy4kdGVtcGxhdGVDYWNoZSA9ICR0ZW1wbGF0ZUNhY2hlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgXTtcblxuICAvKiogQGhpZGRlbiAqL1xuICB1c2VIdHRwU2VydmljZSh2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMuX3VzZUh0dHAgPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgdGVtcGxhdGUgZnJvbSBhIGNvbmZpZ3VyYXRpb24gb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0gY29uZmlnIENvbmZpZ3VyYXRpb24gb2JqZWN0IGZvciB3aGljaCB0byBsb2FkIGEgdGVtcGxhdGUuXG4gICAqIFRoZSBmb2xsb3dpbmcgcHJvcGVydGllcyBhcmUgc2VhcmNoIGluIHRoZSBzcGVjaWZpZWQgb3JkZXIsIGFuZCB0aGUgZmlyc3Qgb25lXG4gICAqIHRoYXQgaXMgZGVmaW5lZCBpcyB1c2VkIHRvIGNyZWF0ZSB0aGUgdGVtcGxhdGU6XG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMgIFBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgdGVtcGxhdGUgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSBjb250ZXh0IFRoZSByZXNvbHZlIGNvbnRleHQgYXNzb2NpYXRlZCB3aXRoIHRoZSB0ZW1wbGF0ZSdzIHZpZXdcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfG9iamVjdH0gIFRoZSB0ZW1wbGF0ZSBodG1sIGFzIGEgc3RyaW5nLCBvciBhIHByb21pc2UgZm9yXG4gICAqIHRoYXQgc3RyaW5nLG9yIGBudWxsYCBpZiBubyB0ZW1wbGF0ZSBpcyBjb25maWd1cmVkLlxuICAgKi9cbiAgZnJvbUNvbmZpZyhcbiAgICBjb25maWc6IE5nMVZpZXdEZWNsYXJhdGlvbixcbiAgICBwYXJhbXM6IGFueSxcbiAgICBjb250ZXh0OiBSZXNvbHZlQ29udGV4dFxuICApOiBQcm9taXNlPHsgdGVtcGxhdGU/OiBzdHJpbmc7IGNvbXBvbmVudD86IHN0cmluZyB9PiB7XG4gICAgY29uc3QgZGVmYXVsdFRlbXBsYXRlID0gJzx1aS12aWV3PjwvdWktdmlldz4nO1xuXG4gICAgY29uc3QgYXNUZW1wbGF0ZSA9IHJlc3VsdCA9PiBzZXJ2aWNlcy4kcS53aGVuKHJlc3VsdCkudGhlbihzdHIgPT4gKHsgdGVtcGxhdGU6IHN0ciB9KSk7XG4gICAgY29uc3QgYXNDb21wb25lbnQgPSByZXN1bHQgPT4gc2VydmljZXMuJHEud2hlbihyZXN1bHQpLnRoZW4oc3RyID0+ICh7IGNvbXBvbmVudDogc3RyIH0pKTtcblxuICAgIHJldHVybiBpc0RlZmluZWQoY29uZmlnLnRlbXBsYXRlKVxuICAgICAgPyBhc1RlbXBsYXRlKHRoaXMuZnJvbVN0cmluZyhjb25maWcudGVtcGxhdGUsIHBhcmFtcykpXG4gICAgICA6IGlzRGVmaW5lZChjb25maWcudGVtcGxhdGVVcmwpXG4gICAgICA/IGFzVGVtcGxhdGUodGhpcy5mcm9tVXJsKGNvbmZpZy50ZW1wbGF0ZVVybCwgcGFyYW1zKSlcbiAgICAgIDogaXNEZWZpbmVkKGNvbmZpZy50ZW1wbGF0ZVByb3ZpZGVyKVxuICAgICAgPyBhc1RlbXBsYXRlKHRoaXMuZnJvbVByb3ZpZGVyKGNvbmZpZy50ZW1wbGF0ZVByb3ZpZGVyLCBwYXJhbXMsIGNvbnRleHQpKVxuICAgICAgOiBpc0RlZmluZWQoY29uZmlnLmNvbXBvbmVudClcbiAgICAgID8gYXNDb21wb25lbnQoY29uZmlnLmNvbXBvbmVudClcbiAgICAgIDogaXNEZWZpbmVkKGNvbmZpZy5jb21wb25lbnRQcm92aWRlcilcbiAgICAgID8gYXNDb21wb25lbnQodGhpcy5mcm9tQ29tcG9uZW50UHJvdmlkZXIoY29uZmlnLmNvbXBvbmVudFByb3ZpZGVyLCBwYXJhbXMsIGNvbnRleHQpKVxuICAgICAgOiBhc1RlbXBsYXRlKGRlZmF1bHRUZW1wbGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHRlbXBsYXRlIGZyb20gYSBzdHJpbmcgb3IgYSBmdW5jdGlvbiByZXR1cm5pbmcgYSBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB0ZW1wbGF0ZSBodG1sIHRlbXBsYXRlIGFzIGEgc3RyaW5nIG9yIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBodG1sIHRlbXBsYXRlIGFzIGEgc3RyaW5nLlxuICAgKiBAcGFyYW0gcGFyYW1zIFBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgdGVtcGxhdGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ3xvYmplY3R9IFRoZSB0ZW1wbGF0ZSBodG1sIGFzIGEgc3RyaW5nLCBvciBhIHByb21pc2UgZm9yIHRoYXRcbiAgICogc3RyaW5nLlxuICAgKi9cbiAgZnJvbVN0cmluZyh0ZW1wbGF0ZTogc3RyaW5nIHwgRnVuY3Rpb24sIHBhcmFtcz86IFJhd1BhcmFtcykge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKHRlbXBsYXRlKSA/ICg8YW55PnRlbXBsYXRlKShwYXJhbXMpIDogdGVtcGxhdGU7XG4gIH1cblxuICAvKipcbiAgICogTG9hZHMgYSB0ZW1wbGF0ZSBmcm9tIHRoZSBhIFVSTCB2aWEgYCRodHRwYCBhbmQgYCR0ZW1wbGF0ZUNhY2hlYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8RnVuY3Rpb259IHVybCB1cmwgb2YgdGhlIHRlbXBsYXRlIHRvIGxvYWQsIG9yIGEgZnVuY3Rpb25cbiAgICogdGhhdCByZXR1cm5zIGEgdXJsLlxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIFBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgdXJsIGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd8UHJvbWlzZS48c3RyaW5nPn0gVGhlIHRlbXBsYXRlIGh0bWwgYXMgYSBzdHJpbmcsIG9yIGEgcHJvbWlzZVxuICAgKiBmb3IgdGhhdCBzdHJpbmcuXG4gICAqL1xuICBmcm9tVXJsKHVybDogc3RyaW5nIHwgRnVuY3Rpb24sIHBhcmFtczogYW55KSB7XG4gICAgaWYgKGlzRnVuY3Rpb24odXJsKSkgdXJsID0gKDxhbnk+dXJsKShwYXJhbXMpO1xuICAgIGlmICh1cmwgPT0gbnVsbCkgcmV0dXJuIG51bGw7XG5cbiAgICBpZiAodGhpcy5fdXNlSHR0cCkge1xuICAgICAgcmV0dXJuIHRoaXMuJGh0dHBcbiAgICAgICAgLmdldCh1cmwsIHsgY2FjaGU6IHRoaXMuJHRlbXBsYXRlQ2FjaGUsIGhlYWRlcnM6IHsgQWNjZXB0OiAndGV4dC9odG1sJyB9IH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLiR0ZW1wbGF0ZVJlcXVlc3QodXJsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgdGVtcGxhdGUgYnkgaW52b2tpbmcgYW4gaW5qZWN0YWJsZSBwcm92aWRlciBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHByb3ZpZGVyIEZ1bmN0aW9uIHRvIGludm9rZSB2aWEgYGxvY2Fsc2BcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaW5qZWN0Rm4gYSBmdW5jdGlvbiB1c2VkIHRvIGludm9rZSB0aGUgdGVtcGxhdGUgcHJvdmlkZXJcbiAgICogQHJldHVybiB7c3RyaW5nfFByb21pc2UuPHN0cmluZz59IFRoZSB0ZW1wbGF0ZSBodG1sIGFzIGEgc3RyaW5nLCBvciBhIHByb21pc2VcbiAgICogZm9yIHRoYXQgc3RyaW5nLlxuICAgKi9cbiAgZnJvbVByb3ZpZGVyKHByb3ZpZGVyOiBJSW5qZWN0YWJsZSwgcGFyYW1zOiBhbnksIGNvbnRleHQ6IFJlc29sdmVDb250ZXh0KSB7XG4gICAgY29uc3QgZGVwcyA9IHNlcnZpY2VzLiRpbmplY3Rvci5hbm5vdGF0ZShwcm92aWRlcik7XG4gICAgY29uc3QgcHJvdmlkZXJGbiA9IGlzQXJyYXkocHJvdmlkZXIpID8gdGFpbCg8YW55W10+cHJvdmlkZXIpIDogcHJvdmlkZXI7XG4gICAgY29uc3QgcmVzb2x2YWJsZSA9IG5ldyBSZXNvbHZhYmxlKCcnLCA8RnVuY3Rpb24+cHJvdmlkZXJGbiwgZGVwcyk7XG4gICAgcmV0dXJuIHJlc29sdmFibGUuZ2V0KGNvbnRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBjb21wb25lbnQncyB0ZW1wbGF0ZSBieSBpbnZva2luZyBhbiBpbmplY3RhYmxlIHByb3ZpZGVyIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gcHJvdmlkZXIgRnVuY3Rpb24gdG8gaW52b2tlIHZpYSBgbG9jYWxzYFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpbmplY3RGbiBhIGZ1bmN0aW9uIHVzZWQgdG8gaW52b2tlIHRoZSB0ZW1wbGF0ZSBwcm92aWRlclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0ZW1wbGF0ZSBodG1sIGFzIGEgc3RyaW5nOiBcIjxjb21wb25lbnQtbmFtZSBpbnB1dDE9Jzo6JHJlc29sdmUuZm9vJz48L2NvbXBvbmVudC1uYW1lPlwiLlxuICAgKi9cbiAgZnJvbUNvbXBvbmVudFByb3ZpZGVyKHByb3ZpZGVyOiBJSW5qZWN0YWJsZSwgcGFyYW1zOiBhbnksIGNvbnRleHQ6IFJlc29sdmVDb250ZXh0KSB7XG4gICAgY29uc3QgZGVwcyA9IHNlcnZpY2VzLiRpbmplY3Rvci5hbm5vdGF0ZShwcm92aWRlcik7XG4gICAgY29uc3QgcHJvdmlkZXJGbiA9IGlzQXJyYXkocHJvdmlkZXIpID8gdGFpbCg8YW55W10+cHJvdmlkZXIpIDogcHJvdmlkZXI7XG4gICAgY29uc3QgcmVzb2x2YWJsZSA9IG5ldyBSZXNvbHZhYmxlKCcnLCA8RnVuY3Rpb24+cHJvdmlkZXJGbiwgZGVwcyk7XG4gICAgcmV0dXJuIHJlc29sdmFibGUuZ2V0KGNvbnRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB0ZW1wbGF0ZSBmcm9tIGEgY29tcG9uZW50J3MgbmFtZVxuICAgKlxuICAgKiBUaGlzIGltcGxlbWVudHMgcm91dGUtdG8tY29tcG9uZW50LlxuICAgKiBJdCB3b3JrcyBieSByZXRyaWV2aW5nIHRoZSBjb21wb25lbnQgKGRpcmVjdGl2ZSkgbWV0YWRhdGEgZnJvbSB0aGUgaW5qZWN0b3IuXG4gICAqIEl0IGFuYWx5c2VzIHRoZSBjb21wb25lbnQncyBiaW5kaW5ncywgdGhlbiBjb25zdHJ1Y3RzIGEgdGVtcGxhdGUgdGhhdCBpbnN0YW50aWF0ZXMgdGhlIGNvbXBvbmVudC5cbiAgICogVGhlIHRlbXBsYXRlIHdpcmVzIGlucHV0IGFuZCBvdXRwdXQgYmluZGluZ3MgdG8gcmVzb2x2ZXMgb3IgZnJvbSB0aGUgcGFyZW50IGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHVpVmlldyB7b2JqZWN0fSBUaGUgcGFyZW50IHVpLXZpZXcgKGZvciBiaW5kaW5nIG91dHB1dHMgdG8gY2FsbGJhY2tzKVxuICAgKiBAcGFyYW0gY29udGV4dCBUaGUgUmVzb2x2ZUNvbnRleHQgKGZvciBiaW5kaW5nIG91dHB1dHMgdG8gY2FsbGJhY2tzIHJldHVybmVkIGZyb20gcmVzb2x2ZXMpXG4gICAqIEBwYXJhbSBjb21wb25lbnQge3N0cmluZ30gQ29tcG9uZW50J3MgbmFtZSBpbiBjYW1lbCBjYXNlLlxuICAgKiBAcGFyYW0gYmluZGluZ3MgQW4gb2JqZWN0IGRlZmluaW5nIHRoZSBjb21wb25lbnQncyBiaW5kaW5nczoge2ZvbzogJzwnfVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0ZW1wbGF0ZSBhcyBhIHN0cmluZzogXCI8Y29tcG9uZW50LW5hbWUgaW5wdXQxPSc6OiRyZXNvbHZlLmZvbyc+PC9jb21wb25lbnQtbmFtZT5cIi5cbiAgICovXG4gIG1ha2VDb21wb25lbnRUZW1wbGF0ZSh1aVZpZXc6IElBdWdtZW50ZWRKUXVlcnksIGNvbnRleHQ6IFJlc29sdmVDb250ZXh0LCBjb21wb25lbnQ6IHN0cmluZywgYmluZGluZ3M/OiBhbnkpIHtcbiAgICBiaW5kaW5ncyA9IGJpbmRpbmdzIHx8IHt9O1xuXG4gICAgLy8gQmluZCBvbmNlIHByZWZpeFxuICAgIGNvbnN0IHByZWZpeCA9IGFuZ3VsYXIudmVyc2lvbi5taW5vciA+PSAzID8gJzo6JyA6ICcnO1xuICAgIC8vIENvbnZlcnQgdG8ga2Vib2IgbmFtZS4gQWRkIHgtIHByZWZpeCBpZiB0aGUgc3RyaW5nIHN0YXJ0cyB3aXRoIGB4LWAgb3IgYGRhdGEtYFxuICAgIGNvbnN0IGtlYm9iID0gKGNhbWVsQ2FzZTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBrZWJvYmVkID0ga2Vib2JTdHJpbmcoY2FtZWxDYXNlKTtcbiAgICAgIHJldHVybiAvXih4fGRhdGEpLS8uZXhlYyhrZWJvYmVkKSA/IGB4LSR7a2Vib2JlZH1gIDoga2Vib2JlZDtcbiAgICB9O1xuXG4gICAgY29uc3QgYXR0cmlidXRlVHBsID0gKGlucHV0OiBCaW5kaW5nVHVwbGUpID0+IHtcbiAgICAgIGNvbnN0IHsgbmFtZSwgdHlwZSB9ID0gaW5wdXQ7XG4gICAgICBjb25zdCBhdHRyTmFtZSA9IGtlYm9iKG5hbWUpO1xuICAgICAgLy8gSWYgdGhlIHVpLXZpZXcgaGFzIGFuIGF0dHJpYnV0ZSB3aGljaCBtYXRjaGVzIGEgYmluZGluZyBvbiB0aGUgcm91dGVkIGNvbXBvbmVudFxuICAgICAgLy8gdGhlbiBwYXNzIHRoYXQgYXR0cmlidXRlIHRocm91Z2ggdG8gdGhlIHJvdXRlZCBjb21wb25lbnQgdGVtcGxhdGUuXG4gICAgICAvLyBQcmVmZXIgdWktdmlldyB3aXJlZCBtYXBwaW5ncyB0byByZXNvbHZlIGRhdGEsIHVubGVzcyB0aGUgcmVzb2x2ZSB3YXMgZXhwbGljaXRseSBib3VuZCB1c2luZyBgYmluZGluZ3M6YFxuICAgICAgaWYgKHVpVmlldy5hdHRyKGF0dHJOYW1lKSAmJiAhYmluZGluZ3NbbmFtZV0pIHJldHVybiBgJHthdHRyTmFtZX09JyR7dWlWaWV3LmF0dHIoYXR0ck5hbWUpfSdgO1xuXG4gICAgICBjb25zdCByZXNvbHZlTmFtZSA9IGJpbmRpbmdzW25hbWVdIHx8IG5hbWU7XG4gICAgICAvLyBQcmUtZXZhbHVhdGUgdGhlIGV4cHJlc3Npb24gZm9yIFwiQFwiIGJpbmRpbmdzIGJ5IGVuY2xvc2luZyBpbiB7eyB9fVxuICAgICAgLy8gc29tZS1hdHRyPVwie3sgOjokcmVzb2x2ZS5zb21lUmVzb2x2ZU5hbWUgfX1cIlxuICAgICAgaWYgKHR5cGUgPT09ICdAJykgcmV0dXJuIGAke2F0dHJOYW1lfT0ne3ske3ByZWZpeH0kcmVzb2x2ZS4ke3Jlc29sdmVOYW1lfX19J2A7XG5cbiAgICAgIC8vIFdpcmUgXCImXCIgY2FsbGJhY2tzIHRvIHJlc29sdmVzIHRoYXQgcmV0dXJuIGEgY2FsbGJhY2sgZnVuY3Rpb25cbiAgICAgIC8vIEdldCB0aGUgcmVzdWx0IG9mIHRoZSByZXNvbHZlIChzaG91bGQgYmUgYSBmdW5jdGlvbikgYW5kIGFubm90YXRlIGl0IHRvIGdldCBpdHMgYXJndW1lbnRzLlxuICAgICAgLy8gc29tZS1hdHRyPVwiJHJlc29sdmUuc29tZVJlc29sdmVSZXN1bHROYW1lKGZvbywgYmFyKVwiXG4gICAgICBpZiAodHlwZSA9PT0gJyYnKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGNvbnRleHQuZ2V0UmVzb2x2YWJsZShyZXNvbHZlTmFtZSk7XG4gICAgICAgIGNvbnN0IGZuID0gcmVzICYmIHJlcy5kYXRhO1xuICAgICAgICBjb25zdCBhcmdzID0gKGZuICYmIHNlcnZpY2VzLiRpbmplY3Rvci5hbm5vdGF0ZShmbikpIHx8IFtdO1xuICAgICAgICAvLyBhY2NvdW50IGZvciBhcnJheSBzdHlsZSBpbmplY3Rpb24sIGkuZS4sIFsnZm9vJywgZnVuY3Rpb24oZm9vKSB7fV1cbiAgICAgICAgY29uc3QgYXJyYXlJZHhTdHIgPSBpc0FycmF5KGZuKSA/IGBbJHtmbi5sZW5ndGggLSAxfV1gIDogJyc7XG4gICAgICAgIHJldHVybiBgJHthdHRyTmFtZX09JyRyZXNvbHZlLiR7cmVzb2x2ZU5hbWV9JHthcnJheUlkeFN0cn0oJHthcmdzLmpvaW4oJywnKX0pJ2A7XG4gICAgICB9XG5cbiAgICAgIC8vIHNvbWUtYXR0cj1cIjo6JHJlc29sdmUuc29tZVJlc29sdmVOYW1lXCJcbiAgICAgIHJldHVybiBgJHthdHRyTmFtZX09JyR7cHJlZml4fSRyZXNvbHZlLiR7cmVzb2x2ZU5hbWV9J2A7XG4gICAgfTtcblxuICAgIGNvbnN0IGF0dHJzID0gZ2V0Q29tcG9uZW50QmluZGluZ3MoY29tcG9uZW50KVxuICAgICAgLm1hcChhdHRyaWJ1dGVUcGwpXG4gICAgICAuam9pbignICcpO1xuICAgIGNvbnN0IGtlYm9iTmFtZSA9IGtlYm9iKGNvbXBvbmVudCk7XG4gICAgcmV0dXJuIGA8JHtrZWJvYk5hbWV9ICR7YXR0cnN9PjwvJHtrZWJvYk5hbWV9PmA7XG4gIH1cbn1cblxuLy8gR2V0cyBhbGwgdGhlIGRpcmVjdGl2ZShzKScgaW5wdXRzICgnQCcsICc9JywgYW5kICc8JykgYW5kIG91dHB1dHMgKCcmJylcbmZ1bmN0aW9uIGdldENvbXBvbmVudEJpbmRpbmdzKG5hbWU6IHN0cmluZykge1xuICBjb25zdCBjbXBEZWZzID0gPGFueVtdPnNlcnZpY2VzLiRpbmplY3Rvci5nZXQobmFtZSArICdEaXJlY3RpdmUnKTsgLy8gY291bGQgYmUgbXVsdGlwbGVcbiAgaWYgKCFjbXBEZWZzIHx8ICFjbXBEZWZzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gZmluZCBjb21wb25lbnQgbmFtZWQgJyR7bmFtZX0nYCk7XG4gIHJldHVybiBjbXBEZWZzLm1hcChnZXRCaW5kaW5ncykucmVkdWNlKHVubmVzdFIsIFtdKTtcbn1cblxuLy8gR2l2ZW4gYSBkaXJlY3RpdmUgZGVmaW5pdGlvbiwgZmluZCBpdHMgb2JqZWN0IGlucHV0IGF0dHJpYnV0ZXNcbi8vIFVzZSBkaWZmZXJlbnQgcHJvcGVydGllcywgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mIGRpcmVjdGl2ZSAoY29tcG9uZW50LCBiaW5kVG9Db250cm9sbGVyLCBub3JtYWwpXG5jb25zdCBnZXRCaW5kaW5ncyA9IChkZWY6IGFueSkgPT4ge1xuICBpZiAoaXNPYmplY3QoZGVmLmJpbmRUb0NvbnRyb2xsZXIpKSByZXR1cm4gc2NvcGVCaW5kaW5ncyhkZWYuYmluZFRvQ29udHJvbGxlcik7XG4gIHJldHVybiBzY29wZUJpbmRpbmdzKGRlZi5zY29wZSk7XG59O1xuXG5pbnRlcmZhY2UgQmluZGluZ1R1cGxlIHtcbiAgbmFtZTogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG59XG5cbi8vIGZvciBuZyAxLjIgc3R5bGUsIHByb2Nlc3MgdGhlIHNjb3BlOiB7IGlucHV0OiBcIj1mb29cIiB9XG4vLyBmb3IgbmcgMS4zIHRocm91Z2ggbmcgMS41LCBwcm9jZXNzIHRoZSBjb21wb25lbnQncyBiaW5kVG9Db250cm9sbGVyOiB7IGlucHV0OiBcIj1mb29cIiB9IG9iamVjdFxuY29uc3Qgc2NvcGVCaW5kaW5ncyA9IChiaW5kaW5nc09iajogT2JqKSA9PlxuICBPYmplY3Qua2V5cyhiaW5kaW5nc09iaiB8fCB7fSlcbiAgICAvLyBbICdpbnB1dCcsIFsgJz1mb28nLCAnPScsICdmb28nIF0gXVxuICAgIC5tYXAoa2V5ID0+IFtrZXksIC9eKFs9PEAmXSlbP10/KC4qKS8uZXhlYyhiaW5kaW5nc09ialtrZXldKV0pXG4gICAgLy8gc2tpcCBtYWxmb3JtZWQgdmFsdWVzXG4gICAgLmZpbHRlcih0dXBsZSA9PiBpc0RlZmluZWQodHVwbGUpICYmIGlzQXJyYXkodHVwbGVbMV0pKVxuICAgIC8vIHsgbmFtZTogKCdmb28nIHx8ICdpbnB1dCcpLCB0eXBlOiAnPScgfVxuICAgIC5tYXAodHVwbGUgPT4gKHsgbmFtZTogdHVwbGVbMV1bMl0gfHwgdHVwbGVbMF0sIHR5cGU6IHR1cGxlWzFdWzFdIH0gYXMgQmluZGluZ1R1cGxlKSk7XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIG5nMSAqLyAvKiogKi9cbmltcG9ydCB7XG4gIHZhbCxcbiAgaXNPYmplY3QsXG4gIGNyZWF0ZVByb3h5RnVuY3Rpb25zLFxuICBCdWlsZGVyRnVuY3Rpb24sXG4gIFN0YXRlUmVnaXN0cnksXG4gIFN0YXRlU2VydmljZSxcbiAgT25JbnZhbGlkQ2FsbGJhY2ssXG59IGZyb20gJ0B1aXJvdXRlci9jb3JlJztcbmltcG9ydCB7IE5nMVN0YXRlRGVjbGFyYXRpb24gfSBmcm9tICcuL2ludGVyZmFjZSc7XG5cbi8qKlxuICogVGhlIEFuZ3VsYXIgMSBgU3RhdGVQcm92aWRlcmBcbiAqXG4gKiBUaGUgYCRzdGF0ZVByb3ZpZGVyYCB3b3JrcyBzaW1pbGFyIHRvIEFuZ3VsYXIncyB2MSByb3V0ZXIsIGJ1dCBpdCBmb2N1c2VzIHB1cmVseVxuICogb24gc3RhdGUuXG4gKlxuICogQSBzdGF0ZSBjb3JyZXNwb25kcyB0byBhIFwicGxhY2VcIiBpbiB0aGUgYXBwbGljYXRpb24gaW4gdGVybXMgb2YgdGhlIG92ZXJhbGwgVUkgYW5kXG4gKiBuYXZpZ2F0aW9uLiBBIHN0YXRlIGRlc2NyaWJlcyAodmlhIHRoZSBjb250cm9sbGVyIC8gdGVtcGxhdGUgLyB2aWV3IHByb3BlcnRpZXMpIHdoYXRcbiAqIHRoZSBVSSBsb29rcyBsaWtlIGFuZCBkb2VzIGF0IHRoYXQgcGxhY2UuXG4gKlxuICogU3RhdGVzIG9mdGVuIGhhdmUgdGhpbmdzIGluIGNvbW1vbiwgYW5kIHRoZSBwcmltYXJ5IHdheSBvZiBmYWN0b3Jpbmcgb3V0IHRoZXNlXG4gKiBjb21tb25hbGl0aWVzIGluIHRoaXMgbW9kZWwgaXMgdmlhIHRoZSBzdGF0ZSBoaWVyYXJjaHksIGkuZS4gcGFyZW50L2NoaWxkIHN0YXRlcyBha2FcbiAqIG5lc3RlZCBzdGF0ZXMuXG4gKlxuICogVGhlIGAkc3RhdGVQcm92aWRlcmAgcHJvdmlkZXMgaW50ZXJmYWNlcyB0byBkZWNsYXJlIHRoZXNlIHN0YXRlcyBmb3IgeW91ciBhcHAuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdGF0ZVByb3ZpZGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBzdGF0ZVJlZ2lzdHJ5OiBTdGF0ZVJlZ2lzdHJ5LCBwcml2YXRlIHN0YXRlU2VydmljZTogU3RhdGVTZXJ2aWNlKSB7XG4gICAgY3JlYXRlUHJveHlGdW5jdGlvbnModmFsKFN0YXRlUHJvdmlkZXIucHJvdG90eXBlKSwgdGhpcywgdmFsKHRoaXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWNvcmF0ZXMgc3RhdGVzIHdoZW4gdGhleSBhcmUgcmVnaXN0ZXJlZFxuICAgKlxuICAgKiBBbGxvd3MgeW91IHRvIGV4dGVuZCAoY2FyZWZ1bGx5KSBvciBvdmVycmlkZSAoYXQgeW91ciBvd24gcGVyaWwpIHRoZVxuICAgKiBgc3RhdGVCdWlsZGVyYCBvYmplY3QgdXNlZCBpbnRlcm5hbGx5IGJ5IFtbU3RhdGVSZWdpc3RyeV1dLlxuICAgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIGFkZCBjdXN0b20gZnVuY3Rpb25hbGl0eSB0byB1aS1yb3V0ZXIsXG4gICAqIGZvciBleGFtcGxlIGluZmVycmluZyB0ZW1wbGF0ZVVybCBiYXNlZCBvbiB0aGUgc3RhdGUgbmFtZS5cbiAgICpcbiAgICogV2hlbiBwYXNzaW5nIG9ubHkgYSBuYW1lLCBpdCByZXR1cm5zIHRoZSBjdXJyZW50IChvcmlnaW5hbCBvciBkZWNvcmF0ZWQpIGJ1aWxkZXJcbiAgICogZnVuY3Rpb24gdGhhdCBtYXRjaGVzIGBuYW1lYC5cbiAgICpcbiAgICogVGhlIGJ1aWxkZXIgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIGRlY29yYXRlZCBhcmUgbGlzdGVkIGJlbG93LiBUaG91Z2ggbm90IGFsbFxuICAgKiBuZWNlc3NhcmlseSBoYXZlIGEgZ29vZCB1c2UgY2FzZSBmb3IgZGVjb3JhdGlvbiwgdGhhdCBpcyB1cCB0byB5b3UgdG8gZGVjaWRlLlxuICAgKlxuICAgKiBJbiBhZGRpdGlvbiwgdXNlcnMgY2FuIGF0dGFjaCBjdXN0b20gZGVjb3JhdG9ycywgd2hpY2ggd2lsbCBnZW5lcmF0ZSBuZXdcbiAgICogcHJvcGVydGllcyB3aXRoaW4gdGhlIHN0YXRlJ3MgaW50ZXJuYWwgZGVmaW5pdGlvbi4gVGhlcmUgaXMgY3VycmVudGx5IG5vIGNsZWFyXG4gICAqIHVzZS1jYXNlIGZvciB0aGlzIGJleW9uZCBhY2Nlc3NpbmcgaW50ZXJuYWwgc3RhdGVzIChpLmUuICRzdGF0ZS4kY3VycmVudCksXG4gICAqIGhvd2V2ZXIsIGV4cGVjdCB0aGlzIHRvIGJlY29tZSBpbmNyZWFzaW5nbHkgcmVsZXZhbnQgYXMgd2UgaW50cm9kdWNlIGFkZGl0aW9uYWxcbiAgICogbWV0YS1wcm9ncmFtbWluZyBmZWF0dXJlcy5cbiAgICpcbiAgICogKipXYXJuaW5nKio6IERlY29yYXRvcnMgc2hvdWxkIG5vdCBiZSBpbnRlcmRlcGVuZGVudCBiZWNhdXNlIHRoZSBvcmRlciBvZlxuICAgKiBleGVjdXRpb24gb2YgdGhlIGJ1aWxkZXIgZnVuY3Rpb25zIGluIG5vbi1kZXRlcm1pbmlzdGljLiBCdWlsZGVyIGZ1bmN0aW9uc1xuICAgKiBzaG91bGQgb25seSBiZSBkZXBlbmRlbnQgb24gdGhlIHN0YXRlIGRlZmluaXRpb24gb2JqZWN0IGFuZCBzdXBlciBmdW5jdGlvbi5cbiAgICpcbiAgICpcbiAgICogRXhpc3RpbmcgYnVpbGRlciBmdW5jdGlvbnMgYW5kIGN1cnJlbnQgcmV0dXJuIHZhbHVlczpcbiAgICpcbiAgICogLSAqKnBhcmVudCoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIHRoZSBwYXJlbnQgc3RhdGUgb2JqZWN0LlxuICAgKiAtICoqZGF0YSoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIHN0YXRlIGRhdGEsIGluY2x1ZGluZyBhbnkgaW5oZXJpdGVkIGRhdGEgdGhhdCBpcyBub3RcbiAgICogICBvdmVycmlkZGVuIGJ5IG93biB2YWx1ZXMgKGlmIGFueSkuXG4gICAqIC0gKip1cmwqKiBge29iamVjdH1gIC0gcmV0dXJucyBhIHtAbGluayB1aS5yb3V0ZXIudXRpbC50eXBlOlVybE1hdGNoZXIgVXJsTWF0Y2hlcn1cbiAgICogICBvciBgbnVsbGAuXG4gICAqIC0gKipuYXZpZ2FibGUqKiBge29iamVjdH1gIC0gcmV0dXJucyBjbG9zZXN0IGFuY2VzdG9yIHN0YXRlIHRoYXQgaGFzIGEgVVJMIChha2EgaXNcbiAgICogICBuYXZpZ2FibGUpLlxuICAgKiAtICoqcGFyYW1zKiogYHtvYmplY3R9YCAtIHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGUgcGFyYW1zIHRoYXQgYXJlIGVuc3VyZWQgdG9cbiAgICogICBiZSBhIHN1cGVyLXNldCBvZiBwYXJlbnQncyBwYXJhbXMuXG4gICAqIC0gKip2aWV3cyoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIGEgdmlld3Mgb2JqZWN0IHdoZXJlIGVhY2gga2V5IGlzIGFuIGFic29sdXRlIHZpZXdcbiAgICogICBuYW1lIChpLmUuIFwidmlld05hbWVAc3RhdGVOYW1lXCIpIGFuZCBlYWNoIHZhbHVlIGlzIHRoZSBjb25maWcgb2JqZWN0XG4gICAqICAgKHRlbXBsYXRlLCBjb250cm9sbGVyKSBmb3IgdGhlIHZpZXcuIEV2ZW4gd2hlbiB5b3UgZG9uJ3QgdXNlIHRoZSB2aWV3cyBvYmplY3RcbiAgICogICBleHBsaWNpdGx5IG9uIGEgc3RhdGUgY29uZmlnLCBvbmUgaXMgc3RpbGwgY3JlYXRlZCBmb3IgeW91IGludGVybmFsbHkuXG4gICAqICAgU28gYnkgZGVjb3JhdGluZyB0aGlzIGJ1aWxkZXIgZnVuY3Rpb24geW91IGhhdmUgYWNjZXNzIHRvIGRlY29yYXRpbmcgdGVtcGxhdGVcbiAgICogICBhbmQgY29udHJvbGxlciBwcm9wZXJ0aWVzLlxuICAgKiAtICoqb3duUGFyYW1zKiogYHtvYmplY3R9YCAtIHJldHVybnMgYW4gYXJyYXkgb2YgcGFyYW1zIHRoYXQgYmVsb25nIHRvIHRoZSBzdGF0ZSxcbiAgICogICBub3QgaW5jbHVkaW5nIGFueSBwYXJhbXMgZGVmaW5lZCBieSBhbmNlc3RvciBzdGF0ZXMuXG4gICAqIC0gKipwYXRoKiogYHtzdHJpbmd9YCAtIHJldHVybnMgdGhlIGZ1bGwgcGF0aCBmcm9tIHRoZSByb290IGRvd24gdG8gdGhpcyBzdGF0ZS5cbiAgICogICBOZWVkZWQgZm9yIHN0YXRlIGFjdGl2YXRpb24uXG4gICAqIC0gKippbmNsdWRlcyoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIGFuIG9iamVjdCB0aGF0IGluY2x1ZGVzIGV2ZXJ5IHN0YXRlIHRoYXRcbiAgICogICB3b3VsZCBwYXNzIGEgYCRzdGF0ZS5pbmNsdWRlcygpYCB0ZXN0LlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIE92ZXJyaWRlIHRoZSBpbnRlcm5hbCAndmlld3MnIGJ1aWxkZXIgd2l0aCBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIHN0YXRlXG4gICAqIGRlZmluaXRpb24sIGFuZCBhIHJlZmVyZW5jZSB0byB0aGUgaW50ZXJuYWwgZnVuY3Rpb24gYmVpbmcgb3ZlcnJpZGRlbjpcbiAgICogYGBganNcbiAgICogJHN0YXRlUHJvdmlkZXIuZGVjb3JhdG9yKCd2aWV3cycsIGZ1bmN0aW9uIChzdGF0ZSwgcGFyZW50KSB7XG4gICAqICAgbGV0IHJlc3VsdCA9IHt9LFxuICAgKiAgICAgICB2aWV3cyA9IHBhcmVudChzdGF0ZSk7XG4gICAqXG4gICAqICAgYW5ndWxhci5mb3JFYWNoKHZpZXdzLCBmdW5jdGlvbiAoY29uZmlnLCBuYW1lKSB7XG4gICAqICAgICBsZXQgYXV0b05hbWUgPSAoc3RhdGUubmFtZSArICcuJyArIG5hbWUpLnJlcGxhY2UoJy4nLCAnLycpO1xuICAgKiAgICAgY29uZmlnLnRlbXBsYXRlVXJsID0gY29uZmlnLnRlbXBsYXRlVXJsIHx8ICcvcGFydGlhbHMvJyArIGF1dG9OYW1lICsgJy5odG1sJztcbiAgICogICAgIHJlc3VsdFtuYW1lXSA9IGNvbmZpZztcbiAgICogICB9KTtcbiAgICogICByZXR1cm4gcmVzdWx0O1xuICAgKiB9KTtcbiAgICpcbiAgICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2hvbWUnLCB7XG4gICAqICAgdmlld3M6IHtcbiAgICogICAgICdjb250YWN0Lmxpc3QnOiB7IGNvbnRyb2xsZXI6ICdMaXN0Q29udHJvbGxlcicgfSxcbiAgICogICAgICdjb250YWN0Lml0ZW0nOiB7IGNvbnRyb2xsZXI6ICdJdGVtQ29udHJvbGxlcicgfVxuICAgKiAgIH1cbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAvLyBBdXRvLXBvcHVsYXRlcyBsaXN0IGFuZCBpdGVtIHZpZXdzIHdpdGggL3BhcnRpYWxzL2hvbWUvY29udGFjdC9saXN0Lmh0bWwsXG4gICAqIC8vIGFuZCAvcGFydGlhbHMvaG9tZS9jb250YWN0L2l0ZW0uaHRtbCwgcmVzcGVjdGl2ZWx5LlxuICAgKiAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBidWlsZGVyIGZ1bmN0aW9uIHRvIGRlY29yYXRlLlxuICAgKiBAcGFyYW0ge29iamVjdH0gZnVuYyBBIGZ1bmN0aW9uIHRoYXQgaXMgcmVzcG9uc2libGUgZm9yIGRlY29yYXRpbmcgdGhlIG9yaWdpbmFsXG4gICAqIGJ1aWxkZXIgZnVuY3Rpb24uIFRoZSBmdW5jdGlvbiByZWNlaXZlcyB0d28gcGFyYW1ldGVyczpcbiAgICpcbiAgICogICAtIGB7b2JqZWN0fWAgLSBzdGF0ZSAtIFRoZSBzdGF0ZSBjb25maWcgb2JqZWN0LlxuICAgKiAgIC0gYHtvYmplY3R9YCAtIHN1cGVyIC0gVGhlIG9yaWdpbmFsIGJ1aWxkZXIgZnVuY3Rpb24uXG4gICAqXG4gICAqIEByZXR1cm4ge29iamVjdH0gJHN0YXRlUHJvdmlkZXIgLSAkc3RhdGVQcm92aWRlciBpbnN0YW5jZVxuICAgKi9cbiAgZGVjb3JhdG9yKG5hbWU6IHN0cmluZywgZnVuYzogQnVpbGRlckZ1bmN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGVSZWdpc3RyeS5kZWNvcmF0b3IobmFtZSwgZnVuYykgfHwgdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBzdGF0ZVxuICAgKlxuICAgKiAjIyMgVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRvIFtbU3RhdGVSZWdpc3RyeS5yZWdpc3Rlcl1dLlxuICAgKlxuICAgKiBSZWdpc3RlcnMgYSBzdGF0ZSBjb25maWd1cmF0aW9uIHVuZGVyIGEgZ2l2ZW4gc3RhdGUgbmFtZS5cbiAgICogVGhlIHN0YXRlQ29uZmlnIG9iamVjdCBoYXMgdGhlIGZvbGxvd2luZyBhY2NlcHRhYmxlIHByb3BlcnRpZXMuXG4gICAqXG4gICAqIDxhIGlkPSd0ZW1wbGF0ZSc+PC9hPlxuICAgKlxuICAgKiAtICoqYHRlbXBsYXRlYCoqIC0ge3N0cmluZ3xmdW5jdGlvbj19IC0gaHRtbCB0ZW1wbGF0ZSBhcyBhIHN0cmluZyBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJuc1xuICAgKiAgIGFuIGh0bWwgdGVtcGxhdGUgYXMgYSBzdHJpbmcgd2hpY2ggc2hvdWxkIGJlIHVzZWQgYnkgdGhlIHVpVmlldyBkaXJlY3RpdmVzLiBUaGlzIHByb3BlcnR5XG4gICAqICAgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIHRlbXBsYXRlVXJsLlxuICAgKlxuICAgKiAgIElmIGB0ZW1wbGF0ZWAgaXMgYSBmdW5jdGlvbiwgaXQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gICAqXG4gICAqICAgLSB7YXJyYXkuJmx0O29iamVjdCZndDt9IC0gc3RhdGUgcGFyYW1ldGVycyBleHRyYWN0ZWQgZnJvbSB0aGUgY3VycmVudCAkbG9jYXRpb24ucGF0aCgpIGJ5XG4gICAqICAgICBhcHBseWluZyB0aGUgY3VycmVudCBzdGF0ZVxuICAgKlxuICAgKiA8YSBpZD0ndGVtcGxhdGVVcmwnPjwvYT5cbiAgICpcbiAgICogLSAqKmB0ZW1wbGF0ZVVybGAqKiAtIHtzdHJpbmd8ZnVuY3Rpb249fSAtIHBhdGggb3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcGF0aCB0byBhbiBodG1sXG4gICAqICAgdGVtcGxhdGUgdGhhdCBzaG91bGQgYmUgdXNlZCBieSB1aVZpZXcuXG4gICAqXG4gICAqICAgSWYgYHRlbXBsYXRlVXJsYCBpcyBhIGZ1bmN0aW9uLCBpdCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAgICpcbiAgICogICAtIHthcnJheS4mbHQ7b2JqZWN0Jmd0O30gLSBzdGF0ZSBwYXJhbWV0ZXJzIGV4dHJhY3RlZCBmcm9tIHRoZSBjdXJyZW50ICRsb2NhdGlvbi5wYXRoKCkgYnlcbiAgICogICAgIGFwcGx5aW5nIHRoZSBjdXJyZW50IHN0YXRlXG4gICAqXG4gICAqIDxhIGlkPSd0ZW1wbGF0ZVByb3ZpZGVyJz48L2E+XG4gICAqXG4gICAqIC0gKipgdGVtcGxhdGVQcm92aWRlcmAqKiAtIHtmdW5jdGlvbj19IC0gUHJvdmlkZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIEhUTUwgY29udGVudFxuICAgKiAgIHN0cmluZy5cbiAgICpcbiAgICogPGEgaWQ9J2NvbnRyb2xsZXInPjwvYT5cbiAgICpcbiAgICogLSAqKmBjb250cm9sbGVyYCoqIC0ge3N0cmluZ3xmdW5jdGlvbj19IC0gIENvbnRyb2xsZXIgZm4gdGhhdCBzaG91bGQgYmUgYXNzb2NpYXRlZCB3aXRoIG5ld2x5XG4gICAqICAgcmVsYXRlZCBzY29wZSBvciB0aGUgbmFtZSBvZiBhIHJlZ2lzdGVyZWQgY29udHJvbGxlciBpZiBwYXNzZWQgYXMgYSBzdHJpbmcuXG4gICAqXG4gICAqIDxhIGlkPSdjb250cm9sbGVyUHJvdmlkZXInPjwvYT5cbiAgICpcbiAgICogLSAqKmBjb250cm9sbGVyUHJvdmlkZXJgKiogLSB7ZnVuY3Rpb249fSAtIEluamVjdGFibGUgcHJvdmlkZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zXG4gICAqICAgdGhlIGFjdHVhbCBjb250cm9sbGVyIG9yIHN0cmluZy5cbiAgICpcbiAgICogPGEgaWQ9J2NvbnRyb2xsZXJBcyc+PC9hPlxuICAgKlxuICAgKiAtICoqYGNvbnRyb2xsZXJBc2AqKiDigJMge3N0cmluZz19IOKAkyBBIGNvbnRyb2xsZXIgYWxpYXMgbmFtZS4gSWYgcHJlc2VudCB0aGUgY29udHJvbGxlciB3aWxsIGJlXG4gICAqICAgcHVibGlzaGVkIHRvIHNjb3BlIHVuZGVyIHRoZSBjb250cm9sbGVyQXMgbmFtZS5cbiAgICpcbiAgICogPGEgaWQ9J3Jlc29sdmUnPjwvYT5cbiAgICpcbiAgICogLSAqKmByZXNvbHZlYCoqIC0ge29iamVjdC4mbHQ7c3RyaW5nLCBmdW5jdGlvbiZndDs9fSAtIEFuIG9wdGlvbmFsIG1hcCBvZiBkZXBlbmRlbmNpZXMgd2hpY2hcbiAgICogICBzaG91bGQgYmUgaW5qZWN0ZWQgaW50byB0aGUgY29udHJvbGxlci4gSWYgYW55IG9mIHRoZXNlIGRlcGVuZGVuY2llcyBhcmUgcHJvbWlzZXMsXG4gICAqICAgdGhlIHJvdXRlciB3aWxsIHdhaXQgZm9yIHRoZW0gYWxsIHRvIGJlIHJlc29sdmVkIG9yIG9uZSB0byBiZSByZWplY3RlZCBiZWZvcmUgdGhlXG4gICAqICAgY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQuIElmIGFsbCB0aGUgcHJvbWlzZXMgYXJlIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSwgdGhlIHZhbHVlc1xuICAgKiAgIG9mIHRoZSByZXNvbHZlZCBwcm9taXNlcyBhcmUgaW5qZWN0ZWQgYW5kICRzdGF0ZUNoYW5nZVN1Y2Nlc3MgZXZlbnQgaXMgZmlyZWQuIElmIGFueVxuICAgKiAgIG9mIHRoZSBwcm9taXNlcyBhcmUgcmVqZWN0ZWQgdGhlICRzdGF0ZUNoYW5nZUVycm9yIGV2ZW50IGlzIGZpcmVkLiBUaGUgbWFwIG9iamVjdCBpczpcbiAgICpcbiAgICogICAtIGtleSAtIHtzdHJpbmd9OiBuYW1lIG9mIGRlcGVuZGVuY3kgdG8gYmUgaW5qZWN0ZWQgaW50byBjb250cm9sbGVyXG4gICAqICAgLSBmYWN0b3J5IC0ge3N0cmluZ3xmdW5jdGlvbn06IElmIHN0cmluZyB0aGVuIGl0IGlzIGFsaWFzIGZvciBzZXJ2aWNlLiBPdGhlcndpc2UgaWYgZnVuY3Rpb24sXG4gICAqICAgICBpdCBpcyBpbmplY3RlZCBhbmQgcmV0dXJuIHZhbHVlIGl0IHRyZWF0ZWQgYXMgZGVwZW5kZW5jeS4gSWYgcmVzdWx0IGlzIGEgcHJvbWlzZSwgaXQgaXNcbiAgICogICAgIHJlc29sdmVkIGJlZm9yZSBpdHMgdmFsdWUgaXMgaW5qZWN0ZWQgaW50byBjb250cm9sbGVyLlxuICAgKlxuICAgKiA8YSBpZD0ndXJsJz48L2E+XG4gICAqXG4gICAqIC0gKipgdXJsYCoqIC0ge3N0cmluZz19IC0gQSB1cmwgd2l0aCBvcHRpb25hbCBwYXJhbWV0ZXJzLiBXaGVuIGEgc3RhdGUgaXMgbmF2aWdhdGVkIG9yXG4gICAqICAgdHJhbnNpdGlvbmVkIHRvLCB0aGUgYCRzdGF0ZVBhcmFtc2Agc2VydmljZSB3aWxsIGJlIHBvcHVsYXRlZCB3aXRoIGFueVxuICAgKiAgIHBhcmFtZXRlcnMgdGhhdCB3ZXJlIHBhc3NlZC5cbiAgICpcbiAgICogPGEgaWQ9J3BhcmFtcyc+PC9hPlxuICAgKlxuICAgKiAtICoqYHBhcmFtc2AqKiAtIHtvYmplY3Q9fSAtIEFuIGFycmF5IG9mIHBhcmFtZXRlciBuYW1lcyBvciByZWd1bGFyIGV4cHJlc3Npb25zLiBPbmx5XG4gICAqICAgdXNlIHRoaXMgd2l0aGluIGEgc3RhdGUgaWYgeW91IGFyZSBub3QgdXNpbmcgdXJsLiBPdGhlcndpc2UgeW91IGNhbiBzcGVjaWZ5IHlvdXJcbiAgICogICBwYXJhbWV0ZXJzIHdpdGhpbiB0aGUgdXJsLiBXaGVuIGEgc3RhdGUgaXMgbmF2aWdhdGVkIG9yIHRyYW5zaXRpb25lZCB0bywgdGhlXG4gICAqICAgJHN0YXRlUGFyYW1zIHNlcnZpY2Ugd2lsbCBiZSBwb3B1bGF0ZWQgd2l0aCBhbnkgcGFyYW1ldGVycyB0aGF0IHdlcmUgcGFzc2VkLlxuICAgKlxuICAgKiA8YSBpZD0ndmlld3MnPjwvYT5cbiAgICpcbiAgICogLSAqKmB2aWV3c2AqKiAtIHtvYmplY3Q9fSAtIFVzZSB0aGUgdmlld3MgcHJvcGVydHkgdG8gc2V0IHVwIG11bHRpcGxlIHZpZXdzIG9yIHRvIHRhcmdldCB2aWV3c1xuICAgKiAgIG1hbnVhbGx5L2V4cGxpY2l0bHkuXG4gICAqXG4gICAqIDxhIGlkPSdhYnN0cmFjdCc+PC9hPlxuICAgKlxuICAgKiAtICoqYGFic3RyYWN0YCoqIC0ge2Jvb2xlYW49fSAtIEFuIGFic3RyYWN0IHN0YXRlIHdpbGwgbmV2ZXIgYmUgZGlyZWN0bHkgYWN0aXZhdGVkLFxuICAgKiAgIGJ1dCBjYW4gcHJvdmlkZSBpbmhlcml0ZWQgcHJvcGVydGllcyB0byBpdHMgY29tbW9uIGNoaWxkcmVuIHN0YXRlcy5cbiAgICpcbiAgICogPGEgaWQ9J29uRW50ZXInPjwvYT5cbiAgICpcbiAgICogLSAqKmBvbkVudGVyYCoqIC0ge29iamVjdD19IC0gQ2FsbGJhY2sgZnVuY3Rpb24gZm9yIHdoZW4gYSBzdGF0ZSBpcyBlbnRlcmVkLiBHb29kIHdheVxuICAgKiAgIHRvIHRyaWdnZXIgYW4gYWN0aW9uIG9yIGRpc3BhdGNoIGFuIGV2ZW50LCBzdWNoIGFzIG9wZW5pbmcgYSBkaWFsb2cuXG4gICAqIElmIG1pbmlmeWluZyB5b3VyIHNjcmlwdHMsIG1ha2Ugc3VyZSB0byB1c2UgdGhlIGBbJ2luamVjdGlvbjEnLCAnaW5qZWN0aW9uMicsIGZ1bmN0aW9uKGluamVjdGlvbjEsIGluamVjdGlvbjIpe31dYCBzeW50YXguXG4gICAqXG4gICAqIDxhIGlkPSdvbkV4aXQnPjwvYT5cbiAgICpcbiAgICogLSAqKmBvbkV4aXRgKiogLSB7b2JqZWN0PX0gLSBDYWxsYmFjayBmdW5jdGlvbiBmb3Igd2hlbiBhIHN0YXRlIGlzIGV4aXRlZC4gR29vZCB3YXkgdG9cbiAgICogICB0cmlnZ2VyIGFuIGFjdGlvbiBvciBkaXNwYXRjaCBhbiBldmVudCwgc3VjaCBhcyBvcGVuaW5nIGEgZGlhbG9nLlxuICAgKiBJZiBtaW5pZnlpbmcgeW91ciBzY3JpcHRzLCBtYWtlIHN1cmUgdG8gdXNlIHRoZSBgWydpbmplY3Rpb24xJywgJ2luamVjdGlvbjInLCBmdW5jdGlvbihpbmplY3Rpb24xLCBpbmplY3Rpb24yKXt9XWAgc3ludGF4LlxuICAgKlxuICAgKiA8YSBpZD0ncmVsb2FkT25TZWFyY2gnPjwvYT5cbiAgICpcbiAgICogLSAqKmByZWxvYWRPblNlYXJjaCA9IHRydWVgKiogLSB7Ym9vbGVhbj19IC0gSWYgYGZhbHNlYCwgd2lsbCBub3QgcmV0cmlnZ2VyIHRoZSBzYW1lIHN0YXRlXG4gICAqICAganVzdCBiZWNhdXNlIGEgc2VhcmNoL3F1ZXJ5IHBhcmFtZXRlciBoYXMgY2hhbmdlZCAodmlhICRsb2NhdGlvbi5zZWFyY2goKSBvciAkbG9jYXRpb24uaGFzaCgpKS5cbiAgICogICBVc2VmdWwgZm9yIHdoZW4geW91J2QgbGlrZSB0byBtb2RpZnkgJGxvY2F0aW9uLnNlYXJjaCgpIHdpdGhvdXQgdHJpZ2dlcmluZyBhIHJlbG9hZC5cbiAgICpcbiAgICogPGEgaWQ9J2RhdGEnPjwvYT5cbiAgICpcbiAgICogLSAqKmBkYXRhYCoqIC0ge29iamVjdD19IC0gQXJiaXRyYXJ5IGRhdGEgb2JqZWN0LCB1c2VmdWwgZm9yIGN1c3RvbSBjb25maWd1cmF0aW9uLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIFNvbWUgc3RhdGUgbmFtZSBleGFtcGxlc1xuICAgKiBgYGBqc1xuICAgKiAvLyBzdGF0ZU5hbWUgY2FuIGJlIGEgc2luZ2xlIHRvcC1sZXZlbCBuYW1lIChtdXN0IGJlIHVuaXF1ZSkuXG4gICAqICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwiaG9tZVwiLCB7fSk7XG4gICAqXG4gICAqIC8vIE9yIGl0IGNhbiBiZSBhIG5lc3RlZCBzdGF0ZSBuYW1lLiBUaGlzIHN0YXRlIGlzIGEgY2hpbGQgb2YgdGhlXG4gICAqIC8vIGFib3ZlIFwiaG9tZVwiIHN0YXRlLlxuICAgKiAkc3RhdGVQcm92aWRlci5zdGF0ZShcImhvbWUubmV3ZXN0XCIsIHt9KTtcbiAgICpcbiAgICogLy8gTmVzdCBzdGF0ZXMgYXMgZGVlcGx5IGFzIG5lZWRlZC5cbiAgICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lLm5ld2VzdC5hYmMueHl6LmluY2VwdGlvblwiLCB7fSk7XG4gICAqXG4gICAqIC8vIHN0YXRlKCkgcmV0dXJucyAkc3RhdGVQcm92aWRlciwgc28geW91IGNhbiBjaGFpbiBzdGF0ZSBkZWNsYXJhdGlvbnMuXG4gICAqICRzdGF0ZVByb3ZpZGVyXG4gICAqICAgLnN0YXRlKFwiaG9tZVwiLCB7fSlcbiAgICogICAuc3RhdGUoXCJhYm91dFwiLCB7fSlcbiAgICogICAuc3RhdGUoXCJjb250YWN0c1wiLCB7fSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBBIHVuaXF1ZSBzdGF0ZSBuYW1lLCBlLmcuIFwiaG9tZVwiLCBcImFib3V0XCIsIFwiY29udGFjdHNcIi5cbiAgICogVG8gY3JlYXRlIGEgcGFyZW50L2NoaWxkIHN0YXRlIHVzZSBhIGRvdCwgZS5nLiBcImFib3V0LnNhbGVzXCIsIFwiaG9tZS5uZXdlc3RcIi5cbiAgICogQHBhcmFtIHtvYmplY3R9IGRlZmluaXRpb24gU3RhdGUgY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAqL1xuICBzdGF0ZShuYW1lOiBzdHJpbmcsIGRlZmluaXRpb246IE5nMVN0YXRlRGVjbGFyYXRpb24pOiBTdGF0ZVByb3ZpZGVyO1xuICBzdGF0ZShkZWZpbml0aW9uOiBOZzFTdGF0ZURlY2xhcmF0aW9uKTogU3RhdGVQcm92aWRlcjtcbiAgc3RhdGUobmFtZTogYW55LCBkZWZpbml0aW9uPzogYW55KSB7XG4gICAgaWYgKGlzT2JqZWN0KG5hbWUpKSB7XG4gICAgICBkZWZpbml0aW9uID0gbmFtZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVmaW5pdGlvbi5uYW1lID0gbmFtZTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZVJlZ2lzdHJ5LnJlZ2lzdGVyKGRlZmluaXRpb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhbiBpbnZhbGlkIHN0YXRlIGhhbmRsZXJcbiAgICpcbiAgICogVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRvIFtbU3RhdGVTZXJ2aWNlLm9uSW52YWxpZF1dIGZvciBuZzEuXG4gICAqL1xuXG4gIG9uSW52YWxpZChjYWxsYmFjazogT25JbnZhbGlkQ2FsbGJhY2spOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGVTZXJ2aWNlLm9uSW52YWxpZChjYWxsYmFjayk7XG4gIH1cbn1cbiIsIi8qKiBAcHVibGljYXBpIEBtb2R1bGUgbmcxICovIC8qKiAqL1xuaW1wb3J0IHtcbiAgU3RhdGVPYmplY3QsXG4gIFRyYW5zaXRpb25TdGF0ZUhvb2tGbixcbiAgSG9va1Jlc3VsdCxcbiAgVHJhbnNpdGlvbixcbiAgc2VydmljZXMsXG4gIFJlc29sdmVDb250ZXh0LFxuICBleHRlbmQsXG4gIEJ1aWxkZXJGdW5jdGlvbixcbn0gZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuaW1wb3J0IHsgZ2V0TG9jYWxzIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuaW1wb3J0IHsgTmcxU3RhdGVEZWNsYXJhdGlvbiB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5cbi8qKlxuICogVGhpcyBpcyBhIFtbU3RhdGVCdWlsZGVyLmJ1aWxkZXJdXSBmdW5jdGlvbiBmb3IgYW5ndWxhcjEgYG9uRW50ZXJgLCBgb25FeGl0YCxcbiAqIGBvblJldGFpbmAgY2FsbGJhY2sgaG9va3Mgb24gYSBbW05nMVN0YXRlRGVjbGFyYXRpb25dXS5cbiAqXG4gKiBXaGVuIHRoZSBbW1N0YXRlQnVpbGRlcl1dIGJ1aWxkcyBhIFtbU3RhdGVPYmplY3RdXSBvYmplY3QgZnJvbSBhIHJhdyBbW1N0YXRlRGVjbGFyYXRpb25dXSwgdGhpcyBidWlsZGVyXG4gKiBlbnN1cmVzIHRoYXQgdGhvc2UgaG9va3MgYXJlIGluamVjdGFibGUgZm9yIEB1aXJvdXRlci9hbmd1bGFyanMgKG5nMSkuXG4gKlxuICogQGludGVybmFsYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRTdGF0ZUhvb2tCdWlsZGVyID0gKGhvb2tOYW1lOiAnb25FbnRlcicgfCAnb25FeGl0JyB8ICdvblJldGFpbicpID0+XG4gIGZ1bmN0aW9uIHN0YXRlSG9va0J1aWxkZXIoc3RhdGVPYmplY3Q6IFN0YXRlT2JqZWN0LCBwYXJlbnRGbjogQnVpbGRlckZ1bmN0aW9uKTogVHJhbnNpdGlvblN0YXRlSG9va0ZuIHtcbiAgICBjb25zdCBob29rID0gc3RhdGVPYmplY3RbaG9va05hbWVdO1xuICAgIGNvbnN0IHBhdGhuYW1lID0gaG9va05hbWUgPT09ICdvbkV4aXQnID8gJ2Zyb20nIDogJ3RvJztcblxuICAgIGZ1bmN0aW9uIGRlY29yYXRlZE5nMUhvb2sodHJhbnM6IFRyYW5zaXRpb24sIHN0YXRlOiBOZzFTdGF0ZURlY2xhcmF0aW9uKTogSG9va1Jlc3VsdCB7XG4gICAgICBjb25zdCByZXNvbHZlQ29udGV4dCA9IG5ldyBSZXNvbHZlQ29udGV4dCh0cmFucy50cmVlQ2hhbmdlcyhwYXRobmFtZSkpO1xuICAgICAgY29uc3Qgc3ViQ29udGV4dCA9IHJlc29sdmVDb250ZXh0LnN1YkNvbnRleHQoc3RhdGUuJCRzdGF0ZSgpKTtcbiAgICAgIGNvbnN0IGxvY2FscyA9IGV4dGVuZChnZXRMb2NhbHMoc3ViQ29udGV4dCksIHsgJHN0YXRlJDogc3RhdGUsICR0cmFuc2l0aW9uJDogdHJhbnMgfSk7XG4gICAgICByZXR1cm4gc2VydmljZXMuJGluamVjdG9yLmludm9rZShob29rLCB0aGlzLCBsb2NhbHMpO1xuICAgIH1cblxuICAgIHJldHVybiBob29rID8gZGVjb3JhdGVkTmcxSG9vayA6IHVuZGVmaW5lZDtcbiAgfTtcbiIsIi8qKiBAcHVibGljYXBpIEBtb2R1bGUgbmcxICovIC8qKiAqL1xuaW1wb3J0IHsgTG9jYXRpb25Db25maWcsIExvY2F0aW9uU2VydmljZXMsIFVJUm91dGVyLCBQYXJhbVR5cGUsIGlzRGVmaW5lZCB9IGZyb20gJ0B1aXJvdXRlci9jb3JlJztcbmltcG9ydCB7IHZhbCwgY3JlYXRlUHJveHlGdW5jdGlvbnMsIHJlbW92ZUZyb20sIGlzT2JqZWN0IH0gZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuaW1wb3J0IHsgSUxvY2F0aW9uU2VydmljZSwgSUxvY2F0aW9uUHJvdmlkZXIsIElXaW5kb3dTZXJ2aWNlIH0gZnJvbSAnYW5ndWxhcic7XG5cbi8qKlxuICogSW1wbGVtZW50cyBVSS1Sb3V0ZXIgTG9jYXRpb25TZXJ2aWNlcyBhbmQgTG9jYXRpb25Db25maWcgdXNpbmcgQW5ndWxhciAxJ3MgJGxvY2F0aW9uIHNlcnZpY2VcbiAqIEBpbnRlcm5hbGFwaVxuICovXG5leHBvcnQgY2xhc3MgTmcxTG9jYXRpb25TZXJ2aWNlcyBpbXBsZW1lbnRzIExvY2F0aW9uQ29uZmlnLCBMb2NhdGlvblNlcnZpY2VzIHtcbiAgcHJpdmF0ZSAkbG9jYXRpb25Qcm92aWRlcjogSUxvY2F0aW9uUHJvdmlkZXI7XG4gIHByaXZhdGUgJGxvY2F0aW9uOiBJTG9jYXRpb25TZXJ2aWNlO1xuICBwcml2YXRlICRzbmlmZmVyOiBhbnk7XG4gIHByaXZhdGUgJGJyb3dzZXI6IGFueTtcbiAgcHJpdmF0ZSAkd2luZG93OiBJV2luZG93U2VydmljZTtcblxuICBwYXRoO1xuICBzZWFyY2g7XG4gIGhhc2g7XG4gIGhhc2hQcmVmaXg7XG4gIHBvcnQ7XG4gIHByb3RvY29sO1xuICBob3N0O1xuXG4gIHByaXZhdGUgX2Jhc2VIcmVmOiBzdHJpbmc7XG5cbiAgLy8gLm9uQ2hhbmdlKCkgcmVnaXN0cnlcbiAgcHJpdmF0ZSBfdXJsTGlzdGVuZXJzOiBGdW5jdGlvbltdID0gW107XG5cbiAgLyoqXG4gICAqIEFwcGx5cyBuZzEtc3BlY2lmaWMgcGF0aCBwYXJhbWV0ZXIgZW5jb2RpbmdcbiAgICpcbiAgICogVGhlIEFuZ3VsYXIgMSBgJGxvY2F0aW9uYCBzZXJ2aWNlIGlzIGEgYml0IHdlaXJkLlxuICAgKiBJdCBkb2Vzbid0IGFsbG93IHNsYXNoZXMgdG8gYmUgZW5jb2RlZC9kZWNvZGVkIGJpLWRpcmVjdGlvbmFsbHkuXG4gICAqXG4gICAqIFNlZSB0aGUgd3JpdGV1cCBhdCBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1yb3V0ZXIvaXNzdWVzLzI1OThcbiAgICpcbiAgICogVGhpcyBjb2RlIHBhdGNoZXMgdGhlIGBwYXRoYCBwYXJhbWV0ZXIgdHlwZSBzbyBpdCBlbmNvZGVkL2RlY29kZXMgc2xhc2hlcyBhcyB+MkZcbiAgICpcbiAgICogQHBhcmFtIHJvdXRlclxuICAgKi9cbiAgc3RhdGljIG1vbmtleVBhdGNoUGF0aFBhcmFtZXRlclR5cGUocm91dGVyOiBVSVJvdXRlcikge1xuICAgIGNvbnN0IHBhdGhUeXBlOiBQYXJhbVR5cGUgPSByb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnkudHlwZSgncGF0aCcpO1xuXG4gICAgcGF0aFR5cGUuZW5jb2RlID0gKHg6IGFueSkgPT5cbiAgICAgIHggIT0gbnVsbCA/IHgudG9TdHJpbmcoKS5yZXBsYWNlKC8ofnxcXC8pL2csIG0gPT4gKHsgJ34nOiAnfn4nLCAnLyc6ICd+MkYnIH1bbV0pKSA6IHg7XG5cbiAgICBwYXRoVHlwZS5kZWNvZGUgPSAoeDogc3RyaW5nKSA9PlxuICAgICAgeCAhPSBudWxsID8geC50b1N0cmluZygpLnJlcGxhY2UoLyh+fnx+MkYpL2csIG0gPT4gKHsgJ35+JzogJ34nLCAnfjJGJzogJy8nIH1bbV0pKSA6IHg7XG4gIH1cblxuICBkaXNwb3NlKCkge31cblxuICBjb25zdHJ1Y3RvcigkbG9jYXRpb25Qcm92aWRlcjogSUxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICB0aGlzLiRsb2NhdGlvblByb3ZpZGVyID0gJGxvY2F0aW9uUHJvdmlkZXI7XG4gICAgY29uc3QgX2xwID0gdmFsKCRsb2NhdGlvblByb3ZpZGVyKTtcbiAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyhfbHAsIHRoaXMsIF9scCwgWydoYXNoUHJlZml4J10pO1xuICB9XG5cbiAgb25DaGFuZ2UoY2FsbGJhY2s6IEZ1bmN0aW9uKSB7XG4gICAgdGhpcy5fdXJsTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICAgIHJldHVybiAoKSA9PiByZW1vdmVGcm9tKHRoaXMuX3VybExpc3RlbmVycykoY2FsbGJhY2spO1xuICB9XG5cbiAgaHRtbDVNb2RlKCkge1xuICAgIGxldCBodG1sNU1vZGU6IGFueSA9IHRoaXMuJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKCk7XG4gICAgaHRtbDVNb2RlID0gaXNPYmplY3QoaHRtbDVNb2RlKSA/IGh0bWw1TW9kZS5lbmFibGVkIDogaHRtbDVNb2RlO1xuICAgIHJldHVybiBodG1sNU1vZGUgJiYgdGhpcy4kc25pZmZlci5oaXN0b3J5O1xuICB9XG5cbiAgYmFzZUhyZWYoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Jhc2VIcmVmIHx8ICh0aGlzLl9iYXNlSHJlZiA9IHRoaXMuJGJyb3dzZXIuYmFzZUhyZWYoKSB8fCB0aGlzLiR3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpO1xuICB9XG5cbiAgdXJsKG5ld1VybD86IHN0cmluZywgcmVwbGFjZSA9IGZhbHNlLCBzdGF0ZT8pIHtcbiAgICBpZiAoaXNEZWZpbmVkKG5ld1VybCkpIHRoaXMuJGxvY2F0aW9uLnVybChuZXdVcmwpO1xuICAgIGlmIChyZXBsYWNlKSB0aGlzLiRsb2NhdGlvbi5yZXBsYWNlKCk7XG4gICAgaWYgKHN0YXRlKSB0aGlzLiRsb2NhdGlvbi5zdGF0ZShzdGF0ZSk7XG4gICAgcmV0dXJuIHRoaXMuJGxvY2F0aW9uLnVybCgpO1xuICB9XG5cbiAgX3J1bnRpbWVTZXJ2aWNlcygkcm9vdFNjb3BlLCAkbG9jYXRpb246IElMb2NhdGlvblNlcnZpY2UsICRzbmlmZmVyLCAkYnJvd3NlciwgJHdpbmRvdzogSVdpbmRvd1NlcnZpY2UpIHtcbiAgICB0aGlzLiRsb2NhdGlvbiA9ICRsb2NhdGlvbjtcbiAgICB0aGlzLiRzbmlmZmVyID0gJHNuaWZmZXI7XG4gICAgdGhpcy4kYnJvd3NlciA9ICRicm93c2VyO1xuICAgIHRoaXMuJHdpbmRvdyA9ICR3aW5kb3c7XG5cbiAgICAvLyBCaW5kICRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MgdG8gdGhlIGxpc3RlbmVycyByZWdpc3RlcmVkIGluIExvY2F0aW9uU2VydmljZS5vbkNoYW5nZVxuICAgICRyb290U2NvcGUuJG9uKCckbG9jYXRpb25DaGFuZ2VTdWNjZXNzJywgZXZ0ID0+IHRoaXMuX3VybExpc3RlbmVycy5mb3JFYWNoKGZuID0+IGZuKGV2dCkpKTtcbiAgICBjb25zdCBfbG9jID0gdmFsKCRsb2NhdGlvbik7XG5cbiAgICAvLyBCaW5kIHRoZXNlIExvY2F0aW9uU2VydmljZSBmdW5jdGlvbnMgdG8gJGxvY2F0aW9uXG4gICAgY3JlYXRlUHJveHlGdW5jdGlvbnMoX2xvYywgdGhpcywgX2xvYywgWydyZXBsYWNlJywgJ3BhdGgnLCAnc2VhcmNoJywgJ2hhc2gnXSk7XG4gICAgLy8gQmluZCB0aGVzZSBMb2NhdGlvbkNvbmZpZyBmdW5jdGlvbnMgdG8gJGxvY2F0aW9uXG4gICAgY3JlYXRlUHJveHlGdW5jdGlvbnMoX2xvYywgdGhpcywgX2xvYywgWydwb3J0JywgJ3Byb3RvY29sJywgJ2hvc3QnXSk7XG4gIH1cbn1cbiIsIi8qKiBAcHVibGljYXBpIEBtb2R1bGUgdXJsICovIC8qKiAqL1xuaW1wb3J0IHtcbiAgVUlSb3V0ZXIsXG4gIExvY2F0aW9uU2VydmljZXMsXG4gICRJbmplY3Rvckxpa2UsXG4gIEJhc2VVcmxSdWxlLFxuICBVcmxSdWxlSGFuZGxlckZuLFxuICBVcmxNYXRjaGVyLFxuICBJSW5qZWN0YWJsZSxcbiAgVXJsUm91dGVyLFxufSBmcm9tICdAdWlyb3V0ZXIvY29yZSc7XG5pbXBvcnQgeyBzZXJ2aWNlcywgaXNTdHJpbmcsIGlzRnVuY3Rpb24sIGlzQXJyYXksIGlkZW50aXR5IH0gZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJhd05nMVJ1bGVGdW5jdGlvbiB7XG4gICgkaW5qZWN0b3I6ICRJbmplY3Rvckxpa2UsICRsb2NhdGlvbjogTG9jYXRpb25TZXJ2aWNlcyk6IHN0cmluZyB8IHZvaWQ7XG59XG5cbi8qKlxuICogTWFuYWdlcyBydWxlcyBmb3IgY2xpZW50LXNpZGUgVVJMXG4gKlxuICogIyMjIERlcHJlY2F0aW9uIHdhcm5pbmc6XG4gKiBUaGlzIGNsYXNzIGlzIG5vdyBjb25zaWRlcmVkIHRvIGJlIGFuIGludGVybmFsIEFQSVxuICogVXNlIHRoZSBbW1VybFNlcnZpY2VdXSBpbnN0ZWFkLlxuICogRm9yIGNvbmZpZ3VyaW5nIFVSTCBydWxlcywgdXNlIHRoZSBbW1VybFJ1bGVzQXBpXV0gd2hpY2ggY2FuIGJlIGZvdW5kIGFzIFtbVXJsU2VydmljZS5ydWxlc11dLlxuICpcbiAqIFRoaXMgY2xhc3MgbWFuYWdlcyB0aGUgcm91dGVyIHJ1bGVzIGZvciB3aGF0IHRvIGRvIHdoZW4gdGhlIFVSTCBjaGFuZ2VzLlxuICpcbiAqIFRoaXMgcHJvdmlkZXIgcmVtYWlucyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gKlxuICogQGludGVybmFsYXBpXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgY2xhc3MgVXJsUm91dGVyUHJvdmlkZXIge1xuICBzdGF0aWMgaW5qZWN0YWJsZUhhbmRsZXIocm91dGVyOiBVSVJvdXRlciwgaGFuZGxlcik6IFVybFJ1bGVIYW5kbGVyRm4ge1xuICAgIHJldHVybiBtYXRjaCA9PiBzZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKGhhbmRsZXIsIG51bGwsIHsgJG1hdGNoOiBtYXRjaCwgJHN0YXRlUGFyYW1zOiByb3V0ZXIuZ2xvYmFscy5wYXJhbXMgfSk7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICBjb25zdHJ1Y3RvcigvKiogQGhpZGRlbiAqLyBwcml2YXRlIHJvdXRlcjogVUlSb3V0ZXIpIHt9XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgJGdldCgpOiBVcmxSb3V0ZXIge1xuICAgIGNvbnN0IHVybFNlcnZpY2UgPSB0aGlzLnJvdXRlci51cmxTZXJ2aWNlO1xuICAgIHRoaXMucm91dGVyLnVybFJvdXRlci51cGRhdGUodHJ1ZSk7XG4gICAgaWYgKCF1cmxTZXJ2aWNlLmludGVyY2VwdERlZmVycmVkKSB1cmxTZXJ2aWNlLmxpc3RlbigpO1xuICAgIHJldHVybiB0aGlzLnJvdXRlci51cmxSb3V0ZXI7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgdXJsIGhhbmRsZXIgZnVuY3Rpb24uXG4gICAqXG4gICAqIFJlZ2lzdGVycyBhIGxvdyBsZXZlbCB1cmwgaGFuZGxlciAoYSBgcnVsZWApLlxuICAgKiBBIHJ1bGUgZGV0ZWN0cyBzcGVjaWZpYyBVUkwgcGF0dGVybnMgYW5kIHJldHVybnMgYSByZWRpcmVjdCwgb3IgcGVyZm9ybXMgc29tZSBhY3Rpb24uXG4gICAqXG4gICAqIElmIGEgcnVsZSByZXR1cm5zIGEgc3RyaW5nLCB0aGUgVVJMIGlzIHJlcGxhY2VkIHdpdGggdGhlIHN0cmluZywgYW5kIGFsbCBydWxlcyBhcmUgZmlyZWQgYWdhaW4uXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlci5yb3V0ZXInXSk7XG4gICAqXG4gICAqIGFwcC5jb25maWcoZnVuY3Rpb24gKCR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAgKiAgIC8vIEhlcmUncyBhbiBleGFtcGxlIG9mIGhvdyB5b3UgbWlnaHQgYWxsb3cgY2FzZSBpbnNlbnNpdGl2ZSB1cmxzXG4gICAqICAgJHVybFJvdXRlclByb3ZpZGVyLnJ1bGUoZnVuY3Rpb24gKCRpbmplY3RvciwgJGxvY2F0aW9uKSB7XG4gICAqICAgICB2YXIgcGF0aCA9ICRsb2NhdGlvbi5wYXRoKCksXG4gICAqICAgICAgICAgbm9ybWFsaXplZCA9IHBhdGgudG9Mb3dlckNhc2UoKTtcbiAgICpcbiAgICogICAgIGlmIChwYXRoICE9PSBub3JtYWxpemVkKSB7XG4gICAqICAgICAgIHJldHVybiBub3JtYWxpemVkO1xuICAgKiAgICAgfVxuICAgKiAgIH0pO1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBydWxlRm5cbiAgICogSGFuZGxlciBmdW5jdGlvbiB0aGF0IHRha2VzIGAkaW5qZWN0b3JgIGFuZCBgJGxvY2F0aW9uYCBzZXJ2aWNlcyBhcyBhcmd1bWVudHMuXG4gICAqIFlvdSBjYW4gdXNlIHRoZW0gdG8gZGV0ZWN0IGEgdXJsIGFuZCByZXR1cm4gYSBkaWZmZXJlbnQgdXJsIGFzIGEgc3RyaW5nLlxuICAgKlxuICAgKiBAcmV0dXJuIFtbVXJsUm91dGVyUHJvdmlkZXJdXSAoYHRoaXNgKVxuICAgKi9cbiAgcnVsZShydWxlRm46IFJhd05nMVJ1bGVGdW5jdGlvbik6IFVybFJvdXRlclByb3ZpZGVyIHtcbiAgICBpZiAoIWlzRnVuY3Rpb24ocnVsZUZuKSkgdGhyb3cgbmV3IEVycm9yKFwiJ3J1bGUnIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcblxuICAgIGNvbnN0IG1hdGNoID0gKCkgPT4gcnVsZUZuKHNlcnZpY2VzLiRpbmplY3RvciwgdGhpcy5yb3V0ZXIubG9jYXRpb25TZXJ2aWNlKTtcblxuICAgIGNvbnN0IHJ1bGUgPSBuZXcgQmFzZVVybFJ1bGUobWF0Y2gsIGlkZW50aXR5KTtcbiAgICB0aGlzLnJvdXRlci51cmxTZXJ2aWNlLnJ1bGVzLnJ1bGUocnVsZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogRGVmaW5lcyB0aGUgcGF0aCBvciBiZWhhdmlvciB0byB1c2Ugd2hlbiBubyB1cmwgY2FuIGJlIG1hdGNoZWQuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlci5yb3V0ZXInXSk7XG4gICAqXG4gICAqIGFwcC5jb25maWcoZnVuY3Rpb24gKCR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAgKiAgIC8vIGlmIHRoZSBwYXRoIGRvZXNuJ3QgbWF0Y2ggYW55IG9mIHRoZSB1cmxzIHlvdSBjb25maWd1cmVkXG4gICAqICAgLy8gb3RoZXJ3aXNlIHdpbGwgdGFrZSBjYXJlIG9mIHJvdXRpbmcgdGhlIHVzZXIgdG8gdGhlXG4gICAqICAgLy8gc3BlY2lmaWVkIHVybFxuICAgKiAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9pbmRleCcpO1xuICAgKlxuICAgKiAgIC8vIEV4YW1wbGUgb2YgdXNpbmcgZnVuY3Rpb24gcnVsZSBhcyBwYXJhbVxuICAgKiAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoZnVuY3Rpb24gKCRpbmplY3RvciwgJGxvY2F0aW9uKSB7XG4gICAqICAgICByZXR1cm4gJy9hL3ZhbGlkL3VybCc7XG4gICAqICAgfSk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHJ1bGVcbiAgICogVGhlIHVybCBwYXRoIHlvdSB3YW50IHRvIHJlZGlyZWN0IHRvIG9yIGEgZnVuY3Rpb24gcnVsZSB0aGF0IHJldHVybnMgdGhlIHVybCBwYXRoIG9yIHBlcmZvcm1zIGEgYCRzdGF0ZS5nbygpYC5cbiAgICogVGhlIGZ1bmN0aW9uIHZlcnNpb24gaXMgcGFzc2VkIHR3byBwYXJhbXM6IGAkaW5qZWN0b3JgIGFuZCBgJGxvY2F0aW9uYCBzZXJ2aWNlcywgYW5kIHNob3VsZCByZXR1cm4gYSB1cmwgc3RyaW5nLlxuICAgKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9IGAkdXJsUm91dGVyUHJvdmlkZXJgIC0gYCR1cmxSb3V0ZXJQcm92aWRlcmAgaW5zdGFuY2VcbiAgICovXG4gIG90aGVyd2lzZShydWxlOiBzdHJpbmcgfCBSYXdOZzFSdWxlRnVuY3Rpb24pOiBVcmxSb3V0ZXJQcm92aWRlciB7XG4gICAgY29uc3QgdXJsUnVsZXMgPSB0aGlzLnJvdXRlci51cmxTZXJ2aWNlLnJ1bGVzO1xuICAgIGlmIChpc1N0cmluZyhydWxlKSkge1xuICAgICAgdXJsUnVsZXMub3RoZXJ3aXNlKHJ1bGUpO1xuICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihydWxlKSkge1xuICAgICAgdXJsUnVsZXMub3RoZXJ3aXNlKCgpID0+IHJ1bGUoc2VydmljZXMuJGluamVjdG9yLCB0aGlzLnJvdXRlci5sb2NhdGlvblNlcnZpY2UpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ3J1bGUnIG11c3QgYmUgYSBzdHJpbmcgb3IgZnVuY3Rpb25cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgaGFuZGxlciBmb3IgYSBnaXZlbiB1cmwgbWF0Y2hpbmcuXG4gICAqXG4gICAqIElmIHRoZSBoYW5kbGVyIGlzIGEgc3RyaW5nLCBpdCBpc1xuICAgKiB0cmVhdGVkIGFzIGEgcmVkaXJlY3QsIGFuZCBpcyBpbnRlcnBvbGF0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzeW50YXggb2YgbWF0Y2hcbiAgICogKGkuZS4gbGlrZSBgU3RyaW5nLnJlcGxhY2UoKWAgZm9yIGBSZWdFeHBgLCBvciBsaWtlIGEgYFVybE1hdGNoZXJgIHBhdHRlcm4gb3RoZXJ3aXNlKS5cbiAgICpcbiAgICogSWYgdGhlIGhhbmRsZXIgaXMgYSBmdW5jdGlvbiwgaXQgaXMgaW5qZWN0YWJsZS5cbiAgICogSXQgZ2V0cyBpbnZva2VkIGlmIGAkbG9jYXRpb25gIG1hdGNoZXMuXG4gICAqIFlvdSBoYXZlIHRoZSBvcHRpb24gb2YgaW5qZWN0IHRoZSBtYXRjaCBvYmplY3QgYXMgYCRtYXRjaGAuXG4gICAqXG4gICAqIFRoZSBoYW5kbGVyIGNhbiByZXR1cm5cbiAgICpcbiAgICogLSAqKmZhbHN5KiogdG8gaW5kaWNhdGUgdGhhdCB0aGUgcnVsZSBkaWRuJ3QgbWF0Y2ggYWZ0ZXIgYWxsLCB0aGVuIGAkdXJsUm91dGVyYFxuICAgKiAgIHdpbGwgY29udGludWUgdHJ5aW5nIHRvIGZpbmQgYW5vdGhlciBvbmUgdGhhdCBtYXRjaGVzLlxuICAgKiAtICoqc3RyaW5nKiogd2hpY2ggaXMgdHJlYXRlZCBhcyBhIHJlZGlyZWN0IGFuZCBwYXNzZWQgdG8gYCRsb2NhdGlvbi51cmwoKWBcbiAgICogLSAqKnZvaWQqKiBvciBhbnkgKip0cnV0aHkqKiB2YWx1ZSB0ZWxscyBgJHVybFJvdXRlcmAgdGhhdCB0aGUgdXJsIHdhcyBoYW5kbGVkLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXIucm91dGVyJ10pO1xuICAgKlxuICAgKiBhcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgICogICAkdXJsUm91dGVyUHJvdmlkZXIud2hlbigkc3RhdGUudXJsLCBmdW5jdGlvbiAoJG1hdGNoLCAkc3RhdGVQYXJhbXMpIHtcbiAgICogICAgIGlmICgkc3RhdGUuJGN1cnJlbnQubmF2aWdhYmxlICE9PSBzdGF0ZSB8fFxuICAgKiAgICAgICAgICFlcXVhbEZvcktleXMoJG1hdGNoLCAkc3RhdGVQYXJhbXMpIHtcbiAgICogICAgICAkc3RhdGUudHJhbnNpdGlvblRvKHN0YXRlLCAkbWF0Y2gsIGZhbHNlKTtcbiAgICogICAgIH1cbiAgICogICB9KTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gd2hhdCBBIHBhdHRlcm4gc3RyaW5nIHRvIG1hdGNoLCBjb21waWxlZCBhcyBhIFtbVXJsTWF0Y2hlcl1dLlxuICAgKiBAcGFyYW0gaGFuZGxlciBUaGUgcGF0aCAob3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcGF0aCkgdGhhdCB5b3Ugd2FudCB0byByZWRpcmVjdCB5b3VyIHVzZXIgdG8uXG4gICAqIEBwYXJhbSBydWxlQ2FsbGJhY2sgW29wdGlvbmFsXSBBIGNhbGxiYWNrIHRoYXQgcmVjZWl2ZXMgdGhlIGBydWxlYCByZWdpc3RlcmVkIHdpdGggW1tVcmxNYXRjaGVyLnJ1bGVdXVxuICAgKlxuICAgKiBOb3RlOiB0aGUgaGFuZGxlciBtYXkgYWxzbyBpbnZva2UgYXJiaXRyYXJ5IGNvZGUsIHN1Y2ggYXMgYCRzdGF0ZS5nbygpYFxuICAgKi9cbiAgd2hlbih3aGF0OiBSZWdFeHAgfCBVcmxNYXRjaGVyIHwgc3RyaW5nLCBoYW5kbGVyOiBzdHJpbmcgfCBJSW5qZWN0YWJsZSkge1xuICAgIGlmIChpc0FycmF5KGhhbmRsZXIpIHx8IGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgIGhhbmRsZXIgPSBVcmxSb3V0ZXJQcm92aWRlci5pbmplY3RhYmxlSGFuZGxlcih0aGlzLnJvdXRlciwgaGFuZGxlcik7XG4gICAgfVxuXG4gICAgdGhpcy5yb3V0ZXIudXJsU2VydmljZS5ydWxlcy53aGVuKHdoYXQsIGhhbmRsZXIgYXMgYW55KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNhYmxlcyBtb25pdG9yaW5nIG9mIHRoZSBVUkwuXG4gICAqXG4gICAqIENhbGwgdGhpcyBtZXRob2QgYmVmb3JlIFVJLVJvdXRlciBoYXMgYm9vdHN0cmFwcGVkLlxuICAgKiBJdCB3aWxsIHN0b3AgVUktUm91dGVyIGZyb20gcGVyZm9ybWluZyB0aGUgaW5pdGlhbCB1cmwgc3luYy5cbiAgICpcbiAgICogVGhpcyBjYW4gYmUgdXNlZnVsIHRvIHBlcmZvcm0gc29tZSBhc3luY2hyb25vdXMgaW5pdGlhbGl6YXRpb24gYmVmb3JlIHRoZSByb3V0ZXIgc3RhcnRzLlxuICAgKiBPbmNlIHRoZSBpbml0aWFsaXphdGlvbiBpcyBjb21wbGV0ZSwgY2FsbCBbW2xpc3Rlbl1dIHRvIHRlbGwgVUktUm91dGVyIHRvIHN0YXJ0IHdhdGNoaW5nIGFuZCBzeW5jaHJvbml6aW5nIHRoZSBVUkwuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlciddKTtcbiAgICpcbiAgICogYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICAqICAgLy8gUHJldmVudCAkdXJsUm91dGVyIGZyb20gYXV0b21hdGljYWxseSBpbnRlcmNlcHRpbmcgVVJMIGNoYW5nZXM7XG4gICAqICAgJHVybFJvdXRlclByb3ZpZGVyLmRlZmVySW50ZXJjZXB0KCk7XG4gICAqIH0pXG4gICAqXG4gICAqIGFwcC5ydW4oZnVuY3Rpb24gKE15U2VydmljZSwgJHVybFJvdXRlciwgJGh0dHApIHtcbiAgICogICAkaHR0cC5nZXQoXCIvc3R1ZmZcIikudGhlbihmdW5jdGlvbihyZXNwKSB7XG4gICAqICAgICBNeVNlcnZpY2UuZG9TdHVmZihyZXNwLmRhdGEpO1xuICAgKiAgICAgJHVybFJvdXRlci5saXN0ZW4oKTtcbiAgICogICAgICR1cmxSb3V0ZXIuc3luYygpO1xuICAgKiAgIH0pO1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBkZWZlciBJbmRpY2F0ZXMgd2hldGhlciB0byBkZWZlciBsb2NhdGlvbiBjaGFuZ2UgaW50ZXJjZXB0aW9uLlxuICAgKiAgICAgICAgUGFzc2luZyBubyBwYXJhbWV0ZXIgaXMgZXF1aXZhbGVudCB0byBgdHJ1ZWAuXG4gICAqL1xuICBkZWZlckludGVyY2VwdChkZWZlcj86IGJvb2xlYW4pIHtcbiAgICB0aGlzLnJvdXRlci51cmxTZXJ2aWNlLmRlZmVySW50ZXJjZXB0KGRlZmVyKTtcbiAgfVxufVxuIiwiLyoqXG4gKiAjIEFuZ3VsYXIgMSB0eXBlc1xuICpcbiAqIFVJLVJvdXRlciBjb3JlIHByb3ZpZGVzIHZhcmlvdXMgVHlwZXNjcmlwdCB0eXBlcyB3aGljaCB5b3UgY2FuIHVzZSBmb3IgY29kZSBjb21wbGV0aW9uIGFuZCB2YWxpZGF0aW5nIHBhcmFtZXRlciB2YWx1ZXMsIGV0Yy5cbiAqIFRoZSBjdXN0b21pemF0aW9ucyB0byB0aGUgY29yZSB0eXBlcyBmb3IgQW5ndWxhciBVSS1Sb3V0ZXIgYXJlIGRvY3VtZW50ZWQgaGVyZS5cbiAqXG4gKiBUaGUgb3B0aW9uYWwgW1skcmVzb2x2ZV1dIHNlcnZpY2UgaXMgYWxzbyBkb2N1bWVudGVkIGhlcmUuXG4gKlxuICogQHByZWZlcnJlZCBAcHVibGljYXBpIEBtb2R1bGUgbmcxXG4gKi8gLyoqICovXG5pbXBvcnQgeyBuZyBhcyBhbmd1bGFyIH0gZnJvbSAnLi9hbmd1bGFyJztcbmltcG9ydCB7XG4gIElSb290U2NvcGVTZXJ2aWNlLFxuICBJUVNlcnZpY2UsXG4gIElMb2NhdGlvblNlcnZpY2UsXG4gIElMb2NhdGlvblByb3ZpZGVyLFxuICBJSHR0cFNlcnZpY2UsXG4gIElUZW1wbGF0ZUNhY2hlU2VydmljZSxcbn0gZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQge1xuICBzZXJ2aWNlcyxcbiAgYXBwbHlQYWlycyxcbiAgaXNTdHJpbmcsXG4gIHRyYWNlLFxuICBleHRlbmQsXG4gIFVJUm91dGVyLFxuICBTdGF0ZVNlcnZpY2UsXG4gIFVybFJvdXRlcixcbiAgVXJsTWF0Y2hlckZhY3RvcnksXG4gIFJlc29sdmVDb250ZXh0LFxuICB1bm5lc3RSLFxuICBUeXBlZE1hcCxcbn0gZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuaW1wb3J0IHsgbmcxVmlld3NCdWlsZGVyLCBnZXROZzFWaWV3Q29uZmlnRmFjdG9yeSB9IGZyb20gJy4vc3RhdGVidWlsZGVycy92aWV3cyc7XG5pbXBvcnQgeyBUZW1wbGF0ZUZhY3RvcnkgfSBmcm9tICcuL3RlbXBsYXRlRmFjdG9yeSc7XG5pbXBvcnQgeyBTdGF0ZVByb3ZpZGVyIH0gZnJvbSAnLi9zdGF0ZVByb3ZpZGVyJztcbmltcG9ydCB7IGdldFN0YXRlSG9va0J1aWxkZXIgfSBmcm9tICcuL3N0YXRlYnVpbGRlcnMvb25FbnRlckV4aXRSZXRhaW4nO1xuaW1wb3J0IHsgTmcxTG9jYXRpb25TZXJ2aWNlcyB9IGZyb20gJy4vbG9jYXRpb25TZXJ2aWNlcyc7XG5pbXBvcnQgeyBVcmxSb3V0ZXJQcm92aWRlciB9IGZyb20gJy4vdXJsUm91dGVyUHJvdmlkZXInO1xuaW1wb3J0IElJbmplY3RvclNlcnZpY2UgPSBhbmd1bGFyLmF1dG8uSUluamVjdG9yU2VydmljZTsgLy8gdHNsaW50OmRpc2FibGUtbGluZVxuXG5hbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLmFuZ3VsYXIxJywgW10pO1xuY29uc3QgbW9kX2luaXQgPSBhbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLmluaXQnLCBbJ25nJ10pO1xuY29uc3QgbW9kX3V0aWwgPSBhbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnV0aWwnLCBbJ3VpLnJvdXRlci5pbml0J10pO1xuY29uc3QgbW9kX3J0ciA9IGFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXIucm91dGVyJywgWyd1aS5yb3V0ZXIudXRpbCddKTtcbmNvbnN0IG1vZF9zdGF0ZSA9IGFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnLCBbJ3VpLnJvdXRlci5yb3V0ZXInLCAndWkucm91dGVyLnV0aWwnLCAndWkucm91dGVyLmFuZ3VsYXIxJ10pO1xuY29uc3QgbW9kX21haW4gPSBhbmd1bGFyLm1vZHVsZSgndWkucm91dGVyJywgWyd1aS5yb3V0ZXIuaW5pdCcsICd1aS5yb3V0ZXIuc3RhdGUnLCAndWkucm91dGVyLmFuZ3VsYXIxJ10pO1xuY29uc3QgbW9kX2NtcHQgPSBhbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLmNvbXBhdCcsIFsndWkucm91dGVyJ10pOyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lXG5cbmRlY2xhcmUgbW9kdWxlICdAdWlyb3V0ZXIvY29yZS9saWIvcm91dGVyJyB7XG4gIGludGVyZmFjZSBVSVJvdXRlciB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbGluZTpuby1zaGFkb3dlZC12YXJpYWJsZVxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgc3RhdGVQcm92aWRlcjogU3RhdGVQcm92aWRlcjtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHVybFJvdXRlclByb3ZpZGVyOiBVcmxSb3V0ZXJQcm92aWRlcjtcbiAgfVxufVxuXG5sZXQgcm91dGVyOiBVSVJvdXRlciA9IG51bGw7XG5cbiR1aVJvdXRlclByb3ZpZGVyLiRpbmplY3QgPSBbJyRsb2NhdGlvblByb3ZpZGVyJ107XG4vKiogVGhpcyBhbmd1bGFyIDEgcHJvdmlkZXIgaW5zdGFudGlhdGVzIGEgUm91dGVyIGFuZCBleHBvc2VzIGl0cyBzZXJ2aWNlcyB2aWEgdGhlIGFuZ3VsYXIgaW5qZWN0b3IgKi9cbmZ1bmN0aW9uICR1aVJvdXRlclByb3ZpZGVyKCRsb2NhdGlvblByb3ZpZGVyOiBJTG9jYXRpb25Qcm92aWRlcikge1xuICAvLyBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFJvdXRlciB3aGVuIHRoZSAkdWlSb3V0ZXJQcm92aWRlciBpcyBpbml0aWFsaXplZFxuICByb3V0ZXIgPSB0aGlzLnJvdXRlciA9IG5ldyBVSVJvdXRlcigpO1xuICByb3V0ZXIuc3RhdGVQcm92aWRlciA9IG5ldyBTdGF0ZVByb3ZpZGVyKHJvdXRlci5zdGF0ZVJlZ2lzdHJ5LCByb3V0ZXIuc3RhdGVTZXJ2aWNlKTtcblxuICAvLyBBcHBseSBuZzEgc3BlY2lmaWMgU3RhdGVCdWlsZGVyIGNvZGUgZm9yIGB2aWV3c2AsIGByZXNvbHZlYCwgYW5kIGBvbkV4aXQvUmV0YWluL0VudGVyYCBwcm9wZXJ0aWVzXG4gIHJvdXRlci5zdGF0ZVJlZ2lzdHJ5LmRlY29yYXRvcigndmlld3MnLCBuZzFWaWV3c0J1aWxkZXIpO1xuICByb3V0ZXIuc3RhdGVSZWdpc3RyeS5kZWNvcmF0b3IoJ29uRXhpdCcsIGdldFN0YXRlSG9va0J1aWxkZXIoJ29uRXhpdCcpKTtcbiAgcm91dGVyLnN0YXRlUmVnaXN0cnkuZGVjb3JhdG9yKCdvblJldGFpbicsIGdldFN0YXRlSG9va0J1aWxkZXIoJ29uUmV0YWluJykpO1xuICByb3V0ZXIuc3RhdGVSZWdpc3RyeS5kZWNvcmF0b3IoJ29uRW50ZXInLCBnZXRTdGF0ZUhvb2tCdWlsZGVyKCdvbkVudGVyJykpO1xuXG4gIHJvdXRlci52aWV3U2VydmljZS5fcGx1Z2luYXBpLl92aWV3Q29uZmlnRmFjdG9yeSgnbmcxJywgZ2V0TmcxVmlld0NvbmZpZ0ZhY3RvcnkoKSk7XG5cbiAgY29uc3QgbmcxTG9jYXRpb25TZXJ2aWNlID0gKHJvdXRlci5sb2NhdGlvblNlcnZpY2UgPSByb3V0ZXIubG9jYXRpb25Db25maWcgPSBuZXcgTmcxTG9jYXRpb25TZXJ2aWNlcyhcbiAgICAkbG9jYXRpb25Qcm92aWRlclxuICApKTtcblxuICBOZzFMb2NhdGlvblNlcnZpY2VzLm1vbmtleVBhdGNoUGF0aFBhcmFtZXRlclR5cGUocm91dGVyKTtcblxuICAvLyBiYWNrd2FyZHMgY29tcGF0OiBhbHNvIGV4cG9zZSByb3V0ZXIgaW5zdGFuY2UgYXMgJHVpUm91dGVyUHJvdmlkZXIucm91dGVyXG4gIHJvdXRlclsncm91dGVyJ10gPSByb3V0ZXI7XG4gIHJvdXRlclsnJGdldCddID0gJGdldDtcbiAgJGdldC4kaW5qZWN0ID0gWyckbG9jYXRpb24nLCAnJGJyb3dzZXInLCAnJHdpbmRvdycsICckc25pZmZlcicsICckcm9vdFNjb3BlJywgJyRodHRwJywgJyR0ZW1wbGF0ZUNhY2hlJ107XG4gIGZ1bmN0aW9uICRnZXQoXG4gICAgJGxvY2F0aW9uOiBJTG9jYXRpb25TZXJ2aWNlLFxuICAgICRicm93c2VyOiBhbnksXG4gICAgJHdpbmRvdzogYW55LFxuICAgICRzbmlmZmVyOiBhbnksXG4gICAgJHJvb3RTY29wZTogbmcuSVNjb3BlLFxuICAgICRodHRwOiBJSHR0cFNlcnZpY2UsXG4gICAgJHRlbXBsYXRlQ2FjaGU6IElUZW1wbGF0ZUNhY2hlU2VydmljZVxuICApIHtcbiAgICBuZzFMb2NhdGlvblNlcnZpY2UuX3J1bnRpbWVTZXJ2aWNlcygkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRzbmlmZmVyLCAkYnJvd3NlciwgJHdpbmRvdyk7XG4gICAgZGVsZXRlIHJvdXRlclsncm91dGVyJ107XG4gICAgZGVsZXRlIHJvdXRlclsnJGdldCddO1xuICAgIHJldHVybiByb3V0ZXI7XG4gIH1cbiAgcmV0dXJuIHJvdXRlcjtcbn1cblxuY29uc3QgZ2V0UHJvdmlkZXJGb3IgPSBzZXJ2aWNlTmFtZSA9PiBbXG4gICckdWlSb3V0ZXJQcm92aWRlcicsXG4gICR1cnAgPT4ge1xuICAgIGNvbnN0IHNlcnZpY2UgPSAkdXJwLnJvdXRlcltzZXJ2aWNlTmFtZV07XG4gICAgc2VydmljZVsnJGdldCddID0gKCkgPT4gc2VydmljZTtcbiAgICByZXR1cm4gc2VydmljZTtcbiAgfSxcbl07XG5cbi8vIFRoaXMgZWZmZWN0aXZlbHkgY2FsbHMgJGdldCgpIG9uIGAkdWlSb3V0ZXJQcm92aWRlcmAgdG8gdHJpZ2dlciBpbml0ICh3aGVuIG5nIGVudGVycyBydW50aW1lKVxucnVuQmxvY2suJGluamVjdCA9IFsnJGluamVjdG9yJywgJyRxJywgJyR1aVJvdXRlciddO1xuZnVuY3Rpb24gcnVuQmxvY2soJGluamVjdG9yOiBJSW5qZWN0b3JTZXJ2aWNlLCAkcTogSVFTZXJ2aWNlLCAkdWlSb3V0ZXI6IFVJUm91dGVyKSB7XG4gIHNlcnZpY2VzLiRpbmplY3RvciA9ICRpbmplY3RvcjtcbiAgc2VydmljZXMuJHEgPSA8YW55PiRxO1xuXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyLXVpL3VpLXJvdXRlci9pc3N1ZXMvMzY3OFxuICBpZiAoISRpbmplY3Rvci5oYXNPd25Qcm9wZXJ0eSgnc3RyaWN0RGknKSkge1xuICAgIHRyeSB7XG4gICAgICAkaW5qZWN0b3IuaW52b2tlKGZ1bmN0aW9uKGNoZWNrU3RyaWN0RGkpIHt9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgJGluamVjdG9yLnN0cmljdERpID0gISEvc3RyaWN0IG1vZGUvLmV4ZWMoZXJyb3IgJiYgZXJyb3IudG9TdHJpbmcoKSk7XG4gICAgfVxuICB9XG5cbiAgLy8gVGhlICRpbmplY3RvciBpcyBub3cgYXZhaWxhYmxlLlxuICAvLyBGaW5kIGFueSByZXNvbHZhYmxlcyB0aGF0IGhhZCBkZXBlbmRlbmN5IGFubm90YXRpb24gZGVmZXJyZWRcbiAgJHVpUm91dGVyLnN0YXRlUmVnaXN0cnlcbiAgICAuZ2V0KClcbiAgICAubWFwKHggPT4geC4kJHN0YXRlKCkucmVzb2x2YWJsZXMpXG4gICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAuZmlsdGVyKHggPT4geC5kZXBzID09PSAnZGVmZXJyZWQnKVxuICAgIC5mb3JFYWNoKHJlc29sdmFibGUgPT4gKHJlc29sdmFibGUuZGVwcyA9ICRpbmplY3Rvci5hbm5vdGF0ZShyZXNvbHZhYmxlLnJlc29sdmVGbiwgJGluamVjdG9yLnN0cmljdERpKSkpO1xufVxuXG4vLyAkdXJsUm91dGVyIHNlcnZpY2UgYW5kICR1cmxSb3V0ZXJQcm92aWRlclxuY29uc3QgZ2V0VXJsUm91dGVyUHJvdmlkZXIgPSAodWlSb3V0ZXI6IFVJUm91dGVyKSA9PiAodWlSb3V0ZXIudXJsUm91dGVyUHJvdmlkZXIgPSBuZXcgVXJsUm91dGVyUHJvdmlkZXIodWlSb3V0ZXIpKTtcblxuLy8gJHN0YXRlIHNlcnZpY2UgYW5kICRzdGF0ZVByb3ZpZGVyXG4vLyAkdXJsUm91dGVyIHNlcnZpY2UgYW5kICR1cmxSb3V0ZXJQcm92aWRlclxuY29uc3QgZ2V0U3RhdGVQcm92aWRlciA9ICgpID0+IGV4dGVuZChyb3V0ZXIuc3RhdGVQcm92aWRlciwgeyAkZ2V0OiAoKSA9PiByb3V0ZXIuc3RhdGVTZXJ2aWNlIH0pO1xuXG53YXRjaERpZ2VzdHMuJGluamVjdCA9IFsnJHJvb3RTY29wZSddO1xuZXhwb3J0IGZ1bmN0aW9uIHdhdGNoRGlnZXN0cygkcm9vdFNjb3BlOiBJUm9vdFNjb3BlU2VydmljZSkge1xuICAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHtcbiAgICB0cmFjZS5hcHByb3hpbWF0ZURpZ2VzdHMrKztcbiAgfSk7XG59XG5cbm1vZF9pbml0LnByb3ZpZGVyKCckdWlSb3V0ZXInLCA8YW55PiR1aVJvdXRlclByb3ZpZGVyKTtcbm1vZF9ydHIucHJvdmlkZXIoJyR1cmxSb3V0ZXInLCBbJyR1aVJvdXRlclByb3ZpZGVyJywgZ2V0VXJsUm91dGVyUHJvdmlkZXJdKTtcbm1vZF91dGlsLnByb3ZpZGVyKCckdXJsU2VydmljZScsIGdldFByb3ZpZGVyRm9yKCd1cmxTZXJ2aWNlJykpO1xubW9kX3V0aWwucHJvdmlkZXIoJyR1cmxNYXRjaGVyRmFjdG9yeScsIFsnJHVpUm91dGVyUHJvdmlkZXInLCAoKSA9PiByb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnldKTtcbm1vZF91dGlsLnByb3ZpZGVyKCckdGVtcGxhdGVGYWN0b3J5JywgKCkgPT4gbmV3IFRlbXBsYXRlRmFjdG9yeSgpKTtcbm1vZF9zdGF0ZS5wcm92aWRlcignJHN0YXRlUmVnaXN0cnknLCBnZXRQcm92aWRlckZvcignc3RhdGVSZWdpc3RyeScpKTtcbm1vZF9zdGF0ZS5wcm92aWRlcignJHVpUm91dGVyR2xvYmFscycsIGdldFByb3ZpZGVyRm9yKCdnbG9iYWxzJykpO1xubW9kX3N0YXRlLnByb3ZpZGVyKCckdHJhbnNpdGlvbnMnLCBnZXRQcm92aWRlckZvcigndHJhbnNpdGlvblNlcnZpY2UnKSk7XG5tb2Rfc3RhdGUucHJvdmlkZXIoJyRzdGF0ZScsIFsnJHVpUm91dGVyUHJvdmlkZXInLCBnZXRTdGF0ZVByb3ZpZGVyXSk7XG5cbm1vZF9zdGF0ZS5mYWN0b3J5KCckc3RhdGVQYXJhbXMnLCBbJyR1aVJvdXRlcicsICgkdWlSb3V0ZXI6IFVJUm91dGVyKSA9PiAkdWlSb3V0ZXIuZ2xvYmFscy5wYXJhbXNdKTtcbm1vZF9tYWluLmZhY3RvcnkoJyR2aWV3JywgKCkgPT4gcm91dGVyLnZpZXdTZXJ2aWNlKTtcbm1vZF9tYWluLnNlcnZpY2UoJyR0cmFjZScsICgpID0+IHRyYWNlKTtcblxubW9kX21haW4ucnVuKHdhdGNoRGlnZXN0cyk7XG5tb2RfdXRpbC5ydW4oWyckdXJsTWF0Y2hlckZhY3RvcnknLCBmdW5jdGlvbigkdXJsTWF0Y2hlckZhY3Rvcnk6IFVybE1hdGNoZXJGYWN0b3J5KSB7fV0pO1xubW9kX3N0YXRlLnJ1bihbJyRzdGF0ZScsIGZ1bmN0aW9uKCRzdGF0ZTogU3RhdGVTZXJ2aWNlKSB7fV0pO1xubW9kX3J0ci5ydW4oWyckdXJsUm91dGVyJywgZnVuY3Rpb24oJHVybFJvdXRlcjogVXJsUm91dGVyKSB7fV0pO1xubW9kX2luaXQucnVuKHJ1bkJsb2NrKTtcblxuLyoqIEBoaWRkZW4gVE9ETzogZmluZCBhIHBsYWNlIHRvIG1vdmUgdGhpcyAqL1xuZXhwb3J0IGNvbnN0IGdldExvY2FscyA9IChjdHg6IFJlc29sdmVDb250ZXh0KTogVHlwZWRNYXA8YW55PiA9PiB7XG4gIGNvbnN0IHRva2VucyA9IGN0eC5nZXRUb2tlbnMoKS5maWx0ZXIoaXNTdHJpbmcpO1xuXG4gIGNvbnN0IHR1cGxlcyA9IHRva2Vucy5tYXAoa2V5ID0+IHtcbiAgICBjb25zdCByZXNvbHZhYmxlID0gY3R4LmdldFJlc29sdmFibGUoa2V5KTtcbiAgICBjb25zdCB3YWl0UG9saWN5ID0gY3R4LmdldFBvbGljeShyZXNvbHZhYmxlKS5hc3luYztcbiAgICByZXR1cm4gW2tleSwgd2FpdFBvbGljeSA9PT0gJ05PV0FJVCcgPyByZXNvbHZhYmxlLnByb21pc2UgOiByZXNvbHZhYmxlLmRhdGFdO1xuICB9KTtcblxuICByZXR1cm4gdHVwbGVzLnJlZHVjZShhcHBseVBhaXJzLCB7fSk7XG59O1xuIiwiLyoqXG4gKiAjIEFuZ3VsYXIgMSBEaXJlY3RpdmVzXG4gKlxuICogVGhlc2UgYXJlIHRoZSBkaXJlY3RpdmVzIGluY2x1ZGVkIGluIFVJLVJvdXRlciBmb3IgQW5ndWxhciAxLlxuICogVGhlc2UgZGlyZWN0aXZlcyBhcmUgdXNlZCBpbiB0ZW1wbGF0ZXMgdG8gY3JlYXRlIHZpZXdwb3J0cyBhbmQgbGluay9uYXZpZ2F0ZSB0byBzdGF0ZXMuXG4gKlxuICogQHByZWZlcnJlZCBAcHVibGljYXBpIEBtb2R1bGUgZGlyZWN0aXZlc1xuICovIC8qKiAqL1xuaW1wb3J0IHsgbmcgYXMgYW5ndWxhciB9IGZyb20gJy4uL2FuZ3VsYXInO1xuaW1wb3J0IHsgSUF1Z21lbnRlZEpRdWVyeSwgSVRpbWVvdXRTZXJ2aWNlLCBJU2NvcGUsIElJbnRlcnBvbGF0ZVNlcnZpY2UgfSBmcm9tICdhbmd1bGFyJztcblxuaW1wb3J0IHtcbiAgT2JqLFxuICBleHRlbmQsXG4gIGZvckVhY2gsXG4gIHRhaWwsXG4gIGlzU3RyaW5nLFxuICBpc09iamVjdCxcbiAgaXNBcnJheSxcbiAgcGFyc2UsXG4gIG5vb3AsXG4gIHVubmVzdFIsXG4gIGlkZW50aXR5LFxuICB1bmlxUixcbiAgaW5BcnJheSxcbiAgcmVtb3ZlRnJvbSxcbiAgUmF3UGFyYW1zLFxuICBQYXRoTm9kZSxcbiAgU3RhdGVPck5hbWUsXG4gIFN0YXRlU2VydmljZSxcbiAgU3RhdGVEZWNsYXJhdGlvbixcbiAgVUlSb3V0ZXIsXG59IGZyb20gJ0B1aXJvdXRlci9jb3JlJztcbmltcG9ydCB7IFVJVmlld0RhdGEgfSBmcm9tICcuL3ZpZXdEaXJlY3RpdmUnO1xuXG4vKiogQGhpZGRlbiBVc2VkIGZvciB0eXBlZG9jICovXG5leHBvcnQgaW50ZXJmYWNlIG5nMV9kaXJlY3RpdmUge30gLy8gdHNsaW50OmRpc2FibGUtbGluZTpjbGFzcy1uYW1lXG5cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBwYXJzZVN0YXRlUmVmKHJlZjogc3RyaW5nKSB7XG4gIGxldCBwYXJzZWQ7XG4gIGNvbnN0IHBhcmFtc09ubHkgPSByZWYubWF0Y2goL15cXHMqKHtbXn1dKn0pXFxzKiQvKTtcbiAgaWYgKHBhcmFtc09ubHkpIHJlZiA9ICcoJyArIHBhcmFtc09ubHlbMV0gKyAnKSc7XG5cbiAgcGFyc2VkID0gcmVmLnJlcGxhY2UoL1xcbi9nLCAnICcpLm1hdGNoKC9eXFxzKihbXihdKj8pXFxzKihcXCgoLiopXFwpKT9cXHMqJC8pO1xuICBpZiAoIXBhcnNlZCB8fCBwYXJzZWQubGVuZ3RoICE9PSA0KSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0YXRlIHJlZiAnXCIgKyByZWYgKyBcIidcIik7XG4gIHJldHVybiB7IHN0YXRlOiBwYXJzZWRbMV0gfHwgbnVsbCwgcGFyYW1FeHByOiBwYXJzZWRbM10gfHwgbnVsbCB9O1xufVxuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gc3RhdGVDb250ZXh0KGVsOiBJQXVnbWVudGVkSlF1ZXJ5KSB7XG4gIGNvbnN0ICR1aVZpZXc6IFVJVmlld0RhdGEgPSAoZWwucGFyZW50KCkgYXMgSUF1Z21lbnRlZEpRdWVyeSkuaW5oZXJpdGVkRGF0YSgnJHVpVmlldycpO1xuICBjb25zdCBwYXRoOiBQYXRoTm9kZVtdID0gcGFyc2UoJyRjZmcucGF0aCcpKCR1aVZpZXcpO1xuICByZXR1cm4gcGF0aCA/IHRhaWwocGF0aCkuc3RhdGUubmFtZSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NlZERlZigkc3RhdGU6IFN0YXRlU2VydmljZSwgJGVsZW1lbnQ6IElBdWdtZW50ZWRKUXVlcnksIGRlZjogRGVmKTogRGVmIHtcbiAgY29uc3QgdWlTdGF0ZSA9IGRlZi51aVN0YXRlIHx8ICRzdGF0ZS5jdXJyZW50Lm5hbWU7XG4gIGNvbnN0IHVpU3RhdGVPcHRzID0gZXh0ZW5kKGRlZmF1bHRPcHRzKCRlbGVtZW50LCAkc3RhdGUpLCBkZWYudWlTdGF0ZU9wdHMgfHwge30pO1xuICBjb25zdCBocmVmID0gJHN0YXRlLmhyZWYodWlTdGF0ZSwgZGVmLnVpU3RhdGVQYXJhbXMsIHVpU3RhdGVPcHRzKTtcbiAgcmV0dXJuIHsgdWlTdGF0ZSwgdWlTdGF0ZVBhcmFtczogZGVmLnVpU3RhdGVQYXJhbXMsIHVpU3RhdGVPcHRzLCBocmVmIH07XG59XG5cbi8qKiBAaGlkZGVuICovXG5pbnRlcmZhY2UgVHlwZUluZm8ge1xuICBhdHRyOiBzdHJpbmc7XG4gIGlzQW5jaG9yOiBib29sZWFuO1xuICBjbGlja2FibGU6IGJvb2xlYW47XG59XG5cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBnZXRUeXBlSW5mbyhlbDogSUF1Z21lbnRlZEpRdWVyeSk6IFR5cGVJbmZvIHtcbiAgLy8gU1ZHQUVsZW1lbnQgZG9lcyBub3QgdXNlIHRoZSBocmVmIGF0dHJpYnV0ZSwgYnV0IHJhdGhlciB0aGUgJ3hsaW5rSHJlZicgYXR0cmlidXRlLlxuICBjb25zdCBpc1N2ZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlbC5wcm9wKCdocmVmJykpID09PSAnW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ10nO1xuICBjb25zdCBpc0Zvcm0gPSBlbFswXS5ub2RlTmFtZSA9PT0gJ0ZPUk0nO1xuXG4gIHJldHVybiB7XG4gICAgYXR0cjogaXNGb3JtID8gJ2FjdGlvbicgOiBpc1N2ZyA/ICd4bGluazpocmVmJyA6ICdocmVmJyxcbiAgICBpc0FuY2hvcjogZWwucHJvcCgndGFnTmFtZScpLnRvVXBwZXJDYXNlKCkgPT09ICdBJyxcbiAgICBjbGlja2FibGU6ICFpc0Zvcm0sXG4gIH07XG59XG5cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBjbGlja0hvb2soXG4gIGVsOiBJQXVnbWVudGVkSlF1ZXJ5LFxuICAkc3RhdGU6IFN0YXRlU2VydmljZSxcbiAgJHRpbWVvdXQ6IElUaW1lb3V0U2VydmljZSxcbiAgdHlwZTogVHlwZUluZm8sXG4gIGdldERlZjogKCkgPT4gRGVmXG4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGU6IEpRdWVyeU1vdXNlRXZlbnRPYmplY3QpIHtcbiAgICBjb25zdCBidXR0b24gPSBlLndoaWNoIHx8IGUuYnV0dG9uLFxuICAgICAgdGFyZ2V0ID0gZ2V0RGVmKCk7XG5cbiAgICBpZiAoIShidXR0b24gPiAxIHx8IGUuY3RybEtleSB8fCBlLm1ldGFLZXkgfHwgZS5zaGlmdEtleSB8fCBlbC5hdHRyKCd0YXJnZXQnKSkpIHtcbiAgICAgIC8vIEhBQ0s6IFRoaXMgaXMgdG8gYWxsb3cgbmctY2xpY2tzIHRvIGJlIHByb2Nlc3NlZCBiZWZvcmUgdGhlIHRyYW5zaXRpb24gaXMgaW5pdGlhdGVkOlxuICAgICAgY29uc3QgdHJhbnNpdGlvbiA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIWVsLmF0dHIoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgICAkc3RhdGUuZ28odGFyZ2V0LnVpU3RhdGUsIHRhcmdldC51aVN0YXRlUGFyYW1zLCB0YXJnZXQudWlTdGF0ZU9wdHMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgLy8gaWYgdGhlIHN0YXRlIGhhcyBubyBVUkwsIGlnbm9yZSBvbmUgcHJldmVudERlZmF1bHQgZnJvbSB0aGUgPGE+IGRpcmVjdGl2ZS5cbiAgICAgIGxldCBpZ25vcmVQcmV2ZW50RGVmYXVsdENvdW50ID0gdHlwZS5pc0FuY2hvciAmJiAhdGFyZ2V0LmhyZWYgPyAxIDogMDtcblxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaWdub3JlUHJldmVudERlZmF1bHRDb3VudC0tIDw9IDApICR0aW1lb3V0LmNhbmNlbCh0cmFuc2l0aW9uKTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufVxuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gZGVmYXVsdE9wdHMoZWw6IElBdWdtZW50ZWRKUXVlcnksICRzdGF0ZTogU3RhdGVTZXJ2aWNlKSB7XG4gIHJldHVybiB7XG4gICAgcmVsYXRpdmU6IHN0YXRlQ29udGV4dChlbCkgfHwgJHN0YXRlLiRjdXJyZW50LFxuICAgIGluaGVyaXQ6IHRydWUsXG4gICAgc291cmNlOiAnc3JlZicsXG4gIH07XG59XG5cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBiaW5kRXZlbnRzKGVsZW1lbnQ6IElBdWdtZW50ZWRKUXVlcnksIHNjb3BlOiBJU2NvcGUsIGhvb2tGbjogRXZlbnRMaXN0ZW5lciwgdWlTdGF0ZU9wdHM6IGFueSk6IHZvaWQge1xuICBsZXQgZXZlbnRzO1xuXG4gIGlmICh1aVN0YXRlT3B0cykge1xuICAgIGV2ZW50cyA9IHVpU3RhdGVPcHRzLmV2ZW50cztcbiAgfVxuXG4gIGlmICghaXNBcnJheShldmVudHMpKSB7XG4gICAgZXZlbnRzID0gWydjbGljayddO1xuICB9XG5cbiAgY29uc3Qgb24gPSBlbGVtZW50Lm9uID8gJ29uJyA6ICdiaW5kJztcbiAgZm9yIChjb25zdCBldmVudCBvZiBldmVudHMpIHtcbiAgICBlbGVtZW50W29uXShldmVudCwgaG9va0ZuKTtcbiAgfVxuXG4gIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBvZmYgPSBlbGVtZW50Lm9mZiA/ICdvZmYnIDogJ3VuYmluZCc7XG4gICAgZm9yIChjb25zdCBldmVudCBvZiBldmVudHMpIHtcbiAgICAgIGVsZW1lbnRbb2ZmXShldmVudCwgaG9va0ZuIGFzIGFueSk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBgdWktc3JlZmA6IEEgZGlyZWN0aXZlIGZvciBsaW5raW5nIHRvIGEgc3RhdGVcbiAqXG4gKiBBIGRpcmVjdGl2ZSB3aGljaCBsaW5rcyB0byBhIHN0YXRlIChhbmQgb3B0aW9uYWxseSwgcGFyYW1ldGVycykuXG4gKiBXaGVuIGNsaWNrZWQsIHRoaXMgZGlyZWN0aXZlIGFjdGl2YXRlcyB0aGUgbGlua2VkIHN0YXRlIHdpdGggdGhlIHN1cHBsaWVkIHBhcmFtZXRlciB2YWx1ZXMuXG4gKlxuICogIyMjIExpbmtlZCBTdGF0ZVxuICogVGhlIGF0dHJpYnV0ZSB2YWx1ZSBvZiB0aGUgYHVpLXNyZWZgIGlzIHRoZSBuYW1lIG9mIHRoZSBzdGF0ZSB0byBsaW5rIHRvLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIFRoaXMgd2lsbCBhY3RpdmF0ZSB0aGUgYGhvbWVgIHN0YXRlIHdoZW4gdGhlIGxpbmsgaXMgY2xpY2tlZC5cbiAqIGBgYGh0bWxcbiAqIDxhIHVpLXNyZWY9XCJob21lXCI+SG9tZTwvYT5cbiAqIGBgYFxuICpcbiAqICMjIyBSZWxhdGl2ZSBMaW5rc1xuICogWW91IGNhbiBhbHNvIHVzZSByZWxhdGl2ZSBzdGF0ZSBwYXRocyB3aXRoaW4gYHVpLXNyZWZgLCBqdXN0IGxpa2UgYSByZWxhdGl2ZSBwYXRoIHBhc3NlZCB0byBgJHN0YXRlLmdvKClgIChbW1N0YXRlU2VydmljZS5nb11dKS5cbiAqIFlvdSBqdXN0IG5lZWQgdG8gYmUgYXdhcmUgdGhhdCB0aGUgcGF0aCBpcyByZWxhdGl2ZSB0byB0aGUgc3RhdGUgdGhhdCAqY3JlYXRlZCogdGhlIGxpbmsuXG4gKiBUaGlzIGFsbG93cyBhIHN0YXRlIHRvIGNyZWF0ZSBhIHJlbGF0aXZlIGB1aS1zcmVmYCB3aGljaCBhbHdheXMgdGFyZ2V0cyB0aGUgc2FtZSBkZXN0aW5hdGlvbi5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBCb3RoIHRoZXNlIGxpbmtzIGFyZSByZWxhdGl2ZSB0byB0aGUgcGFyZW50IHN0YXRlLCBldmVuIHdoZW4gYSBjaGlsZCBzdGF0ZSBpcyBjdXJyZW50bHkgYWN0aXZlLlxuICogYGBgaHRtbFxuICogPGEgdWktc3JlZj1cIi5jaGlsZDFcIj5jaGlsZCAxIHN0YXRlPC9hPlxuICogPGEgdWktc3JlZj1cIi5jaGlsZDJcIj5jaGlsZCAyIHN0YXRlPC9hPlxuICogYGBgXG4gKlxuICogVGhpcyBsaW5rIGFjdGl2YXRlcyB0aGUgcGFyZW50IHN0YXRlLlxuICogYGBgaHRtbFxuICogPGEgdWktc3JlZj1cIl5cIj5SZXR1cm48L2E+XG4gKiBgYGBcbiAqXG4gKiAjIyMgaHJlZnNcbiAqIElmIHRoZSBsaW5rZWQgc3RhdGUgaGFzIGEgVVJMLCB0aGUgZGlyZWN0aXZlIHdpbGwgYXV0b21hdGljYWxseSBnZW5lcmF0ZSBhbmRcbiAqIHVwZGF0ZSB0aGUgYGhyZWZgIGF0dHJpYnV0ZSAodXNpbmcgdGhlIFtbU3RhdGVTZXJ2aWNlLmhyZWZdXSAgbWV0aG9kKS5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBBc3N1bWluZyB0aGUgYHVzZXJzYCBzdGF0ZSBoYXMgYSB1cmwgb2YgYC91c2Vycy9gXG4gKiBgYGBodG1sXG4gKiA8YSB1aS1zcmVmPVwidXNlcnNcIiBocmVmPVwiL3VzZXJzL1wiPlVzZXJzPC9hPlxuICogYGBgXG4gKlxuICogIyMjIFBhcmFtZXRlciBWYWx1ZXNcbiAqIEluIGFkZGl0aW9uIHRvIHRoZSBzdGF0ZSBuYW1lLCBhIGB1aS1zcmVmYCBjYW4gaW5jbHVkZSBwYXJhbWV0ZXIgdmFsdWVzIHdoaWNoIGFyZSBhcHBsaWVkIHdoZW4gYWN0aXZhdGluZyB0aGUgc3RhdGUuXG4gKiBQYXJhbSB2YWx1ZXMgY2FuIGJlIHByb3ZpZGVkIGluIHRoZSBgdWktc3JlZmAgdmFsdWUgYWZ0ZXIgdGhlIHN0YXRlIG5hbWUsIGVuY2xvc2VkIGJ5IHBhcmVudGhlc2VzLlxuICogVGhlIGNvbnRlbnQgaW5zaWRlIHRoZSBwYXJlbnRoZXNlcyBpcyBhbiBleHByZXNzaW9uLCBldmFsdWF0ZWQgdG8gdGhlIHBhcmFtZXRlciB2YWx1ZXMuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogVGhpcyBleGFtcGxlIHJlbmRlcnMgYSBsaXN0IG9mIGxpbmtzIHRvIHVzZXJzLlxuICogVGhlIHN0YXRlJ3MgYHVzZXJJZGAgcGFyYW1ldGVyIHZhbHVlIGNvbWVzIGZyb20gZWFjaCB1c2VyJ3MgYHVzZXIuaWRgIHByb3BlcnR5LlxuICogYGBgaHRtbFxuICogPGxpIG5nLXJlcGVhdD1cInVzZXIgaW4gdXNlcnNcIj5cbiAqICAgPGEgdWktc3JlZj1cInVzZXJzLmRldGFpbCh7IHVzZXJJZDogdXNlci5pZCB9KVwiPnt7IHVzZXIuZGlzcGxheU5hbWUgfX08L2E+XG4gKiA8L2xpPlxuICogYGBgXG4gKlxuICogTm90ZTpcbiAqIFRoZSBwYXJhbWV0ZXIgdmFsdWVzIGV4cHJlc3Npb24gaXMgYCR3YXRjaGBlZCBmb3IgdXBkYXRlcy5cbiAqXG4gKiAjIyMgVHJhbnNpdGlvbiBPcHRpb25zXG4gKiBZb3UgY2FuIHNwZWNpZnkgW1tUcmFuc2l0aW9uT3B0aW9uc11dIHRvIHBhc3MgdG8gW1tTdGF0ZVNlcnZpY2UuZ29dXSBieSB1c2luZyB0aGUgYHVpLXNyZWYtb3B0c2AgYXR0cmlidXRlLlxuICogT3B0aW9ucyBhcmUgcmVzdHJpY3RlZCB0byBgbG9jYXRpb25gLCBgaW5oZXJpdGAsIGFuZCBgcmVsb2FkYC5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBodG1sXG4gKiA8YSB1aS1zcmVmPVwiaG9tZVwiIHVpLXNyZWYtb3B0cz1cInsgcmVsb2FkOiB0cnVlIH1cIj5Ib21lPC9hPlxuICogYGBgXG4gKlxuICogIyMjIE90aGVyIERPTSBFdmVudHNcbiAqXG4gKiBZb3UgY2FuIGFsc28gY3VzdG9taXplIHdoaWNoIERPTSBldmVudHMgdG8gcmVzcG9uZCB0byAoaW5zdGVhZCBvZiBgY2xpY2tgKSBieVxuICogcHJvdmlkaW5nIGFuIGBldmVudHNgIGFycmF5IGluIHRoZSBgdWktc3JlZi1vcHRzYCBhdHRyaWJ1dGUuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBgaHRtbFxuICogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdWktc3JlZj1cImNvbnRhY3RzXCIgdWktc3JlZi1vcHRzPVwieyBldmVudHM6IFsnY2hhbmdlJywgJ2JsdXInXSB9XCI+XG4gKiBgYGBcbiAqXG4gKiAjIyMgSGlnaGxpZ2h0aW5nIHRoZSBhY3RpdmUgbGlua1xuICogVGhpcyBkaXJlY3RpdmUgY2FuIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBbW3VpU3JlZkFjdGl2ZV1dIHRvIGhpZ2hsaWdodCB0aGUgYWN0aXZlIGxpbmsuXG4gKlxuICogIyMjIEV4YW1wbGVzXG4gKiBJZiB5b3UgaGF2ZSB0aGUgZm9sbG93aW5nIHRlbXBsYXRlOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxhIHVpLXNyZWY9XCJob21lXCI+SG9tZTwvYT5cbiAqIDxhIHVpLXNyZWY9XCJhYm91dFwiPkFib3V0PC9hPlxuICogPGEgdWktc3JlZj1cIntwYWdlOiAyfVwiPk5leHQgcGFnZTwvYT5cbiAqXG4gKiA8dWw+XG4gKiAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gY29udGFjdHNcIj5cbiAqICAgICAgICAgPGEgdWktc3JlZj1cImNvbnRhY3RzLmRldGFpbCh7IGlkOiBjb250YWN0LmlkIH0pXCI+e3sgY29udGFjdC5uYW1lIH19PC9hPlxuICogICAgIDwvbGk+XG4gKiA8L3VsPlxuICogYGBgXG4gKlxuICogVGhlbiAoYXNzdW1pbmcgdGhlIGN1cnJlbnQgc3RhdGUgaXMgYGNvbnRhY3RzYCkgdGhlIHJlbmRlcmVkIGh0bWwgaW5jbHVkaW5nIGhyZWZzIHdvdWxkIGJlOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxhIGhyZWY9XCIjL2hvbWVcIiB1aS1zcmVmPVwiaG9tZVwiPkhvbWU8L2E+XG4gKiA8YSBocmVmPVwiIy9hYm91dFwiIHVpLXNyZWY9XCJhYm91dFwiPkFib3V0PC9hPlxuICogPGEgaHJlZj1cIiMvY29udGFjdHM/cGFnZT0yXCIgdWktc3JlZj1cIntwYWdlOiAyfVwiPk5leHQgcGFnZTwvYT5cbiAqXG4gKiA8dWw+XG4gKiAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gY29udGFjdHNcIj5cbiAqICAgICAgICAgPGEgaHJlZj1cIiMvY29udGFjdHMvMVwiIHVpLXNyZWY9XCJjb250YWN0cy5kZXRhaWwoeyBpZDogY29udGFjdC5pZCB9KVwiPkpvZTwvYT5cbiAqICAgICA8L2xpPlxuICogICAgIDxsaSBuZy1yZXBlYXQ9XCJjb250YWN0IGluIGNvbnRhY3RzXCI+XG4gKiAgICAgICAgIDxhIGhyZWY9XCIjL2NvbnRhY3RzLzJcIiB1aS1zcmVmPVwiY29udGFjdHMuZGV0YWlsKHsgaWQ6IGNvbnRhY3QuaWQgfSlcIj5BbGljZTwvYT5cbiAqICAgICA8L2xpPlxuICogICAgIDxsaSBuZy1yZXBlYXQ9XCJjb250YWN0IGluIGNvbnRhY3RzXCI+XG4gKiAgICAgICAgIDxhIGhyZWY9XCIjL2NvbnRhY3RzLzNcIiB1aS1zcmVmPVwiY29udGFjdHMuZGV0YWlsKHsgaWQ6IGNvbnRhY3QuaWQgfSlcIj5Cb2I8L2E+XG4gKiAgICAgPC9saT5cbiAqIDwvdWw+XG4gKlxuICogPGEgaHJlZj1cIiMvaG9tZVwiIHVpLXNyZWY9XCJob21lXCIgdWktc3JlZi1vcHRzPVwie3JlbG9hZDogdHJ1ZX1cIj5Ib21lPC9hPlxuICogYGBgXG4gKlxuICogIyMjIE5vdGVzXG4gKlxuICogLSBZb3UgY2FuIHVzZSBgdWktc3JlZmAgdG8gY2hhbmdlICoqb25seSB0aGUgcGFyYW1ldGVyIHZhbHVlcyoqIGJ5IG9taXR0aW5nIHRoZSBzdGF0ZSBuYW1lIGFuZCBwYXJlbnRoZXNlcy5cbiAqICMjIyMgRXhhbXBsZTpcbiAqIFNldHMgdGhlIGBsYW5nYCBwYXJhbWV0ZXIgdG8gYGVuYCBhbmQgcmVtYWlucyBvbiB0aGUgc2FtZSBzdGF0ZS5cbiAqXG4gKiBgYGBodG1sXG4gKiA8YSB1aS1zcmVmPVwieyBsYW5nOiAnZW4nIH1cIj5FbmdsaXNoPC9hPlxuICogYGBgXG4gKlxuICogLSBBIG1pZGRsZS1jbGljaywgcmlnaHQtY2xpY2ssIG9yIGN0cmwtY2xpY2sgaXMgaGFuZGxlZCAobmF0aXZlbHkpIGJ5IHRoZSBicm93c2VyIHRvIG9wZW4gdGhlIGhyZWYgaW4gYSBuZXcgd2luZG93LCBmb3IgZXhhbXBsZS5cbiAqXG4gKiAtIFVubGlrZSB0aGUgcGFyYW1ldGVyIHZhbHVlcyBleHByZXNzaW9uLCB0aGUgc3RhdGUgbmFtZSBpcyBub3QgYCR3YXRjaGBlZCAoZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMpLlxuICogSWYgeW91IG5lZWQgdG8gZHluYW1pY2FsbHkgdXBkYXRlIHRoZSBzdGF0ZSBiZWluZyBsaW5rZWQgdG8sIHVzZSB0aGUgZnVsbHkgZHluYW1pYyBbW3VpU3RhdGVdXSBkaXJlY3RpdmUuXG4gKi9cbmxldCB1aVNyZWZEaXJlY3RpdmU6IG5nMV9kaXJlY3RpdmU7XG51aVNyZWZEaXJlY3RpdmUgPSBbXG4gICckdWlSb3V0ZXInLFxuICAnJHRpbWVvdXQnLFxuICBmdW5jdGlvbiAkU3RhdGVSZWZEaXJlY3RpdmUoJHVpUm91dGVyOiBVSVJvdXRlciwgJHRpbWVvdXQ6IElUaW1lb3V0U2VydmljZSkge1xuICAgIGNvbnN0ICRzdGF0ZSA9ICR1aVJvdXRlci5zdGF0ZVNlcnZpY2U7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHJlcXVpcmU6IFsnP151aVNyZWZBY3RpdmUnLCAnP151aVNyZWZBY3RpdmVFcSddLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGU6IElTY29wZSwgZWxlbWVudDogSUF1Z21lbnRlZEpRdWVyeSwgYXR0cnM6IGFueSwgdWlTcmVmQWN0aXZlOiBhbnkpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IGdldFR5cGVJbmZvKGVsZW1lbnQpO1xuICAgICAgICBjb25zdCBhY3RpdmUgPSB1aVNyZWZBY3RpdmVbMV0gfHwgdWlTcmVmQWN0aXZlWzBdO1xuICAgICAgICBsZXQgdW5saW5rSW5mb0ZuOiBGdW5jdGlvbiA9IG51bGw7XG4gICAgICAgIGxldCBob29rRm47XG5cbiAgICAgICAgY29uc3QgcmF3RGVmID0ge30gYXMgRGVmO1xuICAgICAgICBjb25zdCBnZXREZWYgPSAoKSA9PiBwcm9jZXNzZWREZWYoJHN0YXRlLCBlbGVtZW50LCByYXdEZWYpO1xuXG4gICAgICAgIGNvbnN0IHJlZiA9IHBhcnNlU3RhdGVSZWYoYXR0cnMudWlTcmVmKTtcbiAgICAgICAgcmF3RGVmLnVpU3RhdGUgPSByZWYuc3RhdGU7XG4gICAgICAgIHJhd0RlZi51aVN0YXRlT3B0cyA9IGF0dHJzLnVpU3JlZk9wdHMgPyBzY29wZS4kZXZhbChhdHRycy51aVNyZWZPcHRzKSA6IHt9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICBjb25zdCBkZWYgPSBnZXREZWYoKTtcbiAgICAgICAgICBpZiAodW5saW5rSW5mb0ZuKSB1bmxpbmtJbmZvRm4oKTtcbiAgICAgICAgICBpZiAoYWN0aXZlKSB1bmxpbmtJbmZvRm4gPSBhY3RpdmUuJCRhZGRTdGF0ZUluZm8oZGVmLnVpU3RhdGUsIGRlZi51aVN0YXRlUGFyYW1zKTtcbiAgICAgICAgICBpZiAoZGVmLmhyZWYgIT0gbnVsbCkgYXR0cnMuJHNldCh0eXBlLmF0dHIsIGRlZi5ocmVmKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZWYucGFyYW1FeHByKSB7XG4gICAgICAgICAgc2NvcGUuJHdhdGNoKFxuICAgICAgICAgICAgcmVmLnBhcmFtRXhwcixcbiAgICAgICAgICAgIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgICByYXdEZWYudWlTdGF0ZVBhcmFtcyA9IGV4dGVuZCh7fSwgdmFsKTtcbiAgICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICk7XG4gICAgICAgICAgcmF3RGVmLnVpU3RhdGVQYXJhbXMgPSBleHRlbmQoe30sIHNjb3BlLiRldmFsKHJlZi5wYXJhbUV4cHIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZSgpO1xuXG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCA8YW55PiR1aVJvdXRlci5zdGF0ZVJlZ2lzdHJ5Lm9uU3RhdGVzQ2hhbmdlZCh1cGRhdGUpKTtcbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIDxhbnk+JHVpUm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLm9uU3VjY2Vzcyh7fSwgdXBkYXRlKSk7XG5cbiAgICAgICAgaWYgKCF0eXBlLmNsaWNrYWJsZSkgcmV0dXJuO1xuICAgICAgICBob29rRm4gPSBjbGlja0hvb2soZWxlbWVudCwgJHN0YXRlLCAkdGltZW91dCwgdHlwZSwgZ2V0RGVmKTtcbiAgICAgICAgYmluZEV2ZW50cyhlbGVtZW50LCBzY29wZSwgaG9va0ZuLCByYXdEZWYudWlTdGF0ZU9wdHMpO1xuICAgICAgfSxcbiAgICB9O1xuICB9LFxuXTtcblxuLyoqXG4gKiBgdWktc3RhdGVgOiBBIGZ1bGx5IGR5bmFtaWMgZGlyZWN0aXZlIGZvciBsaW5raW5nIHRvIGEgc3RhdGVcbiAqXG4gKiBBIGRpcmVjdGl2ZSB3aGljaCBsaW5rcyB0byBhIHN0YXRlIChhbmQgb3B0aW9uYWxseSwgcGFyYW1ldGVycykuXG4gKiBXaGVuIGNsaWNrZWQsIHRoaXMgZGlyZWN0aXZlIGFjdGl2YXRlcyB0aGUgbGlua2VkIHN0YXRlIHdpdGggdGhlIHN1cHBsaWVkIHBhcmFtZXRlciB2YWx1ZXMuXG4gKlxuICogKipUaGlzIGRpcmVjdGl2ZSBpcyB2ZXJ5IHNpbWlsYXIgdG8gW1t1aVNyZWZdXSwgYnV0IGl0IGAkb2JzZXJ2ZWBzIGFuZCBgJHdhdGNoYGVzL2V2YWx1YXRlcyBhbGwgaXRzIGlucHV0cy4qKlxuICpcbiAqIEEgZGlyZWN0aXZlIHdoaWNoIGxpbmtzIHRvIGEgc3RhdGUgKGFuZCBvcHRpb25hbGx5LCBwYXJhbWV0ZXJzKS5cbiAqIFdoZW4gY2xpY2tlZCwgdGhpcyBkaXJlY3RpdmUgYWN0aXZhdGVzIHRoZSBsaW5rZWQgc3RhdGUgd2l0aCB0aGUgc3VwcGxpZWQgcGFyYW1ldGVyIHZhbHVlcy5cbiAqXG4gKiAjIyMgTGlua2VkIFN0YXRlXG4gKiBUaGUgYXR0cmlidXRlIHZhbHVlIG9mIGB1aS1zdGF0ZWAgaXMgYW4gZXhwcmVzc2lvbiB3aGljaCBpcyBgJHdhdGNoYGVkIGFuZCBldmFsdWF0ZWQgYXMgdGhlIHN0YXRlIHRvIGxpbmsgdG8uXG4gKiAqKlRoaXMgaXMgaW4gY29udHJhc3Qgd2l0aCBgdWktc3JlZmAsIHdoaWNoIHRha2VzIGEgc3RhdGUgbmFtZSBhcyBhIHN0cmluZyBsaXRlcmFsLioqXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogQ3JlYXRlIGEgbGlzdCBvZiBsaW5rcy5cbiAqIGBgYGh0bWxcbiAqIDxsaSBuZy1yZXBlYXQ9XCJsaW5rIGluIG5hdmxpbmtzXCI+XG4gKiAgIDxhIHVpLXN0YXRlPVwibGluay5zdGF0ZVwiPnt7IGxpbmsuZGlzcGxheU5hbWUgfX08L2E+XG4gKiA8L2xpPlxuICogYGBgXG4gKlxuICogIyMjIFJlbGF0aXZlIExpbmtzXG4gKiBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSByZWxhdGl2ZSBwYXRoLCBpdCBpcyBwcm9jZXNzZWQgbGlrZSBbW3VpU3JlZl1dLlxuICogWW91IGp1c3QgbmVlZCB0byBiZSBhd2FyZSB0aGF0IHRoZSBwYXRoIGlzIHJlbGF0aXZlIHRvIHRoZSBzdGF0ZSB0aGF0ICpjcmVhdGVkKiB0aGUgbGluay5cbiAqIFRoaXMgYWxsb3dzIGEgc3RhdGUgdG8gY3JlYXRlIHJlbGF0aXZlIGB1aS1zdGF0ZWAgd2hpY2ggYWx3YXlzIHRhcmdldHMgdGhlIHNhbWUgZGVzdGluYXRpb24uXG4gKlxuICogIyMjIGhyZWZzXG4gKiBJZiB0aGUgbGlua2VkIHN0YXRlIGhhcyBhIFVSTCwgdGhlIGRpcmVjdGl2ZSB3aWxsIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGUgYW5kXG4gKiB1cGRhdGUgdGhlIGBocmVmYCBhdHRyaWJ1dGUgKHVzaW5nIHRoZSBbW1N0YXRlU2VydmljZS5ocmVmXV0gIG1ldGhvZCkuXG4gKlxuICogIyMjIFBhcmFtZXRlciBWYWx1ZXNcbiAqIEluIGFkZGl0aW9uIHRvIHRoZSBzdGF0ZSBuYW1lIGV4cHJlc3Npb24sIGEgYHVpLXN0YXRlYCBjYW4gaW5jbHVkZSBwYXJhbWV0ZXIgdmFsdWVzIHdoaWNoIGFyZSBhcHBsaWVkIHdoZW4gYWN0aXZhdGluZyB0aGUgc3RhdGUuXG4gKiBQYXJhbSB2YWx1ZXMgc2hvdWxkIGJlIHByb3ZpZGVkIHVzaW5nIHRoZSBgdWktc3RhdGUtcGFyYW1zYCBhdHRyaWJ1dGUuXG4gKiBUaGUgYHVpLXN0YXRlLXBhcmFtc2AgYXR0cmlidXRlIHZhbHVlIGlzIGAkd2F0Y2hgZWQgYW5kIGV2YWx1YXRlZCBhcyBhbiBleHByZXNzaW9uLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIFRoaXMgZXhhbXBsZSByZW5kZXJzIGEgbGlzdCBvZiBsaW5rcyB3aXRoIHBhcmFtIHZhbHVlcy5cbiAqIFRoZSBzdGF0ZSdzIGB1c2VySWRgIHBhcmFtZXRlciB2YWx1ZSBjb21lcyBmcm9tIGVhY2ggdXNlcidzIGB1c2VyLmlkYCBwcm9wZXJ0eS5cbiAqIGBgYGh0bWxcbiAqIDxsaSBuZy1yZXBlYXQ9XCJsaW5rIGluIG5hdmxpbmtzXCI+XG4gKiAgIDxhIHVpLXN0YXRlPVwibGluay5zdGF0ZVwiIHVpLXN0YXRlLXBhcmFtcz1cImxpbmsucGFyYW1zXCI+e3sgbGluay5kaXNwbGF5TmFtZSB9fTwvYT5cbiAqIDwvbGk+XG4gKiBgYGBcbiAqXG4gKiAjIyMgVHJhbnNpdGlvbiBPcHRpb25zXG4gKiBZb3UgY2FuIHNwZWNpZnkgW1tUcmFuc2l0aW9uT3B0aW9uc11dIHRvIHBhc3MgdG8gW1tTdGF0ZVNlcnZpY2UuZ29dXSBieSB1c2luZyB0aGUgYHVpLXN0YXRlLW9wdHNgIGF0dHJpYnV0ZS5cbiAqIE9wdGlvbnMgYXJlIHJlc3RyaWN0ZWQgdG8gYGxvY2F0aW9uYCwgYGluaGVyaXRgLCBhbmQgYHJlbG9hZGAuXG4gKiBUaGUgdmFsdWUgb2YgdGhlIGB1aS1zdGF0ZS1vcHRzYCBpcyBgJHdhdGNoYGVkIGFuZCBldmFsdWF0ZWQgYXMgYW4gZXhwcmVzc2lvbi5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBodG1sXG4gKiA8YSB1aS1zdGF0ZT1cInJldHVybnRvLnN0YXRlXCIgdWktc3RhdGUtb3B0cz1cInsgcmVsb2FkOiB0cnVlIH1cIj5Ib21lPC9hPlxuICogYGBgXG4gKlxuICogIyMjIE90aGVyIERPTSBFdmVudHNcbiAqXG4gKiBZb3UgY2FuIGFsc28gY3VzdG9taXplIHdoaWNoIERPTSBldmVudHMgdG8gcmVzcG9uZCB0byAoaW5zdGVhZCBvZiBgY2xpY2tgKSBieVxuICogcHJvdmlkaW5nIGFuIGBldmVudHNgIGFycmF5IGluIHRoZSBgdWktc3RhdGUtb3B0c2AgYXR0cmlidXRlLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGh0bWxcbiAqIDxpbnB1dCB0eXBlPVwidGV4dFwiIHVpLXN0YXRlPVwiY29udGFjdHNcIiB1aS1zdGF0ZS1vcHRzPVwieyBldmVudHM6IFsnY2hhbmdlJywgJ2JsdXInXSB9XCI+XG4gKiBgYGBcbiAqXG4gKiAjIyMgSGlnaGxpZ2h0aW5nIHRoZSBhY3RpdmUgbGlua1xuICogVGhpcyBkaXJlY3RpdmUgY2FuIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBbW3VpU3JlZkFjdGl2ZV1dIHRvIGhpZ2hsaWdodCB0aGUgYWN0aXZlIGxpbmsuXG4gKlxuICogIyMjIE5vdGVzXG4gKlxuICogLSBZb3UgY2FuIHVzZSBgdWktcGFyYW1zYCB0byBjaGFuZ2UgKipvbmx5IHRoZSBwYXJhbWV0ZXIgdmFsdWVzKiogYnkgb21pdHRpbmcgdGhlIHN0YXRlIG5hbWUgYW5kIHN1cHBseWluZyBvbmx5IGB1aS1zdGF0ZS1wYXJhbXNgLlxuICogICBIb3dldmVyLCBpdCBtaWdodCBiZSBzaW1wbGVyIHRvIHVzZSBbW3VpU3JlZl1dIHBhcmFtZXRlci1vbmx5IGxpbmtzLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIFNldHMgdGhlIGBsYW5nYCBwYXJhbWV0ZXIgdG8gYGVuYCBhbmQgcmVtYWlucyBvbiB0aGUgc2FtZSBzdGF0ZS5cbiAqXG4gKiBgYGBodG1sXG4gKiA8YSB1aS1zdGF0ZT1cIlwiIHVpLXN0YXRlLXBhcmFtcz1cInsgbGFuZzogJ2VuJyB9XCI+RW5nbGlzaDwvYT5cbiAqIGBgYFxuICpcbiAqIC0gQSBtaWRkbGUtY2xpY2ssIHJpZ2h0LWNsaWNrLCBvciBjdHJsLWNsaWNrIGlzIGhhbmRsZWQgKG5hdGl2ZWx5KSBieSB0aGUgYnJvd3NlciB0byBvcGVuIHRoZSBocmVmIGluIGEgbmV3IHdpbmRvdywgZm9yIGV4YW1wbGUuXG4gKiBgYGBcbiAqL1xubGV0IHVpU3RhdGVEaXJlY3RpdmU6IG5nMV9kaXJlY3RpdmU7XG51aVN0YXRlRGlyZWN0aXZlID0gW1xuICAnJHVpUm91dGVyJyxcbiAgJyR0aW1lb3V0JyxcbiAgZnVuY3Rpb24gJFN0YXRlUmVmRHluYW1pY0RpcmVjdGl2ZSgkdWlSb3V0ZXI6IFVJUm91dGVyLCAkdGltZW91dDogSVRpbWVvdXRTZXJ2aWNlKSB7XG4gICAgY29uc3QgJHN0YXRlID0gJHVpUm91dGVyLnN0YXRlU2VydmljZTtcblxuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcmVxdWlyZTogWyc/XnVpU3JlZkFjdGl2ZScsICc/XnVpU3JlZkFjdGl2ZUVxJ10sXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZTogSVNjb3BlLCBlbGVtZW50OiBJQXVnbWVudGVkSlF1ZXJ5LCBhdHRyczogYW55LCB1aVNyZWZBY3RpdmU6IGFueSkge1xuICAgICAgICBjb25zdCB0eXBlID0gZ2V0VHlwZUluZm8oZWxlbWVudCk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZSA9IHVpU3JlZkFjdGl2ZVsxXSB8fCB1aVNyZWZBY3RpdmVbMF07XG4gICAgICAgIGxldCB1bmxpbmtJbmZvRm46IEZ1bmN0aW9uID0gbnVsbDtcbiAgICAgICAgbGV0IGhvb2tGbjtcblxuICAgICAgICBjb25zdCByYXdEZWYgPSB7fSBhcyBEZWY7XG4gICAgICAgIGNvbnN0IGdldERlZiA9ICgpID0+IHByb2Nlc3NlZERlZigkc3RhdGUsIGVsZW1lbnQsIHJhd0RlZik7XG5cbiAgICAgICAgY29uc3QgaW5wdXRBdHRycyA9IFsndWlTdGF0ZScsICd1aVN0YXRlUGFyYW1zJywgJ3VpU3RhdGVPcHRzJ107XG4gICAgICAgIGNvbnN0IHdhdGNoRGVyZWdGbnMgPSBpbnB1dEF0dHJzLnJlZHVjZSgoYWNjLCBhdHRyKSA9PiAoKGFjY1thdHRyXSA9IG5vb3ApLCBhY2MpLCB7fSk7XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgICAgIGNvbnN0IGRlZiA9IGdldERlZigpO1xuICAgICAgICAgIGlmICh1bmxpbmtJbmZvRm4pIHVubGlua0luZm9GbigpO1xuICAgICAgICAgIGlmIChhY3RpdmUpIHVubGlua0luZm9GbiA9IGFjdGl2ZS4kJGFkZFN0YXRlSW5mbyhkZWYudWlTdGF0ZSwgZGVmLnVpU3RhdGVQYXJhbXMpO1xuICAgICAgICAgIGlmIChkZWYuaHJlZiAhPSBudWxsKSBhdHRycy4kc2V0KHR5cGUuYXR0ciwgZGVmLmhyZWYpO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5wdXRBdHRycy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgICByYXdEZWZbZmllbGRdID0gYXR0cnNbZmllbGRdID8gc2NvcGUuJGV2YWwoYXR0cnNbZmllbGRdKSA6IG51bGw7XG5cbiAgICAgICAgICBhdHRycy4kb2JzZXJ2ZShmaWVsZCwgZXhwciA9PiB7XG4gICAgICAgICAgICB3YXRjaERlcmVnRm5zW2ZpZWxkXSgpO1xuICAgICAgICAgICAgd2F0Y2hEZXJlZ0Zuc1tmaWVsZF0gPSBzY29wZS4kd2F0Y2goXG4gICAgICAgICAgICAgIGV4cHIsXG4gICAgICAgICAgICAgIG5ld3ZhbCA9PiB7XG4gICAgICAgICAgICAgICAgcmF3RGVmW2ZpZWxkXSA9IG5ld3ZhbDtcbiAgICAgICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdXBkYXRlKCk7XG5cbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIDxhbnk+JHVpUm91dGVyLnN0YXRlUmVnaXN0cnkub25TdGF0ZXNDaGFuZ2VkKHVwZGF0ZSkpO1xuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgPGFueT4kdWlSb3V0ZXIudHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCB1cGRhdGUpKTtcblxuICAgICAgICBpZiAoIXR5cGUuY2xpY2thYmxlKSByZXR1cm47XG4gICAgICAgIGhvb2tGbiA9IGNsaWNrSG9vayhlbGVtZW50LCAkc3RhdGUsICR0aW1lb3V0LCB0eXBlLCBnZXREZWYpO1xuICAgICAgICBiaW5kRXZlbnRzKGVsZW1lbnQsIHNjb3BlLCBob29rRm4sIHJhd0RlZi51aVN0YXRlT3B0cyk7XG4gICAgICB9LFxuICAgIH07XG4gIH0sXG5dO1xuXG4vKipcbiAqIGB1aS1zcmVmLWFjdGl2ZWAgYW5kIGB1aS1zcmVmLWFjdGl2ZS1lcWA6IEEgZGlyZWN0aXZlIHRoYXQgYWRkcyBhIENTUyBjbGFzcyB3aGVuIGEgYHVpLXNyZWZgIGlzIGFjdGl2ZVxuICpcbiAqIEEgZGlyZWN0aXZlIHdvcmtpbmcgYWxvbmdzaWRlIFtbdWlTcmVmXV0gYW5kIFtbdWlTdGF0ZV1dIHRvIGFkZCBjbGFzc2VzIHRvIGFuIGVsZW1lbnQgd2hlbiB0aGVcbiAqIHJlbGF0ZWQgZGlyZWN0aXZlJ3Mgc3RhdGUgaXMgYWN0aXZlIChhbmQgcmVtb3ZlIHRoZW0gd2hlbiBpdCBpcyBpbmFjdGl2ZSkuXG4gKlxuICogVGhlIHByaW1hcnkgdXNlLWNhc2UgaXMgdG8gaGlnaGxpZ2h0IHRoZSBhY3RpdmUgbGluayBpbiBuYXZpZ2F0aW9uIG1lbnVzLFxuICogZGlzdGluZ3Vpc2hpbmcgaXQgZnJvbSB0aGUgaW5hY3RpdmUgbWVudSBpdGVtcy5cbiAqXG4gKiAjIyMgTGlua2luZyB0byBhIGB1aS1zcmVmYCBvciBgdWktc3RhdGVgXG4gKiBgdWktc3JlZi1hY3RpdmVgIGNhbiBsaXZlIG9uIHRoZSBzYW1lIGVsZW1lbnQgYXMgYHVpLXNyZWZgL2B1aS1zdGF0ZWAsIG9yIGl0IGNhbiBiZSBvbiBhIHBhcmVudCBlbGVtZW50LlxuICogSWYgYSBgdWktc3JlZi1hY3RpdmVgIGlzIGEgcGFyZW50IHRvIG1vcmUgdGhhbiBvbmUgYHVpLXNyZWZgL2B1aS1zdGF0ZWAsIGl0IHdpbGwgYXBwbHkgdGhlIENTUyBjbGFzcyB3aGVuICoqYW55IG9mIHRoZSBsaW5rcyBhcmUgYWN0aXZlKiouXG4gKlxuICogIyMjIE1hdGNoaW5nXG4gKlxuICogVGhlIGB1aS1zcmVmLWFjdGl2ZWAgZGlyZWN0aXZlIGFwcGxpZXMgdGhlIENTUyBjbGFzcyB3aGVuIHRoZSBgdWktc3JlZmAvYHVpLXN0YXRlYCdzIHRhcmdldCBzdGF0ZSAqKm9yIGFueSBjaGlsZCBzdGF0ZSBpcyBhY3RpdmUqKi5cbiAqIFRoaXMgaXMgYSBcImZ1enp5IG1hdGNoXCIgd2hpY2ggdXNlcyBbW1N0YXRlU2VydmljZS5pbmNsdWRlc11dLlxuICpcbiAqIFRoZSBgdWktc3JlZi1hY3RpdmUtZXFgIGRpcmVjdGl2ZSBhcHBsaWVzIHRoZSBDU1MgY2xhc3Mgd2hlbiB0aGUgYHVpLXNyZWZgL2B1aS1zdGF0ZWAncyB0YXJnZXQgc3RhdGUgaXMgZGlyZWN0bHkgYWN0aXZlIChub3Qgd2hlbiBjaGlsZCBzdGF0ZXMgYXJlIGFjdGl2ZSkuXG4gKiBUaGlzIGlzIGFuIFwiZXhhY3QgbWF0Y2hcIiB3aGljaCB1c2VzIFtbU3RhdGVTZXJ2aWNlLmlzXV0uXG4gKlxuICogIyMjIFBhcmFtZXRlciB2YWx1ZXNcbiAqIElmIHRoZSBgdWktc3JlZmAvYHVpLXN0YXRlYCBpbmNsdWRlcyBwYXJhbWV0ZXIgdmFsdWVzLCB0aGUgY3VycmVudCBwYXJhbWV0ZXIgdmFsdWVzIG11c3QgbWF0Y2ggdGhlIGxpbmsncyB2YWx1ZXMgZm9yIHRoZSBsaW5rIHRvIGJlIGhpZ2hsaWdodGVkLlxuICogVGhpcyBhbGxvd3MgYSBsaXN0IG9mIGxpbmtzIHRvIHRoZSBzYW1lIHN0YXRlIHdpdGggZGlmZmVyZW50IHBhcmFtZXRlcnMgdG8gYmUgcmVuZGVyZWQsIGFuZCB0aGUgY29ycmVjdCBvbmUgaGlnaGxpZ2h0ZWQuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBgaHRtbFxuICogPGxpIG5nLXJlcGVhdD1cInVzZXIgaW4gdXNlcnNcIiB1aS1zcmVmLWFjdGl2ZT1cImFjdGl2ZVwiPlxuICogICA8YSB1aS1zcmVmPVwidXNlci5kZXRhaWxzKHsgdXNlcklkOiB1c2VyLmlkIH0pXCI+e3sgdXNlci5sYXN0TmFtZSB9fTwvYT5cbiAqIDwvbGk+XG4gKiBgYGBcbiAqXG4gKiAjIyMgRXhhbXBsZXNcbiAqXG4gKiBHaXZlbiB0aGUgZm9sbG93aW5nIHRlbXBsYXRlOlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBgaHRtbFxuICogPHVsPlxuICogICA8bGkgdWktc3JlZi1hY3RpdmU9XCJhY3RpdmVcIiBjbGFzcz1cIml0ZW1cIj5cbiAqICAgICA8YSBocmVmIHVpLXNyZWY9XCJhcHAudXNlcih7dXNlcjogJ2JpbGJvYmFnZ2lucyd9KVwiPkBiaWxib2JhZ2dpbnM8L2E+XG4gKiAgIDwvbGk+XG4gKiA8L3VsPlxuICogYGBgXG4gKlxuICogV2hlbiB0aGUgYXBwIHN0YXRlIGlzIGBhcHAudXNlcmAgKG9yIGFueSBjaGlsZCBzdGF0ZSksXG4gKiBhbmQgY29udGFpbnMgdGhlIHN0YXRlIHBhcmFtZXRlciBcInVzZXJcIiB3aXRoIHZhbHVlIFwiYmlsYm9iYWdnaW5zXCIsXG4gKiB0aGUgcmVzdWx0aW5nIEhUTUwgd2lsbCBhcHBlYXIgYXMgKG5vdGUgdGhlICdhY3RpdmUnIGNsYXNzKTpcbiAqXG4gKiBgYGBodG1sXG4gKiA8dWw+XG4gKiAgIDxsaSB1aS1zcmVmLWFjdGl2ZT1cImFjdGl2ZVwiIGNsYXNzPVwiaXRlbSBhY3RpdmVcIj5cbiAqICAgICA8YSB1aS1zcmVmPVwiYXBwLnVzZXIoe3VzZXI6ICdiaWxib2JhZ2dpbnMnfSlcIiBocmVmPVwiL3VzZXJzL2JpbGJvYmFnZ2luc1wiPkBiaWxib2JhZ2dpbnM8L2E+XG4gKiAgIDwvbGk+XG4gKiA8L3VsPlxuICogYGBgXG4gKlxuICogIyMjIEdsb2IgbW9kZVxuICpcbiAqIEl0IGlzIHBvc3NpYmxlIHRvIHBhc3MgYHVpLXNyZWYtYWN0aXZlYCBhbiBleHByZXNzaW9uIHRoYXQgZXZhbHVhdGVzIHRvIGFuIG9iamVjdC5cbiAqIFRoZSBvYmplY3RzIGtleXMgcmVwcmVzZW50IGFjdGl2ZSBjbGFzcyBuYW1lcyBhbmQgdmFsdWVzIHJlcHJlc2VudCB0aGUgcmVzcGVjdGl2ZSBzdGF0ZSBuYW1lcy9nbG9icy5cbiAqIGB1aS1zcmVmLWFjdGl2ZWAgd2lsbCBtYXRjaCBpZiB0aGUgY3VycmVudCBhY3RpdmUgc3RhdGUgKippbmNsdWRlcyoqIGFueSBvZlxuICogdGhlIHNwZWNpZmllZCBzdGF0ZSBuYW1lcy9nbG9icywgZXZlbiB0aGUgYWJzdHJhY3Qgb25lcy5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBHaXZlbiB0aGUgZm9sbG93aW5nIHRlbXBsYXRlLCB3aXRoIFwiYWRtaW5cIiBiZWluZyBhbiBhYnN0cmFjdCBzdGF0ZTpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgdWktc3JlZi1hY3RpdmU9XCJ7J2FjdGl2ZSc6ICdhZG1pbi4qKid9XCI+XG4gKiAgIDxhIHVpLXNyZWYtYWN0aXZlPVwiYWN0aXZlXCIgdWktc3JlZj1cImFkbWluLnJvbGVzXCI+Um9sZXM8L2E+XG4gKiA8L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEFycmF5cyBhcmUgYWxzbyBzdXBwb3J0ZWQgYXMgdmFsdWVzIGluIHRoZSBgbmdDbGFzc2AtbGlrZSBpbnRlcmZhY2UuXG4gKiBUaGlzIGFsbG93cyBtdWx0aXBsZSBzdGF0ZXMgdG8gYWRkIGBhY3RpdmVgIGNsYXNzLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIEdpdmVuIHRoZSBmb2xsb3dpbmcgdGVtcGxhdGUsIHdpdGggXCJhZG1pbi5yb2xlc1wiIGJlaW5nIHRoZSBjdXJyZW50IHN0YXRlLCB0aGUgY2xhc3Mgd2lsbCBiZSBhZGRlZCB0b286XG4gKiBgYGBodG1sXG4gKiA8ZGl2IHVpLXNyZWYtYWN0aXZlPVwieydhY3RpdmUnOiBbJ293bmVyLioqJywgJ2FkbWluLioqJ119XCI+XG4gKiAgIDxhIHVpLXNyZWYtYWN0aXZlPVwiYWN0aXZlXCIgdWktc3JlZj1cImFkbWluLnJvbGVzXCI+Um9sZXM8L2E+XG4gKiA8L2Rpdj5cbiAqIGBgYFxuICpcbiAqIFdoZW4gdGhlIGN1cnJlbnQgc3RhdGUgaXMgXCJhZG1pbi5yb2xlc1wiIHRoZSBcImFjdGl2ZVwiIGNsYXNzIHdpbGwgYmUgYXBwbGllZCB0byBib3RoIHRoZSBgPGRpdj5gIGFuZCBgPGE+YCBlbGVtZW50cy5cbiAqIEl0IGlzIGltcG9ydGFudCB0byBub3RlIHRoYXQgdGhlIHN0YXRlIG5hbWVzL2dsb2JzIHBhc3NlZCB0byBgdWktc3JlZi1hY3RpdmVgIG92ZXJyaWRlIGFueSBzdGF0ZSBwcm92aWRlZCBieSBhIGxpbmtlZCBgdWktc3JlZmAuXG4gKlxuICogIyMjIE5vdGVzOlxuICpcbiAqIC0gVGhlIGNsYXNzIG5hbWUgaXMgaW50ZXJwb2xhdGVkICoqb25jZSoqIGR1cmluZyB0aGUgZGlyZWN0aXZlcyBsaW5rIHRpbWUgKGFueSBmdXJ0aGVyIGNoYW5nZXMgdG8gdGhlXG4gKiBpbnRlcnBvbGF0ZWQgdmFsdWUgYXJlIGlnbm9yZWQpLlxuICpcbiAqIC0gTXVsdGlwbGUgY2xhc3NlcyBtYXkgYmUgc3BlY2lmaWVkIGluIGEgc3BhY2Utc2VwYXJhdGVkIGZvcm1hdDogYHVpLXNyZWYtYWN0aXZlPSdjbGFzczEgY2xhc3MyIGNsYXNzMydgXG4gKi9cbmxldCB1aVNyZWZBY3RpdmVEaXJlY3RpdmU6IG5nMV9kaXJlY3RpdmU7XG51aVNyZWZBY3RpdmVEaXJlY3RpdmUgPSBbXG4gICckc3RhdGUnLFxuICAnJHN0YXRlUGFyYW1zJyxcbiAgJyRpbnRlcnBvbGF0ZScsXG4gICckdWlSb3V0ZXInLFxuICBmdW5jdGlvbiAkU3RhdGVSZWZBY3RpdmVEaXJlY3RpdmUoXG4gICAgJHN0YXRlOiBTdGF0ZVNlcnZpY2UsXG4gICAgJHN0YXRlUGFyYW1zOiBPYmosXG4gICAgJGludGVycG9sYXRlOiBJSW50ZXJwb2xhdGVTZXJ2aWNlLFxuICAgICR1aVJvdXRlcjogVUlSb3V0ZXJcbiAgKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBjb250cm9sbGVyOiBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJGVsZW1lbnQnLFxuICAgICAgICAnJGF0dHJzJyxcbiAgICAgICAgZnVuY3Rpb24oJHNjb3BlOiBJU2NvcGUsICRlbGVtZW50OiBJQXVnbWVudGVkSlF1ZXJ5LCAkYXR0cnM6IGFueSkge1xuICAgICAgICAgIGxldCBzdGF0ZXM6IFN0YXRlRGF0YVtdID0gW107XG4gICAgICAgICAgbGV0IGFjdGl2ZUVxQ2xhc3M6IHN0cmluZztcbiAgICAgICAgICBsZXQgdWlTcmVmQWN0aXZlOiBhbnk7XG5cbiAgICAgICAgICAvLyBUaGVyZSBwcm9iYWJseSBpc24ndCBtdWNoIHBvaW50IGluICRvYnNlcnZpbmcgdGhpc1xuICAgICAgICAgIC8vIHVpU3JlZkFjdGl2ZSBhbmQgdWlTcmVmQWN0aXZlRXEgc2hhcmUgdGhlIHNhbWUgZGlyZWN0aXZlIG9iamVjdCB3aXRoIHNvbWVcbiAgICAgICAgICAvLyBzbGlnaHQgZGlmZmVyZW5jZSBpbiBsb2dpYyByb3V0aW5nXG4gICAgICAgICAgYWN0aXZlRXFDbGFzcyA9ICRpbnRlcnBvbGF0ZSgkYXR0cnMudWlTcmVmQWN0aXZlRXEgfHwgJycsIGZhbHNlKSgkc2NvcGUpO1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHVpU3JlZkFjdGl2ZSA9ICRzY29wZS4kZXZhbCgkYXR0cnMudWlTcmVmQWN0aXZlKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBEbyBub3RoaW5nLiB1aVNyZWZBY3RpdmUgaXMgbm90IGEgdmFsaWQgZXhwcmVzc2lvbi5cbiAgICAgICAgICAgIC8vIEZhbGwgYmFjayB0byB1c2luZyAkaW50ZXJwb2xhdGUgYmVsb3dcbiAgICAgICAgICB9XG4gICAgICAgICAgdWlTcmVmQWN0aXZlID0gdWlTcmVmQWN0aXZlIHx8ICRpbnRlcnBvbGF0ZSgkYXR0cnMudWlTcmVmQWN0aXZlIHx8ICcnLCBmYWxzZSkoJHNjb3BlKTtcbiAgICAgICAgICBzZXRTdGF0ZXNGcm9tRGVmaW5pdGlvbk9iamVjdCh1aVNyZWZBY3RpdmUpO1xuXG4gICAgICAgICAgLy8gQWxsb3cgdWlTcmVmIHRvIGNvbW11bmljYXRlIHdpdGggdWlTcmVmQWN0aXZlW0VxdWFsc11cbiAgICAgICAgICB0aGlzLiQkYWRkU3RhdGVJbmZvID0gZnVuY3Rpb24obmV3U3RhdGU6IHN0cmluZywgbmV3UGFyYW1zOiBPYmopIHtcbiAgICAgICAgICAgIC8vIHdlIGFscmVhZHkgZ290IGFuIGV4cGxpY2l0IHN0YXRlIHByb3ZpZGVkIGJ5IHVpLXNyZWYtYWN0aXZlLCBzbyB3ZVxuICAgICAgICAgICAgLy8gc2hhZG93IHRoZSBvbmUgdGhhdCBjb21lcyBmcm9tIHVpLXNyZWZcbiAgICAgICAgICAgIGlmIChpc09iamVjdCh1aVNyZWZBY3RpdmUpICYmIHN0YXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRlcmVnaXN0ZXIgPSBhZGRTdGF0ZShuZXdTdGF0ZSwgbmV3UGFyYW1zLCB1aVNyZWZBY3RpdmUpO1xuICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gZGVyZWdpc3RlcjtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgZnVuY3Rpb24gdXBkYXRlQWZ0ZXJUcmFuc2l0aW9uKHRyYW5zKSB7XG4gICAgICAgICAgICB0cmFucy5wcm9taXNlLnRoZW4odXBkYXRlLCBub29wKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBzZXR1cEV2ZW50TGlzdGVuZXJzKCkpO1xuICAgICAgICAgIGlmICgkdWlSb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uKSB7XG4gICAgICAgICAgICB1cGRhdGVBZnRlclRyYW5zaXRpb24oJHVpUm91dGVyLmdsb2JhbHMudHJhbnNpdGlvbik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gc2V0dXBFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlcmVnaXN0ZXJTdGF0ZXNDaGFuZ2VkTGlzdGVuZXIgPSAkdWlSb3V0ZXIuc3RhdGVSZWdpc3RyeS5vblN0YXRlc0NoYW5nZWQoaGFuZGxlU3RhdGVzQ2hhbmdlZCk7XG4gICAgICAgICAgICBjb25zdCBkZXJlZ2lzdGVyT25TdGFydExpc3RlbmVyID0gJHVpUm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnQoe30sIHVwZGF0ZUFmdGVyVHJhbnNpdGlvbik7XG4gICAgICAgICAgICBjb25zdCBkZXJlZ2lzdGVyU3RhdGVDaGFuZ2VTdWNjZXNzTGlzdGVuZXIgPSAkc2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgdXBkYXRlKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBjbGVhblVwKCkge1xuICAgICAgICAgICAgICBkZXJlZ2lzdGVyU3RhdGVzQ2hhbmdlZExpc3RlbmVyKCk7XG4gICAgICAgICAgICAgIGRlcmVnaXN0ZXJPblN0YXJ0TGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgZGVyZWdpc3RlclN0YXRlQ2hhbmdlU3VjY2Vzc0xpc3RlbmVyKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZVN0YXRlc0NoYW5nZWQoKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZXNGcm9tRGVmaW5pdGlvbk9iamVjdCh1aVNyZWZBY3RpdmUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZ1bmN0aW9uIHNldFN0YXRlc0Zyb21EZWZpbml0aW9uT2JqZWN0KHN0YXRlc0RlZmluaXRpb246IG9iamVjdCkge1xuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHN0YXRlc0RlZmluaXRpb24pKSB7XG4gICAgICAgICAgICAgIHN0YXRlcyA9IFtdO1xuICAgICAgICAgICAgICBmb3JFYWNoKHN0YXRlc0RlZmluaXRpb24sIGZ1bmN0aW9uKHN0YXRlT3JOYW1lOiBTdGF0ZU9yTmFtZSB8IEFycmF5PFN0YXRlT3JOYW1lPiwgYWN0aXZlQ2xhc3M6IHN0cmluZykge1xuICAgICAgICAgICAgICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBhYnN0cmFjdCBhZGRpbmcgc3RhdGUuXG4gICAgICAgICAgICAgICAgY29uc3QgYWRkU3RhdGVGb3JDbGFzcyA9IGZ1bmN0aW9uKHN0YXRlT3JOYW1lOiBzdHJpbmcsIGFjdGl2ZUNsYXNzOiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZiA9IHBhcnNlU3RhdGVSZWYoc3RhdGVPck5hbWUpO1xuICAgICAgICAgICAgICAgICAgYWRkU3RhdGUocmVmLnN0YXRlLCAkc2NvcGUuJGV2YWwocmVmLnBhcmFtRXhwciksIGFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzU3RyaW5nKHN0YXRlT3JOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgLy8gSWYgc3RhdGUgaXMgc3RyaW5nLCBqdXN0IGFkZCBpdC5cbiAgICAgICAgICAgICAgICAgIGFkZFN0YXRlRm9yQ2xhc3Moc3RhdGVPck5hbWUgYXMgc3RyaW5nLCBhY3RpdmVDbGFzcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KHN0YXRlT3JOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgLy8gSWYgc3RhdGUgaXMgYW4gYXJyYXksIGl0ZXJhdGUgb3ZlciBpdCBhbmQgYWRkIGVhY2ggYXJyYXkgaXRlbSBpbmRpdmlkdWFsbHkuXG4gICAgICAgICAgICAgICAgICBmb3JFYWNoKHN0YXRlT3JOYW1lLCBmdW5jdGlvbihzdGF0ZU9yTmFtZTogc3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFN0YXRlRm9yQ2xhc3Moc3RhdGVPck5hbWUsIGFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gYWRkU3RhdGUoc3RhdGVOYW1lOiBzdHJpbmcsIHN0YXRlUGFyYW1zOiBPYmosIGFjdGl2ZUNsYXNzOiBzdHJpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gJHN0YXRlLmdldChzdGF0ZU5hbWUsIHN0YXRlQ29udGV4dCgkZWxlbWVudCkpO1xuXG4gICAgICAgICAgICBjb25zdCBzdGF0ZUluZm8gPSB7XG4gICAgICAgICAgICAgIHN0YXRlOiBzdGF0ZSB8fCB7IG5hbWU6IHN0YXRlTmFtZSB9LFxuICAgICAgICAgICAgICBwYXJhbXM6IHN0YXRlUGFyYW1zLFxuICAgICAgICAgICAgICBhY3RpdmVDbGFzczogYWN0aXZlQ2xhc3MsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBzdGF0ZXMucHVzaChzdGF0ZUluZm8pO1xuXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gcmVtb3ZlU3RhdGUoKSB7XG4gICAgICAgICAgICAgIHJlbW92ZUZyb20oc3RhdGVzKShzdGF0ZUluZm8pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBVcGRhdGUgcm91dGUgc3RhdGVcbiAgICAgICAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgICAgICBjb25zdCBzcGxpdENsYXNzZXMgPSBzdHIgPT4gc3RyLnNwbGl0KC9cXHMvKS5maWx0ZXIoaWRlbnRpdHkpO1xuICAgICAgICAgICAgY29uc3QgZ2V0Q2xhc3NlcyA9IChzdGF0ZUxpc3Q6IFN0YXRlRGF0YVtdKSA9PlxuICAgICAgICAgICAgICBzdGF0ZUxpc3RcbiAgICAgICAgICAgICAgICAubWFwKHggPT4geC5hY3RpdmVDbGFzcylcbiAgICAgICAgICAgICAgICAubWFwKHNwbGl0Q2xhc3NlcylcbiAgICAgICAgICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKTtcblxuICAgICAgICAgICAgY29uc3QgYWxsQ2xhc3NlcyA9IGdldENsYXNzZXMoc3RhdGVzKVxuICAgICAgICAgICAgICAuY29uY2F0KHNwbGl0Q2xhc3NlcyhhY3RpdmVFcUNsYXNzKSlcbiAgICAgICAgICAgICAgLnJlZHVjZSh1bmlxUiwgW10pO1xuICAgICAgICAgICAgY29uc3QgZnV6enlDbGFzc2VzID0gZ2V0Q2xhc3NlcyhzdGF0ZXMuZmlsdGVyKHggPT4gJHN0YXRlLmluY2x1ZGVzKHguc3RhdGUubmFtZSwgeC5wYXJhbXMpKSk7XG4gICAgICAgICAgICBjb25zdCBleGFjdGx5TWF0Y2hlc0FueSA9ICEhc3RhdGVzLmZpbHRlcih4ID0+ICRzdGF0ZS5pcyh4LnN0YXRlLm5hbWUsIHgucGFyYW1zKSkubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgZXhhY3RDbGFzc2VzID0gZXhhY3RseU1hdGNoZXNBbnkgPyBzcGxpdENsYXNzZXMoYWN0aXZlRXFDbGFzcykgOiBbXTtcblxuICAgICAgICAgICAgY29uc3QgYWRkQ2xhc3NlcyA9IGZ1enp5Q2xhc3Nlcy5jb25jYXQoZXhhY3RDbGFzc2VzKS5yZWR1Y2UodW5pcVIsIFtdKTtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZUNsYXNzZXMgPSBhbGxDbGFzc2VzLmZpbHRlcihjbHMgPT4gIWluQXJyYXkoYWRkQ2xhc3NlcywgY2xzKSk7XG5cbiAgICAgICAgICAgICRzY29wZS4kZXZhbEFzeW5jKCgpID0+IHtcbiAgICAgICAgICAgICAgYWRkQ2xhc3Nlcy5mb3JFYWNoKGNsYXNzTmFtZSA9PiAkZWxlbWVudC5hZGRDbGFzcyhjbGFzc05hbWUpKTtcbiAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3Nlcy5mb3JFYWNoKGNsYXNzTmFtZSA9PiAkZWxlbWVudC5yZW1vdmVDbGFzcyhjbGFzc05hbWUpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9O1xuICB9LFxuXTtcblxuLyoqIEBoaWRkZW4gKi9cbmludGVyZmFjZSBEZWYge1xuICB1aVN0YXRlOiBzdHJpbmc7XG4gIGhyZWY6IHN0cmluZztcbiAgdWlTdGF0ZVBhcmFtczogT2JqO1xuICB1aVN0YXRlT3B0czogYW55O1xufVxuLyoqIEBoaWRkZW4gKi9cbmludGVyZmFjZSBTdGF0ZURhdGEge1xuICBzdGF0ZTogU3RhdGVEZWNsYXJhdGlvbjtcbiAgcGFyYW1zOiBSYXdQYXJhbXM7XG4gIGFjdGl2ZUNsYXNzOiBzdHJpbmc7XG59XG5cbmFuZ3VsYXJcbiAgLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJylcbiAgLmRpcmVjdGl2ZSgndWlTcmVmJywgdWlTcmVmRGlyZWN0aXZlKVxuICAuZGlyZWN0aXZlKCd1aVNyZWZBY3RpdmUnLCB1aVNyZWZBY3RpdmVEaXJlY3RpdmUpXG4gIC5kaXJlY3RpdmUoJ3VpU3JlZkFjdGl2ZUVxJywgdWlTcmVmQWN0aXZlRGlyZWN0aXZlKVxuICAuZGlyZWN0aXZlKCd1aVN0YXRlJywgdWlTdGF0ZURpcmVjdGl2ZSk7XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIG5nMSAqLyAvKiogKi9cblxuaW1wb3J0IHsgbmcgYXMgYW5ndWxhciB9IGZyb20gJy4vYW5ndWxhcic7XG5pbXBvcnQgeyBPYmosIFN0YXRlU2VydmljZSwgU3RhdGVPck5hbWUgfSBmcm9tICdAdWlyb3V0ZXIvY29yZSc7XG5cbi8qKlxuICogYGlzU3RhdGVgIEZpbHRlcjogdHJ1dGh5IGlmIHRoZSBjdXJyZW50IHN0YXRlIGlzIHRoZSBwYXJhbWV0ZXJcbiAqXG4gKiBUcmFuc2xhdGVzIHRvIFtbU3RhdGVTZXJ2aWNlLmlzXV0gYCRzdGF0ZS5pcyhcInN0YXRlTmFtZVwiKWAuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBgaHRtbFxuICogPGRpdiBuZy1pZj1cIidzdGF0ZU5hbWUnIHwgaXNTdGF0ZVwiPnNob3cgaWYgc3RhdGUgaXMgJ3N0YXRlTmFtZSc8L2Rpdj5cbiAqIGBgYFxuICovXG4kSXNTdGF0ZUZpbHRlci4kaW5qZWN0ID0gWyckc3RhdGUnXTtcbmZ1bmN0aW9uICRJc1N0YXRlRmlsdGVyKCRzdGF0ZTogU3RhdGVTZXJ2aWNlKSB7XG4gIGNvbnN0IGlzRmlsdGVyOiBhbnkgPSBmdW5jdGlvbihzdGF0ZTogU3RhdGVPck5hbWUsIHBhcmFtczogT2JqLCBvcHRpb25zPzogeyByZWxhdGl2ZT86IFN0YXRlT3JOYW1lIH0pIHtcbiAgICByZXR1cm4gJHN0YXRlLmlzKHN0YXRlLCBwYXJhbXMsIG9wdGlvbnMpO1xuICB9O1xuICBpc0ZpbHRlci4kc3RhdGVmdWwgPSB0cnVlO1xuICByZXR1cm4gaXNGaWx0ZXI7XG59XG5cbi8qKlxuICogYGluY2x1ZGVkQnlTdGF0ZWAgRmlsdGVyOiB0cnV0aHkgaWYgdGhlIGN1cnJlbnQgc3RhdGUgaW5jbHVkZXMgdGhlIHBhcmFtZXRlclxuICpcbiAqIFRyYW5zbGF0ZXMgdG8gW1tTdGF0ZVNlcnZpY2UuaW5jbHVkZXNdXWAgJHN0YXRlLmlzKFwiZnVsbE9yUGFydGlhbFN0YXRlTmFtZVwiKWAuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBgaHRtbFxuICogPGRpdiBuZy1pZj1cIidmdWxsT3JQYXJ0aWFsU3RhdGVOYW1lJyB8IGluY2x1ZGVkQnlTdGF0ZVwiPnNob3cgaWYgc3RhdGUgaW5jbHVkZXMgJ2Z1bGxPclBhcnRpYWxTdGF0ZU5hbWUnPC9kaXY+XG4gKiBgYGBcbiAqL1xuJEluY2x1ZGVkQnlTdGF0ZUZpbHRlci4kaW5qZWN0ID0gWyckc3RhdGUnXTtcbmZ1bmN0aW9uICRJbmNsdWRlZEJ5U3RhdGVGaWx0ZXIoJHN0YXRlOiBTdGF0ZVNlcnZpY2UpIHtcbiAgY29uc3QgaW5jbHVkZXNGaWx0ZXI6IGFueSA9IGZ1bmN0aW9uKHN0YXRlOiBTdGF0ZU9yTmFtZSwgcGFyYW1zOiBPYmosIG9wdGlvbnM6IHsgcmVsYXRpdmU/OiBTdGF0ZU9yTmFtZSB9KSB7XG4gICAgcmV0dXJuICRzdGF0ZS5pbmNsdWRlcyhzdGF0ZSwgcGFyYW1zLCBvcHRpb25zKTtcbiAgfTtcbiAgaW5jbHVkZXNGaWx0ZXIuJHN0YXRlZnVsID0gdHJ1ZTtcbiAgcmV0dXJuIGluY2x1ZGVzRmlsdGVyO1xufVxuXG5hbmd1bGFyXG4gIC5tb2R1bGUoJ3VpLnJvdXRlci5zdGF0ZScpXG4gIC5maWx0ZXIoJ2lzU3RhdGUnLCAkSXNTdGF0ZUZpbHRlcilcbiAgLmZpbHRlcignaW5jbHVkZWRCeVN0YXRlJywgJEluY2x1ZGVkQnlTdGF0ZUZpbHRlcik7XG5cbmV4cG9ydCB7ICRJc1N0YXRlRmlsdGVyLCAkSW5jbHVkZWRCeVN0YXRlRmlsdGVyIH07XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIGRpcmVjdGl2ZXMgKi8gLyoqICovXG5pbXBvcnQge1xuICAkUUxpa2UsXG4gIEFjdGl2ZVVJVmlldyxcbiAgZXh0ZW5kLFxuICBmaWx0ZXIsXG4gIEhvb2tSZWdPcHRpb25zLFxuICBpc0RlZmluZWQsXG4gIGlzRnVuY3Rpb24sXG4gIGlzU3RyaW5nLFxuICBrZWJvYlN0cmluZyxcbiAgbm9vcCxcbiAgT2JqLFxuICBQYXJhbSxcbiAgcGFyc2UsXG4gIFBhdGhOb2RlLFxuICBSZXNvbHZlQ29udGV4dCxcbiAgU3RhdGVEZWNsYXJhdGlvbixcbiAgdGFpbCxcbiAgdHJhY2UsXG4gIFRyYW5zaXRpb24sXG4gIFRyYW5zaXRpb25TZXJ2aWNlLFxuICBUeXBlZE1hcCxcbiAgdW5uZXN0UixcbiAgVmlld1NlcnZpY2UsXG59IGZyb20gJ0B1aXJvdXRlci9jb3JlJztcbmltcG9ydCB7IElBdWdtZW50ZWRKUXVlcnksIElJbnRlcnBvbGF0ZVNlcnZpY2UsIElTY29wZSwgSVRpbWVvdXRTZXJ2aWNlLCBJVHJhbnNjbHVkZUZ1bmN0aW9uIH0gZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyBuZyBhcyBhbmd1bGFyIH0gZnJvbSAnLi4vYW5ndWxhcic7XG5pbXBvcnQgeyBOZzFDb250cm9sbGVyLCBOZzFTdGF0ZURlY2xhcmF0aW9uIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB7IGdldExvY2FscyB9IGZyb20gJy4uL3NlcnZpY2VzJztcbmltcG9ydCB7IE5nMVZpZXdDb25maWcgfSBmcm9tICcuLi9zdGF0ZWJ1aWxkZXJzL3ZpZXdzJztcbmltcG9ydCB7IG5nMV9kaXJlY3RpdmUgfSBmcm9tICcuL3N0YXRlRGlyZWN0aXZlcyc7XG5cbi8qKiBAaGlkZGVuICovXG5leHBvcnQgdHlwZSBVSVZpZXdEYXRhID0ge1xuICAkY2ZnOiBOZzFWaWV3Q29uZmlnO1xuICAkdWlWaWV3OiBBY3RpdmVVSVZpZXc7XG59O1xuXG4vKiogQGhpZGRlbiAqL1xuZXhwb3J0IHR5cGUgVUlWaWV3QW5pbURhdGEgPSB7XG4gICRhbmltRW50ZXI6IFByb21pc2U8YW55PjtcbiAgJGFuaW1MZWF2ZTogUHJvbWlzZTxhbnk+O1xuICAkJGFuaW1MZWF2ZTogeyByZXNvbHZlOiAoKSA9PiBhbnkgfTsgLy8gXCJkZWZlcnJlZFwiXG59O1xuXG4vKipcbiAqIGB1aS12aWV3YDogQSB2aWV3cG9ydCBkaXJlY3RpdmUgd2hpY2ggaXMgZmlsbGVkIGluIGJ5IGEgdmlldyBmcm9tIHRoZSBhY3RpdmUgc3RhdGUuXG4gKlxuICogIyMjIEF0dHJpYnV0ZXNcbiAqXG4gKiAtIGBuYW1lYDogKE9wdGlvbmFsKSBBIHZpZXcgbmFtZS5cbiAqICAgVGhlIG5hbWUgc2hvdWxkIGJlIHVuaXF1ZSBhbW9uZ3N0IHRoZSBvdGhlciB2aWV3cyBpbiB0aGUgc2FtZSBzdGF0ZS5cbiAqICAgWW91IGNhbiBoYXZlIHZpZXdzIG9mIHRoZSBzYW1lIG5hbWUgdGhhdCBsaXZlIGluIGRpZmZlcmVudCBzdGF0ZXMuXG4gKiAgIFRoZSB1aS12aWV3IGNhbiBiZSB0YXJnZXRlZCBpbiBhIFZpZXcgdXNpbmcgdGhlIG5hbWUgKFtbTmcxU3RhdGVEZWNsYXJhdGlvbi52aWV3c11dKS5cbiAqXG4gKiAtIGBhdXRvc2Nyb2xsYDogYW4gZXhwcmVzc2lvbi4gV2hlbiBpdCBldmFsdWF0ZXMgdG8gdHJ1ZSwgdGhlIGB1aS12aWV3YCB3aWxsIGJlIHNjcm9sbGVkIGludG8gdmlldyB3aGVuIGl0IGlzIGFjdGl2YXRlZC5cbiAqICAgVXNlcyBbWyR1aVZpZXdTY3JvbGxdXSB0byBkbyB0aGUgc2Nyb2xsaW5nLlxuICpcbiAqIC0gYG9ubG9hZGA6IEV4cHJlc3Npb24gdG8gZXZhbHVhdGUgd2hlbmV2ZXIgdGhlIHZpZXcgdXBkYXRlcy5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBBIHZpZXcgY2FuIGJlIHVubmFtZWQgb3IgbmFtZWQuXG4gKiBgYGBodG1sXG4gKiA8IS0tIFVubmFtZWQgLS0+XG4gKiA8ZGl2IHVpLXZpZXc+PC9kaXY+XG4gKlxuICogPCEtLSBOYW1lZCAtLT5cbiAqIDxkaXYgdWktdmlldz1cInZpZXdOYW1lXCI+PC9kaXY+XG4gKlxuICogPCEtLSBOYW1lZCAoZGlmZmVyZW50IHN0eWxlKSAtLT5cbiAqIDx1aS12aWV3IG5hbWU9XCJ2aWV3TmFtZVwiPjwvdWktdmlldz5cbiAqIGBgYFxuICpcbiAqIFlvdSBjYW4gb25seSBoYXZlIG9uZSB1bm5hbWVkIHZpZXcgd2l0aGluIGFueSB0ZW1wbGF0ZSAob3Igcm9vdCBodG1sKS4gSWYgeW91IGFyZSBvbmx5IHVzaW5nIGFcbiAqIHNpbmdsZSB2aWV3IGFuZCBpdCBpcyB1bm5hbWVkIHRoZW4geW91IGNhbiBwb3B1bGF0ZSBpdCBsaWtlIHNvOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgdWktdmlldz48L2Rpdj5cbiAqICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwiaG9tZVwiLCB7XG4gKiAgIHRlbXBsYXRlOiBcIjxoMT5IRUxMTyE8L2gxPlwiXG4gKiB9KVxuICogYGBgXG4gKlxuICogVGhlIGFib3ZlIGlzIGEgY29udmVuaWVudCBzaG9ydGN1dCBlcXVpdmFsZW50IHRvIHNwZWNpZnlpbmcgeW91ciB2aWV3IGV4cGxpY2l0bHkgd2l0aCB0aGVcbiAqIFtbTmcxU3RhdGVEZWNsYXJhdGlvbi52aWV3c11dIGNvbmZpZyBwcm9wZXJ0eSwgYnkgbmFtZSwgaW4gdGhpcyBjYXNlIGFuIGVtcHR5IG5hbWU6XG4gKlxuICogYGBganNcbiAqICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwiaG9tZVwiLCB7XG4gKiAgIHZpZXdzOiB7XG4gKiAgICAgXCJcIjoge1xuICogICAgICAgdGVtcGxhdGU6IFwiPGgxPkhFTExPITwvaDE+XCJcbiAqICAgICB9XG4gKiAgIH1cbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiBCdXQgdHlwaWNhbGx5IHlvdSdsbCBvbmx5IHVzZSB0aGUgdmlld3MgcHJvcGVydHkgaWYgeW91IG5hbWUgeW91ciB2aWV3IG9yIGhhdmUgbW9yZSB0aGFuIG9uZSB2aWV3XG4gKiBpbiB0aGUgc2FtZSB0ZW1wbGF0ZS4gVGhlcmUncyBub3QgcmVhbGx5IGEgY29tcGVsbGluZyByZWFzb24gdG8gbmFtZSBhIHZpZXcgaWYgaXRzIHRoZSBvbmx5IG9uZSxcbiAqIGJ1dCB5b3UgY291bGQgaWYgeW91IHdhbnRlZCwgbGlrZSBzbzpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IHVpLXZpZXc9XCJtYWluXCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBgYGBqc1xuICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lXCIsIHtcbiAqICAgdmlld3M6IHtcbiAqICAgICBcIm1haW5cIjoge1xuICogICAgICAgdGVtcGxhdGU6IFwiPGgxPkhFTExPITwvaDE+XCJcbiAqICAgICB9XG4gKiAgIH1cbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiBSZWFsbHkgdGhvdWdoLCB5b3UnbGwgdXNlIHZpZXdzIHRvIHNldCB1cCBtdWx0aXBsZSB2aWV3czpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IHVpLXZpZXc+PC9kaXY+XG4gKiA8ZGl2IHVpLXZpZXc9XCJjaGFydFwiPjwvZGl2PlxuICogPGRpdiB1aS12aWV3PVwiZGF0YVwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogYGBganNcbiAqICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwiaG9tZVwiLCB7XG4gKiAgIHZpZXdzOiB7XG4gKiAgICAgXCJcIjoge1xuICogICAgICAgdGVtcGxhdGU6IFwiPGgxPkhFTExPITwvaDE+XCJcbiAqICAgICB9LFxuICogICAgIFwiY2hhcnRcIjoge1xuICogICAgICAgdGVtcGxhdGU6IFwiPGNoYXJ0X3RoaW5nLz5cIlxuICogICAgIH0sXG4gKiAgICAgXCJkYXRhXCI6IHtcbiAqICAgICAgIHRlbXBsYXRlOiBcIjxkYXRhX3RoaW5nLz5cIlxuICogICAgIH1cbiAqICAgfVxuICogfSlcbiAqIGBgYFxuICpcbiAqICMjIyMgRXhhbXBsZXMgZm9yIGBhdXRvc2Nyb2xsYDpcbiAqIGBgYGh0bWxcbiAqIDwhLS0gSWYgYXV0b3Njcm9sbCBwcmVzZW50IHdpdGggbm8gZXhwcmVzc2lvbixcbiAqICAgICAgdGhlbiBzY3JvbGwgdWktdmlldyBpbnRvIHZpZXcgLS0+XG4gKiA8dWktdmlldyBhdXRvc2Nyb2xsLz5cbiAqXG4gKiA8IS0tIElmIGF1dG9zY3JvbGwgcHJlc2VudCB3aXRoIHZhbGlkIGV4cHJlc3Npb24sXG4gKiAgICAgIHRoZW4gc2Nyb2xsIHVpLXZpZXcgaW50byB2aWV3IGlmIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUgLS0+XG4gKiA8dWktdmlldyBhdXRvc2Nyb2xsPSd0cnVlJy8+XG4gKiA8dWktdmlldyBhdXRvc2Nyb2xsPSdmYWxzZScvPlxuICogPHVpLXZpZXcgYXV0b3Njcm9sbD0nc2NvcGVWYXJpYWJsZScvPlxuICogYGBgXG4gKlxuICogUmVzb2x2ZSBkYXRhOlxuICpcbiAqIFRoZSByZXNvbHZlZCBkYXRhIGZyb20gdGhlIHN0YXRlJ3MgYHJlc29sdmVgIGJsb2NrIGlzIHBsYWNlZCBvbiB0aGUgc2NvcGUgYXMgYCRyZXNvbHZlYCAodGhpc1xuICogY2FuIGJlIGN1c3RvbWl6ZWQgdXNpbmcgW1tOZzFWaWV3RGVjbGFyYXRpb24ucmVzb2x2ZUFzXV0pLiAgVGhpcyBjYW4gYmUgdGhlbiBhY2Nlc3NlZCBmcm9tIHRoZSB0ZW1wbGF0ZS5cbiAqXG4gKiBOb3RlIHRoYXQgd2hlbiBgY29udHJvbGxlckFzYCBpcyBiZWluZyB1c2VkLCBgJHJlc29sdmVgIGlzIHNldCBvbiB0aGUgY29udHJvbGxlciBpbnN0YW5jZSAqYWZ0ZXIqIHRoZVxuICogY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQuICBUaGUgYCRvbkluaXQoKWAgaG9vayBjYW4gYmUgdXNlZCB0byBwZXJmb3JtIGluaXRpYWxpemF0aW9uIGNvZGUgd2hpY2hcbiAqIGRlcGVuZHMgb24gYCRyZXNvbHZlYCBkYXRhLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGpzXG4gKiAkc3RhdGVQcm92aWRlci5zdGF0ZSgnaG9tZScsIHtcbiAqICAgdGVtcGxhdGU6ICc8bXktY29tcG9uZW50IHVzZXI9XCIkcmVzb2x2ZS51c2VyXCI+PC9teS1jb21wb25lbnQ+JyxcbiAqICAgcmVzb2x2ZToge1xuICogICAgIHVzZXI6IGZ1bmN0aW9uKFVzZXJTZXJ2aWNlKSB7IHJldHVybiBVc2VyU2VydmljZS5mZXRjaFVzZXIoKTsgfVxuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgbGV0IHVpVmlldzogbmcxX2RpcmVjdGl2ZTtcbnVpVmlldyA9IFtcbiAgJyR2aWV3JyxcbiAgJyRhbmltYXRlJyxcbiAgJyR1aVZpZXdTY3JvbGwnLFxuICAnJGludGVycG9sYXRlJyxcbiAgJyRxJyxcbiAgZnVuY3Rpb24gJFZpZXdEaXJlY3RpdmUoXG4gICAgJHZpZXc6IFZpZXdTZXJ2aWNlLFxuICAgICRhbmltYXRlOiBhbnksXG4gICAgJHVpVmlld1Njcm9sbDogYW55LFxuICAgICRpbnRlcnBvbGF0ZTogSUludGVycG9sYXRlU2VydmljZSxcbiAgICAkcTogJFFMaWtlXG4gICkge1xuICAgIGZ1bmN0aW9uIGdldFJlbmRlcmVyKGF0dHJzOiBPYmosIHNjb3BlOiBJU2NvcGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVudGVyOiBmdW5jdGlvbihlbGVtZW50OiBKUXVlcnksIHRhcmdldDogYW55LCBjYjogRnVuY3Rpb24pIHtcbiAgICAgICAgICBpZiAoYW5ndWxhci52ZXJzaW9uLm1pbm9yID4gMikge1xuICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoZWxlbWVudCwgbnVsbCwgdGFyZ2V0KS50aGVuKGNiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoZWxlbWVudCwgbnVsbCwgdGFyZ2V0LCBjYik7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBsZWF2ZTogZnVuY3Rpb24oZWxlbWVudDogSlF1ZXJ5LCBjYjogRnVuY3Rpb24pIHtcbiAgICAgICAgICBpZiAoYW5ndWxhci52ZXJzaW9uLm1pbm9yID4gMikge1xuICAgICAgICAgICAgJGFuaW1hdGUubGVhdmUoZWxlbWVudCkudGhlbihjYik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRhbmltYXRlLmxlYXZlKGVsZW1lbnQsIGNiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbmZpZ3NFcXVhbChjb25maWcxOiBOZzFWaWV3Q29uZmlnLCBjb25maWcyOiBOZzFWaWV3Q29uZmlnKSB7XG4gICAgICByZXR1cm4gY29uZmlnMSA9PT0gY29uZmlnMjtcbiAgICB9XG5cbiAgICBjb25zdCByb290RGF0YSA9IHtcbiAgICAgICRjZmc6IHsgdmlld0RlY2w6IHsgJGNvbnRleHQ6ICR2aWV3Ll9wbHVnaW5hcGkuX3Jvb3RWaWV3Q29udGV4dCgpIH0gfSxcbiAgICAgICR1aVZpZXc6IHt9LFxuICAgIH07XG5cbiAgICBjb25zdCBkaXJlY3RpdmUgPSB7XG4gICAgICBjb3VudDogMCxcbiAgICAgIHJlc3RyaWN0OiAnRUNBJyxcbiAgICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgICAgcHJpb3JpdHk6IDQwMCxcbiAgICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcbiAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uKHRFbGVtZW50OiBKUXVlcnksIHRBdHRyczogT2JqLCAkdHJhbnNjbHVkZTogSVRyYW5zY2x1ZGVGdW5jdGlvbikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGU6IElTY29wZSwgJGVsZW1lbnQ6IElBdWdtZW50ZWRKUXVlcnksIGF0dHJzOiBPYmopIHtcbiAgICAgICAgICBjb25zdCBvbmxvYWRFeHAgPSBhdHRyc1snb25sb2FkJ10gfHwgJycsXG4gICAgICAgICAgICBhdXRvU2Nyb2xsRXhwID0gYXR0cnNbJ2F1dG9zY3JvbGwnXSxcbiAgICAgICAgICAgIHJlbmRlcmVyID0gZ2V0UmVuZGVyZXIoYXR0cnMsIHNjb3BlKSxcbiAgICAgICAgICAgIGluaGVyaXRlZCA9ICRlbGVtZW50LmluaGVyaXRlZERhdGEoJyR1aVZpZXcnKSB8fCByb290RGF0YSxcbiAgICAgICAgICAgIG5hbWUgPSAkaW50ZXJwb2xhdGUoYXR0cnNbJ3VpVmlldyddIHx8IGF0dHJzWyduYW1lJ10gfHwgJycpKHNjb3BlKSB8fCAnJGRlZmF1bHQnO1xuXG4gICAgICAgICAgbGV0IHByZXZpb3VzRWw6IEpRdWVyeSxcbiAgICAgICAgICAgIGN1cnJlbnRFbDogSlF1ZXJ5LFxuICAgICAgICAgICAgY3VycmVudFNjb3BlOiBJU2NvcGUsXG4gICAgICAgICAgICB2aWV3Q29uZmlnOiBOZzFWaWV3Q29uZmlnLFxuICAgICAgICAgICAgdW5yZWdpc3RlcjogRnVuY3Rpb247XG5cbiAgICAgICAgICBjb25zdCBhY3RpdmVVSVZpZXc6IEFjdGl2ZVVJVmlldyA9IHtcbiAgICAgICAgICAgICR0eXBlOiAnbmcxJyxcbiAgICAgICAgICAgIGlkOiBkaXJlY3RpdmUuY291bnQrKywgLy8gR2xvYmFsIHNlcXVlbnRpYWwgSUQgZm9yIHVpLXZpZXcgdGFncyBhZGRlZCB0byBET01cbiAgICAgICAgICAgIG5hbWU6IG5hbWUsIC8vIHVpLXZpZXcgbmFtZSAoPGRpdiB1aS12aWV3PVwibmFtZVwiPjwvZGl2PlxuICAgICAgICAgICAgZnFuOiBpbmhlcml0ZWQuJHVpVmlldy5mcW4gPyBpbmhlcml0ZWQuJHVpVmlldy5mcW4gKyAnLicgKyBuYW1lIDogbmFtZSwgLy8gZnVsbHkgcXVhbGlmaWVkIG5hbWUsIGRlc2NyaWJlcyBsb2NhdGlvbiBpbiBET01cbiAgICAgICAgICAgIGNvbmZpZzogbnVsbCwgLy8gVGhlIFZpZXdDb25maWcgbG9hZGVkIChmcm9tIGEgc3RhdGUudmlld3MgZGVmaW5pdGlvbilcbiAgICAgICAgICAgIGNvbmZpZ1VwZGF0ZWQ6IGNvbmZpZ1VwZGF0ZWRDYWxsYmFjaywgLy8gQ2FsbGVkIHdoZW4gdGhlIG1hdGNoaW5nIFZpZXdDb25maWcgY2hhbmdlc1xuICAgICAgICAgICAgZ2V0IGNyZWF0aW9uQ29udGV4dCgpIHtcbiAgICAgICAgICAgICAgLy8gVGhlIGNvbnRleHQgaW4gd2hpY2ggdGhpcyB1aS12aWV3IFwidGFnXCIgd2FzIGNyZWF0ZWRcbiAgICAgICAgICAgICAgY29uc3QgZnJvbVBhcmVudFRhZ0NvbmZpZyA9IHBhcnNlKCckY2ZnLnZpZXdEZWNsLiRjb250ZXh0JykoaW5oZXJpdGVkKTtcbiAgICAgICAgICAgICAgLy8gQWxsb3cgPHVpLXZpZXcgbmFtZT1cImZvb1wiPjx1aS12aWV3IG5hbWU9XCJiYXJcIj48L3VpLXZpZXc+PC91aS12aWV3PlxuICAgICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXItdWkvdWktcm91dGVyL2lzc3Vlcy8zMzU1XG4gICAgICAgICAgICAgIGNvbnN0IGZyb21QYXJlbnRUYWcgPSBwYXJzZSgnJHVpVmlldy5jcmVhdGlvbkNvbnRleHQnKShpbmhlcml0ZWQpO1xuICAgICAgICAgICAgICByZXR1cm4gZnJvbVBhcmVudFRhZ0NvbmZpZyB8fCBmcm9tUGFyZW50VGFnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdHJhY2UudHJhY2VVSVZpZXdFdmVudCgnTGlua2luZycsIGFjdGl2ZVVJVmlldyk7XG5cbiAgICAgICAgICBmdW5jdGlvbiBjb25maWdVcGRhdGVkQ2FsbGJhY2soY29uZmlnPzogTmcxVmlld0NvbmZpZykge1xuICAgICAgICAgICAgaWYgKGNvbmZpZyAmJiAhKGNvbmZpZyBpbnN0YW5jZW9mIE5nMVZpZXdDb25maWcpKSByZXR1cm47XG4gICAgICAgICAgICBpZiAoY29uZmlnc0VxdWFsKHZpZXdDb25maWcsIGNvbmZpZykpIHJldHVybjtcbiAgICAgICAgICAgIHRyYWNlLnRyYWNlVUlWaWV3Q29uZmlnVXBkYXRlZChhY3RpdmVVSVZpZXcsIGNvbmZpZyAmJiBjb25maWcudmlld0RlY2wgJiYgY29uZmlnLnZpZXdEZWNsLiRjb250ZXh0KTtcblxuICAgICAgICAgICAgdmlld0NvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgICAgIHVwZGF0ZVZpZXcoY29uZmlnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkZWxlbWVudC5kYXRhKCckdWlWaWV3JywgeyAkdWlWaWV3OiBhY3RpdmVVSVZpZXcgfSk7XG5cbiAgICAgICAgICB1cGRhdGVWaWV3KCk7XG5cbiAgICAgICAgICB1bnJlZ2lzdGVyID0gJHZpZXcucmVnaXN0ZXJVSVZpZXcoYWN0aXZlVUlWaWV3KTtcbiAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0cmFjZS50cmFjZVVJVmlld0V2ZW50KCdEZXN0cm95aW5nL1VucmVnaXN0ZXJpbmcnLCBhY3RpdmVVSVZpZXcpO1xuICAgICAgICAgICAgdW5yZWdpc3RlcigpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgZnVuY3Rpb24gY2xlYW51cExhc3RWaWV3KCkge1xuICAgICAgICAgICAgaWYgKHByZXZpb3VzRWwpIHtcbiAgICAgICAgICAgICAgdHJhY2UudHJhY2VVSVZpZXdFdmVudCgnUmVtb3ZpbmcgKHByZXZpb3VzKSBlbCcsIHByZXZpb3VzRWwuZGF0YSgnJHVpVmlldycpKTtcbiAgICAgICAgICAgICAgcHJldmlvdXNFbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgcHJldmlvdXNFbCA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50U2NvcGUpIHtcbiAgICAgICAgICAgICAgdHJhY2UudHJhY2VVSVZpZXdFdmVudCgnRGVzdHJveWluZyBzY29wZScsIGFjdGl2ZVVJVmlldyk7XG4gICAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZGVzdHJveSgpO1xuICAgICAgICAgICAgICBjdXJyZW50U2NvcGUgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY3VycmVudEVsKSB7XG4gICAgICAgICAgICAgIGNvbnN0IF92aWV3RGF0YSA9IGN1cnJlbnRFbC5kYXRhKCckdWlWaWV3QW5pbScpO1xuICAgICAgICAgICAgICB0cmFjZS50cmFjZVVJVmlld0V2ZW50KCdBbmltYXRlIG91dCcsIF92aWV3RGF0YSk7XG4gICAgICAgICAgICAgIHJlbmRlcmVyLmxlYXZlKGN1cnJlbnRFbCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX3ZpZXdEYXRhLiQkYW5pbUxlYXZlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c0VsID0gbnVsbDtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgcHJldmlvdXNFbCA9IGN1cnJlbnRFbDtcbiAgICAgICAgICAgICAgY3VycmVudEVsID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVWaWV3KGNvbmZpZz86IE5nMVZpZXdDb25maWcpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1Njb3BlID0gc2NvcGUuJG5ldygpO1xuICAgICAgICAgICAgY29uc3QgYW5pbUVudGVyID0gJHEuZGVmZXIoKSxcbiAgICAgICAgICAgICAgYW5pbUxlYXZlID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAgICAgY29uc3QgJHVpVmlld0RhdGE6IFVJVmlld0RhdGEgPSB7XG4gICAgICAgICAgICAgICRjZmc6IGNvbmZpZyxcbiAgICAgICAgICAgICAgJHVpVmlldzogYWN0aXZlVUlWaWV3LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgJHVpVmlld0FuaW06IFVJVmlld0FuaW1EYXRhID0ge1xuICAgICAgICAgICAgICAkYW5pbUVudGVyOiBhbmltRW50ZXIucHJvbWlzZSxcbiAgICAgICAgICAgICAgJGFuaW1MZWF2ZTogYW5pbUxlYXZlLnByb21pc2UsXG4gICAgICAgICAgICAgICQkYW5pbUxlYXZlOiBhbmltTGVhdmUsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBuZ2RvYyBldmVudFxuICAgICAgICAgICAgICogQG5hbWUgdWkucm91dGVyLnN0YXRlLmRpcmVjdGl2ZTp1aS12aWV3IyR2aWV3Q29udGVudExvYWRpbmdcbiAgICAgICAgICAgICAqIEBldmVudE9mIHVpLnJvdXRlci5zdGF0ZS5kaXJlY3RpdmU6dWktdmlld1xuICAgICAgICAgICAgICogQGV2ZW50VHlwZSBlbWl0cyBvbiB1aS12aWV3IGRpcmVjdGl2ZSBzY29wZVxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogRmlyZWQgb25jZSB0aGUgdmlldyAqKmJlZ2lucyBsb2FkaW5nKiosICpiZWZvcmUqIHRoZSBET00gaXMgcmVuZGVyZWQuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IEV2ZW50IG9iamVjdC5cbiAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2aWV3TmFtZSBOYW1lIG9mIHRoZSB2aWV3LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBuZXdTY29wZS4kZW1pdCgnJHZpZXdDb250ZW50TG9hZGluZycsIG5hbWUpO1xuXG4gICAgICAgICAgICBjb25zdCBjbG9uZWQgPSAkdHJhbnNjbHVkZShuZXdTY29wZSwgZnVuY3Rpb24oY2xvbmUpIHtcbiAgICAgICAgICAgICAgY2xvbmUuZGF0YSgnJHVpVmlld0FuaW0nLCAkdWlWaWV3QW5pbSk7XG4gICAgICAgICAgICAgIGNsb25lLmRhdGEoJyR1aVZpZXcnLCAkdWlWaWV3RGF0YSk7XG4gICAgICAgICAgICAgIHJlbmRlcmVyLmVudGVyKGNsb25lLCAkZWxlbWVudCwgZnVuY3Rpb24gb25VSVZpZXdFbnRlcigpIHtcbiAgICAgICAgICAgICAgICBhbmltRW50ZXIucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2NvcGUpIGN1cnJlbnRTY29wZS4kZW1pdCgnJHZpZXdDb250ZW50QW5pbWF0aW9uRW5kZWQnKTtcblxuICAgICAgICAgICAgICAgIGlmICgoaXNEZWZpbmVkKGF1dG9TY3JvbGxFeHApICYmICFhdXRvU2Nyb2xsRXhwKSB8fCBzY29wZS4kZXZhbChhdXRvU2Nyb2xsRXhwKSkge1xuICAgICAgICAgICAgICAgICAgJHVpVmlld1Njcm9sbChjbG9uZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjbGVhbnVwTGFzdFZpZXcoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjdXJyZW50RWwgPSBjbG9uZWQ7XG4gICAgICAgICAgICBjdXJyZW50U2NvcGUgPSBuZXdTY29wZTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQG5nZG9jIGV2ZW50XG4gICAgICAgICAgICAgKiBAbmFtZSB1aS5yb3V0ZXIuc3RhdGUuZGlyZWN0aXZlOnVpLXZpZXcjJHZpZXdDb250ZW50TG9hZGVkXG4gICAgICAgICAgICAgKiBAZXZlbnRPZiB1aS5yb3V0ZXIuc3RhdGUuZGlyZWN0aXZlOnVpLXZpZXdcbiAgICAgICAgICAgICAqIEBldmVudFR5cGUgZW1pdHMgb24gdWktdmlldyBkaXJlY3RpdmUgc2NvcGVcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiAgICAgICAgICAgKlxuICAgICAgICAgICAgICogRmlyZWQgb25jZSB0aGUgdmlldyBpcyAqKmxvYWRlZCoqLCAqYWZ0ZXIqIHRoZSBET00gaXMgcmVuZGVyZWQuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IEV2ZW50IG9iamVjdC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY3VycmVudFNjb3BlLiRlbWl0KCckdmlld0NvbnRlbnRMb2FkZWQnLCBjb25maWcgfHwgdmlld0NvbmZpZyk7XG4gICAgICAgICAgICBjdXJyZW50U2NvcGUuJGV2YWwob25sb2FkRXhwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9LFxuXTtcblxuJFZpZXdEaXJlY3RpdmVGaWxsLiRpbmplY3QgPSBbJyRjb21waWxlJywgJyRjb250cm9sbGVyJywgJyR0cmFuc2l0aW9ucycsICckdmlldycsICckcScsICckdGltZW91dCddO1xuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gJFZpZXdEaXJlY3RpdmVGaWxsKFxuICAkY29tcGlsZTogYW5ndWxhci5JQ29tcGlsZVNlcnZpY2UsXG4gICRjb250cm9sbGVyOiBhbmd1bGFyLklDb250cm9sbGVyU2VydmljZSxcbiAgJHRyYW5zaXRpb25zOiBUcmFuc2l0aW9uU2VydmljZSxcbiAgJHZpZXc6IFZpZXdTZXJ2aWNlLFxuICAkcTogYW5ndWxhci5JUVNlcnZpY2UsXG4gICR0aW1lb3V0OiBJVGltZW91dFNlcnZpY2Vcbikge1xuICBjb25zdCBnZXRDb250cm9sbGVyQXMgPSBwYXJzZSgndmlld0RlY2wuY29udHJvbGxlckFzJyk7XG4gIGNvbnN0IGdldFJlc29sdmVBcyA9IHBhcnNlKCd2aWV3RGVjbC5yZXNvbHZlQXMnKTtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUNBJyxcbiAgICBwcmlvcml0eTogLTQwMCxcbiAgICBjb21waWxlOiBmdW5jdGlvbih0RWxlbWVudDogSlF1ZXJ5KSB7XG4gICAgICBjb25zdCBpbml0aWFsID0gdEVsZW1lbnQuaHRtbCgpO1xuICAgICAgdEVsZW1lbnQuZW1wdHkoKTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlOiBJU2NvcGUsICRlbGVtZW50OiBKUXVlcnkpIHtcbiAgICAgICAgY29uc3QgZGF0YTogVUlWaWV3RGF0YSA9ICRlbGVtZW50LmRhdGEoJyR1aVZpZXcnKTtcbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgJGVsZW1lbnQuaHRtbChpbml0aWFsKTtcbiAgICAgICAgICAkY29tcGlsZSgkZWxlbWVudC5jb250ZW50cygpIGFzIGFueSkoc2NvcGUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNmZzogTmcxVmlld0NvbmZpZyA9IGRhdGEuJGNmZyB8fCA8YW55Pnsgdmlld0RlY2w6IHt9LCBnZXRUZW1wbGF0ZTogbm9vcCB9O1xuICAgICAgICBjb25zdCByZXNvbHZlQ3R4OiBSZXNvbHZlQ29udGV4dCA9IGNmZy5wYXRoICYmIG5ldyBSZXNvbHZlQ29udGV4dChjZmcucGF0aCk7XG4gICAgICAgICRlbGVtZW50Lmh0bWwoY2ZnLmdldFRlbXBsYXRlKCRlbGVtZW50LCByZXNvbHZlQ3R4KSB8fCBpbml0aWFsKTtcbiAgICAgICAgdHJhY2UudHJhY2VVSVZpZXdGaWxsKGRhdGEuJHVpVmlldywgJGVsZW1lbnQuaHRtbCgpKTtcblxuICAgICAgICBjb25zdCBsaW5rID0gJGNvbXBpbGUoJGVsZW1lbnQuY29udGVudHMoKSBhcyBhbnkpO1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gY2ZnLmNvbnRyb2xsZXIgYXMgYW5ndWxhci5JQ29udHJvbGxlclNlcnZpY2U7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXJBczogc3RyaW5nID0gZ2V0Q29udHJvbGxlckFzKGNmZyk7XG4gICAgICAgIGNvbnN0IHJlc29sdmVBczogc3RyaW5nID0gZ2V0UmVzb2x2ZUFzKGNmZyk7XG4gICAgICAgIGNvbnN0IGxvY2FscyA9IHJlc29sdmVDdHggJiYgZ2V0TG9jYWxzKHJlc29sdmVDdHgpO1xuXG4gICAgICAgIHNjb3BlW3Jlc29sdmVBc10gPSBsb2NhbHM7XG5cbiAgICAgICAgaWYgKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICBjb25zdCBjb250cm9sbGVySW5zdGFuY2UgPSA8TmcxQ29udHJvbGxlcj4oXG4gICAgICAgICAgICAkY29udHJvbGxlcihjb250cm9sbGVyLCBleHRlbmQoe30sIGxvY2FscywgeyAkc2NvcGU6IHNjb3BlLCAkZWxlbWVudDogJGVsZW1lbnQgfSkpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoY29udHJvbGxlckFzKSB7XG4gICAgICAgICAgICBzY29wZVtjb250cm9sbGVyQXNdID0gY29udHJvbGxlckluc3RhbmNlO1xuICAgICAgICAgICAgc2NvcGVbY29udHJvbGxlckFzXVtyZXNvbHZlQXNdID0gbG9jYWxzO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFRPRE86IFVzZSAkdmlldyBzZXJ2aWNlIGFzIGEgY2VudHJhbCBwb2ludCBmb3IgcmVnaXN0ZXJpbmcgY29tcG9uZW50LWxldmVsIGhvb2tzXG4gICAgICAgICAgLy8gVGhlbiwgd2hlbiBhIGNvbXBvbmVudCBpcyBjcmVhdGVkLCB0ZWxsIHRoZSAkdmlldyBzZXJ2aWNlLCBzbyBpdCBjYW4gaW52b2tlIGhvb2tzXG4gICAgICAgICAgLy8gJHZpZXcuY29tcG9uZW50TG9hZGVkKGNvbnRyb2xsZXJJbnN0YW5jZSwgeyAkc2NvcGU6IHNjb3BlLCAkZWxlbWVudDogJGVsZW1lbnQgfSk7XG4gICAgICAgICAgLy8gc2NvcGUuJG9uKCckZGVzdHJveScsICgpID0+ICR2aWV3LmNvbXBvbmVudFVubG9hZGVkKGNvbnRyb2xsZXJJbnN0YW5jZSwgeyAkc2NvcGU6IHNjb3BlLCAkZWxlbWVudDogJGVsZW1lbnQgfSkpO1xuXG4gICAgICAgICAgJGVsZW1lbnQuZGF0YSgnJG5nQ29udHJvbGxlckNvbnRyb2xsZXInLCBjb250cm9sbGVySW5zdGFuY2UpO1xuICAgICAgICAgICRlbGVtZW50LmNoaWxkcmVuKCkuZGF0YSgnJG5nQ29udHJvbGxlckNvbnRyb2xsZXInLCBjb250cm9sbGVySW5zdGFuY2UpO1xuXG4gICAgICAgICAgcmVnaXN0ZXJDb250cm9sbGVyQ2FsbGJhY2tzKCRxLCAkdHJhbnNpdGlvbnMsIGNvbnRyb2xsZXJJbnN0YW5jZSwgc2NvcGUsIGNmZyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXYWl0IGZvciB0aGUgY29tcG9uZW50IHRvIGFwcGVhciBpbiB0aGUgRE9NXG4gICAgICAgIGlmIChpc1N0cmluZyhjZmcuY29tcG9uZW50KSkge1xuICAgICAgICAgIGNvbnN0IGtlYm9iTmFtZSA9IGtlYm9iU3RyaW5nKGNmZy5jb21wb25lbnQpO1xuICAgICAgICAgIGNvbnN0IHRhZ1JlZ2V4cCA9IG5ldyBSZWdFeHAoYF4oeC18ZGF0YS0pPyR7a2Vib2JOYW1lfSRgLCAnaScpO1xuXG4gICAgICAgICAgY29uc3QgZ2V0Q29tcG9uZW50Q29udHJvbGxlciA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGl2ZUVsID0gW10uc2xpY2VcbiAgICAgICAgICAgICAgLmNhbGwoJGVsZW1lbnRbMF0uY2hpbGRyZW4pXG4gICAgICAgICAgICAgIC5maWx0ZXIoKGVsOiBFbGVtZW50KSA9PiBlbCAmJiBlbC50YWdOYW1lICYmIHRhZ1JlZ2V4cC5leGVjKGVsLnRhZ05hbWUpKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZUVsICYmIGFuZ3VsYXIuZWxlbWVudChkaXJlY3RpdmVFbCkuZGF0YShgJCR7Y2ZnLmNvbXBvbmVudH1Db250cm9sbGVyYCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNvbnN0IGRlcmVnaXN0ZXJXYXRjaCA9IHNjb3BlLiR3YXRjaChnZXRDb21wb25lbnRDb250cm9sbGVyLCBmdW5jdGlvbihjdHJsSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIGlmICghY3RybEluc3RhbmNlKSByZXR1cm47XG4gICAgICAgICAgICByZWdpc3RlckNvbnRyb2xsZXJDYWxsYmFja3MoJHEsICR0cmFuc2l0aW9ucywgY3RybEluc3RhbmNlLCBzY29wZSwgY2ZnKTtcbiAgICAgICAgICAgIGRlcmVnaXN0ZXJXYXRjaCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGluayhzY29wZSk7XG4gICAgICB9O1xuICAgIH0sXG4gIH07XG59XG5cbi8qKiBAaGlkZGVuICovXG5jb25zdCBoYXNDb21wb25lbnRJbXBsID0gdHlwZW9mIChhbmd1bGFyIGFzIGFueSkubW9kdWxlKCd1aS5yb3V0ZXInKVsnY29tcG9uZW50J10gPT09ICdmdW5jdGlvbic7XG4vKiogQGhpZGRlbiBpbmNyZW1lbnRpbmcgaWQgKi9cbmxldCBfdWlDYW5FeGl0SWQgPSAwO1xuXG4vKiogQGhpZGRlbiBUT0RPOiBtb3ZlIHRoZXNlIGNhbGxiYWNrcyB0byAkdmlldyBhbmQvb3IgYC9ob29rcy9jb21wb25lbnRzLnRzYCBvciBzb21ldGhpbmcgKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyQ29udHJvbGxlckNhbGxiYWNrcyhcbiAgJHE6IGFuZ3VsYXIuSVFTZXJ2aWNlLFxuICAkdHJhbnNpdGlvbnM6IFRyYW5zaXRpb25TZXJ2aWNlLFxuICBjb250cm9sbGVySW5zdGFuY2U6IE5nMUNvbnRyb2xsZXIsXG4gICRzY29wZTogSVNjb3BlLFxuICBjZmc6IE5nMVZpZXdDb25maWdcbikge1xuICAvLyBDYWxsICRvbkluaXQoKSBBU0FQXG4gIGlmIChpc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS4kb25Jbml0KSAmJiAhKChjZmcudmlld0RlY2wuY29tcG9uZW50IHx8IGNmZy52aWV3RGVjbC5jb21wb25lbnRQcm92aWRlcikgJiYgaGFzQ29tcG9uZW50SW1wbCkpIHtcbiAgICBjb250cm9sbGVySW5zdGFuY2UuJG9uSW5pdCgpO1xuICB9XG5cbiAgY29uc3Qgdmlld1N0YXRlOiBOZzFTdGF0ZURlY2xhcmF0aW9uID0gdGFpbChjZmcucGF0aCkuc3RhdGUuc2VsZjtcblxuICBjb25zdCBob29rT3B0aW9uczogSG9va1JlZ09wdGlvbnMgPSB7IGJpbmQ6IGNvbnRyb2xsZXJJbnN0YW5jZSB9O1xuICAvLyBBZGQgY29tcG9uZW50LWxldmVsIGhvb2sgZm9yIG9uVWlQYXJhbXNDaGFuZ2VkXG4gIGlmIChpc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS51aU9uUGFyYW1zQ2hhbmdlZCkpIHtcbiAgICBjb25zdCByZXNvbHZlQ29udGV4dDogUmVzb2x2ZUNvbnRleHQgPSBuZXcgUmVzb2x2ZUNvbnRleHQoY2ZnLnBhdGgpO1xuICAgIGNvbnN0IHZpZXdDcmVhdGlvblRyYW5zID0gcmVzb2x2ZUNvbnRleHQuZ2V0UmVzb2x2YWJsZSgnJHRyYW5zaXRpb24kJykuZGF0YTtcblxuICAgIC8vIEZpcmUgY2FsbGJhY2sgb24gYW55IHN1Y2Nlc3NmdWwgdHJhbnNpdGlvblxuICAgIGNvbnN0IHBhcmFtc1VwZGF0ZWQgPSAoJHRyYW5zaXRpb24kOiBUcmFuc2l0aW9uKSA9PiB7XG4gICAgICAvLyBFeGl0IGVhcmx5IGlmIHRoZSAkdHJhbnNpdGlvbiQgaXMgdGhlIHNhbWUgYXMgdGhlIHZpZXcgd2FzIGNyZWF0ZWQgd2l0aGluLlxuICAgICAgLy8gRXhpdCBlYXJseSBpZiB0aGUgJHRyYW5zaXRpb24kIHdpbGwgZXhpdCB0aGUgc3RhdGUgdGhlIHZpZXcgaXMgZm9yLlxuICAgICAgaWYgKCR0cmFuc2l0aW9uJCA9PT0gdmlld0NyZWF0aW9uVHJhbnMgfHwgJHRyYW5zaXRpb24kLmV4aXRpbmcoKS5pbmRleE9mKHZpZXdTdGF0ZSBhcyBTdGF0ZURlY2xhcmF0aW9uKSAhPT0gLTEpXG4gICAgICAgIHJldHVybjtcblxuICAgICAgY29uc3QgdG9QYXJhbXMgPSAkdHJhbnNpdGlvbiQucGFyYW1zKCd0bycpIGFzIFR5cGVkTWFwPGFueT47XG4gICAgICBjb25zdCBmcm9tUGFyYW1zID0gJHRyYW5zaXRpb24kLnBhcmFtczxUeXBlZE1hcDxhbnk+PignZnJvbScpIGFzIFR5cGVkTWFwPGFueT47XG4gICAgICBjb25zdCBnZXROb2RlU2NoZW1hID0gKG5vZGU6IFBhdGhOb2RlKSA9PiBub2RlLnBhcmFtU2NoZW1hO1xuICAgICAgY29uc3QgdG9TY2hlbWE6IFBhcmFtW10gPSAkdHJhbnNpdGlvbiRcbiAgICAgICAgLnRyZWVDaGFuZ2VzKCd0bycpXG4gICAgICAgIC5tYXAoZ2V0Tm9kZVNjaGVtYSlcbiAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSk7XG4gICAgICBjb25zdCBmcm9tU2NoZW1hOiBQYXJhbVtdID0gJHRyYW5zaXRpb24kXG4gICAgICAgIC50cmVlQ2hhbmdlcygnZnJvbScpXG4gICAgICAgIC5tYXAoZ2V0Tm9kZVNjaGVtYSlcbiAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSk7XG5cbiAgICAgIC8vIEZpbmQgdGhlIHRvIHBhcmFtcyB0aGF0IGhhdmUgZGlmZmVyZW50IHZhbHVlcyB0aGFuIHRoZSBmcm9tIHBhcmFtc1xuICAgICAgY29uc3QgY2hhbmdlZFRvUGFyYW1zID0gdG9TY2hlbWEuZmlsdGVyKChwYXJhbTogUGFyYW0pID0+IHtcbiAgICAgICAgY29uc3QgaWR4ID0gZnJvbVNjaGVtYS5pbmRleE9mKHBhcmFtKTtcbiAgICAgICAgcmV0dXJuIGlkeCA9PT0gLTEgfHwgIWZyb21TY2hlbWFbaWR4XS50eXBlLmVxdWFscyh0b1BhcmFtc1twYXJhbS5pZF0sIGZyb21QYXJhbXNbcGFyYW0uaWRdKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPbmx5IHRyaWdnZXIgY2FsbGJhY2sgaWYgYSB0byBwYXJhbSBoYXMgY2hhbmdlZCBvciBpcyBuZXdcbiAgICAgIGlmIChjaGFuZ2VkVG9QYXJhbXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGNoYW5nZWRLZXlzOiBzdHJpbmdbXSA9IGNoYW5nZWRUb1BhcmFtcy5tYXAoeCA9PiB4LmlkKTtcbiAgICAgICAgLy8gRmlsdGVyIHRoZSBwYXJhbXMgdG8gb25seSBjaGFuZ2VkL25ldyB0byBwYXJhbXMuICBgJHRyYW5zaXRpb24kLnBhcmFtcygpYCBtYXkgYmUgdXNlZCB0byBnZXQgYWxsIHBhcmFtcy5cbiAgICAgICAgY29uc3QgbmV3VmFsdWVzID0gZmlsdGVyKHRvUGFyYW1zLCAodmFsLCBrZXkpID0+IGNoYW5nZWRLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb250cm9sbGVySW5zdGFuY2UudWlPblBhcmFtc0NoYW5nZWQobmV3VmFsdWVzLCAkdHJhbnNpdGlvbiQpO1xuICAgICAgfVxuICAgIH07XG4gICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCA8YW55PiR0cmFuc2l0aW9ucy5vblN1Y2Nlc3Moe30sIHBhcmFtc1VwZGF0ZWQsIGhvb2tPcHRpb25zKSk7XG4gIH1cblxuICAvLyBBZGQgY29tcG9uZW50LWxldmVsIGhvb2sgZm9yIHVpQ2FuRXhpdFxuICBpZiAoaXNGdW5jdGlvbihjb250cm9sbGVySW5zdGFuY2UudWlDYW5FeGl0KSkge1xuICAgIGNvbnN0IGlkID0gX3VpQ2FuRXhpdElkKys7XG4gICAgY29uc3QgY2FjaGVQcm9wID0gJ191aUNhbkV4aXRJZHMnO1xuXG4gICAgLy8gUmV0dXJucyB0cnVlIGlmIGEgcmVkaXJlY3QgdHJhbnNpdGlvbiBhbHJlYWR5IGFuc3dlcmVkIHRydXRoeVxuICAgIGNvbnN0IHByZXZUcnV0aHlBbnN3ZXIgPSAodHJhbnM6IFRyYW5zaXRpb24pID0+XG4gICAgICAhIXRyYW5zICYmICgodHJhbnNbY2FjaGVQcm9wXSAmJiB0cmFuc1tjYWNoZVByb3BdW2lkXSA9PT0gdHJ1ZSkgfHwgcHJldlRydXRoeUFuc3dlcih0cmFucy5yZWRpcmVjdGVkRnJvbSgpKSk7XG5cbiAgICAvLyBJZiBhIHVzZXIgYW5zd2VyZWQgeWVzLCBidXQgdGhlIHRyYW5zaXRpb24gd2FzIGxhdGVyIHJlZGlyZWN0ZWQsIGRvbid0IGFsc28gYXNrIGZvciB0aGUgbmV3IHJlZGlyZWN0IHRyYW5zaXRpb25cbiAgICBjb25zdCB3cmFwcGVkSG9vayA9ICh0cmFuczogVHJhbnNpdGlvbikgPT4ge1xuICAgICAgbGV0IHByb21pc2U7XG4gICAgICBjb25zdCBpZHMgPSAodHJhbnNbY2FjaGVQcm9wXSA9IHRyYW5zW2NhY2hlUHJvcF0gfHwge30pO1xuXG4gICAgICBpZiAoIXByZXZUcnV0aHlBbnN3ZXIodHJhbnMpKSB7XG4gICAgICAgIHByb21pc2UgPSAkcS53aGVuKGNvbnRyb2xsZXJJbnN0YW5jZS51aUNhbkV4aXQodHJhbnMpKTtcbiAgICAgICAgcHJvbWlzZS50aGVuKHZhbCA9PiAoaWRzW2lkXSA9IHZhbCAhPT0gZmFsc2UpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH07XG5cbiAgICBjb25zdCBjcml0ZXJpYSA9IHsgZXhpdGluZzogdmlld1N0YXRlLm5hbWUgfTtcbiAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIDxhbnk+JHRyYW5zaXRpb25zLm9uQmVmb3JlKGNyaXRlcmlhLCB3cmFwcGVkSG9vaywgaG9va09wdGlvbnMpKTtcbiAgfVxufVxuXG5hbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykuZGlyZWN0aXZlKCd1aVZpZXcnLCA8YW55PnVpVmlldyk7XG5hbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykuZGlyZWN0aXZlKCd1aVZpZXcnLCA8YW55PiRWaWV3RGlyZWN0aXZlRmlsbCk7XG4iLCIvKiogQHB1YmxpY2FwaSBAbW9kdWxlIG5nMSAqLyAvKiogKi9cbmltcG9ydCB7IG5nIGFzIGFuZ3VsYXIgfSBmcm9tICcuL2FuZ3VsYXInO1xuaW1wb3J0IHsgSVNlcnZpY2VQcm92aWRlckZhY3RvcnkgfSBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBJQW5jaG9yU2Nyb2xsU2VydmljZSA9IGFuZ3VsYXIuSUFuY2hvclNjcm9sbFNlcnZpY2U7XG5pbXBvcnQgSVRpbWVvdXRTZXJ2aWNlID0gYW5ndWxhci5JVGltZW91dFNlcnZpY2U7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVUlWaWV3U2Nyb2xsUHJvdmlkZXIge1xuICAvKipcbiAgICogVXNlcyBzdGFuZGFyZCBhbmNob3JTY3JvbGwgYmVoYXZpb3JcbiAgICpcbiAgICogUmV2ZXJ0cyBbWyR1aVZpZXdTY3JvbGxdXSBiYWNrIHRvIHVzaW5nIHRoZSBjb3JlIFtgJGFuY2hvclNjcm9sbGBdKGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nLiRhbmNob3JTY3JvbGwpXG4gICAqIHNlcnZpY2UgZm9yIHNjcm9sbGluZyBiYXNlZCBvbiB0aGUgdXJsIGFuY2hvci5cbiAgICovXG4gIHVzZUFuY2hvclNjcm9sbCgpOiB2b2lkO1xufVxuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gJFZpZXdTY3JvbGxQcm92aWRlcigpIHtcbiAgbGV0IHVzZUFuY2hvclNjcm9sbCA9IGZhbHNlO1xuXG4gIHRoaXMudXNlQW5jaG9yU2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgdXNlQW5jaG9yU2Nyb2xsID0gdHJ1ZTtcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBbXG4gICAgJyRhbmNob3JTY3JvbGwnLFxuICAgICckdGltZW91dCcsXG4gICAgZnVuY3Rpb24oJGFuY2hvclNjcm9sbDogSUFuY2hvclNjcm9sbFNlcnZpY2UsICR0aW1lb3V0OiBJVGltZW91dFNlcnZpY2UpOiBGdW5jdGlvbiB7XG4gICAgICBpZiAodXNlQW5jaG9yU2Nyb2xsKSB7XG4gICAgICAgIHJldHVybiAkYW5jaG9yU2Nyb2xsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZnVuY3Rpb24oJGVsZW1lbnQ6IEpRdWVyeSkge1xuICAgICAgICByZXR1cm4gJHRpbWVvdXQoXG4gICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkZWxlbWVudFswXS5zY3JvbGxJbnRvVmlldygpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgMCxcbiAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgfTtcbiAgICB9LFxuICBdO1xufVxuXG5hbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykucHJvdmlkZXIoJyR1aVZpZXdTY3JvbGwnLCA8SVNlcnZpY2VQcm92aWRlckZhY3Rvcnk+JFZpZXdTY3JvbGxQcm92aWRlcik7XG4iLCIvKipcbiAqIE1haW4gZW50cnkgcG9pbnQgZm9yIGFuZ3VsYXIgMS54IGJ1aWxkXG4gKiBAcHVibGljYXBpIEBtb2R1bGUgbmcxXG4gKi8gLyoqICovXG5leHBvcnQgKiBmcm9tICcuL2ludGVyZmFjZSc7XG5leHBvcnQgKiBmcm9tICcuL3NlcnZpY2VzJztcbmV4cG9ydCAqIGZyb20gJy4vc3RhdGVidWlsZGVycy92aWV3cyc7XG5leHBvcnQgKiBmcm9tICcuL3N0YXRlUHJvdmlkZXInO1xuZXhwb3J0ICogZnJvbSAnLi91cmxSb3V0ZXJQcm92aWRlcic7XG5cbmltcG9ydCAnLi9pbmplY3RhYmxlcyc7XG5pbXBvcnQgJy4vZGlyZWN0aXZlcy9zdGF0ZURpcmVjdGl2ZXMnO1xuaW1wb3J0ICcuL3N0YXRlRmlsdGVycyc7XG5pbXBvcnQgJy4vZGlyZWN0aXZlcy92aWV3RGlyZWN0aXZlJztcbmltcG9ydCAnLi92aWV3U2Nyb2xsJztcblxuZXhwb3J0IGRlZmF1bHQgJ3VpLnJvdXRlcic7XG5cbmltcG9ydCAqIGFzIGNvcmUgZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuZXhwb3J0IHsgY29yZSB9O1xuZXhwb3J0ICogZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJ1aS1yb3V0ZXItdmlzdWFsaXplclwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJ1aS1yb3V0ZXItdmlzdWFsaXplclwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJ1aS1yb3V0ZXItdmlzdWFsaXplclwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcInVpLXJvdXRlci12aXN1YWxpemVyXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInVpLXJvdXRlci12aXN1YWxpemVyXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcInVpLXJvdXRlci12aXN1YWxpemVyXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2J1bmRsZXMvXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdHZhciBwcmVhY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0dmFyIHN0YXRlU2VsZWN0b3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcblx0ZXhwb3J0cy5TdGF0ZVNlbGVjdG9yID0gc3RhdGVTZWxlY3Rvcl8xLlN0YXRlU2VsZWN0b3I7XHJcblx0dmFyIHN0YXRlVmlzdWFsaXplcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcclxuXHRleHBvcnRzLlN0YXRlVmlzdWFsaXplciA9IHN0YXRlVmlzdWFsaXplcl8xLlN0YXRlVmlzdWFsaXplcjtcclxuXHR2YXIgc3RhdGVUcmVlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcclxuXHRleHBvcnRzLlN0YXRlVHJlZSA9IHN0YXRlVHJlZV8xLlN0YXRlVHJlZTtcclxuXHR2YXIgdHJhbnNpdGlvblZpc3VhbGl6ZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xyXG5cdGV4cG9ydHMuVHJhbnNpdGlvblZpc3VhbGl6ZXIgPSB0cmFuc2l0aW9uVmlzdWFsaXplcl8xLlRyYW5zaXRpb25WaXN1YWxpemVyO1xyXG5cdHZhciB2aXN1YWxpemVyID0gZnVuY3Rpb24gKHJvdXRlcikgeyByZXR1cm4gbmV3IFZpc3VhbGl6ZXIocm91dGVyLCB7fSk7IH07XHJcblx0ZXhwb3J0cy52aXN1YWxpemVyID0gdmlzdWFsaXplcjtcclxuXHRmdW5jdGlvbiB1bm1vdW50Q29tcG9uZW50KG5vZGUpIHtcclxuXHQgICAgdmFyIE5vdGhpbmcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBudWxsOyB9O1xyXG5cdCAgICBwcmVhY3RfMS5yZW5kZXIocHJlYWN0XzEuaChOb3RoaW5nLCBudWxsKSwgZG9jdW1lbnQuYm9keSwgbm9kZSk7XHJcblx0fVxyXG5cdHZhciBERUZBVUxUUyA9IHtcclxuXHQgICAgc3RhdGU6IHRydWUsXHJcblx0ICAgIHRyYW5zaXRpb246IHRydWUsXHJcblx0fTtcclxuXHR2YXIgVmlzdWFsaXplciA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFZpc3VhbGl6ZXIocm91dGVyLCBvcHRpb25zKSB7XHJcblx0ICAgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcclxuXHQgICAgICAgIHRoaXMubmFtZSA9IFwidmlzdWFsaXplclwiO1xyXG5cdCAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRTLCBvcHRpb25zKTtcclxuXHQgICAgICAgIGlmIChvcHRpb25zLnN0YXRlKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5zdGF0ZVZpc3VhbGl6ZXJFbCA9IHN0YXRlVmlzdWFsaXplcl8xLlN0YXRlVmlzdWFsaXplci5jcmVhdGUocm91dGVyKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGlmIChvcHRpb25zLnRyYW5zaXRpb24pIHtcclxuXHQgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25WaXN1YWxpemVyRWwgPSB0cmFuc2l0aW9uVmlzdWFsaXplcl8xLlRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZShyb3V0ZXIpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9XHJcblx0ICAgIFZpc3VhbGl6ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocm91dGVyKSB7XHJcblx0ICAgICAgICB0aGlzLnN0YXRlVmlzdWFsaXplckVsICYmIHVubW91bnRDb21wb25lbnQodGhpcy5zdGF0ZVZpc3VhbGl6ZXJFbCk7XHJcblx0ICAgICAgICB0aGlzLnRyYW5zaXRpb25WaXN1YWxpemVyRWwgJiYgdW5tb3VudENvbXBvbmVudCh0aGlzLnRyYW5zaXRpb25WaXN1YWxpemVyRWwpO1xyXG5cdCAgICAgICAgdGhpcy5zdGF0ZVZpc3VhbGl6ZXJFbCA9IG51bGw7XHJcblx0ICAgICAgICB0aGlzLnRyYW5zaXRpb25WaXN1YWxpemVyRWwgPSBudWxsO1xyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gVmlzdWFsaXplcjtcclxuXHR9KCkpO1xyXG5cdGV4cG9ydHMuVmlzdWFsaXplciA9IFZpc3VhbGl6ZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQhZnVuY3Rpb24oZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdCAgICAgdHJ1ZSA/IGZhY3RvcnkoZXhwb3J0cykgOiAnZnVuY3Rpb24nID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbICdleHBvcnRzJyBdLCBmYWN0b3J5KSA6IGZhY3RvcnkoZ2xvYmFsLnByZWFjdCA9IGdsb2JhbC5wcmVhY3QgfHwge30pO1xuXHR9KHRoaXMsIGZ1bmN0aW9uKGV4cG9ydHMpIHtcblx0ICAgIGZ1bmN0aW9uIFZOb2RlKG5vZGVOYW1lLCBhdHRyaWJ1dGVzLCBjaGlsZHJlbikge1xuXHQgICAgICAgIHRoaXMubm9kZU5hbWUgPSBub2RlTmFtZTtcblx0ICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuXHQgICAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcblx0ICAgICAgICB0aGlzLmtleSA9IGF0dHJpYnV0ZXMgJiYgYXR0cmlidXRlcy5rZXk7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBoKG5vZGVOYW1lLCBhdHRyaWJ1dGVzKSB7XG5cdCAgICAgICAgdmFyIGNoaWxkcmVuLCBsYXN0U2ltcGxlLCBjaGlsZCwgc2ltcGxlLCBpO1xuXHQgICAgICAgIGZvciAoaSA9IGFyZ3VtZW50cy5sZW5ndGg7IGktLSA+IDI7ICkgc3RhY2sucHVzaChhcmd1bWVudHNbaV0pO1xuXHQgICAgICAgIGlmIChhdHRyaWJ1dGVzICYmIGF0dHJpYnV0ZXMuY2hpbGRyZW4pIHtcblx0ICAgICAgICAgICAgaWYgKCFzdGFjay5sZW5ndGgpIHN0YWNrLnB1c2goYXR0cmlidXRlcy5jaGlsZHJlbik7XG5cdCAgICAgICAgICAgIGRlbGV0ZSBhdHRyaWJ1dGVzLmNoaWxkcmVuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoKSBpZiAoKGNoaWxkID0gc3RhY2sucG9wKCkpIGluc3RhbmNlb2YgQXJyYXkpIGZvciAoaSA9IGNoaWxkLmxlbmd0aDsgaS0tOyApIHN0YWNrLnB1c2goY2hpbGRbaV0pOyBlbHNlIGlmIChudWxsICE9IGNoaWxkICYmIGNoaWxkICE9PSAhMCAmJiBjaGlsZCAhPT0gITEpIHtcblx0ICAgICAgICAgICAgaWYgKCdudW1iZXInID09IHR5cGVvZiBjaGlsZCkgY2hpbGQgPSBTdHJpbmcoY2hpbGQpO1xuXHQgICAgICAgICAgICBzaW1wbGUgPSAnc3RyaW5nJyA9PSB0eXBlb2YgY2hpbGQ7XG5cdCAgICAgICAgICAgIGlmIChzaW1wbGUgJiYgbGFzdFNpbXBsZSkgY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV0gKz0gY2hpbGQ7IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgKGNoaWxkcmVuIHx8IChjaGlsZHJlbiA9IFtdKSkucHVzaChjaGlsZCk7XG5cdCAgICAgICAgICAgICAgICBsYXN0U2ltcGxlID0gc2ltcGxlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBwID0gbmV3IFZOb2RlKG5vZGVOYW1lLCBhdHRyaWJ1dGVzIHx8IHZvaWQgMCwgY2hpbGRyZW4gfHwgRU1QVFlfQ0hJTERSRU4pO1xuXHQgICAgICAgIGlmIChvcHRpb25zLnZub2RlKSBvcHRpb25zLnZub2RlKHApO1xuXHQgICAgICAgIHJldHVybiBwO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gZXh0ZW5kKG9iaiwgcHJvcHMpIHtcblx0ICAgICAgICBpZiAocHJvcHMpIGZvciAodmFyIGkgaW4gcHJvcHMpIG9ialtpXSA9IHByb3BzW2ldO1xuXHQgICAgICAgIHJldHVybiBvYmo7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBjbG9uZShvYmopIHtcblx0ICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCBvYmopO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gZGVsdmUob2JqLCBrZXkpIHtcblx0ICAgICAgICBmb3IgKHZhciBwID0ga2V5LnNwbGl0KCcuJyksIGkgPSAwOyBpIDwgcC5sZW5ndGggJiYgb2JqOyBpKyspIG9iaiA9IG9ialtwW2ldXTtcblx0ICAgICAgICByZXR1cm4gb2JqO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gaXNGdW5jdGlvbihvYmopIHtcblx0ICAgICAgICByZXR1cm4gJ2Z1bmN0aW9uJyA9PSB0eXBlb2Ygb2JqO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gaXNTdHJpbmcob2JqKSB7XG5cdCAgICAgICAgcmV0dXJuICdzdHJpbmcnID09IHR5cGVvZiBvYmo7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBoYXNoVG9DbGFzc05hbWUoYykge1xuXHQgICAgICAgIHZhciBzdHIgPSAnJztcblx0ICAgICAgICBmb3IgKHZhciBwcm9wIGluIGMpIGlmIChjW3Byb3BdKSB7XG5cdCAgICAgICAgICAgIGlmIChzdHIpIHN0ciArPSAnICc7XG5cdCAgICAgICAgICAgIHN0ciArPSBwcm9wO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gc3RyO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gY2xvbmVFbGVtZW50KHZub2RlLCBwcm9wcykge1xuXHQgICAgICAgIHJldHVybiBoKHZub2RlLm5vZGVOYW1lLCBleHRlbmQoY2xvbmUodm5vZGUuYXR0cmlidXRlcyksIHByb3BzKSwgYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMikgOiB2bm9kZS5jaGlsZHJlbik7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBjcmVhdGVMaW5rZWRTdGF0ZShjb21wb25lbnQsIGtleSwgZXZlbnRQYXRoKSB7XG5cdCAgICAgICAgdmFyIHBhdGggPSBrZXkuc3BsaXQoJy4nKTtcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuXHQgICAgICAgICAgICB2YXIgdCA9IGUgJiYgZS50YXJnZXQgfHwgdGhpcywgc3RhdGUgPSB7fSwgb2JqID0gc3RhdGUsIHYgPSBpc1N0cmluZyhldmVudFBhdGgpID8gZGVsdmUoZSwgZXZlbnRQYXRoKSA6IHQubm9kZU5hbWUgPyB0LnR5cGUubWF0Y2goL15jaGV8cmFkLykgPyB0LmNoZWNrZWQgOiB0LnZhbHVlIDogZSwgaSA9IDA7XG5cdCAgICAgICAgICAgIGZvciAoO2kgPCBwYXRoLmxlbmd0aCAtIDE7IGkrKykgb2JqID0gb2JqW3BhdGhbaV1dIHx8IChvYmpbcGF0aFtpXV0gPSAhaSAmJiBjb21wb25lbnQuc3RhdGVbcGF0aFtpXV0gfHwge30pO1xuXHQgICAgICAgICAgICBvYmpbcGF0aFtpXV0gPSB2O1xuXHQgICAgICAgICAgICBjb21wb25lbnQuc2V0U3RhdGUoc3RhdGUpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBlbnF1ZXVlUmVuZGVyKGNvbXBvbmVudCkge1xuXHQgICAgICAgIGlmICghY29tcG9uZW50Ll9kaXJ0eSAmJiAoY29tcG9uZW50Ll9kaXJ0eSA9ICEwKSAmJiAxID09IGl0ZW1zLnB1c2goY29tcG9uZW50KSkgKG9wdGlvbnMuZGVib3VuY2VSZW5kZXJpbmcgfHwgZGVmZXIpKHJlcmVuZGVyKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHJlcmVuZGVyKCkge1xuXHQgICAgICAgIHZhciBwLCBsaXN0ID0gaXRlbXM7XG5cdCAgICAgICAgaXRlbXMgPSBbXTtcblx0ICAgICAgICB3aGlsZSAocCA9IGxpc3QucG9wKCkpIGlmIChwLl9kaXJ0eSkgcmVuZGVyQ29tcG9uZW50KHApO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gaXNGdW5jdGlvbmFsQ29tcG9uZW50KHZub2RlKSB7XG5cdCAgICAgICAgdmFyIG5vZGVOYW1lID0gdm5vZGUgJiYgdm5vZGUubm9kZU5hbWU7XG5cdCAgICAgICAgcmV0dXJuIG5vZGVOYW1lICYmIGlzRnVuY3Rpb24obm9kZU5hbWUpICYmICEobm9kZU5hbWUucHJvdG90eXBlICYmIG5vZGVOYW1lLnByb3RvdHlwZS5yZW5kZXIpO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gYnVpbGRGdW5jdGlvbmFsQ29tcG9uZW50KHZub2RlLCBjb250ZXh0KSB7XG5cdCAgICAgICAgcmV0dXJuIHZub2RlLm5vZGVOYW1lKGdldE5vZGVQcm9wcyh2bm9kZSksIGNvbnRleHQgfHwgRU1QVFkpO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gaXNTYW1lTm9kZVR5cGUobm9kZSwgdm5vZGUpIHtcblx0ICAgICAgICBpZiAoaXNTdHJpbmcodm5vZGUpKSByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIFRleHQ7XG5cdCAgICAgICAgaWYgKGlzU3RyaW5nKHZub2RlLm5vZGVOYW1lKSkgcmV0dXJuICFub2RlLl9jb21wb25lbnRDb25zdHJ1Y3RvciAmJiBpc05hbWVkTm9kZShub2RlLCB2bm9kZS5ub2RlTmFtZSk7XG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb24odm5vZGUubm9kZU5hbWUpKSByZXR1cm4gKG5vZGUuX2NvbXBvbmVudENvbnN0cnVjdG9yID8gbm9kZS5fY29tcG9uZW50Q29uc3RydWN0b3IgPT09IHZub2RlLm5vZGVOYW1lIDogITApIHx8IGlzRnVuY3Rpb25hbENvbXBvbmVudCh2bm9kZSk7IGVsc2UgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gaXNOYW1lZE5vZGUobm9kZSwgbm9kZU5hbWUpIHtcblx0ICAgICAgICByZXR1cm4gbm9kZS5ub3JtYWxpemVkTm9kZU5hbWUgPT09IG5vZGVOYW1lIHx8IHRvTG93ZXJDYXNlKG5vZGUubm9kZU5hbWUpID09PSB0b0xvd2VyQ2FzZShub2RlTmFtZSk7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBnZXROb2RlUHJvcHModm5vZGUpIHtcblx0ICAgICAgICB2YXIgcHJvcHMgPSBjbG9uZSh2bm9kZS5hdHRyaWJ1dGVzKTtcblx0ICAgICAgICBwcm9wcy5jaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuO1xuXHQgICAgICAgIHZhciBkZWZhdWx0UHJvcHMgPSB2bm9kZS5ub2RlTmFtZS5kZWZhdWx0UHJvcHM7XG5cdCAgICAgICAgaWYgKGRlZmF1bHRQcm9wcykgZm9yICh2YXIgaSBpbiBkZWZhdWx0UHJvcHMpIGlmICh2b2lkIDAgPT09IHByb3BzW2ldKSBwcm9wc1tpXSA9IGRlZmF1bHRQcm9wc1tpXTtcblx0ICAgICAgICByZXR1cm4gcHJvcHM7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiByZW1vdmVOb2RlKG5vZGUpIHtcblx0ICAgICAgICB2YXIgcCA9IG5vZGUucGFyZW50Tm9kZTtcblx0ICAgICAgICBpZiAocCkgcC5yZW1vdmVDaGlsZChub2RlKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHNldEFjY2Vzc29yKG5vZGUsIG5hbWUsIG9sZCwgdmFsdWUsIGlzU3ZnKSB7XG5cdCAgICAgICAgaWYgKCdjbGFzc05hbWUnID09PSBuYW1lKSBuYW1lID0gJ2NsYXNzJztcblx0ICAgICAgICBpZiAoJ2NsYXNzJyA9PT0gbmFtZSAmJiB2YWx1ZSAmJiAnb2JqZWN0JyA9PSB0eXBlb2YgdmFsdWUpIHZhbHVlID0gaGFzaFRvQ2xhc3NOYW1lKHZhbHVlKTtcblx0ICAgICAgICBpZiAoJ2tleScgPT09IG5hbWUpIDsgZWxzZSBpZiAoJ2NsYXNzJyA9PT0gbmFtZSAmJiAhaXNTdmcpIG5vZGUuY2xhc3NOYW1lID0gdmFsdWUgfHwgJyc7IGVsc2UgaWYgKCdzdHlsZScgPT09IG5hbWUpIHtcblx0ICAgICAgICAgICAgaWYgKCF2YWx1ZSB8fCBpc1N0cmluZyh2YWx1ZSkgfHwgaXNTdHJpbmcob2xkKSkgbm9kZS5zdHlsZS5jc3NUZXh0ID0gdmFsdWUgfHwgJyc7XG5cdCAgICAgICAgICAgIGlmICh2YWx1ZSAmJiAnb2JqZWN0JyA9PSB0eXBlb2YgdmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgIGlmICghaXNTdHJpbmcob2xkKSkgZm9yICh2YXIgaSBpbiBvbGQpIGlmICghKGkgaW4gdmFsdWUpKSBub2RlLnN0eWxlW2ldID0gJyc7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHZhbHVlKSBub2RlLnN0eWxlW2ldID0gJ251bWJlcicgPT0gdHlwZW9mIHZhbHVlW2ldICYmICFOT05fRElNRU5TSU9OX1BST1BTW2ldID8gdmFsdWVbaV0gKyAncHgnIDogdmFsdWVbaV07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKCdkYW5nZXJvdXNseVNldElubmVySFRNTCcgPT09IG5hbWUpIHtcblx0ICAgICAgICAgICAgaWYgKHZhbHVlKSBub2RlLmlubmVySFRNTCA9IHZhbHVlLl9faHRtbCB8fCAnJztcblx0ICAgICAgICB9IGVsc2UgaWYgKCdvJyA9PSBuYW1lWzBdICYmICduJyA9PSBuYW1lWzFdKSB7XG5cdCAgICAgICAgICAgIHZhciBsID0gbm9kZS5fbGlzdGVuZXJzIHx8IChub2RlLl9saXN0ZW5lcnMgPSB7fSk7XG5cdCAgICAgICAgICAgIG5hbWUgPSB0b0xvd2VyQ2FzZShuYW1lLnN1YnN0cmluZygyKSk7XG5cdCAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgaWYgKCFsW25hbWVdKSBub2RlLmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgZXZlbnRQcm94eSwgISFOT05fQlVCQkxJTkdfRVZFTlRTW25hbWVdKTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChsW25hbWVdKSBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgZXZlbnRQcm94eSwgISFOT05fQlVCQkxJTkdfRVZFTlRTW25hbWVdKTtcblx0ICAgICAgICAgICAgbFtuYW1lXSA9IHZhbHVlO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoJ2xpc3QnICE9PSBuYW1lICYmICd0eXBlJyAhPT0gbmFtZSAmJiAhaXNTdmcgJiYgbmFtZSBpbiBub2RlKSB7XG5cdCAgICAgICAgICAgIHNldFByb3BlcnR5KG5vZGUsIG5hbWUsIG51bGwgPT0gdmFsdWUgPyAnJyA6IHZhbHVlKTtcblx0ICAgICAgICAgICAgaWYgKG51bGwgPT0gdmFsdWUgfHwgdmFsdWUgPT09ICExKSBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB2YXIgbnMgPSBpc1N2ZyAmJiBuYW1lLm1hdGNoKC9eeGxpbmtcXDo/KC4rKS8pO1xuXHQgICAgICAgICAgICBpZiAobnVsbCA9PSB2YWx1ZSB8fCB2YWx1ZSA9PT0gITEpIGlmIChucykgbm9kZS5yZW1vdmVBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIHRvTG93ZXJDYXNlKG5zWzFdKSk7IGVsc2Ugbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7IGVsc2UgaWYgKCdvYmplY3QnICE9IHR5cGVvZiB2YWx1ZSAmJiAhaXNGdW5jdGlvbih2YWx1ZSkpIGlmIChucykgbm9kZS5zZXRBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIHRvTG93ZXJDYXNlKG5zWzFdKSwgdmFsdWUpOyBlbHNlIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBzZXRQcm9wZXJ0eShub2RlLCBuYW1lLCB2YWx1ZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIG5vZGVbbmFtZV0gPSB2YWx1ZTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gZXZlbnRQcm94eShlKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3RlbmVyc1tlLnR5cGVdKG9wdGlvbnMuZXZlbnQgJiYgb3B0aW9ucy5ldmVudChlKSB8fCBlKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGNvbGxlY3ROb2RlKG5vZGUpIHtcblx0ICAgICAgICByZW1vdmVOb2RlKG5vZGUpO1xuXHQgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgRWxlbWVudCkge1xuXHQgICAgICAgICAgICBub2RlLl9jb21wb25lbnQgPSBub2RlLl9jb21wb25lbnRDb25zdHJ1Y3RvciA9IG51bGw7XG5cdCAgICAgICAgICAgIHZhciBfbmFtZSA9IG5vZGUubm9ybWFsaXplZE5vZGVOYW1lIHx8IHRvTG93ZXJDYXNlKG5vZGUubm9kZU5hbWUpO1xuXHQgICAgICAgICAgICAobm9kZXNbX25hbWVdIHx8IChub2Rlc1tfbmFtZV0gPSBbXSkpLnB1c2gobm9kZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gY3JlYXRlTm9kZShub2RlTmFtZSwgaXNTdmcpIHtcblx0ICAgICAgICB2YXIgbmFtZSA9IHRvTG93ZXJDYXNlKG5vZGVOYW1lKSwgbm9kZSA9IG5vZGVzW25hbWVdICYmIG5vZGVzW25hbWVdLnBvcCgpIHx8IChpc1N2ZyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBub2RlTmFtZSkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lKSk7XG5cdCAgICAgICAgbm9kZS5ub3JtYWxpemVkTm9kZU5hbWUgPSBuYW1lO1xuXHQgICAgICAgIHJldHVybiBub2RlO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gZmx1c2hNb3VudHMoKSB7XG5cdCAgICAgICAgdmFyIGM7XG5cdCAgICAgICAgd2hpbGUgKGMgPSBtb3VudHMucG9wKCkpIHtcblx0ICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWZ0ZXJNb3VudCkgb3B0aW9ucy5hZnRlck1vdW50KGMpO1xuXHQgICAgICAgICAgICBpZiAoYy5jb21wb25lbnREaWRNb3VudCkgYy5jb21wb25lbnREaWRNb3VudCgpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGRpZmYoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwsIHBhcmVudCwgY29tcG9uZW50Um9vdCkge1xuXHQgICAgICAgIGlmICghZGlmZkxldmVsKyspIHtcblx0ICAgICAgICAgICAgaXNTdmdNb2RlID0gcGFyZW50ICYmIHZvaWQgMCAhPT0gcGFyZW50Lm93bmVyU1ZHRWxlbWVudDtcblx0ICAgICAgICAgICAgaHlkcmF0aW5nID0gZG9tICYmICEoQVRUUl9LRVkgaW4gZG9tKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHJldCA9IGlkaWZmKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsKTtcblx0ICAgICAgICBpZiAocGFyZW50ICYmIHJldC5wYXJlbnROb2RlICE9PSBwYXJlbnQpIHBhcmVudC5hcHBlbmRDaGlsZChyZXQpO1xuXHQgICAgICAgIGlmICghLS1kaWZmTGV2ZWwpIHtcblx0ICAgICAgICAgICAgaHlkcmF0aW5nID0gITE7XG5cdCAgICAgICAgICAgIGlmICghY29tcG9uZW50Um9vdCkgZmx1c2hNb3VudHMoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHJldDtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGlkaWZmKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsKSB7XG5cdCAgICAgICAgdmFyIHJlZiA9IHZub2RlICYmIHZub2RlLmF0dHJpYnV0ZXMgJiYgdm5vZGUuYXR0cmlidXRlcy5yZWY7XG5cdCAgICAgICAgd2hpbGUgKGlzRnVuY3Rpb25hbENvbXBvbmVudCh2bm9kZSkpIHZub2RlID0gYnVpbGRGdW5jdGlvbmFsQ29tcG9uZW50KHZub2RlLCBjb250ZXh0KTtcblx0ICAgICAgICBpZiAobnVsbCA9PSB2bm9kZSkgdm5vZGUgPSAnJztcblx0ICAgICAgICBpZiAoaXNTdHJpbmcodm5vZGUpKSB7XG5cdCAgICAgICAgICAgIGlmIChkb20gJiYgZG9tIGluc3RhbmNlb2YgVGV4dCAmJiBkb20ucGFyZW50Tm9kZSkge1xuXHQgICAgICAgICAgICAgICAgaWYgKGRvbS5ub2RlVmFsdWUgIT0gdm5vZGUpIGRvbS5ub2RlVmFsdWUgPSB2bm9kZTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGlmIChkb20pIHJlY29sbGVjdE5vZGVUcmVlKGRvbSk7XG5cdCAgICAgICAgICAgICAgICBkb20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh2bm9kZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIGRvbTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb24odm5vZGUubm9kZU5hbWUpKSByZXR1cm4gYnVpbGRDb21wb25lbnRGcm9tVk5vZGUoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwpO1xuXHQgICAgICAgIHZhciBvdXQgPSBkb20sIG5vZGVOYW1lID0gU3RyaW5nKHZub2RlLm5vZGVOYW1lKSwgcHJldlN2Z01vZGUgPSBpc1N2Z01vZGUsIHZjaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuO1xuXHQgICAgICAgIGlzU3ZnTW9kZSA9ICdzdmcnID09PSBub2RlTmFtZSA/ICEwIDogJ2ZvcmVpZ25PYmplY3QnID09PSBub2RlTmFtZSA/ICExIDogaXNTdmdNb2RlO1xuXHQgICAgICAgIGlmICghZG9tKSBvdXQgPSBjcmVhdGVOb2RlKG5vZGVOYW1lLCBpc1N2Z01vZGUpOyBlbHNlIGlmICghaXNOYW1lZE5vZGUoZG9tLCBub2RlTmFtZSkpIHtcblx0ICAgICAgICAgICAgb3V0ID0gY3JlYXRlTm9kZShub2RlTmFtZSwgaXNTdmdNb2RlKTtcblx0ICAgICAgICAgICAgd2hpbGUgKGRvbS5maXJzdENoaWxkKSBvdXQuYXBwZW5kQ2hpbGQoZG9tLmZpcnN0Q2hpbGQpO1xuXHQgICAgICAgICAgICBpZiAoZG9tLnBhcmVudE5vZGUpIGRvbS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChvdXQsIGRvbSk7XG5cdCAgICAgICAgICAgIHJlY29sbGVjdE5vZGVUcmVlKGRvbSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBmYyA9IG91dC5maXJzdENoaWxkLCBwcm9wcyA9IG91dFtBVFRSX0tFWV07XG5cdCAgICAgICAgaWYgKCFwcm9wcykge1xuXHQgICAgICAgICAgICBvdXRbQVRUUl9LRVldID0gcHJvcHMgPSB7fTtcblx0ICAgICAgICAgICAgZm9yICh2YXIgYSA9IG91dC5hdHRyaWJ1dGVzLCBpID0gYS5sZW5ndGg7IGktLTsgKSBwcm9wc1thW2ldLm5hbWVdID0gYVtpXS52YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFoeWRyYXRpbmcgJiYgdmNoaWxkcmVuICYmIDEgPT09IHZjaGlsZHJlbi5sZW5ndGggJiYgJ3N0cmluZycgPT0gdHlwZW9mIHZjaGlsZHJlblswXSAmJiBmYyAmJiBmYyBpbnN0YW5jZW9mIFRleHQgJiYgIWZjLm5leHRTaWJsaW5nKSB7XG5cdCAgICAgICAgICAgIGlmIChmYy5ub2RlVmFsdWUgIT0gdmNoaWxkcmVuWzBdKSBmYy5ub2RlVmFsdWUgPSB2Y2hpbGRyZW5bMF07XG5cdCAgICAgICAgfSBlbHNlIGlmICh2Y2hpbGRyZW4gJiYgdmNoaWxkcmVuLmxlbmd0aCB8fCBmYykgaW5uZXJEaWZmTm9kZShvdXQsIHZjaGlsZHJlbiwgY29udGV4dCwgbW91bnRBbGwsICEhcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwpO1xuXHQgICAgICAgIGRpZmZBdHRyaWJ1dGVzKG91dCwgdm5vZGUuYXR0cmlidXRlcywgcHJvcHMpO1xuXHQgICAgICAgIGlmIChyZWYpIChwcm9wcy5yZWYgPSByZWYpKG91dCk7XG5cdCAgICAgICAgaXNTdmdNb2RlID0gcHJldlN2Z01vZGU7XG5cdCAgICAgICAgcmV0dXJuIG91dDtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGlubmVyRGlmZk5vZGUoZG9tLCB2Y2hpbGRyZW4sIGNvbnRleHQsIG1vdW50QWxsLCBhYnNvcmIpIHtcblx0ICAgICAgICB2YXIgaiwgYywgdmNoaWxkLCBjaGlsZCwgb3JpZ2luYWxDaGlsZHJlbiA9IGRvbS5jaGlsZE5vZGVzLCBjaGlsZHJlbiA9IFtdLCBrZXllZCA9IHt9LCBrZXllZExlbiA9IDAsIG1pbiA9IDAsIGxlbiA9IG9yaWdpbmFsQ2hpbGRyZW4ubGVuZ3RoLCBjaGlsZHJlbkxlbiA9IDAsIHZsZW4gPSB2Y2hpbGRyZW4gJiYgdmNoaWxkcmVuLmxlbmd0aDtcblx0ICAgICAgICBpZiAobGVuKSBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICAgIHZhciBfY2hpbGQgPSBvcmlnaW5hbENoaWxkcmVuW2ldLCBwcm9wcyA9IF9jaGlsZFtBVFRSX0tFWV0sIGtleSA9IHZsZW4gPyAoYyA9IF9jaGlsZC5fY29tcG9uZW50KSA/IGMuX19rZXkgOiBwcm9wcyA/IHByb3BzLmtleSA6IG51bGwgOiBudWxsO1xuXHQgICAgICAgICAgICBpZiAobnVsbCAhPSBrZXkpIHtcblx0ICAgICAgICAgICAgICAgIGtleWVkTGVuKys7XG5cdCAgICAgICAgICAgICAgICBrZXllZFtrZXldID0gX2NoaWxkO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKGh5ZHJhdGluZyB8fCBhYnNvcmIgfHwgcHJvcHMgfHwgX2NoaWxkIGluc3RhbmNlb2YgVGV4dCkgY2hpbGRyZW5bY2hpbGRyZW5MZW4rK10gPSBfY2hpbGQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh2bGVuKSBmb3IgKHZhciBpID0gMDsgaSA8IHZsZW47IGkrKykge1xuXHQgICAgICAgICAgICB2Y2hpbGQgPSB2Y2hpbGRyZW5baV07XG5cdCAgICAgICAgICAgIGNoaWxkID0gbnVsbDtcblx0ICAgICAgICAgICAgdmFyIGtleSA9IHZjaGlsZC5rZXk7XG5cdCAgICAgICAgICAgIGlmIChudWxsICE9IGtleSkge1xuXHQgICAgICAgICAgICAgICAgaWYgKGtleWVkTGVuICYmIGtleSBpbiBrZXllZCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGNoaWxkID0ga2V5ZWRba2V5XTtcblx0ICAgICAgICAgICAgICAgICAgICBrZXllZFtrZXldID0gdm9pZCAwO1xuXHQgICAgICAgICAgICAgICAgICAgIGtleWVkTGVuLS07XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoIWNoaWxkICYmIG1pbiA8IGNoaWxkcmVuTGVuKSBmb3IgKGogPSBtaW47IGogPCBjaGlsZHJlbkxlbjsgaisrKSB7XG5cdCAgICAgICAgICAgICAgICBjID0gY2hpbGRyZW5bal07XG5cdCAgICAgICAgICAgICAgICBpZiAoYyAmJiBpc1NhbWVOb2RlVHlwZShjLCB2Y2hpbGQpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBjO1xuXHQgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuW2pdID0gdm9pZCAwO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChqID09PSBjaGlsZHJlbkxlbiAtIDEpIGNoaWxkcmVuTGVuLS07XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGogPT09IG1pbikgbWluKys7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2hpbGQgPSBpZGlmZihjaGlsZCwgdmNoaWxkLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cdCAgICAgICAgICAgIGlmIChjaGlsZCAmJiBjaGlsZCAhPT0gZG9tKSBpZiAoaSA+PSBsZW4pIGRvbS5hcHBlbmRDaGlsZChjaGlsZCk7IGVsc2UgaWYgKGNoaWxkICE9PSBvcmlnaW5hbENoaWxkcmVuW2ldKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoY2hpbGQgPT09IG9yaWdpbmFsQ2hpbGRyZW5baSArIDFdKSByZW1vdmVOb2RlKG9yaWdpbmFsQ2hpbGRyZW5baV0pO1xuXHQgICAgICAgICAgICAgICAgZG9tLmluc2VydEJlZm9yZShjaGlsZCwgb3JpZ2luYWxDaGlsZHJlbltpXSB8fCBudWxsKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoa2V5ZWRMZW4pIGZvciAodmFyIGkgaW4ga2V5ZWQpIGlmIChrZXllZFtpXSkgcmVjb2xsZWN0Tm9kZVRyZWUoa2V5ZWRbaV0pO1xuXHQgICAgICAgIHdoaWxlIChtaW4gPD0gY2hpbGRyZW5MZW4pIHtcblx0ICAgICAgICAgICAgY2hpbGQgPSBjaGlsZHJlbltjaGlsZHJlbkxlbi0tXTtcblx0ICAgICAgICAgICAgaWYgKGNoaWxkKSByZWNvbGxlY3ROb2RlVHJlZShjaGlsZCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gcmVjb2xsZWN0Tm9kZVRyZWUobm9kZSwgdW5tb3VudE9ubHkpIHtcblx0ICAgICAgICB2YXIgY29tcG9uZW50ID0gbm9kZS5fY29tcG9uZW50O1xuXHQgICAgICAgIGlmIChjb21wb25lbnQpIHVubW91bnRDb21wb25lbnQoY29tcG9uZW50LCAhdW5tb3VudE9ubHkpOyBlbHNlIHtcblx0ICAgICAgICAgICAgaWYgKG5vZGVbQVRUUl9LRVldICYmIG5vZGVbQVRUUl9LRVldLnJlZikgbm9kZVtBVFRSX0tFWV0ucmVmKG51bGwpO1xuXHQgICAgICAgICAgICBpZiAoIXVubW91bnRPbmx5KSBjb2xsZWN0Tm9kZShub2RlKTtcblx0ICAgICAgICAgICAgdmFyIGM7XG5cdCAgICAgICAgICAgIHdoaWxlIChjID0gbm9kZS5sYXN0Q2hpbGQpIHJlY29sbGVjdE5vZGVUcmVlKGMsIHVubW91bnRPbmx5KTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBkaWZmQXR0cmlidXRlcyhkb20sIGF0dHJzLCBvbGQpIHtcblx0ICAgICAgICB2YXIgbmFtZTtcblx0ICAgICAgICBmb3IgKG5hbWUgaW4gb2xkKSBpZiAoIShhdHRycyAmJiBuYW1lIGluIGF0dHJzKSAmJiBudWxsICE9IG9sZFtuYW1lXSkgc2V0QWNjZXNzb3IoZG9tLCBuYW1lLCBvbGRbbmFtZV0sIG9sZFtuYW1lXSA9IHZvaWQgMCwgaXNTdmdNb2RlKTtcblx0ICAgICAgICBpZiAoYXR0cnMpIGZvciAobmFtZSBpbiBhdHRycykgaWYgKCEoJ2NoaWxkcmVuJyA9PT0gbmFtZSB8fCAnaW5uZXJIVE1MJyA9PT0gbmFtZSB8fCBuYW1lIGluIG9sZCAmJiBhdHRyc1tuYW1lXSA9PT0gKCd2YWx1ZScgPT09IG5hbWUgfHwgJ2NoZWNrZWQnID09PSBuYW1lID8gZG9tW25hbWVdIDogb2xkW25hbWVdKSkpIHNldEFjY2Vzc29yKGRvbSwgbmFtZSwgb2xkW25hbWVdLCBvbGRbbmFtZV0gPSBhdHRyc1tuYW1lXSwgaXNTdmdNb2RlKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGNvbGxlY3RDb21wb25lbnQoY29tcG9uZW50KSB7XG5cdCAgICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQuY29uc3RydWN0b3IubmFtZSwgbGlzdCA9IGNvbXBvbmVudHNbbmFtZV07XG5cdCAgICAgICAgaWYgKGxpc3QpIGxpc3QucHVzaChjb21wb25lbnQpOyBlbHNlIGNvbXBvbmVudHNbbmFtZV0gPSBbIGNvbXBvbmVudCBdO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50KEN0b3IsIHByb3BzLCBjb250ZXh0KSB7XG5cdCAgICAgICAgdmFyIGluc3QgPSBuZXcgQ3Rvcihwcm9wcywgY29udGV4dCksIGxpc3QgPSBjb21wb25lbnRzW0N0b3IubmFtZV07XG5cdCAgICAgICAgQ29tcG9uZW50LmNhbGwoaW5zdCwgcHJvcHMsIGNvbnRleHQpO1xuXHQgICAgICAgIGlmIChsaXN0KSBmb3IgKHZhciBpID0gbGlzdC5sZW5ndGg7IGktLTsgKSBpZiAobGlzdFtpXS5jb25zdHJ1Y3RvciA9PT0gQ3Rvcikge1xuXHQgICAgICAgICAgICBpbnN0Lm5leHRCYXNlID0gbGlzdFtpXS5uZXh0QmFzZTtcblx0ICAgICAgICAgICAgbGlzdC5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gaW5zdDtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHNldENvbXBvbmVudFByb3BzKGNvbXBvbmVudCwgcHJvcHMsIG9wdHMsIGNvbnRleHQsIG1vdW50QWxsKSB7XG5cdCAgICAgICAgaWYgKCFjb21wb25lbnQuX2Rpc2FibGUpIHtcblx0ICAgICAgICAgICAgY29tcG9uZW50Ll9kaXNhYmxlID0gITA7XG5cdCAgICAgICAgICAgIGlmIChjb21wb25lbnQuX19yZWYgPSBwcm9wcy5yZWYpIGRlbGV0ZSBwcm9wcy5yZWY7XG5cdCAgICAgICAgICAgIGlmIChjb21wb25lbnQuX19rZXkgPSBwcm9wcy5rZXkpIGRlbGV0ZSBwcm9wcy5rZXk7XG5cdCAgICAgICAgICAgIGlmICghY29tcG9uZW50LmJhc2UgfHwgbW91bnRBbGwpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbE1vdW50KSBjb21wb25lbnQuY29tcG9uZW50V2lsbE1vdW50KCk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKHByb3BzLCBjb250ZXh0KTtcblx0ICAgICAgICAgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dCAhPT0gY29tcG9uZW50LmNvbnRleHQpIHtcblx0ICAgICAgICAgICAgICAgIGlmICghY29tcG9uZW50LnByZXZDb250ZXh0KSBjb21wb25lbnQucHJldkNvbnRleHQgPSBjb21wb25lbnQuY29udGV4dDtcblx0ICAgICAgICAgICAgICAgIGNvbXBvbmVudC5jb250ZXh0ID0gY29udGV4dDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoIWNvbXBvbmVudC5wcmV2UHJvcHMpIGNvbXBvbmVudC5wcmV2UHJvcHMgPSBjb21wb25lbnQucHJvcHM7XG5cdCAgICAgICAgICAgIGNvbXBvbmVudC5wcm9wcyA9IHByb3BzO1xuXHQgICAgICAgICAgICBjb21wb25lbnQuX2Rpc2FibGUgPSAhMTtcblx0ICAgICAgICAgICAgaWYgKDAgIT09IG9wdHMpIGlmICgxID09PSBvcHRzIHx8IG9wdGlvbnMuc3luY0NvbXBvbmVudFVwZGF0ZXMgIT09ICExIHx8ICFjb21wb25lbnQuYmFzZSkgcmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCwgMSwgbW91bnRBbGwpOyBlbHNlIGVucXVldWVSZW5kZXIoY29tcG9uZW50KTtcblx0ICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5fX3JlZikgY29tcG9uZW50Ll9fcmVmKGNvbXBvbmVudCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gcmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCwgb3B0cywgbW91bnRBbGwsIGlzQ2hpbGQpIHtcblx0ICAgICAgICBpZiAoIWNvbXBvbmVudC5fZGlzYWJsZSkge1xuXHQgICAgICAgICAgICB2YXIgc2tpcCwgcmVuZGVyZWQsIGluc3QsIGNiYXNlLCBwcm9wcyA9IGNvbXBvbmVudC5wcm9wcywgc3RhdGUgPSBjb21wb25lbnQuc3RhdGUsIGNvbnRleHQgPSBjb21wb25lbnQuY29udGV4dCwgcHJldmlvdXNQcm9wcyA9IGNvbXBvbmVudC5wcmV2UHJvcHMgfHwgcHJvcHMsIHByZXZpb3VzU3RhdGUgPSBjb21wb25lbnQucHJldlN0YXRlIHx8IHN0YXRlLCBwcmV2aW91c0NvbnRleHQgPSBjb21wb25lbnQucHJldkNvbnRleHQgfHwgY29udGV4dCwgaXNVcGRhdGUgPSBjb21wb25lbnQuYmFzZSwgbmV4dEJhc2UgPSBjb21wb25lbnQubmV4dEJhc2UsIGluaXRpYWxCYXNlID0gaXNVcGRhdGUgfHwgbmV4dEJhc2UsIGluaXRpYWxDaGlsZENvbXBvbmVudCA9IGNvbXBvbmVudC5fY29tcG9uZW50O1xuXHQgICAgICAgICAgICBpZiAoaXNVcGRhdGUpIHtcblx0ICAgICAgICAgICAgICAgIGNvbXBvbmVudC5wcm9wcyA9IHByZXZpb3VzUHJvcHM7XG5cdCAgICAgICAgICAgICAgICBjb21wb25lbnQuc3RhdGUgPSBwcmV2aW91c1N0YXRlO1xuXHQgICAgICAgICAgICAgICAgY29tcG9uZW50LmNvbnRleHQgPSBwcmV2aW91c0NvbnRleHQ7XG5cdCAgICAgICAgICAgICAgICBpZiAoMiAhPT0gb3B0cyAmJiBjb21wb25lbnQuc2hvdWxkQ29tcG9uZW50VXBkYXRlICYmIGNvbXBvbmVudC5zaG91bGRDb21wb25lbnRVcGRhdGUocHJvcHMsIHN0YXRlLCBjb250ZXh0KSA9PT0gITEpIHNraXAgPSAhMDsgZWxzZSBpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxVcGRhdGUpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsVXBkYXRlKHByb3BzLCBzdGF0ZSwgY29udGV4dCk7XG5cdCAgICAgICAgICAgICAgICBjb21wb25lbnQucHJvcHMgPSBwcm9wcztcblx0ICAgICAgICAgICAgICAgIGNvbXBvbmVudC5zdGF0ZSA9IHN0YXRlO1xuXHQgICAgICAgICAgICAgICAgY29tcG9uZW50LmNvbnRleHQgPSBjb250ZXh0O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGNvbXBvbmVudC5wcmV2UHJvcHMgPSBjb21wb25lbnQucHJldlN0YXRlID0gY29tcG9uZW50LnByZXZDb250ZXh0ID0gY29tcG9uZW50Lm5leHRCYXNlID0gbnVsbDtcblx0ICAgICAgICAgICAgY29tcG9uZW50Ll9kaXJ0eSA9ICExO1xuXHQgICAgICAgICAgICBpZiAoIXNraXApIHtcblx0ICAgICAgICAgICAgICAgIGlmIChjb21wb25lbnQucmVuZGVyKSByZW5kZXJlZCA9IGNvbXBvbmVudC5yZW5kZXIocHJvcHMsIHN0YXRlLCBjb250ZXh0KTtcblx0ICAgICAgICAgICAgICAgIGlmIChjb21wb25lbnQuZ2V0Q2hpbGRDb250ZXh0KSBjb250ZXh0ID0gZXh0ZW5kKGNsb25lKGNvbnRleHQpLCBjb21wb25lbnQuZ2V0Q2hpbGRDb250ZXh0KCkpO1xuXHQgICAgICAgICAgICAgICAgd2hpbGUgKGlzRnVuY3Rpb25hbENvbXBvbmVudChyZW5kZXJlZCkpIHJlbmRlcmVkID0gYnVpbGRGdW5jdGlvbmFsQ29tcG9uZW50KHJlbmRlcmVkLCBjb250ZXh0KTtcblx0ICAgICAgICAgICAgICAgIHZhciB0b1VubW91bnQsIGJhc2UsIGNoaWxkQ29tcG9uZW50ID0gcmVuZGVyZWQgJiYgcmVuZGVyZWQubm9kZU5hbWU7XG5cdCAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjaGlsZENvbXBvbmVudCkpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRQcm9wcyA9IGdldE5vZGVQcm9wcyhyZW5kZXJlZCk7XG5cdCAgICAgICAgICAgICAgICAgICAgaW5zdCA9IGluaXRpYWxDaGlsZENvbXBvbmVudDtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdCAmJiBpbnN0LmNvbnN0cnVjdG9yID09PSBjaGlsZENvbXBvbmVudCAmJiBjaGlsZFByb3BzLmtleSA9PSBpbnN0Ll9fa2V5KSBzZXRDb21wb25lbnRQcm9wcyhpbnN0LCBjaGlsZFByb3BzLCAxLCBjb250ZXh0KTsgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5tb3VudCA9IGluc3Q7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGluc3QgPSBjcmVhdGVDb21wb25lbnQoY2hpbGRDb21wb25lbnQsIGNoaWxkUHJvcHMsIGNvbnRleHQpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpbnN0Lm5leHRCYXNlID0gaW5zdC5uZXh0QmFzZSB8fCBuZXh0QmFzZTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaW5zdC5fcGFyZW50Q29tcG9uZW50ID0gY29tcG9uZW50O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuX2NvbXBvbmVudCA9IGluc3Q7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHNldENvbXBvbmVudFByb3BzKGluc3QsIGNoaWxkUHJvcHMsIDAsIGNvbnRleHQpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJDb21wb25lbnQoaW5zdCwgMSwgbW91bnRBbGwsICEwKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgYmFzZSA9IGluc3QuYmFzZTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY2Jhc2UgPSBpbml0aWFsQmFzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0b1VubW91bnQgPSBpbml0aWFsQ2hpbGRDb21wb25lbnQ7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRvVW5tb3VudCkgY2Jhc2UgPSBjb21wb25lbnQuX2NvbXBvbmVudCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGluaXRpYWxCYXNlIHx8IDEgPT09IG9wdHMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNiYXNlKSBjYmFzZS5fY29tcG9uZW50ID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgYmFzZSA9IGRpZmYoY2Jhc2UsIHJlbmRlcmVkLCBjb250ZXh0LCBtb3VudEFsbCB8fCAhaXNVcGRhdGUsIGluaXRpYWxCYXNlICYmIGluaXRpYWxCYXNlLnBhcmVudE5vZGUsICEwKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbEJhc2UgJiYgYmFzZSAhPT0gaW5pdGlhbEJhc2UgJiYgaW5zdCAhPT0gaW5pdGlhbENoaWxkQ29tcG9uZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2VQYXJlbnQgPSBpbml0aWFsQmFzZS5wYXJlbnROb2RlO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChiYXNlUGFyZW50ICYmIGJhc2UgIT09IGJhc2VQYXJlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVBhcmVudC5yZXBsYWNlQ2hpbGQoYmFzZSwgaW5pdGlhbEJhc2UpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRvVW5tb3VudCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbEJhc2UuX2NvbXBvbmVudCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvbGxlY3ROb2RlVHJlZShpbml0aWFsQmFzZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBpZiAodG9Vbm1vdW50KSB1bm1vdW50Q29tcG9uZW50KHRvVW5tb3VudCwgYmFzZSAhPT0gaW5pdGlhbEJhc2UpO1xuXHQgICAgICAgICAgICAgICAgY29tcG9uZW50LmJhc2UgPSBiYXNlO1xuXHQgICAgICAgICAgICAgICAgaWYgKGJhc2UgJiYgIWlzQ2hpbGQpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50UmVmID0gY29tcG9uZW50LCB0ID0gY29tcG9uZW50O1xuXHQgICAgICAgICAgICAgICAgICAgIHdoaWxlICh0ID0gdC5fcGFyZW50Q29tcG9uZW50KSAoY29tcG9uZW50UmVmID0gdCkuYmFzZSA9IGJhc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgYmFzZS5fY29tcG9uZW50ID0gY29tcG9uZW50UmVmO1xuXHQgICAgICAgICAgICAgICAgICAgIGJhc2UuX2NvbXBvbmVudENvbnN0cnVjdG9yID0gY29tcG9uZW50UmVmLmNvbnN0cnVjdG9yO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmICghaXNVcGRhdGUgfHwgbW91bnRBbGwpIG1vdW50cy51bnNoaWZ0KGNvbXBvbmVudCk7IGVsc2UgaWYgKCFza2lwKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50LmNvbXBvbmVudERpZFVwZGF0ZSkgY29tcG9uZW50LmNvbXBvbmVudERpZFVwZGF0ZShwcmV2aW91c1Byb3BzLCBwcmV2aW91c1N0YXRlLCBwcmV2aW91c0NvbnRleHQpO1xuXHQgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWZ0ZXJVcGRhdGUpIG9wdGlvbnMuYWZ0ZXJVcGRhdGUoY29tcG9uZW50KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB2YXIgZm4sIGNiID0gY29tcG9uZW50Ll9yZW5kZXJDYWxsYmFja3M7XG5cdCAgICAgICAgICAgIGlmIChjYikgd2hpbGUgKGZuID0gY2IucG9wKCkpIGZuLmNhbGwoY29tcG9uZW50KTtcblx0ICAgICAgICAgICAgaWYgKCFkaWZmTGV2ZWwgJiYgIWlzQ2hpbGQpIGZsdXNoTW91bnRzKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gYnVpbGRDb21wb25lbnRGcm9tVk5vZGUoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwpIHtcblx0ICAgICAgICB2YXIgYyA9IGRvbSAmJiBkb20uX2NvbXBvbmVudCwgb3JpZ2luYWxDb21wb25lbnQgPSBjLCBvbGREb20gPSBkb20sIGlzRGlyZWN0T3duZXIgPSBjICYmIGRvbS5fY29tcG9uZW50Q29uc3RydWN0b3IgPT09IHZub2RlLm5vZGVOYW1lLCBpc093bmVyID0gaXNEaXJlY3RPd25lciwgcHJvcHMgPSBnZXROb2RlUHJvcHModm5vZGUpO1xuXHQgICAgICAgIHdoaWxlIChjICYmICFpc093bmVyICYmIChjID0gYy5fcGFyZW50Q29tcG9uZW50KSkgaXNPd25lciA9IGMuY29uc3RydWN0b3IgPT09IHZub2RlLm5vZGVOYW1lO1xuXHQgICAgICAgIGlmIChjICYmIGlzT3duZXIgJiYgKCFtb3VudEFsbCB8fCBjLl9jb21wb25lbnQpKSB7XG5cdCAgICAgICAgICAgIHNldENvbXBvbmVudFByb3BzKGMsIHByb3BzLCAzLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cdCAgICAgICAgICAgIGRvbSA9IGMuYmFzZTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAob3JpZ2luYWxDb21wb25lbnQgJiYgIWlzRGlyZWN0T3duZXIpIHtcblx0ICAgICAgICAgICAgICAgIHVubW91bnRDb21wb25lbnQob3JpZ2luYWxDb21wb25lbnQsICEwKTtcblx0ICAgICAgICAgICAgICAgIGRvbSA9IG9sZERvbSA9IG51bGw7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgYyA9IGNyZWF0ZUNvbXBvbmVudCh2bm9kZS5ub2RlTmFtZSwgcHJvcHMsIGNvbnRleHQpO1xuXHQgICAgICAgICAgICBpZiAoZG9tICYmICFjLm5leHRCYXNlKSB7XG5cdCAgICAgICAgICAgICAgICBjLm5leHRCYXNlID0gZG9tO1xuXHQgICAgICAgICAgICAgICAgb2xkRG9tID0gbnVsbDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBzZXRDb21wb25lbnRQcm9wcyhjLCBwcm9wcywgMSwgY29udGV4dCwgbW91bnRBbGwpO1xuXHQgICAgICAgICAgICBkb20gPSBjLmJhc2U7XG5cdCAgICAgICAgICAgIGlmIChvbGREb20gJiYgZG9tICE9PSBvbGREb20pIHtcblx0ICAgICAgICAgICAgICAgIG9sZERvbS5fY29tcG9uZW50ID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIHJlY29sbGVjdE5vZGVUcmVlKG9sZERvbSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGRvbTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHVubW91bnRDb21wb25lbnQoY29tcG9uZW50LCByZW1vdmUpIHtcblx0ICAgICAgICBpZiAob3B0aW9ucy5iZWZvcmVVbm1vdW50KSBvcHRpb25zLmJlZm9yZVVubW91bnQoY29tcG9uZW50KTtcblx0ICAgICAgICB2YXIgYmFzZSA9IGNvbXBvbmVudC5iYXNlO1xuXHQgICAgICAgIGNvbXBvbmVudC5fZGlzYWJsZSA9ICEwO1xuXHQgICAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFVubW91bnQpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsVW5tb3VudCgpO1xuXHQgICAgICAgIGNvbXBvbmVudC5iYXNlID0gbnVsbDtcblx0ICAgICAgICB2YXIgaW5uZXIgPSBjb21wb25lbnQuX2NvbXBvbmVudDtcblx0ICAgICAgICBpZiAoaW5uZXIpIHVubW91bnRDb21wb25lbnQoaW5uZXIsIHJlbW92ZSk7IGVsc2UgaWYgKGJhc2UpIHtcblx0ICAgICAgICAgICAgaWYgKGJhc2VbQVRUUl9LRVldICYmIGJhc2VbQVRUUl9LRVldLnJlZikgYmFzZVtBVFRSX0tFWV0ucmVmKG51bGwpO1xuXHQgICAgICAgICAgICBjb21wb25lbnQubmV4dEJhc2UgPSBiYXNlO1xuXHQgICAgICAgICAgICBpZiAocmVtb3ZlKSB7XG5cdCAgICAgICAgICAgICAgICByZW1vdmVOb2RlKGJhc2UpO1xuXHQgICAgICAgICAgICAgICAgY29sbGVjdENvbXBvbmVudChjb21wb25lbnQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHZhciBjO1xuXHQgICAgICAgICAgICB3aGlsZSAoYyA9IGJhc2UubGFzdENoaWxkKSByZWNvbGxlY3ROb2RlVHJlZShjLCAhcmVtb3ZlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGNvbXBvbmVudC5fX3JlZikgY29tcG9uZW50Ll9fcmVmKG51bGwpO1xuXHQgICAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50RGlkVW5tb3VudCkgY29tcG9uZW50LmNvbXBvbmVudERpZFVubW91bnQoKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIENvbXBvbmVudChwcm9wcywgY29udGV4dCkge1xuXHQgICAgICAgIHRoaXMuX2RpcnR5ID0gITA7XG5cdCAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcblx0ICAgICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG5cdCAgICAgICAgaWYgKCF0aGlzLnN0YXRlKSB0aGlzLnN0YXRlID0ge307XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiByZW5kZXIodm5vZGUsIHBhcmVudCwgbWVyZ2UpIHtcblx0ICAgICAgICByZXR1cm4gZGlmZihtZXJnZSwgdm5vZGUsIHt9LCAhMSwgcGFyZW50KTtcblx0ICAgIH1cblx0ICAgIHZhciBvcHRpb25zID0ge307XG5cdCAgICB2YXIgc3RhY2sgPSBbXTtcblx0ICAgIHZhciBFTVBUWV9DSElMRFJFTiA9IFtdO1xuXHQgICAgdmFyIGxjQ2FjaGUgPSB7fTtcblx0ICAgIHZhciB0b0xvd2VyQ2FzZSA9IGZ1bmN0aW9uKHMpIHtcblx0ICAgICAgICByZXR1cm4gbGNDYWNoZVtzXSB8fCAobGNDYWNoZVtzXSA9IHMudG9Mb3dlckNhc2UoKSk7XG5cdCAgICB9O1xuXHQgICAgdmFyIHJlc29sdmVkID0gJ3VuZGVmaW5lZCcgIT0gdHlwZW9mIFByb21pc2UgJiYgUHJvbWlzZS5yZXNvbHZlKCk7XG5cdCAgICB2YXIgZGVmZXIgPSByZXNvbHZlZCA/IGZ1bmN0aW9uKGYpIHtcblx0ICAgICAgICByZXNvbHZlZC50aGVuKGYpO1xuXHQgICAgfSA6IHNldFRpbWVvdXQ7XG5cdCAgICB2YXIgRU1QVFkgPSB7fTtcblx0ICAgIHZhciBBVFRSX0tFWSA9ICd1bmRlZmluZWQnICE9IHR5cGVvZiBTeW1ib2wgPyBTeW1ib2wuZm9yKCdwcmVhY3RhdHRyJykgOiAnX19wcmVhY3RhdHRyXyc7XG5cdCAgICB2YXIgTk9OX0RJTUVOU0lPTl9QUk9QUyA9IHtcblx0ICAgICAgICBib3hGbGV4OiAxLFxuXHQgICAgICAgIGJveEZsZXhHcm91cDogMSxcblx0ICAgICAgICBjb2x1bW5Db3VudDogMSxcblx0ICAgICAgICBmaWxsT3BhY2l0eTogMSxcblx0ICAgICAgICBmbGV4OiAxLFxuXHQgICAgICAgIGZsZXhHcm93OiAxLFxuXHQgICAgICAgIGZsZXhQb3NpdGl2ZTogMSxcblx0ICAgICAgICBmbGV4U2hyaW5rOiAxLFxuXHQgICAgICAgIGZsZXhOZWdhdGl2ZTogMSxcblx0ICAgICAgICBmb250V2VpZ2h0OiAxLFxuXHQgICAgICAgIGxpbmVDbGFtcDogMSxcblx0ICAgICAgICBsaW5lSGVpZ2h0OiAxLFxuXHQgICAgICAgIG9wYWNpdHk6IDEsXG5cdCAgICAgICAgb3JkZXI6IDEsXG5cdCAgICAgICAgb3JwaGFuczogMSxcblx0ICAgICAgICBzdHJva2VPcGFjaXR5OiAxLFxuXHQgICAgICAgIHdpZG93czogMSxcblx0ICAgICAgICB6SW5kZXg6IDEsXG5cdCAgICAgICAgem9vbTogMVxuXHQgICAgfTtcblx0ICAgIHZhciBOT05fQlVCQkxJTkdfRVZFTlRTID0ge1xuXHQgICAgICAgIGJsdXI6IDEsXG5cdCAgICAgICAgZXJyb3I6IDEsXG5cdCAgICAgICAgZm9jdXM6IDEsXG5cdCAgICAgICAgbG9hZDogMSxcblx0ICAgICAgICByZXNpemU6IDEsXG5cdCAgICAgICAgc2Nyb2xsOiAxXG5cdCAgICB9O1xuXHQgICAgdmFyIGl0ZW1zID0gW107XG5cdCAgICB2YXIgbm9kZXMgPSB7fTtcblx0ICAgIHZhciBtb3VudHMgPSBbXTtcblx0ICAgIHZhciBkaWZmTGV2ZWwgPSAwO1xuXHQgICAgdmFyIGlzU3ZnTW9kZSA9ICExO1xuXHQgICAgdmFyIGh5ZHJhdGluZyA9ICExO1xuXHQgICAgdmFyIGNvbXBvbmVudHMgPSB7fTtcblx0ICAgIGV4dGVuZChDb21wb25lbnQucHJvdG90eXBlLCB7XG5cdCAgICAgICAgbGlua1N0YXRlOiBmdW5jdGlvbihrZXksIGV2ZW50UGF0aCkge1xuXHQgICAgICAgICAgICB2YXIgYyA9IHRoaXMuX2xpbmtlZFN0YXRlcyB8fCAodGhpcy5fbGlua2VkU3RhdGVzID0ge30pO1xuXHQgICAgICAgICAgICByZXR1cm4gY1trZXkgKyBldmVudFBhdGhdIHx8IChjW2tleSArIGV2ZW50UGF0aF0gPSBjcmVhdGVMaW5rZWRTdGF0ZSh0aGlzLCBrZXksIGV2ZW50UGF0aCkpO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2V0U3RhdGU6IGZ1bmN0aW9uKHN0YXRlLCBjYWxsYmFjaykge1xuXHQgICAgICAgICAgICB2YXIgcyA9IHRoaXMuc3RhdGU7XG5cdCAgICAgICAgICAgIGlmICghdGhpcy5wcmV2U3RhdGUpIHRoaXMucHJldlN0YXRlID0gY2xvbmUocyk7XG5cdCAgICAgICAgICAgIGV4dGVuZChzLCBpc0Z1bmN0aW9uKHN0YXRlKSA/IHN0YXRlKHMsIHRoaXMucHJvcHMpIDogc3RhdGUpO1xuXHQgICAgICAgICAgICBpZiAoY2FsbGJhY2spICh0aGlzLl9yZW5kZXJDYWxsYmFja3MgPSB0aGlzLl9yZW5kZXJDYWxsYmFja3MgfHwgW10pLnB1c2goY2FsbGJhY2spO1xuXHQgICAgICAgICAgICBlbnF1ZXVlUmVuZGVyKHRoaXMpO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgZm9yY2VVcGRhdGU6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICByZW5kZXJDb21wb25lbnQodGhpcywgMik7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge31cblx0ICAgIH0pO1xuXHQgICAgZXhwb3J0cy5oID0gaDtcblx0ICAgIGV4cG9ydHMuY2xvbmVFbGVtZW50ID0gY2xvbmVFbGVtZW50O1xuXHQgICAgZXhwb3J0cy5Db21wb25lbnQgPSBDb21wb25lbnQ7XG5cdCAgICBleHBvcnRzLnJlbmRlciA9IHJlbmRlcjtcblx0ICAgIGV4cG9ydHMucmVyZW5kZXIgPSByZXJlbmRlcjtcblx0ICAgIGV4cG9ydHMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdH0pO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1wcmVhY3QuanMubWFwXG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuXHQgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuXHQgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuXHQgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcblx0ICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuXHQgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuXHQgICAgfTtcclxuXHR9KSgpO1xyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuXHR2YXIgcHJlYWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xyXG5cdHZhciBTdGF0ZVNlbGVjdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuXHQgICAgX19leHRlbmRzKFN0YXRlU2VsZWN0b3IsIF9zdXBlcik7XHJcblx0ICAgIGZ1bmN0aW9uIFN0YXRlU2VsZWN0b3IoKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuXHQgICAgICAgIF90aGlzLnN0YXRlID0ge1xyXG5cdCAgICAgICAgICAgIGN1cnJlbnQ6IG51bGwsXHJcblx0ICAgICAgICAgICAgc3RhdGVzOiBbXSxcclxuXHQgICAgICAgICAgICBkZXJlZ2lzdGVyRm46IG51bGxcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICBfdGhpcy5zZWxlY3RTdGF0ZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG5cdCAgICAgICAgICAgIHZhciAkc3RhdGUgPSBfdGhpcy5wcm9wcy5yb3V0ZXIuc3RhdGVTZXJ2aWNlO1xyXG5cdCAgICAgICAgICAgIHZhciB0byA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuXHQgICAgICAgICAgICBpZiAodG8pXHJcblx0ICAgICAgICAgICAgICAgICRzdGF0ZS5nbyh0byk7XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgcmV0dXJuIF90aGlzO1xyXG5cdCAgICB9XHJcblx0ICAgIFN0YXRlU2VsZWN0b3IucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHZhciByb3V0ZXIgPSB0aGlzLnByb3BzLnJvdXRlcjtcclxuXHQgICAgICAgIHZhciB1cGRhdGVTdGF0ZXMgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsgc3RhdGVzOiByb3V0ZXIuc3RhdGVSZWdpc3RyeS5nZXQoKS5tYXAoZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiBzdGF0ZS5uYW1lOyB9KSB9KTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICB2YXIgdXBkYXRlQ3VycmVudCA9IGZ1bmN0aW9uICh0cmFucykge1xyXG5cdCAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7IGN1cnJlbnQ6IHRyYW5zLnRvKCkubmFtZSB9KTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICBpZiAocm91dGVyLnN0YXRlUmVnaXN0cnkub25TdGF0ZXNDaGFuZ2VkKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5kZXJlZ2lzdGVyU3RhdGVMaXN0ZW5lckZuID0gcm91dGVyLnN0YXRlUmVnaXN0cnkub25TdGF0ZXNDaGFuZ2VkKHVwZGF0ZVN0YXRlcyk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB2YXIgZGVyZWdpc3RlckZuID0gcm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLm9uU3VjY2Vzcyh7fSwgdXBkYXRlQ3VycmVudCk7XHJcblx0ICAgICAgICB0aGlzLnNldFN0YXRlKHsgY3VycmVudDogcm91dGVyLmdsb2JhbHMuY3VycmVudC5uYW1lLCBzdGF0ZXM6IFtdLCBkZXJlZ2lzdGVyRm46IGRlcmVnaXN0ZXJGbiB9KTtcclxuXHQgICAgICAgIHVwZGF0ZVN0YXRlcygpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBTdGF0ZVNlbGVjdG9yLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIGlmICh0aGlzLnN0YXRlLmRlcmVnaXN0ZXJGbikge1xyXG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUuZGVyZWdpc3RlckZuKCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBpZiAodGhpcy5kZXJlZ2lzdGVyU3RhdGVMaXN0ZW5lckZuKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5kZXJlZ2lzdGVyU3RhdGVMaXN0ZW5lckZuKCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIFN0YXRlU2VsZWN0b3IucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHJldHVybiAocHJlYWN0XzEuaChcInNlbGVjdFwiLCB7IHZhbHVlOiB0aGlzLnN0YXRlLmN1cnJlbnQgfHwgXCJcIiwgb25DaGFuZ2U6IHRoaXMuc2VsZWN0U3RhdGUsIHN0eWxlOiB7IG1heFdpZHRoOiAxMjAgfSB9LFxyXG5cdCAgICAgICAgICAgIHByZWFjdF8xLmgoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJcIiB9LCBcIkNob29zZSBhIHN0YXRlXCIpLFxyXG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUuc3RhdGVzLm1hcChmdW5jdGlvbiAoc3RhdGUpIHtcclxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHByZWFjdF8xLmgoXCJvcHRpb25cIiwgeyBrZXk6IHN0YXRlLCB2YWx1ZTogc3RhdGUgfSwgc3RhdGUpO1xyXG5cdCAgICAgICAgICAgIH0pKSk7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBTdGF0ZVNlbGVjdG9yO1xyXG5cdH0ocHJlYWN0XzEuQ29tcG9uZW50KSk7XHJcblx0ZXhwb3J0cy5TdGF0ZVNlbGVjdG9yID0gU3RhdGVTZWxlY3RvcjtcclxuXG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuXHQgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuXHQgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuXHQgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcblx0ICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuXHQgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuXHQgICAgfTtcclxuXHR9KSgpO1xyXG5cdHZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG5cdCAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuXHQgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcblx0ICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcblx0ICAgICAgICAgICAgdFtwXSA9IHNbcF07XHJcblx0ICAgIH1cclxuXHQgICAgcmV0dXJuIHQ7XHJcblx0fTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0dmFyIHByZWFjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcclxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xyXG5cdHZhciBzdGF0ZVNlbGVjdG9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xyXG5cdHZhciB0b2dnbGVDbGFzc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcclxuXHR2YXIgZHJhZ2dhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xyXG5cdHZhciBzdGF0ZVRyZWVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xyXG5cdHZhciByZW5kZXJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XHJcblx0dmFyIGltZ0NoZXZyb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcclxuXHR2YXIgU3RhdGVWaXN1YWxpemVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuXHQgICAgX19leHRlbmRzKFN0YXRlVmlzdWFsaXplciwgX3N1cGVyKTtcclxuXHQgICAgZnVuY3Rpb24gU3RhdGVWaXN1YWxpemVyKCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcblx0ICAgICAgICBfdGhpcy5zdGF0ZSA9IHsgaGVpZ2h0OiBudWxsLCB3aWR0aDogbnVsbCwgcHJlc2V0TmFtZTogJ1RyZWUnLCByZW5kZXJlcjogcmVuZGVyZXJfMS5ERUZBVUxUX1JFTkRFUkVSIH07XHJcblx0ICAgICAgICBfdGhpcy5kZXJlZ2lzdGVyRm5zID0gW107XHJcblx0ICAgICAgICBfdGhpcy5taW5pbWl6ZSA9IGZ1bmN0aW9uIChldnQpIHtcclxuXHQgICAgICAgICAgICBldnQgJiYgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0ICAgICAgICAgICAgZXZ0ICYmIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHQgICAgICAgICAgICB2YXIgZWwgPSBfdGhpcy5lbDtcclxuXHQgICAgICAgICAgICB2YXIgYm91bmRzID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0ICAgICAgICAgICAgX3RoaXMudG9wID0gKGJvdW5kcy50b3ApICsgXCJweFwiO1xyXG5cdCAgICAgICAgICAgIF90aGlzLmxlZnQgPSAoYm91bmRzLmxlZnQpICsgXCJweFwiO1xyXG5cdCAgICAgICAgICAgIF90aGlzLnJpZ2h0ID0gKHdpbmRvdy5pbm5lcldpZHRoIC0gYm91bmRzLnJpZ2h0KSArIFwicHhcIjtcclxuXHQgICAgICAgICAgICBfdGhpcy5ib3R0b20gPSAod2luZG93LmlubmVySGVpZ2h0IC0gYm91bmRzLmJvdHRvbSkgKyBcInB4XCI7XHJcblx0ICAgICAgICAgICAgZWwuc3R5bGUudG9wID0gXCJhdXRvXCI7XHJcblx0ICAgICAgICAgICAgZWwuc3R5bGUubGVmdCA9IFwiYXV0b1wiO1xyXG5cdCAgICAgICAgICAgIGVsLnN0eWxlLnJpZ2h0ID0gX3RoaXMucmlnaHQ7XHJcblx0ICAgICAgICAgICAgZWwuc3R5bGUuYm90dG9tID0gX3RoaXMuYm90dG9tO1xyXG5cdCAgICAgICAgICAgIHZhciB1bm1pbmltaXplID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgICAgICAgICBlbC5zdHlsZS50b3AgPSBcImF1dG9cIjtcclxuXHQgICAgICAgICAgICAgICAgZWwuc3R5bGUubGVmdCA9IFwiYXV0b1wiO1xyXG5cdCAgICAgICAgICAgICAgICBlbC5zdHlsZS5yaWdodCA9IF90aGlzLnJpZ2h0O1xyXG5cdCAgICAgICAgICAgICAgICBlbC5zdHlsZS5ib3R0b20gPSBfdGhpcy5ib3R0b207XHJcblx0ICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzXzEudG9nZ2xlQ2xhc3MoJ21pbmltaXplZCcpKGVsKTtcclxuXHQgICAgICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHVubWluaW1pemUpO1xyXG5cdCAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uRW5kTGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZ0KSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0ICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS50b3AgPSBib3VuZHMudG9wICsgXCJweFwiO1xyXG5cdCAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUubGVmdCA9IGJvdW5kcy5sZWZ0ICsgXCJweFwiO1xyXG5cdCAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUucmlnaHQgPSBcImF1dG9cIjtcclxuXHQgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJvdHRvbSA9IFwiYXV0b1wiO1xyXG5cdCAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgYW5pbWF0aW9uRW5kTGlzdGVuZXIpO1xyXG5cdCAgICAgICAgICAgICAgICB9O1xyXG5cdCAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBhbmltYXRpb25FbmRMaXN0ZW5lcik7XHJcblx0ICAgICAgICAgICAgfTtcclxuXHQgICAgICAgICAgICB0b2dnbGVDbGFzc18xLmFkZENsYXNzKCdtaW5pbWl6ZWQnKShlbCk7XHJcblx0ICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHVubWluaW1pemUpO1xyXG5cdCAgICAgICAgICAgIC8vIHdhaXQgNTBtcyB0byBhdm9pZCBjb29yZGluYXRlcyBqdW1waW5nIGRpcmVjdGx5IHRvIDAvMCBhbmQgYXZvaWQgYW5pbWF0aW9uXHJcblx0ICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBlbC5zdHlsZS5yaWdodCA9IGVsLnN0eWxlLmJvdHRvbSA9IFwiMFwiOyB9LCA1MCk7XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgX3RoaXMuc3ZnV2lkdGggPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5wcm9wcy53aWR0aCB8fCBfdGhpcy5zdGF0ZS53aWR0aCB8fCAzNTA7IH07XHJcblx0ICAgICAgICBfdGhpcy5zdmdIZWlnaHQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoX3RoaXMucHJvcHMuaGVpZ2h0IHx8IF90aGlzLnN0YXRlLmhlaWdodCB8fCAyNTApIC0gMjU7IH07XHJcblx0ICAgICAgICByZXR1cm4gX3RoaXM7XHJcblx0ICAgIH1cclxuXHQgICAgLyoqXHJcblx0ICAgICAqIENyZWF0ZXMgYSBuZXcgU3RhdGVWaXN1YWxpemVyIGFuZCBhZGRzIGl0IHRvIHRoZSBkb2N1bWVudC5cclxuXHQgICAgICpcclxuXHQgICAgICogQHBhcmFtIHJvdXRlciB0aGUgVUlSb3V0ZXIgb2JqZWN0XHJcblx0ICAgICAqIEBwYXJhbSBlbGVtZW50IChvcHRpb25hbCkgdGhlIGVsZW1lbnQgd2hlcmUgdGhlIFN0YXRlVmlzdWFsaXplciBzaG91bGQgYmUgcGxhY2VkLlxyXG5cdCAgICAgKiAgICAgICAgICAgICAgICBJZiBubyBlbGVtZW50IGlzIHBhc3NlZCwgYW4gZWxlbWVudCB3aWxsIGJlIGNyZWF0ZWQgaW4gdGhlIGJvZHkuXHJcblx0ICAgICAqIEBwYXJhbSBwcm9wcyBoZWlnaHQvd2lkdGggcHJvcGVydGllcyBkZWZhdWx0OiB7IGhlaWdodDogMzUwLCB3aWR0aDogMjUwIH1cclxuXHQgICAgICpcclxuXHQgICAgICogIyBBbmd1bGFyIDEgKyBVSS1Sb3V0ZXIgKDEuMC4wLWJldGEuMiBhbmQgaGlnaGVyKTpcclxuXHQgICAgICpcclxuXHQgICAgICogSW5qZWN0IHRoZSByb3V0ZXIgKGAkdWlSb3V0ZXJgKSBpbiBhIHJ1biBibG9jaywgdGhlbiBjYWxsIFN0YXRlVmlzdWFsaXplci5jcmVhdGUoKTtcclxuXHQgICAgICpcclxuXHQgICAgICogYGBgXHJcblx0ICAgICAqIGFwcC5ydW4oZnVuY3Rpb24oJHVpUm91dGVyKSB7XHJcblx0ICAgICAqICAgU3RhdGVWaXN1YWxpemVyLmNyZWF0ZSgkdWlSb3V0ZXIpO1xyXG5cdCAgICAgKiB9KTtcclxuXHQgICAgICogYGBgXHJcblx0ICAgICAqXHJcblx0ICAgICAqICMgQW5ndWxhciAxICsgVUktUm91dGVyIDEuMC4wLWFscGhhLjEgdGhyb3VnaCAxLjAuMC1iZXRhLjE6XHJcblx0ICAgICAqXHJcblx0ICAgICAqIEluamVjdCB0aGUgcm91dGVyIChgbmcxVUlSb3V0ZXJgKSBpbiBhIHJ1biBibG9jaywgdGhlbiBjYWxsIFN0YXRlVmlzdWFsaXplci5jcmVhdGUoKTtcclxuXHQgICAgICpcclxuXHQgICAgICogYGBgXHJcblx0ICAgICAqIGFwcC5ydW4oZnVuY3Rpb24obmcxVUlSb3V0ZXIpIHtcclxuXHQgICAgICogICBTdGF0ZVZpc3VhbGl6ZXIuY3JlYXRlKG5nMVVJUm91dGVyKTtcclxuXHQgICAgICogfSk7XHJcblx0ICAgICAqIGBgYFxyXG5cdCAgICAgKlxyXG5cdCAgICAgKiBBbmd1bGFyIDI6XHJcblx0ICAgICAqXHJcblx0ICAgICAqIENhbGwgU3RhdGVWaXN1YWxpemVyLmNyZWF0ZSgpIGZyb20geW91ciBVSVJvdXRlckNvbmZpZ1xyXG5cdCAgICAgKlxyXG5cdCAgICAgKiBgYGBcclxuXHQgICAgICogZXhwb3J0IGNsYXNzIE15VUlSb3V0ZXJDb25maWcgZXh0ZW5kcyBVSVJvdXRlckNvbmZpZyB7XHJcblx0ICAgICAqICAgY29uZmlndXJlKHJvdXRlcjogVUlSb3V0ZXIpIHtcclxuXHQgICAgICogICAgIFN0YXRlVmlzdWFsaXplci5jcmVhdGUocm91dGVyKTtcclxuXHQgICAgICogICB9XHJcblx0ICAgICAqIH1cclxuXHQgICAgICogYGBgXHJcblx0ICAgICAqXHJcblx0ICAgICAqIFJlYWN0OlxyXG5cdCAgICAgKlxyXG5cdCAgICAgKiBDYWxsIFN0YXRlVmlzdWFsaXplci5jcmVhdGUoKSBmcm9tIHlvdXIgYm9vdHN0cmFwXHJcblx0ICAgICAqXHJcblx0ICAgICAqIGBgYFxyXG5cdCAgICAgKiBsZXQgcm91dGVyID0gbmV3IFVJUm91dGVyUmVhY3QoKTtcclxuXHQgICAgICogU3RhdGVWaXN1YWxpemVyLmNyZWF0ZShyb3V0ZXIpO1xyXG5cdCAgICAgKiByb3V0ZXIuc3RhcnQoKTtcclxuXHQgICAgICogYGBgXHJcblx0ICAgICAqXHJcblx0ICAgICAqIEByZXR1cm4gdGhlIGVsZW1lbnQgdGhhdCB3YXMgYm9vdHN0cmFwcGVkLlxyXG5cdCAgICAgKiAgICAgICAgIFlvdSBjYW4gZGVzdHJveSB0aGUgY29tcG9uZW50IHVzaW5nOlxyXG5cdCAgICAgKiAgICAgICAgIFtSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RvcC1sZXZlbC1hcGkuaHRtbCNyZWFjdGRvbS51bm1vdW50Y29tcG9uZW50YXRub2RlKVxyXG5cdCAgICAgKi9cclxuXHQgICAgU3RhdGVWaXN1YWxpemVyLmNyZWF0ZSA9IGZ1bmN0aW9uIChyb3V0ZXIsIGVsZW1lbnQsIHByb3BzKSB7XHJcblx0ICAgICAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkgeyBwcm9wcyA9IHt9OyB9XHJcblx0ICAgICAgICBpZiAoIWVsZW1lbnQpIHtcclxuXHQgICAgICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHQgICAgICAgICAgICBlbGVtZW50LmlkID0gXCJ1aXJTdGF0ZVZpc3VhbGl6ZXJcIjtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHZhciBpbml0aWFsUHJvcHMgPSBPYmplY3QuYXNzaWduKHt9LCBwcm9wcywgeyByb3V0ZXI6IHJvdXRlciwgbWluaW1pemVBZnRlcjogMjUwMCB9KTtcclxuXHQgICAgICAgIHZhciBfcmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcblx0ICAgICAgICAgICAgcHJlYWN0XzEucmVuZGVyKHByZWFjdF8xLmgoU3RhdGVWaXN1YWxpemVyLCBpbml0aWFsUHJvcHMpLCBlbGVtZW50KTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJyB8fCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XHJcblx0ICAgICAgICAgICAgX3JlbmRlcigpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxzZSB7XHJcblx0ICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIF9yZW5kZXIsIGZhbHNlKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG5cdCAgICB9O1xyXG5cdCAgICBTdGF0ZVZpc3VhbGl6ZXIucHJvdG90eXBlLmhhbmRsZUNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgaWYgKHRoaXMubWluaW1pemVUaW1lb3V0KSB7XHJcblx0ICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubWluaW1pemVUaW1lb3V0KTtcclxuXHQgICAgICAgICAgICB0aGlzLm1pbmltaXplVGltZW91dCA9IG51bGw7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIFN0YXRlVmlzdWFsaXplci5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB0aGlzLmRlcmVnaXN0ZXJGbnMuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHsgcmV0dXJuIGZuKCk7IH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBTdGF0ZVZpc3VhbGl6ZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIGNvbnRyb2xzRWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy51aXJTdGF0ZVZpc0NvbnRyb2xzJyk7XHJcblx0ICAgICAgICB2YXIgdmlzRWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zdGF0ZXZpcycpO1xyXG5cdCAgICAgICAgdGhpcy5kZXJlZ2lzdGVyRm5zLnB1c2goZHJhZ2dhYmxlXzEuZHJhZ2dhYmxlKGNvbnRyb2xzRWwsIGRyYWdnYWJsZV8xLmRyYWdBY3Rpb25zLm1vdmUodGhpcy5lbCkpKTtcclxuXHQgICAgICAgIHRoaXMuZGVyZWdpc3RlckZucy5wdXNoKGRyYWdnYWJsZV8xLmRyYWdnYWJsZSh2aXNFbCwgZHJhZ2dhYmxlXzEuZHJhZ0FjdGlvbnMubW92ZSh0aGlzLmVsKSkpO1xyXG5cdCAgICAgICAgdGhpcy5tb25pdG9yUmVzaXplRXZlbnRzKCk7XHJcblx0ICAgICAgICBpZiAodGhpcy5wcm9wcy5taW5pbWl6ZUFmdGVyKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5taW5pbWl6ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMubWluaW1pemUuYmluZCh0aGlzKSwgdGhpcy5wcm9wcy5taW5pbWl6ZUFmdGVyKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgU3RhdGVWaXN1YWxpemVyLnByb3RvdHlwZS5tb25pdG9yUmVzaXplRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHZhciBfd2lkdGggPSB0aGlzLmVsLnN0eWxlLndpZHRoO1xyXG5cdCAgICAgICAgdmFyIF9oZWlnaHQgPSB0aGlzLmVsLnN0eWxlLmhlaWdodDtcclxuXHQgICAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcclxuXHQgICAgICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAobXV0YXRpb24pIHtcclxuXHQgICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT0gJ3N0eWxlJykge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gbXV0YXRpb24udGFyZ2V0LCBuZXd3aWR0aCA9IGVsWydzdHlsZSddLndpZHRoLCBuZXdoZWlnaHQgPSBlbFsnc3R5bGUnXS5oZWlnaHQ7XHJcblx0ICAgICAgICAgICAgICAgICAgICBpZiAobmV3d2lkdGggIT09IF93aWR0aCB8fCBuZXdoZWlnaHQgIT09IF9oZWlnaHQpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfd2lkdGggPSBuZXd3aWR0aDtcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfaGVpZ2h0ID0gbmV3aGVpZ2h0O1xyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IHBhcnNlSW50KG5ld3dpZHRoLnJlcGxhY2UoL3B4JC8sIFwiXCIpKTtcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gcGFyc2VJbnQobmV3aGVpZ2h0LnJlcGxhY2UoL3B4JC8sIFwiXCIpKTtcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfSk7XHJcblx0ICAgICAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICB9KTtcclxuXHQgICAgICAgIH0pO1xyXG5cdCAgICAgICAgdmFyIGNvbmZpZyA9IHtcclxuXHQgICAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxyXG5cdCAgICAgICAgICAgIGNoaWxkTGlzdDogZmFsc2UsXHJcblx0ICAgICAgICAgICAgY2hhcmFjdGVyRGF0YTogZmFsc2UsXHJcblx0ICAgICAgICAgICAgc3VidHJlZTogZmFsc2UsXHJcblx0ICAgICAgICAgICAgYXR0cmlidXRlRmlsdGVyOiBbJ3N0eWxlJ11cclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHRoaXMuZWwsIGNvbmZpZyk7XHJcblx0ICAgICAgICB0aGlzLmRlcmVnaXN0ZXJGbnMucHVzaChmdW5jdGlvbiAoKSB7IHJldHVybiBvYnNlcnZlci5kaXNjb25uZWN0KCk7IH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBTdGF0ZVZpc3VhbGl6ZXIucHJvdG90eXBlLmhhbmRsZVpvb20gPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHQgICAgICAgIHZhciBlbCA9IGV2ZW50LnRhcmdldDtcclxuXHQgICAgICAgIHZhciB2YWx1ZSA9IHBhcnNlRmxvYXQoZWxbJ3ZhbHVlJ10pO1xyXG5cdCAgICAgICAgdmFyIHJlbmRlcmVyID0gX19hc3NpZ24oe30sIHRoaXMuc3RhdGUucmVuZGVyZXIsIHsgem9vbTogdmFsdWUgfSk7XHJcblx0ICAgICAgICB0aGlzLnNldFN0YXRlKHsgcmVuZGVyZXI6IHJlbmRlcmVyIH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBTdGF0ZVZpc3VhbGl6ZXIucHJvdG90eXBlLmhhbmRsZUxheW91dCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG5cdCAgICAgICAgdmFyIHByZXNldE5hbWUgPSBldmVudC50YXJnZXRbJ3ZhbHVlJ107XHJcblx0ICAgICAgICB2YXIgc2V0dGluZ3MgPSByZW5kZXJlcl8xLlJFTkRFUkVSX1BSRVNFVFNbcHJlc2V0TmFtZV07XHJcblx0ICAgICAgICB2YXIgcmVuZGVyZXIgPSBfX2Fzc2lnbih7fSwgdGhpcy5zdGF0ZS5yZW5kZXJlciwgc2V0dGluZ3MpO1xyXG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlbmRlcmVyOiByZW5kZXJlciwgcHJlc2V0TmFtZTogcHJlc2V0TmFtZSB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgU3RhdGVWaXN1YWxpemVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgdmFyIHpvb21MZXZlbHMgPSBbMi4wLCAxLjUsIDEuMCwgMC45LCAwLjgsIDAuNywgMC42LCAwLjUsIDAuNCwgMC4zXTtcclxuXHQgICAgICAgIHJldHVybiAocHJlYWN0XzEuaChcImRpdlwiLCB7IHJlZjogZnVuY3Rpb24gKGVsKSB7IHJldHVybiBfdGhpcy5lbCA9IGVsOyB9LCBjbGFzc05hbWU6IFwidWlyU3RhdGVWaXNDb250YWluZXJcIiwgb25DbGljazogdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpIH0sXHJcblx0ICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ1aXJTdGF0ZVZpc0NvbnRyb2xzXCIgfSxcclxuXHQgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCBudWxsLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgXCIgQ3VycmVudCBTdGF0ZTogXCIsXHJcblx0ICAgICAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKHN0YXRlU2VsZWN0b3JfMS5TdGF0ZVNlbGVjdG9yLCB7IHJvdXRlcjogdGhpcy5wcm9wcy5yb3V0ZXIgfSkpLFxyXG5cdCAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwiZGl2XCIsIG51bGwsXHJcblx0ICAgICAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwic2VsZWN0XCIsIHsgb25DaGFuZ2U6IHRoaXMuaGFuZGxlTGF5b3V0LmJpbmQodGhpcyksIHZhbHVlOiB0aGlzLnN0YXRlLnByZXNldE5hbWUsIHN0eWxlOiB7IG1heFdpZHRoOiAxMDAgfSB9LCBPYmplY3Qua2V5cyhyZW5kZXJlcl8xLlJFTkRFUkVSX1BSRVNFVFMpLm1hcChmdW5jdGlvbiAocHJlc2V0KSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZWFjdF8xLmgoXCJvcHRpb25cIiwgeyB2YWx1ZTogcHJlc2V0IH0sIHByZXNldCk7XHJcblx0ICAgICAgICAgICAgICAgICAgICB9KSksXHJcblx0ICAgICAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwic2VsZWN0XCIsIHsgb25DaGFuZ2U6IHRoaXMuaGFuZGxlWm9vbS5iaW5kKHRoaXMpLCB2YWx1ZTogdGhpcy5zdGF0ZS5yZW5kZXJlci56b29tICsgJycsIHN0eWxlOiB7IG1heFdpZHRoOiAxMDAgfSB9LCB6b29tTGV2ZWxzLm1hcChmdW5jdGlvbiAobGV2ZWwpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlYWN0XzEuaChcIm9wdGlvblwiLCB7IHZhbHVlOiBsZXZlbCArIFwiXCIgfSxcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWwsXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwieFwiKTtcclxuXHQgICAgICAgICAgICAgICAgICAgIH0pKSksXHJcblx0ICAgICAgICAgICAgICAgIHByZWFjdF8xLmgoXCJidXR0b25cIiwgeyBvbkNsaWNrOiB0aGlzLm1pbmltaXplIH0sXHJcblx0ICAgICAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwiaW1nXCIsIHsgc3JjOiBpbWdDaGV2cm9uLCBzdHlsZTogeyBjdXJzb3I6ICdwb2ludGVyJyB9IH0pKSksXHJcblx0ICAgICAgICAgICAgcHJlYWN0XzEuaChzdGF0ZVRyZWVfMS5TdGF0ZVRyZWUsIHsgcm91dGVyOiB0aGlzLnByb3BzLnJvdXRlciwgd2lkdGg6IHRoaXMuc3ZnV2lkdGgoKSwgaGVpZ2h0OiB0aGlzLnN2Z0hlaWdodCgpLCByZW5kZXJlcjogdGhpcy5zdGF0ZS5yZW5kZXJlciB9KSkpO1xyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gU3RhdGVWaXN1YWxpemVyO1xyXG5cdH0ocHJlYWN0XzEuQ29tcG9uZW50KSk7XHJcblx0ZXhwb3J0cy5TdGF0ZVZpc3VhbGl6ZXIgPSBTdGF0ZVZpc3VhbGl6ZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNykoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/c291cmNlTWFwIS4vc3RhdGVWaXN1YWxpemVyLmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz9zb3VyY2VNYXAhLi9zdGF0ZVZpc3VhbGl6ZXIuY3NzXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnVpclN0YXRlVmlzQ29udGFpbmVye3otaW5kZXg6Mztwb3NpdGlvbjpmaXhlZDtyaWdodDoyZW07Ym90dG9tOjRlbTtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOmhzbGEoMCwwJSwxMDAlLC44KTt0cmFuc2Zvcm06c2NhbGUoMSk7dHJhbnNmb3JtLW9yaWdpbjpyaWdodCBib3R0b207dHJhbnNpdGlvbjpyaWdodCAuNXMgZWFzZSxib3R0b20gLjVzIGVhc2UsdHJhbnNmb3JtIC41cyBlYXNlO3Jlc2l6ZTpib3RoO292ZXJmbG93OmhpZGRlbn0udWlyU3RhdGVWaXNDb250YWluZXI6aG92ZXJ7b3V0bGluZTozcHggc29saWQgcmdiYSgwLDAsMCwuMzUpfS51aXJTdGF0ZVZpc0NvbnRhaW5lci5taW5pbWl6ZWR7Y3Vyc29yOnBvaW50ZXI7dHJhbnNmb3JtOnNjYWxlKC4yNSl9LnVpclN0YXRlVmlzQ29udGFpbmVyIC51aXJTdGF0ZVZpc0NvbnRyb2xze3dpZHRoOjEwMCU7ZGlzcGxheTpmbGV4O2ZsZXgtZmxvdzpyb3cgbm93cmFwO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2ZsZXg6MSAwIGF1dG99LnVpclN0YXRlVmlzQ29udGFpbmVyIC5zdGF0ZXZpc3tmbGV4OjEgMSBhdXRvO3RyYW5zaXRpb246YWxsIDFzIGVhc2V9LnN0YXRldmlzIGNpcmNsZXtmaWxsOiNmZmY7c3Ryb2tlOmdyZXk7dHJhbnNpdGlvbi1wcm9wZXJ0eTpyLGZpbGwsc3Ryb2tlLHN0cm9rZS13aWR0aDt0cmFuc2l0aW9uLWR1cmF0aW9uOi4zNXM7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1pbi1vdXQ7Y3Vyc29yOnBvaW50ZXJ9LnN0YXRldmlzIHRleHR7dHJhbnNpdGlvbi1wcm9wZXJ0eTp4LHksZm9udC1zaXplLHN0cm9rZSxzdHJva2Utd2lkdGg7dHJhbnNpdGlvbi1kdXJhdGlvbjouMzVzO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW4tb3V0fS5zdGF0ZXZpcyBjaXJjbGUuZnV0dXJle3N0cm9rZTpncmV5O3N0cm9rZS1kYXNoYXJyYXk6Nyw1fS5zdGF0ZXZpcyBjaXJjbGUuZW50ZXJlZHtzdHJva2U6IzAwMDtmaWxsOiM5MGVlOTB9LnN0YXRldmlzIGNpcmNsZS5lbnRlcmVkOmFmdGVye2NvbnRlbnQ6XFxcIjx0ZXh0PkVudGVyZWQ8L3RleHQ+XFxcIn0uc3RhdGV2aXMgY2lyY2xlLmFjdGl2ZXtmaWxsOmdyZWVuO3N0cm9rZTojMDAwfS5zdGF0ZXZpcyBjaXJjbGUuY29sbGFwc2Vke3N0cm9rZS1kYXNoYXJyYXk6MiwyfS5zdGF0ZXZpcyB0ZXh0e2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWZ9LnN0YXRldmlzIC5saW5re2ZpbGw6bm9uZTtzdHJva2U6I2NjY30uc3RhdGV2aXMgdGV4dC5sYWJlbHtmaWxsOmdyZXk7YWxpZ25tZW50LWJhc2VsaW5lOm1pZGRsZX0uZHJhZ2dhYmxle2N1cnNvcjptb3ZlfVwiLCBcIlwiLCB7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCIvLi9zcmMvc3RhdGUvc3RhdGVWaXN1YWxpemVyLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFDQSxzQkFDSSxVQUFXLEFBQ1gsZUFBZ0IsQUFDaEIsVUFBVyxBQUNYLFdBQVksQUFDWixhQUFjLEFBQ2Qsc0JBQXVCLEFBQ3ZCLG1CQUFvQixBQUNwQixvQ0FBMkMsQUFDM0MsbUJBQW9CLEFBQ3BCLDhCQUErQixBQUMvQiw2REFBbUUsQUFDbkUsWUFBYSxBQUNiLGVBQWlCLENBQ3BCLEFBR0QsNEJBQ0ksaUNBQW1DLENBQ3RDLEFBRUQsZ0NBQ0ksZUFBZ0IsQUFDaEIsb0JBQXVCLENBQzFCLEFBRUQsMkNBQ0ksV0FBWSxBQUNaLGFBQWMsQUFDZCxxQkFBc0IsQUFDdEIsOEJBQStCLEFBQy9CLGFBQWUsQ0FDbEIsQUFFRCxnQ0FDSSxjQUFlLEFBQ2Ysc0JBQXdCLENBQzNCLEFBRUQsaUJBRUksVUFBVyxBQUNYLFlBQWEsQUFHYiwrQ0FBbUQsQUFDbkQseUJBQTJCLEFBQzNCLHVDQUF3QyxBQUV4QyxjQUFnQixDQUNuQixBQUVELGVBQ0ksc0RBQTJELEFBQzNELHlCQUEyQixBQUMzQixzQ0FBd0MsQ0FDM0MsQUFFRCx3QkFFSSxZQUFhLEFBQ2Isb0JBQXNCLENBRXpCLEFBRUQseUJBRUksWUFBYyxBQUNkLFlBQWlCLENBQ3BCLEFBRUQsK0JBQ0ksOEJBQStCLENBQ2xDLEFBRUQsd0JBRUksV0FBWSxBQUNaLFdBQWMsQ0FDakIsQUFFRCwyQkFDSSxvQkFBc0IsQ0FDekIsQUFFRCxlQUNJLHNCQUF3QixDQUMzQixBQUVELGdCQUNJLFVBQVcsQUFDWCxXQUFhLENBRWhCLEFBRUQscUJBQ0ksVUFBVyxBQUNYLHlCQUEyQixDQUM5QixBQUdELFdBQ0ksV0FBYSxDQUNoQlwiLFwiZmlsZVwiOlwic3RhdGVWaXN1YWxpemVyLmNzc1wiLFwic291cmNlc0NvbnRlbnRcIjpbXCJcXG4udWlyU3RhdGVWaXNDb250YWluZXIge1xcbiAgICB6LWluZGV4OiAzO1xcbiAgICBwb3NpdGlvbjogZml4ZWQ7XFxuICAgIHJpZ2h0OiAyZW07XFxuICAgIGJvdHRvbTogNGVtO1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCk7XFxuICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7XFxuICAgIHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0IGJvdHRvbTtcXG4gICAgdHJhbnNpdGlvbjogcmlnaHQgMC41cyBlYXNlLCBib3R0b20gMC41cyBlYXNlLCB0cmFuc2Zvcm0gMC41cyBlYXNlO1xcbiAgICByZXNpemU6IGJvdGg7XFxuICAgIG92ZXJmbG93OiBoaWRkZW47XFxufVxcblxcblxcbi51aXJTdGF0ZVZpc0NvbnRhaW5lcjpob3ZlciB7XFxuICAgIG91dGxpbmU6IDNweCBzb2xpZCByZ2JhKDAsMCwwLDAuMzUpXFxufVxcblxcbi51aXJTdGF0ZVZpc0NvbnRhaW5lci5taW5pbWl6ZWQge1xcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxuICAgIHRyYW5zZm9ybTogc2NhbGUoMC4yNSk7XFxufVxcblxcbi51aXJTdGF0ZVZpc0NvbnRhaW5lciAudWlyU3RhdGVWaXNDb250cm9scyB7XFxuICAgIHdpZHRoOiAxMDAlO1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWZsb3c6IHJvdyBub3dyYXA7XFxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcXG4gICAgZmxleDogMSAwIGF1dG87XFxufVxcblxcbi51aXJTdGF0ZVZpc0NvbnRhaW5lciAuc3RhdGV2aXMge1xcbiAgICBmbGV4OiAxIDEgYXV0bztcXG4gICAgdHJhbnNpdGlvbjogYWxsIDFzIGVhc2U7XFxufVxcblxcbi5zdGF0ZXZpcyBjaXJjbGUge1xcbiAgICAvKnI6IDEwOyovXFxuICAgIGZpbGw6ICNmZmY7XFxuICAgIHN0cm9rZTogZ3JleTtcXG4gICAgLypzdHJva2Utd2lkdGg6IDNweDsqL1xcblxcbiAgICB0cmFuc2l0aW9uLXByb3BlcnR5OiByLCBmaWxsLCBzdHJva2UsIHN0cm9rZS13aWR0aDtcXG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMzUwbXM7XFxuICAgIHRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLWluLW91dDtcXG5cXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcbn1cXG5cXG4uc3RhdGV2aXMgdGV4dCB7XFxuICAgIHRyYW5zaXRpb24tcHJvcGVydHk6IHgsIHksIGZvbnQtc2l6ZSwgc3Ryb2tlLCBzdHJva2Utd2lkdGg7XFxuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDM1MG1zO1xcbiAgICB0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1pbi1vdXQ7XFxufVxcblxcbi5zdGF0ZXZpcyBjaXJjbGUuZnV0dXJlIHtcXG4gICAgLypyOiAxMDsqL1xcbiAgICBzdHJva2U6IGdyZXk7XFxuICAgIHN0cm9rZS1kYXNoYXJyYXk6IDcsNTtcXG4gICAgLypzdHJva2Utd2lkdGg6IDFweDsqL1xcbn1cXG5cXG4uc3RhdGV2aXMgY2lyY2xlLmVudGVyZWQge1xcbiAgICAvKnI6IDEwOyovXFxuICAgIHN0cm9rZTogYmxhY2s7XFxuICAgIGZpbGw6IGxpZ2h0Z3JlZW47XFxufVxcblxcbi5zdGF0ZXZpcyBjaXJjbGUuZW50ZXJlZDphZnRlciB7XFxuICAgIGNvbnRlbnQ6IFxcXCI8dGV4dD5FbnRlcmVkPC90ZXh0PlxcXCJcXG59XFxuXFxuLnN0YXRldmlzIGNpcmNsZS5hY3RpdmUge1xcbiAgICAvKnI6IDE1OyovXFxuICAgIGZpbGw6IGdyZWVuO1xcbiAgICBzdHJva2U6IGJsYWNrO1xcbn1cXG5cXG4uc3RhdGV2aXMgY2lyY2xlLmNvbGxhcHNlZCB7XFxuICAgIHN0cm9rZS1kYXNoYXJyYXk6IDIsIDJcXG59XFxuXFxuLnN0YXRldmlzIHRleHQge1xcbiAgICBmb250LWZhbWlseTogc2Fucy1zZXJpZjtcXG59XFxuXFxuLnN0YXRldmlzIC5saW5rIHtcXG4gICAgZmlsbDogbm9uZTtcXG4gICAgc3Ryb2tlOiAjY2NjO1xcbiAgICAvKnN0cm9rZS13aWR0aDogMnB4OyovXFxufVxcblxcbi5zdGF0ZXZpcyB0ZXh0LmxhYmVsIHtcXG4gICAgZmlsbDogZ3JleTtcXG4gICAgYWxpZ25tZW50LWJhc2VsaW5lOiBtaWRkbGU7XFxufVxcblxcblxcbi5kcmFnZ2FibGUge1xcbiAgICBjdXJzb3I6IG1vdmU7XFxufVxcblxcbi8qLmRyYWdnYWJsZTpob3ZlciB7Ki9cXG4gICAgLypvdXRsaW5lOiAzcHggc29saWQgcmdiYSgwLDAsMCwwLjE1KSovXFxuLyp9Ki9cIl0sXCJzb3VyY2VSb290XCI6XCJ3ZWJwYWNrOi8vXCJ9XSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LypcclxuXHRcdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblx0XHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXHJcblx0Ki9cclxuXHQvLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxyXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgbGlzdCA9IFtdO1xyXG5cdFxyXG5cdFx0Ly8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xyXG5cdFx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xyXG5cdFx0XHR2YXIgcmVzdWx0ID0gW107XHJcblx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dmFyIGl0ZW0gPSB0aGlzW2ldO1xyXG5cdFx0XHRcdGlmKGl0ZW1bMl0pIHtcclxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKFwiQG1lZGlhIFwiICsgaXRlbVsyXSArIFwie1wiICsgaXRlbVsxXSArIFwifVwiKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0cmVzdWx0LnB1c2goaXRlbVsxXSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiByZXN1bHQuam9pbihcIlwiKTtcclxuXHRcdH07XHJcblx0XHJcblx0XHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxyXG5cdFx0bGlzdC5pID0gZnVuY3Rpb24obW9kdWxlcywgbWVkaWFRdWVyeSkge1xyXG5cdFx0XHRpZih0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIilcclxuXHRcdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XHJcblx0XHRcdHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XHJcblx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcclxuXHRcdFx0XHRpZih0eXBlb2YgaWQgPT09IFwibnVtYmVyXCIpXHJcblx0XHRcdFx0XHRhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yKGkgPSAwOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpdGVtID0gbW9kdWxlc1tpXTtcclxuXHRcdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXHJcblx0XHRcdFx0Ly8gdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBub3QgMTAwJSBwZXJmZWN0IGZvciB3ZWlyZCBtZWRpYSBxdWVyeSBjb21iaW5hdGlvbnNcclxuXHRcdFx0XHQvLyAgd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxyXG5cdFx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXHJcblx0XHRcdFx0aWYodHlwZW9mIGl0ZW1bMF0gIT09IFwibnVtYmVyXCIgfHwgIWFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcclxuXHRcdFx0XHRcdGlmKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcclxuXHRcdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYobWVkaWFRdWVyeSkge1xyXG5cdFx0XHRcdFx0XHRpdGVtWzJdID0gXCIoXCIgKyBpdGVtWzJdICsgXCIpIGFuZCAoXCIgKyBtZWRpYVF1ZXJ5ICsgXCIpXCI7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRsaXN0LnB1c2goaXRlbSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdFx0cmV0dXJuIGxpc3Q7XHJcblx0fTtcclxuXG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdFx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0XHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG5cdCovXG5cdHZhciBzdHlsZXNJbkRvbSA9IHt9LFxuXHRcdG1lbW9pemUgPSBmdW5jdGlvbihmbikge1xuXHRcdFx0dmFyIG1lbW87XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0XHRyZXR1cm4gbWVtbztcblx0XHRcdH07XG5cdFx0fSxcblx0XHRpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAvbXNpZSBbNi05XVxcYi8udGVzdChzZWxmLm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG5cdFx0fSksXG5cdFx0Z2V0SGVhZEVsZW1lbnQgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcblx0XHR9KSxcblx0XHRzaW5nbGV0b25FbGVtZW50ID0gbnVsbCxcblx0XHRzaW5nbGV0b25Db3VudGVyID0gMCxcblx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdFx0aWYoZmFsc2UpIHtcblx0XHRcdGlmKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuXHRcdH1cblx0XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdFx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXHRcblx0XHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgPGhlYWQ+LlxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cdFxuXHRcdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCk7XG5cdFx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblx0XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblx0XHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0XHR9XG5cdFx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCk7XG5cdFx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG5cdFx0XHR9XG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcblx0XHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKylcblx0XHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cdFx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbGlzdFRvU3R5bGVzKGxpc3QpIHtcblx0XHR2YXIgc3R5bGVzID0gW107XG5cdFx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0XHR2YXIgaWQgPSBpdGVtWzBdO1xuXHRcdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xuXHRcdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cdFx0XHRpZighbmV3U3R5bGVzW2lkXSlcblx0XHRcdFx0c3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0bmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuXHRcdH1cblx0XHRyZXR1cm4gc3R5bGVzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KSB7XG5cdFx0dmFyIGhlYWQgPSBnZXRIZWFkRWxlbWVudCgpO1xuXHRcdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wW3N0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXHRcdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0XHRpZighbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcblx0XHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBoZWFkLmZpcnN0Q2hpbGQpO1xuXHRcdFx0fSBlbHNlIGlmKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHRcdFx0fVxuXHRcdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AucHVzaChzdHlsZUVsZW1lbnQpO1xuXHRcdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0Jy4gTXVzdCBiZSAndG9wJyBvciAnYm90dG9tJy5cIik7XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KSB7XG5cdFx0c3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHR2YXIgaWR4ID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZUVsZW1lbnQpO1xuXHRcdGlmKGlkeCA+PSAwKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSB7XG5cdFx0dmFyIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblx0XHRzdHlsZUVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0XHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KTtcblx0XHRyZXR1cm4gc3R5bGVFbGVtZW50O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKSB7XG5cdFx0dmFyIGxpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG5cdFx0bGlua0VsZW1lbnQucmVsID0gXCJzdHlsZXNoZWV0XCI7XG5cdFx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmtFbGVtZW50KTtcblx0XHRyZXR1cm4gbGlua0VsZW1lbnQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuXHRcdHZhciBzdHlsZUVsZW1lbnQsIHVwZGF0ZSwgcmVtb3ZlO1xuXHRcblx0XHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuXHRcdFx0c3R5bGVFbGVtZW50ID0gc2luZ2xldG9uRWxlbWVudCB8fCAoc2luZ2xldG9uRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XG5cdFx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCB0cnVlKTtcblx0XHR9IGVsc2UgaWYob2JqLnNvdXJjZU1hcCAmJlxuXHRcdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcblx0XHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xuXHRcdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xuXHRcdFx0XHRpZihzdHlsZUVsZW1lbnQuaHJlZilcblx0XHRcdFx0XHRVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlRWxlbWVudC5ocmVmKTtcblx0XHRcdH07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKTtcblx0XHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xuXHRcdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xuXHRcdFx0fTtcblx0XHR9XG5cdFxuXHRcdHVwZGF0ZShvYmopO1xuXHRcblx0XHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG5cdFx0XHRpZihuZXdPYmopIHtcblx0XHRcdFx0aWYobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKVxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZW1vdmUoKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cdFxuXHR2YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHRcdHZhciB0ZXh0U3RvcmUgPSBbXTtcblx0XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHRcdHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcblx0XHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHRcdH07XG5cdH0pKCk7XG5cdFxuXHRmdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlRWxlbWVudCwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdFx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXHRcblx0XHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZUVsZW1lbnQuY2hpbGROb2Rlcztcblx0XHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0XHRzdHlsZUVsZW1lbnQuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGVFbGVtZW50LCBvYmopIHtcblx0XHR2YXIgY3NzID0gb2JqLmNzcztcblx0XHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG5cdFxuXHRcdGlmKG1lZGlhKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXG5cdFx0fVxuXHRcblx0XHRpZihzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xuXHRcdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0XHR9IGVsc2Uge1xuXHRcdFx0d2hpbGUoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcblx0XHRcdFx0c3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcblx0XHRcdH1cblx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUxpbmsobGlua0VsZW1lbnQsIG9iaikge1xuXHRcdHZhciBjc3MgPSBvYmouY3NzO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXHRcblx0XHRpZihzb3VyY2VNYXApIHtcblx0XHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdFx0fVxuXHRcblx0XHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblx0XG5cdFx0dmFyIG9sZFNyYyA9IGxpbmtFbGVtZW50LmhyZWY7XG5cdFxuXHRcdGxpbmtFbGVtZW50LmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcblx0XHRpZihvbGRTcmMpXG5cdFx0XHRVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XG5cdH1cblxuXG4vKioqLyB9KSxcbi8qIDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5oYXNDbGFzcyA9IGZ1bmN0aW9uIChjbGFzc25hbWUpIHsgcmV0dXJuIGZ1bmN0aW9uIChlbCkge1xyXG5cdCAgICByZXR1cm4gISFuZXcgUmVnRXhwKFwiXFxcXGJcIiArIGNsYXNzbmFtZSArIFwiXFxcXGJcIikuZXhlYyhlbC5jbGFzc05hbWUpO1xyXG5cdH07IH07XHJcblx0ZXhwb3J0cy5hZGRDbGFzcyA9IGZ1bmN0aW9uIChjbGFzc25hbWUpIHsgcmV0dXJuIGZ1bmN0aW9uIChlbCkge1xyXG5cdCAgICByZXR1cm4gZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lICsgXCIgXCIgKyBjbGFzc25hbWU7XHJcblx0fTsgfTtcclxuXHRleHBvcnRzLnJlbW92ZUNsYXNzID0gZnVuY3Rpb24gKGNsYXNzbmFtZSkgeyByZXR1cm4gZnVuY3Rpb24gKGVsKSB7XHJcblx0ICAgIHJldHVybiBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKFwiXFxcXGJcIiArIGNsYXNzbmFtZSArIFwiXFxcXGJcIiwgJ2cnKSwgXCJcIik7XHJcblx0fTsgfTtcclxuXHRleHBvcnRzLnRvZ2dsZUNsYXNzID0gZnVuY3Rpb24gKGNsYXNzbmFtZSkgeyByZXR1cm4gZnVuY3Rpb24gKGVsKSB7XHJcblx0ICAgIGlmIChleHBvcnRzLmhhc0NsYXNzKGNsYXNzbmFtZSkoZWwpKVxyXG5cdCAgICAgICAgZXhwb3J0cy5yZW1vdmVDbGFzcyhjbGFzc25hbWUpKGVsKTtcclxuXHQgICAgZWxzZVxyXG5cdCAgICAgICAgZXhwb3J0cy5hZGRDbGFzcyhjbGFzc25hbWUpKGVsKTtcclxuXHR9OyB9O1xyXG5cblxuLyoqKi8gfSksXG4vKiA5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdHZhciB0b2dnbGVDbGFzc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcclxuXHR2YXIgbW92ZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudFRvTW92ZSkge1xyXG5cdCAgICByZXR1cm4gZnVuY3Rpb24gX21vdmVFbGVtZW50KGVsZW1lbnRCZWluZ0RyYWdnZWQsIGV2ZW50LCBkZXRhaWxzKSB7XHJcblx0ICAgICAgICB2YXIgaW5pdGlhbENsaWVudFggPSBkZXRhaWxzLmluaXRpYWxDbGllbnRYLCBpbml0aWFsQ2xpZW50WSA9IGRldGFpbHMuaW5pdGlhbENsaWVudFksIGxhc3RDbGllbnRYID0gZGV0YWlscy5sYXN0Q2xpZW50WCwgbGFzdENsaWVudFkgPSBkZXRhaWxzLmxhc3RDbGllbnRZLCBuZXdDbGllbnRYID0gZGV0YWlscy5uZXdDbGllbnRYLCBuZXdDbGllbnRZID0gZGV0YWlscy5uZXdDbGllbnRZO1xyXG5cdCAgICAgICAgdmFyIGVsID0gZWxlbWVudFRvTW92ZTtcclxuXHQgICAgICAgIHZhciBib3VuZHMgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHQgICAgICAgIHZhciBsZWZ0ID0gYm91bmRzLmxlZnQsIHRvcCA9IGJvdW5kcy50b3A7XHJcblx0ICAgICAgICB2YXIgZHggPSBuZXdDbGllbnRYIC0gbGFzdENsaWVudFg7XHJcblx0ICAgICAgICB2YXIgZHkgPSBuZXdDbGllbnRZIC0gbGFzdENsaWVudFk7XHJcblx0ICAgICAgICBlbC5zdHlsZS5yaWdodCA9IFwiYXV0b1wiO1xyXG5cdCAgICAgICAgZWwuc3R5bGUuYm90dG9tID0gXCJhdXRvXCI7XHJcblx0ICAgICAgICBlbC5zdHlsZS5sZWZ0ID0gKGxlZnQgKyBkeCkgKyAncHgnO1xyXG5cdCAgICAgICAgZWwuc3R5bGUudG9wID0gKHRvcCArIGR5KSArICdweCc7XHJcblx0ICAgIH07XHJcblx0fTtcclxuXHRleHBvcnRzLmRyYWdBY3Rpb25zID0ge1xyXG5cdCAgICBtb3ZlOiBtb3ZlRWxlbWVudCxcclxuXHR9O1xyXG5cdGZ1bmN0aW9uIGRyYWdnYWJsZShlbCwgY2FsbGJhY2spIHtcclxuXHQgICAgdmFyIGVuYWJsZWQgPSB0cnVlO1xyXG5cdCAgICB2YXIgaXNEcmFnZ2luZyA9IGZhbHNlO1xyXG5cdCAgICB2YXIgaW5pdGlhbENsaWVudFggPSAwLCBpbml0aWFsQ2xpZW50WSA9IDA7XHJcblx0ICAgIHZhciBsYXN0Q2xpZW50WCA9IDAsIGxhc3RDbGllbnRZID0gMDtcclxuXHQgICAgdmFyIG1vdXNlRG93bkxpc3RlbmVyID0gZnVuY3Rpb24gKGUpIHtcclxuXHQgICAgICAgIGlmICghZW5hYmxlZClcclxuXHQgICAgICAgICAgICByZXR1cm47XHJcblx0ICAgICAgICBpc0RyYWdnaW5nID0gdHJ1ZTtcclxuXHQgICAgICAgIGxhc3RDbGllbnRYID0gaW5pdGlhbENsaWVudFggPSBlLmNsaWVudFg7XHJcblx0ICAgICAgICBsYXN0Q2xpZW50WSA9IGluaXRpYWxDbGllbnRZID0gZS5jbGllbnRZO1xyXG5cdCAgICAgICAgdmFyIGRyYWdMaXN0ZW5lciA9IGZ1bmN0aW9uIChlKSB7XHJcblx0ICAgICAgICAgICAgaWYgKCFlbmFibGVkIHx8ICFpc0RyYWdnaW5nKVxyXG5cdCAgICAgICAgICAgICAgICByZXR1cm47XHJcblx0ICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdCAgICAgICAgICAgIHZhciBuZXdDbGllbnRYID0gZS5jbGllbnRYLCBuZXdDbGllbnRZID0gZS5jbGllbnRZO1xyXG5cdCAgICAgICAgICAgIGNhbGxiYWNrKGVsLCBlLCB7IGluaXRpYWxDbGllbnRYOiBpbml0aWFsQ2xpZW50WCwgaW5pdGlhbENsaWVudFk6IGluaXRpYWxDbGllbnRZLCBsYXN0Q2xpZW50WDogbGFzdENsaWVudFgsIGxhc3RDbGllbnRZOiBsYXN0Q2xpZW50WSwgbmV3Q2xpZW50WDogbmV3Q2xpZW50WCwgbmV3Q2xpZW50WTogbmV3Q2xpZW50WSB9KTtcclxuXHQgICAgICAgICAgICBsYXN0Q2xpZW50WCA9IG5ld0NsaWVudFg7XHJcblx0ICAgICAgICAgICAgbGFzdENsaWVudFkgPSBuZXdDbGllbnRZO1xyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIHZhciBkb25lRHJhZ2dpbmcgPSBmdW5jdGlvbiAoZSkge1xyXG5cdCAgICAgICAgICAgIGlzRHJhZ2dpbmcgPSBmYWxzZTtcclxuXHQgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGRyYWdMaXN0ZW5lcik7XHJcblx0ICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZG9uZURyYWdnaW5nKTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGRyYWdMaXN0ZW5lcik7XHJcblx0ICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBkb25lRHJhZ2dpbmcpO1xyXG5cdCAgICB9O1xyXG5cdCAgICB0b2dnbGVDbGFzc18xLmFkZENsYXNzKFwiZHJhZ2dhYmxlXCIpKGVsKTtcclxuXHQgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBtb3VzZURvd25MaXN0ZW5lcik7XHJcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIG1vdXNlRG93bkxpc3RlbmVyKTsgfTtcclxuXHR9XHJcblx0ZXhwb3J0cy5kcmFnZ2FibGUgPSBkcmFnZ2FibGU7XHJcblxuXG4vKioqLyB9KSxcbi8qIDEwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG5cdCAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG5cdCAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG5cdCAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuXHQgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG5cdCAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG5cdCAgICB9O1xyXG5cdH0pKCk7XHJcblx0dmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XHJcblx0ICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG5cdCAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuXHQgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcclxuXHQgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuXHQgICAgfVxyXG5cdCAgICByZXR1cm4gdDtcclxuXHR9O1xyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuXHR2YXIgcHJlYWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xyXG5cdHZhciBzdGF0ZU5vZGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xyXG5cdHZhciBhbmltYXRlcGF0aF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XHJcblx0dmFyIGVhc2luZ18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XHJcblx0dmFyIHJlbmRlcmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcclxuXHR2YXIgc3RhdGVWaXNOb2RlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcclxuXHR2YXIgcmVzZXRNZXRhZGF0YSA9IHtcclxuXHQgICAgbGFiZWw6ICcnLFxyXG5cdCAgICBoaWdobGlnaHQ6IGZhbHNlLFxyXG5cdCAgICBhY3RpdmU6IGZhbHNlLFxyXG5cdCAgICBmdXR1cmU6IGZhbHNlLFxyXG5cdCAgICByZXRhaW5lZDogZmFsc2UsXHJcblx0ICAgIGVudGVyZWQ6IGZhbHNlLFxyXG5cdCAgICBleGl0ZWQ6IGZhbHNlLFxyXG5cdCAgICBpbmFjdGl2ZTogdHJ1ZVxyXG5cdH07XHJcblx0dmFyIFN0YXRlVHJlZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcblx0ICAgIF9fZXh0ZW5kcyhTdGF0ZVRyZWUsIF9zdXBlcik7XHJcblx0ICAgIGZ1bmN0aW9uIFN0YXRlVHJlZSgpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG5cdCAgICAgICAgX3RoaXMuc3RhdGUgPSB7XHJcblx0ICAgICAgICAgICAgbm9kZXM6IFtdLFxyXG5cdCAgICAgICAgICAgIGxheW91dDoge31cclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICBfdGhpcy5ub2RlcyA9IFtdO1xyXG5cdCAgICAgICAgX3RoaXMudW5tb3VudGVkID0gZmFsc2U7XHJcblx0ICAgICAgICBfdGhpcy5jYW5jZWxDdXJyZW50QW5pbWF0aW9uID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbnVsbDsgfTtcclxuXHQgICAgICAgIF90aGlzLmRvTGF5b3V0QW5pbWF0aW9uID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgICAgIF90aGlzLmNhbmNlbEN1cnJlbnRBbmltYXRpb24oKTtcclxuXHQgICAgICAgICAgICB2YXIgbm9kZXMgPSBfdGhpcy5nZXROb2RlcygpO1xyXG5cdCAgICAgICAgICAgIGlmICghbm9kZXMubGVuZ3RoKVxyXG5cdCAgICAgICAgICAgICAgICByZXR1cm47XHJcblx0ICAgICAgICAgICAgdmFyIHJvb3ROb2RlID0gbm9kZXMuZmlsdGVyKGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gc3RhdGUubmFtZSA9PT0gXCJcIjsgfSlbMF07XHJcblx0ICAgICAgICAgICAgX3RoaXMucHJvcHMucmVuZGVyZXIubGF5b3V0Rm4ocm9vdE5vZGUpO1xyXG5cdCAgICAgICAgICAgIC8vIE1vdmUgYWxsIG5vbi12aXNpYmxlIG5vZGVzIHRvIHNhbWUgeC95IGNvb3JkcyBhcyB0aGUgbmVhcmVzdCB2aXNpYmxlIHBhcmVudFxyXG5cdCAgICAgICAgICAgIG5vZGVzLmZpbHRlcihmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gIW5vZGUudmlzaWJsZTsgfSkuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xyXG5cdCAgICAgICAgICAgICAgICB2YXIgdmlzaWJsZUFuY2VzdG9yID0gbm9kZS5fcGFyZW50O1xyXG5cdCAgICAgICAgICAgICAgICB3aGlsZSAodmlzaWJsZUFuY2VzdG9yICYmICF2aXNpYmxlQW5jZXN0b3IudmlzaWJsZSlcclxuXHQgICAgICAgICAgICAgICAgICAgIHZpc2libGVBbmNlc3RvciA9IHZpc2libGVBbmNlc3Rvci5fcGFyZW50O1xyXG5cdCAgICAgICAgICAgICAgICBpZiAodmlzaWJsZUFuY2VzdG9yKSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICBub2RlLnggPSB2aXNpYmxlQW5jZXN0b3IueDtcclxuXHQgICAgICAgICAgICAgICAgICAgIG5vZGUueSA9IHZpc2libGVBbmNlc3Rvci55O1xyXG5cdCAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgfSk7XHJcblx0ICAgICAgICAgICAgdmFyIGRpbWVuc2lvbnMgPSBfdGhpcy5kaW1lbnNpb25zKCk7XHJcblx0ICAgICAgICAgICAgLy8gVHJhbnNmb3JtcyB4IGNvb3JkIGZyb20gdGhlIHRyZWUgbGF5b3V0IHRvIGZpdCB0aGUgdmlld3BvcnQgdXNpbmcgc2NhbGUvb2Zmc2V0IHZhbHVlc1xyXG5cdCAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1YID0gZnVuY3Rpb24gKHh2YWwpIHsgcmV0dXJuIHh2YWwgKiBkaW1lbnNpb25zLnNjYWxlWCArIGRpbWVuc2lvbnMub2Zmc2V0WDsgfTtcclxuXHQgICAgICAgICAgICAvLyBUcmFuc2Zvcm1zIHkgY29vcmQgZnJvbSB0aGUgdHJlZSBsYXlvdXQgdG8gZml0IHRoZSB2aWV3cG9ydCB1c2luZyBzY2FsZS9vZmZzZXQgdmFsdWVzXHJcblx0ICAgICAgICAgICAgdmFyIHRyYW5zZm9ybVkgPSBmdW5jdGlvbiAoeXZhbCkgeyByZXR1cm4geXZhbCAqIGRpbWVuc2lvbnMuc2NhbGVZICsgZGltZW5zaW9ucy5vZmZzZXRZOyB9O1xyXG5cdCAgICAgICAgICAgIHZhciBnZXRDdXJyZW50Q29vcmRzID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuXHQgICAgICAgICAgICAgICAgcmV0dXJuICh7IHg6IG5vZGUuYW5pbVggfHwgX3RoaXMucHJvcHMud2lkdGggLyAyLCB5OiBub2RlLmFuaW1ZIHx8IF90aGlzLnByb3BzLmhlaWdodCAvIDIgfSk7XHJcblx0ICAgICAgICAgICAgfTtcclxuXHQgICAgICAgICAgICAvLyBBbiBhcnJheSBjb250YWluaW5nIGN1cnJlbnQgeC95IGNvb3JkcyBmb3IgYWxsIG5vZGVzXHJcblx0ICAgICAgICAgICAgLy8gWyB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQgXVxyXG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50Q29vcmRzID0gbm9kZXMubWFwKGdldEN1cnJlbnRDb29yZHMpLm1hcChmdW5jdGlvbiAob2JqKSB7IHJldHVybiBbb2JqLngsIG9iai55XTsgfSlcclxuXHQgICAgICAgICAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBhcnIpIHsgcmV0dXJuIGFjYy5jb25jYXQoYXJyKTsgfSwgW10pO1xyXG5cdCAgICAgICAgICAgIC8vIEFuIGFycmF5IGNvbnRhaW5pbmcgdGFyZ2V0IHgveSBjb29yZHMgZm9yIGFsbCBub2Rlc1xyXG5cdCAgICAgICAgICAgIC8vIFsgeDEnLCB5MScsIHgyJywgeTInLCB4MycsIHkzJywgeDQnLCB5NCcgXVxyXG5cdCAgICAgICAgICAgIHZhciB0YXJnZXRDb29yZHMgPSBub2Rlcy5tYXAoZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIFt0cmFuc2Zvcm1YKG5vZGUueCksIHRyYW5zZm9ybVkobm9kZS55KV07IH0pXHJcblx0ICAgICAgICAgICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgYXJyKSB7IHJldHVybiBhY2MuY29uY2F0KGFycik7IH0sIFtdKTtcclxuXHQgICAgICAgICAgICAvLyB4eVZhbEFycmF5IGlzIGFuIGFycmF5IGNvbnRhaW5pbmcgeC95IGNvb3JkcyBmb3IgYWxsIG5vZGVzLFxyXG5cdCAgICAgICAgICAgIC8vIGludGVycG9sYXRlZCBiZXR3ZWVuIGN1cnJlbnRDb29yZHMgYW5kIHRhcmdldENvb3JkcyBiYXNlZCBvbiB0aW1lXHJcblx0ICAgICAgICAgICAgLy8gWyB4MScnLCB5MScnLCB4MicnLCB5MicnLCB4MycnLCB5MycnLCB4NCcnLCB5NCcnIF1cclxuXHQgICAgICAgICAgICB2YXIgYW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAoeHlWYWxBcnJheSkge1xyXG5cdCAgICAgICAgICAgICAgICB2YXIgdHVwbGVDb3VudCA9IHh5VmFsQXJyYXkubGVuZ3RoIC8gMjtcclxuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0dXBsZUNvdW50ICYmIGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcclxuXHQgICAgICAgICAgICAgICAgICAgIG5vZGUuYW5pbVggPSB4eVZhbEFycmF5WyhpICogMildO1xyXG5cdCAgICAgICAgICAgICAgICAgICAgbm9kZS5hbmltWSA9IHh5VmFsQXJyYXlbKGkgKiAyKSArIDFdO1xyXG5cdCAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgbm9kZXM6IG5vZGVzIH0pO1xyXG5cdCAgICAgICAgICAgIH07XHJcblx0ICAgICAgICAgICAgX3RoaXMuY2FuY2VsQ3VycmVudEFuaW1hdGlvbiA9IGFuaW1hdGVwYXRoXzEuYW5pbWF0ZVBhdGgodGFyZ2V0Q29vcmRzLCBjdXJyZW50Q29vcmRzLCA1MDAsIGFuaW1hdGlvbkZyYW1lLCBmdW5jdGlvbiAoKSB7IHJldHVybiBudWxsOyB9LCBlYXNpbmdfMS5lYXNpbmcuZWFzZUluT3V0RXhwbyk7XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgX3RoaXMubm9kZUZvclN0YXRlID0gZnVuY3Rpb24gKG5vZGVzLCBzdGF0ZSkge1xyXG5cdCAgICAgICAgICAgIHJldHVybiBub2Rlcy5maWx0ZXIoZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUubmFtZSA9PT0gc3RhdGUubmFtZTsgfSlbMF07XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgX3RoaXMudXBkYXRlU3RhdGVzID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgICAgIHZhciByb3V0ZXIgPSBfdGhpcy5wcm9wcy5yb3V0ZXI7XHJcblx0ICAgICAgICAgICAgdmFyIHN0YXRlcyA9IHJvdXRlci5zdGF0ZVNlcnZpY2UuZ2V0KCkubWFwKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLiQkc3RhdGUoKTsgfSk7XHJcblx0ICAgICAgICAgICAgdmFyIGtub3duID0gX3RoaXMubm9kZXMubWFwKE9iamVjdC5nZXRQcm90b3R5cGVPZik7XHJcblx0ICAgICAgICAgICAgdmFyIHRvQWRkID0gc3RhdGVzLmZpbHRlcihmdW5jdGlvbiAocykgeyByZXR1cm4ga25vd24uaW5kZXhPZihzKSA9PT0gLTE7IH0pO1xyXG5cdCAgICAgICAgICAgIHZhciB0b0RlbCA9IGtub3duLmZpbHRlcihmdW5jdGlvbiAocykgeyByZXR1cm4gc3RhdGVzLmluZGV4T2YocykgPT09IC0xOyB9KTtcclxuXHQgICAgICAgICAgICB2YXIgbm9kZXMgPSBfdGhpcy5ub2RlcyA9IF90aGlzLm5vZGVzLnNsaWNlKCk7XHJcblx0ICAgICAgICAgICAgaWYgKHRvQWRkLmxlbmd0aCB8fCB0b0RlbC5sZW5ndGgpIHtcclxuXHQgICAgICAgICAgICAgICAgdG9BZGQubWFwKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzdGF0ZVZpc05vZGVfMS5jcmVhdGVTdGF0ZVZpc05vZGUocyk7IH0pLmZvckVhY2goZnVuY3Rpb24gKG4pIHsgcmV0dXJuIG5vZGVzLnB1c2gobik7IH0pO1xyXG5cdCAgICAgICAgICAgICAgICB0b0RlbC5tYXAoZnVuY3Rpb24gKGRlbCkgeyByZXR1cm4gbm9kZXMuZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBkZWwuaXNQcm90b3R5cGVPZihub2RlKTsgfSk7IH0pXHJcblx0ICAgICAgICAgICAgICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHgpIHsgcmV0dXJuIGFjYy5jb25jYXQoeCk7IH0sIFtdKVxyXG5cdCAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGVzLnNwbGljZShub2Rlcy5pbmRleE9mKG5vZGUpLCAxKTsgfSk7XHJcblx0ICAgICAgICAgICAgICAgIC8vIFJlYnVpbGQgZWFjaCBub2RlJ3MgY2hpbGRyZW4gYXJyYXlcclxuXHQgICAgICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobikgeyByZXR1cm4gbi5fY2hpbGRyZW4gPSBbXTsgfSk7XHJcblx0ICAgICAgICAgICAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG4pIHtcclxuXHQgICAgICAgICAgICAgICAgICAgIGlmICghbiB8fCAhbi5wYXJlbnQpXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBfdGhpcy5ub2RlRm9yU3RhdGUobm9kZXMsIG4ucGFyZW50KTtcclxuXHQgICAgICAgICAgICAgICAgICAgIGlmICghcGFyZW50Tm9kZSlcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblx0ICAgICAgICAgICAgICAgICAgICBwYXJlbnROb2RlLl9jaGlsZHJlbi5wdXNoKG4pO1xyXG5cdCAgICAgICAgICAgICAgICAgICAgbi5fcGFyZW50ID0gcGFyZW50Tm9kZTtcclxuXHQgICAgICAgICAgICAgICAgfSk7XHJcblx0ICAgICAgICAgICAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG4pIHsgcmV0dXJuIG4uZnV0dXJlID0gISFuLmxhenlMb2FkOyB9KTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgaWYgKCFfdGhpcy51bm1vdW50ZWQgJiYgIV90aGlzLmRlcmVnaXN0ZXJTdGF0ZUxpc3RlbmVyRm4pIHtcclxuXHQgICAgICAgICAgICAgICAgLy8gcG9sbCBpZiB1aS1yb3V0ZXIgdmVyc2lvbiBpcyAxLjAuMC1iZXRhLjEgb3IgZWFybGllclxyXG5cdCAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KF90aGlzLnVwZGF0ZVN0YXRlcywgMTAwMCk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgbm9kZXM6IG5vZGVzIH0sIF90aGlzLmRvTGF5b3V0QW5pbWF0aW9uKTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICBfdGhpcy51cGRhdGVOb2RlcyA9IGZ1bmN0aW9uICgkdHJhbnNpdGlvbiQpIHtcclxuXHQgICAgICAgICAgICB2YXIgbm9kZXMgPSBfdGhpcy5ub2Rlcy5tYXAoZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIE9iamVjdC5hc3NpZ24obm9kZSwgcmVzZXRNZXRhZGF0YSk7IH0pO1xyXG5cdCAgICAgICAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG4pIHsgcmV0dXJuIG4uZnV0dXJlID0gISFuLmxhenlMb2FkOyB9KTtcclxuXHQgICAgICAgICAgICBpZiAoJHRyYW5zaXRpb24kKSB7XHJcblx0ICAgICAgICAgICAgICAgIHZhciB0YyA9ICR0cmFuc2l0aW9uJC50cmVlQ2hhbmdlcygpO1xyXG5cdCAgICAgICAgICAgICAgICB2YXIgZ2V0Tm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubm9kZUZvclN0YXRlKF90aGlzLm5vZGVzLCBub2RlLnN0YXRlKTtcclxuXHQgICAgICAgICAgICAgICAgfTtcclxuXHQgICAgICAgICAgICAgICAgdGMucmV0YWluZWQuY29uY2F0KHRjLmVudGVyaW5nKS5tYXAoZ2V0Tm9kZSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KS5mb3JFYWNoKGZ1bmN0aW9uIChuKSB7IHJldHVybiBuLmVudGVyZWQgPSB0cnVlOyB9KTtcclxuXHQgICAgICAgICAgICAgICAgdGMucmV0YWluZWQubWFwKGdldE5vZGUpLmZpbHRlcihmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSkuZm9yRWFjaChmdW5jdGlvbiAobikgeyByZXR1cm4gbi5yZXRhaW5lZCA9IHRydWU7IH0pO1xyXG5cdCAgICAgICAgICAgICAgICB0Yy5leGl0aW5nLm1hcChnZXROb2RlKS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pLmZvckVhY2goZnVuY3Rpb24gKG4pIHsgcmV0dXJuIG4uZXhpdGVkID0gdHJ1ZTsgfSk7XHJcblx0ICAgICAgICAgICAgICAgIHRjLnRvLnNsaWNlKC0xKS5tYXAoZ2V0Tm9kZSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KS5mb3JFYWNoKGZ1bmN0aW9uIChuKSB7IG4uYWN0aXZlID0gdHJ1ZTsgbi5sYWJlbCA9IFwiYWN0aXZlXCI7IH0pO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IG5vZGVzOiBfdGhpcy5ub2RlcyB9LCBfdGhpcy5kb0xheW91dEFuaW1hdGlvbik7XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgcmV0dXJuIF90aGlzO1xyXG5cdCAgICB9XHJcblx0ICAgIFN0YXRlVHJlZS5jcmVhdGUgPSBmdW5jdGlvbiAocm91dGVyLCBlbGVtZW50LCBwcm9wcykge1xyXG5cdCAgICAgICAgaWYgKHByb3BzID09PSB2b2lkIDApIHsgcHJvcHMgPSB7fTsgfVxyXG5cdCAgICAgICAgaWYgKCFlbGVtZW50KSB7XHJcblx0ICAgICAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblx0ICAgICAgICAgICAgZWxlbWVudC5pZCA9IFwidWlyU3RhdGVUcmVlXCI7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB2YXIgaW5pdGlhbFByb3BzID0gX19hc3NpZ24oe30sIHByb3BzLCB7IHJvdXRlcjogcm91dGVyIH0pO1xyXG5cdCAgICAgICAgdmFyIF9yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuXHQgICAgICAgICAgICBwcmVhY3RfMS5yZW5kZXIocHJlYWN0XzEuaChTdGF0ZVRyZWUsIGluaXRpYWxQcm9wcyksIGVsZW1lbnQpO1xyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnaW50ZXJhY3RpdmUnIHx8IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcclxuXHQgICAgICAgICAgICBfcmVuZGVyKCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBlbHNlIHtcclxuXHQgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgX3JlbmRlciwgZmFsc2UpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcblx0ICAgIH07XHJcblx0ICAgIFN0YXRlVHJlZS5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgdmFyIHJlZ2lzdHJ5ID0gdGhpcy5wcm9wcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeTtcclxuXHQgICAgICAgIHZhciAkdHJhbnNpdGlvbnMgPSB0aGlzLnByb3BzLnJvdXRlci50cmFuc2l0aW9uU2VydmljZTtcclxuXHQgICAgICAgIC8vIFJlZ2lzdGVyIHN0YXRlcyBjaGFuZ2VkIGxpc3RlbmVyXHJcblx0ICAgICAgICBpZiAocmVnaXN0cnkub25TdGF0ZXNDaGFuZ2VkKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5kZXJlZ2lzdGVyU3RhdGVMaXN0ZW5lckZuID0gcmVnaXN0cnkub25TdGF0ZXNDaGFuZ2VkKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnVwZGF0ZVN0YXRlcygpOyB9KTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHRoaXMudXBkYXRlU3RhdGVzKCk7XHJcblx0ICAgICAgICAvLyBSZWdpc3RlciBvblN1Y2Nlc3MgdHJhbnNpdGlvbiBob29rIHRvIHRvZ2dsZSB0aGUgU1ZHIGNsYXNzZXNcclxuXHQgICAgICAgIHRoaXMuZGVyZWdpc3Rlckhvb2tGbiA9ICR0cmFuc2l0aW9ucy5vblN1Y2Nlc3Moe30sIGZ1bmN0aW9uICh0cmFucykgeyByZXR1cm4gX3RoaXMudXBkYXRlTm9kZXModHJhbnMpOyB9KTtcclxuXHQgICAgICAgIHRoaXMudXBkYXRlTm9kZXMoKTtcclxuXHQgICAgICAgIHZhciBsYXN0U3VjY2Vzc2Z1bCA9IHRoaXMucHJvcHMucm91dGVyLmdsb2JhbHMuc3VjY2Vzc2Z1bFRyYW5zaXRpb25zLnBlZWtUYWlsKCk7XHJcblx0ICAgICAgICBpZiAobGFzdFN1Y2Nlc3NmdWwpIHtcclxuXHQgICAgICAgICAgICB0aGlzLnVwZGF0ZU5vZGVzKGxhc3RTdWNjZXNzZnVsKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHZhciBwZW5kaW5nID0gdGhpcy5wcm9wcy5yb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uO1xyXG5cdCAgICAgICAgaWYgKHBlbmRpbmcpIHtcclxuXHQgICAgICAgICAgICBwZW5kaW5nLnByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy51cGRhdGVOb2RlcyhwZW5kaW5nKTsgfSk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIFN0YXRlVHJlZS5wcm90b3R5cGUuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBub2RlcyA9IHRoaXMuc3RhdGUubm9kZXM7XHJcblx0ICAgICAgICB0aGlzLnNldFN0YXRlKHsgbm9kZXM6IG5vZGVzIH0sIHRoaXMudXBkYXRlU3RhdGVzKTtcclxuXHQgICAgfTtcclxuXHQgICAgU3RhdGVUcmVlLnByb3RvdHlwZS5kaW1lbnNpb25zID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIG5ld1Byb3BzID0ge307XHJcblx0ICAgICAgICB2YXIgcmFkaXVzID0gMTU7XHJcblx0ICAgICAgICB2YXIgb2Zmc2V0WCA9IDA7XHJcblx0ICAgICAgICB2YXIgb2Zmc2V0WSA9IHJhZGl1cyAqIDI7XHJcblx0ICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQgfHwgNTAwO1xyXG5cdCAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5wcm9wcy53aWR0aCB8fCA1MDA7XHJcblx0ICAgICAgICB2YXIgc2NhbGVYID0gbmV3UHJvcHMuc2NhbGVYIHx8ICh3aWR0aCAtIG9mZnNldFggKiAyKTtcclxuXHQgICAgICAgIHZhciBzY2FsZVkgPSBuZXdQcm9wcy5zY2FsZVkgfHwgKGhlaWdodCAtIG9mZnNldFkgKiAyKTtcclxuXHQgICAgICAgIHJldHVybiB7IHJhZGl1czogcmFkaXVzLCBvZmZzZXRYOiBvZmZzZXRYLCBvZmZzZXRZOiBvZmZzZXRZLCBzY2FsZVg6IHNjYWxlWCwgc2NhbGVZOiBzY2FsZVkgfTtcclxuXHQgICAgfTtcclxuXHQgICAgU3RhdGVUcmVlLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMudW5tb3VudGVkID0gdHJ1ZTtcclxuXHQgICAgICAgIHRoaXMuZGVyZWdpc3Rlckhvb2tGbiAmJiB0aGlzLmRlcmVnaXN0ZXJIb29rRm4oKTtcclxuXHQgICAgfTtcclxuXHQgICAgU3RhdGVUcmVlLnByb3RvdHlwZS5nZXROb2RlcyA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHJldHVybiB0aGlzLm5vZGVzLnNsaWNlKCkuc29ydCh0aGlzLnByb3BzLnJlbmRlcmVyLnNvcnROb2Rlc0ZuKTtcclxuXHQgICAgfTtcclxuXHQgICAgU3RhdGVUcmVlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgdmFyIHJlbmRlcmVyID0gdGhpcy5wcm9wcy5yZW5kZXJlcjtcclxuXHQgICAgICAgIHZhciByZW5kZXJOb2RlcyA9IHRoaXMuZ2V0Tm9kZXMoKVxyXG5cdCAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUudmlzaWJsZSAmJiBub2RlLmFuaW1YICYmIG5vZGUuYW5pbVk7IH0pO1xyXG5cdCAgICAgICAgcmV0dXJuIChwcmVhY3RfMS5oKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0YXRldmlzXCIgfSxcclxuXHQgICAgICAgICAgICBwcmVhY3RfMS5oKFwic3ZnXCIsIHsgd2lkdGg6IHRoaXMucHJvcHMud2lkdGgsIGhlaWdodDogdGhpcy5wcm9wcy5oZWlnaHQgfSxcclxuXHQgICAgICAgICAgICAgICAgcmVuZGVyTm9kZXMuZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiAhIW5vZGUucGFyZW50OyB9KS5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJlci5lZGdlUmVuZGVyRm4obm9kZSwgcmVuZGVyZXIpO1xyXG5cdCAgICAgICAgICAgICAgICB9KSxcclxuXHQgICAgICAgICAgICAgICAgcmVuZGVyTm9kZXMubWFwKGZ1bmN0aW9uIChub2RlKSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlYWN0XzEuaChzdGF0ZU5vZGVfMS5TdGF0ZU5vZGUsIHsga2V5OiBub2RlLm5hbWUsIG5vZGU6IG5vZGUsIHJvdXRlcjogX3RoaXMucHJvcHMucm91dGVyLCByZW5kZXJlcjogX3RoaXMucHJvcHMucmVuZGVyZXIsIGRvTGF5b3V0OiBfdGhpcy5kb0xheW91dEFuaW1hdGlvbi5iaW5kKF90aGlzKSwgeDogbm9kZS5hbmltWCwgeTogbm9kZS5hbmltWSB9KTtcclxuXHQgICAgICAgICAgICAgICAgfSkpKSk7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBTdGF0ZVRyZWU7XHJcblx0fShwcmVhY3RfMS5Db21wb25lbnQpKTtcclxuXHRTdGF0ZVRyZWUuZGVmYXVsdFByb3BzID0ge1xyXG5cdCAgICBoZWlnaHQ6IDM1MCxcclxuXHQgICAgd2lkdGg6IDI1MCxcclxuXHQgICAgcmVuZGVyZXI6IHJlbmRlcmVyXzEuREVGQVVMVF9SRU5ERVJFUixcclxuXHR9O1xyXG5cdGV4cG9ydHMuU3RhdGVUcmVlID0gU3RhdGVUcmVlO1xyXG5cblxuLyoqKi8gfSksXG4vKiAxMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuXHQgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuXHQgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuXHQgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcblx0ICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuXHQgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuXHQgICAgfTtcclxuXHR9KSgpO1xyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuXHR2YXIgcHJlYWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xyXG5cdHZhciBTdGF0ZU5vZGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG5cdCAgICBfX2V4dGVuZHMoU3RhdGVOb2RlLCBfc3VwZXIpO1xyXG5cdCAgICBmdW5jdGlvbiBTdGF0ZU5vZGUoKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuXHQgICAgICAgIF90aGlzLmdvVGltZW91dCA9IG51bGw7XHJcblx0ICAgICAgICBfdGhpcy5oYW5kbGVDb2xsYXBzZUNsaWNrZWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHQgICAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMuZ29UaW1lb3V0KTtcclxuXHQgICAgICAgICAgICBfdGhpcy5wcm9wcy5ub2RlLl9jb2xsYXBzZWQgPSAhX3RoaXMucHJvcHMubm9kZS5fY29sbGFwc2VkO1xyXG5cdCAgICAgICAgICAgIF90aGlzLnByb3BzLmRvTGF5b3V0KCk7XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgX3RoaXMuaGFuZGxlR29DbGlja2VkID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0ICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLmdvVGltZW91dCk7XHJcblx0ICAgICAgICAgICAgdmFyIHN0YXRlTmFtZSA9IF90aGlzLnByb3BzLm5vZGUubmFtZTtcclxuXHQgICAgICAgICAgICBzdGF0ZU5hbWUgPSBzdGF0ZU5hbWUucmVwbGFjZSgvXFwuXFwqXFwqJC8sIFwiXCIpO1xyXG5cdCAgICAgICAgICAgIF90aGlzLmdvVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucHJvcHMucm91dGVyLnN0YXRlU2VydmljZS5nbyhzdGF0ZU5hbWUpOyB9LCAyMDApO1xyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIHJldHVybiBfdGhpcztcclxuXHQgICAgfVxyXG5cdCAgICBTdGF0ZU5vZGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciByZW5kZXJlciA9IHRoaXMucHJvcHMucmVuZGVyZXI7XHJcblx0ICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBub2RlID0gX2Eubm9kZSwgeCA9IF9hLngsIHkgPSBfYS55O1xyXG5cdCAgICAgICAgdmFyIGJhc2VSYWRpdXMgPSByZW5kZXJlci5iYXNlUmFkaXVzLCBiYXNlRm9udFNpemUgPSByZW5kZXJlci5iYXNlRm9udFNpemUsIGJhc2VOb2RlU3Ryb2tlV2lkdGggPSByZW5kZXJlci5iYXNlTm9kZVN0cm9rZVdpZHRoLCB6b29tID0gcmVuZGVyZXIuem9vbTtcclxuXHQgICAgICAgIHZhciByID0gYmFzZVJhZGl1cyAqIHpvb207XHJcblx0ICAgICAgICB2YXIgZm9udFNpemUgPSBiYXNlRm9udFNpemUgKiB6b29tO1xyXG5cdCAgICAgICAgdmFyIG5vZGVTdHJva2VXaWR0aCA9IChiYXNlTm9kZVN0cm9rZVdpZHRoICogKG5vZGUuZW50ZXJlZCA/IDEuNSA6IDEpICogem9vbSk7XHJcblx0ICAgICAgICB2YXIgY2xhc3NlcyA9IFtcImVudGVyZWRcIiwgXCJyZXRhaW5lZFwiLCBcImV4aXRlZFwiLCBcImFjdGl2ZVwiLCBcImluYWN0aXZlXCIsIFwiZnV0dXJlXCIsIFwiaGlnaGxpZ2h0XCIsIFwiY29sbGFwc2VkXCJdO1xyXG5cdCAgICAgICAgdmFyIGNpcmNsZUNsYXNzZXMgPSBjbGFzc2VzLnJlZHVjZShmdW5jdGlvbiAoc3RyLCBjbGF6eikgeyByZXR1cm4gKHN0ciArIChub2RlW2NsYXp6XSA/IFwiIFwiICsgY2xhenogKyBcIiBcIiA6ICcnKSk7IH0sICcnKTtcclxuXHQgICAgICAgIHZhciBkZXNjZW5kZW50cyA9IG5vZGUuY29sbGFwc2VkID8gbm9kZS50b3RhbERlc2NlbmRlbnRzIDogMDtcclxuXHQgICAgICAgIHJldHVybiAocHJlYWN0XzEuaChcImdcIiwgeyB0cmFuc2Zvcm06IFwidHJhbnNsYXRlKFwiICsgeCArIFwiLCBcIiArIHkgKyBcIilcIiwgb25DbGljazogdGhpcy5oYW5kbGVHb0NsaWNrZWQsIG9uRGJsQ2xpY2s6IHRoaXMuaGFuZGxlQ29sbGFwc2VDbGlja2VkIH0sXHJcblx0ICAgICAgICAgICAgcHJlYWN0XzEuaChcImNpcmNsZVwiLCB7IGNsYXNzTmFtZTogY2lyY2xlQ2xhc3NlcywgXCJzdHJva2Utd2lkdGhcIjogbm9kZVN0cm9rZVdpZHRoLCByOiByIH0pLFxyXG5cdCAgICAgICAgICAgICFub2RlLmNvbGxhcHNlZCA/IFwiXCIgOlxyXG5cdCAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwidGV4dFwiLCB7IGNsYXNzTmFtZTogXCJsYWJlbFwiLCBcInRleHQtYW5jaG9yXCI6IFwibWlkZGxlXCIsIFwiZm9udC1zaXplXCI6IGZvbnRTaXplICogKGRlc2NlbmRlbnRzIDwgMTAgPyAxLjAgOiAwLjgpIH0sXHJcblx0ICAgICAgICAgICAgICAgICAgICBcIihcIixcclxuXHQgICAgICAgICAgICAgICAgICAgIGRlc2NlbmRlbnRzLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgXCIpXCIpLFxyXG5cdCAgICAgICAgICAgIHJlbmRlcmVyLmxhYmVsUmVuZGVyRm4oeCwgeSwgbm9kZSwgcmVuZGVyZXIpLFxyXG5cdCAgICAgICAgICAgIHByZWFjdF8xLmgoXCJ0ZXh0XCIsIHsgY2xhc3NOYW1lOiBcImxhYmVsXCIsIFwidGV4dC1hbmNob3JcIjogXCJtaWRkbGVcIiwgXCJmb250LXNpemVcIjogZm9udFNpemUsIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoMCwgXCIgKyByICogMiArIFwiKVwiIH0sIG5vZGUubGFiZWwpKSk7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBTdGF0ZU5vZGU7XHJcblx0fShwcmVhY3RfMS5Db21wb25lbnQpKTtcclxuXHRleHBvcnRzLlN0YXRlTm9kZSA9IFN0YXRlTm9kZTtcclxuXG5cbi8qKiovIH0pLFxuLyogMTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vcmVzaW4taW8vdHJpYW5ndWxhci5qc1xyXG5cdC8vIGh0dHA6Ly9hbGV4YW5kcm9zLnJlc2luLmlvL2FuZ3VsYXItZDMtc3ZnL1xyXG5cdC8vIE1JVCBMaWNlbnNlIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdHZhciBlYXNpbmdfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xyXG5cdHZhciBkM19pbnRlcnBvbGF0ZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XHJcblx0LyoqIFRoaXMgYW5pbWF0aW9uIGNvZGUgd2FzIHRha2VuIGZyb20gdHJhbmd1bGFyLmpzLCBhbmQgaXMgdXNlZCB0byBpbnRlcnBvbGF0ZSAyIGFycmF5cyBvZiB2YWx1ZXMgdXNpbmcgYW4gZWFzaW5nIGZuICovXHJcblx0ZnVuY3Rpb24gYW5pbWF0ZVBhdGgobmV3VmFsdWUsIG9sZFZhbHVlLCBkdXJhdGlvbiwgdXBkYXRlRnJhbWUsIGZpbmlzaEZuLCBlYXNlRm4pIHtcclxuXHQgICAgaWYgKGZpbmlzaEZuID09PSB2b2lkIDApIHsgZmluaXNoRm4gPSBmdW5jdGlvbiAoKSB7IH07IH1cclxuXHQgICAgaWYgKGVhc2VGbiA9PT0gdm9pZCAwKSB7IGVhc2VGbiA9IGVhc2luZ18xLmVhc2luZy5lYXNlT3V0RWxhc3RpYzsgfVxyXG5cdCAgICB2YXIgc3RhcnQgPSBudWxsLCBpbnRlcnBvbGF0ZSA9IGQzX2ludGVycG9sYXRlXzEuaW50ZXJwb2xhdGVBcnJheShvbGRWYWx1ZSwgbmV3VmFsdWUpO1xyXG5cdCAgICB2YXIgc3RlcCA9IGZ1bmN0aW9uIChub3cpIHtcclxuXHQgICAgICAgIGlmIChkdXJhdGlvbiA9PT0gLTEpXHJcblx0ICAgICAgICAgICAgcmV0dXJuIGZpbmlzaEZuKCk7XHJcblx0ICAgICAgICBpZiAoc3RhcnQgPT0gbnVsbClcclxuXHQgICAgICAgICAgICBzdGFydCA9IG5vdztcclxuXHQgICAgICAgIHZhciBwcm9ncmVzcyA9IG5vdyAtIHN0YXJ0LCBwZXJjZW50ID0gMTtcclxuXHQgICAgICAgIGlmIChwcm9ncmVzcyA8IGR1cmF0aW9uKSB7XHJcblx0ICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xyXG5cdCAgICAgICAgICAgIHBlcmNlbnQgPSBlYXNlRm4ocHJvZ3Jlc3MsIDAsIDEsIGR1cmF0aW9uKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHVwZGF0ZUZyYW1lKGludGVycG9sYXRlKHBlcmNlbnQpKTtcclxuXHQgICAgfTtcclxuXHQgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xyXG5cdCAgICByZXR1cm4gZnVuY3Rpb24gY2FuY2VsKCkge1xyXG5cdCAgICAgICAgZHVyYXRpb24gPSAtMTtcclxuXHQgICAgfTtcclxuXHR9XHJcblx0ZXhwb3J0cy5hbmltYXRlUGF0aCA9IGFuaW1hdGVQYXRoO1xyXG5cblxuLyoqKi8gfSksXG4vKiAxMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuXHQvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQgKiBqUXVlcnkgRWFzaW5nIHYxLjMgLSBodHRwOi8vZ3NnZC5jby51ay9zYW5kYm94L2pxdWVyeS9lYXNpbmcvXHJcblx0ICpcclxuXHQgKiBPcGVuIHNvdXJjZSB1bmRlciB0aGUgQlNEIExpY2Vuc2UuXHJcblx0ICpcclxuXHQgKiBDb3B5cmlnaHQgwqkgMjAwOCBHZW9yZ2UgTWNHaW5sZXkgU21pdGhcclxuXHQgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5cdCAqIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vZGFucm8vanF1ZXJ5LWVhc2luZy9tYXN0ZXIvTElDRU5TRVxyXG5cdCAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblx0ZXhwb3J0cy5lYXNpbmcgPSB7XHJcblx0ICAgIC8vIHRpbWUsIGJlZ2luLCBjaGFuZ2UsIGR1cmF0aW9uXHJcblx0ICAgIGVhc2VJbk91dFF1YWQ6IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XHJcblx0ICAgICAgICBpZiAoKHQgLz0gZCAvIDIpIDwgMSlcclxuXHQgICAgICAgICAgICByZXR1cm4gYyAvIDIgKiB0ICogdCArIGI7XHJcblx0ICAgICAgICByZXR1cm4gLWMgLyAyICogKCgtLXQpICogKHQgLSAyKSAtIDEpICsgYjtcclxuXHQgICAgfSxcclxuXHQgICAgZWFzZUluT3V0Q3ViaWM6IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XHJcblx0ICAgICAgICBpZiAoKHQgLz0gZCAvIDIpIDwgMSlcclxuXHQgICAgICAgICAgICByZXR1cm4gYyAvIDIgKiB0ICogdCAqIHQgKyBiO1xyXG5cdCAgICAgICAgcmV0dXJuIGMgLyAyICogKCh0IC09IDIpICogdCAqIHQgKyAyKSArIGI7XHJcblx0ICAgIH0sXHJcblx0ICAgIGVhc2VJbk91dFF1YXJ0OiBmdW5jdGlvbiAodCwgYiwgYywgZCkge1xyXG5cdCAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpXHJcblx0ICAgICAgICAgICAgcmV0dXJuIGMgLyAyICogdCAqIHQgKiB0ICogdCArIGI7XHJcblx0ICAgICAgICByZXR1cm4gLWMgLyAyICogKCh0IC09IDIpICogdCAqIHQgKiB0IC0gMikgKyBiO1xyXG5cdCAgICB9LFxyXG5cdCAgICBlYXNlSW5PdXRRdWludDogZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcclxuXHQgICAgICAgIGlmICgodCAvPSBkIC8gMikgPCAxKVxyXG5cdCAgICAgICAgICAgIHJldHVybiBjIC8gMiAqIHQgKiB0ICogdCAqIHQgKiB0ICsgYjtcclxuXHQgICAgICAgIHJldHVybiBjIC8gMiAqICgodCAtPSAyKSAqIHQgKiB0ICogdCAqIHQgKyAyKSArIGI7XHJcblx0ICAgIH0sXHJcblx0ICAgIGVhc2VJbk91dFNpbmU6IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XHJcblx0ICAgICAgICByZXR1cm4gLWMgLyAyICogKE1hdGguY29zKE1hdGguUEkgKiB0IC8gZCkgLSAxKSArIGI7XHJcblx0ICAgIH0sXHJcblx0ICAgIGVhc2VJbk91dEV4cG86IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XHJcblx0ICAgICAgICBpZiAodCA9PSAwKVxyXG5cdCAgICAgICAgICAgIHJldHVybiBiO1xyXG5cdCAgICAgICAgaWYgKHQgPT0gZClcclxuXHQgICAgICAgICAgICByZXR1cm4gYiArIGM7XHJcblx0ICAgICAgICBpZiAoKHQgLz0gZCAvIDIpIDwgMSlcclxuXHQgICAgICAgICAgICByZXR1cm4gYyAvIDIgKiBNYXRoLnBvdygyLCAxMCAqICh0IC0gMSkpICsgYjtcclxuXHQgICAgICAgIHJldHVybiBjIC8gMiAqICgtTWF0aC5wb3coMiwgLTEwICogLS10KSArIDIpICsgYjtcclxuXHQgICAgfSxcclxuXHQgICAgZWFzZUluT3V0Q2lyYzogZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcclxuXHQgICAgICAgIGlmICgodCAvPSBkIC8gMikgPCAxKVxyXG5cdCAgICAgICAgICAgIHJldHVybiAtYyAvIDIgKiAoTWF0aC5zcXJ0KDEgLSB0ICogdCkgLSAxKSArIGI7XHJcblx0ICAgICAgICByZXR1cm4gYyAvIDIgKiAoTWF0aC5zcXJ0KDEgLSAodCAtPSAyKSAqIHQpICsgMSkgKyBiO1xyXG5cdCAgICB9LFxyXG5cdCAgICBlYXNlSW5FbGFzdGljOiBmdW5jdGlvbiAodCwgYiwgYywgZCkge1xyXG5cdCAgICAgICAgdmFyIHMgPSAxLjcwMTU4O1xyXG5cdCAgICAgICAgdmFyIHAgPSAwO1xyXG5cdCAgICAgICAgdmFyIGEgPSBjO1xyXG5cdCAgICAgICAgaWYgKHQgPT0gMClcclxuXHQgICAgICAgICAgICByZXR1cm4gYjtcclxuXHQgICAgICAgIGlmICgodCAvPSBkKSA9PSAxKVxyXG5cdCAgICAgICAgICAgIHJldHVybiBiICsgYztcclxuXHQgICAgICAgIGlmICghcClcclxuXHQgICAgICAgICAgICBwID0gZCAqIC4zO1xyXG5cdCAgICAgICAgaWYgKGEgPCBNYXRoLmFicyhjKSkge1xyXG5cdCAgICAgICAgICAgIGEgPSBjO1xyXG5cdCAgICAgICAgICAgIHZhciBzID0gcCAvIDQ7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBlbHNlXHJcblx0ICAgICAgICAgICAgdmFyIHMgPSBwIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihjIC8gYSk7XHJcblx0ICAgICAgICByZXR1cm4gLShhICogTWF0aC5wb3coMiwgMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSkgKyBiO1xyXG5cdCAgICB9LFxyXG5cdCAgICBlYXNlT3V0RWxhc3RpYzogZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcclxuXHQgICAgICAgIHZhciBzID0gMS43MDE1ODtcclxuXHQgICAgICAgIHZhciBwID0gMDtcclxuXHQgICAgICAgIHZhciBhID0gYztcclxuXHQgICAgICAgIGlmICh0ID09IDApXHJcblx0ICAgICAgICAgICAgcmV0dXJuIGI7XHJcblx0ICAgICAgICBpZiAoKHQgLz0gZCkgPT0gMSlcclxuXHQgICAgICAgICAgICByZXR1cm4gYiArIGM7XHJcblx0ICAgICAgICBpZiAoIXApXHJcblx0ICAgICAgICAgICAgcCA9IGQgKiAuMztcclxuXHQgICAgICAgIGlmIChhIDwgTWF0aC5hYnMoYykpIHtcclxuXHQgICAgICAgICAgICBhID0gYztcclxuXHQgICAgICAgICAgICB2YXIgcyA9IHAgLyA0O1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxzZVxyXG5cdCAgICAgICAgICAgIHZhciBzID0gcCAvICgyICogTWF0aC5QSSkgKiBNYXRoLmFzaW4oYyAvIGEpO1xyXG5cdCAgICAgICAgcmV0dXJuIGEgKiBNYXRoLnBvdygyLCAtMTAgKiB0KSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApICsgYyArIGI7XHJcblx0ICAgIH0sXHJcblx0ICAgIGVhc2VJbk91dEVsYXN0aWM6IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XHJcblx0ICAgICAgICB2YXIgcyA9IDEuNzAxNTg7XHJcblx0ICAgICAgICB2YXIgcCA9IDA7XHJcblx0ICAgICAgICB2YXIgYSA9IGM7XHJcblx0ICAgICAgICBpZiAodCA9PSAwKVxyXG5cdCAgICAgICAgICAgIHJldHVybiBiO1xyXG5cdCAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA9PSAyKVxyXG5cdCAgICAgICAgICAgIHJldHVybiBiICsgYztcclxuXHQgICAgICAgIGlmICghcClcclxuXHQgICAgICAgICAgICBwID0gZCAqICguMyAqIDEuNSk7XHJcblx0ICAgICAgICBpZiAoYSA8IE1hdGguYWJzKGMpKSB7XHJcblx0ICAgICAgICAgICAgYSA9IGM7XHJcblx0ICAgICAgICAgICAgdmFyIHMgPSBwIC8gNDtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGVsc2VcclxuXHQgICAgICAgICAgICB2YXIgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKGMgLyBhKTtcclxuXHQgICAgICAgIGlmICh0IDwgMSlcclxuXHQgICAgICAgICAgICByZXR1cm4gLS41ICogKGEgKiBNYXRoLnBvdygyLCAxMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApKSArIGI7XHJcblx0ICAgICAgICByZXR1cm4gYSAqIE1hdGgucG93KDIsIC0xMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApICogLjUgKyBjICsgYjtcclxuXHQgICAgfSxcclxuXHQgICAgZWFzZUluT3V0QmFjazogZnVuY3Rpb24gKHQsIGIsIGMsIGQsIHMpIHtcclxuXHQgICAgICAgIGlmIChzID09IHVuZGVmaW5lZClcclxuXHQgICAgICAgICAgICBzID0gMS43MDE1ODtcclxuXHQgICAgICAgIGlmICgodCAvPSBkIC8gMikgPCAxKVxyXG5cdCAgICAgICAgICAgIHJldHVybiBjIC8gMiAqICh0ICogdCAqICgoKHMgKj0gKDEuNTI1KSkgKyAxKSAqIHQgLSBzKSkgKyBiO1xyXG5cdCAgICAgICAgcmV0dXJuIGMgLyAyICogKCh0IC09IDIpICogdCAqICgoKHMgKj0gKDEuNTI1KSkgKyAxKSAqIHQgKyBzKSArIDIpICsgYjtcclxuXHQgICAgfSxcclxuXHR9O1xyXG5cblxuLyoqKi8gfSksXG4vKiAxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGh0dHBzOi8vZDNqcy5vcmcvZDMtaW50ZXJwb2xhdGUvIFZlcnNpb24gMS4xLjQuIENvcHlyaWdodCAyMDE3IE1pa2UgQm9zdG9jay5cblx0KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0XHQgdHJ1ZSA/IGZhY3RvcnkoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxNSkpIDpcblx0XHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJywgJ2QzLWNvbG9yJ10sIGZhY3RvcnkpIDpcblx0XHQoZmFjdG9yeSgoZ2xvYmFsLmQzID0gZ2xvYmFsLmQzIHx8IHt9KSxnbG9iYWwuZDMpKTtcblx0fSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMsZDNDb2xvcikgeyAndXNlIHN0cmljdCc7XG5cdFxuXHRmdW5jdGlvbiBiYXNpcyh0MSwgdjAsIHYxLCB2MiwgdjMpIHtcblx0ICB2YXIgdDIgPSB0MSAqIHQxLCB0MyA9IHQyICogdDE7XG5cdCAgcmV0dXJuICgoMSAtIDMgKiB0MSArIDMgKiB0MiAtIHQzKSAqIHYwXG5cdCAgICAgICsgKDQgLSA2ICogdDIgKyAzICogdDMpICogdjFcblx0ICAgICAgKyAoMSArIDMgKiB0MSArIDMgKiB0MiAtIDMgKiB0MykgKiB2MlxuXHQgICAgICArIHQzICogdjMpIC8gNjtcblx0fVxuXHRcblx0dmFyIGJhc2lzJDEgPSBmdW5jdGlvbih2YWx1ZXMpIHtcblx0ICB2YXIgbiA9IHZhbHVlcy5sZW5ndGggLSAxO1xuXHQgIHJldHVybiBmdW5jdGlvbih0KSB7XG5cdCAgICB2YXIgaSA9IHQgPD0gMCA/ICh0ID0gMCkgOiB0ID49IDEgPyAodCA9IDEsIG4gLSAxKSA6IE1hdGguZmxvb3IodCAqIG4pLFxuXHQgICAgICAgIHYxID0gdmFsdWVzW2ldLFxuXHQgICAgICAgIHYyID0gdmFsdWVzW2kgKyAxXSxcblx0ICAgICAgICB2MCA9IGkgPiAwID8gdmFsdWVzW2kgLSAxXSA6IDIgKiB2MSAtIHYyLFxuXHQgICAgICAgIHYzID0gaSA8IG4gLSAxID8gdmFsdWVzW2kgKyAyXSA6IDIgKiB2MiAtIHYxO1xuXHQgICAgcmV0dXJuIGJhc2lzKCh0IC0gaSAvIG4pICogbiwgdjAsIHYxLCB2MiwgdjMpO1xuXHQgIH07XG5cdH07XG5cdFxuXHR2YXIgYmFzaXNDbG9zZWQgPSBmdW5jdGlvbih2YWx1ZXMpIHtcblx0ICB2YXIgbiA9IHZhbHVlcy5sZW5ndGg7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcblx0ICAgIHZhciBpID0gTWF0aC5mbG9vcigoKHQgJT0gMSkgPCAwID8gKyt0IDogdCkgKiBuKSxcblx0ICAgICAgICB2MCA9IHZhbHVlc1soaSArIG4gLSAxKSAlIG5dLFxuXHQgICAgICAgIHYxID0gdmFsdWVzW2kgJSBuXSxcblx0ICAgICAgICB2MiA9IHZhbHVlc1soaSArIDEpICUgbl0sXG5cdCAgICAgICAgdjMgPSB2YWx1ZXNbKGkgKyAyKSAlIG5dO1xuXHQgICAgcmV0dXJuIGJhc2lzKCh0IC0gaSAvIG4pICogbiwgdjAsIHYxLCB2MiwgdjMpO1xuXHQgIH07XG5cdH07XG5cdFxuXHR2YXIgY29uc3RhbnQgPSBmdW5jdGlvbih4KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIHg7XG5cdCAgfTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGxpbmVhcihhLCBkKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcblx0ICAgIHJldHVybiBhICsgdCAqIGQ7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZXhwb25lbnRpYWwoYSwgYiwgeSkge1xuXHQgIHJldHVybiBhID0gTWF0aC5wb3coYSwgeSksIGIgPSBNYXRoLnBvdyhiLCB5KSAtIGEsIHkgPSAxIC8geSwgZnVuY3Rpb24odCkge1xuXHQgICAgcmV0dXJuIE1hdGgucG93KGEgKyB0ICogYiwgeSk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaHVlKGEsIGIpIHtcblx0ICB2YXIgZCA9IGIgLSBhO1xuXHQgIHJldHVybiBkID8gbGluZWFyKGEsIGQgPiAxODAgfHwgZCA8IC0xODAgPyBkIC0gMzYwICogTWF0aC5yb3VuZChkIC8gMzYwKSA6IGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdhbW1hKHkpIHtcblx0ICByZXR1cm4gKHkgPSAreSkgPT09IDEgPyBub2dhbW1hIDogZnVuY3Rpb24oYSwgYikge1xuXHQgICAgcmV0dXJuIGIgLSBhID8gZXhwb25lbnRpYWwoYSwgYiwgeSkgOiBjb25zdGFudChpc05hTihhKSA/IGIgOiBhKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBub2dhbW1hKGEsIGIpIHtcblx0ICB2YXIgZCA9IGIgLSBhO1xuXHQgIHJldHVybiBkID8gbGluZWFyKGEsIGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG5cdH1cblx0XG5cdHZhciByZ2IkMSA9ICgoZnVuY3Rpb24gcmdiR2FtbWEoeSkge1xuXHQgIHZhciBjb2xvciQkMSA9IGdhbW1hKHkpO1xuXHRcblx0ICBmdW5jdGlvbiByZ2IkJDEoc3RhcnQsIGVuZCkge1xuXHQgICAgdmFyIHIgPSBjb2xvciQkMSgoc3RhcnQgPSBkM0NvbG9yLnJnYihzdGFydCkpLnIsIChlbmQgPSBkM0NvbG9yLnJnYihlbmQpKS5yKSxcblx0ICAgICAgICBnID0gY29sb3IkJDEoc3RhcnQuZywgZW5kLmcpLFxuXHQgICAgICAgIGIgPSBjb2xvciQkMShzdGFydC5iLCBlbmQuYiksXG5cdCAgICAgICAgb3BhY2l0eSA9IG5vZ2FtbWEoc3RhcnQub3BhY2l0eSwgZW5kLm9wYWNpdHkpO1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcblx0ICAgICAgc3RhcnQuciA9IHIodCk7XG5cdCAgICAgIHN0YXJ0LmcgPSBnKHQpO1xuXHQgICAgICBzdGFydC5iID0gYih0KTtcblx0ICAgICAgc3RhcnQub3BhY2l0eSA9IG9wYWNpdHkodCk7XG5cdCAgICAgIHJldHVybiBzdGFydCArIFwiXCI7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgcmdiJCQxLmdhbW1hID0gcmdiR2FtbWE7XG5cdFxuXHQgIHJldHVybiByZ2IkJDE7XG5cdH0pKSgxKTtcblx0XG5cdGZ1bmN0aW9uIHJnYlNwbGluZShzcGxpbmUpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24oY29sb3JzKSB7XG5cdCAgICB2YXIgbiA9IGNvbG9ycy5sZW5ndGgsXG5cdCAgICAgICAgciA9IG5ldyBBcnJheShuKSxcblx0ICAgICAgICBnID0gbmV3IEFycmF5KG4pLFxuXHQgICAgICAgIGIgPSBuZXcgQXJyYXkobiksXG5cdCAgICAgICAgaSwgY29sb3IkJDE7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7XG5cdCAgICAgIGNvbG9yJCQxID0gZDNDb2xvci5yZ2IoY29sb3JzW2ldKTtcblx0ICAgICAgcltpXSA9IGNvbG9yJCQxLnIgfHwgMDtcblx0ICAgICAgZ1tpXSA9IGNvbG9yJCQxLmcgfHwgMDtcblx0ICAgICAgYltpXSA9IGNvbG9yJCQxLmIgfHwgMDtcblx0ICAgIH1cblx0ICAgIHIgPSBzcGxpbmUocik7XG5cdCAgICBnID0gc3BsaW5lKGcpO1xuXHQgICAgYiA9IHNwbGluZShiKTtcblx0ICAgIGNvbG9yJCQxLm9wYWNpdHkgPSAxO1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcblx0ICAgICAgY29sb3IkJDEuciA9IHIodCk7XG5cdCAgICAgIGNvbG9yJCQxLmcgPSBnKHQpO1xuXHQgICAgICBjb2xvciQkMS5iID0gYih0KTtcblx0ICAgICAgcmV0dXJuIGNvbG9yJCQxICsgXCJcIjtcblx0ICAgIH07XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIHJnYkJhc2lzID0gcmdiU3BsaW5lKGJhc2lzJDEpO1xuXHR2YXIgcmdiQmFzaXNDbG9zZWQgPSByZ2JTcGxpbmUoYmFzaXNDbG9zZWQpO1xuXHRcblx0dmFyIGFycmF5ID0gZnVuY3Rpb24oYSwgYikge1xuXHQgIHZhciBuYiA9IGIgPyBiLmxlbmd0aCA6IDAsXG5cdCAgICAgIG5hID0gYSA/IE1hdGgubWluKG5iLCBhLmxlbmd0aCkgOiAwLFxuXHQgICAgICB4ID0gbmV3IEFycmF5KG5iKSxcblx0ICAgICAgYyA9IG5ldyBBcnJheShuYiksXG5cdCAgICAgIGk7XG5cdFxuXHQgIGZvciAoaSA9IDA7IGkgPCBuYTsgKytpKSB4W2ldID0gdmFsdWUoYVtpXSwgYltpXSk7XG5cdCAgZm9yICg7IGkgPCBuYjsgKytpKSBjW2ldID0gYltpXTtcblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBuYTsgKytpKSBjW2ldID0geFtpXSh0KTtcblx0ICAgIHJldHVybiBjO1xuXHQgIH07XG5cdH07XG5cdFxuXHR2YXIgZGF0ZSA9IGZ1bmN0aW9uKGEsIGIpIHtcblx0ICB2YXIgZCA9IG5ldyBEYXRlO1xuXHQgIHJldHVybiBhID0gK2EsIGIgLT0gYSwgZnVuY3Rpb24odCkge1xuXHQgICAgcmV0dXJuIGQuc2V0VGltZShhICsgYiAqIHQpLCBkO1xuXHQgIH07XG5cdH07XG5cdFxuXHR2YXIgbnVtYmVyID0gZnVuY3Rpb24oYSwgYikge1xuXHQgIHJldHVybiBhID0gK2EsIGIgLT0gYSwgZnVuY3Rpb24odCkge1xuXHQgICAgcmV0dXJuIGEgKyBiICogdDtcblx0ICB9O1xuXHR9O1xuXHRcblx0dmFyIG9iamVjdCA9IGZ1bmN0aW9uKGEsIGIpIHtcblx0ICB2YXIgaSA9IHt9LFxuXHQgICAgICBjID0ge30sXG5cdCAgICAgIGs7XG5cdFxuXHQgIGlmIChhID09PSBudWxsIHx8IHR5cGVvZiBhICE9PSBcIm9iamVjdFwiKSBhID0ge307XG5cdCAgaWYgKGIgPT09IG51bGwgfHwgdHlwZW9mIGIgIT09IFwib2JqZWN0XCIpIGIgPSB7fTtcblx0XG5cdCAgZm9yIChrIGluIGIpIHtcblx0ICAgIGlmIChrIGluIGEpIHtcblx0ICAgICAgaVtrXSA9IHZhbHVlKGFba10sIGJba10pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgY1trXSA9IGJba107XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24odCkge1xuXHQgICAgZm9yIChrIGluIGkpIGNba10gPSBpW2tdKHQpO1xuXHQgICAgcmV0dXJuIGM7XG5cdCAgfTtcblx0fTtcblx0XG5cdHZhciByZUEgPSAvWy0rXT8oPzpcXGQrXFwuP1xcZCp8XFwuP1xcZCspKD86W2VFXVstK10/XFxkKyk/L2c7XG5cdHZhciByZUIgPSBuZXcgUmVnRXhwKHJlQS5zb3VyY2UsIFwiZ1wiKTtcblx0XG5cdGZ1bmN0aW9uIHplcm8oYikge1xuXHQgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiBiO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9uZShiKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcblx0ICAgIHJldHVybiBiKHQpICsgXCJcIjtcblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgc3RyaW5nID0gZnVuY3Rpb24oYSwgYikge1xuXHQgIHZhciBiaSA9IHJlQS5sYXN0SW5kZXggPSByZUIubGFzdEluZGV4ID0gMCwgLy8gc2NhbiBpbmRleCBmb3IgbmV4dCBudW1iZXIgaW4gYlxuXHQgICAgICBhbSwgLy8gY3VycmVudCBtYXRjaCBpbiBhXG5cdCAgICAgIGJtLCAvLyBjdXJyZW50IG1hdGNoIGluIGJcblx0ICAgICAgYnMsIC8vIHN0cmluZyBwcmVjZWRpbmcgY3VycmVudCBudW1iZXIgaW4gYiwgaWYgYW55XG5cdCAgICAgIGkgPSAtMSwgLy8gaW5kZXggaW4gc1xuXHQgICAgICBzID0gW10sIC8vIHN0cmluZyBjb25zdGFudHMgYW5kIHBsYWNlaG9sZGVyc1xuXHQgICAgICBxID0gW107IC8vIG51bWJlciBpbnRlcnBvbGF0b3JzXG5cdFxuXHQgIC8vIENvZXJjZSBpbnB1dHMgdG8gc3RyaW5ncy5cblx0ICBhID0gYSArIFwiXCIsIGIgPSBiICsgXCJcIjtcblx0XG5cdCAgLy8gSW50ZXJwb2xhdGUgcGFpcnMgb2YgbnVtYmVycyBpbiBhICYgYi5cblx0ICB3aGlsZSAoKGFtID0gcmVBLmV4ZWMoYSkpXG5cdCAgICAgICYmIChibSA9IHJlQi5leGVjKGIpKSkge1xuXHQgICAgaWYgKChicyA9IGJtLmluZGV4KSA+IGJpKSB7IC8vIGEgc3RyaW5nIHByZWNlZGVzIHRoZSBuZXh0IG51bWJlciBpbiBiXG5cdCAgICAgIGJzID0gYi5zbGljZShiaSwgYnMpO1xuXHQgICAgICBpZiAoc1tpXSkgc1tpXSArPSBiczsgLy8gY29hbGVzY2Ugd2l0aCBwcmV2aW91cyBzdHJpbmdcblx0ICAgICAgZWxzZSBzWysraV0gPSBicztcblx0ICAgIH1cblx0ICAgIGlmICgoYW0gPSBhbVswXSkgPT09IChibSA9IGJtWzBdKSkgeyAvLyBudW1iZXJzIGluIGEgJiBiIG1hdGNoXG5cdCAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJtOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuXHQgICAgICBlbHNlIHNbKytpXSA9IGJtO1xuXHQgICAgfSBlbHNlIHsgLy8gaW50ZXJwb2xhdGUgbm9uLW1hdGNoaW5nIG51bWJlcnNcblx0ICAgICAgc1srK2ldID0gbnVsbDtcblx0ICAgICAgcS5wdXNoKHtpOiBpLCB4OiBudW1iZXIoYW0sIGJtKX0pO1xuXHQgICAgfVxuXHQgICAgYmkgPSByZUIubGFzdEluZGV4O1xuXHQgIH1cblx0XG5cdCAgLy8gQWRkIHJlbWFpbnMgb2YgYi5cblx0ICBpZiAoYmkgPCBiLmxlbmd0aCkge1xuXHQgICAgYnMgPSBiLnNsaWNlKGJpKTtcblx0ICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuXHQgICAgZWxzZSBzWysraV0gPSBicztcblx0ICB9XG5cdFxuXHQgIC8vIFNwZWNpYWwgb3B0aW1pemF0aW9uIGZvciBvbmx5IGEgc2luZ2xlIG1hdGNoLlxuXHQgIC8vIE90aGVyd2lzZSwgaW50ZXJwb2xhdGUgZWFjaCBvZiB0aGUgbnVtYmVycyBhbmQgcmVqb2luIHRoZSBzdHJpbmcuXG5cdCAgcmV0dXJuIHMubGVuZ3RoIDwgMiA/IChxWzBdXG5cdCAgICAgID8gb25lKHFbMF0ueClcblx0ICAgICAgOiB6ZXJvKGIpKVxuXHQgICAgICA6IChiID0gcS5sZW5ndGgsIGZ1bmN0aW9uKHQpIHtcblx0ICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvOyBpIDwgYjsgKytpKSBzWyhvID0gcVtpXSkuaV0gPSBvLngodCk7XG5cdCAgICAgICAgICByZXR1cm4gcy5qb2luKFwiXCIpO1xuXHQgICAgICAgIH0pO1xuXHR9O1xuXHRcblx0dmFyIHZhbHVlID0gZnVuY3Rpb24oYSwgYikge1xuXHQgIHZhciB0ID0gdHlwZW9mIGIsIGM7XG5cdCAgcmV0dXJuIGIgPT0gbnVsbCB8fCB0ID09PSBcImJvb2xlYW5cIiA/IGNvbnN0YW50KGIpXG5cdCAgICAgIDogKHQgPT09IFwibnVtYmVyXCIgPyBudW1iZXJcblx0ICAgICAgOiB0ID09PSBcInN0cmluZ1wiID8gKChjID0gZDNDb2xvci5jb2xvcihiKSkgPyAoYiA9IGMsIHJnYiQxKSA6IHN0cmluZylcblx0ICAgICAgOiBiIGluc3RhbmNlb2YgZDNDb2xvci5jb2xvciA/IHJnYiQxXG5cdCAgICAgIDogYiBpbnN0YW5jZW9mIERhdGUgPyBkYXRlXG5cdCAgICAgIDogQXJyYXkuaXNBcnJheShiKSA/IGFycmF5XG5cdCAgICAgIDogaXNOYU4oYikgPyBvYmplY3Rcblx0ICAgICAgOiBudW1iZXIpKGEsIGIpO1xuXHR9O1xuXHRcblx0dmFyIHJvdW5kID0gZnVuY3Rpb24oYSwgYikge1xuXHQgIHJldHVybiBhID0gK2EsIGIgLT0gYSwgZnVuY3Rpb24odCkge1xuXHQgICAgcmV0dXJuIE1hdGgucm91bmQoYSArIGIgKiB0KTtcblx0ICB9O1xuXHR9O1xuXHRcblx0dmFyIGRlZ3JlZXMgPSAxODAgLyBNYXRoLlBJO1xuXHRcblx0dmFyIGlkZW50aXR5ID0ge1xuXHQgIHRyYW5zbGF0ZVg6IDAsXG5cdCAgdHJhbnNsYXRlWTogMCxcblx0ICByb3RhdGU6IDAsXG5cdCAgc2tld1g6IDAsXG5cdCAgc2NhbGVYOiAxLFxuXHQgIHNjYWxlWTogMVxuXHR9O1xuXHRcblx0dmFyIGRlY29tcG9zZSA9IGZ1bmN0aW9uKGEsIGIsIGMsIGQsIGUsIGYpIHtcblx0ICB2YXIgc2NhbGVYLCBzY2FsZVksIHNrZXdYO1xuXHQgIGlmIChzY2FsZVggPSBNYXRoLnNxcnQoYSAqIGEgKyBiICogYikpIGEgLz0gc2NhbGVYLCBiIC89IHNjYWxlWDtcblx0ICBpZiAoc2tld1ggPSBhICogYyArIGIgKiBkKSBjIC09IGEgKiBza2V3WCwgZCAtPSBiICogc2tld1g7XG5cdCAgaWYgKHNjYWxlWSA9IE1hdGguc3FydChjICogYyArIGQgKiBkKSkgYyAvPSBzY2FsZVksIGQgLz0gc2NhbGVZLCBza2V3WCAvPSBzY2FsZVk7XG5cdCAgaWYgKGEgKiBkIDwgYiAqIGMpIGEgPSAtYSwgYiA9IC1iLCBza2V3WCA9IC1za2V3WCwgc2NhbGVYID0gLXNjYWxlWDtcblx0ICByZXR1cm4ge1xuXHQgICAgdHJhbnNsYXRlWDogZSxcblx0ICAgIHRyYW5zbGF0ZVk6IGYsXG5cdCAgICByb3RhdGU6IE1hdGguYXRhbjIoYiwgYSkgKiBkZWdyZWVzLFxuXHQgICAgc2tld1g6IE1hdGguYXRhbihza2V3WCkgKiBkZWdyZWVzLFxuXHQgICAgc2NhbGVYOiBzY2FsZVgsXG5cdCAgICBzY2FsZVk6IHNjYWxlWVxuXHQgIH07XG5cdH07XG5cdFxuXHR2YXIgY3NzTm9kZTtcblx0dmFyIGNzc1Jvb3Q7XG5cdHZhciBjc3NWaWV3O1xuXHR2YXIgc3ZnTm9kZTtcblx0XG5cdGZ1bmN0aW9uIHBhcnNlQ3NzKHZhbHVlKSB7XG5cdCAgaWYgKHZhbHVlID09PSBcIm5vbmVcIikgcmV0dXJuIGlkZW50aXR5O1xuXHQgIGlmICghY3NzTm9kZSkgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIiksIGNzc1Jvb3QgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGNzc1ZpZXcgPSBkb2N1bWVudC5kZWZhdWx0Vmlldztcblx0ICBjc3NOb2RlLnN0eWxlLnRyYW5zZm9ybSA9IHZhbHVlO1xuXHQgIHZhbHVlID0gY3NzVmlldy5nZXRDb21wdXRlZFN0eWxlKGNzc1Jvb3QuYXBwZW5kQ2hpbGQoY3NzTm9kZSksIG51bGwpLmdldFByb3BlcnR5VmFsdWUoXCJ0cmFuc2Zvcm1cIik7XG5cdCAgY3NzUm9vdC5yZW1vdmVDaGlsZChjc3NOb2RlKTtcblx0ICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDcsIC0xKS5zcGxpdChcIixcIik7XG5cdCAgcmV0dXJuIGRlY29tcG9zZSgrdmFsdWVbMF0sICt2YWx1ZVsxXSwgK3ZhbHVlWzJdLCArdmFsdWVbM10sICt2YWx1ZVs0XSwgK3ZhbHVlWzVdKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFyc2VTdmcodmFsdWUpIHtcblx0ICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIGlkZW50aXR5O1xuXHQgIGlmICghc3ZnTm9kZSkgc3ZnTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwiZ1wiKTtcblx0ICBzdmdOb2RlLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLCB2YWx1ZSk7XG5cdCAgaWYgKCEodmFsdWUgPSBzdmdOb2RlLnRyYW5zZm9ybS5iYXNlVmFsLmNvbnNvbGlkYXRlKCkpKSByZXR1cm4gaWRlbnRpdHk7XG5cdCAgdmFsdWUgPSB2YWx1ZS5tYXRyaXg7XG5cdCAgcmV0dXJuIGRlY29tcG9zZSh2YWx1ZS5hLCB2YWx1ZS5iLCB2YWx1ZS5jLCB2YWx1ZS5kLCB2YWx1ZS5lLCB2YWx1ZS5mKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaW50ZXJwb2xhdGVUcmFuc2Zvcm0ocGFyc2UsIHB4Q29tbWEsIHB4UGFyZW4sIGRlZ1BhcmVuKSB7XG5cdFxuXHQgIGZ1bmN0aW9uIHBvcChzKSB7XG5cdCAgICByZXR1cm4gcy5sZW5ndGggPyBzLnBvcCgpICsgXCIgXCIgOiBcIlwiO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdHJhbnNsYXRlKHhhLCB5YSwgeGIsIHliLCBzLCBxKSB7XG5cdCAgICBpZiAoeGEgIT09IHhiIHx8IHlhICE9PSB5Yikge1xuXHQgICAgICB2YXIgaSA9IHMucHVzaChcInRyYW5zbGF0ZShcIiwgbnVsbCwgcHhDb21tYSwgbnVsbCwgcHhQYXJlbik7XG5cdCAgICAgIHEucHVzaCh7aTogaSAtIDQsIHg6IG51bWJlcih4YSwgeGIpfSwge2k6IGkgLSAyLCB4OiBudW1iZXIoeWEsIHliKX0pO1xuXHQgICAgfSBlbHNlIGlmICh4YiB8fCB5Yikge1xuXHQgICAgICBzLnB1c2goXCJ0cmFuc2xhdGUoXCIgKyB4YiArIHB4Q29tbWEgKyB5YiArIHB4UGFyZW4pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcm90YXRlKGEsIGIsIHMsIHEpIHtcblx0ICAgIGlmIChhICE9PSBiKSB7XG5cdCAgICAgIGlmIChhIC0gYiA+IDE4MCkgYiArPSAzNjA7IGVsc2UgaWYgKGIgLSBhID4gMTgwKSBhICs9IDM2MDsgLy8gc2hvcnRlc3QgcGF0aFxuXHQgICAgICBxLnB1c2goe2k6IHMucHVzaChwb3AocykgKyBcInJvdGF0ZShcIiwgbnVsbCwgZGVnUGFyZW4pIC0gMiwgeDogbnVtYmVyKGEsIGIpfSk7XG5cdCAgICB9IGVsc2UgaWYgKGIpIHtcblx0ICAgICAgcy5wdXNoKHBvcChzKSArIFwicm90YXRlKFwiICsgYiArIGRlZ1BhcmVuKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNrZXdYKGEsIGIsIHMsIHEpIHtcblx0ICAgIGlmIChhICE9PSBiKSB7XG5cdCAgICAgIHEucHVzaCh7aTogcy5wdXNoKHBvcChzKSArIFwic2tld1goXCIsIG51bGwsIGRlZ1BhcmVuKSAtIDIsIHg6IG51bWJlcihhLCBiKX0pO1xuXHQgICAgfSBlbHNlIGlmIChiKSB7XG5cdCAgICAgIHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiICsgYiArIGRlZ1BhcmVuKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNjYWxlKHhhLCB5YSwgeGIsIHliLCBzLCBxKSB7XG5cdCAgICBpZiAoeGEgIT09IHhiIHx8IHlhICE9PSB5Yikge1xuXHQgICAgICB2YXIgaSA9IHMucHVzaChwb3AocykgKyBcInNjYWxlKFwiLCBudWxsLCBcIixcIiwgbnVsbCwgXCIpXCIpO1xuXHQgICAgICBxLnB1c2goe2k6IGkgLSA0LCB4OiBudW1iZXIoeGEsIHhiKX0sIHtpOiBpIC0gMiwgeDogbnVtYmVyKHlhLCB5Yil9KTtcblx0ICAgIH0gZWxzZSBpZiAoeGIgIT09IDEgfHwgeWIgIT09IDEpIHtcblx0ICAgICAgcy5wdXNoKHBvcChzKSArIFwic2NhbGUoXCIgKyB4YiArIFwiLFwiICsgeWIgKyBcIilcIik7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24oYSwgYikge1xuXHQgICAgdmFyIHMgPSBbXSwgLy8gc3RyaW5nIGNvbnN0YW50cyBhbmQgcGxhY2Vob2xkZXJzXG5cdCAgICAgICAgcSA9IFtdOyAvLyBudW1iZXIgaW50ZXJwb2xhdG9yc1xuXHQgICAgYSA9IHBhcnNlKGEpLCBiID0gcGFyc2UoYik7XG5cdCAgICB0cmFuc2xhdGUoYS50cmFuc2xhdGVYLCBhLnRyYW5zbGF0ZVksIGIudHJhbnNsYXRlWCwgYi50cmFuc2xhdGVZLCBzLCBxKTtcblx0ICAgIHJvdGF0ZShhLnJvdGF0ZSwgYi5yb3RhdGUsIHMsIHEpO1xuXHQgICAgc2tld1goYS5za2V3WCwgYi5za2V3WCwgcywgcSk7XG5cdCAgICBzY2FsZShhLnNjYWxlWCwgYS5zY2FsZVksIGIuc2NhbGVYLCBiLnNjYWxlWSwgcywgcSk7XG5cdCAgICBhID0gYiA9IG51bGw7IC8vIGdjXG5cdCAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuXHQgICAgICB2YXIgaSA9IC0xLCBuID0gcS5sZW5ndGgsIG87XG5cdCAgICAgIHdoaWxlICgrK2kgPCBuKSBzWyhvID0gcVtpXSkuaV0gPSBvLngodCk7XG5cdCAgICAgIHJldHVybiBzLmpvaW4oXCJcIik7XG5cdCAgICB9O1xuXHQgIH07XG5cdH1cblx0XG5cdHZhciBpbnRlcnBvbGF0ZVRyYW5zZm9ybUNzcyA9IGludGVycG9sYXRlVHJhbnNmb3JtKHBhcnNlQ3NzLCBcInB4LCBcIiwgXCJweClcIiwgXCJkZWcpXCIpO1xuXHR2YXIgaW50ZXJwb2xhdGVUcmFuc2Zvcm1TdmcgPSBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZVN2ZywgXCIsIFwiLCBcIilcIiwgXCIpXCIpO1xuXHRcblx0dmFyIHJobyA9IE1hdGguU1FSVDI7XG5cdHZhciByaG8yID0gMjtcblx0dmFyIHJobzQgPSA0O1xuXHR2YXIgZXBzaWxvbjIgPSAxZS0xMjtcblx0XG5cdGZ1bmN0aW9uIGNvc2goeCkge1xuXHQgIHJldHVybiAoKHggPSBNYXRoLmV4cCh4KSkgKyAxIC8geCkgLyAyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzaW5oKHgpIHtcblx0ICByZXR1cm4gKCh4ID0gTWF0aC5leHAoeCkpIC0gMSAvIHgpIC8gMjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdGFuaCh4KSB7XG5cdCAgcmV0dXJuICgoeCA9IE1hdGguZXhwKDIgKiB4KSkgLSAxKSAvICh4ICsgMSk7XG5cdH1cblx0XG5cdC8vIHAwID0gW3V4MCwgdXkwLCB3MF1cblx0Ly8gcDEgPSBbdXgxLCB1eTEsIHcxXVxuXHR2YXIgem9vbSA9IGZ1bmN0aW9uKHAwLCBwMSkge1xuXHQgIHZhciB1eDAgPSBwMFswXSwgdXkwID0gcDBbMV0sIHcwID0gcDBbMl0sXG5cdCAgICAgIHV4MSA9IHAxWzBdLCB1eTEgPSBwMVsxXSwgdzEgPSBwMVsyXSxcblx0ICAgICAgZHggPSB1eDEgLSB1eDAsXG5cdCAgICAgIGR5ID0gdXkxIC0gdXkwLFxuXHQgICAgICBkMiA9IGR4ICogZHggKyBkeSAqIGR5LFxuXHQgICAgICBpLFxuXHQgICAgICBTO1xuXHRcblx0ICAvLyBTcGVjaWFsIGNhc2UgZm9yIHUwIOKJhSB1MS5cblx0ICBpZiAoZDIgPCBlcHNpbG9uMikge1xuXHQgICAgUyA9IE1hdGgubG9nKHcxIC8gdzApIC8gcmhvO1xuXHQgICAgaSA9IGZ1bmN0aW9uKHQpIHtcblx0ICAgICAgcmV0dXJuIFtcblx0ICAgICAgICB1eDAgKyB0ICogZHgsXG5cdCAgICAgICAgdXkwICsgdCAqIGR5LFxuXHQgICAgICAgIHcwICogTWF0aC5leHAocmhvICogdCAqIFMpXG5cdCAgICAgIF07XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLy8gR2VuZXJhbCBjYXNlLlxuXHQgIGVsc2Uge1xuXHQgICAgdmFyIGQxID0gTWF0aC5zcXJ0KGQyKSxcblx0ICAgICAgICBiMCA9ICh3MSAqIHcxIC0gdzAgKiB3MCArIHJobzQgKiBkMikgLyAoMiAqIHcwICogcmhvMiAqIGQxKSxcblx0ICAgICAgICBiMSA9ICh3MSAqIHcxIC0gdzAgKiB3MCAtIHJobzQgKiBkMikgLyAoMiAqIHcxICogcmhvMiAqIGQxKSxcblx0ICAgICAgICByMCA9IE1hdGgubG9nKE1hdGguc3FydChiMCAqIGIwICsgMSkgLSBiMCksXG5cdCAgICAgICAgcjEgPSBNYXRoLmxvZyhNYXRoLnNxcnQoYjEgKiBiMSArIDEpIC0gYjEpO1xuXHQgICAgUyA9IChyMSAtIHIwKSAvIHJobztcblx0ICAgIGkgPSBmdW5jdGlvbih0KSB7XG5cdCAgICAgIHZhciBzID0gdCAqIFMsXG5cdCAgICAgICAgICBjb3NocjAgPSBjb3NoKHIwKSxcblx0ICAgICAgICAgIHUgPSB3MCAvIChyaG8yICogZDEpICogKGNvc2hyMCAqIHRhbmgocmhvICogcyArIHIwKSAtIHNpbmgocjApKTtcblx0ICAgICAgcmV0dXJuIFtcblx0ICAgICAgICB1eDAgKyB1ICogZHgsXG5cdCAgICAgICAgdXkwICsgdSAqIGR5LFxuXHQgICAgICAgIHcwICogY29zaHIwIC8gY29zaChyaG8gKiBzICsgcjApXG5cdCAgICAgIF07XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgaS5kdXJhdGlvbiA9IFMgKiAxMDAwO1xuXHRcblx0ICByZXR1cm4gaTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGhzbCQxKGh1ZSQkMSkge1xuXHQgIHJldHVybiBmdW5jdGlvbihzdGFydCwgZW5kKSB7XG5cdCAgICB2YXIgaCA9IGh1ZSQkMSgoc3RhcnQgPSBkM0NvbG9yLmhzbChzdGFydCkpLmgsIChlbmQgPSBkM0NvbG9yLmhzbChlbmQpKS5oKSxcblx0ICAgICAgICBzID0gbm9nYW1tYShzdGFydC5zLCBlbmQucyksXG5cdCAgICAgICAgbCA9IG5vZ2FtbWEoc3RhcnQubCwgZW5kLmwpLFxuXHQgICAgICAgIG9wYWNpdHkgPSBub2dhbW1hKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTtcblx0ICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG5cdCAgICAgIHN0YXJ0LmggPSBoKHQpO1xuXHQgICAgICBzdGFydC5zID0gcyh0KTtcblx0ICAgICAgc3RhcnQubCA9IGwodCk7XG5cdCAgICAgIHN0YXJ0Lm9wYWNpdHkgPSBvcGFjaXR5KHQpO1xuXHQgICAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuXHQgICAgfTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBoc2wkMiA9IGhzbCQxKGh1ZSk7XG5cdHZhciBoc2xMb25nID0gaHNsJDEobm9nYW1tYSk7XG5cdFxuXHRmdW5jdGlvbiBsYWIkMShzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGwgPSBub2dhbW1hKChzdGFydCA9IGQzQ29sb3IubGFiKHN0YXJ0KSkubCwgKGVuZCA9IGQzQ29sb3IubGFiKGVuZCkpLmwpLFxuXHQgICAgICBhID0gbm9nYW1tYShzdGFydC5hLCBlbmQuYSksXG5cdCAgICAgIGIgPSBub2dhbW1hKHN0YXJ0LmIsIGVuZC5iKSxcblx0ICAgICAgb3BhY2l0eSA9IG5vZ2FtbWEoc3RhcnQub3BhY2l0eSwgZW5kLm9wYWNpdHkpO1xuXHQgIHJldHVybiBmdW5jdGlvbih0KSB7XG5cdCAgICBzdGFydC5sID0gbCh0KTtcblx0ICAgIHN0YXJ0LmEgPSBhKHQpO1xuXHQgICAgc3RhcnQuYiA9IGIodCk7XG5cdCAgICBzdGFydC5vcGFjaXR5ID0gb3BhY2l0eSh0KTtcblx0ICAgIHJldHVybiBzdGFydCArIFwiXCI7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGNsJDEoaHVlJCQxKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcblx0ICAgIHZhciBoID0gaHVlJCQxKChzdGFydCA9IGQzQ29sb3IuaGNsKHN0YXJ0KSkuaCwgKGVuZCA9IGQzQ29sb3IuaGNsKGVuZCkpLmgpLFxuXHQgICAgICAgIGMgPSBub2dhbW1hKHN0YXJ0LmMsIGVuZC5jKSxcblx0ICAgICAgICBsID0gbm9nYW1tYShzdGFydC5sLCBlbmQubCksXG5cdCAgICAgICAgb3BhY2l0eSA9IG5vZ2FtbWEoc3RhcnQub3BhY2l0eSwgZW5kLm9wYWNpdHkpO1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcblx0ICAgICAgc3RhcnQuaCA9IGgodCk7XG5cdCAgICAgIHN0YXJ0LmMgPSBjKHQpO1xuXHQgICAgICBzdGFydC5sID0gbCh0KTtcblx0ICAgICAgc3RhcnQub3BhY2l0eSA9IG9wYWNpdHkodCk7XG5cdCAgICAgIHJldHVybiBzdGFydCArIFwiXCI7XG5cdCAgICB9O1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGhjbCQyID0gaGNsJDEoaHVlKTtcblx0dmFyIGhjbExvbmcgPSBoY2wkMShub2dhbW1hKTtcblx0XG5cdGZ1bmN0aW9uIGN1YmVoZWxpeCQxKGh1ZSQkMSkge1xuXHQgIHJldHVybiAoZnVuY3Rpb24gY3ViZWhlbGl4R2FtbWEoeSkge1xuXHQgICAgeSA9ICt5O1xuXHRcblx0ICAgIGZ1bmN0aW9uIGN1YmVoZWxpeCQkMShzdGFydCwgZW5kKSB7XG5cdCAgICAgIHZhciBoID0gaHVlJCQxKChzdGFydCA9IGQzQ29sb3IuY3ViZWhlbGl4KHN0YXJ0KSkuaCwgKGVuZCA9IGQzQ29sb3IuY3ViZWhlbGl4KGVuZCkpLmgpLFxuXHQgICAgICAgICAgcyA9IG5vZ2FtbWEoc3RhcnQucywgZW5kLnMpLFxuXHQgICAgICAgICAgbCA9IG5vZ2FtbWEoc3RhcnQubCwgZW5kLmwpLFxuXHQgICAgICAgICAgb3BhY2l0eSA9IG5vZ2FtbWEoc3RhcnQub3BhY2l0eSwgZW5kLm9wYWNpdHkpO1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuXHQgICAgICAgIHN0YXJ0LmggPSBoKHQpO1xuXHQgICAgICAgIHN0YXJ0LnMgPSBzKHQpO1xuXHQgICAgICAgIHN0YXJ0LmwgPSBsKE1hdGgucG93KHQsIHkpKTtcblx0ICAgICAgICBzdGFydC5vcGFjaXR5ID0gb3BhY2l0eSh0KTtcblx0ICAgICAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGN1YmVoZWxpeCQkMS5nYW1tYSA9IGN1YmVoZWxpeEdhbW1hO1xuXHRcblx0ICAgIHJldHVybiBjdWJlaGVsaXgkJDE7XG5cdCAgfSkoMSk7XG5cdH1cblx0XG5cdHZhciBjdWJlaGVsaXgkMiA9IGN1YmVoZWxpeCQxKGh1ZSk7XG5cdHZhciBjdWJlaGVsaXhMb25nID0gY3ViZWhlbGl4JDEobm9nYW1tYSk7XG5cdFxuXHR2YXIgcXVhbnRpemUgPSBmdW5jdGlvbihpbnRlcnBvbGF0b3IsIG4pIHtcblx0ICB2YXIgc2FtcGxlcyA9IG5ldyBBcnJheShuKTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSkgc2FtcGxlc1tpXSA9IGludGVycG9sYXRvcihpIC8gKG4gLSAxKSk7XG5cdCAgcmV0dXJuIHNhbXBsZXM7XG5cdH07XG5cdFxuXHRleHBvcnRzLmludGVycG9sYXRlID0gdmFsdWU7XG5cdGV4cG9ydHMuaW50ZXJwb2xhdGVBcnJheSA9IGFycmF5O1xuXHRleHBvcnRzLmludGVycG9sYXRlQmFzaXMgPSBiYXNpcyQxO1xuXHRleHBvcnRzLmludGVycG9sYXRlQmFzaXNDbG9zZWQgPSBiYXNpc0Nsb3NlZDtcblx0ZXhwb3J0cy5pbnRlcnBvbGF0ZURhdGUgPSBkYXRlO1xuXHRleHBvcnRzLmludGVycG9sYXRlTnVtYmVyID0gbnVtYmVyO1xuXHRleHBvcnRzLmludGVycG9sYXRlT2JqZWN0ID0gb2JqZWN0O1xuXHRleHBvcnRzLmludGVycG9sYXRlUm91bmQgPSByb3VuZDtcblx0ZXhwb3J0cy5pbnRlcnBvbGF0ZVN0cmluZyA9IHN0cmluZztcblx0ZXhwb3J0cy5pbnRlcnBvbGF0ZVRyYW5zZm9ybUNzcyA9IGludGVycG9sYXRlVHJhbnNmb3JtQ3NzO1xuXHRleHBvcnRzLmludGVycG9sYXRlVHJhbnNmb3JtU3ZnID0gaW50ZXJwb2xhdGVUcmFuc2Zvcm1Tdmc7XG5cdGV4cG9ydHMuaW50ZXJwb2xhdGVab29tID0gem9vbTtcblx0ZXhwb3J0cy5pbnRlcnBvbGF0ZVJnYiA9IHJnYiQxO1xuXHRleHBvcnRzLmludGVycG9sYXRlUmdiQmFzaXMgPSByZ2JCYXNpcztcblx0ZXhwb3J0cy5pbnRlcnBvbGF0ZVJnYkJhc2lzQ2xvc2VkID0gcmdiQmFzaXNDbG9zZWQ7XG5cdGV4cG9ydHMuaW50ZXJwb2xhdGVIc2wgPSBoc2wkMjtcblx0ZXhwb3J0cy5pbnRlcnBvbGF0ZUhzbExvbmcgPSBoc2xMb25nO1xuXHRleHBvcnRzLmludGVycG9sYXRlTGFiID0gbGFiJDE7XG5cdGV4cG9ydHMuaW50ZXJwb2xhdGVIY2wgPSBoY2wkMjtcblx0ZXhwb3J0cy5pbnRlcnBvbGF0ZUhjbExvbmcgPSBoY2xMb25nO1xuXHRleHBvcnRzLmludGVycG9sYXRlQ3ViZWhlbGl4ID0gY3ViZWhlbGl4JDI7XG5cdGV4cG9ydHMuaW50ZXJwb2xhdGVDdWJlaGVsaXhMb25nID0gY3ViZWhlbGl4TG9uZztcblx0ZXhwb3J0cy5xdWFudGl6ZSA9IHF1YW50aXplO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0XG5cdH0pKSk7XG5cblxuLyoqKi8gfSksXG4vKiAxNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGh0dHBzOi8vZDNqcy5vcmcvZDMtY29sb3IvIFZlcnNpb24gMS4wLjMuIENvcHlyaWdodCAyMDE3IE1pa2UgQm9zdG9jay5cblx0KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0XHQgdHJ1ZSA/IGZhY3RvcnkoZXhwb3J0cykgOlxuXHRcdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnXSwgZmFjdG9yeSkgOlxuXHRcdChmYWN0b3J5KChnbG9iYWwuZDMgPSBnbG9iYWwuZDMgfHwge30pKSk7XG5cdH0odGhpcywgKGZ1bmN0aW9uIChleHBvcnRzKSB7ICd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBkZWZpbmUgPSBmdW5jdGlvbihjb25zdHJ1Y3RvciwgZmFjdG9yeSwgcHJvdG90eXBlKSB7XG5cdCAgY29uc3RydWN0b3IucHJvdG90eXBlID0gZmFjdG9yeS5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG5cdCAgcHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY29uc3RydWN0b3I7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBleHRlbmQocGFyZW50LCBkZWZpbml0aW9uKSB7XG5cdCAgdmFyIHByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSk7XG5cdCAgZm9yICh2YXIga2V5IGluIGRlZmluaXRpb24pIHByb3RvdHlwZVtrZXldID0gZGVmaW5pdGlvbltrZXldO1xuXHQgIHJldHVybiBwcm90b3R5cGU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIENvbG9yKCkge31cblx0XG5cdHZhciBkYXJrZXIgPSAwLjc7XG5cdHZhciBicmlnaHRlciA9IDEgLyBkYXJrZXI7XG5cdFxuXHR2YXIgcmVJID0gXCJcXFxccyooWystXT9cXFxcZCspXFxcXHMqXCI7XG5cdHZhciByZU4gPSBcIlxcXFxzKihbKy1dP1xcXFxkKlxcXFwuP1xcXFxkKyg/OltlRV1bKy1dP1xcXFxkKyk/KVxcXFxzKlwiO1xuXHR2YXIgcmVQID0gXCJcXFxccyooWystXT9cXFxcZCpcXFxcLj9cXFxcZCsoPzpbZUVdWystXT9cXFxcZCspPyklXFxcXHMqXCI7XG5cdHZhciByZUhleDMgPSAvXiMoWzAtOWEtZl17M30pJC87XG5cdHZhciByZUhleDYgPSAvXiMoWzAtOWEtZl17Nn0pJC87XG5cdHZhciByZVJnYkludGVnZXIgPSBuZXcgUmVnRXhwKFwiXnJnYlxcXFwoXCIgKyBbcmVJLCByZUksIHJlSV0gKyBcIlxcXFwpJFwiKTtcblx0dmFyIHJlUmdiUGVyY2VudCA9IG5ldyBSZWdFeHAoXCJecmdiXFxcXChcIiArIFtyZVAsIHJlUCwgcmVQXSArIFwiXFxcXCkkXCIpO1xuXHR2YXIgcmVSZ2JhSW50ZWdlciA9IG5ldyBSZWdFeHAoXCJecmdiYVxcXFwoXCIgKyBbcmVJLCByZUksIHJlSSwgcmVOXSArIFwiXFxcXCkkXCIpO1xuXHR2YXIgcmVSZ2JhUGVyY2VudCA9IG5ldyBSZWdFeHAoXCJecmdiYVxcXFwoXCIgKyBbcmVQLCByZVAsIHJlUCwgcmVOXSArIFwiXFxcXCkkXCIpO1xuXHR2YXIgcmVIc2xQZXJjZW50ID0gbmV3IFJlZ0V4cChcIl5oc2xcXFxcKFwiICsgW3JlTiwgcmVQLCByZVBdICsgXCJcXFxcKSRcIik7XG5cdHZhciByZUhzbGFQZXJjZW50ID0gbmV3IFJlZ0V4cChcIl5oc2xhXFxcXChcIiArIFtyZU4sIHJlUCwgcmVQLCByZU5dICsgXCJcXFxcKSRcIik7XG5cdFxuXHR2YXIgbmFtZWQgPSB7XG5cdCAgYWxpY2VibHVlOiAweGYwZjhmZixcblx0ICBhbnRpcXVld2hpdGU6IDB4ZmFlYmQ3LFxuXHQgIGFxdWE6IDB4MDBmZmZmLFxuXHQgIGFxdWFtYXJpbmU6IDB4N2ZmZmQ0LFxuXHQgIGF6dXJlOiAweGYwZmZmZixcblx0ICBiZWlnZTogMHhmNWY1ZGMsXG5cdCAgYmlzcXVlOiAweGZmZTRjNCxcblx0ICBibGFjazogMHgwMDAwMDAsXG5cdCAgYmxhbmNoZWRhbG1vbmQ6IDB4ZmZlYmNkLFxuXHQgIGJsdWU6IDB4MDAwMGZmLFxuXHQgIGJsdWV2aW9sZXQ6IDB4OGEyYmUyLFxuXHQgIGJyb3duOiAweGE1MmEyYSxcblx0ICBidXJseXdvb2Q6IDB4ZGViODg3LFxuXHQgIGNhZGV0Ymx1ZTogMHg1ZjllYTAsXG5cdCAgY2hhcnRyZXVzZTogMHg3ZmZmMDAsXG5cdCAgY2hvY29sYXRlOiAweGQyNjkxZSxcblx0ICBjb3JhbDogMHhmZjdmNTAsXG5cdCAgY29ybmZsb3dlcmJsdWU6IDB4NjQ5NWVkLFxuXHQgIGNvcm5zaWxrOiAweGZmZjhkYyxcblx0ICBjcmltc29uOiAweGRjMTQzYyxcblx0ICBjeWFuOiAweDAwZmZmZixcblx0ICBkYXJrYmx1ZTogMHgwMDAwOGIsXG5cdCAgZGFya2N5YW46IDB4MDA4YjhiLFxuXHQgIGRhcmtnb2xkZW5yb2Q6IDB4Yjg4NjBiLFxuXHQgIGRhcmtncmF5OiAweGE5YTlhOSxcblx0ICBkYXJrZ3JlZW46IDB4MDA2NDAwLFxuXHQgIGRhcmtncmV5OiAweGE5YTlhOSxcblx0ICBkYXJra2hha2k6IDB4YmRiNzZiLFxuXHQgIGRhcmttYWdlbnRhOiAweDhiMDA4Yixcblx0ICBkYXJrb2xpdmVncmVlbjogMHg1NTZiMmYsXG5cdCAgZGFya29yYW5nZTogMHhmZjhjMDAsXG5cdCAgZGFya29yY2hpZDogMHg5OTMyY2MsXG5cdCAgZGFya3JlZDogMHg4YjAwMDAsXG5cdCAgZGFya3NhbG1vbjogMHhlOTk2N2EsXG5cdCAgZGFya3NlYWdyZWVuOiAweDhmYmM4Zixcblx0ICBkYXJrc2xhdGVibHVlOiAweDQ4M2Q4Yixcblx0ICBkYXJrc2xhdGVncmF5OiAweDJmNGY0Zixcblx0ICBkYXJrc2xhdGVncmV5OiAweDJmNGY0Zixcblx0ICBkYXJrdHVycXVvaXNlOiAweDAwY2VkMSxcblx0ICBkYXJrdmlvbGV0OiAweDk0MDBkMyxcblx0ICBkZWVwcGluazogMHhmZjE0OTMsXG5cdCAgZGVlcHNreWJsdWU6IDB4MDBiZmZmLFxuXHQgIGRpbWdyYXk6IDB4Njk2OTY5LFxuXHQgIGRpbWdyZXk6IDB4Njk2OTY5LFxuXHQgIGRvZGdlcmJsdWU6IDB4MWU5MGZmLFxuXHQgIGZpcmVicmljazogMHhiMjIyMjIsXG5cdCAgZmxvcmFsd2hpdGU6IDB4ZmZmYWYwLFxuXHQgIGZvcmVzdGdyZWVuOiAweDIyOGIyMixcblx0ICBmdWNoc2lhOiAweGZmMDBmZixcblx0ICBnYWluc2Jvcm86IDB4ZGNkY2RjLFxuXHQgIGdob3N0d2hpdGU6IDB4ZjhmOGZmLFxuXHQgIGdvbGQ6IDB4ZmZkNzAwLFxuXHQgIGdvbGRlbnJvZDogMHhkYWE1MjAsXG5cdCAgZ3JheTogMHg4MDgwODAsXG5cdCAgZ3JlZW46IDB4MDA4MDAwLFxuXHQgIGdyZWVueWVsbG93OiAweGFkZmYyZixcblx0ICBncmV5OiAweDgwODA4MCxcblx0ICBob25leWRldzogMHhmMGZmZjAsXG5cdCAgaG90cGluazogMHhmZjY5YjQsXG5cdCAgaW5kaWFucmVkOiAweGNkNWM1Yyxcblx0ICBpbmRpZ286IDB4NGIwMDgyLFxuXHQgIGl2b3J5OiAweGZmZmZmMCxcblx0ICBraGFraTogMHhmMGU2OGMsXG5cdCAgbGF2ZW5kZXI6IDB4ZTZlNmZhLFxuXHQgIGxhdmVuZGVyYmx1c2g6IDB4ZmZmMGY1LFxuXHQgIGxhd25ncmVlbjogMHg3Y2ZjMDAsXG5cdCAgbGVtb25jaGlmZm9uOiAweGZmZmFjZCxcblx0ICBsaWdodGJsdWU6IDB4YWRkOGU2LFxuXHQgIGxpZ2h0Y29yYWw6IDB4ZjA4MDgwLFxuXHQgIGxpZ2h0Y3lhbjogMHhlMGZmZmYsXG5cdCAgbGlnaHRnb2xkZW5yb2R5ZWxsb3c6IDB4ZmFmYWQyLFxuXHQgIGxpZ2h0Z3JheTogMHhkM2QzZDMsXG5cdCAgbGlnaHRncmVlbjogMHg5MGVlOTAsXG5cdCAgbGlnaHRncmV5OiAweGQzZDNkMyxcblx0ICBsaWdodHBpbms6IDB4ZmZiNmMxLFxuXHQgIGxpZ2h0c2FsbW9uOiAweGZmYTA3YSxcblx0ICBsaWdodHNlYWdyZWVuOiAweDIwYjJhYSxcblx0ICBsaWdodHNreWJsdWU6IDB4ODdjZWZhLFxuXHQgIGxpZ2h0c2xhdGVncmF5OiAweDc3ODg5OSxcblx0ICBsaWdodHNsYXRlZ3JleTogMHg3Nzg4OTksXG5cdCAgbGlnaHRzdGVlbGJsdWU6IDB4YjBjNGRlLFxuXHQgIGxpZ2h0eWVsbG93OiAweGZmZmZlMCxcblx0ICBsaW1lOiAweDAwZmYwMCxcblx0ICBsaW1lZ3JlZW46IDB4MzJjZDMyLFxuXHQgIGxpbmVuOiAweGZhZjBlNixcblx0ICBtYWdlbnRhOiAweGZmMDBmZixcblx0ICBtYXJvb246IDB4ODAwMDAwLFxuXHQgIG1lZGl1bWFxdWFtYXJpbmU6IDB4NjZjZGFhLFxuXHQgIG1lZGl1bWJsdWU6IDB4MDAwMGNkLFxuXHQgIG1lZGl1bW9yY2hpZDogMHhiYTU1ZDMsXG5cdCAgbWVkaXVtcHVycGxlOiAweDkzNzBkYixcblx0ICBtZWRpdW1zZWFncmVlbjogMHgzY2IzNzEsXG5cdCAgbWVkaXVtc2xhdGVibHVlOiAweDdiNjhlZSxcblx0ICBtZWRpdW1zcHJpbmdncmVlbjogMHgwMGZhOWEsXG5cdCAgbWVkaXVtdHVycXVvaXNlOiAweDQ4ZDFjYyxcblx0ICBtZWRpdW12aW9sZXRyZWQ6IDB4YzcxNTg1LFxuXHQgIG1pZG5pZ2h0Ymx1ZTogMHgxOTE5NzAsXG5cdCAgbWludGNyZWFtOiAweGY1ZmZmYSxcblx0ICBtaXN0eXJvc2U6IDB4ZmZlNGUxLFxuXHQgIG1vY2Nhc2luOiAweGZmZTRiNSxcblx0ICBuYXZham93aGl0ZTogMHhmZmRlYWQsXG5cdCAgbmF2eTogMHgwMDAwODAsXG5cdCAgb2xkbGFjZTogMHhmZGY1ZTYsXG5cdCAgb2xpdmU6IDB4ODA4MDAwLFxuXHQgIG9saXZlZHJhYjogMHg2YjhlMjMsXG5cdCAgb3JhbmdlOiAweGZmYTUwMCxcblx0ICBvcmFuZ2VyZWQ6IDB4ZmY0NTAwLFxuXHQgIG9yY2hpZDogMHhkYTcwZDYsXG5cdCAgcGFsZWdvbGRlbnJvZDogMHhlZWU4YWEsXG5cdCAgcGFsZWdyZWVuOiAweDk4ZmI5OCxcblx0ICBwYWxldHVycXVvaXNlOiAweGFmZWVlZSxcblx0ICBwYWxldmlvbGV0cmVkOiAweGRiNzA5Myxcblx0ICBwYXBheWF3aGlwOiAweGZmZWZkNSxcblx0ICBwZWFjaHB1ZmY6IDB4ZmZkYWI5LFxuXHQgIHBlcnU6IDB4Y2Q4NTNmLFxuXHQgIHBpbms6IDB4ZmZjMGNiLFxuXHQgIHBsdW06IDB4ZGRhMGRkLFxuXHQgIHBvd2RlcmJsdWU6IDB4YjBlMGU2LFxuXHQgIHB1cnBsZTogMHg4MDAwODAsXG5cdCAgcmViZWNjYXB1cnBsZTogMHg2NjMzOTksXG5cdCAgcmVkOiAweGZmMDAwMCxcblx0ICByb3N5YnJvd246IDB4YmM4ZjhmLFxuXHQgIHJveWFsYmx1ZTogMHg0MTY5ZTEsXG5cdCAgc2FkZGxlYnJvd246IDB4OGI0NTEzLFxuXHQgIHNhbG1vbjogMHhmYTgwNzIsXG5cdCAgc2FuZHlicm93bjogMHhmNGE0NjAsXG5cdCAgc2VhZ3JlZW46IDB4MmU4YjU3LFxuXHQgIHNlYXNoZWxsOiAweGZmZjVlZSxcblx0ICBzaWVubmE6IDB4YTA1MjJkLFxuXHQgIHNpbHZlcjogMHhjMGMwYzAsXG5cdCAgc2t5Ymx1ZTogMHg4N2NlZWIsXG5cdCAgc2xhdGVibHVlOiAweDZhNWFjZCxcblx0ICBzbGF0ZWdyYXk6IDB4NzA4MDkwLFxuXHQgIHNsYXRlZ3JleTogMHg3MDgwOTAsXG5cdCAgc25vdzogMHhmZmZhZmEsXG5cdCAgc3ByaW5nZ3JlZW46IDB4MDBmZjdmLFxuXHQgIHN0ZWVsYmx1ZTogMHg0NjgyYjQsXG5cdCAgdGFuOiAweGQyYjQ4Yyxcblx0ICB0ZWFsOiAweDAwODA4MCxcblx0ICB0aGlzdGxlOiAweGQ4YmZkOCxcblx0ICB0b21hdG86IDB4ZmY2MzQ3LFxuXHQgIHR1cnF1b2lzZTogMHg0MGUwZDAsXG5cdCAgdmlvbGV0OiAweGVlODJlZSxcblx0ICB3aGVhdDogMHhmNWRlYjMsXG5cdCAgd2hpdGU6IDB4ZmZmZmZmLFxuXHQgIHdoaXRlc21va2U6IDB4ZjVmNWY1LFxuXHQgIHllbGxvdzogMHhmZmZmMDAsXG5cdCAgeWVsbG93Z3JlZW46IDB4OWFjZDMyXG5cdH07XG5cdFxuXHRkZWZpbmUoQ29sb3IsIGNvbG9yLCB7XG5cdCAgZGlzcGxheWFibGU6IGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIHRoaXMucmdiKCkuZGlzcGxheWFibGUoKTtcblx0ICB9LFxuXHQgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiB0aGlzLnJnYigpICsgXCJcIjtcblx0ICB9XG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gY29sb3IoZm9ybWF0KSB7XG5cdCAgdmFyIG07XG5cdCAgZm9ybWF0ID0gKGZvcm1hdCArIFwiXCIpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXHQgIHJldHVybiAobSA9IHJlSGV4My5leGVjKGZvcm1hdCkpID8gKG0gPSBwYXJzZUludChtWzFdLCAxNiksIG5ldyBSZ2IoKG0gPj4gOCAmIDB4ZikgfCAobSA+PiA0ICYgMHgwZjApLCAobSA+PiA0ICYgMHhmKSB8IChtICYgMHhmMCksICgobSAmIDB4ZikgPDwgNCkgfCAobSAmIDB4ZiksIDEpKSAvLyAjZjAwXG5cdCAgICAgIDogKG0gPSByZUhleDYuZXhlYyhmb3JtYXQpKSA/IHJnYm4ocGFyc2VJbnQobVsxXSwgMTYpKSAvLyAjZmYwMDAwXG5cdCAgICAgIDogKG0gPSByZVJnYkludGVnZXIuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSwgbVsyXSwgbVszXSwgMSkgLy8gcmdiKDI1NSwgMCwgMClcblx0ICAgICAgOiAobSA9IHJlUmdiUGVyY2VudC5leGVjKGZvcm1hdCkpID8gbmV3IFJnYihtWzFdICogMjU1IC8gMTAwLCBtWzJdICogMjU1IC8gMTAwLCBtWzNdICogMjU1IC8gMTAwLCAxKSAvLyByZ2IoMTAwJSwgMCUsIDAlKVxuXHQgICAgICA6IChtID0gcmVSZ2JhSW50ZWdlci5leGVjKGZvcm1hdCkpID8gcmdiYShtWzFdLCBtWzJdLCBtWzNdLCBtWzRdKSAvLyByZ2JhKDI1NSwgMCwgMCwgMSlcblx0ICAgICAgOiAobSA9IHJlUmdiYVBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IHJnYmEobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgbVs0XSkgLy8gcmdiKDEwMCUsIDAlLCAwJSwgMSlcblx0ICAgICAgOiAobSA9IHJlSHNsUGVyY2VudC5leGVjKGZvcm1hdCkpID8gaHNsYShtWzFdLCBtWzJdIC8gMTAwLCBtWzNdIC8gMTAwLCAxKSAvLyBoc2woMTIwLCA1MCUsIDUwJSlcblx0ICAgICAgOiAobSA9IHJlSHNsYVBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IGhzbGEobVsxXSwgbVsyXSAvIDEwMCwgbVszXSAvIDEwMCwgbVs0XSkgLy8gaHNsYSgxMjAsIDUwJSwgNTAlLCAxKVxuXHQgICAgICA6IG5hbWVkLmhhc093blByb3BlcnR5KGZvcm1hdCkgPyByZ2JuKG5hbWVkW2Zvcm1hdF0pXG5cdCAgICAgIDogZm9ybWF0ID09PSBcInRyYW5zcGFyZW50XCIgPyBuZXcgUmdiKE5hTiwgTmFOLCBOYU4sIDApXG5cdCAgICAgIDogbnVsbDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmdibihuKSB7XG5cdCAgcmV0dXJuIG5ldyBSZ2IobiA+PiAxNiAmIDB4ZmYsIG4gPj4gOCAmIDB4ZmYsIG4gJiAweGZmLCAxKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmdiYShyLCBnLCBiLCBhKSB7XG5cdCAgaWYgKGEgPD0gMCkgciA9IGcgPSBiID0gTmFOO1xuXHQgIHJldHVybiBuZXcgUmdiKHIsIGcsIGIsIGEpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZ2JDb252ZXJ0KG8pIHtcblx0ICBpZiAoIShvIGluc3RhbmNlb2YgQ29sb3IpKSBvID0gY29sb3Iobyk7XG5cdCAgaWYgKCFvKSByZXR1cm4gbmV3IFJnYjtcblx0ICBvID0gby5yZ2IoKTtcblx0ICByZXR1cm4gbmV3IFJnYihvLnIsIG8uZywgby5iLCBvLm9wYWNpdHkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZ2IociwgZywgYiwgb3BhY2l0eSkge1xuXHQgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gcmdiQ29udmVydChyKSA6IG5ldyBSZ2IociwgZywgYiwgb3BhY2l0eSA9PSBudWxsID8gMSA6IG9wYWNpdHkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBSZ2IociwgZywgYiwgb3BhY2l0eSkge1xuXHQgIHRoaXMuciA9ICtyO1xuXHQgIHRoaXMuZyA9ICtnO1xuXHQgIHRoaXMuYiA9ICtiO1xuXHQgIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5O1xuXHR9XG5cdFxuXHRkZWZpbmUoUmdiLCByZ2IsIGV4dGVuZChDb2xvciwge1xuXHQgIGJyaWdodGVyOiBmdW5jdGlvbihrKSB7XG5cdCAgICBrID0gayA9PSBudWxsID8gYnJpZ2h0ZXIgOiBNYXRoLnBvdyhicmlnaHRlciwgayk7XG5cdCAgICByZXR1cm4gbmV3IFJnYih0aGlzLnIgKiBrLCB0aGlzLmcgKiBrLCB0aGlzLmIgKiBrLCB0aGlzLm9wYWNpdHkpO1xuXHQgIH0sXG5cdCAgZGFya2VyOiBmdW5jdGlvbihrKSB7XG5cdCAgICBrID0gayA9PSBudWxsID8gZGFya2VyIDogTWF0aC5wb3coZGFya2VyLCBrKTtcblx0ICAgIHJldHVybiBuZXcgUmdiKHRoaXMuciAqIGssIHRoaXMuZyAqIGssIHRoaXMuYiAqIGssIHRoaXMub3BhY2l0eSk7XG5cdCAgfSxcblx0ICByZ2I6IGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfSxcblx0ICBkaXNwbGF5YWJsZTogZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gKDAgPD0gdGhpcy5yICYmIHRoaXMuciA8PSAyNTUpXG5cdCAgICAgICAgJiYgKDAgPD0gdGhpcy5nICYmIHRoaXMuZyA8PSAyNTUpXG5cdCAgICAgICAgJiYgKDAgPD0gdGhpcy5iICYmIHRoaXMuYiA8PSAyNTUpXG5cdCAgICAgICAgJiYgKDAgPD0gdGhpcy5vcGFjaXR5ICYmIHRoaXMub3BhY2l0eSA8PSAxKTtcblx0ICB9LFxuXHQgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBhID0gdGhpcy5vcGFjaXR5OyBhID0gaXNOYU4oYSkgPyAxIDogTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgYSkpO1xuXHQgICAgcmV0dXJuIChhID09PSAxID8gXCJyZ2IoXCIgOiBcInJnYmEoXCIpXG5cdCAgICAgICAgKyBNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIE1hdGgucm91bmQodGhpcy5yKSB8fCAwKSkgKyBcIiwgXCJcblx0ICAgICAgICArIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCh0aGlzLmcpIHx8IDApKSArIFwiLCBcIlxuXHQgICAgICAgICsgTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHRoaXMuYikgfHwgMCkpXG5cdCAgICAgICAgKyAoYSA9PT0gMSA/IFwiKVwiIDogXCIsIFwiICsgYSArIFwiKVwiKTtcblx0ICB9XG5cdH0pKTtcblx0XG5cdGZ1bmN0aW9uIGhzbGEoaCwgcywgbCwgYSkge1xuXHQgIGlmIChhIDw9IDApIGggPSBzID0gbCA9IE5hTjtcblx0ICBlbHNlIGlmIChsIDw9IDAgfHwgbCA+PSAxKSBoID0gcyA9IE5hTjtcblx0ICBlbHNlIGlmIChzIDw9IDApIGggPSBOYU47XG5cdCAgcmV0dXJuIG5ldyBIc2woaCwgcywgbCwgYSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhzbENvbnZlcnQobykge1xuXHQgIGlmIChvIGluc3RhbmNlb2YgSHNsKSByZXR1cm4gbmV3IEhzbChvLmgsIG8ucywgby5sLCBvLm9wYWNpdHkpO1xuXHQgIGlmICghKG8gaW5zdGFuY2VvZiBDb2xvcikpIG8gPSBjb2xvcihvKTtcblx0ICBpZiAoIW8pIHJldHVybiBuZXcgSHNsO1xuXHQgIGlmIChvIGluc3RhbmNlb2YgSHNsKSByZXR1cm4gbztcblx0ICBvID0gby5yZ2IoKTtcblx0ICB2YXIgciA9IG8uciAvIDI1NSxcblx0ICAgICAgZyA9IG8uZyAvIDI1NSxcblx0ICAgICAgYiA9IG8uYiAvIDI1NSxcblx0ICAgICAgbWluID0gTWF0aC5taW4ociwgZywgYiksXG5cdCAgICAgIG1heCA9IE1hdGgubWF4KHIsIGcsIGIpLFxuXHQgICAgICBoID0gTmFOLFxuXHQgICAgICBzID0gbWF4IC0gbWluLFxuXHQgICAgICBsID0gKG1heCArIG1pbikgLyAyO1xuXHQgIGlmIChzKSB7XG5cdCAgICBpZiAociA9PT0gbWF4KSBoID0gKGcgLSBiKSAvIHMgKyAoZyA8IGIpICogNjtcblx0ICAgIGVsc2UgaWYgKGcgPT09IG1heCkgaCA9IChiIC0gcikgLyBzICsgMjtcblx0ICAgIGVsc2UgaCA9IChyIC0gZykgLyBzICsgNDtcblx0ICAgIHMgLz0gbCA8IDAuNSA/IG1heCArIG1pbiA6IDIgLSBtYXggLSBtaW47XG5cdCAgICBoICo9IDYwO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBzID0gbCA+IDAgJiYgbCA8IDEgPyAwIDogaDtcblx0ICB9XG5cdCAgcmV0dXJuIG5ldyBIc2woaCwgcywgbCwgby5vcGFjaXR5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaHNsKGgsIHMsIGwsIG9wYWNpdHkpIHtcblx0ICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGhzbENvbnZlcnQoaCkgOiBuZXcgSHNsKGgsIHMsIGwsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gSHNsKGgsIHMsIGwsIG9wYWNpdHkpIHtcblx0ICB0aGlzLmggPSAraDtcblx0ICB0aGlzLnMgPSArcztcblx0ICB0aGlzLmwgPSArbDtcblx0ICB0aGlzLm9wYWNpdHkgPSArb3BhY2l0eTtcblx0fVxuXHRcblx0ZGVmaW5lKEhzbCwgaHNsLCBleHRlbmQoQ29sb3IsIHtcblx0ICBicmlnaHRlcjogZnVuY3Rpb24oaykge1xuXHQgICAgayA9IGsgPT0gbnVsbCA/IGJyaWdodGVyIDogTWF0aC5wb3coYnJpZ2h0ZXIsIGspO1xuXHQgICAgcmV0dXJuIG5ldyBIc2wodGhpcy5oLCB0aGlzLnMsIHRoaXMubCAqIGssIHRoaXMub3BhY2l0eSk7XG5cdCAgfSxcblx0ICBkYXJrZXI6IGZ1bmN0aW9uKGspIHtcblx0ICAgIGsgPSBrID09IG51bGwgPyBkYXJrZXIgOiBNYXRoLnBvdyhkYXJrZXIsIGspO1xuXHQgICAgcmV0dXJuIG5ldyBIc2wodGhpcy5oLCB0aGlzLnMsIHRoaXMubCAqIGssIHRoaXMub3BhY2l0eSk7XG5cdCAgfSxcblx0ICByZ2I6IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGggPSB0aGlzLmggJSAzNjAgKyAodGhpcy5oIDwgMCkgKiAzNjAsXG5cdCAgICAgICAgcyA9IGlzTmFOKGgpIHx8IGlzTmFOKHRoaXMucykgPyAwIDogdGhpcy5zLFxuXHQgICAgICAgIGwgPSB0aGlzLmwsXG5cdCAgICAgICAgbTIgPSBsICsgKGwgPCAwLjUgPyBsIDogMSAtIGwpICogcyxcblx0ICAgICAgICBtMSA9IDIgKiBsIC0gbTI7XG5cdCAgICByZXR1cm4gbmV3IFJnYihcblx0ICAgICAgaHNsMnJnYihoID49IDI0MCA/IGggLSAyNDAgOiBoICsgMTIwLCBtMSwgbTIpLFxuXHQgICAgICBoc2wycmdiKGgsIG0xLCBtMiksXG5cdCAgICAgIGhzbDJyZ2IoaCA8IDEyMCA/IGggKyAyNDAgOiBoIC0gMTIwLCBtMSwgbTIpLFxuXHQgICAgICB0aGlzLm9wYWNpdHlcblx0ICAgICk7XG5cdCAgfSxcblx0ICBkaXNwbGF5YWJsZTogZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gKDAgPD0gdGhpcy5zICYmIHRoaXMucyA8PSAxIHx8IGlzTmFOKHRoaXMucykpXG5cdCAgICAgICAgJiYgKDAgPD0gdGhpcy5sICYmIHRoaXMubCA8PSAxKVxuXHQgICAgICAgICYmICgwIDw9IHRoaXMub3BhY2l0eSAmJiB0aGlzLm9wYWNpdHkgPD0gMSk7XG5cdCAgfVxuXHR9KSk7XG5cdFxuXHQvKiBGcm9tIEZ2RCAxMy4zNywgQ1NTIENvbG9yIE1vZHVsZSBMZXZlbCAzICovXG5cdGZ1bmN0aW9uIGhzbDJyZ2IoaCwgbTEsIG0yKSB7XG5cdCAgcmV0dXJuIChoIDwgNjAgPyBtMSArIChtMiAtIG0xKSAqIGggLyA2MFxuXHQgICAgICA6IGggPCAxODAgPyBtMlxuXHQgICAgICA6IGggPCAyNDAgPyBtMSArIChtMiAtIG0xKSAqICgyNDAgLSBoKSAvIDYwXG5cdCAgICAgIDogbTEpICogMjU1O1xuXHR9XG5cdFxuXHR2YXIgZGVnMnJhZCA9IE1hdGguUEkgLyAxODA7XG5cdHZhciByYWQyZGVnID0gMTgwIC8gTWF0aC5QSTtcblx0XG5cdHZhciBLbiA9IDE4O1xuXHR2YXIgWG4gPSAwLjk1MDQ3MDtcblx0dmFyIFluID0gMTtcblx0dmFyIFpuID0gMS4wODg4MzA7XG5cdHZhciB0MCA9IDQgLyAyOTtcblx0dmFyIHQxID0gNiAvIDI5O1xuXHR2YXIgdDIgPSAzICogdDEgKiB0MTtcblx0dmFyIHQzID0gdDEgKiB0MSAqIHQxO1xuXHRcblx0ZnVuY3Rpb24gbGFiQ29udmVydChvKSB7XG5cdCAgaWYgKG8gaW5zdGFuY2VvZiBMYWIpIHJldHVybiBuZXcgTGFiKG8ubCwgby5hLCBvLmIsIG8ub3BhY2l0eSk7XG5cdCAgaWYgKG8gaW5zdGFuY2VvZiBIY2wpIHtcblx0ICAgIHZhciBoID0gby5oICogZGVnMnJhZDtcblx0ICAgIHJldHVybiBuZXcgTGFiKG8ubCwgTWF0aC5jb3MoaCkgKiBvLmMsIE1hdGguc2luKGgpICogby5jLCBvLm9wYWNpdHkpO1xuXHQgIH1cblx0ICBpZiAoIShvIGluc3RhbmNlb2YgUmdiKSkgbyA9IHJnYkNvbnZlcnQobyk7XG5cdCAgdmFyIGIgPSByZ2IyeHl6KG8uciksXG5cdCAgICAgIGEgPSByZ2IyeHl6KG8uZyksXG5cdCAgICAgIGwgPSByZ2IyeHl6KG8uYiksXG5cdCAgICAgIHggPSB4eXoybGFiKCgwLjQxMjQ1NjQgKiBiICsgMC4zNTc1NzYxICogYSArIDAuMTgwNDM3NSAqIGwpIC8gWG4pLFxuXHQgICAgICB5ID0geHl6MmxhYigoMC4yMTI2NzI5ICogYiArIDAuNzE1MTUyMiAqIGEgKyAwLjA3MjE3NTAgKiBsKSAvIFluKSxcblx0ICAgICAgeiA9IHh5ejJsYWIoKDAuMDE5MzMzOSAqIGIgKyAwLjExOTE5MjAgKiBhICsgMC45NTAzMDQxICogbCkgLyBabik7XG5cdCAgcmV0dXJuIG5ldyBMYWIoMTE2ICogeSAtIDE2LCA1MDAgKiAoeCAtIHkpLCAyMDAgKiAoeSAtIHopLCBvLm9wYWNpdHkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBsYWIobCwgYSwgYiwgb3BhY2l0eSkge1xuXHQgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gbGFiQ29udmVydChsKSA6IG5ldyBMYWIobCwgYSwgYiwgb3BhY2l0eSA9PSBudWxsID8gMSA6IG9wYWNpdHkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBMYWIobCwgYSwgYiwgb3BhY2l0eSkge1xuXHQgIHRoaXMubCA9ICtsO1xuXHQgIHRoaXMuYSA9ICthO1xuXHQgIHRoaXMuYiA9ICtiO1xuXHQgIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5O1xuXHR9XG5cdFxuXHRkZWZpbmUoTGFiLCBsYWIsIGV4dGVuZChDb2xvciwge1xuXHQgIGJyaWdodGVyOiBmdW5jdGlvbihrKSB7XG5cdCAgICByZXR1cm4gbmV3IExhYih0aGlzLmwgKyBLbiAqIChrID09IG51bGwgPyAxIDogayksIHRoaXMuYSwgdGhpcy5iLCB0aGlzLm9wYWNpdHkpO1xuXHQgIH0sXG5cdCAgZGFya2VyOiBmdW5jdGlvbihrKSB7XG5cdCAgICByZXR1cm4gbmV3IExhYih0aGlzLmwgLSBLbiAqIChrID09IG51bGwgPyAxIDogayksIHRoaXMuYSwgdGhpcy5iLCB0aGlzLm9wYWNpdHkpO1xuXHQgIH0sXG5cdCAgcmdiOiBmdW5jdGlvbigpIHtcblx0ICAgIHZhciB5ID0gKHRoaXMubCArIDE2KSAvIDExNixcblx0ICAgICAgICB4ID0gaXNOYU4odGhpcy5hKSA/IHkgOiB5ICsgdGhpcy5hIC8gNTAwLFxuXHQgICAgICAgIHogPSBpc05hTih0aGlzLmIpID8geSA6IHkgLSB0aGlzLmIgLyAyMDA7XG5cdCAgICB5ID0gWW4gKiBsYWIyeHl6KHkpO1xuXHQgICAgeCA9IFhuICogbGFiMnh5eih4KTtcblx0ICAgIHogPSBabiAqIGxhYjJ4eXooeik7XG5cdCAgICByZXR1cm4gbmV3IFJnYihcblx0ICAgICAgeHl6MnJnYiggMy4yNDA0NTQyICogeCAtIDEuNTM3MTM4NSAqIHkgLSAwLjQ5ODUzMTQgKiB6KSwgLy8gRDY1IC0+IHNSR0Jcblx0ICAgICAgeHl6MnJnYigtMC45NjkyNjYwICogeCArIDEuODc2MDEwOCAqIHkgKyAwLjA0MTU1NjAgKiB6KSxcblx0ICAgICAgeHl6MnJnYiggMC4wNTU2NDM0ICogeCAtIDAuMjA0MDI1OSAqIHkgKyAxLjA1NzIyNTIgKiB6KSxcblx0ICAgICAgdGhpcy5vcGFjaXR5XG5cdCAgICApO1xuXHQgIH1cblx0fSkpO1xuXHRcblx0ZnVuY3Rpb24geHl6MmxhYih0KSB7XG5cdCAgcmV0dXJuIHQgPiB0MyA/IE1hdGgucG93KHQsIDEgLyAzKSA6IHQgLyB0MiArIHQwO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBsYWIyeHl6KHQpIHtcblx0ICByZXR1cm4gdCA+IHQxID8gdCAqIHQgKiB0IDogdDIgKiAodCAtIHQwKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24geHl6MnJnYih4KSB7XG5cdCAgcmV0dXJuIDI1NSAqICh4IDw9IDAuMDAzMTMwOCA/IDEyLjkyICogeCA6IDEuMDU1ICogTWF0aC5wb3coeCwgMSAvIDIuNCkgLSAwLjA1NSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJnYjJ4eXooeCkge1xuXHQgIHJldHVybiAoeCAvPSAyNTUpIDw9IDAuMDQwNDUgPyB4IC8gMTIuOTIgOiBNYXRoLnBvdygoeCArIDAuMDU1KSAvIDEuMDU1LCAyLjQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoY2xDb252ZXJ0KG8pIHtcblx0ICBpZiAobyBpbnN0YW5jZW9mIEhjbCkgcmV0dXJuIG5ldyBIY2woby5oLCBvLmMsIG8ubCwgby5vcGFjaXR5KTtcblx0ICBpZiAoIShvIGluc3RhbmNlb2YgTGFiKSkgbyA9IGxhYkNvbnZlcnQobyk7XG5cdCAgdmFyIGggPSBNYXRoLmF0YW4yKG8uYiwgby5hKSAqIHJhZDJkZWc7XG5cdCAgcmV0dXJuIG5ldyBIY2woaCA8IDAgPyBoICsgMzYwIDogaCwgTWF0aC5zcXJ0KG8uYSAqIG8uYSArIG8uYiAqIG8uYiksIG8ubCwgby5vcGFjaXR5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGNsKGgsIGMsIGwsIG9wYWNpdHkpIHtcblx0ICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGhjbENvbnZlcnQoaCkgOiBuZXcgSGNsKGgsIGMsIGwsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gSGNsKGgsIGMsIGwsIG9wYWNpdHkpIHtcblx0ICB0aGlzLmggPSAraDtcblx0ICB0aGlzLmMgPSArYztcblx0ICB0aGlzLmwgPSArbDtcblx0ICB0aGlzLm9wYWNpdHkgPSArb3BhY2l0eTtcblx0fVxuXHRcblx0ZGVmaW5lKEhjbCwgaGNsLCBleHRlbmQoQ29sb3IsIHtcblx0ICBicmlnaHRlcjogZnVuY3Rpb24oaykge1xuXHQgICAgcmV0dXJuIG5ldyBIY2wodGhpcy5oLCB0aGlzLmMsIHRoaXMubCArIEtuICogKGsgPT0gbnVsbCA/IDEgOiBrKSwgdGhpcy5vcGFjaXR5KTtcblx0ICB9LFxuXHQgIGRhcmtlcjogZnVuY3Rpb24oaykge1xuXHQgICAgcmV0dXJuIG5ldyBIY2wodGhpcy5oLCB0aGlzLmMsIHRoaXMubCAtIEtuICogKGsgPT0gbnVsbCA/IDEgOiBrKSwgdGhpcy5vcGFjaXR5KTtcblx0ICB9LFxuXHQgIHJnYjogZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gbGFiQ29udmVydCh0aGlzKS5yZ2IoKTtcblx0ICB9XG5cdH0pKTtcblx0XG5cdHZhciBBID0gLTAuMTQ4NjE7XG5cdHZhciBCID0gKzEuNzgyNzc7XG5cdHZhciBDID0gLTAuMjkyMjc7XG5cdHZhciBEID0gLTAuOTA2NDk7XG5cdHZhciBFID0gKzEuOTcyOTQ7XG5cdHZhciBFRCA9IEUgKiBEO1xuXHR2YXIgRUIgPSBFICogQjtcblx0dmFyIEJDX0RBID0gQiAqIEMgLSBEICogQTtcblx0XG5cdGZ1bmN0aW9uIGN1YmVoZWxpeENvbnZlcnQobykge1xuXHQgIGlmIChvIGluc3RhbmNlb2YgQ3ViZWhlbGl4KSByZXR1cm4gbmV3IEN1YmVoZWxpeChvLmgsIG8ucywgby5sLCBvLm9wYWNpdHkpO1xuXHQgIGlmICghKG8gaW5zdGFuY2VvZiBSZ2IpKSBvID0gcmdiQ29udmVydChvKTtcblx0ICB2YXIgciA9IG8uciAvIDI1NSxcblx0ICAgICAgZyA9IG8uZyAvIDI1NSxcblx0ICAgICAgYiA9IG8uYiAvIDI1NSxcblx0ICAgICAgbCA9IChCQ19EQSAqIGIgKyBFRCAqIHIgLSBFQiAqIGcpIC8gKEJDX0RBICsgRUQgLSBFQiksXG5cdCAgICAgIGJsID0gYiAtIGwsXG5cdCAgICAgIGsgPSAoRSAqIChnIC0gbCkgLSBDICogYmwpIC8gRCxcblx0ICAgICAgcyA9IE1hdGguc3FydChrICogayArIGJsICogYmwpIC8gKEUgKiBsICogKDEgLSBsKSksIC8vIE5hTiBpZiBsPTAgb3IgbD0xXG5cdCAgICAgIGggPSBzID8gTWF0aC5hdGFuMihrLCBibCkgKiByYWQyZGVnIC0gMTIwIDogTmFOO1xuXHQgIHJldHVybiBuZXcgQ3ViZWhlbGl4KGggPCAwID8gaCArIDM2MCA6IGgsIHMsIGwsIG8ub3BhY2l0eSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGN1YmVoZWxpeChoLCBzLCBsLCBvcGFjaXR5KSB7XG5cdCAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBjdWJlaGVsaXhDb252ZXJ0KGgpIDogbmV3IEN1YmVoZWxpeChoLCBzLCBsLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEN1YmVoZWxpeChoLCBzLCBsLCBvcGFjaXR5KSB7XG5cdCAgdGhpcy5oID0gK2g7XG5cdCAgdGhpcy5zID0gK3M7XG5cdCAgdGhpcy5sID0gK2w7XG5cdCAgdGhpcy5vcGFjaXR5ID0gK29wYWNpdHk7XG5cdH1cblx0XG5cdGRlZmluZShDdWJlaGVsaXgsIGN1YmVoZWxpeCwgZXh0ZW5kKENvbG9yLCB7XG5cdCAgYnJpZ2h0ZXI6IGZ1bmN0aW9uKGspIHtcblx0ICAgIGsgPSBrID09IG51bGwgPyBicmlnaHRlciA6IE1hdGgucG93KGJyaWdodGVyLCBrKTtcblx0ICAgIHJldHVybiBuZXcgQ3ViZWhlbGl4KHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpO1xuXHQgIH0sXG5cdCAgZGFya2VyOiBmdW5jdGlvbihrKSB7XG5cdCAgICBrID0gayA9PSBudWxsID8gZGFya2VyIDogTWF0aC5wb3coZGFya2VyLCBrKTtcblx0ICAgIHJldHVybiBuZXcgQ3ViZWhlbGl4KHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpO1xuXHQgIH0sXG5cdCAgcmdiOiBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBoID0gaXNOYU4odGhpcy5oKSA/IDAgOiAodGhpcy5oICsgMTIwKSAqIGRlZzJyYWQsXG5cdCAgICAgICAgbCA9ICt0aGlzLmwsXG5cdCAgICAgICAgYSA9IGlzTmFOKHRoaXMucykgPyAwIDogdGhpcy5zICogbCAqICgxIC0gbCksXG5cdCAgICAgICAgY29zaCA9IE1hdGguY29zKGgpLFxuXHQgICAgICAgIHNpbmggPSBNYXRoLnNpbihoKTtcblx0ICAgIHJldHVybiBuZXcgUmdiKFxuXHQgICAgICAyNTUgKiAobCArIGEgKiAoQSAqIGNvc2ggKyBCICogc2luaCkpLFxuXHQgICAgICAyNTUgKiAobCArIGEgKiAoQyAqIGNvc2ggKyBEICogc2luaCkpLFxuXHQgICAgICAyNTUgKiAobCArIGEgKiAoRSAqIGNvc2gpKSxcblx0ICAgICAgdGhpcy5vcGFjaXR5XG5cdCAgICApO1xuXHQgIH1cblx0fSkpO1xuXHRcblx0ZXhwb3J0cy5jb2xvciA9IGNvbG9yO1xuXHRleHBvcnRzLnJnYiA9IHJnYjtcblx0ZXhwb3J0cy5oc2wgPSBoc2w7XG5cdGV4cG9ydHMubGFiID0gbGFiO1xuXHRleHBvcnRzLmhjbCA9IGhjbDtcblx0ZXhwb3J0cy5jdWJlaGVsaXggPSBjdWJlaGVsaXg7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRcblx0fSkpKTtcblxuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdHZhciBwcmVhY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0dmFyIGQzX2hpZXJhcmNoeV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XHJcblx0ZXhwb3J0cy5SRU5ERVJFUl9QUkVTRVRTID0ge1xyXG5cdCAgICBcIlRyZWVcIjogeyBsYXlvdXRGbjogVFJFRV9MQVlPVVQsIHNvcnROb2Rlc0ZuOiBUT1BfVE9fQk9UVE9NX1NPUlQsIGxhYmVsUmVuZGVyRm46IFNMQU5URURfVEVYVCwgZWRnZVJlbmRlckZuOiBUUkVFX0VER0UgfSxcclxuXHQgICAgXCJDbHVzdGVyXCI6IHsgbGF5b3V0Rm46IENMVVNURVJfTEFZT1VULCBzb3J0Tm9kZXNGbjogVE9QX1RPX0JPVFRPTV9TT1JULCBsYWJlbFJlbmRlckZuOiBTTEFOVEVEX1RFWFQsIGVkZ2VSZW5kZXJGbjogVFJFRV9FREdFIH0sXHJcblx0ICAgIFwiUmFkaWFsXCI6IHsgbGF5b3V0Rm46IFJBRElBTF9MQVlPVVQsIHNvcnROb2Rlc0ZuOiBCT1RUT01fVE9fVE9QX1NPUlQsIGxhYmVsUmVuZGVyRm46IFJBRElBTF9URVhULCBlZGdlUmVuZGVyRm46IFJBRElBTF9FREdFIH0sXHJcblx0fTtcclxuXHR2YXIgdHJlZSA9IGV4cG9ydHMuUkVOREVSRVJfUFJFU0VUUy5UcmVlO1xyXG5cdGV4cG9ydHMuREVGQVVMVF9SRU5ERVJFUiA9IHtcclxuXHQgICAgYmFzZVJhZGl1czogMTAsXHJcblx0ICAgIGJhc2VGb250U2l6ZTogMTIsXHJcblx0ICAgIGJhc2VTdHJva2VXaWR0aDogMixcclxuXHQgICAgYmFzZU5vZGVTdHJva2VXaWR0aDogMixcclxuXHQgICAgem9vbTogMS4wLFxyXG5cdCAgICBsYXlvdXRGbjogdHJlZS5sYXlvdXRGbixcclxuXHQgICAgc29ydE5vZGVzRm46IHRyZWUuc29ydE5vZGVzRm4sXHJcblx0ICAgIGxhYmVsUmVuZGVyRm46IHRyZWUubGFiZWxSZW5kZXJGbixcclxuXHQgICAgZWRnZVJlbmRlckZuOiB0cmVlLmVkZ2VSZW5kZXJGbixcclxuXHR9O1xyXG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHQvLyBOT0RFIFJFTkRFUiBPUkRFUlxyXG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHRmdW5jdGlvbiBCT1RUT01fVE9fVE9QX1NPUlQoYSwgYikge1xyXG5cdCAgICB2YXIgYjJ0ID0gYi5sYXlvdXRZIC0gYS5sYXlvdXRZOyAvLyBib3R0b20gdG8gdG9wXHJcblx0ICAgIGlmIChiMnQgIT09IDApXHJcblx0ICAgICAgICByZXR1cm4gYjJ0O1xyXG5cdCAgICB2YXIgbDJyID0gYS5sYXlvdXRYIC0gYi5sYXlvdXRYOyAvLyBsZWZ0IHRvIHJpZ2h0XHJcblx0ICAgIHJldHVybiBsMnI7XHJcblx0fVxyXG5cdGV4cG9ydHMuQk9UVE9NX1RPX1RPUF9TT1JUID0gQk9UVE9NX1RPX1RPUF9TT1JUO1xyXG5cdGZ1bmN0aW9uIFRPUF9UT19CT1RUT01fU09SVChhLCBiKSB7XHJcblx0ICAgIHZhciB0MmIgPSBhLmxheW91dFkgLSBiLmxheW91dFk7IC8vIHRvcCB0byBib3R0b21cclxuXHQgICAgaWYgKHQyYiAhPT0gMClcclxuXHQgICAgICAgIHJldHVybiB0MmI7XHJcblx0ICAgIHZhciBsMnIgPSBhLmxheW91dFggLSBiLmxheW91dFg7IC8vIGxlZnQgdG8gcmlnaHRcclxuXHQgICAgcmV0dXJuIGwycjtcclxuXHR9XHJcblx0ZXhwb3J0cy5UT1BfVE9fQk9UVE9NX1NPUlQgPSBUT1BfVE9fQk9UVE9NX1NPUlQ7XHJcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cdC8vIExBWU9VVFNcclxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblx0ZnVuY3Rpb24gVFJFRV9MQVlPVVQocm9vdE5vZGUpIHtcclxuXHQgICAgdmFyIHJvb3QgPSBkM19oaWVyYXJjaHlfMS5oaWVyYXJjaHkocm9vdE5vZGUpO1xyXG5cdCAgICB2YXIgdHJlZSA9IGQzX2hpZXJhcmNoeV8xLnRyZWUoKTtcclxuXHQgICAgcmV0dXJuIHVwZGF0ZU5vZGVzKHRyZWUocm9vdCkpO1xyXG5cdH1cclxuXHRleHBvcnRzLlRSRUVfTEFZT1VUID0gVFJFRV9MQVlPVVQ7XHJcblx0ZnVuY3Rpb24gQ0xVU1RFUl9MQVlPVVQocm9vdE5vZGUpIHtcclxuXHQgICAgdmFyIHJvb3QgPSBkM19oaWVyYXJjaHlfMS5oaWVyYXJjaHkocm9vdE5vZGUpO1xyXG5cdCAgICB2YXIgdHJlZSA9IGQzX2hpZXJhcmNoeV8xLmNsdXN0ZXIoKTtcclxuXHQgICAgcmV0dXJuIHVwZGF0ZU5vZGVzKHRyZWUocm9vdCkpO1xyXG5cdH1cclxuXHRleHBvcnRzLkNMVVNURVJfTEFZT1VUID0gQ0xVU1RFUl9MQVlPVVQ7XHJcblx0LyoqIEZvciBSQURJQUxfTEFZT1VUOiBwcm9qZWN0cyB4L3kgY29vcmRzIGZyb20gYSBjbHVzdGVyIGxheW91dCB0byBjaXJjdWxhciBsYXlvdXQgKi9cclxuXHRmdW5jdGlvbiBwcm9qZWN0KHgsIHkpIHtcclxuXHQgICAgdmFyIGFuZ2xlID0gKHggLSA5MCkgLyAxODAgKiBNYXRoLlBJLCByYWRpdXMgPSB5O1xyXG5cdCAgICB2YXIgQ0VOVEVSID0gMC41O1xyXG5cdCAgICByZXR1cm4geyB4OiBDRU5URVIgKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSksIHk6IENFTlRFUiArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKSB9O1xyXG5cdH1cclxuXHRmdW5jdGlvbiBSQURJQUxfTEFZT1VUKHJvb3ROb2RlKSB7XHJcblx0ICAgIHZhciByb290ID0gZDNfaGllcmFyY2h5XzEuaGllcmFyY2h5KHJvb3ROb2RlKTtcclxuXHQgICAgdmFyIGxheW91dCA9IGQzX2hpZXJhcmNoeV8xLmNsdXN0ZXIoKVxyXG5cdCAgICAgICAgLnNpemUoWzM2MCwgMC40XSlcclxuXHQgICAgICAgIC5zZXBhcmF0aW9uKGZ1bmN0aW9uIChhLCBiKSB7XHJcblx0ICAgICAgICByZXR1cm4gKGEucGFyZW50ID09IGIucGFyZW50ID8gMSA6IDIpIC8gYS5kZXB0aDtcclxuXHQgICAgfSk7XHJcblx0ICAgIHZhciBub2RlcyA9IGxheW91dChyb290KTtcclxuXHQgICAgbm9kZXMuZWFjaChmdW5jdGlvbiAobm9kZSkge1xyXG5cdCAgICAgICAgdmFyIHByb2plY3RlZCA9IHByb2plY3Qobm9kZS54LCBub2RlLnkpO1xyXG5cdCAgICAgICAgdmFyIHZpc05vZGUgPSBub2RlLmRhdGE7XHJcblx0ICAgICAgICB2aXNOb2RlLmxheW91dFggPSBub2RlLng7XHJcblx0ICAgICAgICB2aXNOb2RlLmxheW91dFkgPSBub2RlLnk7XHJcblx0ICAgICAgICB2aXNOb2RlLnggPSBwcm9qZWN0ZWQueDtcclxuXHQgICAgICAgIHZpc05vZGUueSA9IHByb2plY3RlZC55O1xyXG5cdCAgICB9KTtcclxuXHR9XHJcblx0ZXhwb3J0cy5SQURJQUxfTEFZT1VUID0gUkFESUFMX0xBWU9VVDtcclxuXHQvKiogTXV0YXRlcyBlYWNoIFN0YXRlVmlzTm9kZSBieSBjb3B5aW5nIHRoZSBuZXcgeC95IHZhbHVlcyBmcm9tIHRoZSBkMyBIaWVyYXJjaHlQb2ludE5vZGUgc3RydWN0dXJlICovXHJcblx0ZnVuY3Rpb24gdXBkYXRlTm9kZXMobm9kZXMpIHtcclxuXHQgICAgbm9kZXMuZWFjaChmdW5jdGlvbiAobm9kZSkge1xyXG5cdCAgICAgICAgbm9kZS5kYXRhLmxheW91dFggPSBub2RlLmRhdGEueCA9IG5vZGUueDtcclxuXHQgICAgICAgIG5vZGUuZGF0YS5sYXlvdXRZID0gbm9kZS5kYXRhLnkgPSBub2RlLnk7XHJcblx0ICAgIH0pO1xyXG5cdCAgICByZXR1cm4gbm9kZXM7XHJcblx0fVxyXG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHQvLyBTVEFURSBOQU1FIExBQkVMXHJcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cdGZ1bmN0aW9uIFJBRElBTF9URVhUKHgsIHksIG5vZGUsIHJlbmRlcmVyKSB7XHJcblx0ICAgIHZhciBiYXNlRm9udFNpemUgPSByZW5kZXJlci5iYXNlRm9udFNpemUsIHpvb20gPSByZW5kZXJlci56b29tO1xyXG5cdCAgICB2YXIgZm9udFNpemUgPSBiYXNlRm9udFNpemUgKiB6b29tO1xyXG5cdCAgICB2YXIgc2VnbWVudHMgPSBub2RlLm5hbWUuc3BsaXQoXCIuXCIpO1xyXG5cdCAgICB2YXIgbmFtZSA9IHNlZ21lbnRzLnBvcCgpO1xyXG5cdCAgICBpZiAobmFtZSA9PSAnKionKVxyXG5cdCAgICAgICAgbmFtZSA9IHNlZ21lbnRzLnBvcCgpICsgXCIuKipcIjtcclxuXHQgICAgdmFyIGFuZ2xlID0gbm9kZS5sYXlvdXRYIHx8IDA7XHJcblx0ICAgIHZhciB0ZXh0QW5jaG9yID0gKGFuZ2xlIDwgMTgwID09PSAhIW5vZGUuY2hpbGRyZW4pID8gXCJzdGFydFwiIDogXCJlbmRcIjtcclxuXHQgICAgdmFyIHJvdGF0aW9uID0gKGFuZ2xlIDwgMTgwID8gYW5nbGUgLSA5MCA6IGFuZ2xlICsgOTApO1xyXG5cdCAgICB2YXIgdHJhbnNsYXRpb24gPSAodGV4dEFuY2hvciA9PT0gXCJzdGFydFwiID8gMTUgOiAtMTUpICogem9vbTtcclxuXHQgICAgdmFyIHRyYW5zZm9ybSA9IFwicm90YXRlKFwiICsgcm90YXRpb24gKyBcIiksdHJhbnNsYXRlKFwiICsgdHJhbnNsYXRpb24gKyBcIiwgMClcIjtcclxuXHQgICAgcmV0dXJuIChwcmVhY3RfMS5oKFwidGV4dFwiLCB7IGNsYXNzTmFtZTogXCJuYW1lXCIsIFwidGV4dC1hbmNob3JcIjogdGV4dEFuY2hvciwgdHJhbnNmb3JtOiB0cmFuc2Zvcm0sIFwiZm9udC1zaXplXCI6IGZvbnRTaXplIH0sXHJcblx0ICAgICAgICBcIiBcIixcclxuXHQgICAgICAgIG5hbWUsXHJcblx0ICAgICAgICBcIiBcIikpO1xyXG5cdH1cclxuXHRleHBvcnRzLlJBRElBTF9URVhUID0gUkFESUFMX1RFWFQ7XHJcblx0ZnVuY3Rpb24gU0xBTlRFRF9URVhUKHgsIHksIG5vZGUsIHJlbmRlcmVyKSB7XHJcblx0ICAgIHZhciBiYXNlUmFkaXVzID0gcmVuZGVyZXIuYmFzZVJhZGl1cywgYmFzZUZvbnRTaXplID0gcmVuZGVyZXIuYmFzZUZvbnRTaXplLCBiYXNlU3Ryb2tlV2lkdGggPSByZW5kZXJlci5iYXNlU3Ryb2tlV2lkdGgsIGJhc2VOb2RlU3Ryb2tlV2lkdGggPSByZW5kZXJlci5iYXNlTm9kZVN0cm9rZVdpZHRoLCB6b29tID0gcmVuZGVyZXIuem9vbTtcclxuXHQgICAgdmFyIHIgPSBiYXNlUmFkaXVzICogem9vbTtcclxuXHQgICAgdmFyIGZvbnRTaXplID0gYmFzZUZvbnRTaXplICogem9vbTtcclxuXHQgICAgdmFyIHNlZ21lbnRzID0gbm9kZS5uYW1lLnNwbGl0KFwiLlwiKTtcclxuXHQgICAgdmFyIG5hbWUgPSBzZWdtZW50cy5wb3AoKTtcclxuXHQgICAgaWYgKG5hbWUgPT0gJyoqJylcclxuXHQgICAgICAgIG5hbWUgPSBzZWdtZW50cy5wb3AoKSArIFwiLioqXCI7XHJcblx0ICAgIHZhciB0cmFuc2Zvcm0gPSBcInJvdGF0ZSgtMTUpLHRyYW5zbGF0ZSgwLCBcIiArIC0xNSAqIHpvb20gKyBcIilcIjtcclxuXHQgICAgcmV0dXJuIChwcmVhY3RfMS5oKFwidGV4dFwiLCB7IGNsYXNzTmFtZTogXCJuYW1lXCIsIFwidGV4dC1hbmNob3JcIjogXCJtaWRkbGVcIiwgdHJhbnNmb3JtOiB0cmFuc2Zvcm0sIFwiZm9udC1zaXplXCI6IGZvbnRTaXplIH0sXHJcblx0ICAgICAgICBcIiBcIixcclxuXHQgICAgICAgIG5hbWUsXHJcblx0ICAgICAgICBcIiBcIikpO1xyXG5cdH1cclxuXHRleHBvcnRzLlNMQU5URURfVEVYVCA9IFNMQU5URURfVEVYVDtcclxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblx0Ly8gR1JBUEggRURHRVNcclxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblx0LyoqIFN0cmFpZ2h0IGxpbmUgKi9cclxuXHRmdW5jdGlvbiBSQURJQUxfRURHRShub2RlLCByZW5kZXJlcikge1xyXG5cdCAgICB2YXIgc3Ryb2tlV2lkdGggPSByZW5kZXJlci5iYXNlU3Ryb2tlV2lkdGggKiByZW5kZXJlci56b29tO1xyXG5cdCAgICB2YXIgbWFrZUxpbmtQYXRoID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuXHQgICAgICAgIHZhciBzID0geyB4OiBub2RlLmFuaW1YLCB5OiBub2RlLmFuaW1ZIH07IC8vIHN0YXRldmlzbm9kZVxyXG5cdCAgICAgICAgdmFyIHAgPSB7IHg6IG5vZGUuX3BhcmVudC5hbmltWCwgeTogbm9kZS5fcGFyZW50LmFuaW1ZIH07IC8vIHBhcmVudFxyXG5cdCAgICAgICAgcmV0dXJuIFwiTVwiICsgW3MueCwgcy55XVxyXG5cdCAgICAgICAgICAgICsgXCIgXCIgKyBbcC54LCBwLnldO1xyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gcHJlYWN0XzEuaChcInBhdGhcIiwgeyBkOiBtYWtlTGlua1BhdGgobm9kZSksIFwic3Ryb2tlLXdpZHRoXCI6IHN0cm9rZVdpZHRoLCBjbGFzc05hbWU6ICdsaW5rJyB9KTtcclxuXHR9XHJcblx0ZXhwb3J0cy5SQURJQUxfRURHRSA9IFJBRElBTF9FREdFO1xyXG5cdC8qKiBCZXppZXIgY3VydmUgKi9cclxuXHRmdW5jdGlvbiBUUkVFX0VER0Uobm9kZSwgcmVuZGVyZXIpIHtcclxuXHQgICAgdmFyIHN0cm9rZVdpZHRoID0gcmVuZGVyZXIuYmFzZVN0cm9rZVdpZHRoICogcmVuZGVyZXIuem9vbTtcclxuXHQgICAgdmFyIG1ha2VMaW5rUGF0aCA9IGZ1bmN0aW9uIChub2RlKSB7XHJcblx0ICAgICAgICB2YXIgcyA9IHsgeDogbm9kZS5hbmltWCwgeTogbm9kZS5hbmltWSB9OyAvLyBzdGF0ZXZpc25vZGVcclxuXHQgICAgICAgIHZhciBwID0geyB4OiBub2RlLl9wYXJlbnQuYW5pbVgsIHk6IG5vZGUuX3BhcmVudC5hbmltWSB9OyAvLyBwYXJlbnRcclxuXHQgICAgICAgIHZhciB5QXZnID0gKHMueSArIHAueSkgLyAyO1xyXG5cdCAgICAgICAgcmV0dXJuIFwiTSBcIiArIHMueCArIFwiIFwiICsgcy55ICsgXCIgQyBcIiArIHMueCArIFwiIFwiICsgeUF2ZyArIFwiLCBcIiArIHAueCArIFwiIFwiICsgeUF2ZyArIFwiLCBcIiArIHAueCArIFwiIFwiICsgcC55O1xyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gcHJlYWN0XzEuaChcInBhdGhcIiwgeyBkOiBtYWtlTGlua1BhdGgobm9kZSksIFwic3Ryb2tlLXdpZHRoXCI6IHN0cm9rZVdpZHRoLCBjbGFzc05hbWU6ICdsaW5rJyB9KTtcclxuXHR9XHJcblx0ZXhwb3J0cy5UUkVFX0VER0UgPSBUUkVFX0VER0U7XHJcblxuXG4vKioqLyB9KSxcbi8qIDE3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gaHR0cHM6Ly9kM2pzLm9yZy9kMy1oaWVyYXJjaHkvIFZlcnNpb24gMS4xLjQuIENvcHlyaWdodCAyMDE3IE1pa2UgQm9zdG9jay5cblx0KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0XHQgdHJ1ZSA/IGZhY3RvcnkoZXhwb3J0cykgOlxuXHRcdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnXSwgZmFjdG9yeSkgOlxuXHRcdChmYWN0b3J5KChnbG9iYWwuZDMgPSBnbG9iYWwuZDMgfHwge30pKSk7XG5cdH0odGhpcywgKGZ1bmN0aW9uIChleHBvcnRzKSB7ICd1c2Ugc3RyaWN0Jztcblx0XG5cdGZ1bmN0aW9uIGRlZmF1bHRTZXBhcmF0aW9uKGEsIGIpIHtcblx0ICByZXR1cm4gYS5wYXJlbnQgPT09IGIucGFyZW50ID8gMSA6IDI7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1lYW5YKGNoaWxkcmVuKSB7XG5cdCAgcmV0dXJuIGNoaWxkcmVuLnJlZHVjZShtZWFuWFJlZHVjZSwgMCkgLyBjaGlsZHJlbi5sZW5ndGg7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1lYW5YUmVkdWNlKHgsIGMpIHtcblx0ICByZXR1cm4geCArIGMueDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWF4WShjaGlsZHJlbikge1xuXHQgIHJldHVybiAxICsgY2hpbGRyZW4ucmVkdWNlKG1heFlSZWR1Y2UsIDApO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYXhZUmVkdWNlKHksIGMpIHtcblx0ICByZXR1cm4gTWF0aC5tYXgoeSwgYy55KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbGVhZkxlZnQobm9kZSkge1xuXHQgIHZhciBjaGlsZHJlbjtcblx0ICB3aGlsZSAoY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuKSBub2RlID0gY2hpbGRyZW5bMF07XG5cdCAgcmV0dXJuIG5vZGU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxlYWZSaWdodChub2RlKSB7XG5cdCAgdmFyIGNoaWxkcmVuO1xuXHQgIHdoaWxlIChjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW4pIG5vZGUgPSBjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXTtcblx0ICByZXR1cm4gbm9kZTtcblx0fVxuXHRcblx0dmFyIGNsdXN0ZXIgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgc2VwYXJhdGlvbiA9IGRlZmF1bHRTZXBhcmF0aW9uLFxuXHQgICAgICBkeCA9IDEsXG5cdCAgICAgIGR5ID0gMSxcblx0ICAgICAgbm9kZVNpemUgPSBmYWxzZTtcblx0XG5cdCAgZnVuY3Rpb24gY2x1c3Rlcihyb290KSB7XG5cdCAgICB2YXIgcHJldmlvdXNOb2RlLFxuXHQgICAgICAgIHggPSAwO1xuXHRcblx0ICAgIC8vIEZpcnN0IHdhbGssIGNvbXB1dGluZyB0aGUgaW5pdGlhbCB4ICYgeSB2YWx1ZXMuXG5cdCAgICByb290LmVhY2hBZnRlcihmdW5jdGlvbihub2RlKSB7XG5cdCAgICAgIHZhciBjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47XG5cdCAgICAgIGlmIChjaGlsZHJlbikge1xuXHQgICAgICAgIG5vZGUueCA9IG1lYW5YKGNoaWxkcmVuKTtcblx0ICAgICAgICBub2RlLnkgPSBtYXhZKGNoaWxkcmVuKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBub2RlLnggPSBwcmV2aW91c05vZGUgPyB4ICs9IHNlcGFyYXRpb24obm9kZSwgcHJldmlvdXNOb2RlKSA6IDA7XG5cdCAgICAgICAgbm9kZS55ID0gMDtcblx0ICAgICAgICBwcmV2aW91c05vZGUgPSBub2RlO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgbGVmdCA9IGxlYWZMZWZ0KHJvb3QpLFxuXHQgICAgICAgIHJpZ2h0ID0gbGVhZlJpZ2h0KHJvb3QpLFxuXHQgICAgICAgIHgwID0gbGVmdC54IC0gc2VwYXJhdGlvbihsZWZ0LCByaWdodCkgLyAyLFxuXHQgICAgICAgIHgxID0gcmlnaHQueCArIHNlcGFyYXRpb24ocmlnaHQsIGxlZnQpIC8gMjtcblx0XG5cdCAgICAvLyBTZWNvbmQgd2Fsaywgbm9ybWFsaXppbmcgeCAmIHkgdG8gdGhlIGRlc2lyZWQgc2l6ZS5cblx0ICAgIHJldHVybiByb290LmVhY2hBZnRlcihub2RlU2l6ZSA/IGZ1bmN0aW9uKG5vZGUpIHtcblx0ICAgICAgbm9kZS54ID0gKG5vZGUueCAtIHJvb3QueCkgKiBkeDtcblx0ICAgICAgbm9kZS55ID0gKHJvb3QueSAtIG5vZGUueSkgKiBkeTtcblx0ICAgIH0gOiBmdW5jdGlvbihub2RlKSB7XG5cdCAgICAgIG5vZGUueCA9IChub2RlLnggLSB4MCkgLyAoeDEgLSB4MCkgKiBkeDtcblx0ICAgICAgbm9kZS55ID0gKDEgLSAocm9vdC55ID8gbm9kZS55IC8gcm9vdC55IDogMSkpICogZHk7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGNsdXN0ZXIuc2VwYXJhdGlvbiA9IGZ1bmN0aW9uKHgpIHtcblx0ICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHNlcGFyYXRpb24gPSB4LCBjbHVzdGVyKSA6IHNlcGFyYXRpb247XG5cdCAgfTtcblx0XG5cdCAgY2x1c3Rlci5zaXplID0gZnVuY3Rpb24oeCkge1xuXHQgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAobm9kZVNpemUgPSBmYWxzZSwgZHggPSAreFswXSwgZHkgPSAreFsxXSwgY2x1c3RlcikgOiAobm9kZVNpemUgPyBudWxsIDogW2R4LCBkeV0pO1xuXHQgIH07XG5cdFxuXHQgIGNsdXN0ZXIubm9kZVNpemUgPSBmdW5jdGlvbih4KSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChub2RlU2l6ZSA9IHRydWUsIGR4ID0gK3hbMF0sIGR5ID0gK3hbMV0sIGNsdXN0ZXIpIDogKG5vZGVTaXplID8gW2R4LCBkeV0gOiBudWxsKTtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gY2x1c3Rlcjtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGNvdW50KG5vZGUpIHtcblx0ICB2YXIgc3VtID0gMCxcblx0ICAgICAgY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuLFxuXHQgICAgICBpID0gY2hpbGRyZW4gJiYgY2hpbGRyZW4ubGVuZ3RoO1xuXHQgIGlmICghaSkgc3VtID0gMTtcblx0ICBlbHNlIHdoaWxlICgtLWkgPj0gMCkgc3VtICs9IGNoaWxkcmVuW2ldLnZhbHVlO1xuXHQgIG5vZGUudmFsdWUgPSBzdW07XG5cdH1cblx0XG5cdHZhciBub2RlX2NvdW50ID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHRoaXMuZWFjaEFmdGVyKGNvdW50KTtcblx0fTtcblx0XG5cdHZhciBub2RlX2VhY2ggPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHQgIHZhciBub2RlID0gdGhpcywgY3VycmVudCwgbmV4dCA9IFtub2RlXSwgY2hpbGRyZW4sIGksIG47XG5cdCAgZG8ge1xuXHQgICAgY3VycmVudCA9IG5leHQucmV2ZXJzZSgpLCBuZXh0ID0gW107XG5cdCAgICB3aGlsZSAobm9kZSA9IGN1cnJlbnQucG9wKCkpIHtcblx0ICAgICAgY2FsbGJhY2sobm9kZSksIGNoaWxkcmVuID0gbm9kZS5jaGlsZHJlbjtcblx0ICAgICAgaWYgKGNoaWxkcmVuKSBmb3IgKGkgPSAwLCBuID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG5cdCAgICAgICAgbmV4dC5wdXNoKGNoaWxkcmVuW2ldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gd2hpbGUgKG5leHQubGVuZ3RoKTtcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdHZhciBub2RlX2VhY2hCZWZvcmUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHQgIHZhciBub2RlID0gdGhpcywgbm9kZXMgPSBbbm9kZV0sIGNoaWxkcmVuLCBpO1xuXHQgIHdoaWxlIChub2RlID0gbm9kZXMucG9wKCkpIHtcblx0ICAgIGNhbGxiYWNrKG5vZGUpLCBjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47XG5cdCAgICBpZiAoY2hpbGRyZW4pIGZvciAoaSA9IGNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG5cdCAgICAgIG5vZGVzLnB1c2goY2hpbGRyZW5baV0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdHZhciBub2RlX2VhY2hBZnRlciA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cdCAgdmFyIG5vZGUgPSB0aGlzLCBub2RlcyA9IFtub2RlXSwgbmV4dCA9IFtdLCBjaGlsZHJlbiwgaSwgbjtcblx0ICB3aGlsZSAobm9kZSA9IG5vZGVzLnBvcCgpKSB7XG5cdCAgICBuZXh0LnB1c2gobm9kZSksIGNoaWxkcmVuID0gbm9kZS5jaGlsZHJlbjtcblx0ICAgIGlmIChjaGlsZHJlbikgZm9yIChpID0gMCwgbiA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IG47ICsraSkge1xuXHQgICAgICBub2Rlcy5wdXNoKGNoaWxkcmVuW2ldKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgd2hpbGUgKG5vZGUgPSBuZXh0LnBvcCgpKSB7XG5cdCAgICBjYWxsYmFjayhub2RlKTtcblx0ICB9XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHR2YXIgbm9kZV9zdW0gPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgIHJldHVybiB0aGlzLmVhY2hBZnRlcihmdW5jdGlvbihub2RlKSB7XG5cdCAgICB2YXIgc3VtID0gK3ZhbHVlKG5vZGUuZGF0YSkgfHwgMCxcblx0ICAgICAgICBjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW4sXG5cdCAgICAgICAgaSA9IGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aDtcblx0ICAgIHdoaWxlICgtLWkgPj0gMCkgc3VtICs9IGNoaWxkcmVuW2ldLnZhbHVlO1xuXHQgICAgbm9kZS52YWx1ZSA9IHN1bTtcblx0ICB9KTtcblx0fTtcblx0XG5cdHZhciBub2RlX3NvcnQgPSBmdW5jdGlvbihjb21wYXJlKSB7XG5cdCAgcmV0dXJuIHRoaXMuZWFjaEJlZm9yZShmdW5jdGlvbihub2RlKSB7XG5cdCAgICBpZiAobm9kZS5jaGlsZHJlbikge1xuXHQgICAgICBub2RlLmNoaWxkcmVuLnNvcnQoY29tcGFyZSk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdH07XG5cdFxuXHR2YXIgbm9kZV9wYXRoID0gZnVuY3Rpb24oZW5kKSB7XG5cdCAgdmFyIHN0YXJ0ID0gdGhpcyxcblx0ICAgICAgYW5jZXN0b3IgPSBsZWFzdENvbW1vbkFuY2VzdG9yKHN0YXJ0LCBlbmQpLFxuXHQgICAgICBub2RlcyA9IFtzdGFydF07XG5cdCAgd2hpbGUgKHN0YXJ0ICE9PSBhbmNlc3Rvcikge1xuXHQgICAgc3RhcnQgPSBzdGFydC5wYXJlbnQ7XG5cdCAgICBub2Rlcy5wdXNoKHN0YXJ0KTtcblx0ICB9XG5cdCAgdmFyIGsgPSBub2Rlcy5sZW5ndGg7XG5cdCAgd2hpbGUgKGVuZCAhPT0gYW5jZXN0b3IpIHtcblx0ICAgIG5vZGVzLnNwbGljZShrLCAwLCBlbmQpO1xuXHQgICAgZW5kID0gZW5kLnBhcmVudDtcblx0ICB9XG5cdCAgcmV0dXJuIG5vZGVzO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gbGVhc3RDb21tb25BbmNlc3RvcihhLCBiKSB7XG5cdCAgaWYgKGEgPT09IGIpIHJldHVybiBhO1xuXHQgIHZhciBhTm9kZXMgPSBhLmFuY2VzdG9ycygpLFxuXHQgICAgICBiTm9kZXMgPSBiLmFuY2VzdG9ycygpLFxuXHQgICAgICBjID0gbnVsbDtcblx0ICBhID0gYU5vZGVzLnBvcCgpO1xuXHQgIGIgPSBiTm9kZXMucG9wKCk7XG5cdCAgd2hpbGUgKGEgPT09IGIpIHtcblx0ICAgIGMgPSBhO1xuXHQgICAgYSA9IGFOb2Rlcy5wb3AoKTtcblx0ICAgIGIgPSBiTm9kZXMucG9wKCk7XG5cdCAgfVxuXHQgIHJldHVybiBjO1xuXHR9XG5cdFxuXHR2YXIgbm9kZV9hbmNlc3RvcnMgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgbm9kZSA9IHRoaXMsIG5vZGVzID0gW25vZGVdO1xuXHQgIHdoaWxlIChub2RlID0gbm9kZS5wYXJlbnQpIHtcblx0ICAgIG5vZGVzLnB1c2gobm9kZSk7XG5cdCAgfVxuXHQgIHJldHVybiBub2Rlcztcblx0fTtcblx0XG5cdHZhciBub2RlX2Rlc2NlbmRhbnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIG5vZGVzID0gW107XG5cdCAgdGhpcy5lYWNoKGZ1bmN0aW9uKG5vZGUpIHtcblx0ICAgIG5vZGVzLnB1c2gobm9kZSk7XG5cdCAgfSk7XG5cdCAgcmV0dXJuIG5vZGVzO1xuXHR9O1xuXHRcblx0dmFyIG5vZGVfbGVhdmVzID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGxlYXZlcyA9IFtdO1xuXHQgIHRoaXMuZWFjaEJlZm9yZShmdW5jdGlvbihub2RlKSB7XG5cdCAgICBpZiAoIW5vZGUuY2hpbGRyZW4pIHtcblx0ICAgICAgbGVhdmVzLnB1c2gobm9kZSk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIGxlYXZlcztcblx0fTtcblx0XG5cdHZhciBub2RlX2xpbmtzID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIHJvb3QgPSB0aGlzLCBsaW5rcyA9IFtdO1xuXHQgIHJvb3QuZWFjaChmdW5jdGlvbihub2RlKSB7XG5cdCAgICBpZiAobm9kZSAhPT0gcm9vdCkgeyAvLyBEb27igJl0IGluY2x1ZGUgdGhlIHJvb3TigJlzIHBhcmVudCwgaWYgYW55LlxuXHQgICAgICBsaW5rcy5wdXNoKHtzb3VyY2U6IG5vZGUucGFyZW50LCB0YXJnZXQ6IG5vZGV9KTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gbGlua3M7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBoaWVyYXJjaHkoZGF0YSwgY2hpbGRyZW4pIHtcblx0ICB2YXIgcm9vdCA9IG5ldyBOb2RlKGRhdGEpLFxuXHQgICAgICB2YWx1ZWQgPSArZGF0YS52YWx1ZSAmJiAocm9vdC52YWx1ZSA9IGRhdGEudmFsdWUpLFxuXHQgICAgICBub2RlLFxuXHQgICAgICBub2RlcyA9IFtyb290XSxcblx0ICAgICAgY2hpbGQsXG5cdCAgICAgIGNoaWxkcyxcblx0ICAgICAgaSxcblx0ICAgICAgbjtcblx0XG5cdCAgaWYgKGNoaWxkcmVuID09IG51bGwpIGNoaWxkcmVuID0gZGVmYXVsdENoaWxkcmVuO1xuXHRcblx0ICB3aGlsZSAobm9kZSA9IG5vZGVzLnBvcCgpKSB7XG5cdCAgICBpZiAodmFsdWVkKSBub2RlLnZhbHVlID0gK25vZGUuZGF0YS52YWx1ZTtcblx0ICAgIGlmICgoY2hpbGRzID0gY2hpbGRyZW4obm9kZS5kYXRhKSkgJiYgKG4gPSBjaGlsZHMubGVuZ3RoKSkge1xuXHQgICAgICBub2RlLmNoaWxkcmVuID0gbmV3IEFycmF5KG4pO1xuXHQgICAgICBmb3IgKGkgPSBuIC0gMTsgaSA+PSAwOyAtLWkpIHtcblx0ICAgICAgICBub2Rlcy5wdXNoKGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXSA9IG5ldyBOb2RlKGNoaWxkc1tpXSkpO1xuXHQgICAgICAgIGNoaWxkLnBhcmVudCA9IG5vZGU7XG5cdCAgICAgICAgY2hpbGQuZGVwdGggPSBub2RlLmRlcHRoICsgMTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHJvb3QuZWFjaEJlZm9yZShjb21wdXRlSGVpZ2h0KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbm9kZV9jb3B5KCkge1xuXHQgIHJldHVybiBoaWVyYXJjaHkodGhpcykuZWFjaEJlZm9yZShjb3B5RGF0YSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRlZmF1bHRDaGlsZHJlbihkKSB7XG5cdCAgcmV0dXJuIGQuY2hpbGRyZW47XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNvcHlEYXRhKG5vZGUpIHtcblx0ICBub2RlLmRhdGEgPSBub2RlLmRhdGEuZGF0YTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY29tcHV0ZUhlaWdodChub2RlKSB7XG5cdCAgdmFyIGhlaWdodCA9IDA7XG5cdCAgZG8gbm9kZS5oZWlnaHQgPSBoZWlnaHQ7XG5cdCAgd2hpbGUgKChub2RlID0gbm9kZS5wYXJlbnQpICYmIChub2RlLmhlaWdodCA8ICsraGVpZ2h0KSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIE5vZGUoZGF0YSkge1xuXHQgIHRoaXMuZGF0YSA9IGRhdGE7XG5cdCAgdGhpcy5kZXB0aCA9XG5cdCAgdGhpcy5oZWlnaHQgPSAwO1xuXHQgIHRoaXMucGFyZW50ID0gbnVsbDtcblx0fVxuXHRcblx0Tm9kZS5wcm90b3R5cGUgPSBoaWVyYXJjaHkucHJvdG90eXBlID0ge1xuXHQgIGNvbnN0cnVjdG9yOiBOb2RlLFxuXHQgIGNvdW50OiBub2RlX2NvdW50LFxuXHQgIGVhY2g6IG5vZGVfZWFjaCxcblx0ICBlYWNoQWZ0ZXI6IG5vZGVfZWFjaEFmdGVyLFxuXHQgIGVhY2hCZWZvcmU6IG5vZGVfZWFjaEJlZm9yZSxcblx0ICBzdW06IG5vZGVfc3VtLFxuXHQgIHNvcnQ6IG5vZGVfc29ydCxcblx0ICBwYXRoOiBub2RlX3BhdGgsXG5cdCAgYW5jZXN0b3JzOiBub2RlX2FuY2VzdG9ycyxcblx0ICBkZXNjZW5kYW50czogbm9kZV9kZXNjZW5kYW50cyxcblx0ICBsZWF2ZXM6IG5vZGVfbGVhdmVzLFxuXHQgIGxpbmtzOiBub2RlX2xpbmtzLFxuXHQgIGNvcHk6IG5vZGVfY29weVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gTm9kZSQyKHZhbHVlKSB7XG5cdCAgdGhpcy5fID0gdmFsdWU7XG5cdCAgdGhpcy5uZXh0ID0gbnVsbDtcblx0fVxuXHRcblx0dmFyIHNodWZmbGUgPSBmdW5jdGlvbihhcnJheSkge1xuXHQgIHZhciBpLFxuXHQgICAgICBuID0gKGFycmF5ID0gYXJyYXkuc2xpY2UoKSkubGVuZ3RoLFxuXHQgICAgICBoZWFkID0gbnVsbCxcblx0ICAgICAgbm9kZSA9IGhlYWQ7XG5cdFxuXHQgIHdoaWxlIChuKSB7XG5cdCAgICB2YXIgbmV4dCA9IG5ldyBOb2RlJDIoYXJyYXlbbiAtIDFdKTtcblx0ICAgIGlmIChub2RlKSBub2RlID0gbm9kZS5uZXh0ID0gbmV4dDtcblx0ICAgIGVsc2Ugbm9kZSA9IGhlYWQgPSBuZXh0O1xuXHQgICAgYXJyYXlbaV0gPSBhcnJheVstLW5dO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHtcblx0ICAgIGhlYWQ6IGhlYWQsXG5cdCAgICB0YWlsOiBub2RlXG5cdCAgfTtcblx0fTtcblx0XG5cdHZhciBlbmNsb3NlID0gZnVuY3Rpb24oY2lyY2xlcykge1xuXHQgIHJldHVybiBlbmNsb3NlTihzaHVmZmxlKGNpcmNsZXMpLCBbXSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBlbmNsb3NlcyhhLCBiKSB7XG5cdCAgdmFyIGR4ID0gYi54IC0gYS54LFxuXHQgICAgICBkeSA9IGIueSAtIGEueSxcblx0ICAgICAgZHIgPSBhLnIgLSBiLnI7XG5cdCAgcmV0dXJuIGRyICogZHIgKyAxZS02ID4gZHggKiBkeCArIGR5ICogZHk7XG5cdH1cblx0XG5cdC8vIFJldHVybnMgdGhlIHNtYWxsZXN0IGNpcmNsZSB0aGF0IGNvbnRhaW5zIGNpcmNsZXMgTCBhbmQgaW50ZXJzZWN0cyBjaXJjbGVzIEIuXG5cdGZ1bmN0aW9uIGVuY2xvc2VOKEwsIEIpIHtcblx0ICB2YXIgY2lyY2xlLFxuXHQgICAgICBsMCA9IG51bGwsXG5cdCAgICAgIGwxID0gTC5oZWFkLFxuXHQgICAgICBsMixcblx0ICAgICAgcDE7XG5cdFxuXHQgIHN3aXRjaCAoQi5sZW5ndGgpIHtcblx0ICAgIGNhc2UgMTogY2lyY2xlID0gZW5jbG9zZTEoQlswXSk7IGJyZWFrO1xuXHQgICAgY2FzZSAyOiBjaXJjbGUgPSBlbmNsb3NlMihCWzBdLCBCWzFdKTsgYnJlYWs7XG5cdCAgICBjYXNlIDM6IGNpcmNsZSA9IGVuY2xvc2UzKEJbMF0sIEJbMV0sIEJbMl0pOyBicmVhaztcblx0ICB9XG5cdFxuXHQgIHdoaWxlIChsMSkge1xuXHQgICAgcDEgPSBsMS5fLCBsMiA9IGwxLm5leHQ7XG5cdCAgICBpZiAoIWNpcmNsZSB8fCAhZW5jbG9zZXMoY2lyY2xlLCBwMSkpIHtcblx0XG5cdCAgICAgIC8vIFRlbXBvcmFyaWx5IHRydW5jYXRlIEwgYmVmb3JlIGwxLlxuXHQgICAgICBpZiAobDApIEwudGFpbCA9IGwwLCBsMC5uZXh0ID0gbnVsbDtcblx0ICAgICAgZWxzZSBMLmhlYWQgPSBMLnRhaWwgPSBudWxsO1xuXHRcblx0ICAgICAgQi5wdXNoKHAxKTtcblx0ICAgICAgY2lyY2xlID0gZW5jbG9zZU4oTCwgQik7IC8vIE5vdGU6IHJlb3JkZXJzIEwhXG5cdCAgICAgIEIucG9wKCk7XG5cdFxuXHQgICAgICAvLyBNb3ZlIGwxIHRvIHRoZSBmcm9udCBvZiBMIGFuZCByZWNvbm5lY3QgdGhlIHRydW5jYXRlZCBsaXN0IEwuXG5cdCAgICAgIGlmIChMLmhlYWQpIGwxLm5leHQgPSBMLmhlYWQsIEwuaGVhZCA9IGwxO1xuXHQgICAgICBlbHNlIGwxLm5leHQgPSBudWxsLCBMLmhlYWQgPSBMLnRhaWwgPSBsMTtcblx0ICAgICAgbDAgPSBMLnRhaWwsIGwwLm5leHQgPSBsMjtcblx0XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBsMCA9IGwxO1xuXHQgICAgfVxuXHQgICAgbDEgPSBsMjtcblx0ICB9XG5cdFxuXHQgIEwudGFpbCA9IGwwO1xuXHQgIHJldHVybiBjaXJjbGU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVuY2xvc2UxKGEpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgeDogYS54LFxuXHQgICAgeTogYS55LFxuXHQgICAgcjogYS5yXG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5jbG9zZTIoYSwgYikge1xuXHQgIHZhciB4MSA9IGEueCwgeTEgPSBhLnksIHIxID0gYS5yLFxuXHQgICAgICB4MiA9IGIueCwgeTIgPSBiLnksIHIyID0gYi5yLFxuXHQgICAgICB4MjEgPSB4MiAtIHgxLCB5MjEgPSB5MiAtIHkxLCByMjEgPSByMiAtIHIxLFxuXHQgICAgICBsID0gTWF0aC5zcXJ0KHgyMSAqIHgyMSArIHkyMSAqIHkyMSk7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHg6ICh4MSArIHgyICsgeDIxIC8gbCAqIHIyMSkgLyAyLFxuXHQgICAgeTogKHkxICsgeTIgKyB5MjEgLyBsICogcjIxKSAvIDIsXG5cdCAgICByOiAobCArIHIxICsgcjIpIC8gMlxuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVuY2xvc2UzKGEsIGIsIGMpIHtcblx0ICB2YXIgeDEgPSBhLngsIHkxID0gYS55LCByMSA9IGEucixcblx0ICAgICAgeDIgPSBiLngsIHkyID0gYi55LCByMiA9IGIucixcblx0ICAgICAgeDMgPSBjLngsIHkzID0gYy55LCByMyA9IGMucixcblx0ICAgICAgYTIgPSAyICogKHgxIC0geDIpLFxuXHQgICAgICBiMiA9IDIgKiAoeTEgLSB5MiksXG5cdCAgICAgIGMyID0gMiAqIChyMiAtIHIxKSxcblx0ICAgICAgZDIgPSB4MSAqIHgxICsgeTEgKiB5MSAtIHIxICogcjEgLSB4MiAqIHgyIC0geTIgKiB5MiArIHIyICogcjIsXG5cdCAgICAgIGEzID0gMiAqICh4MSAtIHgzKSxcblx0ICAgICAgYjMgPSAyICogKHkxIC0geTMpLFxuXHQgICAgICBjMyA9IDIgKiAocjMgLSByMSksXG5cdCAgICAgIGQzID0geDEgKiB4MSArIHkxICogeTEgLSByMSAqIHIxIC0geDMgKiB4MyAtIHkzICogeTMgKyByMyAqIHIzLFxuXHQgICAgICBhYiA9IGEzICogYjIgLSBhMiAqIGIzLFxuXHQgICAgICB4YSA9IChiMiAqIGQzIC0gYjMgKiBkMikgLyBhYiAtIHgxLFxuXHQgICAgICB4YiA9IChiMyAqIGMyIC0gYjIgKiBjMykgLyBhYixcblx0ICAgICAgeWEgPSAoYTMgKiBkMiAtIGEyICogZDMpIC8gYWIgLSB5MSxcblx0ICAgICAgeWIgPSAoYTIgKiBjMyAtIGEzICogYzIpIC8gYWIsXG5cdCAgICAgIEEgPSB4YiAqIHhiICsgeWIgKiB5YiAtIDEsXG5cdCAgICAgIEIgPSAyICogKHhhICogeGIgKyB5YSAqIHliICsgcjEpLFxuXHQgICAgICBDID0geGEgKiB4YSArIHlhICogeWEgLSByMSAqIHIxLFxuXHQgICAgICByID0gKC1CIC0gTWF0aC5zcXJ0KEIgKiBCIC0gNCAqIEEgKiBDKSkgLyAoMiAqIEEpO1xuXHQgIHJldHVybiB7XG5cdCAgICB4OiB4YSArIHhiICogciArIHgxLFxuXHQgICAgeTogeWEgKyB5YiAqIHIgKyB5MSxcblx0ICAgIHI6IHJcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwbGFjZShhLCBiLCBjKSB7XG5cdCAgdmFyIGF4ID0gYS54LFxuXHQgICAgICBheSA9IGEueSxcblx0ICAgICAgZGEgPSBiLnIgKyBjLnIsXG5cdCAgICAgIGRiID0gYS5yICsgYy5yLFxuXHQgICAgICBkeCA9IGIueCAtIGF4LFxuXHQgICAgICBkeSA9IGIueSAtIGF5LFxuXHQgICAgICBkYyA9IGR4ICogZHggKyBkeSAqIGR5O1xuXHQgIGlmIChkYykge1xuXHQgICAgdmFyIHggPSAwLjUgKyAoKGRiICo9IGRiKSAtIChkYSAqPSBkYSkpIC8gKDIgKiBkYyksXG5cdCAgICAgICAgeSA9IE1hdGguc3FydChNYXRoLm1heCgwLCAyICogZGEgKiAoZGIgKyBkYykgLSAoZGIgLT0gZGMpICogZGIgLSBkYSAqIGRhKSkgLyAoMiAqIGRjKTtcblx0ICAgIGMueCA9IGF4ICsgeCAqIGR4ICsgeSAqIGR5O1xuXHQgICAgYy55ID0gYXkgKyB4ICogZHkgLSB5ICogZHg7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGMueCA9IGF4ICsgZGI7XG5cdCAgICBjLnkgPSBheTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGludGVyc2VjdHMoYSwgYikge1xuXHQgIHZhciBkeCA9IGIueCAtIGEueCxcblx0ICAgICAgZHkgPSBiLnkgLSBhLnksXG5cdCAgICAgIGRyID0gYS5yICsgYi5yO1xuXHQgIHJldHVybiBkciAqIGRyIC0gMWUtNiA+IGR4ICogZHggKyBkeSAqIGR5O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXN0YW5jZTIobm9kZSwgeCwgeSkge1xuXHQgIHZhciBhID0gbm9kZS5fLFxuXHQgICAgICBiID0gbm9kZS5uZXh0Ll8sXG5cdCAgICAgIGFiID0gYS5yICsgYi5yLFxuXHQgICAgICBkeCA9IChhLnggKiBiLnIgKyBiLnggKiBhLnIpIC8gYWIgLSB4LFxuXHQgICAgICBkeSA9IChhLnkgKiBiLnIgKyBiLnkgKiBhLnIpIC8gYWIgLSB5O1xuXHQgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gTm9kZSQxKGNpcmNsZSkge1xuXHQgIHRoaXMuXyA9IGNpcmNsZTtcblx0ICB0aGlzLm5leHQgPSBudWxsO1xuXHQgIHRoaXMucHJldmlvdXMgPSBudWxsO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYWNrRW5jbG9zZShjaXJjbGVzKSB7XG5cdCAgaWYgKCEobiA9IGNpcmNsZXMubGVuZ3RoKSkgcmV0dXJuIDA7XG5cdFxuXHQgIHZhciBhLCBiLCBjLCBuO1xuXHRcblx0ICAvLyBQbGFjZSB0aGUgZmlyc3QgY2lyY2xlLlxuXHQgIGEgPSBjaXJjbGVzWzBdLCBhLnggPSAwLCBhLnkgPSAwO1xuXHQgIGlmICghKG4gPiAxKSkgcmV0dXJuIGEucjtcblx0XG5cdCAgLy8gUGxhY2UgdGhlIHNlY29uZCBjaXJjbGUuXG5cdCAgYiA9IGNpcmNsZXNbMV0sIGEueCA9IC1iLnIsIGIueCA9IGEuciwgYi55ID0gMDtcblx0ICBpZiAoIShuID4gMikpIHJldHVybiBhLnIgKyBiLnI7XG5cdFxuXHQgIC8vIFBsYWNlIHRoZSB0aGlyZCBjaXJjbGUuXG5cdCAgcGxhY2UoYiwgYSwgYyA9IGNpcmNsZXNbMl0pO1xuXHRcblx0ICAvLyBJbml0aWFsaXplIHRoZSB3ZWlnaHRlZCBjZW50cm9pZC5cblx0ICB2YXIgYWEgPSBhLnIgKiBhLnIsXG5cdCAgICAgIGJhID0gYi5yICogYi5yLFxuXHQgICAgICBjYSA9IGMuciAqIGMucixcblx0ICAgICAgb2EgPSBhYSArIGJhICsgY2EsXG5cdCAgICAgIG94ID0gYWEgKiBhLnggKyBiYSAqIGIueCArIGNhICogYy54LFxuXHQgICAgICBveSA9IGFhICogYS55ICsgYmEgKiBiLnkgKyBjYSAqIGMueSxcblx0ICAgICAgY3gsIGN5LCBpLCBqLCBrLCBzaiwgc2s7XG5cdFxuXHQgIC8vIEluaXRpYWxpemUgdGhlIGZyb250LWNoYWluIHVzaW5nIHRoZSBmaXJzdCB0aHJlZSBjaXJjbGVzIGEsIGIgYW5kIGMuXG5cdCAgYSA9IG5ldyBOb2RlJDEoYSksIGIgPSBuZXcgTm9kZSQxKGIpLCBjID0gbmV3IE5vZGUkMShjKTtcblx0ICBhLm5leHQgPSBjLnByZXZpb3VzID0gYjtcblx0ICBiLm5leHQgPSBhLnByZXZpb3VzID0gYztcblx0ICBjLm5leHQgPSBiLnByZXZpb3VzID0gYTtcblx0XG5cdCAgLy8gQXR0ZW1wdCB0byBwbGFjZSBlYWNoIHJlbWFpbmluZyBjaXJjbGXigKZcblx0ICBwYWNrOiBmb3IgKGkgPSAzOyBpIDwgbjsgKytpKSB7XG5cdCAgICBwbGFjZShhLl8sIGIuXywgYyA9IGNpcmNsZXNbaV0pLCBjID0gbmV3IE5vZGUkMShjKTtcblx0XG5cdCAgICAvLyBGaW5kIHRoZSBjbG9zZXN0IGludGVyc2VjdGluZyBjaXJjbGUgb24gdGhlIGZyb250LWNoYWluLCBpZiBhbnkuXG5cdCAgICAvLyDigJxDbG9zZW5lc3PigJ0gaXMgZGV0ZXJtaW5lZCBieSBsaW5lYXIgZGlzdGFuY2UgYWxvbmcgdGhlIGZyb250LWNoYWluLlxuXHQgICAgLy8g4oCcQWhlYWTigJ0gb3Ig4oCcYmVoaW5k4oCdIGlzIGxpa2V3aXNlIGRldGVybWluZWQgYnkgbGluZWFyIGRpc3RhbmNlLlxuXHQgICAgaiA9IGIubmV4dCwgayA9IGEucHJldmlvdXMsIHNqID0gYi5fLnIsIHNrID0gYS5fLnI7XG5cdCAgICBkbyB7XG5cdCAgICAgIGlmIChzaiA8PSBzaykge1xuXHQgICAgICAgIGlmIChpbnRlcnNlY3RzKGouXywgYy5fKSkge1xuXHQgICAgICAgICAgYiA9IGosIGEubmV4dCA9IGIsIGIucHJldmlvdXMgPSBhLCAtLWk7XG5cdCAgICAgICAgICBjb250aW51ZSBwYWNrO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzaiArPSBqLl8uciwgaiA9IGoubmV4dDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoaW50ZXJzZWN0cyhrLl8sIGMuXykpIHtcblx0ICAgICAgICAgIGEgPSBrLCBhLm5leHQgPSBiLCBiLnByZXZpb3VzID0gYSwgLS1pO1xuXHQgICAgICAgICAgY29udGludWUgcGFjaztcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2sgKz0gay5fLnIsIGsgPSBrLnByZXZpb3VzO1xuXHQgICAgICB9XG5cdCAgICB9IHdoaWxlIChqICE9PSBrLm5leHQpO1xuXHRcblx0ICAgIC8vIFN1Y2Nlc3MhIEluc2VydCB0aGUgbmV3IGNpcmNsZSBjIGJldHdlZW4gYSBhbmQgYi5cblx0ICAgIGMucHJldmlvdXMgPSBhLCBjLm5leHQgPSBiLCBhLm5leHQgPSBiLnByZXZpb3VzID0gYiA9IGM7XG5cdFxuXHQgICAgLy8gVXBkYXRlIHRoZSB3ZWlnaHRlZCBjZW50cm9pZC5cblx0ICAgIG9hICs9IGNhID0gYy5fLnIgKiBjLl8ucjtcblx0ICAgIG94ICs9IGNhICogYy5fLng7XG5cdCAgICBveSArPSBjYSAqIGMuXy55O1xuXHRcblx0ICAgIC8vIENvbXB1dGUgdGhlIG5ldyBjbG9zZXN0IGNpcmNsZSBwYWlyIHRvIHRoZSBjZW50cm9pZC5cblx0ICAgIGFhID0gZGlzdGFuY2UyKGEsIGN4ID0gb3ggLyBvYSwgY3kgPSBveSAvIG9hKTtcblx0ICAgIHdoaWxlICgoYyA9IGMubmV4dCkgIT09IGIpIHtcblx0ICAgICAgaWYgKChjYSA9IGRpc3RhbmNlMihjLCBjeCwgY3kpKSA8IGFhKSB7XG5cdCAgICAgICAgYSA9IGMsIGFhID0gY2E7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGIgPSBhLm5leHQ7XG5cdCAgfVxuXHRcblx0ICAvLyBDb21wdXRlIHRoZSBlbmNsb3NpbmcgY2lyY2xlIG9mIHRoZSBmcm9udCBjaGFpbi5cblx0ICBhID0gW2IuX10sIGMgPSBiOyB3aGlsZSAoKGMgPSBjLm5leHQpICE9PSBiKSBhLnB1c2goYy5fKTsgYyA9IGVuY2xvc2UoYSk7XG5cdFxuXHQgIC8vIFRyYW5zbGF0ZSB0aGUgY2lyY2xlcyB0byBwdXQgdGhlIGVuY2xvc2luZyBjaXJjbGUgYXJvdW5kIHRoZSBvcmlnaW4uXG5cdCAgZm9yIChpID0gMDsgaSA8IG47ICsraSkgYSA9IGNpcmNsZXNbaV0sIGEueCAtPSBjLngsIGEueSAtPSBjLnk7XG5cdFxuXHQgIHJldHVybiBjLnI7XG5cdH1cblx0XG5cdHZhciBzaWJsaW5ncyA9IGZ1bmN0aW9uKGNpcmNsZXMpIHtcblx0ICBwYWNrRW5jbG9zZShjaXJjbGVzKTtcblx0ICByZXR1cm4gY2lyY2xlcztcblx0fTtcblx0XG5cdGZ1bmN0aW9uIG9wdGlvbmFsKGYpIHtcblx0ICByZXR1cm4gZiA9PSBudWxsID8gbnVsbCA6IHJlcXVpcmVkKGYpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXF1aXJlZChmKSB7XG5cdCAgaWYgKHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcblx0ICByZXR1cm4gZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY29uc3RhbnRaZXJvKCkge1xuXHQgIHJldHVybiAwO1xuXHR9XG5cdFxuXHR2YXIgY29uc3RhbnQgPSBmdW5jdGlvbih4KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIHg7XG5cdCAgfTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGRlZmF1bHRSYWRpdXMoZCkge1xuXHQgIHJldHVybiBNYXRoLnNxcnQoZC52YWx1ZSk7XG5cdH1cblx0XG5cdHZhciBpbmRleCA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciByYWRpdXMgPSBudWxsLFxuXHQgICAgICBkeCA9IDEsXG5cdCAgICAgIGR5ID0gMSxcblx0ICAgICAgcGFkZGluZyA9IGNvbnN0YW50WmVybztcblx0XG5cdCAgZnVuY3Rpb24gcGFjayhyb290KSB7XG5cdCAgICByb290LnggPSBkeCAvIDIsIHJvb3QueSA9IGR5IC8gMjtcblx0ICAgIGlmIChyYWRpdXMpIHtcblx0ICAgICAgcm9vdC5lYWNoQmVmb3JlKHJhZGl1c0xlYWYocmFkaXVzKSlcblx0ICAgICAgICAgIC5lYWNoQWZ0ZXIocGFja0NoaWxkcmVuKHBhZGRpbmcsIDAuNSkpXG5cdCAgICAgICAgICAuZWFjaEJlZm9yZSh0cmFuc2xhdGVDaGlsZCgxKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByb290LmVhY2hCZWZvcmUocmFkaXVzTGVhZihkZWZhdWx0UmFkaXVzKSlcblx0ICAgICAgICAgIC5lYWNoQWZ0ZXIocGFja0NoaWxkcmVuKGNvbnN0YW50WmVybywgMSkpXG5cdCAgICAgICAgICAuZWFjaEFmdGVyKHBhY2tDaGlsZHJlbihwYWRkaW5nLCByb290LnIgLyBNYXRoLm1pbihkeCwgZHkpKSlcblx0ICAgICAgICAgIC5lYWNoQmVmb3JlKHRyYW5zbGF0ZUNoaWxkKE1hdGgubWluKGR4LCBkeSkgLyAoMiAqIHJvb3QucikpKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByb290O1xuXHQgIH1cblx0XG5cdCAgcGFjay5yYWRpdXMgPSBmdW5jdGlvbih4KSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChyYWRpdXMgPSBvcHRpb25hbCh4KSwgcGFjaykgOiByYWRpdXM7XG5cdCAgfTtcblx0XG5cdCAgcGFjay5zaXplID0gZnVuY3Rpb24oeCkge1xuXHQgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoZHggPSAreFswXSwgZHkgPSAreFsxXSwgcGFjaykgOiBbZHgsIGR5XTtcblx0ICB9O1xuXHRcblx0ICBwYWNrLnBhZGRpbmcgPSBmdW5jdGlvbih4KSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChwYWRkaW5nID0gdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIiA/IHggOiBjb25zdGFudCgreCksIHBhY2spIDogcGFkZGluZztcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gcGFjaztcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHJhZGl1c0xlYWYocmFkaXVzKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUpIHtcblx0ICAgIGlmICghbm9kZS5jaGlsZHJlbikge1xuXHQgICAgICBub2RlLnIgPSBNYXRoLm1heCgwLCArcmFkaXVzKG5vZGUpIHx8IDApO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhY2tDaGlsZHJlbihwYWRkaW5nLCBrKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUpIHtcblx0ICAgIGlmIChjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW4pIHtcblx0ICAgICAgdmFyIGNoaWxkcmVuLFxuXHQgICAgICAgICAgaSxcblx0ICAgICAgICAgIG4gPSBjaGlsZHJlbi5sZW5ndGgsXG5cdCAgICAgICAgICByID0gcGFkZGluZyhub2RlKSAqIGsgfHwgMCxcblx0ICAgICAgICAgIGU7XG5cdFxuXHQgICAgICBpZiAocikgZm9yIChpID0gMDsgaSA8IG47ICsraSkgY2hpbGRyZW5baV0uciArPSByO1xuXHQgICAgICBlID0gcGFja0VuY2xvc2UoY2hpbGRyZW4pO1xuXHQgICAgICBpZiAocikgZm9yIChpID0gMDsgaSA8IG47ICsraSkgY2hpbGRyZW5baV0uciAtPSByO1xuXHQgICAgICBub2RlLnIgPSBlICsgcjtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0cmFuc2xhdGVDaGlsZChrKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUpIHtcblx0ICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudDtcblx0ICAgIG5vZGUuciAqPSBrO1xuXHQgICAgaWYgKHBhcmVudCkge1xuXHQgICAgICBub2RlLnggPSBwYXJlbnQueCArIGsgKiBub2RlLng7XG5cdCAgICAgIG5vZGUueSA9IHBhcmVudC55ICsgayAqIG5vZGUueTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgcm91bmROb2RlID0gZnVuY3Rpb24obm9kZSkge1xuXHQgIG5vZGUueDAgPSBNYXRoLnJvdW5kKG5vZGUueDApO1xuXHQgIG5vZGUueTAgPSBNYXRoLnJvdW5kKG5vZGUueTApO1xuXHQgIG5vZGUueDEgPSBNYXRoLnJvdW5kKG5vZGUueDEpO1xuXHQgIG5vZGUueTEgPSBNYXRoLnJvdW5kKG5vZGUueTEpO1xuXHR9O1xuXHRcblx0dmFyIHRyZWVtYXBEaWNlID0gZnVuY3Rpb24ocGFyZW50LCB4MCwgeTAsIHgxLCB5MSkge1xuXHQgIHZhciBub2RlcyA9IHBhcmVudC5jaGlsZHJlbixcblx0ICAgICAgbm9kZSxcblx0ICAgICAgaSA9IC0xLFxuXHQgICAgICBuID0gbm9kZXMubGVuZ3RoLFxuXHQgICAgICBrID0gcGFyZW50LnZhbHVlICYmICh4MSAtIHgwKSAvIHBhcmVudC52YWx1ZTtcblx0XG5cdCAgd2hpbGUgKCsraSA8IG4pIHtcblx0ICAgIG5vZGUgPSBub2Rlc1tpXSwgbm9kZS55MCA9IHkwLCBub2RlLnkxID0geTE7XG5cdCAgICBub2RlLngwID0geDAsIG5vZGUueDEgPSB4MCArPSBub2RlLnZhbHVlICogaztcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcGFydGl0aW9uID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGR4ID0gMSxcblx0ICAgICAgZHkgPSAxLFxuXHQgICAgICBwYWRkaW5nID0gMCxcblx0ICAgICAgcm91bmQgPSBmYWxzZTtcblx0XG5cdCAgZnVuY3Rpb24gcGFydGl0aW9uKHJvb3QpIHtcblx0ICAgIHZhciBuID0gcm9vdC5oZWlnaHQgKyAxO1xuXHQgICAgcm9vdC54MCA9XG5cdCAgICByb290LnkwID0gcGFkZGluZztcblx0ICAgIHJvb3QueDEgPSBkeDtcblx0ICAgIHJvb3QueTEgPSBkeSAvIG47XG5cdCAgICByb290LmVhY2hCZWZvcmUocG9zaXRpb25Ob2RlKGR5LCBuKSk7XG5cdCAgICBpZiAocm91bmQpIHJvb3QuZWFjaEJlZm9yZShyb3VuZE5vZGUpO1xuXHQgICAgcmV0dXJuIHJvb3Q7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBwb3NpdGlvbk5vZGUoZHksIG4pIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbihub2RlKSB7XG5cdCAgICAgIGlmIChub2RlLmNoaWxkcmVuKSB7XG5cdCAgICAgICAgdHJlZW1hcERpY2Uobm9kZSwgbm9kZS54MCwgZHkgKiAobm9kZS5kZXB0aCArIDEpIC8gbiwgbm9kZS54MSwgZHkgKiAobm9kZS5kZXB0aCArIDIpIC8gbik7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHgwID0gbm9kZS54MCxcblx0ICAgICAgICAgIHkwID0gbm9kZS55MCxcblx0ICAgICAgICAgIHgxID0gbm9kZS54MSAtIHBhZGRpbmcsXG5cdCAgICAgICAgICB5MSA9IG5vZGUueTEgLSBwYWRkaW5nO1xuXHQgICAgICBpZiAoeDEgPCB4MCkgeDAgPSB4MSA9ICh4MCArIHgxKSAvIDI7XG5cdCAgICAgIGlmICh5MSA8IHkwKSB5MCA9IHkxID0gKHkwICsgeTEpIC8gMjtcblx0ICAgICAgbm9kZS54MCA9IHgwO1xuXHQgICAgICBub2RlLnkwID0geTA7XG5cdCAgICAgIG5vZGUueDEgPSB4MTtcblx0ICAgICAgbm9kZS55MSA9IHkxO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHBhcnRpdGlvbi5yb3VuZCA9IGZ1bmN0aW9uKHgpIHtcblx0ICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHJvdW5kID0gISF4LCBwYXJ0aXRpb24pIDogcm91bmQ7XG5cdCAgfTtcblx0XG5cdCAgcGFydGl0aW9uLnNpemUgPSBmdW5jdGlvbih4KSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChkeCA9ICt4WzBdLCBkeSA9ICt4WzFdLCBwYXJ0aXRpb24pIDogW2R4LCBkeV07XG5cdCAgfTtcblx0XG5cdCAgcGFydGl0aW9uLnBhZGRpbmcgPSBmdW5jdGlvbih4KSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChwYWRkaW5nID0gK3gsIHBhcnRpdGlvbikgOiBwYWRkaW5nO1xuXHQgIH07XG5cdFxuXHQgIHJldHVybiBwYXJ0aXRpb247XG5cdH07XG5cdFxuXHR2YXIga2V5UHJlZml4ID0gXCIkXCI7XG5cdHZhciBwcmVyb290ID0ge2RlcHRoOiAtMX07XG5cdHZhciBhbWJpZ3VvdXMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIGRlZmF1bHRJZChkKSB7XG5cdCAgcmV0dXJuIGQuaWQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRlZmF1bHRQYXJlbnRJZChkKSB7XG5cdCAgcmV0dXJuIGQucGFyZW50SWQ7XG5cdH1cblx0XG5cdHZhciBzdHJhdGlmeSA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBpZCA9IGRlZmF1bHRJZCxcblx0ICAgICAgcGFyZW50SWQgPSBkZWZhdWx0UGFyZW50SWQ7XG5cdFxuXHQgIGZ1bmN0aW9uIHN0cmF0aWZ5KGRhdGEpIHtcblx0ICAgIHZhciBkLFxuXHQgICAgICAgIGksXG5cdCAgICAgICAgbiA9IGRhdGEubGVuZ3RoLFxuXHQgICAgICAgIHJvb3QsXG5cdCAgICAgICAgcGFyZW50LFxuXHQgICAgICAgIG5vZGUsXG5cdCAgICAgICAgbm9kZXMgPSBuZXcgQXJyYXkobiksXG5cdCAgICAgICAgbm9kZUlkLFxuXHQgICAgICAgIG5vZGVLZXksXG5cdCAgICAgICAgbm9kZUJ5S2V5ID0ge307XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IG47ICsraSkge1xuXHQgICAgICBkID0gZGF0YVtpXSwgbm9kZSA9IG5vZGVzW2ldID0gbmV3IE5vZGUoZCk7XG5cdCAgICAgIGlmICgobm9kZUlkID0gaWQoZCwgaSwgZGF0YSkpICE9IG51bGwgJiYgKG5vZGVJZCArPSBcIlwiKSkge1xuXHQgICAgICAgIG5vZGVLZXkgPSBrZXlQcmVmaXggKyAobm9kZS5pZCA9IG5vZGVJZCk7XG5cdCAgICAgICAgbm9kZUJ5S2V5W25vZGVLZXldID0gbm9kZUtleSBpbiBub2RlQnlLZXkgPyBhbWJpZ3VvdXMgOiBub2RlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IG47ICsraSkge1xuXHQgICAgICBub2RlID0gbm9kZXNbaV0sIG5vZGVJZCA9IHBhcmVudElkKGRhdGFbaV0sIGksIGRhdGEpO1xuXHQgICAgICBpZiAobm9kZUlkID09IG51bGwgfHwgIShub2RlSWQgKz0gXCJcIikpIHtcblx0ICAgICAgICBpZiAocm9vdCkgdGhyb3cgbmV3IEVycm9yKFwibXVsdGlwbGUgcm9vdHNcIik7XG5cdCAgICAgICAgcm9vdCA9IG5vZGU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcGFyZW50ID0gbm9kZUJ5S2V5W2tleVByZWZpeCArIG5vZGVJZF07XG5cdCAgICAgICAgaWYgKCFwYXJlbnQpIHRocm93IG5ldyBFcnJvcihcIm1pc3Npbmc6IFwiICsgbm9kZUlkKTtcblx0ICAgICAgICBpZiAocGFyZW50ID09PSBhbWJpZ3VvdXMpIHRocm93IG5ldyBFcnJvcihcImFtYmlndW91czogXCIgKyBub2RlSWQpO1xuXHQgICAgICAgIGlmIChwYXJlbnQuY2hpbGRyZW4pIHBhcmVudC5jaGlsZHJlbi5wdXNoKG5vZGUpO1xuXHQgICAgICAgIGVsc2UgcGFyZW50LmNoaWxkcmVuID0gW25vZGVdO1xuXHQgICAgICAgIG5vZGUucGFyZW50ID0gcGFyZW50O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFyb290KSB0aHJvdyBuZXcgRXJyb3IoXCJubyByb290XCIpO1xuXHQgICAgcm9vdC5wYXJlbnQgPSBwcmVyb290O1xuXHQgICAgcm9vdC5lYWNoQmVmb3JlKGZ1bmN0aW9uKG5vZGUpIHsgbm9kZS5kZXB0aCA9IG5vZGUucGFyZW50LmRlcHRoICsgMTsgLS1uOyB9KS5lYWNoQmVmb3JlKGNvbXB1dGVIZWlnaHQpO1xuXHQgICAgcm9vdC5wYXJlbnQgPSBudWxsO1xuXHQgICAgaWYgKG4gPiAwKSB0aHJvdyBuZXcgRXJyb3IoXCJjeWNsZVwiKTtcblx0XG5cdCAgICByZXR1cm4gcm9vdDtcblx0ICB9XG5cdFxuXHQgIHN0cmF0aWZ5LmlkID0gZnVuY3Rpb24oeCkge1xuXHQgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoaWQgPSByZXF1aXJlZCh4KSwgc3RyYXRpZnkpIDogaWQ7XG5cdCAgfTtcblx0XG5cdCAgc3RyYXRpZnkucGFyZW50SWQgPSBmdW5jdGlvbih4KSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChwYXJlbnRJZCA9IHJlcXVpcmVkKHgpLCBzdHJhdGlmeSkgOiBwYXJlbnRJZDtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gc3RyYXRpZnk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBkZWZhdWx0U2VwYXJhdGlvbiQxKGEsIGIpIHtcblx0ICByZXR1cm4gYS5wYXJlbnQgPT09IGIucGFyZW50ID8gMSA6IDI7XG5cdH1cblx0XG5cdC8vIGZ1bmN0aW9uIHJhZGlhbFNlcGFyYXRpb24oYSwgYikge1xuXHQvLyAgIHJldHVybiAoYS5wYXJlbnQgPT09IGIucGFyZW50ID8gMSA6IDIpIC8gYS5kZXB0aDtcblx0Ly8gfVxuXHRcblx0Ly8gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHRyYXZlcnNlIHRoZSBsZWZ0IGNvbnRvdXIgb2YgYSBzdWJ0cmVlIChvclxuXHQvLyBzdWJmb3Jlc3QpLiBJdCByZXR1cm5zIHRoZSBzdWNjZXNzb3Igb2YgdiBvbiB0aGlzIGNvbnRvdXIuIFRoaXMgc3VjY2Vzc29yIGlzXG5cdC8vIGVpdGhlciBnaXZlbiBieSB0aGUgbGVmdG1vc3QgY2hpbGQgb2YgdiBvciBieSB0aGUgdGhyZWFkIG9mIHYuIFRoZSBmdW5jdGlvblxuXHQvLyByZXR1cm5zIG51bGwgaWYgYW5kIG9ubHkgaWYgdiBpcyBvbiB0aGUgaGlnaGVzdCBsZXZlbCBvZiBpdHMgc3VidHJlZS5cblx0ZnVuY3Rpb24gbmV4dExlZnQodikge1xuXHQgIHZhciBjaGlsZHJlbiA9IHYuY2hpbGRyZW47XG5cdCAgcmV0dXJuIGNoaWxkcmVuID8gY2hpbGRyZW5bMF0gOiB2LnQ7XG5cdH1cblx0XG5cdC8vIFRoaXMgZnVuY3Rpb24gd29ya3MgYW5hbG9nb3VzbHkgdG8gbmV4dExlZnQuXG5cdGZ1bmN0aW9uIG5leHRSaWdodCh2KSB7XG5cdCAgdmFyIGNoaWxkcmVuID0gdi5jaGlsZHJlbjtcblx0ICByZXR1cm4gY2hpbGRyZW4gPyBjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXSA6IHYudDtcblx0fVxuXHRcblx0Ly8gU2hpZnRzIHRoZSBjdXJyZW50IHN1YnRyZWUgcm9vdGVkIGF0IHcrLiBUaGlzIGlzIGRvbmUgYnkgaW5jcmVhc2luZ1xuXHQvLyBwcmVsaW0odyspIGFuZCBtb2QodyspIGJ5IHNoaWZ0LlxuXHRmdW5jdGlvbiBtb3ZlU3VidHJlZSh3bSwgd3AsIHNoaWZ0KSB7XG5cdCAgdmFyIGNoYW5nZSA9IHNoaWZ0IC8gKHdwLmkgLSB3bS5pKTtcblx0ICB3cC5jIC09IGNoYW5nZTtcblx0ICB3cC5zICs9IHNoaWZ0O1xuXHQgIHdtLmMgKz0gY2hhbmdlO1xuXHQgIHdwLnogKz0gc2hpZnQ7XG5cdCAgd3AubSArPSBzaGlmdDtcblx0fVxuXHRcblx0Ly8gQWxsIG90aGVyIHNoaWZ0cywgYXBwbGllZCB0byB0aGUgc21hbGxlciBzdWJ0cmVlcyBiZXR3ZWVuIHctIGFuZCB3KywgYXJlXG5cdC8vIHBlcmZvcm1lZCBieSB0aGlzIGZ1bmN0aW9uLiBUbyBwcmVwYXJlIHRoZSBzaGlmdHMsIHdlIGhhdmUgdG8gYWRqdXN0XG5cdC8vIGNoYW5nZSh3KyksIHNoaWZ0KHcrKSwgYW5kIGNoYW5nZSh3LSkuXG5cdGZ1bmN0aW9uIGV4ZWN1dGVTaGlmdHModikge1xuXHQgIHZhciBzaGlmdCA9IDAsXG5cdCAgICAgIGNoYW5nZSA9IDAsXG5cdCAgICAgIGNoaWxkcmVuID0gdi5jaGlsZHJlbixcblx0ICAgICAgaSA9IGNoaWxkcmVuLmxlbmd0aCxcblx0ICAgICAgdztcblx0ICB3aGlsZSAoLS1pID49IDApIHtcblx0ICAgIHcgPSBjaGlsZHJlbltpXTtcblx0ICAgIHcueiArPSBzaGlmdDtcblx0ICAgIHcubSArPSBzaGlmdDtcblx0ICAgIHNoaWZ0ICs9IHcucyArIChjaGFuZ2UgKz0gdy5jKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIElmIHZpLeKAmXMgYW5jZXN0b3IgaXMgYSBzaWJsaW5nIG9mIHYsIHJldHVybnMgdmkt4oCZcyBhbmNlc3Rvci4gT3RoZXJ3aXNlLFxuXHQvLyByZXR1cm5zIHRoZSBzcGVjaWZpZWQgKGRlZmF1bHQpIGFuY2VzdG9yLlxuXHRmdW5jdGlvbiBuZXh0QW5jZXN0b3IodmltLCB2LCBhbmNlc3Rvcikge1xuXHQgIHJldHVybiB2aW0uYS5wYXJlbnQgPT09IHYucGFyZW50ID8gdmltLmEgOiBhbmNlc3Rvcjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gVHJlZU5vZGUobm9kZSwgaSkge1xuXHQgIHRoaXMuXyA9IG5vZGU7XG5cdCAgdGhpcy5wYXJlbnQgPSBudWxsO1xuXHQgIHRoaXMuY2hpbGRyZW4gPSBudWxsO1xuXHQgIHRoaXMuQSA9IG51bGw7IC8vIGRlZmF1bHQgYW5jZXN0b3Jcblx0ICB0aGlzLmEgPSB0aGlzOyAvLyBhbmNlc3RvclxuXHQgIHRoaXMueiA9IDA7IC8vIHByZWxpbVxuXHQgIHRoaXMubSA9IDA7IC8vIG1vZFxuXHQgIHRoaXMuYyA9IDA7IC8vIGNoYW5nZVxuXHQgIHRoaXMucyA9IDA7IC8vIHNoaWZ0XG5cdCAgdGhpcy50ID0gbnVsbDsgLy8gdGhyZWFkXG5cdCAgdGhpcy5pID0gaTsgLy8gbnVtYmVyXG5cdH1cblx0XG5cdFRyZWVOb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTm9kZS5wcm90b3R5cGUpO1xuXHRcblx0ZnVuY3Rpb24gdHJlZVJvb3Qocm9vdCkge1xuXHQgIHZhciB0cmVlID0gbmV3IFRyZWVOb2RlKHJvb3QsIDApLFxuXHQgICAgICBub2RlLFxuXHQgICAgICBub2RlcyA9IFt0cmVlXSxcblx0ICAgICAgY2hpbGQsXG5cdCAgICAgIGNoaWxkcmVuLFxuXHQgICAgICBpLFxuXHQgICAgICBuO1xuXHRcblx0ICB3aGlsZSAobm9kZSA9IG5vZGVzLnBvcCgpKSB7XG5cdCAgICBpZiAoY2hpbGRyZW4gPSBub2RlLl8uY2hpbGRyZW4pIHtcblx0ICAgICAgbm9kZS5jaGlsZHJlbiA9IG5ldyBBcnJheShuID0gY2hpbGRyZW4ubGVuZ3RoKTtcblx0ICAgICAgZm9yIChpID0gbiAtIDE7IGkgPj0gMDsgLS1pKSB7XG5cdCAgICAgICAgbm9kZXMucHVzaChjaGlsZCA9IG5vZGUuY2hpbGRyZW5baV0gPSBuZXcgVHJlZU5vZGUoY2hpbGRyZW5baV0sIGkpKTtcblx0ICAgICAgICBjaGlsZC5wYXJlbnQgPSBub2RlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAodHJlZS5wYXJlbnQgPSBuZXcgVHJlZU5vZGUobnVsbCwgMCkpLmNoaWxkcmVuID0gW3RyZWVdO1xuXHQgIHJldHVybiB0cmVlO1xuXHR9XG5cdFxuXHQvLyBOb2RlLWxpbmsgdHJlZSBkaWFncmFtIHVzaW5nIHRoZSBSZWluZ29sZC1UaWxmb3JkIFwidGlkeVwiIGFsZ29yaXRobVxuXHR2YXIgdHJlZSA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBzZXBhcmF0aW9uID0gZGVmYXVsdFNlcGFyYXRpb24kMSxcblx0ICAgICAgZHggPSAxLFxuXHQgICAgICBkeSA9IDEsXG5cdCAgICAgIG5vZGVTaXplID0gbnVsbDtcblx0XG5cdCAgZnVuY3Rpb24gdHJlZShyb290KSB7XG5cdCAgICB2YXIgdCA9IHRyZWVSb290KHJvb3QpO1xuXHRcblx0ICAgIC8vIENvbXB1dGUgdGhlIGxheW91dCB1c2luZyBCdWNoaGVpbSBldCBhbC7igJlzIGFsZ29yaXRobS5cblx0ICAgIHQuZWFjaEFmdGVyKGZpcnN0V2FsayksIHQucGFyZW50Lm0gPSAtdC56O1xuXHQgICAgdC5lYWNoQmVmb3JlKHNlY29uZFdhbGspO1xuXHRcblx0ICAgIC8vIElmIGEgZml4ZWQgbm9kZSBzaXplIGlzIHNwZWNpZmllZCwgc2NhbGUgeCBhbmQgeS5cblx0ICAgIGlmIChub2RlU2l6ZSkgcm9vdC5lYWNoQmVmb3JlKHNpemVOb2RlKTtcblx0XG5cdCAgICAvLyBJZiBhIGZpeGVkIHRyZWUgc2l6ZSBpcyBzcGVjaWZpZWQsIHNjYWxlIHggYW5kIHkgYmFzZWQgb24gdGhlIGV4dGVudC5cblx0ICAgIC8vIENvbXB1dGUgdGhlIGxlZnQtbW9zdCwgcmlnaHQtbW9zdCwgYW5kIGRlcHRoLW1vc3Qgbm9kZXMgZm9yIGV4dGVudHMuXG5cdCAgICBlbHNlIHtcblx0ICAgICAgdmFyIGxlZnQgPSByb290LFxuXHQgICAgICAgICAgcmlnaHQgPSByb290LFxuXHQgICAgICAgICAgYm90dG9tID0gcm9vdDtcblx0ICAgICAgcm9vdC5lYWNoQmVmb3JlKGZ1bmN0aW9uKG5vZGUpIHtcblx0ICAgICAgICBpZiAobm9kZS54IDwgbGVmdC54KSBsZWZ0ID0gbm9kZTtcblx0ICAgICAgICBpZiAobm9kZS54ID4gcmlnaHQueCkgcmlnaHQgPSBub2RlO1xuXHQgICAgICAgIGlmIChub2RlLmRlcHRoID4gYm90dG9tLmRlcHRoKSBib3R0b20gPSBub2RlO1xuXHQgICAgICB9KTtcblx0ICAgICAgdmFyIHMgPSBsZWZ0ID09PSByaWdodCA/IDEgOiBzZXBhcmF0aW9uKGxlZnQsIHJpZ2h0KSAvIDIsXG5cdCAgICAgICAgICB0eCA9IHMgLSBsZWZ0LngsXG5cdCAgICAgICAgICBreCA9IGR4IC8gKHJpZ2h0LnggKyBzICsgdHgpLFxuXHQgICAgICAgICAga3kgPSBkeSAvIChib3R0b20uZGVwdGggfHwgMSk7XG5cdCAgICAgIHJvb3QuZWFjaEJlZm9yZShmdW5jdGlvbihub2RlKSB7XG5cdCAgICAgICAgbm9kZS54ID0gKG5vZGUueCArIHR4KSAqIGt4O1xuXHQgICAgICAgIG5vZGUueSA9IG5vZGUuZGVwdGggKiBreTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHJvb3Q7XG5cdCAgfVxuXHRcblx0ICAvLyBDb21wdXRlcyBhIHByZWxpbWluYXJ5IHgtY29vcmRpbmF0ZSBmb3Igdi4gQmVmb3JlIHRoYXQsIEZJUlNUIFdBTEsgaXNcblx0ICAvLyBhcHBsaWVkIHJlY3Vyc2l2ZWx5IHRvIHRoZSBjaGlsZHJlbiBvZiB2LCBhcyB3ZWxsIGFzIHRoZSBmdW5jdGlvblxuXHQgIC8vIEFQUE9SVElPTi4gQWZ0ZXIgc3BhY2luZyBvdXQgdGhlIGNoaWxkcmVuIGJ5IGNhbGxpbmcgRVhFQ1VURSBTSElGVFMsIHRoZVxuXHQgIC8vIG5vZGUgdiBpcyBwbGFjZWQgdG8gdGhlIG1pZHBvaW50IG9mIGl0cyBvdXRlcm1vc3QgY2hpbGRyZW4uXG5cdCAgZnVuY3Rpb24gZmlyc3RXYWxrKHYpIHtcblx0ICAgIHZhciBjaGlsZHJlbiA9IHYuY2hpbGRyZW4sXG5cdCAgICAgICAgc2libGluZ3MgPSB2LnBhcmVudC5jaGlsZHJlbixcblx0ICAgICAgICB3ID0gdi5pID8gc2libGluZ3Nbdi5pIC0gMV0gOiBudWxsO1xuXHQgICAgaWYgKGNoaWxkcmVuKSB7XG5cdCAgICAgIGV4ZWN1dGVTaGlmdHModik7XG5cdCAgICAgIHZhciBtaWRwb2ludCA9IChjaGlsZHJlblswXS56ICsgY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV0ueikgLyAyO1xuXHQgICAgICBpZiAodykge1xuXHQgICAgICAgIHYueiA9IHcueiArIHNlcGFyYXRpb24odi5fLCB3Ll8pO1xuXHQgICAgICAgIHYubSA9IHYueiAtIG1pZHBvaW50O1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHYueiA9IG1pZHBvaW50O1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKHcpIHtcblx0ICAgICAgdi56ID0gdy56ICsgc2VwYXJhdGlvbih2Ll8sIHcuXyk7XG5cdCAgICB9XG5cdCAgICB2LnBhcmVudC5BID0gYXBwb3J0aW9uKHYsIHcsIHYucGFyZW50LkEgfHwgc2libGluZ3NbMF0pO1xuXHQgIH1cblx0XG5cdCAgLy8gQ29tcHV0ZXMgYWxsIHJlYWwgeC1jb29yZGluYXRlcyBieSBzdW1taW5nIHVwIHRoZSBtb2RpZmllcnMgcmVjdXJzaXZlbHkuXG5cdCAgZnVuY3Rpb24gc2Vjb25kV2Fsayh2KSB7XG5cdCAgICB2Ll8ueCA9IHYueiArIHYucGFyZW50Lm07XG5cdCAgICB2Lm0gKz0gdi5wYXJlbnQubTtcblx0ICB9XG5cdFxuXHQgIC8vIFRoZSBjb3JlIG9mIHRoZSBhbGdvcml0aG0uIEhlcmUsIGEgbmV3IHN1YnRyZWUgaXMgY29tYmluZWQgd2l0aCB0aGVcblx0ICAvLyBwcmV2aW91cyBzdWJ0cmVlcy4gVGhyZWFkcyBhcmUgdXNlZCB0byB0cmF2ZXJzZSB0aGUgaW5zaWRlIGFuZCBvdXRzaWRlXG5cdCAgLy8gY29udG91cnMgb2YgdGhlIGxlZnQgYW5kIHJpZ2h0IHN1YnRyZWUgdXAgdG8gdGhlIGhpZ2hlc3QgY29tbW9uIGxldmVsLiBUaGVcblx0ICAvLyB2ZXJ0aWNlcyB1c2VkIGZvciB0aGUgdHJhdmVyc2FscyBhcmUgdmkrLCB2aS0sIHZvLSwgYW5kIHZvKywgd2hlcmUgdGhlXG5cdCAgLy8gc3VwZXJzY3JpcHQgbyBtZWFucyBvdXRzaWRlIGFuZCBpIG1lYW5zIGluc2lkZSwgdGhlIHN1YnNjcmlwdCAtIG1lYW5zIGxlZnRcblx0ICAvLyBzdWJ0cmVlIGFuZCArIG1lYW5zIHJpZ2h0IHN1YnRyZWUuIEZvciBzdW1taW5nIHVwIHRoZSBtb2RpZmllcnMgYWxvbmcgdGhlXG5cdCAgLy8gY29udG91ciwgd2UgdXNlIHJlc3BlY3RpdmUgdmFyaWFibGVzIHNpKywgc2ktLCBzby0sIGFuZCBzbysuIFdoZW5ldmVyIHR3b1xuXHQgIC8vIG5vZGVzIG9mIHRoZSBpbnNpZGUgY29udG91cnMgY29uZmxpY3QsIHdlIGNvbXB1dGUgdGhlIGxlZnQgb25lIG9mIHRoZVxuXHQgIC8vIGdyZWF0ZXN0IHVuY29tbW9uIGFuY2VzdG9ycyB1c2luZyB0aGUgZnVuY3Rpb24gQU5DRVNUT1IgYW5kIGNhbGwgTU9WRVxuXHQgIC8vIFNVQlRSRUUgdG8gc2hpZnQgdGhlIHN1YnRyZWUgYW5kIHByZXBhcmUgdGhlIHNoaWZ0cyBvZiBzbWFsbGVyIHN1YnRyZWVzLlxuXHQgIC8vIEZpbmFsbHksIHdlIGFkZCBhIG5ldyB0aHJlYWQgKGlmIG5lY2Vzc2FyeSkuXG5cdCAgZnVuY3Rpb24gYXBwb3J0aW9uKHYsIHcsIGFuY2VzdG9yKSB7XG5cdCAgICBpZiAodykge1xuXHQgICAgICB2YXIgdmlwID0gdixcblx0ICAgICAgICAgIHZvcCA9IHYsXG5cdCAgICAgICAgICB2aW0gPSB3LFxuXHQgICAgICAgICAgdm9tID0gdmlwLnBhcmVudC5jaGlsZHJlblswXSxcblx0ICAgICAgICAgIHNpcCA9IHZpcC5tLFxuXHQgICAgICAgICAgc29wID0gdm9wLm0sXG5cdCAgICAgICAgICBzaW0gPSB2aW0ubSxcblx0ICAgICAgICAgIHNvbSA9IHZvbS5tLFxuXHQgICAgICAgICAgc2hpZnQ7XG5cdCAgICAgIHdoaWxlICh2aW0gPSBuZXh0UmlnaHQodmltKSwgdmlwID0gbmV4dExlZnQodmlwKSwgdmltICYmIHZpcCkge1xuXHQgICAgICAgIHZvbSA9IG5leHRMZWZ0KHZvbSk7XG5cdCAgICAgICAgdm9wID0gbmV4dFJpZ2h0KHZvcCk7XG5cdCAgICAgICAgdm9wLmEgPSB2O1xuXHQgICAgICAgIHNoaWZ0ID0gdmltLnogKyBzaW0gLSB2aXAueiAtIHNpcCArIHNlcGFyYXRpb24odmltLl8sIHZpcC5fKTtcblx0ICAgICAgICBpZiAoc2hpZnQgPiAwKSB7XG5cdCAgICAgICAgICBtb3ZlU3VidHJlZShuZXh0QW5jZXN0b3IodmltLCB2LCBhbmNlc3RvciksIHYsIHNoaWZ0KTtcblx0ICAgICAgICAgIHNpcCArPSBzaGlmdDtcblx0ICAgICAgICAgIHNvcCArPSBzaGlmdDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2ltICs9IHZpbS5tO1xuXHQgICAgICAgIHNpcCArPSB2aXAubTtcblx0ICAgICAgICBzb20gKz0gdm9tLm07XG5cdCAgICAgICAgc29wICs9IHZvcC5tO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh2aW0gJiYgIW5leHRSaWdodCh2b3ApKSB7XG5cdCAgICAgICAgdm9wLnQgPSB2aW07XG5cdCAgICAgICAgdm9wLm0gKz0gc2ltIC0gc29wO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh2aXAgJiYgIW5leHRMZWZ0KHZvbSkpIHtcblx0ICAgICAgICB2b20udCA9IHZpcDtcblx0ICAgICAgICB2b20ubSArPSBzaXAgLSBzb207XG5cdCAgICAgICAgYW5jZXN0b3IgPSB2O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gYW5jZXN0b3I7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBzaXplTm9kZShub2RlKSB7XG5cdCAgICBub2RlLnggKj0gZHg7XG5cdCAgICBub2RlLnkgPSBub2RlLmRlcHRoICogZHk7XG5cdCAgfVxuXHRcblx0ICB0cmVlLnNlcGFyYXRpb24gPSBmdW5jdGlvbih4KSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChzZXBhcmF0aW9uID0geCwgdHJlZSkgOiBzZXBhcmF0aW9uO1xuXHQgIH07XG5cdFxuXHQgIHRyZWUuc2l6ZSA9IGZ1bmN0aW9uKHgpIHtcblx0ICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKG5vZGVTaXplID0gZmFsc2UsIGR4ID0gK3hbMF0sIGR5ID0gK3hbMV0sIHRyZWUpIDogKG5vZGVTaXplID8gbnVsbCA6IFtkeCwgZHldKTtcblx0ICB9O1xuXHRcblx0ICB0cmVlLm5vZGVTaXplID0gZnVuY3Rpb24oeCkge1xuXHQgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAobm9kZVNpemUgPSB0cnVlLCBkeCA9ICt4WzBdLCBkeSA9ICt4WzFdLCB0cmVlKSA6IChub2RlU2l6ZSA/IFtkeCwgZHldIDogbnVsbCk7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIHRyZWU7XG5cdH07XG5cdFxuXHR2YXIgdHJlZW1hcFNsaWNlID0gZnVuY3Rpb24ocGFyZW50LCB4MCwgeTAsIHgxLCB5MSkge1xuXHQgIHZhciBub2RlcyA9IHBhcmVudC5jaGlsZHJlbixcblx0ICAgICAgbm9kZSxcblx0ICAgICAgaSA9IC0xLFxuXHQgICAgICBuID0gbm9kZXMubGVuZ3RoLFxuXHQgICAgICBrID0gcGFyZW50LnZhbHVlICYmICh5MSAtIHkwKSAvIHBhcmVudC52YWx1ZTtcblx0XG5cdCAgd2hpbGUgKCsraSA8IG4pIHtcblx0ICAgIG5vZGUgPSBub2Rlc1tpXSwgbm9kZS54MCA9IHgwLCBub2RlLngxID0geDE7XG5cdCAgICBub2RlLnkwID0geTAsIG5vZGUueTEgPSB5MCArPSBub2RlLnZhbHVlICogaztcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcGhpID0gKDEgKyBNYXRoLnNxcnQoNSkpIC8gMjtcblx0XG5cdGZ1bmN0aW9uIHNxdWFyaWZ5UmF0aW8ocmF0aW8sIHBhcmVudCwgeDAsIHkwLCB4MSwgeTEpIHtcblx0ICB2YXIgcm93cyA9IFtdLFxuXHQgICAgICBub2RlcyA9IHBhcmVudC5jaGlsZHJlbixcblx0ICAgICAgcm93LFxuXHQgICAgICBub2RlVmFsdWUsXG5cdCAgICAgIGkwID0gMCxcblx0ICAgICAgaTEgPSAwLFxuXHQgICAgICBuID0gbm9kZXMubGVuZ3RoLFxuXHQgICAgICBkeCwgZHksXG5cdCAgICAgIHZhbHVlID0gcGFyZW50LnZhbHVlLFxuXHQgICAgICBzdW1WYWx1ZSxcblx0ICAgICAgbWluVmFsdWUsXG5cdCAgICAgIG1heFZhbHVlLFxuXHQgICAgICBuZXdSYXRpbyxcblx0ICAgICAgbWluUmF0aW8sXG5cdCAgICAgIGFscGhhLFxuXHQgICAgICBiZXRhO1xuXHRcblx0ICB3aGlsZSAoaTAgPCBuKSB7XG5cdCAgICBkeCA9IHgxIC0geDAsIGR5ID0geTEgLSB5MDtcblx0XG5cdCAgICAvLyBGaW5kIHRoZSBuZXh0IG5vbi1lbXB0eSBub2RlLlxuXHQgICAgZG8gc3VtVmFsdWUgPSBub2Rlc1tpMSsrXS52YWx1ZTsgd2hpbGUgKCFzdW1WYWx1ZSAmJiBpMSA8IG4pO1xuXHQgICAgbWluVmFsdWUgPSBtYXhWYWx1ZSA9IHN1bVZhbHVlO1xuXHQgICAgYWxwaGEgPSBNYXRoLm1heChkeSAvIGR4LCBkeCAvIGR5KSAvICh2YWx1ZSAqIHJhdGlvKTtcblx0ICAgIGJldGEgPSBzdW1WYWx1ZSAqIHN1bVZhbHVlICogYWxwaGE7XG5cdCAgICBtaW5SYXRpbyA9IE1hdGgubWF4KG1heFZhbHVlIC8gYmV0YSwgYmV0YSAvIG1pblZhbHVlKTtcblx0XG5cdCAgICAvLyBLZWVwIGFkZGluZyBub2RlcyB3aGlsZSB0aGUgYXNwZWN0IHJhdGlvIG1haW50YWlucyBvciBpbXByb3Zlcy5cblx0ICAgIGZvciAoOyBpMSA8IG47ICsraTEpIHtcblx0ICAgICAgc3VtVmFsdWUgKz0gbm9kZVZhbHVlID0gbm9kZXNbaTFdLnZhbHVlO1xuXHQgICAgICBpZiAobm9kZVZhbHVlIDwgbWluVmFsdWUpIG1pblZhbHVlID0gbm9kZVZhbHVlO1xuXHQgICAgICBpZiAobm9kZVZhbHVlID4gbWF4VmFsdWUpIG1heFZhbHVlID0gbm9kZVZhbHVlO1xuXHQgICAgICBiZXRhID0gc3VtVmFsdWUgKiBzdW1WYWx1ZSAqIGFscGhhO1xuXHQgICAgICBuZXdSYXRpbyA9IE1hdGgubWF4KG1heFZhbHVlIC8gYmV0YSwgYmV0YSAvIG1pblZhbHVlKTtcblx0ICAgICAgaWYgKG5ld1JhdGlvID4gbWluUmF0aW8pIHsgc3VtVmFsdWUgLT0gbm9kZVZhbHVlOyBicmVhazsgfVxuXHQgICAgICBtaW5SYXRpbyA9IG5ld1JhdGlvO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIFBvc2l0aW9uIGFuZCByZWNvcmQgdGhlIHJvdyBvcmllbnRhdGlvbi5cblx0ICAgIHJvd3MucHVzaChyb3cgPSB7dmFsdWU6IHN1bVZhbHVlLCBkaWNlOiBkeCA8IGR5LCBjaGlsZHJlbjogbm9kZXMuc2xpY2UoaTAsIGkxKX0pO1xuXHQgICAgaWYgKHJvdy5kaWNlKSB0cmVlbWFwRGljZShyb3csIHgwLCB5MCwgeDEsIHZhbHVlID8geTAgKz0gZHkgKiBzdW1WYWx1ZSAvIHZhbHVlIDogeTEpO1xuXHQgICAgZWxzZSB0cmVlbWFwU2xpY2Uocm93LCB4MCwgeTAsIHZhbHVlID8geDAgKz0gZHggKiBzdW1WYWx1ZSAvIHZhbHVlIDogeDEsIHkxKTtcblx0ICAgIHZhbHVlIC09IHN1bVZhbHVlLCBpMCA9IGkxO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHJvd3M7XG5cdH1cblx0XG5cdHZhciBzcXVhcmlmeSA9ICgoZnVuY3Rpb24gY3VzdG9tKHJhdGlvKSB7XG5cdFxuXHQgIGZ1bmN0aW9uIHNxdWFyaWZ5KHBhcmVudCwgeDAsIHkwLCB4MSwgeTEpIHtcblx0ICAgIHNxdWFyaWZ5UmF0aW8ocmF0aW8sIHBhcmVudCwgeDAsIHkwLCB4MSwgeTEpO1xuXHQgIH1cblx0XG5cdCAgc3F1YXJpZnkucmF0aW8gPSBmdW5jdGlvbih4KSB7XG5cdCAgICByZXR1cm4gY3VzdG9tKCh4ID0gK3gpID4gMSA/IHggOiAxKTtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gc3F1YXJpZnk7XG5cdH0pKShwaGkpO1xuXHRcblx0dmFyIGluZGV4JDEgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgdGlsZSA9IHNxdWFyaWZ5LFxuXHQgICAgICByb3VuZCA9IGZhbHNlLFxuXHQgICAgICBkeCA9IDEsXG5cdCAgICAgIGR5ID0gMSxcblx0ICAgICAgcGFkZGluZ1N0YWNrID0gWzBdLFxuXHQgICAgICBwYWRkaW5nSW5uZXIgPSBjb25zdGFudFplcm8sXG5cdCAgICAgIHBhZGRpbmdUb3AgPSBjb25zdGFudFplcm8sXG5cdCAgICAgIHBhZGRpbmdSaWdodCA9IGNvbnN0YW50WmVybyxcblx0ICAgICAgcGFkZGluZ0JvdHRvbSA9IGNvbnN0YW50WmVybyxcblx0ICAgICAgcGFkZGluZ0xlZnQgPSBjb25zdGFudFplcm87XG5cdFxuXHQgIGZ1bmN0aW9uIHRyZWVtYXAocm9vdCkge1xuXHQgICAgcm9vdC54MCA9XG5cdCAgICByb290LnkwID0gMDtcblx0ICAgIHJvb3QueDEgPSBkeDtcblx0ICAgIHJvb3QueTEgPSBkeTtcblx0ICAgIHJvb3QuZWFjaEJlZm9yZShwb3NpdGlvbk5vZGUpO1xuXHQgICAgcGFkZGluZ1N0YWNrID0gWzBdO1xuXHQgICAgaWYgKHJvdW5kKSByb290LmVhY2hCZWZvcmUocm91bmROb2RlKTtcblx0ICAgIHJldHVybiByb290O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcG9zaXRpb25Ob2RlKG5vZGUpIHtcblx0ICAgIHZhciBwID0gcGFkZGluZ1N0YWNrW25vZGUuZGVwdGhdLFxuXHQgICAgICAgIHgwID0gbm9kZS54MCArIHAsXG5cdCAgICAgICAgeTAgPSBub2RlLnkwICsgcCxcblx0ICAgICAgICB4MSA9IG5vZGUueDEgLSBwLFxuXHQgICAgICAgIHkxID0gbm9kZS55MSAtIHA7XG5cdCAgICBpZiAoeDEgPCB4MCkgeDAgPSB4MSA9ICh4MCArIHgxKSAvIDI7XG5cdCAgICBpZiAoeTEgPCB5MCkgeTAgPSB5MSA9ICh5MCArIHkxKSAvIDI7XG5cdCAgICBub2RlLngwID0geDA7XG5cdCAgICBub2RlLnkwID0geTA7XG5cdCAgICBub2RlLngxID0geDE7XG5cdCAgICBub2RlLnkxID0geTE7XG5cdCAgICBpZiAobm9kZS5jaGlsZHJlbikge1xuXHQgICAgICBwID0gcGFkZGluZ1N0YWNrW25vZGUuZGVwdGggKyAxXSA9IHBhZGRpbmdJbm5lcihub2RlKSAvIDI7XG5cdCAgICAgIHgwICs9IHBhZGRpbmdMZWZ0KG5vZGUpIC0gcDtcblx0ICAgICAgeTAgKz0gcGFkZGluZ1RvcChub2RlKSAtIHA7XG5cdCAgICAgIHgxIC09IHBhZGRpbmdSaWdodChub2RlKSAtIHA7XG5cdCAgICAgIHkxIC09IHBhZGRpbmdCb3R0b20obm9kZSkgLSBwO1xuXHQgICAgICBpZiAoeDEgPCB4MCkgeDAgPSB4MSA9ICh4MCArIHgxKSAvIDI7XG5cdCAgICAgIGlmICh5MSA8IHkwKSB5MCA9IHkxID0gKHkwICsgeTEpIC8gMjtcblx0ICAgICAgdGlsZShub2RlLCB4MCwgeTAsIHgxLCB5MSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB0cmVlbWFwLnJvdW5kID0gZnVuY3Rpb24oeCkge1xuXHQgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAocm91bmQgPSAhIXgsIHRyZWVtYXApIDogcm91bmQ7XG5cdCAgfTtcblx0XG5cdCAgdHJlZW1hcC5zaXplID0gZnVuY3Rpb24oeCkge1xuXHQgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoZHggPSAreFswXSwgZHkgPSAreFsxXSwgdHJlZW1hcCkgOiBbZHgsIGR5XTtcblx0ICB9O1xuXHRcblx0ICB0cmVlbWFwLnRpbGUgPSBmdW5jdGlvbih4KSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/ICh0aWxlID0gcmVxdWlyZWQoeCksIHRyZWVtYXApIDogdGlsZTtcblx0ICB9O1xuXHRcblx0ICB0cmVlbWFwLnBhZGRpbmcgPSBmdW5jdGlvbih4KSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRyZWVtYXAucGFkZGluZ0lubmVyKHgpLnBhZGRpbmdPdXRlcih4KSA6IHRyZWVtYXAucGFkZGluZ0lubmVyKCk7XG5cdCAgfTtcblx0XG5cdCAgdHJlZW1hcC5wYWRkaW5nSW5uZXIgPSBmdW5jdGlvbih4KSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChwYWRkaW5nSW5uZXIgPSB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiID8geCA6IGNvbnN0YW50KCt4KSwgdHJlZW1hcCkgOiBwYWRkaW5nSW5uZXI7XG5cdCAgfTtcblx0XG5cdCAgdHJlZW1hcC5wYWRkaW5nT3V0ZXIgPSBmdW5jdGlvbih4KSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRyZWVtYXAucGFkZGluZ1RvcCh4KS5wYWRkaW5nUmlnaHQoeCkucGFkZGluZ0JvdHRvbSh4KS5wYWRkaW5nTGVmdCh4KSA6IHRyZWVtYXAucGFkZGluZ1RvcCgpO1xuXHQgIH07XG5cdFxuXHQgIHRyZWVtYXAucGFkZGluZ1RvcCA9IGZ1bmN0aW9uKHgpIHtcblx0ICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHBhZGRpbmdUb3AgPSB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiID8geCA6IGNvbnN0YW50KCt4KSwgdHJlZW1hcCkgOiBwYWRkaW5nVG9wO1xuXHQgIH07XG5cdFxuXHQgIHRyZWVtYXAucGFkZGluZ1JpZ2h0ID0gZnVuY3Rpb24oeCkge1xuXHQgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAocGFkZGluZ1JpZ2h0ID0gdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIiA/IHggOiBjb25zdGFudCgreCksIHRyZWVtYXApIDogcGFkZGluZ1JpZ2h0O1xuXHQgIH07XG5cdFxuXHQgIHRyZWVtYXAucGFkZGluZ0JvdHRvbSA9IGZ1bmN0aW9uKHgpIHtcblx0ICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHBhZGRpbmdCb3R0b20gPSB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiID8geCA6IGNvbnN0YW50KCt4KSwgdHJlZW1hcCkgOiBwYWRkaW5nQm90dG9tO1xuXHQgIH07XG5cdFxuXHQgIHRyZWVtYXAucGFkZGluZ0xlZnQgPSBmdW5jdGlvbih4KSB7XG5cdCAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChwYWRkaW5nTGVmdCA9IHR5cGVvZiB4ID09PSBcImZ1bmN0aW9uXCIgPyB4IDogY29uc3RhbnQoK3gpLCB0cmVlbWFwKSA6IHBhZGRpbmdMZWZ0O1xuXHQgIH07XG5cdFxuXHQgIHJldHVybiB0cmVlbWFwO1xuXHR9O1xuXHRcblx0dmFyIGJpbmFyeSA9IGZ1bmN0aW9uKHBhcmVudCwgeDAsIHkwLCB4MSwgeTEpIHtcblx0ICB2YXIgbm9kZXMgPSBwYXJlbnQuY2hpbGRyZW4sXG5cdCAgICAgIGksIG4gPSBub2Rlcy5sZW5ndGgsXG5cdCAgICAgIHN1bSwgc3VtcyA9IG5ldyBBcnJheShuICsgMSk7XG5cdFxuXHQgIGZvciAoc3Vtc1swXSA9IHN1bSA9IGkgPSAwOyBpIDwgbjsgKytpKSB7XG5cdCAgICBzdW1zW2kgKyAxXSA9IHN1bSArPSBub2Rlc1tpXS52YWx1ZTtcblx0ICB9XG5cdFxuXHQgIHBhcnRpdGlvbigwLCBuLCBwYXJlbnQudmFsdWUsIHgwLCB5MCwgeDEsIHkxKTtcblx0XG5cdCAgZnVuY3Rpb24gcGFydGl0aW9uKGksIGosIHZhbHVlLCB4MCwgeTAsIHgxLCB5MSkge1xuXHQgICAgaWYgKGkgPj0gaiAtIDEpIHtcblx0ICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcblx0ICAgICAgbm9kZS54MCA9IHgwLCBub2RlLnkwID0geTA7XG5cdCAgICAgIG5vZGUueDEgPSB4MSwgbm9kZS55MSA9IHkxO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHZhbHVlT2Zmc2V0ID0gc3Vtc1tpXSxcblx0ICAgICAgICB2YWx1ZVRhcmdldCA9ICh2YWx1ZSAvIDIpICsgdmFsdWVPZmZzZXQsXG5cdCAgICAgICAgayA9IGkgKyAxLFxuXHQgICAgICAgIGhpID0gaiAtIDE7XG5cdFxuXHQgICAgd2hpbGUgKGsgPCBoaSkge1xuXHQgICAgICB2YXIgbWlkID0gayArIGhpID4+PiAxO1xuXHQgICAgICBpZiAoc3Vtc1ttaWRdIDwgdmFsdWVUYXJnZXQpIGsgPSBtaWQgKyAxO1xuXHQgICAgICBlbHNlIGhpID0gbWlkO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICgodmFsdWVUYXJnZXQgLSBzdW1zW2sgLSAxXSkgPCAoc3Vtc1trXSAtIHZhbHVlVGFyZ2V0KSAmJiBpICsgMSA8IGspIC0taztcblx0XG5cdCAgICB2YXIgdmFsdWVMZWZ0ID0gc3Vtc1trXSAtIHZhbHVlT2Zmc2V0LFxuXHQgICAgICAgIHZhbHVlUmlnaHQgPSB2YWx1ZSAtIHZhbHVlTGVmdDtcblx0XG5cdCAgICBpZiAoKHgxIC0geDApID4gKHkxIC0geTApKSB7XG5cdCAgICAgIHZhciB4ayA9ICh4MCAqIHZhbHVlUmlnaHQgKyB4MSAqIHZhbHVlTGVmdCkgLyB2YWx1ZTtcblx0ICAgICAgcGFydGl0aW9uKGksIGssIHZhbHVlTGVmdCwgeDAsIHkwLCB4aywgeTEpO1xuXHQgICAgICBwYXJ0aXRpb24oaywgaiwgdmFsdWVSaWdodCwgeGssIHkwLCB4MSwgeTEpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIHlrID0gKHkwICogdmFsdWVSaWdodCArIHkxICogdmFsdWVMZWZ0KSAvIHZhbHVlO1xuXHQgICAgICBwYXJ0aXRpb24oaSwgaywgdmFsdWVMZWZ0LCB4MCwgeTAsIHgxLCB5ayk7XG5cdCAgICAgIHBhcnRpdGlvbihrLCBqLCB2YWx1ZVJpZ2h0LCB4MCwgeWssIHgxLCB5MSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHNsaWNlRGljZSA9IGZ1bmN0aW9uKHBhcmVudCwgeDAsIHkwLCB4MSwgeTEpIHtcblx0ICAocGFyZW50LmRlcHRoICYgMSA/IHRyZWVtYXBTbGljZSA6IHRyZWVtYXBEaWNlKShwYXJlbnQsIHgwLCB5MCwgeDEsIHkxKTtcblx0fTtcblx0XG5cdHZhciByZXNxdWFyaWZ5ID0gKChmdW5jdGlvbiBjdXN0b20ocmF0aW8pIHtcblx0XG5cdCAgZnVuY3Rpb24gcmVzcXVhcmlmeShwYXJlbnQsIHgwLCB5MCwgeDEsIHkxKSB7XG5cdCAgICBpZiAoKHJvd3MgPSBwYXJlbnQuX3NxdWFyaWZ5KSAmJiAocm93cy5yYXRpbyA9PT0gcmF0aW8pKSB7XG5cdCAgICAgIHZhciByb3dzLFxuXHQgICAgICAgICAgcm93LFxuXHQgICAgICAgICAgbm9kZXMsXG5cdCAgICAgICAgICBpLFxuXHQgICAgICAgICAgaiA9IC0xLFxuXHQgICAgICAgICAgbixcblx0ICAgICAgICAgIG0gPSByb3dzLmxlbmd0aCxcblx0ICAgICAgICAgIHZhbHVlID0gcGFyZW50LnZhbHVlO1xuXHRcblx0ICAgICAgd2hpbGUgKCsraiA8IG0pIHtcblx0ICAgICAgICByb3cgPSByb3dzW2pdLCBub2RlcyA9IHJvdy5jaGlsZHJlbjtcblx0ICAgICAgICBmb3IgKGkgPSByb3cudmFsdWUgPSAwLCBuID0gbm9kZXMubGVuZ3RoOyBpIDwgbjsgKytpKSByb3cudmFsdWUgKz0gbm9kZXNbaV0udmFsdWU7XG5cdCAgICAgICAgaWYgKHJvdy5kaWNlKSB0cmVlbWFwRGljZShyb3csIHgwLCB5MCwgeDEsIHkwICs9ICh5MSAtIHkwKSAqIHJvdy52YWx1ZSAvIHZhbHVlKTtcblx0ICAgICAgICBlbHNlIHRyZWVtYXBTbGljZShyb3csIHgwLCB5MCwgeDAgKz0gKHgxIC0geDApICogcm93LnZhbHVlIC8gdmFsdWUsIHkxKTtcblx0ICAgICAgICB2YWx1ZSAtPSByb3cudmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHBhcmVudC5fc3F1YXJpZnkgPSByb3dzID0gc3F1YXJpZnlSYXRpbyhyYXRpbywgcGFyZW50LCB4MCwgeTAsIHgxLCB5MSk7XG5cdCAgICAgIHJvd3MucmF0aW8gPSByYXRpbztcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJlc3F1YXJpZnkucmF0aW8gPSBmdW5jdGlvbih4KSB7XG5cdCAgICByZXR1cm4gY3VzdG9tKCh4ID0gK3gpID4gMSA/IHggOiAxKTtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gcmVzcXVhcmlmeTtcblx0fSkpKHBoaSk7XG5cdFxuXHRleHBvcnRzLmNsdXN0ZXIgPSBjbHVzdGVyO1xuXHRleHBvcnRzLmhpZXJhcmNoeSA9IGhpZXJhcmNoeTtcblx0ZXhwb3J0cy5wYWNrID0gaW5kZXg7XG5cdGV4cG9ydHMucGFja1NpYmxpbmdzID0gc2libGluZ3M7XG5cdGV4cG9ydHMucGFja0VuY2xvc2UgPSBlbmNsb3NlO1xuXHRleHBvcnRzLnBhcnRpdGlvbiA9IHBhcnRpdGlvbjtcblx0ZXhwb3J0cy5zdHJhdGlmeSA9IHN0cmF0aWZ5O1xuXHRleHBvcnRzLnRyZWUgPSB0cmVlO1xuXHRleHBvcnRzLnRyZWVtYXAgPSBpbmRleCQxO1xuXHRleHBvcnRzLnRyZWVtYXBCaW5hcnkgPSBiaW5hcnk7XG5cdGV4cG9ydHMudHJlZW1hcERpY2UgPSB0cmVlbWFwRGljZTtcblx0ZXhwb3J0cy50cmVlbWFwU2xpY2UgPSB0cmVlbWFwU2xpY2U7XG5cdGV4cG9ydHMudHJlZW1hcFNsaWNlRGljZSA9IHNsaWNlRGljZTtcblx0ZXhwb3J0cy50cmVlbWFwU3F1YXJpZnkgPSBzcXVhcmlmeTtcblx0ZXhwb3J0cy50cmVlbWFwUmVzcXVhcmlmeSA9IHJlc3F1YXJpZnk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRcblx0fSkpKTtcblxuXG4vKioqLyB9KSxcbi8qIDE4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdGZ1bmN0aW9uIGNyZWF0ZVN0YXRlVmlzTm9kZShzdGF0ZSkge1xyXG5cdCAgICB2YXIgbm9kZSA9IE9iamVjdC5jcmVhdGUoc3RhdGUpO1xyXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobm9kZSwgXCJ2aXNpYmxlXCIsIHtcclxuXHQgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgICAgIGlmICh0aGlzLmVudGVyZWQpXHJcblx0ICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cdCAgICAgICAgICAgIHZhciBhbmNlc3RvckNvbGxhcHNlZCA9IHRoaXMuX3BhcmVudCAmJiAodGhpcy5fcGFyZW50LmNvbGxhcHNlZCB8fCAhdGhpcy5fcGFyZW50LnZpc2libGUpO1xyXG5cdCAgICAgICAgICAgIHJldHVybiAhYW5jZXN0b3JDb2xsYXBzZWQ7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH0pO1xyXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobm9kZSwgXCJjaGlsZHJlblwiLCB7XHJcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uIChjaGlsZCkgeyByZXR1cm4gY2hpbGQudmlzaWJsZTsgfSk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH0pO1xyXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobm9kZSwgXCJ0b3RhbERlc2NlbmRlbnRzXCIsIHtcclxuXHQgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbi5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY2hpbGQpIHsgcmV0dXJuIGFjYyArIGNoaWxkLnRvdGFsRGVzY2VuZGVudHM7IH0sIHRoaXMuX2NoaWxkcmVuLmxlbmd0aCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH0pO1xyXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobm9kZSwgXCJjb2xsYXBzZWRcIiwge1xyXG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgcmV0dXJuICF0aGlzLmVudGVyZWQgJiYgdGhpcy5fY29sbGFwc2VkICYmIHRoaXMuX2NoaWxkcmVuLmxlbmd0aDtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfSk7XHJcblx0ICAgIHJldHVybiBub2RlO1xyXG5cdH1cclxuXHRleHBvcnRzLmNyZWF0ZVN0YXRlVmlzTm9kZSA9IGNyZWF0ZVN0YXRlVmlzTm9kZTtcclxuXG5cbi8qKiovIH0pLFxuLyogMTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUJtSkxSMFFBL3dEL0FQK2d2YWVUQUFBQWVrbEVRVlE0amUyUHdRbUFNQkFFcHd1Skxma1NKUSt0eEJLc1QwUnN4UWo2dVVBTVhrVHg0Y09GKzJSMzlpN3c2MVgxd0FDWVJNWklwbytORHRoa0pxWEVpT2R6WFdpV2dFdVV4TEFUNXFBYVdJTFFET1JBQm96Qit3cTAyaC90eVNYeFpxdkIyaVhoNXVZSzFrcHV3VjZWbER5Q3ZRcVpEMnNIVG4weGRPMEE5RDRBQUFBQVNVVk9SSzVDWUlJPVwiXG5cbi8qKiovIH0pLFxuLyogMjAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcblx0ICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcblx0ICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcblx0ICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG5cdCAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcblx0ICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcblx0ICAgIH07XHJcblx0fSkoKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0dmFyIHByZWFjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcclxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcclxuXHR2YXIgdHJhbnNpdGlvblZpZXdfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xyXG5cdHZhciBlYXNpbmdfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xyXG5cdHZhciBhbmltYXRlcGF0aF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XHJcblx0LyoqXHJcblx0ICogVGhpcyBvdXRlciBjb21wb25lbnQgbWFuYWdlcyB0aGUgbGlzdCBvZiBhbGwgdHJhbnNpdGlvbnMgKGhpc3RvcnkpLCBhbmQgcHJvdmlkZXMgYSBmaXhlZCwgc2Nyb2xsaW5nIHZpZXdwb3J0LlxyXG5cdCAqIEl0IGF0dGFjaGVzIGhvb2tzIGZvciBsaWZlY3ljbGUgZXZlbnRzIGFuZCBkZWNvcmF0ZXMgdGhlIHRyYW5zaXRpb24gd2l0aCBhIGRlc2NyaXB0aXZlIG1lc3NhZ2UuXHJcblx0ICovXHJcblx0dmFyIFRyYW5zaXRpb25WaXN1YWxpemVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuXHQgICAgX19leHRlbmRzKFRyYW5zaXRpb25WaXN1YWxpemVyLCBfc3VwZXIpO1xyXG5cdCAgICBmdW5jdGlvbiBUcmFuc2l0aW9uVmlzdWFsaXplcigpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG5cdCAgICAgICAgX3RoaXMuZGVyZWdpc3RlckZucyA9IFtdO1xyXG5cdCAgICAgICAgX3RoaXMuc3RhdGUgPSB7XHJcblx0ICAgICAgICAgICAgdHJhbnNpdGlvbnM6IFtdLFxyXG5cdCAgICAgICAgICAgIHBvaW50ZXJFdmVudHM6IFwiYXV0b1wiLFxyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIF90aGlzLmNhbmNlbFByZXZpb3VzQW5pbSA9IG51bGw7XHJcblx0ICAgICAgICAvKipcclxuXHQgICAgICAgICAqIERpc2FibGUgcG9pbnRlciBldmVudHMgd2hlbiB0aGUgbW91c2UgaXMgYWJvdmUgdGhlIHRpbWVsaW5lXHJcblx0ICAgICAgICAgKlxyXG5cdCAgICAgICAgICogVGhpcyBhbGxvd3MgY2xpY2tzIHRvIHBhc3MgdGhyb3VnaCB0aGUgb3V0ZXIgZGl2IHRvIHRoZSB1c2VyJ3MgYXBwIGNvbXBvbmVudHNcclxuXHQgICAgICAgICAqIGV2ZW4gd2hlbiBhIHRyYW5zaXRpb252aWV3IGRldGFpbHMgYm94IGlzIG9wZW4gYW5kIHBpbm5lZC5cclxuXHQgICAgICAgICAqXHJcblx0ICAgICAgICAgKiBFbmFibGUgcG9pbnRlciBldmVudHMgd2hlbiBtb3VzZSBpcyBpbnNpZGUgdGhlIHRpbWVsaW5lIHRvIGFsbG93IGhvcml6b250YWwgc2Nyb2xsICYgc2Nyb2xsIHdoZWVsXHJcblx0ICAgICAgICAgKi9cclxuXHQgICAgICAgIF90aGlzLm9uTW91c2VNb3ZlID0gZnVuY3Rpb24gKGV2dCkge1xyXG5cdCAgICAgICAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSBNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgMCk7XHJcblx0ICAgICAgICAgICAgdmFyIHBvaW50ZXJFdmVudHMgPSAod2luZG93SGVpZ2h0IC0gZXZ0LmNsaWVudFkgPCA2NSA/IFwiYXV0b1wiIDogXCJub25lXCIpO1xyXG5cdCAgICAgICAgICAgIGlmIChfdGhpcy5zdGF0ZS5wb2ludGVyRXZlbnRzICE9IHBvaW50ZXJFdmVudHMpIHtcclxuXHQgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBwb2ludGVyRXZlbnRzOiBwb2ludGVyRXZlbnRzIH0pO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICByZXR1cm4gX3RoaXM7XHJcblx0ICAgIH1cclxuXHQgICAgLyoqXHJcblx0ICAgICAqIENyZWF0ZXMgYSBuZXcgVHJhbnNpdGlvblZpc3VhbGl6ZXIgYW5kIGFkZHMgaXQgdG8gdGhlIGRvY3VtZW50LlxyXG5cdCAgICAgKlxyXG5cdCAgICAgKiBAcGFyYW0gcm91dGVyIHRoZSBVSVJvdXRlciBvYmplY3RcclxuXHQgICAgICogQHBhcmFtIGVsZW1lbnQgKG9wdGlvbmFsKSB0aGUgZWxlbWVudCB3aGVyZSB0aGUgVHJhbnNpdGlvblZpc3VhbGl6ZXIgc2hvdWxkIGJlIHBsYWNlZC5cclxuXHQgICAgICogICAgICAgICAgICAgICAgSWYgbm8gZWxlbWVudCBpcyBwYXNzZWQsIGFuIGVsZW1lbnQgd2lsbCBiZSBjcmVhdGVkIGluIHRoZSBib2R5LlxyXG5cdCAgICAgKiBAcGFyYW0gcHJvcHMgbWF4aW11bSB0cmFuc2l0aW9ucyBkZWZhdWx0OiB7IG1heGltdW1UcmFuc2l0aW9uczogMTUgfVxyXG5cdCAgICAgKlxyXG5cdCAgICAgKlxyXG5cdCAgICAgKiAjIEFuZ3VsYXIgMSArIFVJLVJvdXRlciAoMS4wLjAtYmV0YS4yIGFuZCBoaWdoZXIpOlxyXG5cdCAgICAgKlxyXG5cdCAgICAgKiBJbmplY3QgdGhlIHJvdXRlciAoYCR1aVJvdXRlcmApIGluIGEgcnVuIGJsb2NrLCB0aGVuIGNhbGwgVHJhbnNpdGlvblZpc3VhbGl6ZXIuY3JlYXRlKCk7XHJcblx0ICAgICAqXHJcblx0ICAgICAqIGBgYFxyXG5cdCAgICAgKiBhcHAucnVuKGZ1bmN0aW9uKCR1aVJvdXRlcikge1xyXG5cdCAgICAgKiAgIFRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZSgkdWlSb3V0ZXIpO1xyXG5cdCAgICAgKiB9KTtcclxuXHQgICAgICogYGBgXHJcblx0ICAgICAqXHJcblx0ICAgICAqICMgQW5ndWxhciAxICsgVUktUm91dGVyIDEuMC4wLWFscGhhLjEgdGhyb3VnaCAxLjAuMC1iZXRhLjE6XHJcblx0ICAgICAqXHJcblx0ICAgICAqIEluamVjdCB0aGUgcm91dGVyIChgbmcxVUlSb3V0ZXJgKSBpbiBhIHJ1biBibG9jaywgdGhlbiBjYWxsIFRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZSgpO1xyXG5cdCAgICAgKlxyXG5cdCAgICAgKiBgYGBcclxuXHQgICAgICogYXBwLnJ1bihmdW5jdGlvbihuZzFVSVJvdXRlcikge1xyXG5cdCAgICAgKiAgIFRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZShuZzFVSVJvdXRlcik7XHJcblx0ICAgICAqIH0pO1xyXG5cdCAgICAgKiBgYGBcclxuXHQgICAgICpcclxuXHQgICAgICogQW5ndWxhciAyOlxyXG5cdCAgICAgKlxyXG5cdCAgICAgKiBDYWxsIFRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZSgpIGZyb20geW91ciBVSVJvdXRlckNvbmZpZ1xyXG5cdCAgICAgKlxyXG5cdCAgICAgKiBgYGBcclxuXHQgICAgICogZXhwb3J0IGNsYXNzIE15VUlSb3V0ZXJDb25maWcgZXh0ZW5kcyBVSVJvdXRlckNvbmZpZyB7XHJcblx0ICAgICAqICAgY29uZmlndXJlKHJvdXRlcjogVUlSb3V0ZXIpIHtcclxuXHQgICAgICogICAgIFRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZShyb3V0ZXIpO1xyXG5cdCAgICAgKiAgIH1cclxuXHQgICAgICogfVxyXG5cdCAgICAgKiBgYGBcclxuXHQgICAgICpcclxuXHQgICAgICogUmVhY3Q6XHJcblx0ICAgICAqXHJcblx0ICAgICAqIENhbGwgVHJhbnNpdGlvblZpc3VhbGl6ZXIuY3JlYXRlKCkgZnJvbSB5b3VyIGJvb3RzdHJhcFxyXG5cdCAgICAgKlxyXG5cdCAgICAgKiBgYGBcclxuXHQgICAgICogbGV0IHJvdXRlciA9IG5ldyBVSVJvdXRlclJlYWN0KCk7XHJcblx0ICAgICAqIFRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZShyb3V0ZXIpO1xyXG5cdCAgICAgKiByb3V0ZXIuc3RhcnQoKTtcclxuXHQgICAgICogYGBgXHJcblx0ICAgICAqXHJcblx0ICAgICAqIEByZXR1cm4gdGhlIGVsZW1lbnQgdGhhdCB3YXMgYm9vdHN0cmFwcGVkLlxyXG5cdCAgICAgKiAgICAgICAgIFlvdSBjYW4gZGVzdHJveSB0aGUgY29tcG9uZW50IHVzaW5nOlxyXG5cdCAgICAgKiAgICAgICAgIFtSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RvcC1sZXZlbC1hcGkuaHRtbCNyZWFjdGRvbS51bm1vdW50Y29tcG9uZW50YXRub2RlKVxyXG5cdCAgICAgKi9cclxuXHQgICAgVHJhbnNpdGlvblZpc3VhbGl6ZXIuY3JlYXRlID0gZnVuY3Rpb24gKHJvdXRlciwgZWxlbWVudCwgcHJvcHMpIHtcclxuXHQgICAgICAgIGlmIChwcm9wcyA9PT0gdm9pZCAwKSB7IHByb3BzID0ge307IH1cclxuXHQgICAgICAgIGlmICghZWxlbWVudCkge1xyXG5cdCAgICAgICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdCAgICAgICAgICAgIGVsZW1lbnQuaWQgPSBcInVpclRyYW5zaXRpb25WaXN1YWxpemVyXCI7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB2YXIgaW5pdGlhbFByb3BzID0gT2JqZWN0LmFzc2lnbih7fSwgcHJvcHMsIHsgcm91dGVyOiByb3V0ZXIgfSk7XHJcblx0ICAgICAgICB2YXIgX3JlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG5cdCAgICAgICAgICAgIHByZWFjdF8xLnJlbmRlcihwcmVhY3RfMS5oKFRyYW5zaXRpb25WaXN1YWxpemVyLCBpbml0aWFsUHJvcHMpLCBlbGVtZW50KTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJyB8fCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XHJcblx0ICAgICAgICAgICAgX3JlbmRlcigpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxzZSB7XHJcblx0ICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIF9yZW5kZXIsIGZhbHNlKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG5cdCAgICB9O1xyXG5cdCAgICBUcmFuc2l0aW9uVmlzdWFsaXplci5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgdmFyIGRlcmVnID0gdGhpcy5wcm9wcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2Uub25CZWZvcmUoe30sIGZ1bmN0aW9uICh0cmFucykge1xyXG5cdCAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgdHJhbnNpdGlvbnM6IF90aGlzLnN0YXRlLnRyYW5zaXRpb25zLmNvbmNhdCh0cmFucykgfSk7XHJcblx0ICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gNzUwLCBlbCA9IF90aGlzLl9kaXYuY2hpbGRyZW5bMF07XHJcblx0ICAgICAgICAgICAgdmFyIHNjcm9sbFRvUmlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgICAgIHZhciB0YXJnZXRTY3JvbGxYID0gZWwuc2Nyb2xsV2lkdGggLSBlbC5jbGllbnRXaWR0aCArIDIwMDtcclxuXHQgICAgICAgICAgICAgICAgX3RoaXMuY2FuY2VsUHJldmlvdXNBbmltICYmIF90aGlzLmNhbmNlbFByZXZpb3VzQW5pbSgpO1xyXG5cdCAgICAgICAgICAgICAgICB2YXIgbmV3VmFsID0gW3RhcmdldFNjcm9sbFhdLCBvbGRWYWwgPSBbZWwuc2Nyb2xsTGVmdF07XHJcblx0ICAgICAgICAgICAgICAgIHZhciBtYXggPSBfdGhpcy5wcm9wcy5tYXhpbXVtVHJhbnNpdGlvbnM7XHJcblx0ICAgICAgICAgICAgICAgIHZhciBlbmZvcmNlTWF4ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBfdGhpcy5zdGF0ZS50cmFuc2l0aW9ucztcclxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChsaXN0Lmxlbmd0aCA8PSBtYXgpXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyB0cmFuc2l0aW9uczogbGlzdC5zbGljZShsaXN0Lmxlbmd0aCAtIG1heCkgfSk7XHJcblx0ICAgICAgICAgICAgICAgIH07XHJcblx0ICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uICh2YWxzKSB7IHJldHVybiBlbC5zY3JvbGxMZWZ0ID0gdmFsc1swXTsgfTtcclxuXHQgICAgICAgICAgICAgICAgX3RoaXMuY2FuY2VsUHJldmlvdXNBbmltID0gYW5pbWF0ZXBhdGhfMS5hbmltYXRlUGF0aChuZXdWYWwsIG9sZFZhbCwgZHVyYXRpb24sIGNhbGxiYWNrLCBlbmZvcmNlTWF4LCBlYXNpbmdfMS5lYXNpbmcuZWFzZUluT3V0Q3ViaWMpO1xyXG5cdCAgICAgICAgICAgIH07XHJcblx0ICAgICAgICAgICAgc2V0VGltZW91dChzY3JvbGxUb1JpZ2h0LCAyNSk7XHJcblx0ICAgICAgICB9KTtcclxuXHQgICAgICAgIHRoaXMuZGVyZWdpc3RlckZucy5wdXNoKGRlcmVnKTtcclxuXHQgICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm9uTW91c2VNb3ZlKTtcclxuXHQgICAgICAgIHRoaXMuZGVyZWdpc3RlckZucy5wdXNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBfdGhpcy5vbk1vdXNlTW92ZSk7IH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBUcmFuc2l0aW9uVmlzdWFsaXplci5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB3aGlsZSAodGhpcy5kZXJlZ2lzdGVyRm5zLmxlbmd0aClcclxuXHQgICAgICAgICAgICB0aGlzLmRlcmVnaXN0ZXJGbnMucG9wKCkoKTtcclxuXHQgICAgfTtcclxuXHQgICAgVHJhbnNpdGlvblZpc3VhbGl6ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICB2YXIgcG9pbnRlckV2ZW50cyA9IHRoaXMuc3RhdGUucG9pbnRlckV2ZW50cztcclxuXHQgICAgICAgIHJldHVybiAocHJlYWN0XzEuaChcImRpdlwiLCB7IHJlZjogZnVuY3Rpb24gKGVsKSB7IHJldHVybiBfdGhpcy5fZGl2ID0gZWw7IH0gfSxcclxuXHQgICAgICAgICAgICBwcmVhY3RfMS5oKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRyYW5zaXRpb25IaXN0b3J5XCIsIHN0eWxlOiB7IHBvaW50ZXJFdmVudHM6IHBvaW50ZXJFdmVudHMgfSB9LFxyXG5cdCAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnRyYW5zaXRpb25zLm1hcChmdW5jdGlvbiAodHJhbnMpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVhY3RfMS5oKFwiZGl2XCIsIHsga2V5OiB0cmFucy4kaWQgfSxcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKHRyYW5zaXRpb25WaWV3XzEuVHJhbnNpdGlvblZpZXcsIHsgdHJhbnNpdGlvbjogdHJhbnMgfSksXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IHN0eWxlOiB7IG1pbldpZHRoOiBcIjE4ZW1cIiwgYm9yZGVyOiBcIjFweCBzb2xpZCB0cmFuc3BhcmVudFwiIH0gfSkpO1xyXG5cdCAgICAgICAgICAgICAgICB9KSxcclxuXHQgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IHN0eWxlOiB7IHdpZHRoOiBcIjIwMHB4XCIsIGhlaWdodDogXCIxcHhcIiB9IH0pKSkpO1xyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gVHJhbnNpdGlvblZpc3VhbGl6ZXI7XHJcblx0fShwcmVhY3RfMS5Db21wb25lbnQpKTtcclxuXHRUcmFuc2l0aW9uVmlzdWFsaXplci5kZWZhdWx0UHJvcHMgPSB7XHJcblx0ICAgIHJvdXRlcjogbnVsbCxcclxuXHQgICAgbWF4aW11bVRyYW5zaXRpb25zOiAxNVxyXG5cdH07XHJcblx0ZXhwb3J0cy5UcmFuc2l0aW9uVmlzdWFsaXplciA9IFRyYW5zaXRpb25WaXN1YWxpemVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNykoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/c291cmNlTWFwIS4vdHJhbnNpdGlvblZpc3VhbGl6ZXIuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzP3NvdXJjZU1hcCEuL3RyYW5zaXRpb25WaXN1YWxpemVyLmNzc1wiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAyMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNikoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIudHJhbnNpdGlvbkhpc3Rvcnl7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmZsZXgtZW5kO3Bvc2l0aW9uOmZpeGVkO2xlZnQ6MDtib3R0b206MDtyaWdodDowO3BhZGRpbmc6MCAxZW07b3ZlcmZsb3cteDpzY3JvbGw7ei1pbmRleDoyO3BvaW50ZXItZXZlbnRzOm5vbmV9LnRyYW5zaXRpb25IaXN0b3J5ICp7cG9pbnRlci1ldmVudHM6YWxsO2ZsZXg6MCAwIGF1dG99LmZ1bGxTY3JlZW4gLnRyYW5zaXRpb25IaXN0b3J5e3RvcDowfS50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5e3Bvc2l0aW9uOnJlbGF0aXZlO3RleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6MTJweCAzMHB4O21hcmdpbi1ib3R0b206NnB4O21hcmdpbi1yaWdodDo2cHg7Y29sb3I6IzAwMDtjdXJzb3I6cG9pbnRlcn0uaGlzdG9yeUVudHJ5OmFmdGVyLC50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5OmJlZm9yZXtjb250ZW50OlxcXCJcXFwiO3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQ6I2E5YTlhOTtsZWZ0OjA7aGVpZ2h0OjUwLjIlO3dpZHRoOjEwMCU7Ym9yZGVyOjFweCBzb2xpZCAjMDAwO2JveC1zaXppbmc6Ym9yZGVyLWJveDt6LWluZGV4Oi0xfS50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5OmJlZm9yZXt0b3A6MDtib3JkZXItYm90dG9tOjA7LXdlYmtpdC10cmFuc2Zvcm06c2tldyg0MGRlZywwZGVnKTt0cmFuc2Zvcm06c2tldyg0MGRlZywwZGVnKX0udHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeTphZnRlcntib3R0b206MDtib3JkZXItdG9wOjA7LXdlYmtpdC10cmFuc2Zvcm06c2tldygtNDBkZWcsMGRlZyk7dHJhbnNmb3JtOnNrZXcoLTQwZGVnLDBkZWcpfS5oaXN0b3J5RW50cnkgLnN1bW1hcnl7Y29sb3I6I2ZmZjt3aGl0ZS1zcGFjZTpub3dyYXA7Zm9udC1zaXplOnNtYWxsfS5oaXN0b3J5RW50cnkgLnN1bW1hcnkgLnRyYW5zaWR7cG9zaXRpb246YWJzb2x1dGU7dG9wOi4xZW07bGVmdDouODVlbTtmb250LXNpemU6c21hbGxlcn0uaGlzdG9yeUVudHJ5IC5zdW1tYXJ5IC5zdGF0dXN7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOi4xZW07bGVmdDouODVlbTtmb250LXNpemU6c21hbGxlcn0uaGlzdG9yeUVudHJ5IC5zdW1tYXJ5IC50cmFuc25hbWV7Zm9udC13ZWlnaHQ6NzAwO2Rpc3BsYXk6ZmxleDtmbGV4LWZsb3c6cm93IG5vd3JhcDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0uaGlzdG9yeUVudHJ5OmFmdGVyLC50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5OmJlZm9yZXtiYWNrZ3JvdW5kOiM3MzczNzN9Lmhpc3RvcnlFbnRyeTpob3ZlcjphZnRlciwudHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeTpob3ZlcjpiZWZvcmV7YmFja2dyb3VuZDojYTZhNmE2fS5oaXN0b3J5RW50cnkuc3VjY2VzczphZnRlciwudHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeS5zdWNjZXNzOmJlZm9yZXtiYWNrZ3JvdW5kOiM0NTgwM2J9Lmhpc3RvcnlFbnRyeS5zdWNjZXNzOmhvdmVyOmFmdGVyLC50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5LnN1Y2Nlc3M6aG92ZXI6YmVmb3Jle2JhY2tncm91bmQ6IzE5YTYwMH0uaGlzdG9yeUVudHJ5LmVycm9yOmFmdGVyLC50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5LmVycm9yOmJlZm9yZXtiYWNrZ3JvdW5kOiNiZjFmMWR9Lmhpc3RvcnlFbnRyeS5lcnJvcjpob3ZlcjphZnRlciwudHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeS5lcnJvcjpob3ZlcjpiZWZvcmV7YmFja2dyb3VuZDojZTYyNjIyfS5oaXN0b3J5RW50cnkuaWdub3JlZDphZnRlciwudHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeS5pZ25vcmVkOmJlZm9yZXtiYWNrZ3JvdW5kOiNlNjhiMDV9Lmhpc3RvcnlFbnRyeS5pZ25vcmVkOmhvdmVyOmFmdGVyLC50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5Lmlnbm9yZWQ6aG92ZXI6YmVmb3Jle2JhY2tncm91bmQ6I2ZmOTgwOH0uaGlzdG9yeUVudHJ5LnJlZGlyZWN0ZWQ6YWZ0ZXIsLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnkucmVkaXJlY3RlZDpiZWZvcmV7YmFja2dyb3VuZDojZTY4YjA1fS5oaXN0b3J5RW50cnkucmVkaXJlY3RlZDpob3ZlcjphZnRlciwudHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeS5yZWRpcmVjdGVkOmhvdmVyOmJlZm9yZXtiYWNrZ3JvdW5kOiNmZjk4MDh9LnRyYW5zaXRpb25IaXN0b3J5IC5rZXl2YWx1ZXtkaXNwbGF5OmZsZXg7ZmxleC1mbG93OnJvdyBub3dyYXA7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW59LnRyYW5zaXRpb25EZXRhaWx7Ym9yZGVyOjFweCBzb2xpZCAjZDNkM2QzO2ZvbnQtc2l6ZTpzbWFsbDt0cmFuc2l0aW9uOmJveC1zaGFkb3cgLjVzIGVhc2UsYm9yZGVyIDFzIGVhc2V9LnRyYW5zaXRpb25EZXRhaWwgLmRvd25BcnJvd3twb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDoxMDAlO2JvdHRvbTotMTBweDttYXJnaW4tYm90dG9tOjEwcHh9LnRyYW5zaXRpb25EZXRhaWwgLmRvd25BcnJvdzphZnRlciwudHJhbnNpdGlvbkRldGFpbCAuZG93bkFycm93OmJlZm9yZXtjb250ZW50OlxcXCJcXFwiO3Bvc2l0aW9uOmFic29sdXRlO2JvcmRlci1sZWZ0OjEwcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJpZ2h0OjEwcHggc29saWQgdHJhbnNwYXJlbnQ7dG9wOjEwMCU7bGVmdDo1MCU7bWFyZ2luLWxlZnQ6LTEwcHh9LnRyYW5zaXRpb25EZXRhaWwgLmRvd25BcnJvdzpiZWZvcmV7Ym9yZGVyLXRvcDoxMHB4IHNvbGlkICNkM2QzZDN9LnRyYW5zaXRpb25EZXRhaWwgLmRvd25BcnJvdzphZnRlcntib3JkZXItdG9wOjEwcHggc29saWQgI2ZmZjttYXJnaW4tdG9wOi0xcHg7ei1pbmRleDoxfS50cmFuc2l0aW9uRGV0YWlsIC5wYW5lbC1oZWFkaW5ne3RleHQtYWxpZ246Y2VudGVyfS50cmFuc2l0aW9uRGV0YWlsIHRhYmxle2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZX0udHJhbnNpdGlvbkRldGFpbCB0aHt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6c21hbGx9LnRyYW5zaXRpb25EZXRhaWwgLnVpci1oZWFkZXI+KntmbGV4OjAgMSBhdXRvfS50cmFuc2l0aW9uRGV0YWlsIC51aXItaGVhZGVyPiogaXt0cmFuc2l0aW9uOmFsbCAuNXMgZWFzZX0udHJhbnNpdGlvbkRldGFpbCB0YWJsZS5wYXRoc3ttaW4td2lkdGg6MjVlbX0udHJhbnNpdGlvbkRldGFpbCB0YWJsZS5wYXRocyB0ZHtjb2xvcjojZmZmO2JvcmRlcjowO2ZvbnQtc2l6ZTpzbWFsbDttaW4td2lkdGg6MTBlbX0udHJhbnNpdGlvbkRldGFpbCAuc3VtbWFyeSAua2V5dmFsdWV7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQhaW1wb3J0YW50O2FsaWduLWl0ZW1zOmJhc2VsaW5lfS50cmFuc2l0aW9uRGV0YWlsIC5zdW1tYXJ5IC5rZXl2YWx1ZT5kaXY6bnRoLWNoaWxkKDIpe3BhZGRpbmctbGVmdDouNWVtO2ZvbnQtd2VpZ2h0OjQwMH0udHJhbnNpdGlvbkRldGFpbCB0YWJsZS5zdW1tYXJ5e21heC13aWR0aDo0MDBweH0udHJhbnNpdGlvbkRldGFpbCB0YWJsZS5zdW1tYXJ5IHRke2ZvbnQtc2l6ZTpzbWFsbDt2ZXJ0aWNhbC1hbGlnbjp0b3B9LnRyYW5zaXRpb25EZXRhaWwgdGFibGUuc3VtbWFyeSB0ZDpmaXJzdC1jaGlsZHt3aGl0ZS1zcGFjZTpub3dyYXB9LnRyYW5zaXRpb25EZXRhaWwgdGFibGUuc3VtbWFyeSB0ZDpudGgtY2hpbGQoMil7Zm9udC13ZWlnaHQ6NzAwO3BhZGRpbmctbGVmdDoxZW19LnRyYW5zaXRpb25EZXRhaWwgdGR7cGFkZGluZzowfS50cmFuc2l0aW9uRGV0YWlsIHRkIC5mbG93QXJyb3dDZWxse2Rpc3BsYXk6ZmxleDtmbGV4LWZsb3c6Y29sdW1uIG5vd3JhcDthbGlnbi1pdGVtczpzdHJldGNoO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO3dpZHRoOjFlbTt0cmFuc2l0aW9uOndpZHRoIC4yNXMgZWFzZTtoZWlnaHQ6YXV0b30udHJhbnNpdGlvbkRldGFpbC5leHBhbmQgdGQgLmZsb3dBcnJvd0NlbGx7d2lkdGg6MmVtfS50cmFuc2l0aW9uRGV0YWlsIC5leGl0IC5mbG93QXJyb3dTdmd7cmlnaHQ6MH0udHJhbnNpdGlvbkRldGFpbCAuZW50ZXIgLmZsb3dBcnJvd1N2Z3tsZWZ0OjB9LnRyYW5zaXRpb25EZXRhaWwgLmZsb3dBcnJvd1N2Zy5ib3R0b217Ym90dG9tOjB9LnRyYW5zaXRpb25EZXRhaWwgLmZsb3dBcnJvd1N2Zy50b3B7dG9wOjB9LnRyYW5zaXRpb25EZXRhaWwgLmZsb3dBcnJvd1N2Z3twb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxMDAlO2hlaWdodDphdXRvO3RyYW5zaXRpb246d2lkdGggLjI1cyBlYXNlfS50cmFuc2l0aW9uRGV0YWlsIC5yZXRhaW57YmFja2dyb3VuZC1jb2xvcjojNzM3MjczfS50cmFuc2l0aW9uRGV0YWlsIC5leGl0e2JhY2tncm91bmQtY29sb3I6IzdjMTAxMH0udHJhbnNpdGlvbkRldGFpbCAuZW50ZXJ7YmFja2dyb3VuZC1jb2xvcjojMzE1OTJhfS50cmFuc2l0aW9uRGV0YWlsIC5kZWVtcGhhc2l6ZXtjb2xvcjojZWFlYWVhO2ZvbnQtc2l6ZTp4LXNtYWxsfS50cmFuc2l0aW9uRGV0YWlsIC5wYXJhbXN7YmFja2dyb3VuZC1jb2xvcjpoc2xhKDAsMCUsMTAwJSwuMTUpO3BhZGRpbmc6MDtvcGFjaXR5OjA7b3ZlcmZsb3c6aGlkZGVuO3RyYW5zaXRpb246b3BhY2l0eSAxcyBlYXNlO21heC1oZWlnaHQ6MDttYXgtd2lkdGg6MTUwcHh9LnRyYW5zaXRpb25EZXRhaWwuZXhwYW5kIC5wYXJhbXN7ZGlzcGxheTpibG9jaztib3JkZXItcmFkaXVzOjRweDtib3gtc2hhZG93OjFweCAxcHggMnB4ICMwMDA7cGFkZGluZzouNWVtO21heC1oZWlnaHQ6MjUwcHg7bWF4LXdpZHRoOjMwMHB4O292ZXJmbG93LXk6YXV0bztvcGFjaXR5OjE7bWFyZ2luOi41ZW0gMH0udHJhbnNpdGlvbkRldGFpbC5waW57Ym94LXNoYWRvdzo0cHggNHB4IDEycHggcmdiYSgwLDAsMCwuMyk7Ym9yZGVyOjFweCBzb2xpZCAjMDAwfS50cmFuc2l0aW9uRGV0YWlsLnBpbiAuZG93bkFycm93OmJlZm9yZXtib3JkZXItdG9wLWNvbG9yOiMwMDB9LnRyYW5zaXRpb25EZXRhaWwuZXhwYW5kIHRhYmxlLnBhdGhzIHRke21heC1oZWlnaHQ6MTAwcHg7dmVydGljYWwtYWxpZ246dG9wfS50cmFuc2l0aW9uRGV0YWlsIC51aXJUcmFuc1Zpc1Jvd3tkaXNwbGF5OmZsZXg7ZmxleC1mbG93OnJvdyBub3dyYXA7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6c3RyZXRjaH0udHJhbnNpdGlvbkRldGFpbCAudWlyVHJhbnNWaXNSb3c+ZGl2e2ZsZXg6MSAwIDUwJX0udHJhbnNpdGlvbkRldGFpbCAudWlyTm9kZUNvbnRlbnR7ZGlzcGxheTpmbGV4O2ZsZXgtZmxvdzpyb3cgbm93cmFwO21pbi1oZWlnaHQ6MWVtO3RyYW5zaXRpb246bWluLWhlaWdodCAuMjVzIGVhc2V9LnRyYW5zaXRpb25EZXRhaWwuZXhwYW5kIC51aXJOb2RlQ29udGVudHttaW4taGVpZ2h0OjVlbX0udHJhbnNpdGlvbkRldGFpbCAudWlyTm9kZURldGFpbHtmbGV4OjEgMCBhdXRvO3BhZGRpbmc6LjJlbSAuNWVtfS50cmFuc2l0aW9uRGV0YWlsIC5zdGF0ZW5hbWV7Zm9udC13ZWlnaHQ6Ym9sZGVyO21hcmdpbi1yaWdodDoxZW07bWFyZ2luLWxlZnQ6MH0udHJhbnNpdGlvbkRldGFpbCAuZW50ZXIgLnN0YXRlbmFtZXttYXJnaW4tcmlnaHQ6MDttYXJnaW4tbGVmdDoxZW19LnRyYW5zaXRpb25EZXRhaWwgLm5vd3JhcHt3aGl0ZS1zcGFjZTpub3dyYXB9LnRyYW5zaXRpb25IaXN0b3J5IC5wYXJhbWlke2ZvbnQtd2VpZ2h0OmJvbGRlcjtjb2xvcjojZWFlYWVhO21hcmdpbi1yaWdodDouNWVtfS50cmFuc2l0aW9uSGlzdG9yeSAucGFyYW1zbGFiZWwsLnRyYW5zaXRpb25IaXN0b3J5IC5yZXNvbHZlbGFiZWx7Y29sb3I6I2ZmZjttYXJnaW4tdG9wOi0uNWVtO3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtd2VpZ2h0OjcwMH0udHJhbnNpdGlvbkhpc3RvcnkgLnBhcmFtdmFsdWV7Y29sb3I6I2U2ZTZlNn1zcGFuLmxpbmt7Y3Vyc29yOnBvaW50ZXI7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0udG9vbHRpcC1yaWdodHtkaXNwbGF5OmlubGluZTtwb3NpdGlvbjpyZWxhdGl2ZTt0cmFuc2l0aW9uOmFsbCAxLjVzIGVhc2V9LnRvb2x0aXAtcmlnaHQ6YWZ0ZXJ7Y29sb3I6dHJhbnNwYXJlbnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dHJhbnNpdGlvbjphbGwgMS41cyBlYXNlfS50b29sdGlwLXJpZ2h0OmhvdmVyOmFmdGVye2JvdHRvbTowO2NvbG9yOnJnYmEoMCwwLDAsLjUpO2NvbnRlbnQ6YXR0cih0aXRsZSk7ZGlzcGxheTpibG9jaztwb3NpdGlvbjphYnNvbHV0ZTt3aGl0ZS1zcGFjZTpub3dyYXA7Zm9udC1zaXplOnNtYWxsZXJ9LnVpci1tb2RhbCAuYnRuLXByaW1hcnl7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiMzMzdhYjc7Ym9yZGVyLWNvbG9yOiMyZTZkYTR9LnVpci1tb2RhbCAuYnRue2Rpc3BsYXk6aW5saW5lLWJsb2NrO3BhZGRpbmc6NnB4IDEycHg7bWFyZ2luLWJvdHRvbTowO2ZvbnQtc2l6ZToxNHB4O2ZvbnQtd2VpZ2h0OjQwMDtsaW5lLWhlaWdodDoxLjQyODU3MTQzO3RleHQtYWxpZ246Y2VudGVyO3doaXRlLXNwYWNlOm5vd3JhcDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7LW1zLXRvdWNoLWFjdGlvbjptYW5pcHVsYXRpb247dG91Y2gtYWN0aW9uOm1hbmlwdWxhdGlvbjtjdXJzb3I6cG9pbnRlcjstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7YmFja2dyb3VuZC1pbWFnZTpub25lO2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czo0cHh9LmJ0bi1ncm91cC14cz4uYnRuLC51aXItbW9kYWwgLmJ0bi14c3twYWRkaW5nOjFweCA1cHg7Zm9udC1zaXplOjEycHg7bGluZS1oZWlnaHQ6MS41O2JvcmRlci1yYWRpdXM6M3B4fS50cmFuc2l0aW9uRGV0YWlsIHNwYW4ubGlua3tjb2xvcjojZmZmfS50cmFuc2l0aW9uSGlzdG9yeSA6bm90KC5mYSk6bm90KHByZSl7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWZ9LnRyYW5zaXRpb25EZXRhaWwgLmVudGVyIC51aXItaGVhZGVye2ZsZXgtZmxvdzpyb3cgbm93cmFwfS50cmFuc2l0aW9uRGV0YWlsIC51aXItaGVhZGVye2Rpc3BsYXk6ZmxleDtmbGV4LWZsb3c6cm93LXJldmVyc2Ugbm93cmFwO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmJhc2VsaW5lfS50cmFuc2l0aW9uRGV0YWlsIC5yZXRhaW4gLnVpci1oZWFkZXJ7anVzdGlmeS1jb250ZW50OmNlbnRlcn0udWlyLXBhbmVse21hcmdpbi1ib3R0b206MjBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCAjZDNkM2QzO2JvcmRlci1yYWRpdXM6NHB4O2JveC1zaGFkb3c6MCAxcHggMXB4IHJnYmEoMCwwLDAsLjA1KX0udWlyLXBhbmVsLWhlYWRpbmd7Y29sb3I6IzMzMztiYWNrZ3JvdW5kLWNvbG9yOiNmNWY1ZjU7Ym9yZGVyLWNvbG9yOiNkZGQ7cGFkZGluZzoxMHB4IDE1cHg7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czozcHg7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6M3B4fS51aXItcGFuZWwtdGl0bGV7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MDtmb250LXNpemU6MTZweDtjb2xvcjppbmhlcml0fS51aXItcGFuZWwtYm9keXtwYWRkaW5nOjE1cHh9LnVpci1mYWRle29wYWNpdHk6MDt0cmFuc2l0aW9uOm9wYWNpdHkgLjE1cyBsaW5lYXJ9LnVpci1mYWRlLmlue29wYWNpdHk6MX0udWlyLW1vZGFsLWJhY2tkcm9we3Bvc2l0aW9uOmZpeGVkO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO3otaW5kZXg6MTA0MDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDB9LnVpci1tb2RhbC1iYWNrZHJvcC5pbntmaWx0ZXI6YWxwaGEob3BhY2l0eT01MCk7b3BhY2l0eTouNX0udWlyLW1vZGFse3Bvc2l0aW9uOmZpeGVkO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO3otaW5kZXg6MTA1MDtkaXNwbGF5OmJsb2NrO292ZXJmbG93LXk6YXV0bzstd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzp0b3VjaDtvdXRsaW5lOjB9LnVpci1tb2RhbC1kaWFsb2d7cG9zaXRpb246cmVsYXRpdmU7d2lkdGg6YXV0bzttYXJnaW46MTBweH0udWlyLW1vZGFsLWNvbnRlbnR7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JhY2tncm91bmQtY2xpcDpwYWRkaW5nLWJveDtib3JkZXI6MXB4IHNvbGlkICM5OTk7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDAsMCwwLC4yKTtib3JkZXItcmFkaXVzOjZweDtvdXRsaW5lOjA7Ym94LXNoYWRvdzowIDNweCA5cHggcmdiYSgwLDAsMCwuNSl9LnVpci1tb2RhbC1oZWFkZXJ7cGFkZGluZzoxNXB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNlNWU1ZTV9LnVpci1yZXNvbHZlLWhlYWRlcntkaXNwbGF5OmZsZXg7ZmxleC1mbG93OnJvdyBub3dyYXA7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YmFja2dyb3VuZC1jb2xvcjojNjQ5NWVkfS51aXItbW9kYWwtYm9keXtjb2xvcjojMDAwO3Bvc2l0aW9uOnJlbGF0aXZlO3BhZGRpbmc6MTVweH0udWlyLW1vZGFsLWZvb3RlcntwYWRkaW5nOjE1cHg7dGV4dC1hbGlnbjpyaWdodDtib3JkZXItdG9wOjFweCBzb2xpZCAjZTVlNWU1fS51aXItaWNvbntkaXNwbGF5OmlubGluZS1ibG9jaztoZWlnaHQ6MWVtO3dpZHRoOjFlbTttYXJnaW46LjI1ZW07YmFja2dyb3VuZC1zaXplOmNvdmVyO2JhY2tncm91bmQtcG9zaXRpb246MCAwfS51aXItc3BpbnthbmltYXRpb246dWlyc3BpbiAycyBpbmZpbml0ZTt0cmFuc2Zvcm06cm90YXRlKDBkZWcpfS51aXItcm90YXRlLTM1e3RyYW5zZm9ybTpyb3RhdGUoMzVkZWcpO29wYWNpdHk6LjV9QGtleWZyYW1lcyB1aXJzcGluezAle3RyYW5zZm9ybTpyb3RhdGUoMGRlZyl9dG97dHJhbnNmb3JtOnJvdGF0ZSgxdHVybil9fS51aXItaWNvbnctc3Bpbm5lcntiYWNrZ3JvdW5kLWltYWdlOnVybChcIiArIF9fd2VicGFja19yZXF1aXJlX18oMjMpICsgXCIpfS51aXItaWNvbnctY2hlY2t7YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KSArIFwiKX0udWlyLWljb253LWNpcmNsZS1ve2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiICsgX193ZWJwYWNrX3JlcXVpcmVfXygyNSkgKyBcIil9LnVpci1pY29udy1zaGFyZXtiYWNrZ3JvdW5kLWltYWdlOnVybChcIiArIF9fd2VicGFja19yZXF1aXJlX18oMjYpICsgXCIpfS51aXItaWNvbnctY2xvc2V7YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KSArIFwiKX0udWlyLWljb24tdGh1bWItdGFja3tiYWNrZ3JvdW5kLWltYWdlOnVybChcIiArIF9fd2VicGFja19yZXF1aXJlX18oMjgpICsgXCIpfS51aXItaWNvbi10b2dnbGUtb257YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KSArIFwiKX0udWlyLWljb24tdG9nZ2xlLW9mZntiYWNrZ3JvdW5kLWltYWdlOnVybChcIiArIF9fd2VicGFja19yZXF1aXJlX18oMzApICsgXCIpfVwiLCBcIlwiLCB7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCIvLi9zcmMvdHJhbnNpdGlvbi90cmFuc2l0aW9uVmlzdWFsaXplci5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBTUEsbUJBQ0ksYUFBYyxBQUNkLHFCQUFzQixBQUN0QixlQUFnQixBQUNoQixPQUFRLEFBQ1IsU0FBVSxBQUNWLFFBQVMsQUFDVCxjQUFlLEFBQ2Ysa0JBQW1CLEFBQ25CLFVBQVcsQUFFWCxtQkFBcUIsQ0FDeEIsQUFFRCxxQkFFSSxtQkFBb0IsQUFDcEIsYUFBZSxDQUNsQixBQUlELCtCQUNJLEtBQU8sQ0FDVixBQUdELGlDQUNJLGtCQUFtQixBQUNuQixrQkFBbUIsQUFDbkIsa0JBQW1CLEFBQ25CLGtCQUFtQixBQUNuQixpQkFBa0IsQUFDbEIsV0FBWSxBQUNaLGNBQWdCLENBQ25CLEFBSUQsNERBQ0ksV0FBWSxBQUNaLGtCQUFtQixBQUNuQixtQkFBcUIsQUFDckIsT0FBUSxBQUNSLGFBQWMsQUFDZCxXQUFZLEFBQ1osc0JBQXdCLEFBQ3hCLHNCQUF1QixBQUN2QixVQUFZLENBQ2YsQUFFRCx3Q0FDSSxNQUFPLEFB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ci5jc3NcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLypcXG4gICAgLnRyYW5zaXRpb25IaXN0b3J5IGlzIHRoZSBicmVhZGNydW1icyBhbmQgdHJhbnNpdGlvbiBkZXRhaWxzIGJsb2NrLlxcbiAgICBJdCBmaWxscyB0aGUgZm9vdGVyIG9mIHRoZSBzY3JlZW4sIGFuZCBzY3JvbGxzIGhvcml6b250YWxseS5cXG4gICAgTW91c2UgY2xpY2tzIHNob3VsZCBwYXNzIHRocm91Z2ggdG8gdGhlIGVsZW1lbnRzIHVuZGVybmVhdGguXFxuKi9cXG5cXG4udHJhbnNpdGlvbkhpc3Rvcnkge1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XFxuICAgIHBvc2l0aW9uOiBmaXhlZDtcXG4gICAgbGVmdDogMDtcXG4gICAgYm90dG9tOiAwO1xcbiAgICByaWdodDogMDtcXG4gICAgcGFkZGluZzogMCAxZW07XFxuICAgIG92ZXJmbG93LXg6IHNjcm9sbDtcXG4gICAgei1pbmRleDogMjtcXG4gICAgLyogZGlzYWJsZSBtb3VzZSBjbGlja3MsIGhvdmVyLCBldGMsIGZvciB0aGUgb3ZlcmFsbCBkaXYgKi9cXG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxufVxcblxcbi50cmFuc2l0aW9uSGlzdG9yeSAqIHtcXG4gICAgLyogRW5hYmxlIG1vdXNlIGZvciBhbnkgc3ViLWVsZW1lbnRzICh0aGUgYnJlYWRjcnVtYiBlbGVtZXRucyBhbmQgZGV0YWlsIGVsZW1lbnRzKSAqL1xcbiAgICBwb2ludGVyLWV2ZW50czogYWxsO1xcbiAgICBmbGV4OiAwIDAgYXV0bztcXG59XFxuXFxuLyogIHdvcmthcm91bmQgZm9yIG1vZGFsIHNjcmVlbiwgYW5kIGNocm9tZSBhbmQgc2FmYXJpIG5vdCBhbGxvd2luZyBpdCB0byBiZVxcbiAgICB2aXNpYmxlIG91dHNpZGUgdGhlIC50cmFuc2l0aW9uSGlzdG9yeSBvdmVyZmxvdyB3aGlsZSB0aGUgLnRyYW5zaXRpb25IaXN0b3J5IGRpdiBpcyBzY3JvbGxlZCAqL1xcbi5mdWxsU2NyZWVuIC50cmFuc2l0aW9uSGlzdG9yeSB7XFxuICAgIHRvcDogMDtcXG59XFxuXFxuLyogQSBzaW5nbGUgaGlzdG9yeSBlbnRyeSAoYnJlYWRjcnVtYikgYXJyb3cgbG9va2luZyB0aGluZyAqL1xcbi50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5IHtcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICAgIHBhZGRpbmc6IDEycHggMzBweDtcXG4gICAgbWFyZ2luLWJvdHRvbTogNnB4O1xcbiAgICBtYXJnaW4tcmlnaHQ6IDZweDtcXG4gICAgY29sb3I6ICMwMDA7XFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXG59XFxuXFxuXFxuLyogSGlzdG9yeSBlbnRyeSBhcnJvdyBDU1MgKi9cXG4udHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeTpiZWZvcmUsLmhpc3RvcnlFbnRyeTphZnRlciB7XFxuICAgIGNvbnRlbnQ6ICcnO1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIGJhY2tncm91bmQ6IGRhcmtncmV5O1xcbiAgICBsZWZ0OiAwO1xcbiAgICBoZWlnaHQ6IDUwLjIlOyAvKiArMC4yJSBzbyBmaXJlZm94IGRvZXNuJ3QgcmVuZGVyIGEgd2hpdGUgbGluZSBkb3duIHRoZSBjZW50ZXIgKi9cXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgICB6LWluZGV4OiAtMTtcXG59XFxuXFxuLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnk6YmVmb3JlIHtcXG4gICAgdG9wOiAwO1xcbiAgICBib3JkZXItYm90dG9tOiAwO1xcbiAgICAtd2Via2l0LXRyYW5zZm9ybTogc2tldyg0MGRlZywgMGRlZyk7XFxuICAgIC1tcy10cmFuc2Zvcm06IHNrZXcoNDBkZWcsIDBkZWcpO1xcbiAgICB0cmFuc2Zvcm06IHNrZXcoNDBkZWcsIDBkZWcpO1xcbn1cXG5cXG4udHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeTphZnRlciB7XFxuICAgIGJvdHRvbTogMDtcXG4gICAgYm9yZGVyLXRvcDogMDtcXG4gICAgLXdlYmtpdC10cmFuc2Zvcm06IHNrZXcoLTQwZGVnLCAwZGVnKTtcXG4gICAgLW1zLXRyYW5zZm9ybTogc2tldygtNDBkZWcsIDBkZWcpO1xcbiAgICB0cmFuc2Zvcm06IHNrZXcoLTQwZGVnLCAwZGVnKTtcXG59XFxuXFxuLyouaGlzdG9yeUVudHJ5OjpiZWZvcmUgaGVpZ2h0OiA1MSUgKHx8IDo6YWZ0ZXIpICovXFxuXFxuLyogU3R5bGluZyBmb3IgYnJlYWRjcnVtYiBjb250ZW50cyAqL1xcbi5oaXN0b3J5RW50cnkgLnN1bW1hcnkge1xcbiAgICBjb2xvcjogd2hpdGU7XFxuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxuICAgIGZvbnQtc2l6ZTogc21hbGw7XFxufVxcblxcbi5oaXN0b3J5RW50cnkgLnN1bW1hcnkgLnRyYW5zaWQge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHRvcDogMC4xZW07XFxuICAgIGxlZnQ6IDAuODVlbTtcXG4gICAgZm9udC1zaXplOiBzbWFsbGVyO1xcbn1cXG5cXG4uaGlzdG9yeUVudHJ5IC5zdW1tYXJ5IC5zdGF0dXMge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIGJvdHRvbTogMC4xZW07XFxuICAgIGxlZnQ6IDAuODVlbTtcXG4gICAgZm9udC1zaXplOiBzbWFsbGVyO1xcbn1cXG4uaGlzdG9yeUVudHJ5IC5zdW1tYXJ5IC50cmFuc25hbWUge1xcbiAgICBmb250LXdlaWdodDogYm9sZDtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1mbG93OiByb3cgbm93cmFwO1xcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlclxcbn1cXG5cXG4vKiBicmVhZGNydW1iL2hpc3RvcnkgZW50cnkgY29sb3IgY29kaW5nICovXFxuLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnk6YmVmb3JlLC5oaXN0b3J5RW50cnk6YWZ0ZXIge1xcbiAgICBiYWNrZ3JvdW5kOiAjNzM3MzczO1xcbn1cXG4udHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeTpob3ZlcjpiZWZvcmUsLmhpc3RvcnlFbnRyeTpob3ZlcjphZnRlciB7XFxuICAgIGJhY2tncm91bmQ6ICNhNmE2YTY7XFxufVxcblxcbi50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5LnN1Y2Nlc3M6YmVmb3JlLC5oaXN0b3J5RW50cnkuc3VjY2VzczphZnRlciB7XFxuICAgIGJhY2tncm91bmQ6ICM0NTgwM2I7XFxufVxcbi50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5LnN1Y2Nlc3M6aG92ZXI6YmVmb3JlLC5oaXN0b3J5RW50cnkuc3VjY2Vzczpob3ZlcjphZnRlciB7XFxuICAgIGJhY2tncm91bmQ6ICMxOWE2MDA7XFxufVxcblxcblxcbi50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5LmVycm9yOmJlZm9yZSwuaGlzdG9yeUVudHJ5LmVycm9yOmFmdGVyIHtcXG4gICAgYmFja2dyb3VuZDogI2JmMWYxZDtcXG59XFxuLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnkuZXJyb3I6aG92ZXI6YmVmb3JlLC5oaXN0b3J5RW50cnkuZXJyb3I6aG92ZXI6YWZ0ZXIge1xcbiAgICBiYWNrZ3JvdW5kOiAjZTYyNjIyO1xcbn1cXG5cXG5cXG4udHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeS5pZ25vcmVkOmJlZm9yZSwuaGlzdG9yeUVudHJ5Lmlnbm9yZWQ6YWZ0ZXIge1xcbiAgICBiYWNrZ3JvdW5kOiAjZTY4YjA1O1xcbn1cXG4udHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeS5pZ25vcmVkOmhvdmVyOmJlZm9yZSwuaGlzdG9yeUVudHJ5Lmlnbm9yZWQ6aG92ZXI6YWZ0ZXIge1xcbiAgICBiYWNrZ3JvdW5kOiAjZmY5ODA4O1xcbn1cXG5cXG4udHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeS5yZWRpcmVjdGVkOmJlZm9yZSwuaGlzdG9yeUVudHJ5LnJlZGlyZWN0ZWQ6YWZ0ZXIge1xcbiAgICBiYWNrZ3JvdW5kOiAjZTY4YjA1O1xcbn1cXG4udHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeS5yZWRpcmVjdGVkOmhvdmVyOmJlZm9yZSwuaGlzdG9yeUVudHJ5LnJlZGlyZWN0ZWQ6aG92ZXI6YWZ0ZXIge1xcbiAgICBiYWNrZ3JvdW5kOiAjZmY5ODA4O1xcbn1cXG5cXG4udHJhbnNpdGlvbkhpc3RvcnkgLmtleXZhbHVlIHtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1mbG93OiByb3cgbm93cmFwO1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XFxufVxcblxcblxcblxcblxcblxcblxcblxcbi8qIFRoZSB0cmFuc2l0aW9uIGRldGFpbCBwb3BvdmVyICh3aGVuIGhvdmVyaW5nIG92ZXIgYSBicmVhZGNydW1iKSAqL1xcbi50cmFuc2l0aW9uRGV0YWlsIHtcXG4gICAgYm9yZGVyOiAxcHggc29saWQgbGlnaHRncmV5O1xcbiAgICBmb250LXNpemU6IHNtYWxsO1xcbiAgICB0cmFuc2l0aW9uOiBib3gtc2hhZG93IDAuNXMgZWFzZSwgIGJvcmRlciAxLjBzIGVhc2VcXG59XFxuXFxuLyogUG9pbnRlciBlbGVtZW50IHBvaW50cyBmcm9tIHRoZSB0cmFuc2l0aW9uRGV0YWlsIHRvIHRoZSBicmVhZGNydW1iICovXFxuLnRyYW5zaXRpb25EZXRhaWwgLmRvd25BcnJvdyB7XFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGJvdHRvbTogLTEwcHg7XFxuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIC5kb3duQXJyb3c6YmVmb3JlLCAudHJhbnNpdGlvbkRldGFpbCAuZG93bkFycm93OmFmdGVyIHtcXG4gICAgY29udGVudDogXFxcIlxcXCI7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgYm9yZGVyLWxlZnQ6IDEwcHggc29saWQgdHJhbnNwYXJlbnQ7XFxuICAgIGJvcmRlci1yaWdodDogMTBweCBzb2xpZCB0cmFuc3BhcmVudDtcXG4gICAgdG9wOiAxMDAlO1xcbiAgICBsZWZ0OiA1MCU7XFxuICAgIG1hcmdpbi1sZWZ0OiAtMTBweDtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgLmRvd25BcnJvdzpiZWZvcmUge1xcbiAgICBib3JkZXItdG9wOiAxMHB4IHNvbGlkIGxpZ2h0Z3JheTtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgLmRvd25BcnJvdzphZnRlcntcXG4gICAgYm9yZGVyLXRvcDogMTBweCBzb2xpZCB3aGl0ZTtcXG4gICAgbWFyZ2luLXRvcDogLTFweDtcXG4gICAgei1pbmRleDogMTtcXG59XFxuXFxuXFxuLyogVGhlIGxheW91dCBhbmQgc3R5bGluZyBvZiB0aGUgdHJhbnNpdGlvbiBkZXRhaWwgcG9wb3ZlciAqL1xcbi50cmFuc2l0aW9uRGV0YWlsIC5wYW5lbC1oZWFkaW5nIHtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCB0YWJsZSB7XFxuICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIHRoIHtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICBmb250LXNpemU6IHNtYWxsO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCAudWlyLWhlYWRlciB7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZmxvdzogcm93LXJldmVyc2Ugbm93cmFwO1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XFxuICAgIGFsaWduLWl0ZW1zOiBiYXNlbGluZTtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgLnVpci1oZWFkZXIgPiAqICB7XFxuICAgIGZsZXg6IDAgMSBhdXRvO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCAudWlyLWhlYWRlciA+ICogaSB7XFxuICAgIHRyYW5zaXRpb246IGFsbCAwLjVzIGVhc2U7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIHRhYmxlLnBhdGhzIHtcXG4gICAgbWluLXdpZHRoOiAyNWVtO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCB0YWJsZS5wYXRocyB0ZCB7XFxuICAgIGNvbG9yOiB3aGl0ZTtcXG4gICAgYm9yZGVyOiAwO1xcbiAgICBmb250LXNpemU6IHNtYWxsO1xcbiAgICBtaW4td2lkdGg6IDEwZW07XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIC5zdW1tYXJ5IC5rZXl2YWx1ZSB7XFxuICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydCAhaW1wb3J0YW50O1xcbiAgICBhbGlnbi1pdGVtczogYmFzZWxpbmU7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIC5zdW1tYXJ5IC5rZXl2YWx1ZSA+IGRpdjpudGgtY2hpbGQoMil7XFxuICAgIHBhZGRpbmctbGVmdDogMC41ZW07XFxuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XFxufVxcblxcblxcbi50cmFuc2l0aW9uRGV0YWlsIHRhYmxlLnN1bW1hcnkge1xcbiAgICBtYXgtd2lkdGg6IDQwMHB4O1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCB0YWJsZS5zdW1tYXJ5IHRkIHtcXG4gICAgZm9udC1zaXplOiBzbWFsbDtcXG4gICAgdmVydGljYWwtYWxpZ246IHRvcDtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgdGFibGUuc3VtbWFyeSB0ZDpudGgtY2hpbGQoMSkge1xcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCB0YWJsZS5zdW1tYXJ5IHRkOm50aC1jaGlsZCgyKSB7XFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgICBwYWRkaW5nLWxlZnQ6IDFlbTtcXG59XFxuXFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgdGQge1xcbiAgICBwYWRkaW5nOiAwO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCB0ZCAuZmxvd0Fycm93Q2VsbCB7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZmxvdzogY29sdW1uIG5vd3JhcDtcXG4gICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XFxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcXG4gICAgd2lkdGg6IDFlbTtcXG4gICAgdHJhbnNpdGlvbjogd2lkdGggMC4yNXMgZWFzZTtcXG4gICAgaGVpZ2h0OiBhdXRvO1xcbn1cXG4udHJhbnNpdGlvbkRldGFpbC5leHBhbmQgdGQgLmZsb3dBcnJvd0NlbGwgeyB3aWR0aDogMmVtOyB9XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgLmV4aXQgIC5mbG93QXJyb3dTdmcgICAgICAgICAgeyByaWdodDogMDsgfVxcbi50cmFuc2l0aW9uRGV0YWlsIC5lbnRlciAuZmxvd0Fycm93U3ZnICAgICAgICAgIHsgbGVmdDogMDsgfVxcbi50cmFuc2l0aW9uRGV0YWlsICAgICAgICAuZmxvd0Fycm93U3ZnLmJvdHRvbSAgIHsgYm90dG9tOiAwIH1cXG4udHJhbnNpdGlvbkRldGFpbCAgICAgICAgLmZsb3dBcnJvd1N2Zy50b3AgICAgICB7IHRvcDogMCB9XFxuLnRyYW5zaXRpb25EZXRhaWwgICAgICAgIC5mbG93QXJyb3dTdmcge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHdpZHRoOiAxMDAlO1xcbiAgICBoZWlnaHQ6IGF1dG87XFxuICAgIHRyYW5zaXRpb246IHdpZHRoIDAuMjVzIGVhc2U7XFxufVxcblxcbi8qIGNvbG9yIGNvZGUgcGF0aCBlbGVtZW50cyBieSByZXRhaW5lZC9leGl0ZWQvZW50ZXJlZCAqL1xcbi50cmFuc2l0aW9uRGV0YWlsIC5yZXRhaW4ge1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzM3MjczO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCAuZXhpdCB7XFxuICAgIGJhY2tncm91bmQtY29sb3I6ICM3YzEwMTA7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIC5lbnRlciB7XFxuICAgIGJhY2tncm91bmQtY29sb3I6ICMzMTU5MmE7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIC5kZWVtcGhhc2l6ZSB7XFxuICAgIGNvbG9yOiAjZWFlYWVhO1xcbiAgICBmb250LXNpemU6IHgtc21hbGw7XFxufVxcblxcbi8qIFN0eWxpbmcgZm9yIHBhcmFtZXRlciB2YWx1ZXMgYW5kIHJlc29sdmUgdmFsdWVzICovXFxuLnRyYW5zaXRpb25EZXRhaWwgLnBhcmFtcyB7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LDI1NSwyNTUsMC4xNSk7XFxuICAgIHBhZGRpbmc6IDA7XFxuICAgIG9wYWNpdHk6IDA7XFxuICAgIG92ZXJmbG93OiBoaWRkZW47XFxuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMXMgZWFzZTtcXG4gICAgbWF4LWhlaWdodDogMDtcXG4gICAgbWF4LXdpZHRoOiAxNTBweDtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwuZXhwYW5kIC5wYXJhbXMge1xcbiAgICBkaXNwbGF5OiBibG9jaztcXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xcbiAgICBib3gtc2hhZG93OiAxcHggMXB4IDJweCBibGFjaztcXG4gICAgcGFkZGluZzogMC41ZW07XFxuICAgIG1heC1oZWlnaHQ6IDI1MHB4O1xcbiAgICBtYXgtd2lkdGg6IDMwMHB4O1xcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xcbiAgICBvcGFjaXR5OiAxO1xcbiAgICBtYXJnaW46IDAuNWVtIDA7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsLnBpbiB7XFxuICAgIGJveC1zaGFkb3c6IDRweCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMyk7XFxuICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbC5waW4gLmRvd25BcnJvdzpiZWZvcmUge1xcbiAgICBib3JkZXItdG9wLWNvbG9yOiBibGFjaztcXG59XFxuXFxuXFxuLyogV2hlbiBzaG93aW5nIGV4cGFuZGVkIGRldGFpbHMsIHB1dCBzcGFjZSBiZXR3ZWVuIHBhdGggZWxlbWVudHMgKi9cXG4udHJhbnNpdGlvbkRldGFpbC5leHBhbmQgdGFibGUucGF0aHMgdGQge1xcbiAgICBtYXgtaGVpZ2h0OiAxMDBweDtcXG4gICAgdmVydGljYWwtYWxpZ246IHRvcDtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgLnVpclRyYW5zVmlzUm93IHtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1mbG93OiByb3cgbm93cmFwO1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XFxuICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCAudWlyVHJhbnNWaXNSb3cgPiBkaXYge1xcbiAgICBmbGV4OiAxIDAgNTAlO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCAudWlyTm9kZUNvbnRlbnQge1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWZsb3c6IHJvdyBub3dyYXA7XFxuICAgIG1pbi1oZWlnaHQ6IDFlbTtcXG4gICAgdHJhbnNpdGlvbjogbWluLWhlaWdodCAwLjI1cyBlYXNlO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbC5leHBhbmQgLnVpck5vZGVDb250ZW50IHtcXG4gICAgbWluLWhlaWdodDogNWVtO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCAudWlyTm9kZURldGFpbCB7XFxuICAgIGZsZXg6IDEgMCBhdXRvO1xcbiAgICBwYWRkaW5nOiAwLjJlbSAwLjVlbTtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgLnN0YXRlbmFtZSB7XFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkZXI7XFxuICAgIG1hcmdpbi1yaWdodDogMWVtO1xcbiAgICBtYXJnaW4tbGVmdDogMDtcXG59XFxuLnRyYW5zaXRpb25EZXRhaWwgLmVudGVyIC5zdGF0ZW5hbWUge1xcbiAgICBtYXJnaW4tcmlnaHQ6IDA7XFxuICAgIG1hcmdpbi1sZWZ0OiAxZW07XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIC5ub3dyYXAge1xcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbn1cXG5cXG4udHJhbnNpdGlvbkhpc3RvcnkgLnBhcmFtaWQge1xcbiAgICBmb250LXdlaWdodDogYm9sZGVyO1xcbiAgICBjb2xvcjogI2VhZWFlYTtcXG4gICAgbWFyZ2luLXJpZ2h0OiAwLjVlbTtcXG59XFxuXFxuLnRyYW5zaXRpb25IaXN0b3J5IC5wYXJhbXNsYWJlbCB7XFxuICAgIGNvbG9yOiB3aGl0ZTtcXG4gICAgbWFyZ2luLXRvcDogLTAuNWVtO1xcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcbn1cXG5cXG4udHJhbnNpdGlvbkhpc3RvcnkgLnJlc29sdmVsYWJlbCB7XFxuICAgIGNvbG9yOiB3aGl0ZTtcXG4gICAgbWFyZ2luLXRvcDogLTAuNWVtO1xcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcbn1cXG5cXG4udHJhbnNpdGlvbkhpc3RvcnkgLnBhcmFtdmFsdWUge1xcbiAgICBjb2xvcjogI2U2ZTZlNjtcXG59XFxuXFxuXFxuXFxuc3Bhbi5saW5rIHtcXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcbiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcXG59XFxuXFxuXFxuLnRvb2x0aXAtcmlnaHQge1xcbiAgICBkaXNwbGF5OiBpbmxpbmU7XFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgdHJhbnNpdGlvbjogYWxsIDEuNXMgZWFzZTtcXG59XFxuXFxuLnRvb2x0aXAtcmlnaHQ6YWZ0ZXIge1xcbiAgICBjb2xvcjogcmdiYSgwLDAsMCwwKTtcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcbiAgICB0cmFuc2l0aW9uOiBhbGwgMS41cyBlYXNlO1xcbn1cXG5cXG4udG9vbHRpcC1yaWdodDpob3ZlcjphZnRlciB7XFxuICAgIGJvdHRvbTogMDtcXG4gICAgY29sb3I6IHJnYmEoMCwwLDAsMC41KTtcXG4gICAgY29udGVudDogYXR0cih0aXRsZSk7XFxuICAgIGRpc3BsYXk6IGJsb2NrO1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxuICAgIGZvbnQtc2l6ZTogc21hbGxlcjtcXG59XFxuXFxuXFxuXFxuLyogQm9vdHN0cmFwIHN0dWZmICovXFxuXFxuLnVpci1tb2RhbCAuYnRuLXByaW1hcnkge1xcbiAgICBjb2xvcjogI2ZmZjtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzMzN2FiNztcXG4gICAgYm9yZGVyLWNvbG9yOiAjMmU2ZGE0O1xcbn1cXG5cXG4udWlyLW1vZGFsIC5idG4ge1xcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICAgIHBhZGRpbmc6IDZweCAxMnB4O1xcbiAgICBtYXJnaW4tYm90dG9tOiAwO1xcbiAgICBmb250LXNpemU6IDE0cHg7XFxuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XFxuICAgIGxpbmUtaGVpZ2h0OiAxLjQyODU3MTQzO1xcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxuICAgIC1tcy10b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbjtcXG4gICAgdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcXG4gICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcXG4gICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcXG4gICAgYmFja2dyb3VuZC1pbWFnZTogbm9uZTtcXG4gICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XFxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcXG59XFxuXFxuLnVpci1tb2RhbCAuYnRuLXhzLCAuYnRuLWdyb3VwLXhzID4gLmJ0biB7XFxuICAgIHBhZGRpbmc6IDFweCA1cHg7XFxuICAgIGZvbnQtc2l6ZTogMTJweDtcXG4gICAgbGluZS1oZWlnaHQ6IDEuNTtcXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xcbn1cXG5cXG5cXG4udHJhbnNpdGlvbkRldGFpbCBzcGFuLmxpbmsge1xcbiAgICBjb2xvcjogd2hpdGU7XFxufVxcblxcbi50cmFuc2l0aW9uSGlzdG9yeSAqOm5vdCguZmEpOm5vdChwcmUpIHtcXG4gICAgZm9udC1mYW1pbHk6IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIC5lbnRlciAudWlyLWhlYWRlciB7XFxuICAgIGZsZXgtZmxvdzogcm93IG5vd3JhcDtcXG59XFxuLnRyYW5zaXRpb25EZXRhaWwgLnVpci1oZWFkZXIge1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWZsb3c6IHJvdy1yZXZlcnNlIG5vd3JhcDtcXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgICBhbGlnbi1pdGVtczogYmFzZWxpbmU7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIC5yZXRhaW4gLnVpci1oZWFkZXIge1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG59XFxuXFxuLnVpci1wYW5lbCB7XFxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XFxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XFxuICAgIGJvcmRlcjogMXB4IHNvbGlkIGxpZ2h0Z3JleTtcXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xcbiAgICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIC4wNSk7XFxuICAgIGJveC1zaGFkb3c6IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIC4wNSk7XFxufVxcblxcbi51aXItcGFuZWwtaGVhZGluZyB7XFxuICAgIGNvbG9yOiAjMzMzO1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1O1xcbiAgICBib3JkZXItY29sb3I6ICNkZGQ7XFxuXFxuICAgIHBhZGRpbmc6IDEwcHggMTVweDtcXG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHRyYW5zcGFyZW50O1xcbiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAzcHg7XFxuICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAzcHg7XFxufVxcblxcbi51aXItcGFuZWwtdGl0bGUge1xcbiAgICBtYXJnaW4tdG9wOiAwO1xcbiAgICBtYXJnaW4tYm90dG9tOiAwO1xcbiAgICBmb250LXNpemU6IDE2cHg7XFxuICAgIGNvbG9yOiBpbmhlcml0O1xcbn1cXG5cXG4udWlyLXBhbmVsLWJvZHkge1xcbiAgICBwYWRkaW5nOiAxNXB4O1xcbn1cXG5cXG5cXG5cXG5cXG5cXG4vKiBTdHlsZXMgZ28gaGVyZSAqL1xcbi51aXItZmFkZSB7XFxuICAgIG9wYWNpdHk6IDA7XFxuICAgIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAuMTVzIGxpbmVhcjtcXG4gICAgLW8tdHJhbnNpdGlvbjogb3BhY2l0eSAuMTVzIGxpbmVhcjtcXG4gICAgdHJhbnNpdGlvbjogb3BhY2l0eSAuMTVzIGxpbmVhcjtcXG59XFxuXFxuLnVpci1mYWRlLmluIHtcXG4gICAgb3BhY2l0eTogMTtcXG59XFxuXFxuLnVpci1tb2RhbC1iYWNrZHJvcCB7XFxuICAgIHBvc2l0aW9uOiBmaXhlZDtcXG4gICAgdG9wOiAwO1xcbiAgICByaWdodDogMDtcXG4gICAgYm90dG9tOiAwO1xcbiAgICBsZWZ0OiAwO1xcbiAgICB6LWluZGV4OiAxMDQwO1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwO1xcbn1cXG5cXG4udWlyLW1vZGFsLWJhY2tkcm9wLmluIHtcXG4gICAgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTUwKTtcXG4gICAgb3BhY2l0eTogLjU7XFxufVxcblxcbi51aXItbW9kYWwge1xcbiAgICBwb3NpdGlvbjogZml4ZWQ7XFxuICAgIHRvcDogMDtcXG4gICAgcmlnaHQ6IDA7XFxuICAgIGJvdHRvbTogMDtcXG4gICAgbGVmdDogMDtcXG4gICAgei1pbmRleDogMTA1MDtcXG4gICAgZGlzcGxheTogYmxvY2s7XFxuICAgIG92ZXJmbG93LXk6IGF1dG87XFxuICAgIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDtcXG4gICAgb3V0bGluZTogMDtcXG59XFxuXFxuXFxuLnVpci1tb2RhbC1kaWFsb2cge1xcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICAgIHdpZHRoOiBhdXRvO1xcbiAgICBtYXJnaW46IDEwcHg7XFxufVxcblxcbi51aXItbW9kYWwtY29udGVudCB7XFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcXG4gICAgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6IHBhZGRpbmctYm94O1xcbiAgICBiYWNrZ3JvdW5kLWNsaXA6IHBhZGRpbmctYm94O1xcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjOTk5O1xcbiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIC4yKTtcXG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xcbiAgICBvdXRsaW5lOiAwO1xcbiAgICAtd2Via2l0LWJveC1zaGFkb3c6IDAgM3B4IDlweCByZ2JhKDAsIDAsIDAsIC41KTtcXG4gICAgYm94LXNoYWRvdzogMCAzcHggOXB4IHJnYmEoMCwgMCwgMCwgLjUpO1xcbn1cXG5cXG4udWlyLW1vZGFsLWhlYWRlciB7XFxuICAgIHBhZGRpbmc6IDE1cHg7XFxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTVlNWU1O1xcbn1cXG5cXG4udWlyLXJlc29sdmUtaGVhZGVyIHtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1mbG93OiByb3cgbm93cmFwO1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XFxuICAgIGJhY2tncm91bmQtY29sb3I6IGNvcm5mbG93ZXJibHVlO1xcbn1cXG5cXG4udWlyLW1vZGFsLWJvZHkge1xcbiAgICBjb2xvcjogYmxhY2s7XFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgcGFkZGluZzogMTVweDtcXG59XFxuXFxuLnVpci1tb2RhbC1mb290ZXIge1xcbiAgICBwYWRkaW5nOiAxNXB4O1xcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcXG4gICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlNWU1ZTU7XFxufVxcblxcbi51aXItaWNvbiB7XFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gICAgaGVpZ2h0OiAxZW07IHdpZHRoOiAxZW07XFxuICAgIG1hcmdpbjogMC4yNWVtO1xcbiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIDA7XFxufVxcblxcbi51aXItc3BpbiB7XFxuICAgIGFuaW1hdGlvbjogdWlyc3BpbiAycyBpbmZpbml0ZTtcXG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XFxufVxcblxcbi51aXItcm90YXRlLTM1IHtcXG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMzVkZWcpO1xcbiAgICBvcGFjaXR5OiAwLjU7XFxufVxcblxcbkBrZXlmcmFtZXMgdWlyc3BpbiB7XFxuICAgIDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cXG4gICAgMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cXG59XFxuXFxuXFxuLnVpci1pY29udy1zcGlubmVyICAgICAgIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKFxcXCIuLi8uLi9pbWFnZXMvdy8xNi9zcGlubmVyLnBuZ1xcXCIpOyB9XFxuLnVpci1pY29udy1jaGVjayAgICAgICAgIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKFxcXCIuLi8uLi9pbWFnZXMvdy8xNi9jaGVjay5wbmdcXFwiKTsgfVxcbi51aXItaWNvbnctY2lyY2xlLW8gICAgICB7IGJhY2tncm91bmQtaW1hZ2U6IHVybChcXFwiLi4vLi4vaW1hZ2VzL3cvMTYvY2lyY2xlLW8ucG5nXFxcIik7IH1cXG4udWlyLWljb253LXNoYXJlICAgICAgICAgeyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXFxcIi4uLy4uL2ltYWdlcy93LzE2L3NoYXJlLnBuZ1xcXCIpOyB9XFxuLnVpci1pY29udy1jbG9zZSAgICAgICAgIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKFxcXCIuLi8uLi9pbWFnZXMvdy8xNi9jbG9zZS5wbmdcXFwiKTsgfVxcblxcbi51aXItaWNvbi10aHVtYi10YWNrICAgICB7IGJhY2tncm91bmQtaW1hZ2U6IHVybChcXFwiLi4vLi4vaW1hZ2VzLzE2L3RodW1iLXRhY2sucG5nXFxcIik7IH1cXG4udWlyLWljb24tdG9nZ2xlLW9uICAgICAgeyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXFxcIi4uLy4uL2ltYWdlcy8xNi90b2dnbGUtb24ucG5nXFxcIik7IH1cXG4udWlyLWljb24tdG9nZ2xlLW9mZiAgICAgeyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXFxcIi4uLy4uL2ltYWdlcy8xNi90b2dnbGUtb2ZmLnBuZ1xcXCIpOyB9XFxuXCJdLFwic291cmNlUm9vdFwiOlwid2VicGFjazovL1wifV0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogMjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUJtSkxSMFFBL3dEL0FQK2d2YWVUQUFBQkNFbEVRVlE0amEyU01VNENZUkNGMzREYjZSSVNtaTA0Z0NaYWNnRHVZRWxEWWNGWkxMV3gxYzRiNkJFMHNiYXlzQkVoMGFDZG0zdzJzektRLzFjVG1HU3orNzk1ODk3TXptL0tCR0NTanYxNGJXYmt1RG1CQ2N1WTVIaXRVTkFHeHNEUW9TcndLdUFBZUFUZWdWSEtjZXh1WDBBRmRJRUxmN3JBVmVqb3JhbmJDUnBQa21wSlUwa2ZadllwNlNRWXZBUnUvRjdwb2dKMk03azk0QlM0QlBiWGt3WVVTZFcwV09GYitnRnVnVmVnOTQvaUhqQURicVRsRmxoNy82bXp3dDE0aEswRTBBSHVnYk5mT09mQUhWQTJXTHdIcGFSRGhkbWFuMnBtYzRjR2tvNGtkU1F0VWc3OVJ0M25uUGwyQ3NkS29COXJZZ2N5cytkd3JDVTllRWUxNXhkSjUwM2lHem9qNGZPaURqMEZBQUFBQUVsRlRrU3VRbUNDXCJcblxuLyoqKi8gfSksXG4vKiAyNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQm1KTFIwUUEvd0QvQVArZ3ZhZVRBQUFBYzBsRVFWUTRqZVhRdXdtQVFCQ0U0U3ZFT3dPdHdqSzBLRUVRRE96T1J5RDI4UnQ0d25Mb1BZd0VKOTM1SmxpbC9oVWdCMGFnZkl0WHp1eUFTY0ZHNEN1MVd5cUFBZEFSdUhPeEJqWjduSUZNNE1XTGJiRnhTaE5RUldFeDB1SlBIL09zcDVFdzlvekU0NXVSZEN4R2RMajFoUnpwUXdOUDJDd3Y2d0FBQUFCSlJVNUVya0pnZ2c9PVwiXG5cbi8qKiovIH0pLFxuLyogMjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUJtSkxSMFFBL3dEL0FQK2d2YWVUQUFBQXpFbEVRVlE0amFXVFBRN0NNQXlGbnprTDdJVU5SdG9EbFB1Z1NreGNpd2xXRnJyMENIQ0dmZ3c0cUdyVEZCVkxVU1Q3K2ZubkpkS2ZaakVuWUpMV2twYnVhaVRkell4SlJ1QUExQXl0QnNxcDVCUFFlc0lGT1B1NXVLOEZxbFRsRm5nQ2VTU2VBeS9IbFAyZ2RkcmVKenJNSGZQd1BYMERtOUIyY3NZUE5veVRTZExDL1dIYjF5a0NTVGUvVjEyQzJSWUlHcjkzUCtSc2V6bURKUTRVNk9DSzZCSTlHR1I4amNoWWpNcllBVlUvUEtSamNrQ2c5QmI3OW9oVmpuNG1KOHJrVWtscXpPeWVyRHpYM3BEOUhna1lkV1RWQUFBQUFFbEZUa1N1UW1DQ1wiXG5cbi8qKiovIH0pLFxuLyogMjYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUJtSkxSMFFBL3dEL0FQK2d2YWVUQUFBQTBVbEVRVlE0amIyU3ZRNEJRUlNGei9XWFNFU0YwRzZqOGc3aUFYUWE0UUUwYWkraXA5WklSRFRlUVVHalVKSjRCVXMraGRsa2JWaXhFcWVaeVowNTM1MlpNOUsvQkN5QXppK0FBM0FGdXVGNjVzM212S1NxcExLa29pdm5KYVVsVFFIZnpHWlJVdzRZQUd2Z1FyejhwK3NBRldEendmUUswZ3dBeXkvTkFFZkFFK0FsTk5lRDdyM0lzY1pBQzZnQjJVZ0t6MmFYUXNuTmI1TGFacmFLU2ZNa3FXVm0rL0FEOWgxNUhtTVVNQXAzRGk4MEhHQVlCM2lubEpsdEplMGtuUk1CM0RqUjQ1Y2xFMUFBdk1TQVgzUUhMYnBQT2FvTldhMEFBQUFBU1VWT1JLNUNZSUk9XCJcblxuLyoqKi8gfSksXG4vKiAyNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQm1KTFIwUUEvd0QvQVArZ3ZhZVRBQUFBbEVsRVFWUTRqZDNRTVFxRFFCaEVZVThrcEJaaW80MXBUQm92NUIzMUlFRkVoQytOa2tVMmE3cEFCcllaZUkrZFA4ditMN2dnai9RNUxtZHdneGtUNnFDdnQyNUdreEtNM3BrMmNJZjNqQ2xCaStVZ0NlRUY3ZG1NMi9iVll4YmNrM0FnNlNPQy9sdjRpbWRFTUtFNmc2dkk1dU5OUGtzd0hPREg5a0xKa0JKMFdIYzQ2SGZKaXU1c1Jva2kwaGNvay9CUDhnSmNTMEF5Z1BCbytnQUFBQUJKUlU1RXJrSmdnZz09XCJcblxuLyoqKi8gfSksXG4vKiAyOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQm1KTFIwUUEvd0QvQVArZ3ZhZVRBQUFBckVsRVFWUTRqYlhTUFE1QlFSaUY0Y2RmWlFXWHBkZ0JXMUxaamF1Z3Nnb3FEZEZmS3BWRVEyaHVNY2I5RTNHU1U4eVhNMi9PWkQ1K1ZLdGdsbUNNVGpSL1lJMVRIVFRGczhUekpxMG15SERCTGJpYzVjMGFLYzI5Q1FCcFViRGRsRmltdndKNnViOVNIeXZjZmY3QUhjczhVNnBad2NYWXM2b25qQnEwZk12RW01aGdFSndYT0dBYXpETEJObllqd01uN3F1NXd4TGFzVGd5SXRjZTVLbEFIT09CYWs2bFVnbUZWNEFWNXJUSmY3Uk9LdUFBQUFBQkpSVTVFcmtKZ2dnPT1cIlxuXG4vKioqLyB9KSxcbi8qIDI5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkFBQUFBUUNBWUFBQUFmOC85aEFBQUFCbUpMUjBRQS93RC9BUCtndmFlVEFBQUFwVWxFUVZRNGpjWFNQUXJDUUJRRTRFOUI4UmcyZ21XMFV2RXllZ1FQNDFYc0RXaXJoZURQSWJRUnRCQXRURUFDdTRvcE1yREZzalB2dlpsOVZJMWE0ZDVCRjYwQS80WTlUc1dIUHRaNEJzNERHNlE0WTRWZUxoN2hHaEV2MFA1bzFzUXNLelNRalJNU0w5RUkySm5nS0NKK1lod1E4ODV2Rnl0d1J6MVNBT2JmQ0QraHRJVllpS2x3aUZNY1lLamtOMExpdlJ5eFJkcG1FMTB5YnBMNytNVGZxMXdkWGlJWFdXTEhaTFRVQUFBQUFFbEZUa1N1UW1DQ1wiXG5cbi8qKiovIH0pLFxuLyogMzAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUJtSkxSMFFBL3dEL0FQK2d2YWVUQUFBQTRVbEVRVlE0amNYU3NVb0RVUkFGMEpQRkRXbXNyT3hzaEJRS3djcUkrUmUzdHRMQ1QvQVA5RnNFSTJnVzB3cVNKVUViL1lLazB5YkVZcCt3YkhiWHdpSVhYdkZtN3AyWmQrZXhhYlJLOTMxMDBhbmhmMk9HOTNLQkk5d0U4UVRiT0VTRVozd0ZYZ2NIbU9JY0wzQ0NPUzdRTG5UYnd4MGVFQmZpYlZ3R3piRXdUbEl6Y293UnJpcHlDZDRncys1RkVhZjRySWkza0VWNHhLcWh3Qmk3MkNuRlYzaUtHb1RGVG8zNDZ3a0RmTlFVemlLNXEyYzE0aGpYdUszSUpkaUN2dVkxRG4rSkFXdHJoSjdjckFWU3ZHSXBOeXJGZlRocDRJeUQ1djlmZWZQNEFlRVFMN2F3K2VLL0FBQUFBRWxGVGtTdVFtQ0NcIlxuXG4vKioqLyB9KSxcbi8qIDMxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG5cdCAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG5cdCAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG5cdCAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuXHQgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG5cdCAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG5cdCAgICB9O1xyXG5cdH0pKCk7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdHZhciBwcmVhY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0dmFyIHRyYW5zaXRpb25Qb3BvdmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcclxuXHR2YXIgYnJlYWRjcnVtYkFycm93XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTtcclxuXHR2YXIgc3RyaW5nc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XHJcblx0dmFyIGNhbmNlbGFibGVQcm9taXNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KTtcclxuXHR2YXIgVHJhbnNpdGlvblZpZXcgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG5cdCAgICBfX2V4dGVuZHMoVHJhbnNpdGlvblZpZXcsIF9zdXBlcik7XHJcblx0ICAgIGZ1bmN0aW9uIFRyYW5zaXRpb25WaWV3KCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcblx0ICAgICAgICBfdGhpcy50cmFuc2l0aW9uUHJvbWlzZSA9IG51bGw7XHJcblx0ICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcclxuXHQgICAgICAgICAgICBzdGF0dXM6ICdydW5uaW5nJyxcclxuXHQgICAgICAgICAgICBtZXNzYWdlOiBudWxsLFxyXG5cdCAgICAgICAgICAgIHJlamVjdGlvbjogbnVsbCxcclxuXHQgICAgICAgICAgICBwaW5uZWQ6IGZhbHNlLFxyXG5cdCAgICAgICAgICAgIGV4cGFuZGVkOiBmYWxzZSxcclxuXHQgICAgICAgICAgICBvcGVuOiBmYWxzZSxcclxuXHQgICAgICAgICAgICBkZXJlZ2lzdGVyRnVuY3Rpb25zOiBbXVxyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIF90aGlzLnRvZ2dsZVBpbiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsgcGlubmVkOiAhX3RoaXMuc3RhdGUucGlubmVkIH0pOyB9O1xyXG5cdCAgICAgICAgX3RoaXMudG9nZ2xlRXhwYW5kID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc2V0U3RhdGUoeyBleHBhbmRlZDogIV90aGlzLnN0YXRlLmV4cGFuZGVkIH0pOyB9O1xyXG5cdCAgICAgICAgX3RoaXMub3BlbiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsgb3BlbjogdHJ1ZSB9KTsgfTtcclxuXHQgICAgICAgIF90aGlzLmNsb3NlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc2V0U3RhdGUoeyBvcGVuOiBmYWxzZSB9KTsgfTtcclxuXHQgICAgICAgIHJldHVybiBfdGhpcztcclxuXHQgICAgfVxyXG5cdCAgICBUcmFuc2l0aW9uVmlldy5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgdmFyIHRyYW5zID0gdGhpcy5wcm9wcy50cmFuc2l0aW9uO1xyXG5cdCAgICAgICAgdmFyIHNldE1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG5cdCAgICAgICAgICAgIC8vIFRyYW5zaXRpb24gaG9va3MgYXJlIGNvbXB1dGVkIHdoZW4gdGhlIHRyYW5zIHN0YXJ0czsgdGhleSBjYW4ndCBiZSByZW1vdmVkIHdoaWxlIHRoZSB0cmFucyBpcyBydW5uaW5nLlxyXG5cdCAgICAgICAgICAgIGlmICghX3RoaXMudHJhbnNpdGlvblByb21pc2UuaXNDYW5jZWxlZCkge1xyXG5cdCAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IG1lc3NhZ2U6IG1lc3NhZ2UgfSk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIHZhciBzdGF0ZW5hbWUgPSBmdW5jdGlvbiAoc3RhdGUpIHsgcmV0dXJuIHN0YXRlLm5hbWUgfHwgXCIocm9vdClcIjsgfTtcclxuXHQgICAgICAgIHZhciBmbnMgPSBbXTtcclxuXHQgICAgICAgIGZucy5wdXNoKHRyYW5zLm9uU3RhcnQoe30sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldE1lc3NhZ2UoXCJTdGFydGluZy4uLlwiKTsgfSwgeyBwcmlvcml0eTogMTAwMDAgfSkpO1xyXG5cdCAgICAgICAgZm5zLnB1c2godHJhbnMub25FeGl0KHt9LCBmdW5jdGlvbiAodCwgc3RhdGUpIHsgcmV0dXJuIHNldE1lc3NhZ2UoXCJFeGl0aW5nIFwiICsgc3RhdGVuYW1lKHN0YXRlKSk7IH0sIHsgcHJpb3JpdHk6IDEwMDAwIH0pKTtcclxuXHQgICAgICAgIGZucy5wdXNoKHRyYW5zLm9uUmV0YWluKHt9LCBmdW5jdGlvbiAodCwgc3RhdGUpIHsgcmV0dXJuIHNldE1lc3NhZ2UoXCJSZXRhaW5lZCBcIiArIHN0YXRlbmFtZShzdGF0ZSkpOyB9LCB7IHByaW9yaXR5OiAxMDAwMCB9KSk7XHJcblx0ICAgICAgICBmbnMucHVzaCh0cmFucy5vbkVudGVyKHt9LCBmdW5jdGlvbiAodCwgc3RhdGUpIHsgcmV0dXJuIHNldE1lc3NhZ2UoXCJFbnRlcmluZyBcIiArIHN0YXRlbmFtZShzdGF0ZSkpOyB9LCB7IHByaW9yaXR5OiAxMDAwMCB9KSk7XHJcblx0ICAgICAgICBmbnMucHVzaCh0cmFucy5vbkZpbmlzaCh7fSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0TWVzc2FnZShcIkZpbmlzaGluZy4uLlwiKTsgfSkpO1xyXG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRlcmVnaXN0ZXJGdW5jdGlvbnM6IGZucyB9KTtcclxuXHQgICAgICAgIHZhciBzdWNjZXNzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc2V0U3RhdGUoeyBzdGF0dXM6IFwic3VjY2Vzc1wiLCBtZXNzYWdlOiBudWxsIH0pOyB9O1xyXG5cdCAgICAgICAgdmFyIGVycm9yID0gZnVuY3Rpb24gKGVycikge1xyXG5cdCAgICAgICAgICAgIGlmIChlcnIgJiYgZXJyLmlzQ2FuY2VsZWQpXHJcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHQgICAgICAgICAgICB2YXIgc3RhdHVzID0gXCJlcnJvclwiLCByZWplY3Rpb24gPSBudWxsO1xyXG5cdCAgICAgICAgICAgIGlmIChlcnIpIHtcclxuXHQgICAgICAgICAgICAgICAgcmVqZWN0aW9uID0gZXJyICYmIGVyci5tZXNzYWdlO1xyXG5cdCAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGVyciAmJiBlcnIudHlwZTtcclxuXHQgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gMiAmJiBlcnIucmVkaXJlY3RlZCA9PT0gdHJ1ZSkge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gXCJyZWRpcmVjdGVkXCI7XHJcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0U3RhdGUgPSBlcnJbJ2RldGFpbCddO1xyXG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRvU3RhdGUgPSB0YXJnZXRTdGF0ZS5uYW1lKCk7XHJcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdG9QYXJhbXMgPSBKU09OLnN0cmluZ2lmeSh0YXJnZXRTdGF0ZS5wYXJhbXMoKSk7XHJcblx0ICAgICAgICAgICAgICAgICAgICByZWplY3Rpb24gPSBzdHJpbmdzXzEubWF4TGVuZ3RoKDEwMCwgdG9TdGF0ZSArIFwiKFwiICsgdG9QYXJhbXMpICsgXCIpXCI7XHJcblx0ICAgICAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gNSkge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gXCJpZ25vcmVkXCI7XHJcblx0ICAgICAgICAgICAgICAgICAgICByZWplY3Rpb24gPSBcIkFsbCBzdGF0ZXMgYW5kIHBhcmFtZXRlcnMgaW4gdGhlIFRvIGFuZCBGcm9tIHBhdGhzIGFyZSBpZGVudGljYWwuXCI7XHJcblx0ICAgICAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzdGF0dXM6IHN0YXR1cywgcmVqZWN0aW9uOiByZWplY3Rpb24sIG1lc3NhZ2U6IG51bGwgfSk7XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgdGhpcy50cmFuc2l0aW9uUHJvbWlzZSA9IGNhbmNlbGFibGVQcm9taXNlXzEubWFrZUNhbmNlbGFibGUodHJhbnMucHJvbWlzZSk7XHJcblx0ICAgICAgICB0aGlzLnRyYW5zaXRpb25Qcm9taXNlLnByb21pc2UudGhlbihzdWNjZXNzLCBlcnJvcik7XHJcblx0ICAgIH07XHJcblx0ICAgIFRyYW5zaXRpb25WaWV3LnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHRoaXMudHJhbnNpdGlvblByb21pc2UuY2FuY2VsKCk7XHJcblx0ICAgICAgICBpZiAodGhpcy5zdGF0ZS5kZXJlZ2lzdGVyRnVuY3Rpb25zKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5zdGF0ZS5kZXJlZ2lzdGVyRnVuY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7IHJldHVybiBmbigpOyB9KTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgVHJhbnNpdGlvblZpZXcucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHJldHVybiAocHJlYWN0XzEuaChcImRpdlwiLCB7IG9uTW91c2VFbnRlcjogdGhpcy5vcGVuLCBvbk1vdXNlTGVhdmU6IHRoaXMuY2xvc2UgfSxcclxuXHQgICAgICAgICAgICBwcmVhY3RfMS5oKHRyYW5zaXRpb25Qb3BvdmVyXzEuVHJhbnNpdGlvblBvcG92ZXIsIHsgdHJhbnNpdGlvbjogdGhpcy5wcm9wcy50cmFuc2l0aW9uLCBzdGF0dXM6IHRoaXMuc3RhdGUuc3RhdHVzLCByZWplY3Rpb246IHRoaXMuc3RhdGUucmVqZWN0aW9uLCBwaW5uZWQ6IHRoaXMuc3RhdGUucGlubmVkLCBleHBhbmRlZDogdGhpcy5zdGF0ZS5leHBhbmRlZCwgb3BlbjogdGhpcy5zdGF0ZS5vcGVuLCB0b2dnbGVQaW5uZWQ6IHRoaXMudG9nZ2xlUGluLCB0b2dnbGVFeHBhbmQ6IHRoaXMudG9nZ2xlRXhwYW5kIH0pLFxyXG5cdCAgICAgICAgICAgIHByZWFjdF8xLmgoYnJlYWRjcnVtYkFycm93XzEuQnJlYWRjcnVtYkFycm93LCB7IHRyYW5zaXRpb246IHRoaXMucHJvcHMudHJhbnNpdGlvbiwgc3RhdHVzOiB0aGlzLnN0YXRlLnN0YXR1cywgbWVzc2FnZTogdGhpcy5zdGF0ZS5tZXNzYWdlLCB0b2dnbGVFeHBhbmQ6IHRoaXMudG9nZ2xlRXhwYW5kIH0pKSk7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBUcmFuc2l0aW9uVmlldztcclxuXHR9KHByZWFjdF8xLkNvbXBvbmVudCkpO1xyXG5cdGV4cG9ydHMuVHJhbnNpdGlvblZpZXcgPSBUcmFuc2l0aW9uVmlldztcclxuXG5cbi8qKiovIH0pLFxuLyogMzIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcblx0ICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcblx0ICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcblx0ICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG5cdCAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcblx0ICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcblx0ICAgIH07XHJcblx0fSkoKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0dmFyIHByZWFjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcclxuXHR2YXIgcG9wb3ZlckhlYWRpbmdfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xyXG5cdHZhciB0cmFuc1N1bW1hcnlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xyXG5cdHZhciBub2RlUGF0aHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xyXG5cdHZhciBUcmFuc2l0aW9uUG9wb3ZlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcblx0ICAgIF9fZXh0ZW5kcyhUcmFuc2l0aW9uUG9wb3ZlciwgX3N1cGVyKTtcclxuXHQgICAgZnVuY3Rpb24gVHJhbnNpdGlvblBvcG92ZXIoKSB7XHJcblx0ICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcblx0ICAgIH1cclxuXHQgICAgVHJhbnNpdGlvblBvcG92ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICBpZiAoIXRoaXMucHJvcHMub3BlbiAmJiAhdGhpcy5wcm9wcy5waW5uZWQpXHJcblx0ICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblx0ICAgICAgICB2YXIgY2xhc3NlcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwidHJhbnNpdGlvbkRldGFpbCB1aXItcGFuZWwgcGFuZWwtZGVmYXVsdCBcIiArXHJcblx0ICAgICAgICAgICAgKF90aGlzLnByb3BzLnBpbm5lZCA/IFwicGluIFwiIDogXCJcIikgK1xyXG5cdCAgICAgICAgICAgIChfdGhpcy5wcm9wcy5leHBhbmRlZCA/IFwiZXhwYW5kIFwiIDogXCJcIikgK1xyXG5cdCAgICAgICAgICAgIChfdGhpcy5wcm9wcy5vcGVuID8gXCJzaG93RGV0YWlsIFwiIDogXCJcIik7IH07XHJcblx0ICAgICAgICByZXR1cm4gKHByZWFjdF8xLmgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsYXNzZXMoKSB9LFxyXG5cdCAgICAgICAgICAgIHByZWFjdF8xLmgocG9wb3ZlckhlYWRpbmdfMS5Qb3BvdmVySGVhZGluZywgeyB0cmFuc2l0aW9uOiB0aGlzLnByb3BzLnRyYW5zaXRpb24sIHBpbm5lZDogdGhpcy5wcm9wcy5waW5uZWQsIGV4cGFuZGVkOiB0aGlzLnByb3BzLmV4cGFuZGVkLCB0b2dnbGVQaW5uZWQ6IHRoaXMucHJvcHMudG9nZ2xlUGlubmVkLCB0b2dnbGVFeHBhbmQ6IHRoaXMucHJvcHMudG9nZ2xlRXhwYW5kIH0pLFxyXG5cdCAgICAgICAgICAgIHByZWFjdF8xLmgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidWlyLXBhbmVsLWJvZHlcIiB9LFxyXG5cdCAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKHRyYW5zU3VtbWFyeV8xLlRyYW5zU3VtbWFyeSwgeyB0cmFuczogdGhpcy5wcm9wcy50cmFuc2l0aW9uLCBzdGF0dXM6IHRoaXMucHJvcHMuc3RhdHVzLCByZWplY3Rpb246IHRoaXMucHJvcHMucmVqZWN0aW9uIH0pLFxyXG5cdCAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwiaHJcIiwgbnVsbCksXHJcblx0ICAgICAgICAgICAgICAgIHByZWFjdF8xLmgobm9kZVBhdGhzXzEuTm9kZVBhdGhzLCB7IHRyYW5zaXRpb246IHRoaXMucHJvcHMudHJhbnNpdGlvbiB9KSksXHJcblx0ICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkb3duQXJyb3dcIiB9KSkpO1xyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gVHJhbnNpdGlvblBvcG92ZXI7XHJcblx0fShwcmVhY3RfMS5Db21wb25lbnQpKTtcclxuXHRleHBvcnRzLlRyYW5zaXRpb25Qb3BvdmVyID0gVHJhbnNpdGlvblBvcG92ZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDMzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG5cdCAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG5cdCAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG5cdCAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuXHQgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG5cdCAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG5cdCAgICB9O1xyXG5cdH0pKCk7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdHZhciBwcmVhY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0dmFyIFBvcG92ZXJIZWFkaW5nID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuXHQgICAgX19leHRlbmRzKFBvcG92ZXJIZWFkaW5nLCBfc3VwZXIpO1xyXG5cdCAgICBmdW5jdGlvbiBQb3BvdmVySGVhZGluZygpIHtcclxuXHQgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuXHQgICAgfVxyXG5cdCAgICBQb3BvdmVySGVhZGluZy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHZhciB0YWNrQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBcInVpci1pY29uIHVpci1pY29uLXRodW1iLXRhY2sgXCIgKyAoX3RoaXMucHJvcHMucGlubmVkID8gXCJcIiA6IFwidWlyLXJvdGF0ZS0zNVwiKTsgfTtcclxuXHQgICAgICAgIHZhciBleHBhbmRDbGFzcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwidWlyLWljb24gdG9vbHRpcC1yaWdodCBcIiArIChfdGhpcy5wcm9wcy5leHBhbmRlZCA/IFwidWlyLWljb24tdG9nZ2xlLW9uXCIgOiBcInVpci1pY29uLXRvZ2dsZS1vZmZcIik7IH07XHJcblx0ICAgICAgICByZXR1cm4gKHByZWFjdF8xLmgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidWlyLXBhbmVsLWhlYWRpbmcgdWlyLWhlYWRlclwiIH0sXHJcblx0ICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IHN0eWxlOiB7IGN1cnNvcjogXCJwb2ludGVyXCIgfSwgb25DbGljazogdGhpcy5wcm9wcy50b2dnbGVQaW5uZWQgfSxcclxuXHQgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcImlcIiwgeyBjbGFzc05hbWU6IHRhY2tDbGFzcygpIH0pKSxcclxuXHQgICAgICAgICAgICBwcmVhY3RfMS5oKFwiaDNcIiwgeyBjbGFzc05hbWU6IFwidWlyLXBhbmVsLXRpdGxlXCIgfSxcclxuXHQgICAgICAgICAgICAgICAgXCJUcmFuc2l0aW9uICNcIixcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy50cmFuc2l0aW9uLiRpZCksXHJcblx0ICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IHN0eWxlOiB7IGN1cnNvcjogXCJwb2ludGVyXCIgfSwgb25DbGljazogdGhpcy5wcm9wcy50b2dnbGVFeHBhbmQgfSxcclxuXHQgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcImlcIiwgeyBjbGFzc05hbWU6IGV4cGFuZENsYXNzKCkgfSkpKSk7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBQb3BvdmVySGVhZGluZztcclxuXHR9KHByZWFjdF8xLkNvbXBvbmVudCkpO1xyXG5cdGV4cG9ydHMuUG9wb3ZlckhlYWRpbmcgPSBQb3BvdmVySGVhZGluZztcclxuXG5cbi8qKiovIH0pLFxuLyogMzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcblx0ICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcblx0ICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcblx0ICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG5cdCAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcblx0ICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcblx0ICAgIH07XHJcblx0fSkoKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0dmFyIHByZWFjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcclxuXHR2YXIga2V5c0FuZFZhbHVlc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7XHJcblx0dmFyIFRyYW5zU3VtbWFyeSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcblx0ICAgIF9fZXh0ZW5kcyhUcmFuc1N1bW1hcnksIF9zdXBlcik7XHJcblx0ICAgIGZ1bmN0aW9uIFRyYW5zU3VtbWFyeSgpIHtcclxuXHQgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuXHQgICAgfVxyXG5cdCAgICBUcmFuc1N1bW1hcnkucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHJldHVybiAocHJlYWN0XzEuaChcInRhYmxlXCIsIHsgY2xhc3NOYW1lOiBcInN1bW1hcnlcIiB9LFxyXG5cdCAgICAgICAgICAgIHByZWFjdF8xLmgoXCJ0Ym9keVwiLCBudWxsLFxyXG5cdCAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwidHJcIiwgbnVsbCxcclxuXHQgICAgICAgICAgICAgICAgICAgIHByZWFjdF8xLmgoXCJ0ZFwiLCBudWxsLCBcIkZyb20gU3RhdGU6XCIpLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcInRkXCIsIG51bGwsIHRoaXMucHJvcHMudHJhbnMuZnJvbSgpLm5hbWUgfHwgJyhyb290KScpKSxcclxuXHQgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcInRyXCIsIG51bGwsXHJcblx0ICAgICAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwidGRcIiwgbnVsbCwgXCJUbyBTdGF0ZTpcIiksXHJcblx0ICAgICAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwidGRcIiwgbnVsbCwgdGhpcy5wcm9wcy50cmFucy50bygpLm5hbWUgfHwgJyhyb290KScpKSxcclxuXHQgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcInRyXCIsIG51bGwsXHJcblx0ICAgICAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwidGRcIiwgeyBjb2xTcGFuOiAxIH0sIFwiUGFyYW1ldGVyczpcIiksXHJcblx0ICAgICAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwidGRcIiwgeyBjb2xTcGFuOiAxIH0sXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChrZXlzQW5kVmFsdWVzXzEuS2V5c0FuZFZhbHVlcywgeyBkYXRhOiB0aGlzLnByb3BzLnRyYW5zLnBhcmFtcygpLCBsYWJlbHM6IHsgc2VjdGlvbjogJycsIG1vZGFsVGl0bGU6ICdQYXJhbWV0ZXIgdmFsdWU6ICcgfSwgY2xhc3NlczogeyBvdXRlcmRpdjogJycsIGtleXZhbGRpdjogJ2tleXZhbHVlJywgc2VjdGlvbjogJycsIF9rZXk6ICcnLCB2YWx1ZTogJycgfSB9KSkpLFxyXG5cdCAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwidHJcIiwgbnVsbCxcclxuXHQgICAgICAgICAgICAgICAgICAgIHByZWFjdF8xLmgoXCJ0ZFwiLCBudWxsLCBcIk91dGNvbWU6XCIpLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcInRkXCIsIG51bGwsXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zdGF0dXMsXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5yZWplY3Rpb25cclxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBwcmVhY3RfMS5oKFwic3BhblwiLCBudWxsLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI6IFwiLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5yZWplY3Rpb24pXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCkpKSkpO1xyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gVHJhbnNTdW1tYXJ5O1xyXG5cdH0ocHJlYWN0XzEuQ29tcG9uZW50KSk7XHJcblx0ZXhwb3J0cy5UcmFuc1N1bW1hcnkgPSBUcmFuc1N1bW1hcnk7XHJcblxuXG4vKioqLyB9KSxcbi8qIDM1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG5cdCAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG5cdCAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG5cdCAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuXHQgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG5cdCAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG5cdCAgICB9O1xyXG5cdH0pKCk7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdHZhciBwcmVhY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0dmFyIG1vZGFsXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcclxuXHR2YXIgcmVzb2x2ZURhdGFfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpO1xyXG5cdHZhciBzdHJpbmdzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcclxuXHR2YXIgaXNPYmplY3QgPSBmdW5jdGlvbiAodmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09PSAnb2JqZWN0JzsgfTtcclxuXHR2YXIgZGlzcGxheVZhbHVlID0gZnVuY3Rpb24gKG9iamVjdCkge1xyXG5cdCAgICBpZiAob2JqZWN0ID09PSB1bmRlZmluZWQpXHJcblx0ICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIjtcclxuXHQgICAgaWYgKG9iamVjdCA9PT0gbnVsbClcclxuXHQgICAgICAgIHJldHVybiBcIm51bGxcIjtcclxuXHQgICAgaWYgKHR5cGVvZiBvYmplY3QgPT09ICdzdHJpbmcnKVxyXG5cdCAgICAgICAgcmV0dXJuICdcIicgKyBzdHJpbmdzXzEubWF4TGVuZ3RoKDEwMCwgb2JqZWN0KSArICdcIic7XHJcblx0ICAgIGlmIChBcnJheS5pc0FycmF5KG9iamVjdCkpXHJcblx0ICAgICAgICByZXR1cm4gXCJbQXJyYXldXCI7XHJcblx0ICAgIGlmIChpc09iamVjdChvYmplY3QpKVxyXG5cdCAgICAgICAgcmV0dXJuIFwiW09iamVjdF1cIjtcclxuXHQgICAgaWYgKHR5cGVvZiBvYmplY3QudG9TdHJpbmcgPT09ICdmdW5jdGlvbicpXHJcblx0ICAgICAgICByZXR1cm4gc3RyaW5nc18xLm1heExlbmd0aCgxMDAsIG9iamVjdC50b1N0cmluZygpKTtcclxuXHQgICAgcmV0dXJuIG9iamVjdDtcclxuXHR9O1xyXG5cdHZhciBkZWZhdWx0Q2xhc3MgPSB7XHJcblx0ICAgIG91dGVyZGl2OiAncGFyYW0nLFxyXG5cdCAgICBrZXl2YWxkaXY6ICdrZXl2YWx1ZScsXHJcblx0ICAgIHNlY3Rpb246ICdwYXJhbXNsYWJlbCBkZWVtcGhhc2l6ZScsXHJcblx0ICAgIF9rZXk6ICdwYXJhbWlkJyxcclxuXHQgICAgdmFsdWU6ICdwYXJhbXZhbHVlJ1xyXG5cdH07XHJcblx0dmFyIEtleXNBbmRWYWx1ZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG5cdCAgICBfX2V4dGVuZHMoS2V5c0FuZFZhbHVlcywgX3N1cGVyKTtcclxuXHQgICAgZnVuY3Rpb24gS2V5c0FuZFZhbHVlcygpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG5cdCAgICAgICAgX3RoaXMuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICByZXR1cm4gIV90aGlzLnByb3BzLmRhdGEgfHwgT2JqZWN0LmtleXMoX3RoaXMucHJvcHMuZGF0YSkubGVuZ3RoID09PSAwO1xyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIF90aGlzLmNsYXNzID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuXHQgICAgICAgICAgICByZXR1cm4gX3RoaXMucHJvcHMuY2xhc3NlcyAmJiBfdGhpcy5wcm9wcy5jbGFzc2VzW25hbWVdICE9PSB1bmRlZmluZWQgP1xyXG5cdCAgICAgICAgICAgICAgICBfdGhpcy5wcm9wcy5jbGFzc2VzW25hbWVdIDpcclxuXHQgICAgICAgICAgICAgICAgZGVmYXVsdENsYXNzW25hbWVdO1xyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIHJldHVybiBfdGhpcztcclxuXHQgICAgfVxyXG5cdCAgICBLZXlzQW5kVmFsdWVzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgdmFyIHJlbmRlclZhbHVlID0gZnVuY3Rpb24gKGtleSwgdmFsKSB7XHJcblx0ICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHZhbCkpXHJcblx0ICAgICAgICAgICAgICAgIHJldHVybiAocHJlYWN0XzEuaChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwibGlua1wiLCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBtb2RhbF8xLk1vZGFsLnNob3coX3RoaXMucHJvcHMubGFiZWxzLCBrZXksIHZhbCwgcmVzb2x2ZURhdGFfMS5SZXNvbHZlRGF0YSk7IH0gfSwgXCJbT2JqZWN0XVwiKSk7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIChwcmVhY3RfMS5oKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBfdGhpcy5wcm9wcy5jbGFzc2VzLnZhbHVlIH0sIGRpc3BsYXlWYWx1ZSh2YWwpKSk7XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaXNFbXB0eSgpID8gbnVsbCA6IChwcmVhY3RfMS5oKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0aGlzLmNsYXNzKCdvdXRlcmRpdicpIH0sXHJcblx0ICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IGNsYXNzTmFtZTogdGhpcy5jbGFzcygnc2VjdGlvbicpIH0sIHRoaXMucHJvcHMubGFiZWxzLnNlY3Rpb24pLFxyXG5cdCAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMucHJvcHMuZGF0YSkubWFwKGZ1bmN0aW9uIChrZXkpIHtcclxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHByZWFjdF8xLmgoXCJkaXZcIiwgeyBrZXk6IGtleSwgY2xhc3NOYW1lOiBfdGhpcy5jbGFzcygna2V5dmFsZGl2JykgfSxcclxuXHQgICAgICAgICAgICAgICAgICAgIHByZWFjdF8xLmgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IF90aGlzLmNsYXNzKCdfa2V5JykgfSxcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICBrZXksXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgXCI6XCIpLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IGNsYXNzTmFtZTogX3RoaXMuY2xhc3MoJ3ZhbHVlJykgfSwgcmVuZGVyVmFsdWUoa2V5LCBfdGhpcy5wcm9wcy5kYXRhW2tleV0pKSk7XHJcblx0ICAgICAgICAgICAgfSkpKTtcclxuXHQgICAgfTtcclxuXHQgICAgcmV0dXJuIEtleXNBbmRWYWx1ZXM7XHJcblx0fShwcmVhY3RfMS5Db21wb25lbnQpKTtcclxuXHRleHBvcnRzLktleXNBbmRWYWx1ZXMgPSBLZXlzQW5kVmFsdWVzO1xyXG5cblxuLyoqKi8gfSksXG4vKiAzNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuXHQgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuXHQgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuXHQgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcblx0ICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuXHQgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuXHQgICAgfTtcclxuXHR9KSgpO1xyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuXHR2YXIgcHJlYWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xyXG5cdHZhciBNb2RhbCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcblx0ICAgIF9fZXh0ZW5kcyhNb2RhbCwgX3N1cGVyKTtcclxuXHQgICAgZnVuY3Rpb24gTW9kYWwoKSB7XHJcblx0ICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcblx0ICAgIH1cclxuXHQgICAgTW9kYWwucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIGVsID0gdGhpcy5fcmVmO1xyXG5cdCAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgdmFyIGZhZGVzID0gZWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInVpci1mYWRlXCIpO1xyXG5cdCAgICAgICAgICAgIFtdLnNsaWNlLmFwcGx5KGZhZGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBub2RlLmNsYXNzTmFtZSArPSBcIiBpblwiOyB9KTtcclxuXHQgICAgICAgIH0sIDM1KTtcclxuXHQgICAgfTtcclxuXHQgICAgTW9kYWwucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICByZXR1cm4gKHByZWFjdF8xLmgoXCJkaXZcIiwgeyByZWY6IGZ1bmN0aW9uIChyZWYpIHsgcmV0dXJuIF90aGlzLl9yZWYgPSByZWY7IH0gfSxcclxuXHQgICAgICAgICAgICBwcmVhY3RfMS5oKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInVpci1tb2RhbC1iYWNrZHJvcCB1aXItZmFkZVwiLCBzdHlsZTogeyB6SW5kZXg6IDEwNDAgfSB9KSxcclxuXHQgICAgICAgICAgICBwcmVhY3RfMS5oKFwiZGl2XCIsIHsgdGFiSW5kZXg6IC0xLCBjbGFzc05hbWU6IFwidWlyLW1vZGFsIHVpci1mYWRlXCIsIHN0eWxlOiB7IHpJbmRleDogMTA1MCwgZGlzcGxheTogXCJibG9ja1wiIH0gfSxcclxuXHQgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ1aXItbW9kYWwtZGlhbG9nIG1vZGFsLWxnXCIgfSxcclxuXHQgICAgICAgICAgICAgICAgICAgIHByZWFjdF8xLmgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidWlyLW1vZGFsLWNvbnRlbnRcIiB9LCB0aGlzLnByb3BzLmNoaWxkcmVuKSkpKSk7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBNb2RhbDtcclxuXHR9KHByZWFjdF8xLkNvbXBvbmVudCkpO1xyXG5cdE1vZGFsLnNob3cgPSBmdW5jdGlvbiAobGFiZWxzLCBrZXksIHZhbHVlLCBjb21wb25lbnQpIHtcclxuXHQgICAgdmFyIG1vZGFsID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKFwiI3Vpci1tb2RhbFwiKTtcclxuXHQgICAgaWYgKCFtb2RhbCkge1xyXG5cdCAgICAgICAgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdCAgICAgICAgbW9kYWwuaWQgPSBcInVpci1tb2RhbFwiO1xyXG5cdCAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XHJcblx0ICAgIH1cclxuXHQgICAgdmFyIE5vdGhpbmcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBudWxsOyB9O1xyXG5cdCAgICB2YXIgY2xvc2UgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBwcmVhY3RfMS5yZW5kZXIocHJlYWN0XzEuaChOb3RoaW5nLCBudWxsKSwgZG9jdW1lbnQuYm9keSwgbW9kYWwpOyB9O1xyXG5cdCAgICBwcmVhY3RfMS5yZW5kZXIocHJlYWN0XzEuaChjb21wb25lbnQsIHsgY2xvc2U6IGNsb3NlLCBsYWJlbHM6IGxhYmVscywga2V5OiBrZXksIHZhbHVlOiB2YWx1ZSB9KSwgbW9kYWwpO1xyXG5cdH07XHJcblx0ZXhwb3J0cy5Nb2RhbCA9IE1vZGFsO1xyXG5cblxuLyoqKi8gfSksXG4vKiAzNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuXHQgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuXHQgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuXHQgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcblx0ICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuXHQgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuXHQgICAgfTtcclxuXHR9KSgpO1xyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuXHR2YXIgcHJlYWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xyXG5cdHZhciBtb2RhbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XHJcblx0dmFyIHByZXR0eV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XHJcblx0dmFyIFJlc29sdmVEYXRhID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuXHQgICAgX19leHRlbmRzKFJlc29sdmVEYXRhLCBfc3VwZXIpO1xyXG5cdCAgICBmdW5jdGlvbiBSZXNvbHZlRGF0YSgpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG5cdCAgICAgICAgX3RoaXMuY2xvc2UgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5wcm9wcy5jbG9zZSgpOyB9O1xyXG5cdCAgICAgICAgcmV0dXJuIF90aGlzO1xyXG5cdCAgICB9XHJcblx0ICAgIFJlc29sdmVEYXRhLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICByZXR1cm4gKHByZWFjdF8xLmgoXCJkaXZcIiwgbnVsbCxcclxuXHQgICAgICAgICAgICBwcmVhY3RfMS5oKG1vZGFsXzEuTW9kYWwsIG51bGwsXHJcblx0ICAgICAgICAgICAgICAgIHByZWFjdF8xLmgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidWlyLW1vZGFsLWhlYWRlciB1aXItcmVzb2x2ZS1oZWFkZXJcIiB9LFxyXG5cdCAgICAgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IHN0eWxlOiB7IFwiZm9udFNpemVcIjogXCIxLjVlbVwiIH0gfSxcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmxhYmVscy5tb2RhbFRpdGxlLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIFwiOiBcIixcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmlkKSxcclxuXHQgICAgICAgICAgICAgICAgICAgIHByZWFjdF8xLmgoXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tcHJpbWFyeVwiLCBvbkNsaWNrOiB0aGlzLmNsb3NlIH0sXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcImlcIiwgeyBjbGFzc05hbWU6IFwidWlyLWljb24gdWlyLWljb253LWNsb3NlXCIgfSkpKSxcclxuXHQgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ1aXItbW9kYWwtYm9keVwiIH0sXHJcblx0ICAgICAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKHByZXR0eV8xLlByZXR0eSwgeyBkYXRhOiB0aGlzLnByb3BzLnZhbHVlIH0pKSxcclxuXHQgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ1aXItbW9kYWwtZm9vdGVyXCIgfSxcclxuXHQgICAgICAgICAgICAgICAgICAgIHByZWFjdF8xLmgoXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5XCIsIG9uQ2xpY2s6IHRoaXMuY2xvc2UgfSwgXCJDbG9zZVwiKSkpKSk7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBSZXNvbHZlRGF0YTtcclxuXHR9KHByZWFjdF8xLkNvbXBvbmVudCkpO1xyXG5cdGV4cG9ydHMuUmVzb2x2ZURhdGEgPSBSZXNvbHZlRGF0YTtcclxuXG5cbi8qKiovIH0pLFxuLyogMzggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcblx0ICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcblx0ICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcblx0ICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG5cdCAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcblx0ICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcblx0ICAgIH07XHJcblx0fSkoKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0dmFyIHByZWFjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcclxuXHR2YXIgUHJldHR5ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuXHQgICAgX19leHRlbmRzKFByZXR0eSwgX3N1cGVyKTtcclxuXHQgICAgZnVuY3Rpb24gUHJldHR5KCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcblx0ICAgICAgICBfdGhpcy5wcmVTdHlsZSA9IHtcclxuXHQgICAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxyXG5cdCAgICAgICAgICAgIHBhZGRpbmc6ICcxMHB4IDMwcHgnLFxyXG5cdCAgICAgICAgICAgIG1hcmdpbjogJzAnLFxyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIF90aGlzLnN0YXRlID0geyBzaG93OiB0cnVlIH07XHJcblx0ICAgICAgICByZXR1cm4gX3RoaXM7XHJcblx0ICAgIH1cclxuXHQgICAgUHJldHR5LnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuXHQgICAgICAgICAgICBzaG93OiAhdGhpcy5zdGF0ZS5zaG93LFxyXG5cdCAgICAgICAgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIFByZXR0eS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgcmV0dXJuIChwcmVhY3RfMS5oKFwiZGl2XCIsIG51bGwsICh0aGlzLnN0YXRlLnNob3cgP1xyXG5cdCAgICAgICAgICAgIHByZWFjdF8xLmgoXCJwcmVcIiwgeyBzdHlsZTogdGhpcy5wcmVTdHlsZSB9LCBKU09OLnN0cmluZ2lmeSh0aGlzLnByb3BzLmRhdGEsIG51bGwsIDIpKSA6IGZhbHNlKSkpO1xyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gUHJldHR5O1xyXG5cdH0ocHJlYWN0XzEuQ29tcG9uZW50KSk7XHJcblx0ZXhwb3J0cy5QcmV0dHkgPSBQcmV0dHk7XHJcblxuXG4vKioqLyB9KSxcbi8qIDM5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgYSBzdHJpbmcgc2hvcnRlbmVkIHRvIGEgbWF4aW11bSBsZW5ndGhcclxuXHQgKlxyXG5cdCAqIElmIHRoZSBzdHJpbmcgaXMgYWxyZWFkeSBsZXNzIHRoYW4gdGhlIGBtYXhgIGxlbmd0aCwgcmV0dXJuIHRoZSBzdHJpbmcuXHJcblx0ICogRWxzZSByZXR1cm4gdGhlIHN0cmluZywgc2hvcnRlbmVkIHRvIGBtYXggLSAzYCBhbmQgYXBwZW5kIHRocmVlIGRvdHMgKFwiLi4uXCIpLlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIG1heCB0aGUgbWF4aW11bSBsZW5ndGggb2YgdGhlIHN0cmluZyB0byByZXR1cm5cclxuXHQgKiBAcGFyYW0gc3RyIHRoZSBpbnB1dCBzdHJpbmdcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBtYXhMZW5ndGgobWF4LCBzdHIpIHtcclxuXHQgICAgaWYgKHN0ci5sZW5ndGggPD0gbWF4KVxyXG5cdCAgICAgICAgcmV0dXJuIHN0cjtcclxuXHQgICAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgbWF4IC0gMykgKyBcIi4uLlwiO1xyXG5cdH1cclxuXHRleHBvcnRzLm1heExlbmd0aCA9IG1heExlbmd0aDtcclxuXHRmdW5jdGlvbiBzdHJpbmdpZnlQYXR0ZXJuKHZhbHVlKSB7XHJcblx0ICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKVxyXG5cdCAgICAgICAgcmV0dXJuICd1bmRlZmluZWQnO1xyXG5cdCAgICBpZiAodmFsdWUgPT09IG51bGwpXHJcblx0ICAgICAgICByZXR1cm4gJ251bGwnO1xyXG5cdCAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJylcclxuXHQgICAgICAgIHJldHVybiAnW1Byb21pc2VdJztcclxuXHQgICAgcmV0dXJuIHZhbHVlO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBzdHJpbmdpZnkobykge1xyXG5cdCAgICB2YXIgc2VlbiA9IFtdO1xyXG5cdCAgICBmdW5jdGlvbiBmb3JtYXQodmFsKSB7XHJcblx0ICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcclxuXHQgICAgICAgICAgICBpZiAoc2Vlbi5pbmRleE9mKHZhbCkgIT09IC0xKVxyXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gJ1tjaXJjdWxhciByZWZdJztcclxuXHQgICAgICAgICAgICBzZWVuLnB1c2godmFsKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHJldHVybiBzdHJpbmdpZnlQYXR0ZXJuKHZhbCk7XHJcblx0ICAgIH1cclxuXHQgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG8sIGZ1bmN0aW9uIChrZXksIHZhbCkgeyByZXR1cm4gZm9ybWF0KHZhbCk7IH0pLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKTtcclxuXHR9XHJcblx0ZXhwb3J0cy5zdHJpbmdpZnkgPSBzdHJpbmdpZnk7XHJcblxuXG4vKioqLyB9KSxcbi8qIDQwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG5cdCAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG5cdCAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG5cdCAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuXHQgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG5cdCAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG5cdCAgICB9O1xyXG5cdH0pKCk7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdHZhciBwcmVhY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0dmFyIG5vZGVEZXRhaWxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xyXG5cdHZhciBmbG93QXJyb3dfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xyXG5cdHZhciBOb2RlUGF0aHMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG5cdCAgICBfX2V4dGVuZHMoTm9kZVBhdGhzLCBfc3VwZXIpO1xyXG5cdCAgICBmdW5jdGlvbiBOb2RlUGF0aHMoKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuXHQgICAgICAgIF90aGlzLnN0YXRlID0ge1xyXG5cdCAgICAgICAgICAgIHJldGFpbmVkOiBbXSxcclxuXHQgICAgICAgICAgICBlbnRlckV4aXQ6IFtdXHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgcmV0dXJuIF90aGlzO1xyXG5cdCAgICB9XHJcblx0ICAgIE5vZGVQYXRocy5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgdHJhbnMgPSB0aGlzLnByb3BzLnRyYW5zaXRpb247XHJcblx0ICAgICAgICB2YXIgdGNQYXRocyA9IE9iamVjdC5hc3NpZ24oe30sIHRyYW5zLnRyZWVDaGFuZ2VzKCkpO1xyXG5cdCAgICAgICAgLy8gSWdub3JlIHRoZSByb290IHN0YXRlIHdoZW4gZHJhd2luZyBwYXRocy5cclxuXHQgICAgICAgIFtcImVudGVyaW5nXCIsIFwiZXhpdGluZ1wiLCBcInJldGFpbmVkXCJdXHJcblx0ICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gdGNQYXRoc1trZXldID0gdGNQYXRoc1trZXldLmZpbHRlcihmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gISFub2RlLnN0YXRlLm5hbWU7IH0pOyB9KTtcclxuXHQgICAgICAgIHZhciBwYXJ0aWFsS2V5ID0gZnVuY3Rpb24gKHBhdGhuYW1lLCBpZHgpIHtcclxuXHQgICAgICAgICAgICB2YXIgbm9kZSA9IHRjUGF0aHNbcGF0aG5hbWVdW2lkeF07XHJcblx0ICAgICAgICAgICAgcmV0dXJuIG5vZGUgPyBub2RlLnN0YXRlLm5hbWUgOiBcIlwiO1xyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIHZhciBrZXkgPSBmdW5jdGlvbiAocGF0aG5hbWUxLCBwYXRobmFtZTIsIGlkeCkge1xyXG5cdCAgICAgICAgICAgIHJldHVybiB0cmFucy4kaWQgKyBcIi5cIiArIHBhcnRpYWxLZXkocGF0aG5hbWUxLCBpZHgpICsgXCItXCIgKyBwYXJ0aWFsS2V5KHBhdGhuYW1lMiwgaWR4KTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICB2YXIgcmV0YWluZWQgPSB0Y1BhdGhzLnJldGFpbmVkXHJcblx0ICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobm9kZSwgaWR4KSB7IHJldHVybiAoeyBrZXk6IGtleSgncmV0YWluZWQnLCAncmV0YWluZWQnLCBpZHgpLCB0bzogbm9kZSwgdG9UeXBlOiAncmV0YWluJywgZnJvbTogbm9kZSwgZnJvbVR5cGU6ICdyZXRhaW4nIH0pOyB9KTtcclxuXHQgICAgICAgIHZhciBlbnRlckV4aXQgPSBbXTtcclxuXHQgICAgICAgIHZhciBtYXhQYXRoTGVuZ3RoID0gTWF0aC5tYXgodGNQYXRocy5leGl0aW5nLmxlbmd0aCwgdGNQYXRocy5lbnRlcmluZy5sZW5ndGgpO1xyXG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXhQYXRoTGVuZ3RoOyBpKyspIHtcclxuXHQgICAgICAgICAgICBlbnRlckV4aXQucHVzaCh7XHJcblx0ICAgICAgICAgICAgICAgIGtleToga2V5KCdleGl0aW5nJywgJ2VudGVyaW5nJywgaSksXHJcblx0ICAgICAgICAgICAgICAgIHRvOiB0Y1BhdGhzLmVudGVyaW5nW2ldLFxyXG5cdCAgICAgICAgICAgICAgICB0b1R5cGU6IHRjUGF0aHMuZW50ZXJpbmdbaV0gJiYgJ2VudGVyJyxcclxuXHQgICAgICAgICAgICAgICAgZnJvbTogdGNQYXRocy5leGl0aW5nW2ldLFxyXG5cdCAgICAgICAgICAgICAgICBmcm9tVHlwZTogdGNQYXRocy5leGl0aW5nW2ldICYmICdleGl0J1xyXG5cdCAgICAgICAgICAgIH0pO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJldGFpbmVkOiByZXRhaW5lZCwgZW50ZXJFeGl0OiBlbnRlckV4aXQgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIE5vZGVQYXRocy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIGhlaWdodCA9IDIwMDA7XHJcblx0ICAgICAgICB2YXIgcmV0YWluZWQgPSB0aGlzLnN0YXRlLnJldGFpbmVkIHx8IFtdO1xyXG5cdCAgICAgICAgdmFyIGVudGVyRXhpdCA9IHRoaXMuc3RhdGUuZW50ZXJFeGl0IHx8IFtdO1xyXG5cdCAgICAgICAgdmFyIGxhc3RFbnRlcklkeCA9IGVudGVyRXhpdC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuICEheC50b1R5cGU7IH0pLmxlbmd0aCAtIDE7XHJcblx0ICAgICAgICByZXR1cm4gKHByZWFjdF8xLmgoXCJ0YWJsZVwiLCB7IGNsYXNzTmFtZTogXCJwYXRoc1wiIH0sXHJcblx0ICAgICAgICAgICAgcHJlYWN0XzEuaChcInRoZWFkXCIsIG51bGwsXHJcblx0ICAgICAgICAgICAgICAgIHByZWFjdF8xLmgoXCJ0clwiLCBudWxsLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcInRoXCIsIG51bGwsIFwiRnJvbSBQYXRoXCIpLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcInRoXCIsIG51bGwsIFwiVG8gUGF0aFwiKSkpLFxyXG5cdCAgICAgICAgICAgIHByZWFjdF8xLmgoXCJ0Ym9keVwiLCBudWxsLFxyXG5cdCAgICAgICAgICAgICAgICByZXRhaW5lZC5tYXAoZnVuY3Rpb24gKGVsZW0pIHtcclxuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVhY3RfMS5oKFwidHJcIiwgeyBrZXk6IGVsZW0ua2V5IH0sXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcInRkXCIsIHsgY2xhc3NOYW1lOiBlbGVtLmZyb21UeXBlLCBjb2xTcGFuOiAyIH0sXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWFjdF8xLmgobm9kZURldGFpbF8xLk5vZGVEZXRhaWwsIHsgbm9kZTogZWxlbS5mcm9tLCB0eXBlOiBlbGVtLmZyb21UeXBlIH0pKSk7XHJcblx0ICAgICAgICAgICAgICAgIH0pLFxyXG5cdCAgICAgICAgICAgICAgICBlbnRlckV4aXQubWFwKGZ1bmN0aW9uIChlbGVtLCBpZHgpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVhY3RfMS5oKFwidHJcIiwgeyBrZXk6IGVsZW0ua2V5IH0sXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcInRkXCIsIHsgY29sU3BhbjogMiB9LFxyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInVpclRyYW5zVmlzUm93XCIgfSxcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWFjdF8xLmgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiXCIgKyBlbGVtLmZyb21UeXBlIH0sICFlbGVtLmZyb21UeXBlID8gbnVsbCA6XHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCBudWxsLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInVpck5vZGVDb250ZW50XCIgfSxcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWFjdF8xLmgobm9kZURldGFpbF8xLk5vZGVEZXRhaWwsIHsgbm9kZTogZWxlbS5mcm9tLCB0eXBlOiBlbGVtLmZyb21UeXBlIH0pLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChmbG93QXJyb3dfMS5GbG93QXJyb3csIHsgYm90dG9tOiAnVicsIHRvcDogaWR4ID8gJ1YnIDogZWxlbS50b1R5cGUgPyAnUlUnIDogJ0FVJyB9KSkpKSxcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWFjdF8xLmgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiXCIgKyBlbGVtLnRvVHlwZSB9LCAhZWxlbS50b1R5cGUgPyBudWxsIDpcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwiZGl2XCIsIG51bGwsXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWFjdF8xLmgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidWlyTm9kZUNvbnRlbnRcIiB9LFxyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChmbG93QXJyb3dfMS5GbG93QXJyb3csIHsgdG9wOiBpZHggPyAnVicgOiBlbGVtLmZyb21UeXBlID8gJ1JEJyA6ICdWJywgYm90dG9tOiBpZHggPT0gbGFzdEVudGVySWR4ID8gJ0FEJyA6ICdWJyB9KSxcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWFjdF8xLmgobm9kZURldGFpbF8xLk5vZGVEZXRhaWwsIHsgbm9kZTogZWxlbS50bywgdHlwZTogZWxlbS50b1R5cGUgfSkpKSkpKSk7XHJcblx0ICAgICAgICAgICAgICAgIH0pKSkpO1xyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gTm9kZVBhdGhzO1xyXG5cdH0ocHJlYWN0XzEuQ29tcG9uZW50KSk7XHJcblx0ZXhwb3J0cy5Ob2RlUGF0aHMgPSBOb2RlUGF0aHM7XHJcblxuXG4vKioqLyB9KSxcbi8qIDQxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG5cdCAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG5cdCAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG5cdCAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuXHQgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG5cdCAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG5cdCAgICB9O1xyXG5cdH0pKCk7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdHZhciBwcmVhY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0dmFyIHN0cmluZ3NfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xyXG5cdHZhciBrZXlzQW5kVmFsdWVzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcclxuXHR2YXIgTm9kZURldGFpbCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcblx0ICAgIF9fZXh0ZW5kcyhOb2RlRGV0YWlsLCBfc3VwZXIpO1xyXG5cdCAgICBmdW5jdGlvbiBOb2RlRGV0YWlsKCkge1xyXG5cdCAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG5cdCAgICB9XHJcblx0ICAgIE5vZGVEZXRhaWwucHJvdG90eXBlLnN0YXRlTmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBub2RlID0gdGhpcy5wcm9wcy5ub2RlO1xyXG5cdCAgICAgICAgdmFyIG5hbWUgPSBub2RlICYmIG5vZGUuc3RhdGUgJiYgbm9kZS5zdGF0ZS5uYW1lO1xyXG5cdCAgICAgICAgaWYgKG5hbWUgPT09IFwiXCIpXHJcblx0ICAgICAgICAgICAgbmFtZSA9IFwiKHJvb3QpXCI7XHJcblx0ICAgICAgICByZXR1cm4gbmFtZSAmJiBuYW1lLnNwbGl0KFwiLlwiKS5yZXZlcnNlKClbMF07XHJcblx0ICAgIH07XHJcblx0ICAgIE5vZGVEZXRhaWwucHJvdG90eXBlLnBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBub2RlID0gdGhpcy5wcm9wcy5ub2RlO1xyXG5cdCAgICAgICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5wYXJhbVNjaGVtYS5yZWR1Y2UoZnVuY3Rpb24gKHBhcmFtcywgcGFyYW0pIHtcclxuXHQgICAgICAgICAgICBwYXJhbXNbcGFyYW0uaWRdID0gbm9kZS5wYXJhbVZhbHVlc1twYXJhbS5pZF07XHJcblx0ICAgICAgICAgICAgcmV0dXJuIHBhcmFtcztcclxuXHQgICAgICAgIH0sIHt9KTtcclxuXHQgICAgfTtcclxuXHQgICAgTm9kZURldGFpbC5wcm90b3R5cGUucmVzb2x2ZXMgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgYXNTdHJpbmcgPSBmdW5jdGlvbiAodmFsKSB7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8gdmFsIDogc3RyaW5nc18xLm1heExlbmd0aCgzMCwgc3RyaW5nc18xLnN0cmluZ2lmeSh2YWwpKTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICB2YXIgbm9kZSA9IHRoaXMucHJvcHMubm9kZTtcclxuXHQgICAgICAgIHZhciBpZ25vcmVkVG9rZW5zID0gWyckc3RhdGVQYXJhbXMnLCAnJHRyYW5zaXRpb24kJ107XHJcblx0ICAgICAgICByZXR1cm4gbm9kZSAmJiBub2RlLnJlc29sdmFibGVzXHJcblx0ICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gaWdub3JlZFRva2Vucy5pbmRleE9mKHIudG9rZW4pID09PSAtMTsgfSlcclxuXHQgICAgICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHIpIHsgYWNjW2FzU3RyaW5nKHIudG9rZW4pXSA9IHIuZGF0YTsgcmV0dXJuIGFjYzsgfSwge30pO1xyXG5cdCAgICB9O1xyXG5cdCAgICBOb2RlRGV0YWlsLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICByZXR1cm4gIXRoaXMucHJvcHMubm9kZSA/IG51bGwgOiAocHJlYWN0XzEuaChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ1aXJOb2RlRGV0YWlsXCIgfSxcclxuXHQgICAgICAgICAgICBwcmVhY3RfMS5oKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInVpci1oZWFkZXJcIiB9LFxyXG5cdCAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vd3JhcCBkZWVtcGhhc2l6ZVwiIH0sXHJcblx0ICAgICAgICAgICAgICAgICAgICBcIihcIixcclxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudHlwZSxcclxuXHQgICAgICAgICAgICAgICAgICAgIFwiIHN0YXRlKVwiKSxcclxuXHQgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdGF0ZW5hbWVcIiB9LCB0aGlzLnN0YXRlTmFtZSgpKSksXHJcblx0ICAgICAgICAgICAgcHJlYWN0XzEuaChrZXlzQW5kVmFsdWVzXzEuS2V5c0FuZFZhbHVlcywgeyBkYXRhOiB0aGlzLnBhcmFtcygpLCBjbGFzc2VzOiB7IG91dGVyZGl2OiAncGFyYW1zJywgc2VjdGlvbjogJ3BhcmFtc2xhYmVsIGRlZW1waGFzaXplJyB9LCBsYWJlbHM6IHsgc2VjdGlvbjogJ1BhcmFtZXRlciB2YWx1ZXMnLCBtb2RhbFRpdGxlOiAnUGFyYW1ldGVyIHZhbHVlOiAnIH0gfSksXHJcblx0ICAgICAgICAgICAgcHJlYWN0XzEuaChrZXlzQW5kVmFsdWVzXzEuS2V5c0FuZFZhbHVlcywgeyBkYXRhOiB0aGlzLnJlc29sdmVzKCksIGNsYXNzZXM6IHsgb3V0ZXJkaXY6ICdwYXJhbXMgcmVzb2x2ZScsIHNlY3Rpb246ICdyZXNvbHZlbGFiZWwgZGVlbXBoYXNpemUnIH0sIGxhYmVsczogeyBzZWN0aW9uOiAnUmVzb2x2ZWQgZGF0YScsIG1vZGFsVGl0bGU6ICdSZXNvbHZlZCB2YWx1ZTogJyB9IH0pKSk7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBOb2RlRGV0YWlsO1xyXG5cdH0ocHJlYWN0XzEuQ29tcG9uZW50KSk7XHJcblx0ZXhwb3J0cy5Ob2RlRGV0YWlsID0gTm9kZURldGFpbDtcclxuXG5cbi8qKiovIH0pLFxuLyogNDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcblx0ICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcblx0ICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcblx0ICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG5cdCAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcblx0ICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcblx0ICAgIH07XHJcblx0fSkoKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0dmFyIHByZWFjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcclxuXHR2YXIgRmxvd0Fycm93ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuXHQgICAgX19leHRlbmRzKEZsb3dBcnJvdywgX3N1cGVyKTtcclxuXHQgICAgZnVuY3Rpb24gRmxvd0Fycm93KCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcblx0ICAgICAgICBfdGhpcy5oZWlnaHQgPSAxMDAwO1xyXG5cdCAgICAgICAgX3RoaXMucmVuZGVyQ3VydmUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAocHJlYWN0XzEuaChcInBhdGhcIiwgeyBzdHJva2U6IFwid2hpdGVcIiwgXCJzdHJva2Utd2lkdGhcIjogXCIyMFwiLCBmaWxsOiBcIm5vbmVcIiwgZDogXCJNNTAgXCIgKyBfdGhpcy5oZWlnaHQgKyBcIiBWIDcwIFE1MCAyMCwgMTAwIDIwIFExNTAgMjAsIDE1MCA3MCBWIFwiICsgX3RoaXMuaGVpZ2h0IH0pKTsgfTtcclxuXHQgICAgICAgIF90aGlzLnJlbmRlclZlcnRpY2FsTGluZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIChwcmVhY3RfMS5oKFwic3ZnXCIsIHsgdmlld0JveDogXCIwIDcwIDEwMCBcIiArIChfdGhpcy5oZWlnaHQgLSA3MCksIGNsYXNzTmFtZTogXCJmbG93QXJyb3dTdmdcIiB9LCBfdGhpcy5yZW5kZXJDdXJ2ZSgpKSk7IH07XHJcblx0ICAgICAgICBfdGhpcy5yZW5kZXJDdXJ2ZVJVID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHByZWFjdF8xLmgoXCJzdmdcIiwgeyB2aWV3Qm94OiBcIjAgMCAxMDAgXCIgKyBfdGhpcy5oZWlnaHQsIGNsYXNzTmFtZTogXCJmbG93QXJyb3dTdmcgdG9wXCIgfSwgX3RoaXMucmVuZGVyQ3VydmUoKSkpOyB9O1xyXG5cdCAgICAgICAgX3RoaXMucmVuZGVyQ3VydmVSRCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIChwcmVhY3RfMS5oKFwic3ZnXCIsIHsgdmlld0JveDogXCIxMDAgMCAxMDAgXCIgKyBfdGhpcy5oZWlnaHQsIGNsYXNzTmFtZTogXCJmbG93QXJyb3dTdmcgdG9wXCIgfSwgX3RoaXMucmVuZGVyQ3VydmUoKSkpOyB9O1xyXG5cdCAgICAgICAgX3RoaXMucmVuZGVyQXJyb3dVID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHByZWFjdF8xLmgoXCJzdmdcIiwgeyB2aWV3Qm94OiBcIjAgMCAxMDAgXCIgKyBfdGhpcy5oZWlnaHQsIGNsYXNzTmFtZTogXCJmbG93QXJyb3dTdmcgdG9wXCIgfSxcclxuXHQgICAgICAgICAgICBwcmVhY3RfMS5oKFwicGF0aFwiLCB7IHN0cm9rZTogXCJ3aGl0ZVwiLCBcInN0cm9rZS13aWR0aFwiOiBcIjIwXCIsIGZpbGw6IFwibm9uZVwiLCBkOiBcIk01MCBcIiArIF90aGlzLmhlaWdodCArIFwiIFYgMjAgXCIgfSksXHJcblx0ICAgICAgICAgICAgcHJlYWN0XzEuaChcInBvbHlnb25cIiwgeyBmaWxsOiBcIndoaXRlXCIsIHN0cm9rZTogXCJ3aGl0ZVwiLCBcInN0cm9rZS13aWR0aFwiOiBcIjIwXCIsIHBvaW50czogXCI1MCwyMCAzNSw0MCA2NSw0MFwiIH0pKSk7IH07XHJcblx0ICAgICAgICBfdGhpcy5yZW5kZXJBcnJvd0QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAocHJlYWN0XzEuaChcInN2Z1wiLCB7IHZpZXdCb3g6IFwiMCAwIDEwMCBcIiArIF90aGlzLmhlaWdodCwgY2xhc3NOYW1lOiBcImZsb3dBcnJvd1N2ZyBib3R0b21cIiB9LFxyXG5cdCAgICAgICAgICAgIHByZWFjdF8xLmgoXCJwYXRoXCIsIHsgc3Ryb2tlOiBcIndoaXRlXCIsIFwic3Ryb2tlLXdpZHRoXCI6IFwiMjBcIiwgZmlsbDogXCJub25lXCIsIGQ6IFwiTTUwIDAgViBcIiArIChfdGhpcy5oZWlnaHQgLSAyMCkgfSksXHJcblx0ICAgICAgICAgICAgcHJlYWN0XzEuaChcInBvbHlnb25cIiwgeyBmaWxsOiBcIndoaXRlXCIsIHN0cm9rZTogXCJ3aGl0ZVwiLCBcInN0cm9rZS13aWR0aFwiOiBcIjIwXCIsIHBvaW50czogXCI1MCxcIiArIChfdGhpcy5oZWlnaHQgLSAyMCkgKyBcIiAzNSxcIiArIChfdGhpcy5oZWlnaHQgLSA0MCkgKyBcIiA2NSxcIiArIChfdGhpcy5oZWlnaHQgLSA0MCkgfSkpKTsgfTtcclxuXHQgICAgICAgIHJldHVybiBfdGhpcztcclxuXHQgICAgfVxyXG5cdCAgICBGbG93QXJyb3cucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICB2YXIgcmVuZGVyU3ZnID0gZnVuY3Rpb24gKHR5cGUpIHtcclxuXHQgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuXHQgICAgICAgICAgICAgICAgY2FzZSBcIlZcIjogcmV0dXJuIF90aGlzLnJlbmRlclZlcnRpY2FsTGluZSgpO1xyXG5cdCAgICAgICAgICAgICAgICBjYXNlIFwiUlVcIjogcmV0dXJuIF90aGlzLnJlbmRlckN1cnZlUlUoKTtcclxuXHQgICAgICAgICAgICAgICAgY2FzZSBcIlJEXCI6IHJldHVybiBfdGhpcy5yZW5kZXJDdXJ2ZVJEKCk7XHJcblx0ICAgICAgICAgICAgICAgIGNhc2UgXCJBVVwiOiByZXR1cm4gX3RoaXMucmVuZGVyQXJyb3dVKCk7XHJcblx0ICAgICAgICAgICAgICAgIGNhc2UgXCJBRFwiOiByZXR1cm4gX3RoaXMucmVuZGVyQXJyb3dEKCk7XHJcblx0ICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBudWxsO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICByZXR1cm4gKHByZWFjdF8xLmgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZmxvd0Fycm93Q2VsbFwiIH0sXHJcblx0ICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IHN0eWxlOiB7IG92ZXJmbG93OiAnaGlkZGVuJywgcG9zaXRpb246ICdyZWxhdGl2ZScsIGZsZXg6ICcxJyB9IH0sIHJlbmRlclN2Zyh0aGlzLnByb3BzLnRvcCkpLFxyXG5cdCAgICAgICAgICAgIHByZWFjdF8xLmgoXCJkaXZcIiwgeyBzdHlsZTogeyBvdmVyZmxvdzogJ2hpZGRlbicsIHBvc2l0aW9uOiAncmVsYXRpdmUnLCBmbGV4OiAnMScgfSB9LCByZW5kZXJTdmcodGhpcy5wcm9wcy5ib3R0b20pKSkpO1xyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gRmxvd0Fycm93O1xyXG5cdH0ocHJlYWN0XzEuQ29tcG9uZW50KSk7XHJcblx0ZXhwb3J0cy5GbG93QXJyb3cgPSBGbG93QXJyb3c7XHJcblxuXG4vKioqLyB9KSxcbi8qIDQzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG5cdCAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG5cdCAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG5cdCAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuXHQgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG5cdCAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG5cdCAgICB9O1xyXG5cdH0pKCk7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdHZhciBwcmVhY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0dmFyIEJyZWFkY3J1bWJBcnJvdyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcblx0ICAgIF9fZXh0ZW5kcyhCcmVhZGNydW1iQXJyb3csIF9zdXBlcik7XHJcblx0ICAgIGZ1bmN0aW9uIEJyZWFkY3J1bWJBcnJvdygpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG5cdCAgICAgICAgX3RoaXMuaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByb3BzLnRvZ2dsZUV4cGFuZCgpO1xyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIHJldHVybiBfdGhpcztcclxuXHQgICAgfVxyXG5cdCAgICBCcmVhZGNydW1iQXJyb3cucHJvdG90eXBlLmljb25DbGFzcyA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBpY29uQ2xhc3NlcyA9IHtcclxuXHQgICAgICAgICAgICBydW5uaW5nOiAndWlyLWljb24gdWlyLXNwaW4gdWlyLWljb253LXNwaW5uZXInLFxyXG5cdCAgICAgICAgICAgIHN1Y2Nlc3M6ICd1aXItaWNvbiB1aXItaWNvbnctY2hlY2snLFxyXG5cdCAgICAgICAgICAgIHJlZGlyZWN0ZWQ6ICd1aXItaWNvbiB1aXItaWNvbnctc2hhcmUnLFxyXG5cdCAgICAgICAgICAgIGlnbm9yZWQ6ICd1aXItaWNvbiB1aXItaWNvbnctY2lyY2xlLW8nLFxyXG5cdCAgICAgICAgICAgIGVycm9yOiAndWlyLWljb24gdWlyLWljb253LWNsb3NlJ1xyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIHJldHVybiBpY29uQ2xhc3Nlc1t0aGlzLnByb3BzLnN0YXR1c107XHJcblx0ICAgIH07XHJcblx0ICAgIEJyZWFkY3J1bWJBcnJvdy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgcmV0dXJuICF0aGlzLnByb3BzLnRyYW5zaXRpb24gPyBudWxsIDogKHByZWFjdF8xLmgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHRoaXMucHJvcHMuc3RhdHVzICsgXCIgaGlzdG9yeUVudHJ5XCIsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2sgfSxcclxuXHQgICAgICAgICAgICBwcmVhY3RfMS5oKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN1bW1hcnlcIiB9LFxyXG5cdCAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRyYW5zaWRcIiB9LCB0aGlzLnByb3BzLnRyYW5zaXRpb24uJGlkKSxcclxuXHQgICAgICAgICAgICAgICAgcHJlYWN0XzEuaChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdGF0dXNcIiB9LFxyXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zdGF0dXMsXHJcblx0ICAgICAgICAgICAgICAgICAgICAhdGhpcy5wcm9wcy5tZXNzYWdlID8gbnVsbCA6IHByZWFjdF8xLmgoXCJzcGFuXCIsIG51bGwsXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgXCI6IFwiLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubWVzc2FnZSkpLFxyXG5cdCAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRyYW5zbmFtZVwiIH0sXHJcblx0ICAgICAgICAgICAgICAgICAgICBwcmVhY3RfMS5oKFwiaVwiLCB7IGNsYXNzTmFtZTogdGhpcy5pY29uQ2xhc3MoKSB9KSxcclxuXHQgICAgICAgICAgICAgICAgICAgIFwiIFwiLFxyXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy50cmFuc2l0aW9uLnRvKCkubmFtZSkpKSk7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBCcmVhZGNydW1iQXJyb3c7XHJcblx0fShwcmVhY3RfMS5Db21wb25lbnQpKTtcclxuXHRleHBvcnRzLkJyZWFkY3J1bWJBcnJvdyA9IEJyZWFkY3J1bWJBcnJvdztcclxuXG5cbi8qKiovIH0pLFxuLyogNDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5tYWtlQ2FuY2VsYWJsZSA9IGZ1bmN0aW9uIChwcm9taXNlKSB7XHJcblx0ICAgIHZhciBoYXNDYW5jZWxlZF8gPSBmYWxzZTtcclxuXHQgICAgdmFyIHdyYXBwZWRQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG5cdCAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIGhhc0NhbmNlbGVkXyA/IHJlamVjdCh7IGlzQ2FuY2VsZWQ6IHRydWUgfSkgOiByZXNvbHZlKHZhbCk7IH0sIGZ1bmN0aW9uIChlcnJvcikgeyByZXR1cm4gaGFzQ2FuY2VsZWRfID8gcmVqZWN0KHsgaXNDYW5jZWxlZDogdHJ1ZSB9KSA6IHJlamVjdChlcnJvcik7IH0pO1xyXG5cdCAgICB9KTtcclxuXHQgICAgdmFyIGNhbmNlbGFibGVQcm9taXNlID0ge1xyXG5cdCAgICAgICAgcHJvbWlzZTogd3JhcHBlZFByb21pc2UsXHJcblx0ICAgICAgICBpc0NhbmNlbGVkOiBmYWxzZSxcclxuXHQgICAgICAgIGNhbmNlbDogZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgICAgIGNhbmNlbGFibGVQcm9taXNlLmlzQ2FuY2VsZWQgPSBoYXNDYW5jZWxlZF8gPSB0cnVlO1xyXG5cdCAgICAgICAgfSxcclxuXHQgICAgfTtcclxuXHQgICAgcmV0dXJuIGNhbmNlbGFibGVQcm9taXNlO1xyXG5cdH07XHJcblxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSlcbn0pO1xuO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB2aXN1YWxpemVyLm1pbi5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9idW5kbGVzL1wiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDM1NDMxY2NhNDQzNzEwOTI5NGQ2IiwiaW1wb3J0IHsgcmVuZGVyLCBoIH0gZnJvbSBcInByZWFjdFwiO1xuaW1wb3J0IHsgVUlSb3V0ZXIsIFVJUm91dGVyUGx1Z2luIH0gZnJvbSBcIkB1aXJvdXRlci9jb3JlXCI7XG5pbXBvcnQgeyBTdGF0ZVNlbGVjdG9yIH0gZnJvbSBcIi4vc2VsZWN0b3Ivc3RhdGVTZWxlY3RvclwiO1xuaW1wb3J0IHsgU3RhdGVWaXN1YWxpemVyIH0gZnJvbSBcIi4vc3RhdGUvc3RhdGVWaXN1YWxpemVyXCI7XG5pbXBvcnQgeyBTdGF0ZVRyZWUgfSBmcm9tIFwiLi9zdGF0ZS9zdGF0ZVRyZWVcIjtcbmltcG9ydCB7IFRyYW5zaXRpb25WaXN1YWxpemVyIH0gZnJvbSBcIi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uVmlzdWFsaXplclwiO1xuXG5jb25zdCB2aXN1YWxpemVyID0gKHJvdXRlcjogVUlSb3V0ZXIpID0+IG5ldyBWaXN1YWxpemVyKHJvdXRlciwge30pO1xuXG5leHBvcnQgaW50ZXJmYWNlIE9wdGlvbnMge1xuICBzdGF0ZT86IGJvb2xlYW47XG4gIHRyYW5zaXRpb24/OiBib29sZWFuO1xufVxuXG5mdW5jdGlvbiB1bm1vdW50Q29tcG9uZW50KG5vZGUpIHtcbiAgbGV0IE5vdGhpbmcgPSAoKSA9PiBudWxsO1xuICByZW5kZXIoaChOb3RoaW5nIGFzIGFueSwgbnVsbCksIGRvY3VtZW50LmJvZHksIG5vZGUpO1xufVxuXG5jb25zdCBERUZBVUxUUyA9IHtcbiAgc3RhdGU6IHRydWUsXG4gIHRyYW5zaXRpb246IHRydWUsXG59O1xuXG5jbGFzcyBWaXN1YWxpemVyIGltcGxlbWVudHMgVUlSb3V0ZXJQbHVnaW4ge1xuICBuYW1lOiBzdHJpbmcgPSBcInZpc3VhbGl6ZXJcIjtcbiAgcHJpdmF0ZSBzdGF0ZVZpc3VhbGl6ZXJFbDogRWxlbWVudDtcbiAgcHJpdmF0ZSB0cmFuc2l0aW9uVmlzdWFsaXplckVsOiBFbGVtZW50O1xuXG4gIGRpc3Bvc2Uocm91dGVyPzogVUlSb3V0ZXIpOiBhbnkge1xuICAgIHRoaXMuc3RhdGVWaXN1YWxpemVyRWwgJiYgdW5tb3VudENvbXBvbmVudCh0aGlzLnN0YXRlVmlzdWFsaXplckVsKTtcbiAgICB0aGlzLnRyYW5zaXRpb25WaXN1YWxpemVyRWwgJiYgdW5tb3VudENvbXBvbmVudCh0aGlzLnRyYW5zaXRpb25WaXN1YWxpemVyRWwpO1xuICAgIHRoaXMuc3RhdGVWaXN1YWxpemVyRWwgPSBudWxsO1xuICAgIHRoaXMudHJhbnNpdGlvblZpc3VhbGl6ZXJFbCA9IG51bGw7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgcm91dGVyOiBVSVJvdXRlciwgb3B0aW9uczogT3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUUywgb3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMuc3RhdGUpIHtcbiAgICAgIHRoaXMuc3RhdGVWaXN1YWxpemVyRWwgPSBTdGF0ZVZpc3VhbGl6ZXIuY3JlYXRlKHJvdXRlcik7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnRyYW5zaXRpb24pIHtcbiAgICAgIHRoaXMudHJhbnNpdGlvblZpc3VhbGl6ZXJFbCA9IFRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZShyb3V0ZXIpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQge1xuICAgIFZpc3VhbGl6ZXIsICAgICAgICAgICAvLyByb3V0ZXIucGx1Z2luKFZpc3VhbGl6ZXIpO1xuICAgIHZpc3VhbGl6ZXIsICAgICAgICAgICAvLyB2aXN1YWxpemVyKHJvdXRlcik7XG5cbiAgICBTdGF0ZVZpc3VhbGl6ZXIsICAgICAgLy8gU3RhdGVWaXN1YWxpemVyLmNyZWF0ZShyb3V0ZXIsIGVsPywgcHJvcHM/KVxuICAgIFN0YXRlVHJlZSwgICAgICAgICAgICAvLyBTdGF0ZVRyZWUuY3JlYXRlKHJvdXRlciwgZWw/LCBwcm9wcz8pXG4gICAgVHJhbnNpdGlvblZpc3VhbGl6ZXIsIC8vIFRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZShyb3V0ZXIsIGVsPywgcHJvcHM/KVxuXG4gICAgU3RhdGVTZWxlY3RvciwgICAgICAgIC8vIFJlYWN0IFN0YXRlIFNlbGVjdG9yIGNvbXBvbmVudFxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy92aXN1YWxpemVyLnRzIiwiIWZ1bmN0aW9uKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgICdvYmplY3QnID09IHR5cGVvZiBleHBvcnRzICYmICd1bmRlZmluZWQnICE9IHR5cGVvZiBtb2R1bGUgPyBmYWN0b3J5KGV4cG9ydHMpIDogJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWyAnZXhwb3J0cycgXSwgZmFjdG9yeSkgOiBmYWN0b3J5KGdsb2JhbC5wcmVhY3QgPSBnbG9iYWwucHJlYWN0IHx8IHt9KTtcbn0odGhpcywgZnVuY3Rpb24oZXhwb3J0cykge1xuICAgIGZ1bmN0aW9uIFZOb2RlKG5vZGVOYW1lLCBhdHRyaWJ1dGVzLCBjaGlsZHJlbikge1xuICAgICAgICB0aGlzLm5vZGVOYW1lID0gbm9kZU5hbWU7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgICAgdGhpcy5rZXkgPSBhdHRyaWJ1dGVzICYmIGF0dHJpYnV0ZXMua2V5O1xuICAgIH1cbiAgICBmdW5jdGlvbiBoKG5vZGVOYW1lLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHZhciBjaGlsZHJlbiwgbGFzdFNpbXBsZSwgY2hpbGQsIHNpbXBsZSwgaTtcbiAgICAgICAgZm9yIChpID0gYXJndW1lbnRzLmxlbmd0aDsgaS0tID4gMjsgKSBzdGFjay5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gICAgICAgIGlmIChhdHRyaWJ1dGVzICYmIGF0dHJpYnV0ZXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmICghc3RhY2subGVuZ3RoKSBzdGFjay5wdXNoKGF0dHJpYnV0ZXMuY2hpbGRyZW4pO1xuICAgICAgICAgICAgZGVsZXRlIGF0dHJpYnV0ZXMuY2hpbGRyZW47XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkgaWYgKChjaGlsZCA9IHN0YWNrLnBvcCgpKSBpbnN0YW5jZW9mIEFycmF5KSBmb3IgKGkgPSBjaGlsZC5sZW5ndGg7IGktLTsgKSBzdGFjay5wdXNoKGNoaWxkW2ldKTsgZWxzZSBpZiAobnVsbCAhPSBjaGlsZCAmJiBjaGlsZCAhPT0gITAgJiYgY2hpbGQgIT09ICExKSB7XG4gICAgICAgICAgICBpZiAoJ251bWJlcicgPT0gdHlwZW9mIGNoaWxkKSBjaGlsZCA9IFN0cmluZyhjaGlsZCk7XG4gICAgICAgICAgICBzaW1wbGUgPSAnc3RyaW5nJyA9PSB0eXBlb2YgY2hpbGQ7XG4gICAgICAgICAgICBpZiAoc2ltcGxlICYmIGxhc3RTaW1wbGUpIGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdICs9IGNoaWxkOyBlbHNlIHtcbiAgICAgICAgICAgICAgICAoY2hpbGRyZW4gfHwgKGNoaWxkcmVuID0gW10pKS5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgICAgICBsYXN0U2ltcGxlID0gc2ltcGxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBwID0gbmV3IFZOb2RlKG5vZGVOYW1lLCBhdHRyaWJ1dGVzIHx8IHZvaWQgMCwgY2hpbGRyZW4gfHwgRU1QVFlfQ0hJTERSRU4pO1xuICAgICAgICBpZiAob3B0aW9ucy52bm9kZSkgb3B0aW9ucy52bm9kZShwKTtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGV4dGVuZChvYmosIHByb3BzKSB7XG4gICAgICAgIGlmIChwcm9wcykgZm9yICh2YXIgaSBpbiBwcm9wcykgb2JqW2ldID0gcHJvcHNbaV07XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsb25lKG9iaikge1xuICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCBvYmopO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZWx2ZShvYmosIGtleSkge1xuICAgICAgICBmb3IgKHZhciBwID0ga2V5LnNwbGl0KCcuJyksIGkgPSAwOyBpIDwgcC5sZW5ndGggJiYgb2JqOyBpKyspIG9iaiA9IG9ialtwW2ldXTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNGdW5jdGlvbihvYmopIHtcbiAgICAgICAgcmV0dXJuICdmdW5jdGlvbicgPT0gdHlwZW9mIG9iajtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNTdHJpbmcob2JqKSB7XG4gICAgICAgIHJldHVybiAnc3RyaW5nJyA9PSB0eXBlb2Ygb2JqO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYXNoVG9DbGFzc05hbWUoYykge1xuICAgICAgICB2YXIgc3RyID0gJyc7XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gYykgaWYgKGNbcHJvcF0pIHtcbiAgICAgICAgICAgIGlmIChzdHIpIHN0ciArPSAnICc7XG4gICAgICAgICAgICBzdHIgKz0gcHJvcDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjbG9uZUVsZW1lbnQodm5vZGUsIHByb3BzKSB7XG4gICAgICAgIHJldHVybiBoKHZub2RlLm5vZGVOYW1lLCBleHRlbmQoY2xvbmUodm5vZGUuYXR0cmlidXRlcyksIHByb3BzKSwgYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMikgOiB2bm9kZS5jaGlsZHJlbik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUxpbmtlZFN0YXRlKGNvbXBvbmVudCwga2V5LCBldmVudFBhdGgpIHtcbiAgICAgICAgdmFyIHBhdGggPSBrZXkuc3BsaXQoJy4nKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciB0ID0gZSAmJiBlLnRhcmdldCB8fCB0aGlzLCBzdGF0ZSA9IHt9LCBvYmogPSBzdGF0ZSwgdiA9IGlzU3RyaW5nKGV2ZW50UGF0aCkgPyBkZWx2ZShlLCBldmVudFBhdGgpIDogdC5ub2RlTmFtZSA/IHQudHlwZS5tYXRjaCgvXmNoZXxyYWQvKSA/IHQuY2hlY2tlZCA6IHQudmFsdWUgOiBlLCBpID0gMDtcbiAgICAgICAgICAgIGZvciAoO2kgPCBwYXRoLmxlbmd0aCAtIDE7IGkrKykgb2JqID0gb2JqW3BhdGhbaV1dIHx8IChvYmpbcGF0aFtpXV0gPSAhaSAmJiBjb21wb25lbnQuc3RhdGVbcGF0aFtpXV0gfHwge30pO1xuICAgICAgICAgICAgb2JqW3BhdGhbaV1dID0gdjtcbiAgICAgICAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVucXVldWVSZW5kZXIoY29tcG9uZW50KSB7XG4gICAgICAgIGlmICghY29tcG9uZW50Ll9kaXJ0eSAmJiAoY29tcG9uZW50Ll9kaXJ0eSA9ICEwKSAmJiAxID09IGl0ZW1zLnB1c2goY29tcG9uZW50KSkgKG9wdGlvbnMuZGVib3VuY2VSZW5kZXJpbmcgfHwgZGVmZXIpKHJlcmVuZGVyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVyZW5kZXIoKSB7XG4gICAgICAgIHZhciBwLCBsaXN0ID0gaXRlbXM7XG4gICAgICAgIGl0ZW1zID0gW107XG4gICAgICAgIHdoaWxlIChwID0gbGlzdC5wb3AoKSkgaWYgKHAuX2RpcnR5KSByZW5kZXJDb21wb25lbnQocCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzRnVuY3Rpb25hbENvbXBvbmVudCh2bm9kZSkge1xuICAgICAgICB2YXIgbm9kZU5hbWUgPSB2bm9kZSAmJiB2bm9kZS5ub2RlTmFtZTtcbiAgICAgICAgcmV0dXJuIG5vZGVOYW1lICYmIGlzRnVuY3Rpb24obm9kZU5hbWUpICYmICEobm9kZU5hbWUucHJvdG90eXBlICYmIG5vZGVOYW1lLnByb3RvdHlwZS5yZW5kZXIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZEZ1bmN0aW9uYWxDb21wb25lbnQodm5vZGUsIGNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIHZub2RlLm5vZGVOYW1lKGdldE5vZGVQcm9wcyh2bm9kZSksIGNvbnRleHQgfHwgRU1QVFkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc1NhbWVOb2RlVHlwZShub2RlLCB2bm9kZSkge1xuICAgICAgICBpZiAoaXNTdHJpbmcodm5vZGUpKSByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIFRleHQ7XG4gICAgICAgIGlmIChpc1N0cmluZyh2bm9kZS5ub2RlTmFtZSkpIHJldHVybiAhbm9kZS5fY29tcG9uZW50Q29uc3RydWN0b3IgJiYgaXNOYW1lZE5vZGUobm9kZSwgdm5vZGUubm9kZU5hbWUpO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih2bm9kZS5ub2RlTmFtZSkpIHJldHVybiAobm9kZS5fY29tcG9uZW50Q29uc3RydWN0b3IgPyBub2RlLl9jb21wb25lbnRDb25zdHJ1Y3RvciA9PT0gdm5vZGUubm9kZU5hbWUgOiAhMCkgfHwgaXNGdW5jdGlvbmFsQ29tcG9uZW50KHZub2RlKTsgZWxzZSByZXR1cm47XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzTmFtZWROb2RlKG5vZGUsIG5vZGVOYW1lKSB7XG4gICAgICAgIHJldHVybiBub2RlLm5vcm1hbGl6ZWROb2RlTmFtZSA9PT0gbm9kZU5hbWUgfHwgdG9Mb3dlckNhc2Uobm9kZS5ub2RlTmFtZSkgPT09IHRvTG93ZXJDYXNlKG5vZGVOYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Tm9kZVByb3BzKHZub2RlKSB7XG4gICAgICAgIHZhciBwcm9wcyA9IGNsb25lKHZub2RlLmF0dHJpYnV0ZXMpO1xuICAgICAgICBwcm9wcy5jaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuO1xuICAgICAgICB2YXIgZGVmYXVsdFByb3BzID0gdm5vZGUubm9kZU5hbWUuZGVmYXVsdFByb3BzO1xuICAgICAgICBpZiAoZGVmYXVsdFByb3BzKSBmb3IgKHZhciBpIGluIGRlZmF1bHRQcm9wcykgaWYgKHZvaWQgMCA9PT0gcHJvcHNbaV0pIHByb3BzW2ldID0gZGVmYXVsdFByb3BzW2ldO1xuICAgICAgICByZXR1cm4gcHJvcHM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkge1xuICAgICAgICB2YXIgcCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgaWYgKHApIHAucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldEFjY2Vzc29yKG5vZGUsIG5hbWUsIG9sZCwgdmFsdWUsIGlzU3ZnKSB7XG4gICAgICAgIGlmICgnY2xhc3NOYW1lJyA9PT0gbmFtZSkgbmFtZSA9ICdjbGFzcyc7XG4gICAgICAgIGlmICgnY2xhc3MnID09PSBuYW1lICYmIHZhbHVlICYmICdvYmplY3QnID09IHR5cGVvZiB2YWx1ZSkgdmFsdWUgPSBoYXNoVG9DbGFzc05hbWUodmFsdWUpO1xuICAgICAgICBpZiAoJ2tleScgPT09IG5hbWUpIDsgZWxzZSBpZiAoJ2NsYXNzJyA9PT0gbmFtZSAmJiAhaXNTdmcpIG5vZGUuY2xhc3NOYW1lID0gdmFsdWUgfHwgJyc7IGVsc2UgaWYgKCdzdHlsZScgPT09IG5hbWUpIHtcbiAgICAgICAgICAgIGlmICghdmFsdWUgfHwgaXNTdHJpbmcodmFsdWUpIHx8IGlzU3RyaW5nKG9sZCkpIG5vZGUuc3R5bGUuY3NzVGV4dCA9IHZhbHVlIHx8ICcnO1xuICAgICAgICAgICAgaWYgKHZhbHVlICYmICdvYmplY3QnID09IHR5cGVvZiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghaXNTdHJpbmcob2xkKSkgZm9yICh2YXIgaSBpbiBvbGQpIGlmICghKGkgaW4gdmFsdWUpKSBub2RlLnN0eWxlW2ldID0gJyc7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiB2YWx1ZSkgbm9kZS5zdHlsZVtpXSA9ICdudW1iZXInID09IHR5cGVvZiB2YWx1ZVtpXSAmJiAhTk9OX0RJTUVOU0lPTl9QUk9QU1tpXSA/IHZhbHVlW2ldICsgJ3B4JyA6IHZhbHVlW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCdkYW5nZXJvdXNseVNldElubmVySFRNTCcgPT09IG5hbWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgbm9kZS5pbm5lckhUTUwgPSB2YWx1ZS5fX2h0bWwgfHwgJyc7XG4gICAgICAgIH0gZWxzZSBpZiAoJ28nID09IG5hbWVbMF0gJiYgJ24nID09IG5hbWVbMV0pIHtcbiAgICAgICAgICAgIHZhciBsID0gbm9kZS5fbGlzdGVuZXJzIHx8IChub2RlLl9saXN0ZW5lcnMgPSB7fSk7XG4gICAgICAgICAgICBuYW1lID0gdG9Mb3dlckNhc2UobmFtZS5zdWJzdHJpbmcoMikpO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsW25hbWVdKSBub2RlLmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgZXZlbnRQcm94eSwgISFOT05fQlVCQkxJTkdfRVZFTlRTW25hbWVdKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobFtuYW1lXSkgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIGV2ZW50UHJveHksICEhTk9OX0JVQkJMSU5HX0VWRU5UU1tuYW1lXSk7XG4gICAgICAgICAgICBsW25hbWVdID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSBpZiAoJ2xpc3QnICE9PSBuYW1lICYmICd0eXBlJyAhPT0gbmFtZSAmJiAhaXNTdmcgJiYgbmFtZSBpbiBub2RlKSB7XG4gICAgICAgICAgICBzZXRQcm9wZXJ0eShub2RlLCBuYW1lLCBudWxsID09IHZhbHVlID8gJycgOiB2YWx1ZSk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSB2YWx1ZSB8fCB2YWx1ZSA9PT0gITEpIG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIG5zID0gaXNTdmcgJiYgbmFtZS5tYXRjaCgvXnhsaW5rXFw6PyguKykvKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHZhbHVlIHx8IHZhbHVlID09PSAhMSkgaWYgKG5zKSBub2RlLnJlbW92ZUF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgdG9Mb3dlckNhc2UobnNbMV0pKTsgZWxzZSBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTsgZWxzZSBpZiAoJ29iamVjdCcgIT0gdHlwZW9mIHZhbHVlICYmICFpc0Z1bmN0aW9uKHZhbHVlKSkgaWYgKG5zKSBub2RlLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgdG9Mb3dlckNhc2UobnNbMV0pLCB2YWx1ZSk7IGVsc2Ugbm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldFByb3BlcnR5KG5vZGUsIG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBub2RlW25hbWVdID0gdmFsdWU7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGV2ZW50UHJveHkoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlzdGVuZXJzW2UudHlwZV0ob3B0aW9ucy5ldmVudCAmJiBvcHRpb25zLmV2ZW50KGUpIHx8IGUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb2xsZWN0Tm9kZShub2RlKSB7XG4gICAgICAgIHJlbW92ZU5vZGUobm9kZSk7XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgbm9kZS5fY29tcG9uZW50ID0gbm9kZS5fY29tcG9uZW50Q29uc3RydWN0b3IgPSBudWxsO1xuICAgICAgICAgICAgdmFyIF9uYW1lID0gbm9kZS5ub3JtYWxpemVkTm9kZU5hbWUgfHwgdG9Mb3dlckNhc2Uobm9kZS5ub2RlTmFtZSk7XG4gICAgICAgICAgICAobm9kZXNbX25hbWVdIHx8IChub2Rlc1tfbmFtZV0gPSBbXSkpLnB1c2gobm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlTm9kZShub2RlTmFtZSwgaXNTdmcpIHtcbiAgICAgICAgdmFyIG5hbWUgPSB0b0xvd2VyQ2FzZShub2RlTmFtZSksIG5vZGUgPSBub2Rlc1tuYW1lXSAmJiBub2Rlc1tuYW1lXS5wb3AoKSB8fCAoaXNTdmcgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgbm9kZU5hbWUpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlTmFtZSkpO1xuICAgICAgICBub2RlLm5vcm1hbGl6ZWROb2RlTmFtZSA9IG5hbWU7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmbHVzaE1vdW50cygpIHtcbiAgICAgICAgdmFyIGM7XG4gICAgICAgIHdoaWxlIChjID0gbW91bnRzLnBvcCgpKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hZnRlck1vdW50KSBvcHRpb25zLmFmdGVyTW91bnQoYyk7XG4gICAgICAgICAgICBpZiAoYy5jb21wb25lbnREaWRNb3VudCkgYy5jb21wb25lbnREaWRNb3VudCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpZmYoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwsIHBhcmVudCwgY29tcG9uZW50Um9vdCkge1xuICAgICAgICBpZiAoIWRpZmZMZXZlbCsrKSB7XG4gICAgICAgICAgICBpc1N2Z01vZGUgPSBwYXJlbnQgJiYgdm9pZCAwICE9PSBwYXJlbnQub3duZXJTVkdFbGVtZW50O1xuICAgICAgICAgICAgaHlkcmF0aW5nID0gZG9tICYmICEoQVRUUl9LRVkgaW4gZG9tKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmV0ID0gaWRpZmYoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwpO1xuICAgICAgICBpZiAocGFyZW50ICYmIHJldC5wYXJlbnROb2RlICE9PSBwYXJlbnQpIHBhcmVudC5hcHBlbmRDaGlsZChyZXQpO1xuICAgICAgICBpZiAoIS0tZGlmZkxldmVsKSB7XG4gICAgICAgICAgICBoeWRyYXRpbmcgPSAhMTtcbiAgICAgICAgICAgIGlmICghY29tcG9uZW50Um9vdCkgZmx1c2hNb3VudHMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICBmdW5jdGlvbiBpZGlmZihkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCkge1xuICAgICAgICB2YXIgcmVmID0gdm5vZGUgJiYgdm5vZGUuYXR0cmlidXRlcyAmJiB2bm9kZS5hdHRyaWJ1dGVzLnJlZjtcbiAgICAgICAgd2hpbGUgKGlzRnVuY3Rpb25hbENvbXBvbmVudCh2bm9kZSkpIHZub2RlID0gYnVpbGRGdW5jdGlvbmFsQ29tcG9uZW50KHZub2RlLCBjb250ZXh0KTtcbiAgICAgICAgaWYgKG51bGwgPT0gdm5vZGUpIHZub2RlID0gJyc7XG4gICAgICAgIGlmIChpc1N0cmluZyh2bm9kZSkpIHtcbiAgICAgICAgICAgIGlmIChkb20gJiYgZG9tIGluc3RhbmNlb2YgVGV4dCAmJiBkb20ucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgIGlmIChkb20ubm9kZVZhbHVlICE9IHZub2RlKSBkb20ubm9kZVZhbHVlID0gdm5vZGU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChkb20pIHJlY29sbGVjdE5vZGVUcmVlKGRvbSk7XG4gICAgICAgICAgICAgICAgZG9tID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodm5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRvbTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNGdW5jdGlvbih2bm9kZS5ub2RlTmFtZSkpIHJldHVybiBidWlsZENvbXBvbmVudEZyb21WTm9kZShkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCk7XG4gICAgICAgIHZhciBvdXQgPSBkb20sIG5vZGVOYW1lID0gU3RyaW5nKHZub2RlLm5vZGVOYW1lKSwgcHJldlN2Z01vZGUgPSBpc1N2Z01vZGUsIHZjaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuO1xuICAgICAgICBpc1N2Z01vZGUgPSAnc3ZnJyA9PT0gbm9kZU5hbWUgPyAhMCA6ICdmb3JlaWduT2JqZWN0JyA9PT0gbm9kZU5hbWUgPyAhMSA6IGlzU3ZnTW9kZTtcbiAgICAgICAgaWYgKCFkb20pIG91dCA9IGNyZWF0ZU5vZGUobm9kZU5hbWUsIGlzU3ZnTW9kZSk7IGVsc2UgaWYgKCFpc05hbWVkTm9kZShkb20sIG5vZGVOYW1lKSkge1xuICAgICAgICAgICAgb3V0ID0gY3JlYXRlTm9kZShub2RlTmFtZSwgaXNTdmdNb2RlKTtcbiAgICAgICAgICAgIHdoaWxlIChkb20uZmlyc3RDaGlsZCkgb3V0LmFwcGVuZENoaWxkKGRvbS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIGlmIChkb20ucGFyZW50Tm9kZSkgZG9tLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG91dCwgZG9tKTtcbiAgICAgICAgICAgIHJlY29sbGVjdE5vZGVUcmVlKGRvbSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZjID0gb3V0LmZpcnN0Q2hpbGQsIHByb3BzID0gb3V0W0FUVFJfS0VZXTtcbiAgICAgICAgaWYgKCFwcm9wcykge1xuICAgICAgICAgICAgb3V0W0FUVFJfS0VZXSA9IHByb3BzID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBhID0gb3V0LmF0dHJpYnV0ZXMsIGkgPSBhLmxlbmd0aDsgaS0tOyApIHByb3BzW2FbaV0ubmFtZV0gPSBhW2ldLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaHlkcmF0aW5nICYmIHZjaGlsZHJlbiAmJiAxID09PSB2Y2hpbGRyZW4ubGVuZ3RoICYmICdzdHJpbmcnID09IHR5cGVvZiB2Y2hpbGRyZW5bMF0gJiYgZmMgJiYgZmMgaW5zdGFuY2VvZiBUZXh0ICYmICFmYy5uZXh0U2libGluZykge1xuICAgICAgICAgICAgaWYgKGZjLm5vZGVWYWx1ZSAhPSB2Y2hpbGRyZW5bMF0pIGZjLm5vZGVWYWx1ZSA9IHZjaGlsZHJlblswXTtcbiAgICAgICAgfSBlbHNlIGlmICh2Y2hpbGRyZW4gJiYgdmNoaWxkcmVuLmxlbmd0aCB8fCBmYykgaW5uZXJEaWZmTm9kZShvdXQsIHZjaGlsZHJlbiwgY29udGV4dCwgbW91bnRBbGwsICEhcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwpO1xuICAgICAgICBkaWZmQXR0cmlidXRlcyhvdXQsIHZub2RlLmF0dHJpYnV0ZXMsIHByb3BzKTtcbiAgICAgICAgaWYgKHJlZikgKHByb3BzLnJlZiA9IHJlZikob3V0KTtcbiAgICAgICAgaXNTdmdNb2RlID0gcHJldlN2Z01vZGU7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlubmVyRGlmZk5vZGUoZG9tLCB2Y2hpbGRyZW4sIGNvbnRleHQsIG1vdW50QWxsLCBhYnNvcmIpIHtcbiAgICAgICAgdmFyIGosIGMsIHZjaGlsZCwgY2hpbGQsIG9yaWdpbmFsQ2hpbGRyZW4gPSBkb20uY2hpbGROb2RlcywgY2hpbGRyZW4gPSBbXSwga2V5ZWQgPSB7fSwga2V5ZWRMZW4gPSAwLCBtaW4gPSAwLCBsZW4gPSBvcmlnaW5hbENoaWxkcmVuLmxlbmd0aCwgY2hpbGRyZW5MZW4gPSAwLCB2bGVuID0gdmNoaWxkcmVuICYmIHZjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgIGlmIChsZW4pIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBfY2hpbGQgPSBvcmlnaW5hbENoaWxkcmVuW2ldLCBwcm9wcyA9IF9jaGlsZFtBVFRSX0tFWV0sIGtleSA9IHZsZW4gPyAoYyA9IF9jaGlsZC5fY29tcG9uZW50KSA/IGMuX19rZXkgOiBwcm9wcyA/IHByb3BzLmtleSA6IG51bGwgOiBudWxsO1xuICAgICAgICAgICAgaWYgKG51bGwgIT0ga2V5KSB7XG4gICAgICAgICAgICAgICAga2V5ZWRMZW4rKztcbiAgICAgICAgICAgICAgICBrZXllZFtrZXldID0gX2NoaWxkO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChoeWRyYXRpbmcgfHwgYWJzb3JiIHx8IHByb3BzIHx8IF9jaGlsZCBpbnN0YW5jZW9mIFRleHQpIGNoaWxkcmVuW2NoaWxkcmVuTGVuKytdID0gX2NoaWxkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2bGVuKSBmb3IgKHZhciBpID0gMDsgaSA8IHZsZW47IGkrKykge1xuICAgICAgICAgICAgdmNoaWxkID0gdmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgY2hpbGQgPSBudWxsO1xuICAgICAgICAgICAgdmFyIGtleSA9IHZjaGlsZC5rZXk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPSBrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ZWRMZW4gJiYga2V5IGluIGtleWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkID0ga2V5ZWRba2V5XTtcbiAgICAgICAgICAgICAgICAgICAga2V5ZWRba2V5XSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAga2V5ZWRMZW4tLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFjaGlsZCAmJiBtaW4gPCBjaGlsZHJlbkxlbikgZm9yIChqID0gbWluOyBqIDwgY2hpbGRyZW5MZW47IGorKykge1xuICAgICAgICAgICAgICAgIGMgPSBjaGlsZHJlbltqXTtcbiAgICAgICAgICAgICAgICBpZiAoYyAmJiBpc1NhbWVOb2RlVHlwZShjLCB2Y2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkID0gYztcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5bal0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChqID09PSBjaGlsZHJlbkxlbiAtIDEpIGNoaWxkcmVuTGVuLS07XG4gICAgICAgICAgICAgICAgICAgIGlmIChqID09PSBtaW4pIG1pbisrO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGlsZCA9IGlkaWZmKGNoaWxkLCB2Y2hpbGQsIGNvbnRleHQsIG1vdW50QWxsKTtcbiAgICAgICAgICAgIGlmIChjaGlsZCAmJiBjaGlsZCAhPT0gZG9tKSBpZiAoaSA+PSBsZW4pIGRvbS5hcHBlbmRDaGlsZChjaGlsZCk7IGVsc2UgaWYgKGNoaWxkICE9PSBvcmlnaW5hbENoaWxkcmVuW2ldKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkID09PSBvcmlnaW5hbENoaWxkcmVuW2kgKyAxXSkgcmVtb3ZlTm9kZShvcmlnaW5hbENoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgICAgICBkb20uaW5zZXJ0QmVmb3JlKGNoaWxkLCBvcmlnaW5hbENoaWxkcmVuW2ldIHx8IG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChrZXllZExlbikgZm9yICh2YXIgaSBpbiBrZXllZCkgaWYgKGtleWVkW2ldKSByZWNvbGxlY3ROb2RlVHJlZShrZXllZFtpXSk7XG4gICAgICAgIHdoaWxlIChtaW4gPD0gY2hpbGRyZW5MZW4pIHtcbiAgICAgICAgICAgIGNoaWxkID0gY2hpbGRyZW5bY2hpbGRyZW5MZW4tLV07XG4gICAgICAgICAgICBpZiAoY2hpbGQpIHJlY29sbGVjdE5vZGVUcmVlKGNoaWxkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiByZWNvbGxlY3ROb2RlVHJlZShub2RlLCB1bm1vdW50T25seSkge1xuICAgICAgICB2YXIgY29tcG9uZW50ID0gbm9kZS5fY29tcG9uZW50O1xuICAgICAgICBpZiAoY29tcG9uZW50KSB1bm1vdW50Q29tcG9uZW50KGNvbXBvbmVudCwgIXVubW91bnRPbmx5KTsgZWxzZSB7XG4gICAgICAgICAgICBpZiAobm9kZVtBVFRSX0tFWV0gJiYgbm9kZVtBVFRSX0tFWV0ucmVmKSBub2RlW0FUVFJfS0VZXS5yZWYobnVsbCk7XG4gICAgICAgICAgICBpZiAoIXVubW91bnRPbmx5KSBjb2xsZWN0Tm9kZShub2RlKTtcbiAgICAgICAgICAgIHZhciBjO1xuICAgICAgICAgICAgd2hpbGUgKGMgPSBub2RlLmxhc3RDaGlsZCkgcmVjb2xsZWN0Tm9kZVRyZWUoYywgdW5tb3VudE9ubHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpZmZBdHRyaWJ1dGVzKGRvbSwgYXR0cnMsIG9sZCkge1xuICAgICAgICB2YXIgbmFtZTtcbiAgICAgICAgZm9yIChuYW1lIGluIG9sZCkgaWYgKCEoYXR0cnMgJiYgbmFtZSBpbiBhdHRycykgJiYgbnVsbCAhPSBvbGRbbmFtZV0pIHNldEFjY2Vzc29yKGRvbSwgbmFtZSwgb2xkW25hbWVdLCBvbGRbbmFtZV0gPSB2b2lkIDAsIGlzU3ZnTW9kZSk7XG4gICAgICAgIGlmIChhdHRycykgZm9yIChuYW1lIGluIGF0dHJzKSBpZiAoISgnY2hpbGRyZW4nID09PSBuYW1lIHx8ICdpbm5lckhUTUwnID09PSBuYW1lIHx8IG5hbWUgaW4gb2xkICYmIGF0dHJzW25hbWVdID09PSAoJ3ZhbHVlJyA9PT0gbmFtZSB8fCAnY2hlY2tlZCcgPT09IG5hbWUgPyBkb21bbmFtZV0gOiBvbGRbbmFtZV0pKSkgc2V0QWNjZXNzb3IoZG9tLCBuYW1lLCBvbGRbbmFtZV0sIG9sZFtuYW1lXSA9IGF0dHJzW25hbWVdLCBpc1N2Z01vZGUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb2xsZWN0Q29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5jb25zdHJ1Y3Rvci5uYW1lLCBsaXN0ID0gY29tcG9uZW50c1tuYW1lXTtcbiAgICAgICAgaWYgKGxpc3QpIGxpc3QucHVzaChjb21wb25lbnQpOyBlbHNlIGNvbXBvbmVudHNbbmFtZV0gPSBbIGNvbXBvbmVudCBdO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnQoQ3RvciwgcHJvcHMsIGNvbnRleHQpIHtcbiAgICAgICAgdmFyIGluc3QgPSBuZXcgQ3Rvcihwcm9wcywgY29udGV4dCksIGxpc3QgPSBjb21wb25lbnRzW0N0b3IubmFtZV07XG4gICAgICAgIENvbXBvbmVudC5jYWxsKGluc3QsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgaWYgKGxpc3QpIGZvciAodmFyIGkgPSBsaXN0Lmxlbmd0aDsgaS0tOyApIGlmIChsaXN0W2ldLmNvbnN0cnVjdG9yID09PSBDdG9yKSB7XG4gICAgICAgICAgICBpbnN0Lm5leHRCYXNlID0gbGlzdFtpXS5uZXh0QmFzZTtcbiAgICAgICAgICAgIGxpc3Quc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluc3Q7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldENvbXBvbmVudFByb3BzKGNvbXBvbmVudCwgcHJvcHMsIG9wdHMsIGNvbnRleHQsIG1vdW50QWxsKSB7XG4gICAgICAgIGlmICghY29tcG9uZW50Ll9kaXNhYmxlKSB7XG4gICAgICAgICAgICBjb21wb25lbnQuX2Rpc2FibGUgPSAhMDtcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQuX19yZWYgPSBwcm9wcy5yZWYpIGRlbGV0ZSBwcm9wcy5yZWY7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50Ll9fa2V5ID0gcHJvcHMua2V5KSBkZWxldGUgcHJvcHMua2V5O1xuICAgICAgICAgICAgaWYgKCFjb21wb25lbnQuYmFzZSB8fCBtb3VudEFsbCkge1xuICAgICAgICAgICAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbE1vdW50KSBjb21wb25lbnQuY29tcG9uZW50V2lsbE1vdW50KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKSBjb21wb25lbnQuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhwcm9wcywgY29udGV4dCk7XG4gICAgICAgICAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0ICE9PSBjb21wb25lbnQuY29udGV4dCkge1xuICAgICAgICAgICAgICAgIGlmICghY29tcG9uZW50LnByZXZDb250ZXh0KSBjb21wb25lbnQucHJldkNvbnRleHQgPSBjb21wb25lbnQuY29udGV4dDtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbXBvbmVudC5wcmV2UHJvcHMpIGNvbXBvbmVudC5wcmV2UHJvcHMgPSBjb21wb25lbnQucHJvcHM7XG4gICAgICAgICAgICBjb21wb25lbnQucHJvcHMgPSBwcm9wcztcbiAgICAgICAgICAgIGNvbXBvbmVudC5fZGlzYWJsZSA9ICExO1xuICAgICAgICAgICAgaWYgKDAgIT09IG9wdHMpIGlmICgxID09PSBvcHRzIHx8IG9wdGlvbnMuc3luY0NvbXBvbmVudFVwZGF0ZXMgIT09ICExIHx8ICFjb21wb25lbnQuYmFzZSkgcmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCwgMSwgbW91bnRBbGwpOyBlbHNlIGVucXVldWVSZW5kZXIoY29tcG9uZW50KTtcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQuX19yZWYpIGNvbXBvbmVudC5fX3JlZihjb21wb25lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbmRlckNvbXBvbmVudChjb21wb25lbnQsIG9wdHMsIG1vdW50QWxsLCBpc0NoaWxkKSB7XG4gICAgICAgIGlmICghY29tcG9uZW50Ll9kaXNhYmxlKSB7XG4gICAgICAgICAgICB2YXIgc2tpcCwgcmVuZGVyZWQsIGluc3QsIGNiYXNlLCBwcm9wcyA9IGNvbXBvbmVudC5wcm9wcywgc3RhdGUgPSBjb21wb25lbnQuc3RhdGUsIGNvbnRleHQgPSBjb21wb25lbnQuY29udGV4dCwgcHJldmlvdXNQcm9wcyA9IGNvbXBvbmVudC5wcmV2UHJvcHMgfHwgcHJvcHMsIHByZXZpb3VzU3RhdGUgPSBjb21wb25lbnQucHJldlN0YXRlIHx8IHN0YXRlLCBwcmV2aW91c0NvbnRleHQgPSBjb21wb25lbnQucHJldkNvbnRleHQgfHwgY29udGV4dCwgaXNVcGRhdGUgPSBjb21wb25lbnQuYmFzZSwgbmV4dEJhc2UgPSBjb21wb25lbnQubmV4dEJhc2UsIGluaXRpYWxCYXNlID0gaXNVcGRhdGUgfHwgbmV4dEJhc2UsIGluaXRpYWxDaGlsZENvbXBvbmVudCA9IGNvbXBvbmVudC5fY29tcG9uZW50O1xuICAgICAgICAgICAgaWYgKGlzVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50LnByb3BzID0gcHJldmlvdXNQcm9wcztcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuc3RhdGUgPSBwcmV2aW91c1N0YXRlO1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5jb250ZXh0ID0gcHJldmlvdXNDb250ZXh0O1xuICAgICAgICAgICAgICAgIGlmICgyICE9PSBvcHRzICYmIGNvbXBvbmVudC5zaG91bGRDb21wb25lbnRVcGRhdGUgJiYgY29tcG9uZW50LnNob3VsZENvbXBvbmVudFVwZGF0ZShwcm9wcywgc3RhdGUsIGNvbnRleHQpID09PSAhMSkgc2tpcCA9ICEwOyBlbHNlIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFVwZGF0ZSkgY29tcG9uZW50LmNvbXBvbmVudFdpbGxVcGRhdGUocHJvcHMsIHN0YXRlLCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQucHJvcHMgPSBwcm9wcztcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21wb25lbnQucHJldlByb3BzID0gY29tcG9uZW50LnByZXZTdGF0ZSA9IGNvbXBvbmVudC5wcmV2Q29udGV4dCA9IGNvbXBvbmVudC5uZXh0QmFzZSA9IG51bGw7XG4gICAgICAgICAgICBjb21wb25lbnQuX2RpcnR5ID0gITE7XG4gICAgICAgICAgICBpZiAoIXNraXApIHtcbiAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50LnJlbmRlcikgcmVuZGVyZWQgPSBjb21wb25lbnQucmVuZGVyKHByb3BzLCBzdGF0ZSwgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5nZXRDaGlsZENvbnRleHQpIGNvbnRleHQgPSBleHRlbmQoY2xvbmUoY29udGV4dCksIGNvbXBvbmVudC5nZXRDaGlsZENvbnRleHQoKSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGlzRnVuY3Rpb25hbENvbXBvbmVudChyZW5kZXJlZCkpIHJlbmRlcmVkID0gYnVpbGRGdW5jdGlvbmFsQ29tcG9uZW50KHJlbmRlcmVkLCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICB2YXIgdG9Vbm1vdW50LCBiYXNlLCBjaGlsZENvbXBvbmVudCA9IHJlbmRlcmVkICYmIHJlbmRlcmVkLm5vZGVOYW1lO1xuICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNoaWxkQ29tcG9uZW50KSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRQcm9wcyA9IGdldE5vZGVQcm9wcyhyZW5kZXJlZCk7XG4gICAgICAgICAgICAgICAgICAgIGluc3QgPSBpbml0aWFsQ2hpbGRDb21wb25lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0ICYmIGluc3QuY29uc3RydWN0b3IgPT09IGNoaWxkQ29tcG9uZW50ICYmIGNoaWxkUHJvcHMua2V5ID09IGluc3QuX19rZXkpIHNldENvbXBvbmVudFByb3BzKGluc3QsIGNoaWxkUHJvcHMsIDEsIGNvbnRleHQpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5tb3VudCA9IGluc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0ID0gY3JlYXRlQ29tcG9uZW50KGNoaWxkQ29tcG9uZW50LCBjaGlsZFByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3QubmV4dEJhc2UgPSBpbnN0Lm5leHRCYXNlIHx8IG5leHRCYXNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdC5fcGFyZW50Q29tcG9uZW50ID0gY29tcG9uZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50Ll9jb21wb25lbnQgPSBpbnN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q29tcG9uZW50UHJvcHMoaW5zdCwgY2hpbGRQcm9wcywgMCwgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJDb21wb25lbnQoaW5zdCwgMSwgbW91bnRBbGwsICEwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBiYXNlID0gaW5zdC5iYXNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNiYXNlID0gaW5pdGlhbEJhc2U7XG4gICAgICAgICAgICAgICAgICAgIHRvVW5tb3VudCA9IGluaXRpYWxDaGlsZENvbXBvbmVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvVW5tb3VudCkgY2Jhc2UgPSBjb21wb25lbnQuX2NvbXBvbmVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsQmFzZSB8fCAxID09PSBvcHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2Jhc2UpIGNiYXNlLl9jb21wb25lbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZSA9IGRpZmYoY2Jhc2UsIHJlbmRlcmVkLCBjb250ZXh0LCBtb3VudEFsbCB8fCAhaXNVcGRhdGUsIGluaXRpYWxCYXNlICYmIGluaXRpYWxCYXNlLnBhcmVudE5vZGUsICEwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbEJhc2UgJiYgYmFzZSAhPT0gaW5pdGlhbEJhc2UgJiYgaW5zdCAhPT0gaW5pdGlhbENoaWxkQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiYXNlUGFyZW50ID0gaW5pdGlhbEJhc2UucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2VQYXJlbnQgJiYgYmFzZSAhPT0gYmFzZVBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVBhcmVudC5yZXBsYWNlQ2hpbGQoYmFzZSwgaW5pdGlhbEJhc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0b1VubW91bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsQmFzZS5fY29tcG9uZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvbGxlY3ROb2RlVHJlZShpbml0aWFsQmFzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRvVW5tb3VudCkgdW5tb3VudENvbXBvbmVudCh0b1VubW91bnQsIGJhc2UgIT09IGluaXRpYWxCYXNlKTtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuYmFzZSA9IGJhc2U7XG4gICAgICAgICAgICAgICAgaWYgKGJhc2UgJiYgIWlzQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudFJlZiA9IGNvbXBvbmVudCwgdCA9IGNvbXBvbmVudDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHQgPSB0Ll9wYXJlbnRDb21wb25lbnQpIChjb21wb25lbnRSZWYgPSB0KS5iYXNlID0gYmFzZTtcbiAgICAgICAgICAgICAgICAgICAgYmFzZS5fY29tcG9uZW50ID0gY29tcG9uZW50UmVmO1xuICAgICAgICAgICAgICAgICAgICBiYXNlLl9jb21wb25lbnRDb25zdHJ1Y3RvciA9IGNvbXBvbmVudFJlZi5jb25zdHJ1Y3RvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzVXBkYXRlIHx8IG1vdW50QWxsKSBtb3VudHMudW5zaGlmdChjb21wb25lbnQpOyBlbHNlIGlmICghc2tpcCkge1xuICAgICAgICAgICAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50RGlkVXBkYXRlKSBjb21wb25lbnQuY29tcG9uZW50RGlkVXBkYXRlKHByZXZpb3VzUHJvcHMsIHByZXZpb3VzU3RhdGUsIHByZXZpb3VzQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWZ0ZXJVcGRhdGUpIG9wdGlvbnMuYWZ0ZXJVcGRhdGUoY29tcG9uZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmbiwgY2IgPSBjb21wb25lbnQuX3JlbmRlckNhbGxiYWNrcztcbiAgICAgICAgICAgIGlmIChjYikgd2hpbGUgKGZuID0gY2IucG9wKCkpIGZuLmNhbGwoY29tcG9uZW50KTtcbiAgICAgICAgICAgIGlmICghZGlmZkxldmVsICYmICFpc0NoaWxkKSBmbHVzaE1vdW50cygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkQ29tcG9uZW50RnJvbVZOb2RlKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsKSB7XG4gICAgICAgIHZhciBjID0gZG9tICYmIGRvbS5fY29tcG9uZW50LCBvcmlnaW5hbENvbXBvbmVudCA9IGMsIG9sZERvbSA9IGRvbSwgaXNEaXJlY3RPd25lciA9IGMgJiYgZG9tLl9jb21wb25lbnRDb25zdHJ1Y3RvciA9PT0gdm5vZGUubm9kZU5hbWUsIGlzT3duZXIgPSBpc0RpcmVjdE93bmVyLCBwcm9wcyA9IGdldE5vZGVQcm9wcyh2bm9kZSk7XG4gICAgICAgIHdoaWxlIChjICYmICFpc093bmVyICYmIChjID0gYy5fcGFyZW50Q29tcG9uZW50KSkgaXNPd25lciA9IGMuY29uc3RydWN0b3IgPT09IHZub2RlLm5vZGVOYW1lO1xuICAgICAgICBpZiAoYyAmJiBpc093bmVyICYmICghbW91bnRBbGwgfHwgYy5fY29tcG9uZW50KSkge1xuICAgICAgICAgICAgc2V0Q29tcG9uZW50UHJvcHMoYywgcHJvcHMsIDMsIGNvbnRleHQsIG1vdW50QWxsKTtcbiAgICAgICAgICAgIGRvbSA9IGMuYmFzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbENvbXBvbmVudCAmJiAhaXNEaXJlY3RPd25lcikge1xuICAgICAgICAgICAgICAgIHVubW91bnRDb21wb25lbnQob3JpZ2luYWxDb21wb25lbnQsICEwKTtcbiAgICAgICAgICAgICAgICBkb20gPSBvbGREb20gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYyA9IGNyZWF0ZUNvbXBvbmVudCh2bm9kZS5ub2RlTmFtZSwgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICAgICAgaWYgKGRvbSAmJiAhYy5uZXh0QmFzZSkge1xuICAgICAgICAgICAgICAgIGMubmV4dEJhc2UgPSBkb207XG4gICAgICAgICAgICAgICAgb2xkRG9tID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldENvbXBvbmVudFByb3BzKGMsIHByb3BzLCAxLCBjb250ZXh0LCBtb3VudEFsbCk7XG4gICAgICAgICAgICBkb20gPSBjLmJhc2U7XG4gICAgICAgICAgICBpZiAob2xkRG9tICYmIGRvbSAhPT0gb2xkRG9tKSB7XG4gICAgICAgICAgICAgICAgb2xkRG9tLl9jb21wb25lbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJlY29sbGVjdE5vZGVUcmVlKG9sZERvbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRvbTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdW5tb3VudENvbXBvbmVudChjb21wb25lbnQsIHJlbW92ZSkge1xuICAgICAgICBpZiAob3B0aW9ucy5iZWZvcmVVbm1vdW50KSBvcHRpb25zLmJlZm9yZVVubW91bnQoY29tcG9uZW50KTtcbiAgICAgICAgdmFyIGJhc2UgPSBjb21wb25lbnQuYmFzZTtcbiAgICAgICAgY29tcG9uZW50Ll9kaXNhYmxlID0gITA7XG4gICAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFVubW91bnQpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsVW5tb3VudCgpO1xuICAgICAgICBjb21wb25lbnQuYmFzZSA9IG51bGw7XG4gICAgICAgIHZhciBpbm5lciA9IGNvbXBvbmVudC5fY29tcG9uZW50O1xuICAgICAgICBpZiAoaW5uZXIpIHVubW91bnRDb21wb25lbnQoaW5uZXIsIHJlbW92ZSk7IGVsc2UgaWYgKGJhc2UpIHtcbiAgICAgICAgICAgIGlmIChiYXNlW0FUVFJfS0VZXSAmJiBiYXNlW0FUVFJfS0VZXS5yZWYpIGJhc2VbQVRUUl9LRVldLnJlZihudWxsKTtcbiAgICAgICAgICAgIGNvbXBvbmVudC5uZXh0QmFzZSA9IGJhc2U7XG4gICAgICAgICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlTm9kZShiYXNlKTtcbiAgICAgICAgICAgICAgICBjb2xsZWN0Q29tcG9uZW50KGNvbXBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYztcbiAgICAgICAgICAgIHdoaWxlIChjID0gYmFzZS5sYXN0Q2hpbGQpIHJlY29sbGVjdE5vZGVUcmVlKGMsICFyZW1vdmUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21wb25lbnQuX19yZWYpIGNvbXBvbmVudC5fX3JlZihudWxsKTtcbiAgICAgICAgaWYgKGNvbXBvbmVudC5jb21wb25lbnREaWRVbm1vdW50KSBjb21wb25lbnQuY29tcG9uZW50RGlkVW5tb3VudCgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBDb21wb25lbnQocHJvcHMsIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5fZGlydHkgPSAhMDtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUpIHRoaXMuc3RhdGUgPSB7fTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVuZGVyKHZub2RlLCBwYXJlbnQsIG1lcmdlKSB7XG4gICAgICAgIHJldHVybiBkaWZmKG1lcmdlLCB2bm9kZSwge30sICExLCBwYXJlbnQpO1xuICAgIH1cbiAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgIHZhciBzdGFjayA9IFtdO1xuICAgIHZhciBFTVBUWV9DSElMRFJFTiA9IFtdO1xuICAgIHZhciBsY0NhY2hlID0ge307XG4gICAgdmFyIHRvTG93ZXJDYXNlID0gZnVuY3Rpb24ocykge1xuICAgICAgICByZXR1cm4gbGNDYWNoZVtzXSB8fCAobGNDYWNoZVtzXSA9IHMudG9Mb3dlckNhc2UoKSk7XG4gICAgfTtcbiAgICB2YXIgcmVzb2x2ZWQgPSAndW5kZWZpbmVkJyAhPSB0eXBlb2YgUHJvbWlzZSAmJiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB2YXIgZGVmZXIgPSByZXNvbHZlZCA/IGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgcmVzb2x2ZWQudGhlbihmKTtcbiAgICB9IDogc2V0VGltZW91dDtcbiAgICB2YXIgRU1QVFkgPSB7fTtcbiAgICB2YXIgQVRUUl9LRVkgPSAndW5kZWZpbmVkJyAhPSB0eXBlb2YgU3ltYm9sID8gU3ltYm9sLmZvcigncHJlYWN0YXR0cicpIDogJ19fcHJlYWN0YXR0cl8nO1xuICAgIHZhciBOT05fRElNRU5TSU9OX1BST1BTID0ge1xuICAgICAgICBib3hGbGV4OiAxLFxuICAgICAgICBib3hGbGV4R3JvdXA6IDEsXG4gICAgICAgIGNvbHVtbkNvdW50OiAxLFxuICAgICAgICBmaWxsT3BhY2l0eTogMSxcbiAgICAgICAgZmxleDogMSxcbiAgICAgICAgZmxleEdyb3c6IDEsXG4gICAgICAgIGZsZXhQb3NpdGl2ZTogMSxcbiAgICAgICAgZmxleFNocmluazogMSxcbiAgICAgICAgZmxleE5lZ2F0aXZlOiAxLFxuICAgICAgICBmb250V2VpZ2h0OiAxLFxuICAgICAgICBsaW5lQ2xhbXA6IDEsXG4gICAgICAgIGxpbmVIZWlnaHQ6IDEsXG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIG9yZGVyOiAxLFxuICAgICAgICBvcnBoYW5zOiAxLFxuICAgICAgICBzdHJva2VPcGFjaXR5OiAxLFxuICAgICAgICB3aWRvd3M6IDEsXG4gICAgICAgIHpJbmRleDogMSxcbiAgICAgICAgem9vbTogMVxuICAgIH07XG4gICAgdmFyIE5PTl9CVUJCTElOR19FVkVOVFMgPSB7XG4gICAgICAgIGJsdXI6IDEsXG4gICAgICAgIGVycm9yOiAxLFxuICAgICAgICBmb2N1czogMSxcbiAgICAgICAgbG9hZDogMSxcbiAgICAgICAgcmVzaXplOiAxLFxuICAgICAgICBzY3JvbGw6IDFcbiAgICB9O1xuICAgIHZhciBpdGVtcyA9IFtdO1xuICAgIHZhciBub2RlcyA9IHt9O1xuICAgIHZhciBtb3VudHMgPSBbXTtcbiAgICB2YXIgZGlmZkxldmVsID0gMDtcbiAgICB2YXIgaXNTdmdNb2RlID0gITE7XG4gICAgdmFyIGh5ZHJhdGluZyA9ICExO1xuICAgIHZhciBjb21wb25lbnRzID0ge307XG4gICAgZXh0ZW5kKENvbXBvbmVudC5wcm90b3R5cGUsIHtcbiAgICAgICAgbGlua1N0YXRlOiBmdW5jdGlvbihrZXksIGV2ZW50UGF0aCkge1xuICAgICAgICAgICAgdmFyIGMgPSB0aGlzLl9saW5rZWRTdGF0ZXMgfHwgKHRoaXMuX2xpbmtlZFN0YXRlcyA9IHt9KTtcbiAgICAgICAgICAgIHJldHVybiBjW2tleSArIGV2ZW50UGF0aF0gfHwgKGNba2V5ICsgZXZlbnRQYXRoXSA9IGNyZWF0ZUxpbmtlZFN0YXRlKHRoaXMsIGtleSwgZXZlbnRQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFN0YXRlOiBmdW5jdGlvbihzdGF0ZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcmV2U3RhdGUpIHRoaXMucHJldlN0YXRlID0gY2xvbmUocyk7XG4gICAgICAgICAgICBleHRlbmQocywgaXNGdW5jdGlvbihzdGF0ZSkgPyBzdGF0ZShzLCB0aGlzLnByb3BzKSA6IHN0YXRlKTtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykgKHRoaXMuX3JlbmRlckNhbGxiYWNrcyA9IHRoaXMuX3JlbmRlckNhbGxiYWNrcyB8fCBbXSkucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICBlbnF1ZXVlUmVuZGVyKHRoaXMpO1xuICAgICAgICB9LFxuICAgICAgICBmb3JjZVVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZW5kZXJDb21wb25lbnQodGhpcywgMik7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7fVxuICAgIH0pO1xuICAgIGV4cG9ydHMuaCA9IGg7XG4gICAgZXhwb3J0cy5jbG9uZUVsZW1lbnQgPSBjbG9uZUVsZW1lbnQ7XG4gICAgZXhwb3J0cy5Db21wb25lbnQgPSBDb21wb25lbnQ7XG4gICAgZXhwb3J0cy5yZW5kZXIgPSByZW5kZXI7XG4gICAgZXhwb3J0cy5yZXJlbmRlciA9IHJlcmVuZGVyO1xuICAgIGV4cG9ydHMub3B0aW9ucyA9IG9wdGlvbnM7XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByZWFjdC5qcy5tYXBcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcHJlYWN0L2Rpc3QvcHJlYWN0LmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCB7IGgsIHJlbmRlciwgQ29tcG9uZW50IH0gZnJvbSBcInByZWFjdFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElQcm9wcyB7XG4gIHJvdXRlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU3RhdGUge1xuICBjdXJyZW50Pzogc3RyaW5nO1xuICBzdGF0ZXM/OiBzdHJpbmdbXTtcbiAgZGVyZWdpc3RlckZuPzogRnVuY3Rpb247XG59XG5cbmV4cG9ydCBjbGFzcyBTdGF0ZVNlbGVjdG9yIGV4dGVuZHMgQ29tcG9uZW50PElQcm9wcywgSVN0YXRlPiB7XG4gIGRlcmVnaXN0ZXJTdGF0ZUxpc3RlbmVyRm46IEZ1bmN0aW9uO1xuXG4gIHN0YXRlID0ge1xuICAgIGN1cnJlbnQ6IG51bGwsXG4gICAgc3RhdGVzOiBbXSxcbiAgICBkZXJlZ2lzdGVyRm46IG51bGxcbiAgfTtcblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBsZXQgcm91dGVyID0gdGhpcy5wcm9wcy5yb3V0ZXI7XG4gICAgXG4gICAgY29uc3QgdXBkYXRlU3RhdGVzID0gKCkgPT4gXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzdGF0ZXM6IHJvdXRlci5zdGF0ZVJlZ2lzdHJ5LmdldCgpLm1hcChzdGF0ZSA9PiBzdGF0ZS5uYW1lKSB9KTtcbiAgICBjb25zdCB1cGRhdGVDdXJyZW50ID0gKHRyYW5zKSA9PlxuICAgICAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50OiB0cmFucy50bygpLm5hbWV9KTtcbiAgICBcbiAgICBpZiAocm91dGVyLnN0YXRlUmVnaXN0cnkub25TdGF0ZXNDaGFuZ2VkKSB7XG4gICAgICB0aGlzLmRlcmVnaXN0ZXJTdGF0ZUxpc3RlbmVyRm4gPSByb3V0ZXIuc3RhdGVSZWdpc3RyeS5vblN0YXRlc0NoYW5nZWQodXBkYXRlU3RhdGVzKTtcbiAgICB9XG5cbiAgICBsZXQgZGVyZWdpc3RlckZuID0gcm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLm9uU3VjY2Vzcyh7fSwgdXBkYXRlQ3VycmVudCk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHsgY3VycmVudDogcm91dGVyLmdsb2JhbHMuY3VycmVudC5uYW1lLCBzdGF0ZXM6IFtdLCBkZXJlZ2lzdGVyRm4gfSk7XG4gICAgdXBkYXRlU3RhdGVzKCk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5kZXJlZ2lzdGVyRm4pIHtcbiAgICAgIHRoaXMuc3RhdGUuZGVyZWdpc3RlckZuKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmRlcmVnaXN0ZXJTdGF0ZUxpc3RlbmVyRm4pIHtcbiAgICAgIHRoaXMuZGVyZWdpc3RlclN0YXRlTGlzdGVuZXJGbigpO1xuICAgIH1cbiAgfVxuXG4gIHNlbGVjdFN0YXRlID0gKGV2ZW50KSA9PiB7XG4gICAgbGV0ICRzdGF0ZSA9IHRoaXMucHJvcHMucm91dGVyLnN0YXRlU2VydmljZTtcbiAgICB2YXIgdG8gPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgaWYgKHRvKSAkc3RhdGUuZ28odG8pO1xuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8c2VsZWN0IHZhbHVlPXt0aGlzLnN0YXRlLmN1cnJlbnQgfHwgXCJcIn0gb25DaGFuZ2U9e3RoaXMuc2VsZWN0U3RhdGV9IHN0eWxlPXt7IG1heFdpZHRoOiAxMjAgfX0+XG4gICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPkNob29zZSBhIHN0YXRlPC9vcHRpb24+XG4gICAgICAgICAgeyB0aGlzLnN0YXRlLnN0YXRlcy5tYXAoc3RhdGUgPT5cbiAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e3N0YXRlfSB2YWx1ZT17c3RhdGV9PntzdGF0ZX08L29wdGlvbj5cbiAgICAgICAgICApIH1cbiAgICAgICAgPC9zZWxlY3Q+XG4gICAgKVxuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc2VsZWN0b3Ivc3RhdGVTZWxlY3Rvci50c3giLCJpbXBvcnQgeyBoLCByZW5kZXIsIENvbXBvbmVudCB9IGZyb20gXCJwcmVhY3RcIjtcbmltcG9ydCBcIi4vc3RhdGVWaXN1YWxpemVyLmNzc1wiO1xuaW1wb3J0IHsgU3RhdGVTZWxlY3RvciB9IGZyb20gXCIuLi9zZWxlY3Rvci9zdGF0ZVNlbGVjdG9yXCI7XG5pbXBvcnQgeyB0b2dnbGVDbGFzcywgYWRkQ2xhc3MgfSBmcm9tIFwiLi4vdXRpbC90b2dnbGVDbGFzc1wiO1xuaW1wb3J0IHsgZHJhZ2dhYmxlLCBkcmFnQWN0aW9ucyB9IGZyb20gXCIuLi91dGlsL2RyYWdnYWJsZVwiO1xuaW1wb3J0IHsgU3RhdGVUcmVlIH0gZnJvbSBcIi4vc3RhdGVUcmVlXCI7XG5pbXBvcnQgeyBERUZBVUxUX1JFTkRFUkVSLCBSRU5ERVJFUl9QUkVTRVRTIH0gZnJvbSBcIi4vcmVuZGVyZXJcIjtcbmltcG9ydCB7IFJlbmRlcmVyIH0gZnJvbSBcIi4vaW50ZXJmYWNlXCI7XG5cbmRlY2xhcmUgZnVuY3Rpb24gcmVxdWlyZShzdHJpbmcpOiBzdHJpbmc7XG5sZXQgaW1nQ2hldnJvbiA9IHJlcXVpcmUoJy4uLy4uL2ltYWdlcy8xNi9jaGV2cm9uLWRvd24ucG5nJyk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVByb3BzIHtcbiAgcm91dGVyO1xuICBtaW5pbWl6ZUFmdGVyPzogbnVtYmVyOyAvLyBtc1xuICB3aWR0aD86IG51bWJlcjsgLy8gcHhcbiAgaGVpZ2h0PzogbnVtYmVyOyAvLyBweFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTdGF0ZSB7XG4gIGhlaWdodD86IG51bWJlcixcbiAgd2lkdGg/OiBudW1iZXIsXG4gIHJlbmRlcmVyPzogUmVuZGVyZXIsXG4gIHByZXNldE5hbWU/OiBzdHJpbmcsXG59XG5cbmV4cG9ydCBjbGFzcyBTdGF0ZVZpc3VhbGl6ZXIgZXh0ZW5kcyBDb21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcbiAgc3RhdGUgPSB7IGhlaWdodDogbnVsbCwgd2lkdGg6IG51bGwsIHByZXNldE5hbWU6ICdUcmVlJywgcmVuZGVyZXI6IERFRkFVTFRfUkVOREVSRVIgfTtcblxuICBwcml2YXRlIG1pbmltaXplVGltZW91dDogYW55O1xuICBwcml2YXRlIGRlcmVnaXN0ZXJGbnM6IEZ1bmN0aW9uW10gPSBbXTtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgU3RhdGVWaXN1YWxpemVyIGFuZCBhZGRzIGl0IHRvIHRoZSBkb2N1bWVudC5cbiAgICpcbiAgICogQHBhcmFtIHJvdXRlciB0aGUgVUlSb3V0ZXIgb2JqZWN0XG4gICAqIEBwYXJhbSBlbGVtZW50IChvcHRpb25hbCkgdGhlIGVsZW1lbnQgd2hlcmUgdGhlIFN0YXRlVmlzdWFsaXplciBzaG91bGQgYmUgcGxhY2VkLlxuICAgKiAgICAgICAgICAgICAgICBJZiBubyBlbGVtZW50IGlzIHBhc3NlZCwgYW4gZWxlbWVudCB3aWxsIGJlIGNyZWF0ZWQgaW4gdGhlIGJvZHkuXG4gICAqIEBwYXJhbSBwcm9wcyBoZWlnaHQvd2lkdGggcHJvcGVydGllcyBkZWZhdWx0OiB7IGhlaWdodDogMzUwLCB3aWR0aDogMjUwIH1cbiAgICpcbiAgICogIyBBbmd1bGFyIDEgKyBVSS1Sb3V0ZXIgKDEuMC4wLWJldGEuMiBhbmQgaGlnaGVyKTpcbiAgICpcbiAgICogSW5qZWN0IHRoZSByb3V0ZXIgKGAkdWlSb3V0ZXJgKSBpbiBhIHJ1biBibG9jaywgdGhlbiBjYWxsIFN0YXRlVmlzdWFsaXplci5jcmVhdGUoKTtcbiAgICpcbiAgICogYGBgXG4gICAqIGFwcC5ydW4oZnVuY3Rpb24oJHVpUm91dGVyKSB7XG4gICAqICAgU3RhdGVWaXN1YWxpemVyLmNyZWF0ZSgkdWlSb3V0ZXIpO1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqICMgQW5ndWxhciAxICsgVUktUm91dGVyIDEuMC4wLWFscGhhLjEgdGhyb3VnaCAxLjAuMC1iZXRhLjE6XG4gICAqXG4gICAqIEluamVjdCB0aGUgcm91dGVyIChgbmcxVUlSb3V0ZXJgKSBpbiBhIHJ1biBibG9jaywgdGhlbiBjYWxsIFN0YXRlVmlzdWFsaXplci5jcmVhdGUoKTtcbiAgICpcbiAgICogYGBgXG4gICAqIGFwcC5ydW4oZnVuY3Rpb24obmcxVUlSb3V0ZXIpIHtcbiAgICogICBTdGF0ZVZpc3VhbGl6ZXIuY3JlYXRlKG5nMVVJUm91dGVyKTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBBbmd1bGFyIDI6XG4gICAqXG4gICAqIENhbGwgU3RhdGVWaXN1YWxpemVyLmNyZWF0ZSgpIGZyb20geW91ciBVSVJvdXRlckNvbmZpZ1xuICAgKlxuICAgKiBgYGBcbiAgICogZXhwb3J0IGNsYXNzIE15VUlSb3V0ZXJDb25maWcgZXh0ZW5kcyBVSVJvdXRlckNvbmZpZyB7XG4gICAqICAgY29uZmlndXJlKHJvdXRlcjogVUlSb3V0ZXIpIHtcbiAgICogICAgIFN0YXRlVmlzdWFsaXplci5jcmVhdGUocm91dGVyKTtcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFJlYWN0OlxuICAgKlxuICAgKiBDYWxsIFN0YXRlVmlzdWFsaXplci5jcmVhdGUoKSBmcm9tIHlvdXIgYm9vdHN0cmFwXG4gICAqXG4gICAqIGBgYFxuICAgKiBsZXQgcm91dGVyID0gbmV3IFVJUm91dGVyUmVhY3QoKTtcbiAgICogU3RhdGVWaXN1YWxpemVyLmNyZWF0ZShyb3V0ZXIpO1xuICAgKiByb3V0ZXIuc3RhcnQoKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIGVsZW1lbnQgdGhhdCB3YXMgYm9vdHN0cmFwcGVkLlxuICAgKiAgICAgICAgIFlvdSBjYW4gZGVzdHJveSB0aGUgY29tcG9uZW50IHVzaW5nOlxuICAgKiAgICAgICAgIFtSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RvcC1sZXZlbC1hcGkuaHRtbCNyZWFjdGRvbS51bm1vdW50Y29tcG9uZW50YXRub2RlKVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZShyb3V0ZXIsIGVsZW1lbnQ/LCBwcm9wcyA9IHt9KSB7XG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGVsZW1lbnQuaWQgPSBcInVpclN0YXRlVmlzdWFsaXplclwiO1xuICAgIH1cblxuICAgIGxldCBpbml0aWFsUHJvcHM6IElQcm9wcyA9IE9iamVjdC5hc3NpZ24oe30sIHByb3BzLCB7IHJvdXRlciwgbWluaW1pemVBZnRlcjogMjUwMCB9KTtcbiAgICBjb25zdCBfcmVuZGVyID0gKCkgPT4gIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICByZW5kZXIoaChTdGF0ZVZpc3VhbGl6ZXIsIGluaXRpYWxQcm9wcyksIGVsZW1lbnQpO1xuICAgIH07XG5cbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJyB8fCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICBfcmVuZGVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBfcmVuZGVyIGFzIGFueSwgZmFsc2UpO1xuICAgIH1cblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgcHJpdmF0ZSBlbDtcbiAgdG9wOiBzdHJpbmc7XG4gIGxlZnQ6IHN0cmluZztcbiAgcmlnaHQ6IHN0cmluZztcbiAgYm90dG9tOiBzdHJpbmc7XG5cbiAgbWluaW1pemUgPSAoZXZ0PykgPT4ge1xuICAgIGV2dCAmJiBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldnQgJiYgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgbGV0IGVsID0gdGhpcy5lbDtcbiAgICBsZXQgYm91bmRzID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICB0aGlzLnRvcCA9IChib3VuZHMudG9wKSArIFwicHhcIjtcbiAgICB0aGlzLmxlZnQgPSAoYm91bmRzLmxlZnQpICsgXCJweFwiO1xuICAgIHRoaXMucmlnaHQgPSAod2luZG93LmlubmVyV2lkdGggLSBib3VuZHMucmlnaHQpICsgXCJweFwiO1xuICAgIHRoaXMuYm90dG9tID0gKHdpbmRvdy5pbm5lckhlaWdodCAtIGJvdW5kcy5ib3R0b20pICsgXCJweFwiO1xuXG4gICAgZWwuc3R5bGUudG9wID0gXCJhdXRvXCI7XG4gICAgZWwuc3R5bGUubGVmdCA9IFwiYXV0b1wiO1xuICAgIGVsLnN0eWxlLnJpZ2h0ID0gdGhpcy5yaWdodDtcbiAgICBlbC5zdHlsZS5ib3R0b20gPSB0aGlzLmJvdHRvbTtcblxuICAgIGxldCB1bm1pbmltaXplID0gKCkgPT4ge1xuICAgICAgZWwuc3R5bGUudG9wID0gXCJhdXRvXCI7XG4gICAgICBlbC5zdHlsZS5sZWZ0ID0gXCJhdXRvXCI7XG4gICAgICBlbC5zdHlsZS5yaWdodCA9IHRoaXMucmlnaHQ7XG4gICAgICBlbC5zdHlsZS5ib3R0b20gPSB0aGlzLmJvdHRvbTtcblxuICAgICAgdG9nZ2xlQ2xhc3MoJ21pbmltaXplZCcpKGVsKTtcbiAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB1bm1pbmltaXplKTtcbiAgICAgIGNvbnN0IGFuaW1hdGlvbkVuZExpc3RlbmVyID0gKGV2dCkgPT4ge1xuICAgICAgICBsZXQgYm91bmRzID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGVsLnN0eWxlLnRvcCA9IGJvdW5kcy50b3AgKyBcInB4XCI7XG4gICAgICAgIGVsLnN0eWxlLmxlZnQgPSBib3VuZHMubGVmdCArIFwicHhcIjtcbiAgICAgICAgZWwuc3R5bGUucmlnaHQgPSBcImF1dG9cIjtcbiAgICAgICAgZWwuc3R5bGUuYm90dG9tID0gXCJhdXRvXCI7XG4gICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGFuaW1hdGlvbkVuZExpc3RlbmVyKTtcbiAgICAgIH07XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBhbmltYXRpb25FbmRMaXN0ZW5lcik7XG4gICAgfTtcblxuICAgIGFkZENsYXNzKCdtaW5pbWl6ZWQnKShlbCk7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHVubWluaW1pemUpO1xuICAgIC8vIHdhaXQgNTBtcyB0byBhdm9pZCBjb29yZGluYXRlcyBqdW1waW5nIGRpcmVjdGx5IHRvIDAvMCBhbmQgYXZvaWQgYW5pbWF0aW9uXG4gICAgc2V0VGltZW91dCgoKSA9PiBlbC5zdHlsZS5yaWdodCA9IGVsLnN0eWxlLmJvdHRvbSA9IFwiMFwiLCA1MCk7XG4gIH07XG5cbiAgaGFuZGxlQ2xpY2soKSB7XG4gICAgaWYgKHRoaXMubWluaW1pemVUaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5taW5pbWl6ZVRpbWVvdXQpO1xuICAgICAgdGhpcy5taW5pbWl6ZVRpbWVvdXQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMuZGVyZWdpc3RlckZucy5mb3JFYWNoKGZuID0+IGZuKCkpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgbGV0IGNvbnRyb2xzRWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy51aXJTdGF0ZVZpc0NvbnRyb2xzJyk7XG4gICAgbGV0IHZpc0VsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc3RhdGV2aXMnKTtcbiAgICB0aGlzLmRlcmVnaXN0ZXJGbnMucHVzaChkcmFnZ2FibGUoY29udHJvbHNFbCwgZHJhZ0FjdGlvbnMubW92ZSh0aGlzLmVsKSkpO1xuICAgIHRoaXMuZGVyZWdpc3RlckZucy5wdXNoKGRyYWdnYWJsZSh2aXNFbCwgZHJhZ0FjdGlvbnMubW92ZSh0aGlzLmVsKSkpO1xuXG4gICAgdGhpcy5tb25pdG9yUmVzaXplRXZlbnRzKCk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5taW5pbWl6ZUFmdGVyKSB7XG4gICAgICB0aGlzLm1pbmltaXplVGltZW91dCA9IHNldFRpbWVvdXQodGhpcy5taW5pbWl6ZS5iaW5kKHRoaXMpLCB0aGlzLnByb3BzLm1pbmltaXplQWZ0ZXIpO1xuICAgIH1cbiAgfVxuXG4gIG1vbml0b3JSZXNpemVFdmVudHMoKSB7XG4gICAgbGV0IF93aWR0aCA9IHRoaXMuZWwuc3R5bGUud2lkdGg7XG4gICAgbGV0IF9oZWlnaHQgPSB0aGlzLmVsLnN0eWxlLmhlaWdodDtcblxuICAgIGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG11dGF0aW9ucyA9PiB7XG4gICAgICBtdXRhdGlvbnMuZm9yRWFjaChtdXRhdGlvbiA9PiB7XG4gICAgICAgIGlmIChtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09ICdzdHlsZScpIHtcbiAgICAgICAgICBsZXQgZWwgPSBtdXRhdGlvbi50YXJnZXQsXG4gICAgICAgICAgICAgIG5ld3dpZHRoID0gZWxbJ3N0eWxlJ10ud2lkdGgsXG4gICAgICAgICAgICAgIG5ld2hlaWdodCA9IGVsWydzdHlsZSddLmhlaWdodDtcblxuICAgICAgICAgIGlmIChuZXd3aWR0aCAhPT0gX3dpZHRoIHx8IG5ld2hlaWdodCAhPT0gX2hlaWdodCkge1xuICAgICAgICAgICAgX3dpZHRoID0gbmV3d2lkdGg7XG4gICAgICAgICAgICBfaGVpZ2h0ID0gbmV3aGVpZ2h0O1xuICAgICAgICAgICAgbGV0IHdpZHRoID0gcGFyc2VJbnQobmV3d2lkdGgucmVwbGFjZSgvcHgkLywgXCJcIikpO1xuICAgICAgICAgICAgbGV0IGhlaWdodCA9IHBhcnNlSW50KG5ld2hlaWdodC5yZXBsYWNlKC9weCQvLCBcIlwiKSk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgd2lkdGgsIGhlaWdodCB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBsZXQgY29uZmlnID0ge1xuICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgIGNoaWxkTGlzdDogZmFsc2UsXG4gICAgICBjaGFyYWN0ZXJEYXRhOiBmYWxzZSxcbiAgICAgIHN1YnRyZWU6IGZhbHNlLFxuICAgICAgYXR0cmlidXRlRmlsdGVyOiBbJ3N0eWxlJ11cbiAgICB9O1xuXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmVsLCBjb25maWcpO1xuICAgIHRoaXMuZGVyZWdpc3RlckZucy5wdXNoKCgpID0+IG9ic2VydmVyLmRpc2Nvbm5lY3QoKSk7XG4gIH1cblxuICBoYW5kbGVab29tKGV2ZW50OiBFdmVudCkge1xuICAgIGxldCBlbCA9IGV2ZW50LnRhcmdldDtcbiAgICBsZXQgdmFsdWUgPSBwYXJzZUZsb2F0KGVsWyd2YWx1ZSddKTtcbiAgICBsZXQgcmVuZGVyZXIgPSB7IC4uLnRoaXMuc3RhdGUucmVuZGVyZXIsIHpvb206IHZhbHVlIH07XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHJlbmRlcmVyIH0pO1xuICB9XG5cbiAgaGFuZGxlTGF5b3V0KGV2ZW50OiBFdmVudCkge1xuICAgIGxldCBwcmVzZXROYW1lID0gZXZlbnQudGFyZ2V0Wyd2YWx1ZSddO1xuICAgIGxldCBzZXR0aW5ncyA9IFJFTkRFUkVSX1BSRVNFVFNbcHJlc2V0TmFtZV07XG4gICAgbGV0IHJlbmRlcmVyID0geyAuLi50aGlzLnN0YXRlLnJlbmRlcmVyLCAuLi5zZXR0aW5ncyB9O1xuICAgIHRoaXMuc2V0U3RhdGUoeyByZW5kZXJlciwgcHJlc2V0TmFtZSB9KTtcbiAgfVxuXG4gIHN2Z1dpZHRoID0gKCkgPT4gdGhpcy5wcm9wcy53aWR0aCB8fCB0aGlzLnN0YXRlLndpZHRoIHx8IDM1MDtcbiAgc3ZnSGVpZ2h0ID0gKCkgPT4gKHRoaXMucHJvcHMuaGVpZ2h0IHx8IHRoaXMuc3RhdGUuaGVpZ2h0IHx8IDI1MCkgLSAyNTtcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgem9vbUxldmVscyA9IFsyLjAsIDEuNSwgMS4wLCAwLjksIDAuOCwgMC43LCAwLjYsIDAuNSwgMC40LCAwLjNdO1xuICAgIFxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgcmVmPXsoZWwpID0+IHRoaXMuZWwgPSBlbH0gY2xhc3NOYW1lPVwidWlyU3RhdGVWaXNDb250YWluZXJcIiBvbkNsaWNrPXsgdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpIH0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1aXJTdGF0ZVZpc0NvbnRyb2xzXCI+XG4gICAgICAgICAgICA8ZGl2PiBDdXJyZW50IFN0YXRlOiA8U3RhdGVTZWxlY3RvciByb3V0ZXI9e3RoaXMucHJvcHMucm91dGVyfSAgLz48L2Rpdj5cblxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxzZWxlY3Qgb25DaGFuZ2U9e3RoaXMuaGFuZGxlTGF5b3V0LmJpbmQodGhpcyl9IHZhbHVlPXt0aGlzLnN0YXRlLnByZXNldE5hbWV9IHN0eWxlPXt7IG1heFdpZHRoOiAxMDAgfX0+XG4gICAgICAgICAgICAgICAgeyBPYmplY3Qua2V5cyhSRU5ERVJFUl9QUkVTRVRTKS5tYXAocHJlc2V0ID0+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9e3ByZXNldH0+e3ByZXNldH08L29wdGlvbj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L3NlbGVjdD5cblxuICAgICAgICAgICAgICA8c2VsZWN0IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVpvb20uYmluZCh0aGlzKX0gdmFsdWU9e3RoaXMuc3RhdGUucmVuZGVyZXIuem9vbSArICcnfSBzdHlsZT17eyBtYXhXaWR0aDogMTAwIH19PlxuICAgICAgICAgICAgICAgIHsgem9vbUxldmVscy5tYXAobGV2ZWwgPT5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT17bGV2ZWwgKyBcIlwifT57bGV2ZWx9eDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvc2VsZWN0PlxuXG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLm1pbmltaXplfT5cbiAgICAgICAgICAgICAgPGltZyBzcmM9e2ltZ0NoZXZyb259IHN0eWxlPXt7IGN1cnNvcjogJ3BvaW50ZXInIH19IC8+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxTdGF0ZVRyZWVcbiAgICAgICAgICAgICAgcm91dGVyPXt0aGlzLnByb3BzLnJvdXRlcn1cbiAgICAgICAgICAgICAgd2lkdGg9e3RoaXMuc3ZnV2lkdGgoKX1cbiAgICAgICAgICAgICAgaGVpZ2h0PXt0aGlzLnN2Z0hlaWdodCgpfVxuICAgICAgICAgICAgICByZW5kZXJlcj17dGhpcy5zdGF0ZS5yZW5kZXJlcn1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zdGF0ZS9zdGF0ZVZpc3VhbGl6ZXIudHN4IiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzP3NvdXJjZU1hcCEuL3N0YXRlVmlzdWFsaXplci5jc3NcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/c291cmNlTWFwIS4vc3RhdGVWaXN1YWxpemVyLmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/c291cmNlTWFwIS4vc3RhdGVWaXN1YWxpemVyLmNzc1wiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvc3RhdGUvc3RhdGVWaXN1YWxpemVyLmNzc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIudWlyU3RhdGVWaXNDb250YWluZXJ7ei1pbmRleDozO3Bvc2l0aW9uOmZpeGVkO3JpZ2h0OjJlbTtib3R0b206NGVtO2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6Y2VudGVyO2JhY2tncm91bmQtY29sb3I6aHNsYSgwLDAlLDEwMCUsLjgpO3RyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm0tb3JpZ2luOnJpZ2h0IGJvdHRvbTt0cmFuc2l0aW9uOnJpZ2h0IC41cyBlYXNlLGJvdHRvbSAuNXMgZWFzZSx0cmFuc2Zvcm0gLjVzIGVhc2U7cmVzaXplOmJvdGg7b3ZlcmZsb3c6aGlkZGVufS51aXJTdGF0ZVZpc0NvbnRhaW5lcjpob3ZlcntvdXRsaW5lOjNweCBzb2xpZCByZ2JhKDAsMCwwLC4zNSl9LnVpclN0YXRlVmlzQ29udGFpbmVyLm1pbmltaXplZHtjdXJzb3I6cG9pbnRlcjt0cmFuc2Zvcm06c2NhbGUoLjI1KX0udWlyU3RhdGVWaXNDb250YWluZXIgLnVpclN0YXRlVmlzQ29udHJvbHN7d2lkdGg6MTAwJTtkaXNwbGF5OmZsZXg7ZmxleC1mbG93OnJvdyBub3dyYXA7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47ZmxleDoxIDAgYXV0b30udWlyU3RhdGVWaXNDb250YWluZXIgLnN0YXRldmlze2ZsZXg6MSAxIGF1dG87dHJhbnNpdGlvbjphbGwgMXMgZWFzZX0uc3RhdGV2aXMgY2lyY2xle2ZpbGw6I2ZmZjtzdHJva2U6Z3JleTt0cmFuc2l0aW9uLXByb3BlcnR5OnIsZmlsbCxzdHJva2Usc3Ryb2tlLXdpZHRoO3RyYW5zaXRpb24tZHVyYXRpb246LjM1czt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLWluLW91dDtjdXJzb3I6cG9pbnRlcn0uc3RhdGV2aXMgdGV4dHt0cmFuc2l0aW9uLXByb3BlcnR5OngseSxmb250LXNpemUsc3Ryb2tlLHN0cm9rZS13aWR0aDt0cmFuc2l0aW9uLWR1cmF0aW9uOi4zNXM7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1pbi1vdXR9LnN0YXRldmlzIGNpcmNsZS5mdXR1cmV7c3Ryb2tlOmdyZXk7c3Ryb2tlLWRhc2hhcnJheTo3LDV9LnN0YXRldmlzIGNpcmNsZS5lbnRlcmVke3N0cm9rZTojMDAwO2ZpbGw6IzkwZWU5MH0uc3RhdGV2aXMgY2lyY2xlLmVudGVyZWQ6YWZ0ZXJ7Y29udGVudDpcXFwiPHRleHQ+RW50ZXJlZDwvdGV4dD5cXFwifS5zdGF0ZXZpcyBjaXJjbGUuYWN0aXZle2ZpbGw6Z3JlZW47c3Ryb2tlOiMwMDB9LnN0YXRldmlzIGNpcmNsZS5jb2xsYXBzZWR7c3Ryb2tlLWRhc2hhcnJheToyLDJ9LnN0YXRldmlzIHRleHR7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZn0uc3RhdGV2aXMgLmxpbmt7ZmlsbDpub25lO3N0cm9rZTojY2NjfS5zdGF0ZXZpcyB0ZXh0LmxhYmVse2ZpbGw6Z3JleTthbGlnbm1lbnQtYmFzZWxpbmU6bWlkZGxlfS5kcmFnZ2FibGV7Y3Vyc29yOm1vdmV9XCIsIFwiXCIsIHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIi8uL3NyYy9zdGF0ZS9zdGF0ZVZpc3VhbGl6ZXIuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUNBLHNCQUNJLFVBQVcsQUFDWCxlQUFnQixBQUNoQixVQUFXLEFBQ1gsV0FBWSxBQUNaLGFBQWMsQUFDZCxzQkFBdUIsQUFDdkIsbUJBQW9CLEFBQ3BCLG9DQUEyQyxBQUMzQyxtQkFBb0IsQUFDcEIsOEJBQStCLEFBQy9CLDZEQUFtRSxBQUNuRSxZQUFhLEFBQ2IsZUFBaUIsQ0FDcEIsQUFHRCw0QkFDSSxpQ0FBbUMsQ0FDdEMsQUFFRCxnQ0FDSSxlQUFnQixBQUNoQixvQkFBdUIsQ0FDMUIsQUFFRCwyQ0FDSSxXQUFZLEFBQ1osYUFBYyxBQUNkLHFCQUFzQixBQUN0Qiw4QkFBK0IsQUFDL0IsYUFBZSxDQUNsQixBQUVELGdDQUNJLGNBQWUsQUFDZixzQkFBd0IsQ0FDM0IsQUFFRCxpQkFFSSxVQUFXLEFBQ1gsWUFBYSxBQUdiLCtDQUFtRCxBQUNuRCx5QkFBMkIsQUFDM0IsdUNBQXdDLEFBRXhDLGNBQWdCLENBQ25CLEFBRUQsZUFDSSxzREFBMkQsQUFDM0QseUJBQTJCLEFBQzNCLHNDQUF3QyxDQUMzQyxBQUVELHdCQUVJLFlBQWEsQUFDYixvQkFBc0IsQ0FFekIsQUFFRCx5QkFFSSxZQUFjLEFBQ2QsWUFBaUIsQ0FDcEIsQUFFRCwrQkFDSSw4QkFBK0IsQ0FDbEMsQUFFRCx3QkFFSSxXQUFZLEFBQ1osV0FBYyxDQUNqQixBQUVELDJCQUNJLG9CQUFzQixDQUN6QixBQUVELGVBQ0ksc0JBQXdCLENBQzNCLEFBRUQsZ0JBQ0ksVUFBVyxBQUNYLFdBQWEsQ0FFaEIsQUFFRCxxQkFDSSxVQUFXLEFBQ1gseUJBQTJCLENBQzlCLEFBR0QsV0FDSSxXQUFhLENBQ2hCXCIsXCJmaWxlXCI6XCJzdGF0ZVZpc3VhbGl6ZXIuY3NzXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIlxcbi51aXJTdGF0ZVZpc0NvbnRhaW5lciB7XFxuICAgIHotaW5kZXg6IDM7XFxuICAgIHBvc2l0aW9uOiBmaXhlZDtcXG4gICAgcmlnaHQ6IDJlbTtcXG4gICAgYm90dG9tOiA0ZW07XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTtcXG4gICAgdHJhbnNmb3JtOiBzY2FsZSgxKTtcXG4gICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQgYm90dG9tO1xcbiAgICB0cmFuc2l0aW9uOiByaWdodCAwLjVzIGVhc2UsIGJvdHRvbSAwLjVzIGVhc2UsIHRyYW5zZm9ybSAwLjVzIGVhc2U7XFxuICAgIHJlc2l6ZTogYm90aDtcXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcXG59XFxuXFxuXFxuLnVpclN0YXRlVmlzQ29udGFpbmVyOmhvdmVyIHtcXG4gICAgb3V0bGluZTogM3B4IHNvbGlkIHJnYmEoMCwwLDAsMC4zNSlcXG59XFxuXFxuLnVpclN0YXRlVmlzQ29udGFpbmVyLm1pbmltaXplZCB7XFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgdHJhbnNmb3JtOiBzY2FsZSgwLjI1KTtcXG59XFxuXFxuLnVpclN0YXRlVmlzQ29udGFpbmVyIC51aXJTdGF0ZVZpc0NvbnRyb2xzIHtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZmxvdzogcm93IG5vd3JhcDtcXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgICBmbGV4OiAxIDAgYXV0bztcXG59XFxuXFxuLnVpclN0YXRlVmlzQ29udGFpbmVyIC5zdGF0ZXZpcyB7XFxuICAgIGZsZXg6IDEgMSBhdXRvO1xcbiAgICB0cmFuc2l0aW9uOiBhbGwgMXMgZWFzZTtcXG59XFxuXFxuLnN0YXRldmlzIGNpcmNsZSB7XFxuICAgIC8qcjogMTA7Ki9cXG4gICAgZmlsbDogI2ZmZjtcXG4gICAgc3Ryb2tlOiBncmV5O1xcbiAgICAvKnN0cm9rZS13aWR0aDogM3B4OyovXFxuXFxuICAgIHRyYW5zaXRpb24tcHJvcGVydHk6IHIsIGZpbGwsIHN0cm9rZSwgc3Ryb2tlLXdpZHRoO1xcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAzNTBtcztcXG4gICAgdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2UtaW4tb3V0O1xcblxcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxufVxcblxcbi5zdGF0ZXZpcyB0ZXh0IHtcXG4gICAgdHJhbnNpdGlvbi1wcm9wZXJ0eTogeCwgeSwgZm9udC1zaXplLCBzdHJva2UsIHN0cm9rZS13aWR0aDtcXG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMzUwbXM7XFxuICAgIHRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLWluLW91dDtcXG59XFxuXFxuLnN0YXRldmlzIGNpcmNsZS5mdXR1cmUge1xcbiAgICAvKnI6IDEwOyovXFxuICAgIHN0cm9rZTogZ3JleTtcXG4gICAgc3Ryb2tlLWRhc2hhcnJheTogNyw1O1xcbiAgICAvKnN0cm9rZS13aWR0aDogMXB4OyovXFxufVxcblxcbi5zdGF0ZXZpcyBjaXJjbGUuZW50ZXJlZCB7XFxuICAgIC8qcjogMTA7Ki9cXG4gICAgc3Ryb2tlOiBibGFjaztcXG4gICAgZmlsbDogbGlnaHRncmVlbjtcXG59XFxuXFxuLnN0YXRldmlzIGNpcmNsZS5lbnRlcmVkOmFmdGVyIHtcXG4gICAgY29udGVudDogXFxcIjx0ZXh0PkVudGVyZWQ8L3RleHQ+XFxcIlxcbn1cXG5cXG4uc3RhdGV2aXMgY2lyY2xlLmFjdGl2ZSB7XFxuICAgIC8qcjogMTU7Ki9cXG4gICAgZmlsbDogZ3JlZW47XFxuICAgIHN0cm9rZTogYmxhY2s7XFxufVxcblxcbi5zdGF0ZXZpcyBjaXJjbGUuY29sbGFwc2VkIHtcXG4gICAgc3Ryb2tlLWRhc2hhcnJheTogMiwgMlxcbn1cXG5cXG4uc3RhdGV2aXMgdGV4dCB7XFxuICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xcbn1cXG5cXG4uc3RhdGV2aXMgLmxpbmsge1xcbiAgICBmaWxsOiBub25lO1xcbiAgICBzdHJva2U6ICNjY2M7XFxuICAgIC8qc3Ryb2tlLXdpZHRoOiAycHg7Ki9cXG59XFxuXFxuLnN0YXRldmlzIHRleHQubGFiZWwge1xcbiAgICBmaWxsOiBncmV5O1xcbiAgICBhbGlnbm1lbnQtYmFzZWxpbmU6IG1pZGRsZTtcXG59XFxuXFxuXFxuLmRyYWdnYWJsZSB7XFxuICAgIGN1cnNvcjogbW92ZTtcXG59XFxuXFxuLyouZHJhZ2dhYmxlOmhvdmVyIHsqL1xcbiAgICAvKm91dGxpbmU6IDNweCBzb2xpZCByZ2JhKDAsMCwwLDAuMTUpKi9cXG4vKn0qL1wiXSxcInNvdXJjZVJvb3RcIjpcIndlYnBhY2s6Ly9cIn1dKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nzcy1sb2FkZXI/c291cmNlTWFwIS4vc3JjL3N0YXRlL3N0YXRlVmlzdWFsaXplci5jc3Ncbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcclxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcclxuKi9cclxuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgbGlzdCA9IFtdO1xyXG5cclxuXHQvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXHJcblx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xyXG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSB0aGlzW2ldO1xyXG5cdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0cmVzdWx0LnB1c2goXCJAbWVkaWEgXCIgKyBpdGVtWzJdICsgXCJ7XCIgKyBpdGVtWzFdICsgXCJ9XCIpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0fTtcclxuXHJcblx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcclxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XHJcblx0XHRpZih0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIilcclxuXHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XHJcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcclxuXHRcdFx0XHRhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XHJcblx0XHR9XHJcblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpdGVtID0gbW9kdWxlc1tpXTtcclxuXHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxyXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xyXG5cdFx0XHQvLyAgd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxyXG5cdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxyXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xyXG5cdFx0XHRcdGlmKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcclxuXHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XHJcblx0XHRcdFx0XHRpdGVtWzJdID0gXCIoXCIgKyBpdGVtWzJdICsgXCIpIGFuZCAoXCIgKyBtZWRpYVF1ZXJ5ICsgXCIpXCI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblx0cmV0dXJuIGxpc3Q7XHJcbn07XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xudmFyIHN0eWxlc0luRG9tID0ge30sXG5cdG1lbW9pemUgPSBmdW5jdGlvbihmbikge1xuXHRcdHZhciBtZW1vO1xuXHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0cmV0dXJuIG1lbW87XG5cdFx0fTtcblx0fSxcblx0aXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIC9tc2llIFs2LTldXFxiLy50ZXN0KHNlbGYubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcblx0fSksXG5cdGdldEhlYWRFbGVtZW50ID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xuXHR9KSxcblx0c2luZ2xldG9uRWxlbWVudCA9IG51bGwsXG5cdHNpbmdsZXRvbkNvdW50ZXIgPSAwLFxuXHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYodHlwZW9mIERFQlVHICE9PSBcInVuZGVmaW5lZFwiICYmIERFQlVHKSB7XG5cdFx0aWYodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG5cdH1cblxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0aWYgKHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIDxoZWFkPi5cblx0aWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIjtcblxuXHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QpO1xuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdH1cblx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QpO1xuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcblx0XHR9XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xuXHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspXG5cdFx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oKTtcblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdH1cblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyhsaXN0KSB7XG5cdHZhciBzdHlsZXMgPSBbXTtcblx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcblx0XHR2YXIgaWQgPSBpdGVtWzBdO1xuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKVxuXHRcdFx0c3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRlbHNlXG5cdFx0XHRuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG5cdH1cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCkge1xuXHR2YXIgaGVhZCA9IGdldEhlYWRFbGVtZW50KCk7XG5cdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wW3N0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdGlmKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xuXHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBoZWFkLmZpcnN0Q2hpbGQpO1xuXHRcdH0gZWxzZSBpZihsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHR9XG5cdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AucHVzaChzdHlsZUVsZW1lbnQpO1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHRoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcuIE11c3QgYmUgJ3RvcCcgb3IgJ2JvdHRvbScuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcblx0c3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0dmFyIGlkeCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGVFbGVtZW50KTtcblx0aWYoaWR4ID49IDApIHtcblx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuXHR2YXIgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXHRzdHlsZUVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCk7XG5cdHJldHVybiBzdHlsZUVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpIHtcblx0dmFyIGxpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG5cdGxpbmtFbGVtZW50LnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGlua0VsZW1lbnQpO1xuXHRyZXR1cm4gbGlua0VsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGVFbGVtZW50LCB1cGRhdGUsIHJlbW92ZTtcblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblx0XHRzdHlsZUVsZW1lbnQgPSBzaW5nbGV0b25FbGVtZW50IHx8IChzaW5nbGV0b25FbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCwgc3R5bGVJbmRleCwgdHJ1ZSk7XG5cdH0gZWxzZSBpZihvYmouc291cmNlTWFwICYmXG5cdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwucmV2b2tlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdHN0eWxlRWxlbWVudCA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG5cdFx0XHRpZihzdHlsZUVsZW1lbnQuaHJlZilcblx0XHRcdFx0VVJMLnJldm9rZU9iamVjdFVSTChzdHlsZUVsZW1lbnQuaHJlZik7XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlKG9iaik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuXHRcdGlmKG5ld09iaikge1xuXHRcdFx0aWYobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG5cdH07XG59KSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlRWxlbWVudCwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblxuXHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGVFbGVtZW50LmNoaWxkTm9kZXM7XG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0c3R5bGVFbGVtZW50Lmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZUVsZW1lbnQsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXG5cdGlmKG1lZGlhKSB7XG5cdFx0c3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxuXHR9XG5cblx0aWYoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xuXHRcdH1cblx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlTGluayhsaW5rRWxlbWVudCwgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuXHRpZihzb3VyY2VNYXApIHtcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxuXHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcblx0fVxuXG5cdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xuXG5cdHZhciBvbGRTcmMgPSBsaW5rRWxlbWVudC5ocmVmO1xuXG5cdGxpbmtFbGVtZW50LmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXG5cdGlmKG9sZFNyYylcblx0XHRVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnQgY29uc3QgaGFzQ2xhc3MgPSBjbGFzc25hbWUgPT4gZWwgPT5cbiAgICAhIW5ldyBSZWdFeHAoYFxcXFxiJHtjbGFzc25hbWV9XFxcXGJgKS5leGVjKGVsLmNsYXNzTmFtZSk7XG5cbmV4cG9ydCBjb25zdCBhZGRDbGFzcyA9IGNsYXNzbmFtZSA9PiBlbCA9PlxuICAgIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZSArIFwiIFwiICsgY2xhc3NuYW1lO1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlQ2xhc3MgPSBjbGFzc25hbWUgPT4gZWwgPT5cbiAgICBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKGBcXFxcYiR7Y2xhc3NuYW1lfVxcXFxiYCwgJ2cnKSwgXCJcIik7XG5cbmV4cG9ydCBjb25zdCB0b2dnbGVDbGFzcyA9IChjbGFzc25hbWUpID0+IChlbCkgPT4gIHtcbiAgaWYgKGhhc0NsYXNzKGNsYXNzbmFtZSkoZWwpKVxuICAgIHJlbW92ZUNsYXNzKGNsYXNzbmFtZSkoZWwpO1xuICBlbHNlXG4gICAgYWRkQ2xhc3MoY2xhc3NuYW1lKShlbCk7XG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy91dGlsL3RvZ2dsZUNsYXNzLnRzIiwiaW1wb3J0IHthZGRDbGFzc30gZnJvbSBcIi4vdG9nZ2xlQ2xhc3NcIjtcblxuZXhwb3J0IGludGVyZmFjZSBEcmFnRGV0YWlscyB7XG4gIGluaXRpYWxDbGllbnRYOiBudW1iZXI7XG4gIGluaXRpYWxDbGllbnRZOiBudW1iZXI7XG4gIGxhc3RDbGllbnRYOiBudW1iZXI7XG4gIGxhc3RDbGllbnRZOiBudW1iZXI7XG4gIG5ld0NsaWVudFg6IG51bWJlcjtcbiAgbmV3Q2xpZW50WTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERyYWdDYWxsYmFjayB7XG4gIChlbDogRWxlbWVudCwgZXZlbnQ6IEV2ZW50LCBkZXRhaWxzOiBEcmFnRGV0YWlscyk6IHZvaWQ7XG59XG5cbmNvbnN0IG1vdmVFbGVtZW50ID0gKGVsZW1lbnRUb01vdmU6IEhUTUxFbGVtZW50KSA9PlxuZnVuY3Rpb24gX21vdmVFbGVtZW50KGVsZW1lbnRCZWluZ0RyYWdnZWQ6IEhUTUxFbGVtZW50LCBldmVudDogTW91c2VFdmVudCwgZGV0YWlsczogRHJhZ0RldGFpbHMpIHtcbiAgbGV0IHsgaW5pdGlhbENsaWVudFgsIGluaXRpYWxDbGllbnRZLCBsYXN0Q2xpZW50WCwgbGFzdENsaWVudFksIG5ld0NsaWVudFgsIG5ld0NsaWVudFkgfSA9IGRldGFpbHM7XG5cbiAgbGV0IGVsID0gZWxlbWVudFRvTW92ZTtcbiAgbGV0IGJvdW5kcyA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICBsZXQgeyBsZWZ0LCB0b3AgfSA9IGJvdW5kcztcbiAgbGV0IGR4ID0gbmV3Q2xpZW50WCAtIGxhc3RDbGllbnRYO1xuICBsZXQgZHkgPSBuZXdDbGllbnRZIC0gbGFzdENsaWVudFk7XG5cbiAgZWwuc3R5bGUucmlnaHQgPSBcImF1dG9cIjtcbiAgZWwuc3R5bGUuYm90dG9tID0gXCJhdXRvXCI7XG4gIGVsLnN0eWxlLmxlZnQgPSAobGVmdCArIGR4KSArICdweCc7XG4gIGVsLnN0eWxlLnRvcCA9ICh0b3AgKyBkeSkgKyAncHgnO1xufTtcblxuZXhwb3J0IGNvbnN0IGRyYWdBY3Rpb25zID0ge1xuICBtb3ZlOiBtb3ZlRWxlbWVudCxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmFnZ2FibGUoZWwsIGNhbGxiYWNrOiBEcmFnQ2FsbGJhY2spIHtcbiAgbGV0IGVuYWJsZWQgPSB0cnVlO1xuICBsZXQgaXNEcmFnZ2luZyA9IGZhbHNlO1xuICBsZXQgaW5pdGlhbENsaWVudFggPSAwLCBpbml0aWFsQ2xpZW50WSA9IDA7XG4gIGxldCBsYXN0Q2xpZW50WCA9IDAsIGxhc3RDbGllbnRZID0gMDtcblxuICBjb25zdCBtb3VzZURvd25MaXN0ZW5lciA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgaWYgKCFlbmFibGVkKSByZXR1cm47XG4gICAgaXNEcmFnZ2luZyA9IHRydWU7XG5cbiAgICBsYXN0Q2xpZW50WCA9IGluaXRpYWxDbGllbnRYID0gZS5jbGllbnRYO1xuICAgIGxhc3RDbGllbnRZID0gaW5pdGlhbENsaWVudFkgPSBlLmNsaWVudFk7XG5cbiAgICBjb25zdCBkcmFnTGlzdGVuZXIgPSAoZSkgPT4ge1xuICAgICAgaWYgKCFlbmFibGVkIHx8ICFpc0RyYWdnaW5nKSByZXR1cm47XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBsZXQgbmV3Q2xpZW50WCA9IGUuY2xpZW50WCwgbmV3Q2xpZW50WSA9IGUuY2xpZW50WTtcbiAgICAgIGNhbGxiYWNrKGVsLCBlLCB7IGluaXRpYWxDbGllbnRYLCBpbml0aWFsQ2xpZW50WSwgbGFzdENsaWVudFgsIGxhc3RDbGllbnRZLCBuZXdDbGllbnRYLCBuZXdDbGllbnRZIH0pO1xuICAgICAgbGFzdENsaWVudFggPSBuZXdDbGllbnRYO1xuICAgICAgbGFzdENsaWVudFkgPSBuZXdDbGllbnRZO1xuICAgIH07XG5cbiAgICBjb25zdCBkb25lRHJhZ2dpbmcgPSAoZSkgPT4ge1xuICAgICAgaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBkcmFnTGlzdGVuZXIpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZG9uZURyYWdnaW5nKTtcbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBkcmFnTGlzdGVuZXIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGRvbmVEcmFnZ2luZylcbiAgfTtcblxuICBhZGRDbGFzcyhcImRyYWdnYWJsZVwiKShlbCk7XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgbW91c2VEb3duTGlzdGVuZXIpO1xuICByZXR1cm4gKCkgPT4gZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBtb3VzZURvd25MaXN0ZW5lcik7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXRpbC9kcmFnZ2FibGUudHMiLCJpbXBvcnQgeyBoLCByZW5kZXIsIENvbXBvbmVudCB9IGZyb20gXCJwcmVhY3RcIjtcbmltcG9ydCB7IFN0YXRlTm9kZSB9IGZyb20gXCIuL3N0YXRlTm9kZVwiO1xuaW1wb3J0IHsgTm9kZURpbWVuc2lvbnMsIFZpc0RpbWVuc2lvbnMsIFJlbmRlcmVyIH0gZnJvbSBcIi4vaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBhbmltYXRlUGF0aCB9IGZyb20gXCIuLi91dGlsL2FuaW1hdGVwYXRoXCI7XG5pbXBvcnQgeyBlYXNpbmcgfSBmcm9tIFwiLi4vdXRpbC9lYXNpbmdcIjtcbmltcG9ydCB7IERFRkFVTFRfUkVOREVSRVIgfSBmcm9tIFwiLi9yZW5kZXJlclwiO1xuaW1wb3J0IHsgY3JlYXRlU3RhdGVWaXNOb2RlLCBTdGF0ZVZpc05vZGUgfSBmcm9tIFwiLi9zdGF0ZVZpc05vZGVcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJUHJvcHMgZXh0ZW5kcyBOb2RlRGltZW5zaW9ucywgVmlzRGltZW5zaW9ucyB7XG4gIHJvdXRlcj86IGFueTtcbiAgcmVuZGVyZXI/OiBSZW5kZXJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU3RhdGUge1xuICBub2Rlcz86IFN0YXRlVmlzTm9kZVtdO1xufVxuXG5sZXQgcmVzZXRNZXRhZGF0YSA9IHtcbiAgbGFiZWw6ICcnLFxuICBoaWdobGlnaHQ6IGZhbHNlLFxuICBhY3RpdmU6IGZhbHNlLFxuICBmdXR1cmU6IGZhbHNlLFxuICByZXRhaW5lZDogZmFsc2UsXG4gIGVudGVyZWQ6IGZhbHNlLFxuICBleGl0ZWQ6IGZhbHNlLFxuICBpbmFjdGl2ZTogdHJ1ZVxufTtcblxuZXhwb3J0IGNsYXNzIFN0YXRlVHJlZSBleHRlbmRzIENvbXBvbmVudDxJUHJvcHMsIElTdGF0ZT4ge1xuICBzdGF0aWMgY3JlYXRlKHJvdXRlciwgZWxlbWVudD8sIHByb3BzID0ge30pIHtcbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZWxlbWVudC5pZCA9IFwidWlyU3RhdGVUcmVlXCI7XG4gICAgfVxuXG4gICAgbGV0IGluaXRpYWxQcm9wcyA9IHsgLi4ucHJvcHMsIHJvdXRlciB9IGFzIElQcm9wcztcbiAgICBjb25zdCBfcmVuZGVyID0gKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgIHJlbmRlcihoKFN0YXRlVHJlZSwgaW5pdGlhbFByb3BzKSwgZWxlbWVudCk7XG4gICAgfTtcblxuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnaW50ZXJhY3RpdmUnIHx8IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgIF9yZW5kZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIF9yZW5kZXIgYXMgYW55LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICBoZWlnaHQ6IDM1MCxcbiAgICB3aWR0aDogMjUwLFxuICAgIHJlbmRlcmVyOiBERUZBVUxUX1JFTkRFUkVSLFxuICB9O1xuXG4gIHN0YXRlID0ge1xuICAgIG5vZGVzOiBbXSxcbiAgICBsYXlvdXQ6IHt9IGFzIGFueVxuICB9O1xuXG4gIG5vZGVzOiBTdGF0ZVZpc05vZGVbXSA9IFtdO1xuICB1bm1vdW50ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgZGVyZWdpc3Rlckhvb2tGbjogRnVuY3Rpb247XG4gIGRlcmVnaXN0ZXJTdGF0ZUxpc3RlbmVyRm46IEZ1bmN0aW9uO1xuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGxldCByZWdpc3RyeSA9IHRoaXMucHJvcHMucm91dGVyLnN0YXRlUmVnaXN0cnk7XG4gICAgbGV0ICR0cmFuc2l0aW9ucyA9IHRoaXMucHJvcHMucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlO1xuXG4gICAgLy8gUmVnaXN0ZXIgc3RhdGVzIGNoYW5nZWQgbGlzdGVuZXJcbiAgICBpZiAocmVnaXN0cnkub25TdGF0ZXNDaGFuZ2VkKSB7XG4gICAgICB0aGlzLmRlcmVnaXN0ZXJTdGF0ZUxpc3RlbmVyRm4gPSByZWdpc3RyeS5vblN0YXRlc0NoYW5nZWQoKCkgPT4gdGhpcy51cGRhdGVTdGF0ZXMoKSk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlU3RhdGVzKCk7XG5cbiAgICAvLyBSZWdpc3RlciBvblN1Y2Nlc3MgdHJhbnNpdGlvbiBob29rIHRvIHRvZ2dsZSB0aGUgU1ZHIGNsYXNzZXNcbiAgICB0aGlzLmRlcmVnaXN0ZXJIb29rRm4gPSAkdHJhbnNpdGlvbnMub25TdWNjZXNzKHt9LCAodHJhbnMpID0+IHRoaXMudXBkYXRlTm9kZXModHJhbnMpKTtcbiAgICB0aGlzLnVwZGF0ZU5vZGVzKCk7XG5cbiAgICBsZXQgbGFzdFN1Y2Nlc3NmdWwgPSB0aGlzLnByb3BzLnJvdXRlci5nbG9iYWxzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5wZWVrVGFpbCgpO1xuICAgIGlmIChsYXN0U3VjY2Vzc2Z1bCkge1xuICAgICAgdGhpcy51cGRhdGVOb2RlcyhsYXN0U3VjY2Vzc2Z1bCk7XG4gICAgfVxuXG4gICAgbGV0IHBlbmRpbmcgPSB0aGlzLnByb3BzLnJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb247XG4gICAgaWYgKHBlbmRpbmcpIHtcbiAgICAgIHBlbmRpbmcucHJvbWlzZS50aGVuKCgpID0+IHRoaXMudXBkYXRlTm9kZXMocGVuZGluZykpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKSB7XG4gICAgbGV0IG5vZGVzID0gdGhpcy5zdGF0ZS5ub2RlcztcbiAgICB0aGlzLnNldFN0YXRlKHsgbm9kZXMgfSwgdGhpcy51cGRhdGVTdGF0ZXMpO1xuICB9XG5cbiAgZGltZW5zaW9ucygpIHtcbiAgICBsZXQgbmV3UHJvcHMgPSB7fSBhcyBhbnk7XG5cbiAgICBsZXQgcmFkaXVzID0gMTU7XG4gICAgbGV0IG9mZnNldFggPSAwO1xuICAgIGxldCBvZmZzZXRZID0gcmFkaXVzICogMjtcbiAgICBsZXQgaGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQgfHwgNTAwO1xuICAgIGxldCB3aWR0aCA9IHRoaXMucHJvcHMud2lkdGggfHwgNTAwO1xuXG4gICAgbGV0IHNjYWxlWCA9IG5ld1Byb3BzLnNjYWxlWCB8fCAod2lkdGggLSBvZmZzZXRYICogMik7XG4gICAgbGV0IHNjYWxlWSA9IG5ld1Byb3BzLnNjYWxlWSB8fCAoaGVpZ2h0IC0gb2Zmc2V0WSAqIDIpO1xuXG4gICAgcmV0dXJuIHsgcmFkaXVzLCBvZmZzZXRYLCBvZmZzZXRZLCBzY2FsZVgsIHNjYWxlWSB9O1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy51bm1vdW50ZWQgPSB0cnVlO1xuICAgIHRoaXMuZGVyZWdpc3Rlckhvb2tGbiAmJiB0aGlzLmRlcmVnaXN0ZXJIb29rRm4oKTtcbiAgfVxuXG4gIGNhbmNlbEN1cnJlbnRBbmltYXRpb24gPSAoKSA9PiBudWxsO1xuXG4gIGRvTGF5b3V0QW5pbWF0aW9uID0gKCkgPT4ge1xuICAgIHRoaXMuY2FuY2VsQ3VycmVudEFuaW1hdGlvbigpO1xuXG4gICAgbGV0IG5vZGVzID0gdGhpcy5nZXROb2RlcygpO1xuICAgIGlmICghbm9kZXMubGVuZ3RoKSByZXR1cm47XG5cbiAgICBsZXQgcm9vdE5vZGUgPSBub2Rlcy5maWx0ZXIoc3RhdGUgPT4gc3RhdGUubmFtZSA9PT0gXCJcIilbMF07XG4gICAgdGhpcy5wcm9wcy5yZW5kZXJlci5sYXlvdXRGbihyb290Tm9kZSk7XG5cbiAgICAvLyBNb3ZlIGFsbCBub24tdmlzaWJsZSBub2RlcyB0byBzYW1lIHgveSBjb29yZHMgYXMgdGhlIG5lYXJlc3QgdmlzaWJsZSBwYXJlbnRcbiAgICBub2Rlcy5maWx0ZXIobm9kZSA9PiAhbm9kZS52aXNpYmxlKS5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgbGV0IHZpc2libGVBbmNlc3RvciA9IG5vZGUuX3BhcmVudDtcbiAgICAgIHdoaWxlICh2aXNpYmxlQW5jZXN0b3IgJiYgIXZpc2libGVBbmNlc3Rvci52aXNpYmxlKSB2aXNpYmxlQW5jZXN0b3IgPSB2aXNpYmxlQW5jZXN0b3IuX3BhcmVudDtcbiAgICAgIGlmICh2aXNpYmxlQW5jZXN0b3IpIHtcbiAgICAgICAgbm9kZS54ID0gdmlzaWJsZUFuY2VzdG9yLng7XG4gICAgICAgIG5vZGUueSA9IHZpc2libGVBbmNlc3Rvci55O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGV0IGRpbWVuc2lvbnMgPSB0aGlzLmRpbWVuc2lvbnMoKTtcblxuICAgIC8vIFRyYW5zZm9ybXMgeCBjb29yZCBmcm9tIHRoZSB0cmVlIGxheW91dCB0byBmaXQgdGhlIHZpZXdwb3J0IHVzaW5nIHNjYWxlL29mZnNldCB2YWx1ZXNcbiAgICBjb25zdCB0cmFuc2Zvcm1YID0gKHh2YWwpID0+IHh2YWwgKiBkaW1lbnNpb25zLnNjYWxlWCArIGRpbWVuc2lvbnMub2Zmc2V0WDtcbiAgICAvLyBUcmFuc2Zvcm1zIHkgY29vcmQgZnJvbSB0aGUgdHJlZSBsYXlvdXQgdG8gZml0IHRoZSB2aWV3cG9ydCB1c2luZyBzY2FsZS9vZmZzZXQgdmFsdWVzXG4gICAgY29uc3QgdHJhbnNmb3JtWSA9ICh5dmFsKSA9PiB5dmFsICogZGltZW5zaW9ucy5zY2FsZVkgKyBkaW1lbnNpb25zLm9mZnNldFk7XG5cbiAgICBjb25zdCBnZXRDdXJyZW50Q29vcmRzID0gKG5vZGUpID0+XG4gICAgICAgICh7IHg6IG5vZGUuYW5pbVggfHwgdGhpcy5wcm9wcy53aWR0aCAvIDIsIHk6IG5vZGUuYW5pbVkgfHwgdGhpcy5wcm9wcy5oZWlnaHQgLyAyIH0pO1xuXG4gICAgLy8gQW4gYXJyYXkgY29udGFpbmluZyBjdXJyZW50IHgveSBjb29yZHMgZm9yIGFsbCBub2Rlc1xuICAgIC8vIFsgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0IF1cbiAgICBsZXQgY3VycmVudENvb3JkcyA9IG5vZGVzLm1hcChnZXRDdXJyZW50Q29vcmRzKS5tYXAob2JqID0+IFtvYmoueCwgb2JqLnldKVxuICAgICAgICAucmVkdWNlKChhY2MsIGFycikgPT4gYWNjLmNvbmNhdChhcnIpLCBbXSk7XG5cbiAgICAvLyBBbiBhcnJheSBjb250YWluaW5nIHRhcmdldCB4L3kgY29vcmRzIGZvciBhbGwgbm9kZXNcbiAgICAvLyBbIHgxJywgeTEnLCB4MicsIHkyJywgeDMnLCB5MycsIHg0JywgeTQnIF1cbiAgICBsZXQgdGFyZ2V0Q29vcmRzID0gbm9kZXMubWFwKG5vZGUgPT4gW3RyYW5zZm9ybVgobm9kZS54KSwgdHJhbnNmb3JtWShub2RlLnkpXSlcbiAgICAgICAgLnJlZHVjZSgoYWNjLCBhcnIpID0+IGFjYy5jb25jYXQoYXJyKSwgW10pO1xuXG4gICAgLy8geHlWYWxBcnJheSBpcyBhbiBhcnJheSBjb250YWluaW5nIHgveSBjb29yZHMgZm9yIGFsbCBub2RlcyxcbiAgICAvLyBpbnRlcnBvbGF0ZWQgYmV0d2VlbiBjdXJyZW50Q29vcmRzIGFuZCB0YXJnZXRDb29yZHMgYmFzZWQgb24gdGltZVxuICAgIC8vIFsgeDEnJywgeTEnJywgeDInJywgeTInJywgeDMnJywgeTMnJywgeDQnJywgeTQnJyBdXG4gICAgY29uc3QgYW5pbWF0aW9uRnJhbWUgPSAoeHlWYWxBcnJheSkgPT4ge1xuICAgICAgbGV0IHR1cGxlQ291bnQgPSB4eVZhbEFycmF5Lmxlbmd0aCAvIDI7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHR1cGxlQ291bnQgJiYgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgIG5vZGUuYW5pbVggPSB4eVZhbEFycmF5WyhpICogMildO1xuICAgICAgICBub2RlLmFuaW1ZID0geHlWYWxBcnJheVsoaSAqIDIpICsgMV07XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBub2RlcyB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5jYW5jZWxDdXJyZW50QW5pbWF0aW9uID0gYW5pbWF0ZVBhdGgodGFyZ2V0Q29vcmRzLCBjdXJyZW50Q29vcmRzLCA1MDAsIGFuaW1hdGlvbkZyYW1lLCAoKSA9PiBudWxsLCBlYXNpbmcuZWFzZUluT3V0RXhwbyk7XG4gIH07XG5cbiAgbm9kZUZvclN0YXRlID0gKG5vZGVzLCBzdGF0ZSkgPT5cbiAgICAgIG5vZGVzLmZpbHRlcihub2RlID0+IG5vZGUubmFtZSA9PT0gc3RhdGUubmFtZSlbMF07XG5cbiAgdXBkYXRlU3RhdGVzID0gKCkgPT4ge1xuICAgIGxldCByb3V0ZXIgPSB0aGlzLnByb3BzLnJvdXRlcjtcblxuICAgIGxldCBzdGF0ZXMgPSByb3V0ZXIuc3RhdGVTZXJ2aWNlLmdldCgpLm1hcChzID0+IHMuJCRzdGF0ZSgpKTtcbiAgICBsZXQga25vd24gPSB0aGlzLm5vZGVzLm1hcChPYmplY3QuZ2V0UHJvdG90eXBlT2YpO1xuICAgIGxldCB0b0FkZCA9IHN0YXRlcy5maWx0ZXIocyA9PiBrbm93bi5pbmRleE9mKHMpID09PSAtMSk7XG4gICAgbGV0IHRvRGVsID0ga25vd24uZmlsdGVyKHMgPT4gc3RhdGVzLmluZGV4T2YocykgPT09IC0xKTtcblxuICAgIGxldCBub2RlcyA9IHRoaXMubm9kZXMgPSB0aGlzLm5vZGVzLnNsaWNlKCk7XG5cbiAgICBpZiAodG9BZGQubGVuZ3RoIHx8IHRvRGVsLmxlbmd0aCkge1xuICAgICAgdG9BZGQubWFwKHMgPT4gY3JlYXRlU3RhdGVWaXNOb2RlKHMpKS5mb3JFYWNoKG4gPT4gbm9kZXMucHVzaChuKSk7XG4gICAgICB0b0RlbC5tYXAoZGVsID0+IG5vZGVzLmZpbHRlcihub2RlID0+IGRlbC5pc1Byb3RvdHlwZU9mKG5vZGUpKSlcbiAgICAgICAgICAucmVkdWNlKChhY2MsIHgpID0+IGFjYy5jb25jYXQoeCksIFtdKVxuICAgICAgICAgIC5mb3JFYWNoKG5vZGUgPT4gbm9kZXMuc3BsaWNlKG5vZGVzLmluZGV4T2Yobm9kZSksIDEpKTtcblxuICAgICAgLy8gUmVidWlsZCBlYWNoIG5vZGUncyBjaGlsZHJlbiBhcnJheVxuICAgICAgbm9kZXMuZm9yRWFjaChuID0+IG4uX2NoaWxkcmVuID0gW10pO1xuICAgICAgbm9kZXMuZm9yRWFjaChuID0+IHtcbiAgICAgICAgaWYgKCFuIHx8ICFuLnBhcmVudCkgcmV0dXJuO1xuICAgICAgICBsZXQgcGFyZW50Tm9kZTogYW55ID0gdGhpcy5ub2RlRm9yU3RhdGUobm9kZXMsIG4ucGFyZW50KTtcbiAgICAgICAgaWYgKCFwYXJlbnROb2RlKSByZXR1cm47XG4gICAgICAgIHBhcmVudE5vZGUuX2NoaWxkcmVuLnB1c2gobik7XG4gICAgICAgIG4uX3BhcmVudCA9IHBhcmVudE5vZGU7XG4gICAgICB9KTtcbiAgICAgIG5vZGVzLmZvckVhY2gobiA9PiBuLmZ1dHVyZSA9ICEhbi5sYXp5TG9hZCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnVubW91bnRlZCAmJiAhdGhpcy5kZXJlZ2lzdGVyU3RhdGVMaXN0ZW5lckZuKSB7XG4gICAgICAvLyBwb2xsIGlmIHVpLXJvdXRlciB2ZXJzaW9uIGlzIDEuMC4wLWJldGEuMSBvciBlYXJsaWVyXG4gICAgICBzZXRUaW1lb3V0KHRoaXMudXBkYXRlU3RhdGVzLCAxMDAwKVxuICAgIH1cblxuICAgIHRoaXMuc2V0U3RhdGUoeyBub2RlcyB9LCB0aGlzLmRvTGF5b3V0QW5pbWF0aW9uKTtcbiAgfTtcblxuICB1cGRhdGVOb2RlcyA9ICgkdHJhbnNpdGlvbiQ/KSA9PiB7XG4gICAgbGV0IG5vZGVzID0gdGhpcy5ub2Rlcy5tYXAobm9kZSA9PiBPYmplY3QuYXNzaWduKG5vZGUsIHJlc2V0TWV0YWRhdGEpKTtcbiAgICBub2Rlcy5mb3JFYWNoKG4gPT4gbi5mdXR1cmUgPSAhIW4ubGF6eUxvYWQpO1xuXG4gICAgaWYgKCR0cmFuc2l0aW9uJCkge1xuICAgICAgbGV0IHRjID0gJHRyYW5zaXRpb24kLnRyZWVDaGFuZ2VzKCk7XG4gICAgICBjb25zdCBnZXROb2RlID0gbm9kZSA9PlxuICAgICAgICAgIHRoaXMubm9kZUZvclN0YXRlKHRoaXMubm9kZXMsIG5vZGUuc3RhdGUpO1xuXG4gICAgICB0Yy5yZXRhaW5lZC5jb25jYXQodGMuZW50ZXJpbmcpLm1hcChnZXROb2RlKS5maWx0ZXIoeD0+eCkuZm9yRWFjaCgobjogU3RhdGVWaXNOb2RlKSA9PiBuLmVudGVyZWQgPSB0cnVlKTtcbiAgICAgIHRjLnJldGFpbmVkLm1hcChnZXROb2RlKS5maWx0ZXIoeD0+eCkuZm9yRWFjaCgobjogU3RhdGVWaXNOb2RlKSA9PiBuLnJldGFpbmVkID0gdHJ1ZSk7XG4gICAgICB0Yy5leGl0aW5nLm1hcChnZXROb2RlKS5maWx0ZXIoeD0+eCkuZm9yRWFjaCgobjogU3RhdGVWaXNOb2RlKT0+IG4uZXhpdGVkID0gdHJ1ZSk7XG4gICAgICB0Yy50by5zbGljZSgtMSkubWFwKGdldE5vZGUpLmZpbHRlcih4PT54KS5mb3JFYWNoKChuOiBTdGF0ZVZpc05vZGUpPT4geyBuLmFjdGl2ZSA9IHRydWU7IG4ubGFiZWwgPSBcImFjdGl2ZVwifSk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7IG5vZGVzOiB0aGlzLm5vZGVzIH0sIHRoaXMuZG9MYXlvdXRBbmltYXRpb24pO1xuICB9O1xuXG4gIGdldE5vZGVzKCkge1xuICAgIHJldHVybiB0aGlzLm5vZGVzLnNsaWNlKCkuc29ydCh0aGlzLnByb3BzLnJlbmRlcmVyLnNvcnROb2Rlc0ZuKVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCByZW5kZXJlciA9IHRoaXMucHJvcHMucmVuZGVyZXI7XG4gICAgbGV0IHJlbmRlck5vZGVzID0gdGhpcy5nZXROb2RlcygpXG4gICAgICAgIC5maWx0ZXIobm9kZSA9PiBub2RlLnZpc2libGUgJiYgbm9kZS5hbmltWCAmJiBub2RlLmFuaW1ZKTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3RhdGV2aXNcIj5cbiAgICAgICAgICA8c3ZnIHdpZHRoPXt0aGlzLnByb3BzLndpZHRofSBoZWlnaHQ9e3RoaXMucHJvcHMuaGVpZ2h0fT5cblxuICAgICAgICAgICAgeyByZW5kZXJOb2Rlcy5maWx0ZXIobm9kZSA9PiAhIW5vZGUucGFyZW50KS5tYXAobm9kZSA9PlxuICAgICAgICAgICAgICByZW5kZXJlci5lZGdlUmVuZGVyRm4obm9kZSwgcmVuZGVyZXIpXG4gICAgICAgICAgICApIH1cblxuICAgICAgICAgICAgeyByZW5kZXJOb2Rlcy5tYXAoKG5vZGU6IFN0YXRlVmlzTm9kZSkgPT5cbiAgICAgICAgICAgICAgICA8U3RhdGVOb2RlXG4gICAgICAgICAgICAgICAgICAgIGtleT17bm9kZS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICBub2RlPXtub2RlfVxuICAgICAgICAgICAgICAgICAgICByb3V0ZXI9e3RoaXMucHJvcHMucm91dGVyfVxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlcj17dGhpcy5wcm9wcy5yZW5kZXJlcn1cbiAgICAgICAgICAgICAgICAgICAgZG9MYXlvdXQ9e3RoaXMuZG9MYXlvdXRBbmltYXRpb24uYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgeD17bm9kZS5hbmltWH1cbiAgICAgICAgICAgICAgICAgICAgeT17bm9kZS5hbmltWX0gLz5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zdGF0ZS9zdGF0ZVRyZWUudHN4IiwiaW1wb3J0IHsgaCwgcmVuZGVyLCBDb21wb25lbnQgfSBmcm9tIFwicHJlYWN0XCI7XG5pbXBvcnQgeyBSZW5kZXJlciB9IGZyb20gXCIuL2ludGVyZmFjZVwiO1xuaW1wb3J0IHsgU3RhdGVWaXNOb2RlIH0gZnJvbSBcIi4vc3RhdGVWaXNOb2RlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVByb3BzIHtcbiAgcm91dGVyOiBhbnk7XG4gIG5vZGU6IFN0YXRlVmlzTm9kZTtcbiAgcmVuZGVyZXI6IFJlbmRlcmVyO1xuICBkb0xheW91dDogRnVuY3Rpb247XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTdGF0ZSB7IH1cbmV4cG9ydCBjbGFzcyBTdGF0ZU5vZGUgZXh0ZW5kcyBDb21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcbiAgZ29UaW1lb3V0ID0gbnVsbDtcblxuICBoYW5kbGVDb2xsYXBzZUNsaWNrZWQgPSAoZXZlbnQpID0+IHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5nb1RpbWVvdXQpO1xuICAgIHRoaXMucHJvcHMubm9kZS5fY29sbGFwc2VkID0gIXRoaXMucHJvcHMubm9kZS5fY29sbGFwc2VkO1xuICAgIHRoaXMucHJvcHMuZG9MYXlvdXQoKTtcbiAgfTtcblxuICBoYW5kbGVHb0NsaWNrZWQgPSAoZXZlbnQpID0+IHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5nb1RpbWVvdXQpO1xuICAgIGxldCBzdGF0ZU5hbWUgPSB0aGlzLnByb3BzLm5vZGUubmFtZTtcbiAgICBzdGF0ZU5hbWUgPSBzdGF0ZU5hbWUucmVwbGFjZSgvXFwuXFwqXFwqJC8sIFwiXCIpO1xuICAgIHRoaXMuZ29UaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnByb3BzLnJvdXRlci5zdGF0ZVNlcnZpY2UuZ28oc3RhdGVOYW1lKSwgMjAwKTtcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgbGV0IHJlbmRlcmVyID0gdGhpcy5wcm9wcy5yZW5kZXJlcjtcbiAgICBsZXQge25vZGUsIHgsIHl9ID0gdGhpcy5wcm9wcztcblxuICAgIGxldCB7IGJhc2VSYWRpdXMsIGJhc2VGb250U2l6ZSwgYmFzZU5vZGVTdHJva2VXaWR0aCwgem9vbSB9ID0gcmVuZGVyZXI7XG4gICAgbGV0IHIgPSBiYXNlUmFkaXVzICogem9vbTtcblxuICAgIGxldCBmb250U2l6ZSA9IGJhc2VGb250U2l6ZSAqIHpvb207XG4gICAgbGV0IG5vZGVTdHJva2VXaWR0aCA9IChiYXNlTm9kZVN0cm9rZVdpZHRoICogKG5vZGUuZW50ZXJlZCA/IDEuNSA6IDEpICogem9vbSk7XG5cbiAgICBsZXQgY2xhc3NlcyA9IFtcImVudGVyZWRcIiwgXCJyZXRhaW5lZFwiLCBcImV4aXRlZFwiLCBcImFjdGl2ZVwiLCBcImluYWN0aXZlXCIsIFwiZnV0dXJlXCIsIFwiaGlnaGxpZ2h0XCIsIFwiY29sbGFwc2VkXCJdO1xuICAgIGxldCBjaXJjbGVDbGFzc2VzID0gY2xhc3Nlcy5yZWR1Y2UoKHN0ciwgY2xhenopID0+IChzdHIgKyAobm9kZVtjbGF6el0gPyBgICR7Y2xhenp9IGAgOiAnJykpLCAnJyk7XG5cbiAgICBsZXQgZGVzY2VuZGVudHMgPSBub2RlLmNvbGxhcHNlZCA/IG5vZGUudG90YWxEZXNjZW5kZW50cyA6IDA7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZyB0cmFuc2Zvcm09e2B0cmFuc2xhdGUoJHt4fSwgJHt5fSlgfSBvbkNsaWNrPXt0aGlzLmhhbmRsZUdvQ2xpY2tlZH0gb25EYmxDbGljaz17dGhpcy5oYW5kbGVDb2xsYXBzZUNsaWNrZWR9PlxuXG4gICAgICAgICAgPGNpcmNsZSBjbGFzc05hbWU9e2NpcmNsZUNsYXNzZXN9IHN0cm9rZS13aWR0aD17bm9kZVN0cm9rZVdpZHRofSByPXtyfS8+XG5cbiAgICAgICAgICB7ICFub2RlLmNvbGxhcHNlZCA/IFwiXCIgOlxuICAgICAgICAgICAgPHRleHQgY2xhc3NOYW1lPVwibGFiZWxcIlxuICAgICAgICAgICAgICAgICAgdGV4dC1hbmNob3I9XCJtaWRkbGVcIlxuICAgICAgICAgICAgICAgICAgZm9udC1zaXplPXtmb250U2l6ZSAqIChkZXNjZW5kZW50cyA8IDEwID8gMS4wIDogMC44KX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgKHtkZXNjZW5kZW50c30pXG4gICAgICAgICAgICA8L3RleHQ+XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgeyByZW5kZXJlci5sYWJlbFJlbmRlckZuKHgsIHksIG5vZGUsIHJlbmRlcmVyKSB9XG5cbiAgICAgICAgICA8dGV4dCBjbGFzc05hbWU9XCJsYWJlbFwiXG4gICAgICAgICAgICAgIHRleHQtYW5jaG9yPVwibWlkZGxlXCJcbiAgICAgICAgICAgICAgZm9udC1zaXplPXtmb250U2l6ZX1cbiAgICAgICAgICAgICAgdHJhbnNmb3JtPXtgdHJhbnNsYXRlKDAsICR7cioyfSlgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtub2RlLmxhYmVsfVxuICAgICAgICAgIDwvdGV4dD5cbiAgICAgICAgPC9nPlxuICAgIClcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3N0YXRlL3N0YXRlTm9kZS50c3giLCIvLyBodHRwczovL2dpdGh1Yi5jb20vcmVzaW4taW8vdHJpYW5ndWxhci5qc1xuLy8gaHR0cDovL2FsZXhhbmRyb3MucmVzaW4uaW8vYW5ndWxhci1kMy1zdmcvXG4vLyBNSVQgTGljZW5zZSBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuXG5pbXBvcnQge2Vhc2luZ30gZnJvbSBcIi4vZWFzaW5nXCI7XG5pbXBvcnQge2ludGVycG9sYXRlQXJyYXl9IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuXG4vKiogVGhpcyBhbmltYXRpb24gY29kZSB3YXMgdGFrZW4gZnJvbSB0cmFuZ3VsYXIuanMsIGFuZCBpcyB1c2VkIHRvIGludGVycG9sYXRlIDIgYXJyYXlzIG9mIHZhbHVlcyB1c2luZyBhbiBlYXNpbmcgZm4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbmltYXRlUGF0aChuZXdWYWx1ZSwgb2xkVmFsdWUsIGR1cmF0aW9uLCB1cGRhdGVGcmFtZSwgZmluaXNoRm4gPSBmdW5jdGlvbigpIHt9LCBlYXNlRm4gPSBlYXNpbmcuZWFzZU91dEVsYXN0aWMpIHtcbiAgbGV0IHN0YXJ0ID0gbnVsbCwgaW50ZXJwb2xhdGUgPSBpbnRlcnBvbGF0ZUFycmF5KG9sZFZhbHVlLCBuZXdWYWx1ZSk7XG5cbiAgbGV0IHN0ZXAgPSBmdW5jdGlvbihub3cpIHtcbiAgICBpZiAoZHVyYXRpb24gPT09IC0xKSByZXR1cm4gZmluaXNoRm4oKTtcbiAgICBpZiAoc3RhcnQgPT0gbnVsbCkgc3RhcnQgPSBub3c7XG4gICAgbGV0IHByb2dyZXNzID0gbm93IC0gc3RhcnQsIHBlcmNlbnQgPSAxO1xuICAgIGlmIChwcm9ncmVzcyA8IGR1cmF0aW9uKSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gICAgICBwZXJjZW50ID0gZWFzZUZuKHByb2dyZXNzLCAwLCAxLCBkdXJhdGlvbik7XG4gICAgfVxuICAgIHVwZGF0ZUZyYW1lKGludGVycG9sYXRlKHBlcmNlbnQpKTtcbiAgfTtcblxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICBkdXJhdGlvbiA9IC0xO1xuICB9XG59XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy91dGlsL2FuaW1hdGVwYXRoLnRzIiwiLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBqUXVlcnkgRWFzaW5nIHYxLjMgLSBodHRwOi8vZ3NnZC5jby51ay9zYW5kYm94L2pxdWVyeS9lYXNpbmcvXG4gKlxuICogT3BlbiBzb3VyY2UgdW5kZXIgdGhlIEJTRCBMaWNlbnNlLlxuICpcbiAqIENvcHlyaWdodCDCqSAyMDA4IEdlb3JnZSBNY0dpbmxleSBTbWl0aFxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vZGFucm8vanF1ZXJ5LWVhc2luZy9tYXN0ZXIvTElDRU5TRVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbmV4cG9ydCBjb25zdCBlYXNpbmcgPSB7XG4gIC8vIHRpbWUsIGJlZ2luLCBjaGFuZ2UsIGR1cmF0aW9uXG4gIGVhc2VJbk91dFF1YWQ6IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XG4gICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHJldHVybiBjIC8gMiAqIHQgKiB0ICsgYjtcbiAgICByZXR1cm4gLWMgLyAyICogKCgtLXQpICogKHQgLSAyKSAtIDEpICsgYjtcbiAgfSxcbiAgZWFzZUluT3V0Q3ViaWM6IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XG4gICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHJldHVybiBjIC8gMiAqIHQgKiB0ICogdCArIGI7XG4gICAgcmV0dXJuIGMgLyAyICogKCh0IC09IDIpICogdCAqIHQgKyAyKSArIGI7XG4gIH0sXG4gIGVhc2VJbk91dFF1YXJ0OiBmdW5jdGlvbiAodCwgYiwgYywgZCkge1xuICAgIGlmICgodC89ZC8yKSA8IDEpIHJldHVybiBjLzIqdCp0KnQqdCArIGI7XG4gICAgcmV0dXJuIC1jLzIgKiAoKHQtPTIpKnQqdCp0IC0gMikgKyBiO1xuICB9LFxuICBlYXNlSW5PdXRRdWludDogZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcbiAgICBpZiAoKHQvPWQvMikgPCAxKSByZXR1cm4gYy8yKnQqdCp0KnQqdCArIGI7XG4gICAgcmV0dXJuIGMvMiooKHQtPTIpKnQqdCp0KnQgKyAyKSArIGI7XG4gIH0sXG4gIGVhc2VJbk91dFNpbmU6IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XG4gICAgcmV0dXJuIC1jLzIgKiAoTWF0aC5jb3MoTWF0aC5QSSp0L2QpIC0gMSkgKyBiO1xuICB9LFxuICBlYXNlSW5PdXRFeHBvOiBmdW5jdGlvbiAodCwgYiwgYywgZCkge1xuICAgIGlmICh0PT0wKSByZXR1cm4gYjtcbiAgICBpZiAodD09ZCkgcmV0dXJuIGIrYztcbiAgICBpZiAoKHQvPWQvMikgPCAxKSByZXR1cm4gYy8yICogTWF0aC5wb3coMiwgMTAgKiAodCAtIDEpKSArIGI7XG4gICAgcmV0dXJuIGMvMiAqICgtTWF0aC5wb3coMiwgLTEwICogLS10KSArIDIpICsgYjtcbiAgfSxcbiAgZWFzZUluT3V0Q2lyYzogZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcbiAgICBpZiAoKHQvPWQvMikgPCAxKSByZXR1cm4gLWMvMiAqIChNYXRoLnNxcnQoMSAtIHQqdCkgLSAxKSArIGI7XG4gICAgcmV0dXJuIGMvMiAqIChNYXRoLnNxcnQoMSAtICh0LT0yKSp0KSArIDEpICsgYjtcbiAgfSxcbiAgZWFzZUluRWxhc3RpYzogZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcbiAgICB2YXIgcz0xLjcwMTU4O3ZhciBwPTA7dmFyIGE9YztcbiAgICBpZiAodD09MCkgcmV0dXJuIGI7ICBpZiAoKHQvPWQpPT0xKSByZXR1cm4gYitjOyAgaWYgKCFwKSBwPWQqLjM7XG4gICAgaWYgKGEgPCBNYXRoLmFicyhjKSkgeyBhPWM7IHZhciBzPXAvNDsgfVxuICAgIGVsc2UgdmFyIHMgPSBwLygyKk1hdGguUEkpICogTWF0aC5hc2luIChjL2EpO1xuICAgIHJldHVybiAtKGEqTWF0aC5wb3coMiwxMCoodC09MSkpICogTWF0aC5zaW4oICh0KmQtcykqKDIqTWF0aC5QSSkvcCApKSArIGI7XG4gIH0sXG4gIGVhc2VPdXRFbGFzdGljOiBmdW5jdGlvbiAodCwgYiwgYywgZCkge1xuICAgIHZhciBzPTEuNzAxNTg7dmFyIHA9MDt2YXIgYT1jO1xuICAgIGlmICh0PT0wKSByZXR1cm4gYjsgIGlmICgodC89ZCk9PTEpIHJldHVybiBiK2M7ICBpZiAoIXApIHA9ZCouMztcbiAgICBpZiAoYSA8IE1hdGguYWJzKGMpKSB7IGE9YzsgdmFyIHM9cC80OyB9XG4gICAgZWxzZSB2YXIgcyA9IHAvKDIqTWF0aC5QSSkgKiBNYXRoLmFzaW4gKGMvYSk7XG4gICAgcmV0dXJuIGEqTWF0aC5wb3coMiwtMTAqdCkgKiBNYXRoLnNpbiggKHQqZC1zKSooMipNYXRoLlBJKS9wICkgKyBjICsgYjtcbiAgfSxcbiAgZWFzZUluT3V0RWxhc3RpYzogZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcbiAgICB2YXIgcz0xLjcwMTU4O3ZhciBwPTA7dmFyIGE9YztcbiAgICBpZiAodD09MCkgcmV0dXJuIGI7ICBpZiAoKHQvPWQvMik9PTIpIHJldHVybiBiK2M7ICBpZiAoIXApIHA9ZCooLjMqMS41KTtcbiAgICBpZiAoYSA8IE1hdGguYWJzKGMpKSB7IGE9YzsgdmFyIHM9cC80OyB9XG4gICAgZWxzZSB2YXIgcyA9IHAvKDIqTWF0aC5QSSkgKiBNYXRoLmFzaW4gKGMvYSk7XG4gICAgaWYgKHQgPCAxKSByZXR1cm4gLS41KihhKk1hdGgucG93KDIsMTAqKHQtPTEpKSAqIE1hdGguc2luKCAodCpkLXMpKigyKk1hdGguUEkpL3AgKSkgKyBiO1xuICAgIHJldHVybiBhKk1hdGgucG93KDIsLTEwKih0LT0xKSkgKiBNYXRoLnNpbiggKHQqZC1zKSooMipNYXRoLlBJKS9wICkqLjUgKyBjICsgYjtcbiAgfSxcbiAgZWFzZUluT3V0QmFjazogZnVuY3Rpb24gKHQsIGIsIGMsIGQsIHMpIHtcbiAgICBpZiAocyA9PSB1bmRlZmluZWQpIHMgPSAxLjcwMTU4O1xuICAgIGlmICgodC89ZC8yKSA8IDEpIHJldHVybiBjLzIqKHQqdCooKChzKj0oMS41MjUpKSsxKSp0IC0gcykpICsgYjtcbiAgICByZXR1cm4gYy8yKigodC09MikqdCooKChzKj0oMS41MjUpKSsxKSp0ICsgcykgKyAyKSArIGI7XG4gIH0sXG59O1xuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXRpbC9lYXNpbmcudHMiLCIvLyBodHRwczovL2QzanMub3JnL2QzLWludGVycG9sYXRlLyBWZXJzaW9uIDEuMS40LiBDb3B5cmlnaHQgMjAxNyBNaWtlIEJvc3RvY2suXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHR0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMsIHJlcXVpcmUoJ2QzLWNvbG9yJykpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cycsICdkMy1jb2xvciddLCBmYWN0b3J5KSA6XG5cdChmYWN0b3J5KChnbG9iYWwuZDMgPSBnbG9iYWwuZDMgfHwge30pLGdsb2JhbC5kMykpO1xufSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMsZDNDb2xvcikgeyAndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGJhc2lzKHQxLCB2MCwgdjEsIHYyLCB2Mykge1xuICB2YXIgdDIgPSB0MSAqIHQxLCB0MyA9IHQyICogdDE7XG4gIHJldHVybiAoKDEgLSAzICogdDEgKyAzICogdDIgLSB0MykgKiB2MFxuICAgICAgKyAoNCAtIDYgKiB0MiArIDMgKiB0MykgKiB2MVxuICAgICAgKyAoMSArIDMgKiB0MSArIDMgKiB0MiAtIDMgKiB0MykgKiB2MlxuICAgICAgKyB0MyAqIHYzKSAvIDY7XG59XG5cbnZhciBiYXNpcyQxID0gZnVuY3Rpb24odmFsdWVzKSB7XG4gIHZhciBuID0gdmFsdWVzLmxlbmd0aCAtIDE7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdmFyIGkgPSB0IDw9IDAgPyAodCA9IDApIDogdCA+PSAxID8gKHQgPSAxLCBuIC0gMSkgOiBNYXRoLmZsb29yKHQgKiBuKSxcbiAgICAgICAgdjEgPSB2YWx1ZXNbaV0sXG4gICAgICAgIHYyID0gdmFsdWVzW2kgKyAxXSxcbiAgICAgICAgdjAgPSBpID4gMCA/IHZhbHVlc1tpIC0gMV0gOiAyICogdjEgLSB2MixcbiAgICAgICAgdjMgPSBpIDwgbiAtIDEgPyB2YWx1ZXNbaSArIDJdIDogMiAqIHYyIC0gdjE7XG4gICAgcmV0dXJuIGJhc2lzKCh0IC0gaSAvIG4pICogbiwgdjAsIHYxLCB2MiwgdjMpO1xuICB9O1xufTtcblxudmFyIGJhc2lzQ2xvc2VkID0gZnVuY3Rpb24odmFsdWVzKSB7XG4gIHZhciBuID0gdmFsdWVzLmxlbmd0aDtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgaSA9IE1hdGguZmxvb3IoKCh0ICU9IDEpIDwgMCA/ICsrdCA6IHQpICogbiksXG4gICAgICAgIHYwID0gdmFsdWVzWyhpICsgbiAtIDEpICUgbl0sXG4gICAgICAgIHYxID0gdmFsdWVzW2kgJSBuXSxcbiAgICAgICAgdjIgPSB2YWx1ZXNbKGkgKyAxKSAlIG5dLFxuICAgICAgICB2MyA9IHZhbHVlc1soaSArIDIpICUgbl07XG4gICAgcmV0dXJuIGJhc2lzKCh0IC0gaSAvIG4pICogbiwgdjAsIHYxLCB2MiwgdjMpO1xuICB9O1xufTtcblxudmFyIGNvbnN0YW50ID0gZnVuY3Rpb24oeCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHg7XG4gIH07XG59O1xuXG5mdW5jdGlvbiBsaW5lYXIoYSwgZCkge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBhICsgdCAqIGQ7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGV4cG9uZW50aWFsKGEsIGIsIHkpIHtcbiAgcmV0dXJuIGEgPSBNYXRoLnBvdyhhLCB5KSwgYiA9IE1hdGgucG93KGIsIHkpIC0gYSwgeSA9IDEgLyB5LCBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIE1hdGgucG93KGEgKyB0ICogYiwgeSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGh1ZShhLCBiKSB7XG4gIHZhciBkID0gYiAtIGE7XG4gIHJldHVybiBkID8gbGluZWFyKGEsIGQgPiAxODAgfHwgZCA8IC0xODAgPyBkIC0gMzYwICogTWF0aC5yb3VuZChkIC8gMzYwKSA6IGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG59XG5cbmZ1bmN0aW9uIGdhbW1hKHkpIHtcbiAgcmV0dXJuICh5ID0gK3kpID09PSAxID8gbm9nYW1tYSA6IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gYiAtIGEgPyBleHBvbmVudGlhbChhLCBiLCB5KSA6IGNvbnN0YW50KGlzTmFOKGEpID8gYiA6IGEpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBub2dhbW1hKGEsIGIpIHtcbiAgdmFyIGQgPSBiIC0gYTtcbiAgcmV0dXJuIGQgPyBsaW5lYXIoYSwgZCkgOiBjb25zdGFudChpc05hTihhKSA/IGIgOiBhKTtcbn1cblxudmFyIHJnYiQxID0gKChmdW5jdGlvbiByZ2JHYW1tYSh5KSB7XG4gIHZhciBjb2xvciQkMSA9IGdhbW1hKHkpO1xuXG4gIGZ1bmN0aW9uIHJnYiQkMShzdGFydCwgZW5kKSB7XG4gICAgdmFyIHIgPSBjb2xvciQkMSgoc3RhcnQgPSBkM0NvbG9yLnJnYihzdGFydCkpLnIsIChlbmQgPSBkM0NvbG9yLnJnYihlbmQpKS5yKSxcbiAgICAgICAgZyA9IGNvbG9yJCQxKHN0YXJ0LmcsIGVuZC5nKSxcbiAgICAgICAgYiA9IGNvbG9yJCQxKHN0YXJ0LmIsIGVuZC5iKSxcbiAgICAgICAgb3BhY2l0eSA9IG5vZ2FtbWEoc3RhcnQub3BhY2l0eSwgZW5kLm9wYWNpdHkpO1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICBzdGFydC5yID0gcih0KTtcbiAgICAgIHN0YXJ0LmcgPSBnKHQpO1xuICAgICAgc3RhcnQuYiA9IGIodCk7XG4gICAgICBzdGFydC5vcGFjaXR5ID0gb3BhY2l0eSh0KTtcbiAgICAgIHJldHVybiBzdGFydCArIFwiXCI7XG4gICAgfTtcbiAgfVxuXG4gIHJnYiQkMS5nYW1tYSA9IHJnYkdhbW1hO1xuXG4gIHJldHVybiByZ2IkJDE7XG59KSkoMSk7XG5cbmZ1bmN0aW9uIHJnYlNwbGluZShzcGxpbmUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGNvbG9ycykge1xuICAgIHZhciBuID0gY29sb3JzLmxlbmd0aCxcbiAgICAgICAgciA9IG5ldyBBcnJheShuKSxcbiAgICAgICAgZyA9IG5ldyBBcnJheShuKSxcbiAgICAgICAgYiA9IG5ldyBBcnJheShuKSxcbiAgICAgICAgaSwgY29sb3IkJDE7XG4gICAgZm9yIChpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgY29sb3IkJDEgPSBkM0NvbG9yLnJnYihjb2xvcnNbaV0pO1xuICAgICAgcltpXSA9IGNvbG9yJCQxLnIgfHwgMDtcbiAgICAgIGdbaV0gPSBjb2xvciQkMS5nIHx8IDA7XG4gICAgICBiW2ldID0gY29sb3IkJDEuYiB8fCAwO1xuICAgIH1cbiAgICByID0gc3BsaW5lKHIpO1xuICAgIGcgPSBzcGxpbmUoZyk7XG4gICAgYiA9IHNwbGluZShiKTtcbiAgICBjb2xvciQkMS5vcGFjaXR5ID0gMTtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgY29sb3IkJDEuciA9IHIodCk7XG4gICAgICBjb2xvciQkMS5nID0gZyh0KTtcbiAgICAgIGNvbG9yJCQxLmIgPSBiKHQpO1xuICAgICAgcmV0dXJuIGNvbG9yJCQxICsgXCJcIjtcbiAgICB9O1xuICB9O1xufVxuXG52YXIgcmdiQmFzaXMgPSByZ2JTcGxpbmUoYmFzaXMkMSk7XG52YXIgcmdiQmFzaXNDbG9zZWQgPSByZ2JTcGxpbmUoYmFzaXNDbG9zZWQpO1xuXG52YXIgYXJyYXkgPSBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciBuYiA9IGIgPyBiLmxlbmd0aCA6IDAsXG4gICAgICBuYSA9IGEgPyBNYXRoLm1pbihuYiwgYS5sZW5ndGgpIDogMCxcbiAgICAgIHggPSBuZXcgQXJyYXkobmIpLFxuICAgICAgYyA9IG5ldyBBcnJheShuYiksXG4gICAgICBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBuYTsgKytpKSB4W2ldID0gdmFsdWUoYVtpXSwgYltpXSk7XG4gIGZvciAoOyBpIDwgbmI7ICsraSkgY1tpXSA9IGJbaV07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbmE7ICsraSkgY1tpXSA9IHhbaV0odCk7XG4gICAgcmV0dXJuIGM7XG4gIH07XG59O1xuXG52YXIgZGF0ZSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgdmFyIGQgPSBuZXcgRGF0ZTtcbiAgcmV0dXJuIGEgPSArYSwgYiAtPSBhLCBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGQuc2V0VGltZShhICsgYiAqIHQpLCBkO1xuICB9O1xufTtcblxudmFyIG51bWJlciA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGEgPSArYSwgYiAtPSBhLCBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGEgKyBiICogdDtcbiAgfTtcbn07XG5cbnZhciBvYmplY3QgPSBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciBpID0ge30sXG4gICAgICBjID0ge30sXG4gICAgICBrO1xuXG4gIGlmIChhID09PSBudWxsIHx8IHR5cGVvZiBhICE9PSBcIm9iamVjdFwiKSBhID0ge307XG4gIGlmIChiID09PSBudWxsIHx8IHR5cGVvZiBiICE9PSBcIm9iamVjdFwiKSBiID0ge307XG5cbiAgZm9yIChrIGluIGIpIHtcbiAgICBpZiAoayBpbiBhKSB7XG4gICAgICBpW2tdID0gdmFsdWUoYVtrXSwgYltrXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNba10gPSBiW2tdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgZm9yIChrIGluIGkpIGNba10gPSBpW2tdKHQpO1xuICAgIHJldHVybiBjO1xuICB9O1xufTtcblxudmFyIHJlQSA9IC9bLStdPyg/OlxcZCtcXC4/XFxkKnxcXC4/XFxkKykoPzpbZUVdWy0rXT9cXGQrKT8vZztcbnZhciByZUIgPSBuZXcgUmVnRXhwKHJlQS5zb3VyY2UsIFwiZ1wiKTtcblxuZnVuY3Rpb24gemVybyhiKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gYjtcbiAgfTtcbn1cblxuZnVuY3Rpb24gb25lKGIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gYih0KSArIFwiXCI7XG4gIH07XG59XG5cbnZhciBzdHJpbmcgPSBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciBiaSA9IHJlQS5sYXN0SW5kZXggPSByZUIubGFzdEluZGV4ID0gMCwgLy8gc2NhbiBpbmRleCBmb3IgbmV4dCBudW1iZXIgaW4gYlxuICAgICAgYW0sIC8vIGN1cnJlbnQgbWF0Y2ggaW4gYVxuICAgICAgYm0sIC8vIGN1cnJlbnQgbWF0Y2ggaW4gYlxuICAgICAgYnMsIC8vIHN0cmluZyBwcmVjZWRpbmcgY3VycmVudCBudW1iZXIgaW4gYiwgaWYgYW55XG4gICAgICBpID0gLTEsIC8vIGluZGV4IGluIHNcbiAgICAgIHMgPSBbXSwgLy8gc3RyaW5nIGNvbnN0YW50cyBhbmQgcGxhY2Vob2xkZXJzXG4gICAgICBxID0gW107IC8vIG51bWJlciBpbnRlcnBvbGF0b3JzXG5cbiAgLy8gQ29lcmNlIGlucHV0cyB0byBzdHJpbmdzLlxuICBhID0gYSArIFwiXCIsIGIgPSBiICsgXCJcIjtcblxuICAvLyBJbnRlcnBvbGF0ZSBwYWlycyBvZiBudW1iZXJzIGluIGEgJiBiLlxuICB3aGlsZSAoKGFtID0gcmVBLmV4ZWMoYSkpXG4gICAgICAmJiAoYm0gPSByZUIuZXhlYyhiKSkpIHtcbiAgICBpZiAoKGJzID0gYm0uaW5kZXgpID4gYmkpIHsgLy8gYSBzdHJpbmcgcHJlY2VkZXMgdGhlIG5leHQgbnVtYmVyIGluIGJcbiAgICAgIGJzID0gYi5zbGljZShiaSwgYnMpO1xuICAgICAgaWYgKHNbaV0pIHNbaV0gKz0gYnM7IC8vIGNvYWxlc2NlIHdpdGggcHJldmlvdXMgc3RyaW5nXG4gICAgICBlbHNlIHNbKytpXSA9IGJzO1xuICAgIH1cbiAgICBpZiAoKGFtID0gYW1bMF0pID09PSAoYm0gPSBibVswXSkpIHsgLy8gbnVtYmVycyBpbiBhICYgYiBtYXRjaFxuICAgICAgaWYgKHNbaV0pIHNbaV0gKz0gYm07IC8vIGNvYWxlc2NlIHdpdGggcHJldmlvdXMgc3RyaW5nXG4gICAgICBlbHNlIHNbKytpXSA9IGJtO1xuICAgIH0gZWxzZSB7IC8vIGludGVycG9sYXRlIG5vbi1tYXRjaGluZyBudW1iZXJzXG4gICAgICBzWysraV0gPSBudWxsO1xuICAgICAgcS5wdXNoKHtpOiBpLCB4OiBudW1iZXIoYW0sIGJtKX0pO1xuICAgIH1cbiAgICBiaSA9IHJlQi5sYXN0SW5kZXg7XG4gIH1cblxuICAvLyBBZGQgcmVtYWlucyBvZiBiLlxuICBpZiAoYmkgPCBiLmxlbmd0aCkge1xuICAgIGJzID0gYi5zbGljZShiaSk7XG4gICAgaWYgKHNbaV0pIHNbaV0gKz0gYnM7IC8vIGNvYWxlc2NlIHdpdGggcHJldmlvdXMgc3RyaW5nXG4gICAgZWxzZSBzWysraV0gPSBicztcbiAgfVxuXG4gIC8vIFNwZWNpYWwgb3B0aW1pemF0aW9uIGZvciBvbmx5IGEgc2luZ2xlIG1hdGNoLlxuICAvLyBPdGhlcndpc2UsIGludGVycG9sYXRlIGVhY2ggb2YgdGhlIG51bWJlcnMgYW5kIHJlam9pbiB0aGUgc3RyaW5nLlxuICByZXR1cm4gcy5sZW5ndGggPCAyID8gKHFbMF1cbiAgICAgID8gb25lKHFbMF0ueClcbiAgICAgIDogemVybyhiKSlcbiAgICAgIDogKGIgPSBxLmxlbmd0aCwgZnVuY3Rpb24odCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvOyBpIDwgYjsgKytpKSBzWyhvID0gcVtpXSkuaV0gPSBvLngodCk7XG4gICAgICAgICAgcmV0dXJuIHMuam9pbihcIlwiKTtcbiAgICAgICAgfSk7XG59O1xuXG52YXIgdmFsdWUgPSBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciB0ID0gdHlwZW9mIGIsIGM7XG4gIHJldHVybiBiID09IG51bGwgfHwgdCA9PT0gXCJib29sZWFuXCIgPyBjb25zdGFudChiKVxuICAgICAgOiAodCA9PT0gXCJudW1iZXJcIiA/IG51bWJlclxuICAgICAgOiB0ID09PSBcInN0cmluZ1wiID8gKChjID0gZDNDb2xvci5jb2xvcihiKSkgPyAoYiA9IGMsIHJnYiQxKSA6IHN0cmluZylcbiAgICAgIDogYiBpbnN0YW5jZW9mIGQzQ29sb3IuY29sb3IgPyByZ2IkMVxuICAgICAgOiBiIGluc3RhbmNlb2YgRGF0ZSA/IGRhdGVcbiAgICAgIDogQXJyYXkuaXNBcnJheShiKSA/IGFycmF5XG4gICAgICA6IGlzTmFOKGIpID8gb2JqZWN0XG4gICAgICA6IG51bWJlcikoYSwgYik7XG59O1xuXG52YXIgcm91bmQgPSBmdW5jdGlvbihhLCBiKSB7XG4gIHJldHVybiBhID0gK2EsIGIgLT0gYSwgZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKGEgKyBiICogdCk7XG4gIH07XG59O1xuXG52YXIgZGVncmVlcyA9IDE4MCAvIE1hdGguUEk7XG5cbnZhciBpZGVudGl0eSA9IHtcbiAgdHJhbnNsYXRlWDogMCxcbiAgdHJhbnNsYXRlWTogMCxcbiAgcm90YXRlOiAwLFxuICBza2V3WDogMCxcbiAgc2NhbGVYOiAxLFxuICBzY2FsZVk6IDFcbn07XG5cbnZhciBkZWNvbXBvc2UgPSBmdW5jdGlvbihhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIHZhciBzY2FsZVgsIHNjYWxlWSwgc2tld1g7XG4gIGlmIChzY2FsZVggPSBNYXRoLnNxcnQoYSAqIGEgKyBiICogYikpIGEgLz0gc2NhbGVYLCBiIC89IHNjYWxlWDtcbiAgaWYgKHNrZXdYID0gYSAqIGMgKyBiICogZCkgYyAtPSBhICogc2tld1gsIGQgLT0gYiAqIHNrZXdYO1xuICBpZiAoc2NhbGVZID0gTWF0aC5zcXJ0KGMgKiBjICsgZCAqIGQpKSBjIC89IHNjYWxlWSwgZCAvPSBzY2FsZVksIHNrZXdYIC89IHNjYWxlWTtcbiAgaWYgKGEgKiBkIDwgYiAqIGMpIGEgPSAtYSwgYiA9IC1iLCBza2V3WCA9IC1za2V3WCwgc2NhbGVYID0gLXNjYWxlWDtcbiAgcmV0dXJuIHtcbiAgICB0cmFuc2xhdGVYOiBlLFxuICAgIHRyYW5zbGF0ZVk6IGYsXG4gICAgcm90YXRlOiBNYXRoLmF0YW4yKGIsIGEpICogZGVncmVlcyxcbiAgICBza2V3WDogTWF0aC5hdGFuKHNrZXdYKSAqIGRlZ3JlZXMsXG4gICAgc2NhbGVYOiBzY2FsZVgsXG4gICAgc2NhbGVZOiBzY2FsZVlcbiAgfTtcbn07XG5cbnZhciBjc3NOb2RlO1xudmFyIGNzc1Jvb3Q7XG52YXIgY3NzVmlldztcbnZhciBzdmdOb2RlO1xuXG5mdW5jdGlvbiBwYXJzZUNzcyh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT09IFwibm9uZVwiKSByZXR1cm4gaWRlbnRpdHk7XG4gIGlmICghY3NzTm9kZSkgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIiksIGNzc1Jvb3QgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGNzc1ZpZXcgPSBkb2N1bWVudC5kZWZhdWx0VmlldztcbiAgY3NzTm9kZS5zdHlsZS50cmFuc2Zvcm0gPSB2YWx1ZTtcbiAgdmFsdWUgPSBjc3NWaWV3LmdldENvbXB1dGVkU3R5bGUoY3NzUm9vdC5hcHBlbmRDaGlsZChjc3NOb2RlKSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShcInRyYW5zZm9ybVwiKTtcbiAgY3NzUm9vdC5yZW1vdmVDaGlsZChjc3NOb2RlKTtcbiAgdmFsdWUgPSB2YWx1ZS5zbGljZSg3LCAtMSkuc3BsaXQoXCIsXCIpO1xuICByZXR1cm4gZGVjb21wb3NlKCt2YWx1ZVswXSwgK3ZhbHVlWzFdLCArdmFsdWVbMl0sICt2YWx1ZVszXSwgK3ZhbHVlWzRdLCArdmFsdWVbNV0pO1xufVxuXG5mdW5jdGlvbiBwYXJzZVN2Zyh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIGlkZW50aXR5O1xuICBpZiAoIXN2Z05vZGUpIHN2Z05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcImdcIik7XG4gIHN2Z05vZGUuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsIHZhbHVlKTtcbiAgaWYgKCEodmFsdWUgPSBzdmdOb2RlLnRyYW5zZm9ybS5iYXNlVmFsLmNvbnNvbGlkYXRlKCkpKSByZXR1cm4gaWRlbnRpdHk7XG4gIHZhbHVlID0gdmFsdWUubWF0cml4O1xuICByZXR1cm4gZGVjb21wb3NlKHZhbHVlLmEsIHZhbHVlLmIsIHZhbHVlLmMsIHZhbHVlLmQsIHZhbHVlLmUsIHZhbHVlLmYpO1xufVxuXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZSwgcHhDb21tYSwgcHhQYXJlbiwgZGVnUGFyZW4pIHtcblxuICBmdW5jdGlvbiBwb3Aocykge1xuICAgIHJldHVybiBzLmxlbmd0aCA/IHMucG9wKCkgKyBcIiBcIiA6IFwiXCI7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2xhdGUoeGEsIHlhLCB4YiwgeWIsIHMsIHEpIHtcbiAgICBpZiAoeGEgIT09IHhiIHx8IHlhICE9PSB5Yikge1xuICAgICAgdmFyIGkgPSBzLnB1c2goXCJ0cmFuc2xhdGUoXCIsIG51bGwsIHB4Q29tbWEsIG51bGwsIHB4UGFyZW4pO1xuICAgICAgcS5wdXNoKHtpOiBpIC0gNCwgeDogbnVtYmVyKHhhLCB4Yil9LCB7aTogaSAtIDIsIHg6IG51bWJlcih5YSwgeWIpfSk7XG4gICAgfSBlbHNlIGlmICh4YiB8fCB5Yikge1xuICAgICAgcy5wdXNoKFwidHJhbnNsYXRlKFwiICsgeGIgKyBweENvbW1hICsgeWIgKyBweFBhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByb3RhdGUoYSwgYiwgcywgcSkge1xuICAgIGlmIChhICE9PSBiKSB7XG4gICAgICBpZiAoYSAtIGIgPiAxODApIGIgKz0gMzYwOyBlbHNlIGlmIChiIC0gYSA+IDE4MCkgYSArPSAzNjA7IC8vIHNob3J0ZXN0IHBhdGhcbiAgICAgIHEucHVzaCh7aTogcy5wdXNoKHBvcChzKSArIFwicm90YXRlKFwiLCBudWxsLCBkZWdQYXJlbikgLSAyLCB4OiBudW1iZXIoYSwgYil9KTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInJvdGF0ZShcIiArIGIgKyBkZWdQYXJlbik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2tld1goYSwgYiwgcywgcSkge1xuICAgIGlmIChhICE9PSBiKSB7XG4gICAgICBxLnB1c2goe2k6IHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiLCBudWxsLCBkZWdQYXJlbikgLSAyLCB4OiBudW1iZXIoYSwgYil9KTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiICsgYiArIGRlZ1BhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzY2FsZSh4YSwgeWEsIHhiLCB5YiwgcywgcSkge1xuICAgIGlmICh4YSAhPT0geGIgfHwgeWEgIT09IHliKSB7XG4gICAgICB2YXIgaSA9IHMucHVzaChwb3AocykgKyBcInNjYWxlKFwiLCBudWxsLCBcIixcIiwgbnVsbCwgXCIpXCIpO1xuICAgICAgcS5wdXNoKHtpOiBpIC0gNCwgeDogbnVtYmVyKHhhLCB4Yil9LCB7aTogaSAtIDIsIHg6IG51bWJlcih5YSwgeWIpfSk7XG4gICAgfSBlbHNlIGlmICh4YiAhPT0gMSB8fCB5YiAhPT0gMSkge1xuICAgICAgcy5wdXNoKHBvcChzKSArIFwic2NhbGUoXCIgKyB4YiArIFwiLFwiICsgeWIgKyBcIilcIik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgcyA9IFtdLCAvLyBzdHJpbmcgY29uc3RhbnRzIGFuZCBwbGFjZWhvbGRlcnNcbiAgICAgICAgcSA9IFtdOyAvLyBudW1iZXIgaW50ZXJwb2xhdG9yc1xuICAgIGEgPSBwYXJzZShhKSwgYiA9IHBhcnNlKGIpO1xuICAgIHRyYW5zbGF0ZShhLnRyYW5zbGF0ZVgsIGEudHJhbnNsYXRlWSwgYi50cmFuc2xhdGVYLCBiLnRyYW5zbGF0ZVksIHMsIHEpO1xuICAgIHJvdGF0ZShhLnJvdGF0ZSwgYi5yb3RhdGUsIHMsIHEpO1xuICAgIHNrZXdYKGEuc2tld1gsIGIuc2tld1gsIHMsIHEpO1xuICAgIHNjYWxlKGEuc2NhbGVYLCBhLnNjYWxlWSwgYi5zY2FsZVgsIGIuc2NhbGVZLCBzLCBxKTtcbiAgICBhID0gYiA9IG51bGw7IC8vIGdjXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHZhciBpID0gLTEsIG4gPSBxLmxlbmd0aCwgbztcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBzWyhvID0gcVtpXSkuaV0gPSBvLngodCk7XG4gICAgICByZXR1cm4gcy5qb2luKFwiXCIpO1xuICAgIH07XG4gIH07XG59XG5cbnZhciBpbnRlcnBvbGF0ZVRyYW5zZm9ybUNzcyA9IGludGVycG9sYXRlVHJhbnNmb3JtKHBhcnNlQ3NzLCBcInB4LCBcIiwgXCJweClcIiwgXCJkZWcpXCIpO1xudmFyIGludGVycG9sYXRlVHJhbnNmb3JtU3ZnID0gaW50ZXJwb2xhdGVUcmFuc2Zvcm0ocGFyc2VTdmcsIFwiLCBcIiwgXCIpXCIsIFwiKVwiKTtcblxudmFyIHJobyA9IE1hdGguU1FSVDI7XG52YXIgcmhvMiA9IDI7XG52YXIgcmhvNCA9IDQ7XG52YXIgZXBzaWxvbjIgPSAxZS0xMjtcblxuZnVuY3Rpb24gY29zaCh4KSB7XG4gIHJldHVybiAoKHggPSBNYXRoLmV4cCh4KSkgKyAxIC8geCkgLyAyO1xufVxuXG5mdW5jdGlvbiBzaW5oKHgpIHtcbiAgcmV0dXJuICgoeCA9IE1hdGguZXhwKHgpKSAtIDEgLyB4KSAvIDI7XG59XG5cbmZ1bmN0aW9uIHRhbmgoeCkge1xuICByZXR1cm4gKCh4ID0gTWF0aC5leHAoMiAqIHgpKSAtIDEpIC8gKHggKyAxKTtcbn1cblxuLy8gcDAgPSBbdXgwLCB1eTAsIHcwXVxuLy8gcDEgPSBbdXgxLCB1eTEsIHcxXVxudmFyIHpvb20gPSBmdW5jdGlvbihwMCwgcDEpIHtcbiAgdmFyIHV4MCA9IHAwWzBdLCB1eTAgPSBwMFsxXSwgdzAgPSBwMFsyXSxcbiAgICAgIHV4MSA9IHAxWzBdLCB1eTEgPSBwMVsxXSwgdzEgPSBwMVsyXSxcbiAgICAgIGR4ID0gdXgxIC0gdXgwLFxuICAgICAgZHkgPSB1eTEgLSB1eTAsXG4gICAgICBkMiA9IGR4ICogZHggKyBkeSAqIGR5LFxuICAgICAgaSxcbiAgICAgIFM7XG5cbiAgLy8gU3BlY2lhbCBjYXNlIGZvciB1MCDiiYUgdTEuXG4gIGlmIChkMiA8IGVwc2lsb24yKSB7XG4gICAgUyA9IE1hdGgubG9nKHcxIC8gdzApIC8gcmhvO1xuICAgIGkgPSBmdW5jdGlvbih0KSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICB1eDAgKyB0ICogZHgsXG4gICAgICAgIHV5MCArIHQgKiBkeSxcbiAgICAgICAgdzAgKiBNYXRoLmV4cChyaG8gKiB0ICogUylcbiAgICAgIF07XG4gICAgfTtcbiAgfVxuXG4gIC8vIEdlbmVyYWwgY2FzZS5cbiAgZWxzZSB7XG4gICAgdmFyIGQxID0gTWF0aC5zcXJ0KGQyKSxcbiAgICAgICAgYjAgPSAodzEgKiB3MSAtIHcwICogdzAgKyByaG80ICogZDIpIC8gKDIgKiB3MCAqIHJobzIgKiBkMSksXG4gICAgICAgIGIxID0gKHcxICogdzEgLSB3MCAqIHcwIC0gcmhvNCAqIGQyKSAvICgyICogdzEgKiByaG8yICogZDEpLFxuICAgICAgICByMCA9IE1hdGgubG9nKE1hdGguc3FydChiMCAqIGIwICsgMSkgLSBiMCksXG4gICAgICAgIHIxID0gTWF0aC5sb2coTWF0aC5zcXJ0KGIxICogYjEgKyAxKSAtIGIxKTtcbiAgICBTID0gKHIxIC0gcjApIC8gcmhvO1xuICAgIGkgPSBmdW5jdGlvbih0KSB7XG4gICAgICB2YXIgcyA9IHQgKiBTLFxuICAgICAgICAgIGNvc2hyMCA9IGNvc2gocjApLFxuICAgICAgICAgIHUgPSB3MCAvIChyaG8yICogZDEpICogKGNvc2hyMCAqIHRhbmgocmhvICogcyArIHIwKSAtIHNpbmgocjApKTtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHV4MCArIHUgKiBkeCxcbiAgICAgICAgdXkwICsgdSAqIGR5LFxuICAgICAgICB3MCAqIGNvc2hyMCAvIGNvc2gocmhvICogcyArIHIwKVxuICAgICAgXTtcbiAgICB9O1xuICB9XG5cbiAgaS5kdXJhdGlvbiA9IFMgKiAxMDAwO1xuXG4gIHJldHVybiBpO1xufTtcblxuZnVuY3Rpb24gaHNsJDEoaHVlJCQxKSB7XG4gIHJldHVybiBmdW5jdGlvbihzdGFydCwgZW5kKSB7XG4gICAgdmFyIGggPSBodWUkJDEoKHN0YXJ0ID0gZDNDb2xvci5oc2woc3RhcnQpKS5oLCAoZW5kID0gZDNDb2xvci5oc2woZW5kKSkuaCksXG4gICAgICAgIHMgPSBub2dhbW1hKHN0YXJ0LnMsIGVuZC5zKSxcbiAgICAgICAgbCA9IG5vZ2FtbWEoc3RhcnQubCwgZW5kLmwpLFxuICAgICAgICBvcGFjaXR5ID0gbm9nYW1tYShzdGFydC5vcGFjaXR5LCBlbmQub3BhY2l0eSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHN0YXJ0LmggPSBoKHQpO1xuICAgICAgc3RhcnQucyA9IHModCk7XG4gICAgICBzdGFydC5sID0gbCh0KTtcbiAgICAgIHN0YXJ0Lm9wYWNpdHkgPSBvcGFjaXR5KHQpO1xuICAgICAgcmV0dXJuIHN0YXJ0ICsgXCJcIjtcbiAgICB9O1xuICB9XG59XG5cbnZhciBoc2wkMiA9IGhzbCQxKGh1ZSk7XG52YXIgaHNsTG9uZyA9IGhzbCQxKG5vZ2FtbWEpO1xuXG5mdW5jdGlvbiBsYWIkMShzdGFydCwgZW5kKSB7XG4gIHZhciBsID0gbm9nYW1tYSgoc3RhcnQgPSBkM0NvbG9yLmxhYihzdGFydCkpLmwsIChlbmQgPSBkM0NvbG9yLmxhYihlbmQpKS5sKSxcbiAgICAgIGEgPSBub2dhbW1hKHN0YXJ0LmEsIGVuZC5hKSxcbiAgICAgIGIgPSBub2dhbW1hKHN0YXJ0LmIsIGVuZC5iKSxcbiAgICAgIG9wYWNpdHkgPSBub2dhbW1hKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICBzdGFydC5sID0gbCh0KTtcbiAgICBzdGFydC5hID0gYSh0KTtcbiAgICBzdGFydC5iID0gYih0KTtcbiAgICBzdGFydC5vcGFjaXR5ID0gb3BhY2l0eSh0KTtcbiAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuICB9O1xufVxuXG5mdW5jdGlvbiBoY2wkMShodWUkJDEpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgaCA9IGh1ZSQkMSgoc3RhcnQgPSBkM0NvbG9yLmhjbChzdGFydCkpLmgsIChlbmQgPSBkM0NvbG9yLmhjbChlbmQpKS5oKSxcbiAgICAgICAgYyA9IG5vZ2FtbWEoc3RhcnQuYywgZW5kLmMpLFxuICAgICAgICBsID0gbm9nYW1tYShzdGFydC5sLCBlbmQubCksXG4gICAgICAgIG9wYWNpdHkgPSBub2dhbW1hKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgc3RhcnQuaCA9IGgodCk7XG4gICAgICBzdGFydC5jID0gYyh0KTtcbiAgICAgIHN0YXJ0LmwgPSBsKHQpO1xuICAgICAgc3RhcnQub3BhY2l0eSA9IG9wYWNpdHkodCk7XG4gICAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuICAgIH07XG4gIH1cbn1cblxudmFyIGhjbCQyID0gaGNsJDEoaHVlKTtcbnZhciBoY2xMb25nID0gaGNsJDEobm9nYW1tYSk7XG5cbmZ1bmN0aW9uIGN1YmVoZWxpeCQxKGh1ZSQkMSkge1xuICByZXR1cm4gKGZ1bmN0aW9uIGN1YmVoZWxpeEdhbW1hKHkpIHtcbiAgICB5ID0gK3k7XG5cbiAgICBmdW5jdGlvbiBjdWJlaGVsaXgkJDEoc3RhcnQsIGVuZCkge1xuICAgICAgdmFyIGggPSBodWUkJDEoKHN0YXJ0ID0gZDNDb2xvci5jdWJlaGVsaXgoc3RhcnQpKS5oLCAoZW5kID0gZDNDb2xvci5jdWJlaGVsaXgoZW5kKSkuaCksXG4gICAgICAgICAgcyA9IG5vZ2FtbWEoc3RhcnQucywgZW5kLnMpLFxuICAgICAgICAgIGwgPSBub2dhbW1hKHN0YXJ0LmwsIGVuZC5sKSxcbiAgICAgICAgICBvcGFjaXR5ID0gbm9nYW1tYShzdGFydC5vcGFjaXR5LCBlbmQub3BhY2l0eSk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICBzdGFydC5oID0gaCh0KTtcbiAgICAgICAgc3RhcnQucyA9IHModCk7XG4gICAgICAgIHN0YXJ0LmwgPSBsKE1hdGgucG93KHQsIHkpKTtcbiAgICAgICAgc3RhcnQub3BhY2l0eSA9IG9wYWNpdHkodCk7XG4gICAgICAgIHJldHVybiBzdGFydCArIFwiXCI7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGN1YmVoZWxpeCQkMS5nYW1tYSA9IGN1YmVoZWxpeEdhbW1hO1xuXG4gICAgcmV0dXJuIGN1YmVoZWxpeCQkMTtcbiAgfSkoMSk7XG59XG5cbnZhciBjdWJlaGVsaXgkMiA9IGN1YmVoZWxpeCQxKGh1ZSk7XG52YXIgY3ViZWhlbGl4TG9uZyA9IGN1YmVoZWxpeCQxKG5vZ2FtbWEpO1xuXG52YXIgcXVhbnRpemUgPSBmdW5jdGlvbihpbnRlcnBvbGF0b3IsIG4pIHtcbiAgdmFyIHNhbXBsZXMgPSBuZXcgQXJyYXkobik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKSBzYW1wbGVzW2ldID0gaW50ZXJwb2xhdG9yKGkgLyAobiAtIDEpKTtcbiAgcmV0dXJuIHNhbXBsZXM7XG59O1xuXG5leHBvcnRzLmludGVycG9sYXRlID0gdmFsdWU7XG5leHBvcnRzLmludGVycG9sYXRlQXJyYXkgPSBhcnJheTtcbmV4cG9ydHMuaW50ZXJwb2xhdGVCYXNpcyA9IGJhc2lzJDE7XG5leHBvcnRzLmludGVycG9sYXRlQmFzaXNDbG9zZWQgPSBiYXNpc0Nsb3NlZDtcbmV4cG9ydHMuaW50ZXJwb2xhdGVEYXRlID0gZGF0ZTtcbmV4cG9ydHMuaW50ZXJwb2xhdGVOdW1iZXIgPSBudW1iZXI7XG5leHBvcnRzLmludGVycG9sYXRlT2JqZWN0ID0gb2JqZWN0O1xuZXhwb3J0cy5pbnRlcnBvbGF0ZVJvdW5kID0gcm91bmQ7XG5leHBvcnRzLmludGVycG9sYXRlU3RyaW5nID0gc3RyaW5nO1xuZXhwb3J0cy5pbnRlcnBvbGF0ZVRyYW5zZm9ybUNzcyA9IGludGVycG9sYXRlVHJhbnNmb3JtQ3NzO1xuZXhwb3J0cy5pbnRlcnBvbGF0ZVRyYW5zZm9ybVN2ZyA9IGludGVycG9sYXRlVHJhbnNmb3JtU3ZnO1xuZXhwb3J0cy5pbnRlcnBvbGF0ZVpvb20gPSB6b29tO1xuZXhwb3J0cy5pbnRlcnBvbGF0ZVJnYiA9IHJnYiQxO1xuZXhwb3J0cy5pbnRlcnBvbGF0ZVJnYkJhc2lzID0gcmdiQmFzaXM7XG5leHBvcnRzLmludGVycG9sYXRlUmdiQmFzaXNDbG9zZWQgPSByZ2JCYXNpc0Nsb3NlZDtcbmV4cG9ydHMuaW50ZXJwb2xhdGVIc2wgPSBoc2wkMjtcbmV4cG9ydHMuaW50ZXJwb2xhdGVIc2xMb25nID0gaHNsTG9uZztcbmV4cG9ydHMuaW50ZXJwb2xhdGVMYWIgPSBsYWIkMTtcbmV4cG9ydHMuaW50ZXJwb2xhdGVIY2wgPSBoY2wkMjtcbmV4cG9ydHMuaW50ZXJwb2xhdGVIY2xMb25nID0gaGNsTG9uZztcbmV4cG9ydHMuaW50ZXJwb2xhdGVDdWJlaGVsaXggPSBjdWJlaGVsaXgkMjtcbmV4cG9ydHMuaW50ZXJwb2xhdGVDdWJlaGVsaXhMb25nID0gY3ViZWhlbGl4TG9uZztcbmV4cG9ydHMucXVhbnRpemUgPSBxdWFudGl6ZTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxufSkpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9kMy1pbnRlcnBvbGF0ZS9idWlsZC9kMy1pbnRlcnBvbGF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gaHR0cHM6Ly9kM2pzLm9yZy9kMy1jb2xvci8gVmVyc2lvbiAxLjAuMy4gQ29weXJpZ2h0IDIwMTcgTWlrZSBCb3N0b2NrLlxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0dHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnXSwgZmFjdG9yeSkgOlxuXHQoZmFjdG9yeSgoZ2xvYmFsLmQzID0gZ2xvYmFsLmQzIHx8IHt9KSkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMpIHsgJ3VzZSBzdHJpY3QnO1xuXG52YXIgZGVmaW5lID0gZnVuY3Rpb24oY29uc3RydWN0b3IsIGZhY3RvcnksIHByb3RvdHlwZSkge1xuICBjb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBmYWN0b3J5LnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgcHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY29uc3RydWN0b3I7XG59O1xuXG5mdW5jdGlvbiBleHRlbmQocGFyZW50LCBkZWZpbml0aW9uKSB7XG4gIHZhciBwcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHBhcmVudC5wcm90b3R5cGUpO1xuICBmb3IgKHZhciBrZXkgaW4gZGVmaW5pdGlvbikgcHJvdG90eXBlW2tleV0gPSBkZWZpbml0aW9uW2tleV07XG4gIHJldHVybiBwcm90b3R5cGU7XG59XG5cbmZ1bmN0aW9uIENvbG9yKCkge31cblxudmFyIGRhcmtlciA9IDAuNztcbnZhciBicmlnaHRlciA9IDEgLyBkYXJrZXI7XG5cbnZhciByZUkgPSBcIlxcXFxzKihbKy1dP1xcXFxkKylcXFxccypcIjtcbnZhciByZU4gPSBcIlxcXFxzKihbKy1dP1xcXFxkKlxcXFwuP1xcXFxkKyg/OltlRV1bKy1dP1xcXFxkKyk/KVxcXFxzKlwiO1xudmFyIHJlUCA9IFwiXFxcXHMqKFsrLV0/XFxcXGQqXFxcXC4/XFxcXGQrKD86W2VFXVsrLV0/XFxcXGQrKT8pJVxcXFxzKlwiO1xudmFyIHJlSGV4MyA9IC9eIyhbMC05YS1mXXszfSkkLztcbnZhciByZUhleDYgPSAvXiMoWzAtOWEtZl17Nn0pJC87XG52YXIgcmVSZ2JJbnRlZ2VyID0gbmV3IFJlZ0V4cChcIl5yZ2JcXFxcKFwiICsgW3JlSSwgcmVJLCByZUldICsgXCJcXFxcKSRcIik7XG52YXIgcmVSZ2JQZXJjZW50ID0gbmV3IFJlZ0V4cChcIl5yZ2JcXFxcKFwiICsgW3JlUCwgcmVQLCByZVBdICsgXCJcXFxcKSRcIik7XG52YXIgcmVSZ2JhSW50ZWdlciA9IG5ldyBSZWdFeHAoXCJecmdiYVxcXFwoXCIgKyBbcmVJLCByZUksIHJlSSwgcmVOXSArIFwiXFxcXCkkXCIpO1xudmFyIHJlUmdiYVBlcmNlbnQgPSBuZXcgUmVnRXhwKFwiXnJnYmFcXFxcKFwiICsgW3JlUCwgcmVQLCByZVAsIHJlTl0gKyBcIlxcXFwpJFwiKTtcbnZhciByZUhzbFBlcmNlbnQgPSBuZXcgUmVnRXhwKFwiXmhzbFxcXFwoXCIgKyBbcmVOLCByZVAsIHJlUF0gKyBcIlxcXFwpJFwiKTtcbnZhciByZUhzbGFQZXJjZW50ID0gbmV3IFJlZ0V4cChcIl5oc2xhXFxcXChcIiArIFtyZU4sIHJlUCwgcmVQLCByZU5dICsgXCJcXFxcKSRcIik7XG5cbnZhciBuYW1lZCA9IHtcbiAgYWxpY2VibHVlOiAweGYwZjhmZixcbiAgYW50aXF1ZXdoaXRlOiAweGZhZWJkNyxcbiAgYXF1YTogMHgwMGZmZmYsXG4gIGFxdWFtYXJpbmU6IDB4N2ZmZmQ0LFxuICBhenVyZTogMHhmMGZmZmYsXG4gIGJlaWdlOiAweGY1ZjVkYyxcbiAgYmlzcXVlOiAweGZmZTRjNCxcbiAgYmxhY2s6IDB4MDAwMDAwLFxuICBibGFuY2hlZGFsbW9uZDogMHhmZmViY2QsXG4gIGJsdWU6IDB4MDAwMGZmLFxuICBibHVldmlvbGV0OiAweDhhMmJlMixcbiAgYnJvd246IDB4YTUyYTJhLFxuICBidXJseXdvb2Q6IDB4ZGViODg3LFxuICBjYWRldGJsdWU6IDB4NWY5ZWEwLFxuICBjaGFydHJldXNlOiAweDdmZmYwMCxcbiAgY2hvY29sYXRlOiAweGQyNjkxZSxcbiAgY29yYWw6IDB4ZmY3ZjUwLFxuICBjb3JuZmxvd2VyYmx1ZTogMHg2NDk1ZWQsXG4gIGNvcm5zaWxrOiAweGZmZjhkYyxcbiAgY3JpbXNvbjogMHhkYzE0M2MsXG4gIGN5YW46IDB4MDBmZmZmLFxuICBkYXJrYmx1ZTogMHgwMDAwOGIsXG4gIGRhcmtjeWFuOiAweDAwOGI4YixcbiAgZGFya2dvbGRlbnJvZDogMHhiODg2MGIsXG4gIGRhcmtncmF5OiAweGE5YTlhOSxcbiAgZGFya2dyZWVuOiAweDAwNjQwMCxcbiAgZGFya2dyZXk6IDB4YTlhOWE5LFxuICBkYXJra2hha2k6IDB4YmRiNzZiLFxuICBkYXJrbWFnZW50YTogMHg4YjAwOGIsXG4gIGRhcmtvbGl2ZWdyZWVuOiAweDU1NmIyZixcbiAgZGFya29yYW5nZTogMHhmZjhjMDAsXG4gIGRhcmtvcmNoaWQ6IDB4OTkzMmNjLFxuICBkYXJrcmVkOiAweDhiMDAwMCxcbiAgZGFya3NhbG1vbjogMHhlOTk2N2EsXG4gIGRhcmtzZWFncmVlbjogMHg4ZmJjOGYsXG4gIGRhcmtzbGF0ZWJsdWU6IDB4NDgzZDhiLFxuICBkYXJrc2xhdGVncmF5OiAweDJmNGY0ZixcbiAgZGFya3NsYXRlZ3JleTogMHgyZjRmNGYsXG4gIGRhcmt0dXJxdW9pc2U6IDB4MDBjZWQxLFxuICBkYXJrdmlvbGV0OiAweDk0MDBkMyxcbiAgZGVlcHBpbms6IDB4ZmYxNDkzLFxuICBkZWVwc2t5Ymx1ZTogMHgwMGJmZmYsXG4gIGRpbWdyYXk6IDB4Njk2OTY5LFxuICBkaW1ncmV5OiAweDY5Njk2OSxcbiAgZG9kZ2VyYmx1ZTogMHgxZTkwZmYsXG4gIGZpcmVicmljazogMHhiMjIyMjIsXG4gIGZsb3JhbHdoaXRlOiAweGZmZmFmMCxcbiAgZm9yZXN0Z3JlZW46IDB4MjI4YjIyLFxuICBmdWNoc2lhOiAweGZmMDBmZixcbiAgZ2FpbnNib3JvOiAweGRjZGNkYyxcbiAgZ2hvc3R3aGl0ZTogMHhmOGY4ZmYsXG4gIGdvbGQ6IDB4ZmZkNzAwLFxuICBnb2xkZW5yb2Q6IDB4ZGFhNTIwLFxuICBncmF5OiAweDgwODA4MCxcbiAgZ3JlZW46IDB4MDA4MDAwLFxuICBncmVlbnllbGxvdzogMHhhZGZmMmYsXG4gIGdyZXk6IDB4ODA4MDgwLFxuICBob25leWRldzogMHhmMGZmZjAsXG4gIGhvdHBpbms6IDB4ZmY2OWI0LFxuICBpbmRpYW5yZWQ6IDB4Y2Q1YzVjLFxuICBpbmRpZ286IDB4NGIwMDgyLFxuICBpdm9yeTogMHhmZmZmZjAsXG4gIGtoYWtpOiAweGYwZTY4YyxcbiAgbGF2ZW5kZXI6IDB4ZTZlNmZhLFxuICBsYXZlbmRlcmJsdXNoOiAweGZmZjBmNSxcbiAgbGF3bmdyZWVuOiAweDdjZmMwMCxcbiAgbGVtb25jaGlmZm9uOiAweGZmZmFjZCxcbiAgbGlnaHRibHVlOiAweGFkZDhlNixcbiAgbGlnaHRjb3JhbDogMHhmMDgwODAsXG4gIGxpZ2h0Y3lhbjogMHhlMGZmZmYsXG4gIGxpZ2h0Z29sZGVucm9keWVsbG93OiAweGZhZmFkMixcbiAgbGlnaHRncmF5OiAweGQzZDNkMyxcbiAgbGlnaHRncmVlbjogMHg5MGVlOTAsXG4gIGxpZ2h0Z3JleTogMHhkM2QzZDMsXG4gIGxpZ2h0cGluazogMHhmZmI2YzEsXG4gIGxpZ2h0c2FsbW9uOiAweGZmYTA3YSxcbiAgbGlnaHRzZWFncmVlbjogMHgyMGIyYWEsXG4gIGxpZ2h0c2t5Ymx1ZTogMHg4N2NlZmEsXG4gIGxpZ2h0c2xhdGVncmF5OiAweDc3ODg5OSxcbiAgbGlnaHRzbGF0ZWdyZXk6IDB4Nzc4ODk5LFxuICBsaWdodHN0ZWVsYmx1ZTogMHhiMGM0ZGUsXG4gIGxpZ2h0eWVsbG93OiAweGZmZmZlMCxcbiAgbGltZTogMHgwMGZmMDAsXG4gIGxpbWVncmVlbjogMHgzMmNkMzIsXG4gIGxpbmVuOiAweGZhZjBlNixcbiAgbWFnZW50YTogMHhmZjAwZmYsXG4gIG1hcm9vbjogMHg4MDAwMDAsXG4gIG1lZGl1bWFxdWFtYXJpbmU6IDB4NjZjZGFhLFxuICBtZWRpdW1ibHVlOiAweDAwMDBjZCxcbiAgbWVkaXVtb3JjaGlkOiAweGJhNTVkMyxcbiAgbWVkaXVtcHVycGxlOiAweDkzNzBkYixcbiAgbWVkaXVtc2VhZ3JlZW46IDB4M2NiMzcxLFxuICBtZWRpdW1zbGF0ZWJsdWU6IDB4N2I2OGVlLFxuICBtZWRpdW1zcHJpbmdncmVlbjogMHgwMGZhOWEsXG4gIG1lZGl1bXR1cnF1b2lzZTogMHg0OGQxY2MsXG4gIG1lZGl1bXZpb2xldHJlZDogMHhjNzE1ODUsXG4gIG1pZG5pZ2h0Ymx1ZTogMHgxOTE5NzAsXG4gIG1pbnRjcmVhbTogMHhmNWZmZmEsXG4gIG1pc3R5cm9zZTogMHhmZmU0ZTEsXG4gIG1vY2Nhc2luOiAweGZmZTRiNSxcbiAgbmF2YWpvd2hpdGU6IDB4ZmZkZWFkLFxuICBuYXZ5OiAweDAwMDA4MCxcbiAgb2xkbGFjZTogMHhmZGY1ZTYsXG4gIG9saXZlOiAweDgwODAwMCxcbiAgb2xpdmVkcmFiOiAweDZiOGUyMyxcbiAgb3JhbmdlOiAweGZmYTUwMCxcbiAgb3JhbmdlcmVkOiAweGZmNDUwMCxcbiAgb3JjaGlkOiAweGRhNzBkNixcbiAgcGFsZWdvbGRlbnJvZDogMHhlZWU4YWEsXG4gIHBhbGVncmVlbjogMHg5OGZiOTgsXG4gIHBhbGV0dXJxdW9pc2U6IDB4YWZlZWVlLFxuICBwYWxldmlvbGV0cmVkOiAweGRiNzA5MyxcbiAgcGFwYXlhd2hpcDogMHhmZmVmZDUsXG4gIHBlYWNocHVmZjogMHhmZmRhYjksXG4gIHBlcnU6IDB4Y2Q4NTNmLFxuICBwaW5rOiAweGZmYzBjYixcbiAgcGx1bTogMHhkZGEwZGQsXG4gIHBvd2RlcmJsdWU6IDB4YjBlMGU2LFxuICBwdXJwbGU6IDB4ODAwMDgwLFxuICByZWJlY2NhcHVycGxlOiAweDY2MzM5OSxcbiAgcmVkOiAweGZmMDAwMCxcbiAgcm9zeWJyb3duOiAweGJjOGY4ZixcbiAgcm95YWxibHVlOiAweDQxNjllMSxcbiAgc2FkZGxlYnJvd246IDB4OGI0NTEzLFxuICBzYWxtb246IDB4ZmE4MDcyLFxuICBzYW5keWJyb3duOiAweGY0YTQ2MCxcbiAgc2VhZ3JlZW46IDB4MmU4YjU3LFxuICBzZWFzaGVsbDogMHhmZmY1ZWUsXG4gIHNpZW5uYTogMHhhMDUyMmQsXG4gIHNpbHZlcjogMHhjMGMwYzAsXG4gIHNreWJsdWU6IDB4ODdjZWViLFxuICBzbGF0ZWJsdWU6IDB4NmE1YWNkLFxuICBzbGF0ZWdyYXk6IDB4NzA4MDkwLFxuICBzbGF0ZWdyZXk6IDB4NzA4MDkwLFxuICBzbm93OiAweGZmZmFmYSxcbiAgc3ByaW5nZ3JlZW46IDB4MDBmZjdmLFxuICBzdGVlbGJsdWU6IDB4NDY4MmI0LFxuICB0YW46IDB4ZDJiNDhjLFxuICB0ZWFsOiAweDAwODA4MCxcbiAgdGhpc3RsZTogMHhkOGJmZDgsXG4gIHRvbWF0bzogMHhmZjYzNDcsXG4gIHR1cnF1b2lzZTogMHg0MGUwZDAsXG4gIHZpb2xldDogMHhlZTgyZWUsXG4gIHdoZWF0OiAweGY1ZGViMyxcbiAgd2hpdGU6IDB4ZmZmZmZmLFxuICB3aGl0ZXNtb2tlOiAweGY1ZjVmNSxcbiAgeWVsbG93OiAweGZmZmYwMCxcbiAgeWVsbG93Z3JlZW46IDB4OWFjZDMyXG59O1xuXG5kZWZpbmUoQ29sb3IsIGNvbG9yLCB7XG4gIGRpc3BsYXlhYmxlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5yZ2IoKS5kaXNwbGF5YWJsZSgpO1xuICB9LFxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucmdiKCkgKyBcIlwiO1xuICB9XG59KTtcblxuZnVuY3Rpb24gY29sb3IoZm9ybWF0KSB7XG4gIHZhciBtO1xuICBmb3JtYXQgPSAoZm9ybWF0ICsgXCJcIikudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiAobSA9IHJlSGV4My5leGVjKGZvcm1hdCkpID8gKG0gPSBwYXJzZUludChtWzFdLCAxNiksIG5ldyBSZ2IoKG0gPj4gOCAmIDB4ZikgfCAobSA+PiA0ICYgMHgwZjApLCAobSA+PiA0ICYgMHhmKSB8IChtICYgMHhmMCksICgobSAmIDB4ZikgPDwgNCkgfCAobSAmIDB4ZiksIDEpKSAvLyAjZjAwXG4gICAgICA6IChtID0gcmVIZXg2LmV4ZWMoZm9ybWF0KSkgPyByZ2JuKHBhcnNlSW50KG1bMV0sIDE2KSkgLy8gI2ZmMDAwMFxuICAgICAgOiAobSA9IHJlUmdiSW50ZWdlci5leGVjKGZvcm1hdCkpID8gbmV3IFJnYihtWzFdLCBtWzJdLCBtWzNdLCAxKSAvLyByZ2IoMjU1LCAwLCAwKVxuICAgICAgOiAobSA9IHJlUmdiUGVyY2VudC5leGVjKGZvcm1hdCkpID8gbmV3IFJnYihtWzFdICogMjU1IC8gMTAwLCBtWzJdICogMjU1IC8gMTAwLCBtWzNdICogMjU1IC8gMTAwLCAxKSAvLyByZ2IoMTAwJSwgMCUsIDAlKVxuICAgICAgOiAobSA9IHJlUmdiYUludGVnZXIuZXhlYyhmb3JtYXQpKSA/IHJnYmEobVsxXSwgbVsyXSwgbVszXSwgbVs0XSkgLy8gcmdiYSgyNTUsIDAsIDAsIDEpXG4gICAgICA6IChtID0gcmVSZ2JhUGVyY2VudC5leGVjKGZvcm1hdCkpID8gcmdiYShtWzFdICogMjU1IC8gMTAwLCBtWzJdICogMjU1IC8gMTAwLCBtWzNdICogMjU1IC8gMTAwLCBtWzRdKSAvLyByZ2IoMTAwJSwgMCUsIDAlLCAxKVxuICAgICAgOiAobSA9IHJlSHNsUGVyY2VudC5leGVjKGZvcm1hdCkpID8gaHNsYShtWzFdLCBtWzJdIC8gMTAwLCBtWzNdIC8gMTAwLCAxKSAvLyBoc2woMTIwLCA1MCUsIDUwJSlcbiAgICAgIDogKG0gPSByZUhzbGFQZXJjZW50LmV4ZWMoZm9ybWF0KSkgPyBoc2xhKG1bMV0sIG1bMl0gLyAxMDAsIG1bM10gLyAxMDAsIG1bNF0pIC8vIGhzbGEoMTIwLCA1MCUsIDUwJSwgMSlcbiAgICAgIDogbmFtZWQuaGFzT3duUHJvcGVydHkoZm9ybWF0KSA/IHJnYm4obmFtZWRbZm9ybWF0XSlcbiAgICAgIDogZm9ybWF0ID09PSBcInRyYW5zcGFyZW50XCIgPyBuZXcgUmdiKE5hTiwgTmFOLCBOYU4sIDApXG4gICAgICA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHJnYm4obikge1xuICByZXR1cm4gbmV3IFJnYihuID4+IDE2ICYgMHhmZiwgbiA+PiA4ICYgMHhmZiwgbiAmIDB4ZmYsIDEpO1xufVxuXG5mdW5jdGlvbiByZ2JhKHIsIGcsIGIsIGEpIHtcbiAgaWYgKGEgPD0gMCkgciA9IGcgPSBiID0gTmFOO1xuICByZXR1cm4gbmV3IFJnYihyLCBnLCBiLCBhKTtcbn1cblxuZnVuY3Rpb24gcmdiQ29udmVydChvKSB7XG4gIGlmICghKG8gaW5zdGFuY2VvZiBDb2xvcikpIG8gPSBjb2xvcihvKTtcbiAgaWYgKCFvKSByZXR1cm4gbmV3IFJnYjtcbiAgbyA9IG8ucmdiKCk7XG4gIHJldHVybiBuZXcgUmdiKG8uciwgby5nLCBvLmIsIG8ub3BhY2l0eSk7XG59XG5cbmZ1bmN0aW9uIHJnYihyLCBnLCBiLCBvcGFjaXR5KSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gcmdiQ29udmVydChyKSA6IG5ldyBSZ2IociwgZywgYiwgb3BhY2l0eSA9PSBudWxsID8gMSA6IG9wYWNpdHkpO1xufVxuXG5mdW5jdGlvbiBSZ2IociwgZywgYiwgb3BhY2l0eSkge1xuICB0aGlzLnIgPSArcjtcbiAgdGhpcy5nID0gK2c7XG4gIHRoaXMuYiA9ICtiO1xuICB0aGlzLm9wYWNpdHkgPSArb3BhY2l0eTtcbn1cblxuZGVmaW5lKFJnYiwgcmdiLCBleHRlbmQoQ29sb3IsIHtcbiAgYnJpZ2h0ZXI6IGZ1bmN0aW9uKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gYnJpZ2h0ZXIgOiBNYXRoLnBvdyhicmlnaHRlciwgayk7XG4gICAgcmV0dXJuIG5ldyBSZ2IodGhpcy5yICogaywgdGhpcy5nICogaywgdGhpcy5iICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgZGFya2VyOiBmdW5jdGlvbihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGRhcmtlciA6IE1hdGgucG93KGRhcmtlciwgayk7XG4gICAgcmV0dXJuIG5ldyBSZ2IodGhpcy5yICogaywgdGhpcy5nICogaywgdGhpcy5iICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgcmdiOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSxcbiAgZGlzcGxheWFibGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoMCA8PSB0aGlzLnIgJiYgdGhpcy5yIDw9IDI1NSlcbiAgICAgICAgJiYgKDAgPD0gdGhpcy5nICYmIHRoaXMuZyA8PSAyNTUpXG4gICAgICAgICYmICgwIDw9IHRoaXMuYiAmJiB0aGlzLmIgPD0gMjU1KVxuICAgICAgICAmJiAoMCA8PSB0aGlzLm9wYWNpdHkgJiYgdGhpcy5vcGFjaXR5IDw9IDEpO1xuICB9LFxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGEgPSB0aGlzLm9wYWNpdHk7IGEgPSBpc05hTihhKSA/IDEgOiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBhKSk7XG4gICAgcmV0dXJuIChhID09PSAxID8gXCJyZ2IoXCIgOiBcInJnYmEoXCIpXG4gICAgICAgICsgTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHRoaXMucikgfHwgMCkpICsgXCIsIFwiXG4gICAgICAgICsgTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHRoaXMuZykgfHwgMCkpICsgXCIsIFwiXG4gICAgICAgICsgTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHRoaXMuYikgfHwgMCkpXG4gICAgICAgICsgKGEgPT09IDEgPyBcIilcIiA6IFwiLCBcIiArIGEgKyBcIilcIik7XG4gIH1cbn0pKTtcblxuZnVuY3Rpb24gaHNsYShoLCBzLCBsLCBhKSB7XG4gIGlmIChhIDw9IDApIGggPSBzID0gbCA9IE5hTjtcbiAgZWxzZSBpZiAobCA8PSAwIHx8IGwgPj0gMSkgaCA9IHMgPSBOYU47XG4gIGVsc2UgaWYgKHMgPD0gMCkgaCA9IE5hTjtcbiAgcmV0dXJuIG5ldyBIc2woaCwgcywgbCwgYSk7XG59XG5cbmZ1bmN0aW9uIGhzbENvbnZlcnQobykge1xuICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG5ldyBIc2woby5oLCBvLnMsIG8ubCwgby5vcGFjaXR5KTtcbiAgaWYgKCEobyBpbnN0YW5jZW9mIENvbG9yKSkgbyA9IGNvbG9yKG8pO1xuICBpZiAoIW8pIHJldHVybiBuZXcgSHNsO1xuICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG87XG4gIG8gPSBvLnJnYigpO1xuICB2YXIgciA9IG8uciAvIDI1NSxcbiAgICAgIGcgPSBvLmcgLyAyNTUsXG4gICAgICBiID0gby5iIC8gMjU1LFxuICAgICAgbWluID0gTWF0aC5taW4ociwgZywgYiksXG4gICAgICBtYXggPSBNYXRoLm1heChyLCBnLCBiKSxcbiAgICAgIGggPSBOYU4sXG4gICAgICBzID0gbWF4IC0gbWluLFxuICAgICAgbCA9IChtYXggKyBtaW4pIC8gMjtcbiAgaWYgKHMpIHtcbiAgICBpZiAociA9PT0gbWF4KSBoID0gKGcgLSBiKSAvIHMgKyAoZyA8IGIpICogNjtcbiAgICBlbHNlIGlmIChnID09PSBtYXgpIGggPSAoYiAtIHIpIC8gcyArIDI7XG4gICAgZWxzZSBoID0gKHIgLSBnKSAvIHMgKyA0O1xuICAgIHMgLz0gbCA8IDAuNSA/IG1heCArIG1pbiA6IDIgLSBtYXggLSBtaW47XG4gICAgaCAqPSA2MDtcbiAgfSBlbHNlIHtcbiAgICBzID0gbCA+IDAgJiYgbCA8IDEgPyAwIDogaDtcbiAgfVxuICByZXR1cm4gbmV3IEhzbChoLCBzLCBsLCBvLm9wYWNpdHkpO1xufVxuXG5mdW5jdGlvbiBoc2woaCwgcywgbCwgb3BhY2l0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGhzbENvbnZlcnQoaCkgOiBuZXcgSHNsKGgsIHMsIGwsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTtcbn1cblxuZnVuY3Rpb24gSHNsKGgsIHMsIGwsIG9wYWNpdHkpIHtcbiAgdGhpcy5oID0gK2g7XG4gIHRoaXMucyA9ICtzO1xuICB0aGlzLmwgPSArbDtcbiAgdGhpcy5vcGFjaXR5ID0gK29wYWNpdHk7XG59XG5cbmRlZmluZShIc2wsIGhzbCwgZXh0ZW5kKENvbG9yLCB7XG4gIGJyaWdodGVyOiBmdW5jdGlvbihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGJyaWdodGVyIDogTWF0aC5wb3coYnJpZ2h0ZXIsIGspO1xuICAgIHJldHVybiBuZXcgSHNsKHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICBkYXJrZXI6IGZ1bmN0aW9uKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gZGFya2VyIDogTWF0aC5wb3coZGFya2VyLCBrKTtcbiAgICByZXR1cm4gbmV3IEhzbCh0aGlzLmgsIHRoaXMucywgdGhpcy5sICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgcmdiOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgaCA9IHRoaXMuaCAlIDM2MCArICh0aGlzLmggPCAwKSAqIDM2MCxcbiAgICAgICAgcyA9IGlzTmFOKGgpIHx8IGlzTmFOKHRoaXMucykgPyAwIDogdGhpcy5zLFxuICAgICAgICBsID0gdGhpcy5sLFxuICAgICAgICBtMiA9IGwgKyAobCA8IDAuNSA/IGwgOiAxIC0gbCkgKiBzLFxuICAgICAgICBtMSA9IDIgKiBsIC0gbTI7XG4gICAgcmV0dXJuIG5ldyBSZ2IoXG4gICAgICBoc2wycmdiKGggPj0gMjQwID8gaCAtIDI0MCA6IGggKyAxMjAsIG0xLCBtMiksXG4gICAgICBoc2wycmdiKGgsIG0xLCBtMiksXG4gICAgICBoc2wycmdiKGggPCAxMjAgPyBoICsgMjQwIDogaCAtIDEyMCwgbTEsIG0yKSxcbiAgICAgIHRoaXMub3BhY2l0eVxuICAgICk7XG4gIH0sXG4gIGRpc3BsYXlhYmxlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKDAgPD0gdGhpcy5zICYmIHRoaXMucyA8PSAxIHx8IGlzTmFOKHRoaXMucykpXG4gICAgICAgICYmICgwIDw9IHRoaXMubCAmJiB0aGlzLmwgPD0gMSlcbiAgICAgICAgJiYgKDAgPD0gdGhpcy5vcGFjaXR5ICYmIHRoaXMub3BhY2l0eSA8PSAxKTtcbiAgfVxufSkpO1xuXG4vKiBGcm9tIEZ2RCAxMy4zNywgQ1NTIENvbG9yIE1vZHVsZSBMZXZlbCAzICovXG5mdW5jdGlvbiBoc2wycmdiKGgsIG0xLCBtMikge1xuICByZXR1cm4gKGggPCA2MCA/IG0xICsgKG0yIC0gbTEpICogaCAvIDYwXG4gICAgICA6IGggPCAxODAgPyBtMlxuICAgICAgOiBoIDwgMjQwID8gbTEgKyAobTIgLSBtMSkgKiAoMjQwIC0gaCkgLyA2MFxuICAgICAgOiBtMSkgKiAyNTU7XG59XG5cbnZhciBkZWcycmFkID0gTWF0aC5QSSAvIDE4MDtcbnZhciByYWQyZGVnID0gMTgwIC8gTWF0aC5QSTtcblxudmFyIEtuID0gMTg7XG52YXIgWG4gPSAwLjk1MDQ3MDtcbnZhciBZbiA9IDE7XG52YXIgWm4gPSAxLjA4ODgzMDtcbnZhciB0MCA9IDQgLyAyOTtcbnZhciB0MSA9IDYgLyAyOTtcbnZhciB0MiA9IDMgKiB0MSAqIHQxO1xudmFyIHQzID0gdDEgKiB0MSAqIHQxO1xuXG5mdW5jdGlvbiBsYWJDb252ZXJ0KG8pIHtcbiAgaWYgKG8gaW5zdGFuY2VvZiBMYWIpIHJldHVybiBuZXcgTGFiKG8ubCwgby5hLCBvLmIsIG8ub3BhY2l0eSk7XG4gIGlmIChvIGluc3RhbmNlb2YgSGNsKSB7XG4gICAgdmFyIGggPSBvLmggKiBkZWcycmFkO1xuICAgIHJldHVybiBuZXcgTGFiKG8ubCwgTWF0aC5jb3MoaCkgKiBvLmMsIE1hdGguc2luKGgpICogby5jLCBvLm9wYWNpdHkpO1xuICB9XG4gIGlmICghKG8gaW5zdGFuY2VvZiBSZ2IpKSBvID0gcmdiQ29udmVydChvKTtcbiAgdmFyIGIgPSByZ2IyeHl6KG8uciksXG4gICAgICBhID0gcmdiMnh5eihvLmcpLFxuICAgICAgbCA9IHJnYjJ4eXooby5iKSxcbiAgICAgIHggPSB4eXoybGFiKCgwLjQxMjQ1NjQgKiBiICsgMC4zNTc1NzYxICogYSArIDAuMTgwNDM3NSAqIGwpIC8gWG4pLFxuICAgICAgeSA9IHh5ejJsYWIoKDAuMjEyNjcyOSAqIGIgKyAwLjcxNTE1MjIgKiBhICsgMC4wNzIxNzUwICogbCkgLyBZbiksXG4gICAgICB6ID0geHl6MmxhYigoMC4wMTkzMzM5ICogYiArIDAuMTE5MTkyMCAqIGEgKyAwLjk1MDMwNDEgKiBsKSAvIFpuKTtcbiAgcmV0dXJuIG5ldyBMYWIoMTE2ICogeSAtIDE2LCA1MDAgKiAoeCAtIHkpLCAyMDAgKiAoeSAtIHopLCBvLm9wYWNpdHkpO1xufVxuXG5mdW5jdGlvbiBsYWIobCwgYSwgYiwgb3BhY2l0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGxhYkNvbnZlcnQobCkgOiBuZXcgTGFiKGwsIGEsIGIsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTtcbn1cblxuZnVuY3Rpb24gTGFiKGwsIGEsIGIsIG9wYWNpdHkpIHtcbiAgdGhpcy5sID0gK2w7XG4gIHRoaXMuYSA9ICthO1xuICB0aGlzLmIgPSArYjtcbiAgdGhpcy5vcGFjaXR5ID0gK29wYWNpdHk7XG59XG5cbmRlZmluZShMYWIsIGxhYiwgZXh0ZW5kKENvbG9yLCB7XG4gIGJyaWdodGVyOiBmdW5jdGlvbihrKSB7XG4gICAgcmV0dXJuIG5ldyBMYWIodGhpcy5sICsgS24gKiAoayA9PSBudWxsID8gMSA6IGspLCB0aGlzLmEsIHRoaXMuYiwgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgZGFya2VyOiBmdW5jdGlvbihrKSB7XG4gICAgcmV0dXJuIG5ldyBMYWIodGhpcy5sIC0gS24gKiAoayA9PSBudWxsID8gMSA6IGspLCB0aGlzLmEsIHRoaXMuYiwgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgcmdiOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgeSA9ICh0aGlzLmwgKyAxNikgLyAxMTYsXG4gICAgICAgIHggPSBpc05hTih0aGlzLmEpID8geSA6IHkgKyB0aGlzLmEgLyA1MDAsXG4gICAgICAgIHogPSBpc05hTih0aGlzLmIpID8geSA6IHkgLSB0aGlzLmIgLyAyMDA7XG4gICAgeSA9IFluICogbGFiMnh5eih5KTtcbiAgICB4ID0gWG4gKiBsYWIyeHl6KHgpO1xuICAgIHogPSBabiAqIGxhYjJ4eXooeik7XG4gICAgcmV0dXJuIG5ldyBSZ2IoXG4gICAgICB4eXoycmdiKCAzLjI0MDQ1NDIgKiB4IC0gMS41MzcxMzg1ICogeSAtIDAuNDk4NTMxNCAqIHopLCAvLyBENjUgLT4gc1JHQlxuICAgICAgeHl6MnJnYigtMC45NjkyNjYwICogeCArIDEuODc2MDEwOCAqIHkgKyAwLjA0MTU1NjAgKiB6KSxcbiAgICAgIHh5ejJyZ2IoIDAuMDU1NjQzNCAqIHggLSAwLjIwNDAyNTkgKiB5ICsgMS4wNTcyMjUyICogeiksXG4gICAgICB0aGlzLm9wYWNpdHlcbiAgICApO1xuICB9XG59KSk7XG5cbmZ1bmN0aW9uIHh5ejJsYWIodCkge1xuICByZXR1cm4gdCA+IHQzID8gTWF0aC5wb3codCwgMSAvIDMpIDogdCAvIHQyICsgdDA7XG59XG5cbmZ1bmN0aW9uIGxhYjJ4eXoodCkge1xuICByZXR1cm4gdCA+IHQxID8gdCAqIHQgKiB0IDogdDIgKiAodCAtIHQwKTtcbn1cblxuZnVuY3Rpb24geHl6MnJnYih4KSB7XG4gIHJldHVybiAyNTUgKiAoeCA8PSAwLjAwMzEzMDggPyAxMi45MiAqIHggOiAxLjA1NSAqIE1hdGgucG93KHgsIDEgLyAyLjQpIC0gMC4wNTUpO1xufVxuXG5mdW5jdGlvbiByZ2IyeHl6KHgpIHtcbiAgcmV0dXJuICh4IC89IDI1NSkgPD0gMC4wNDA0NSA/IHggLyAxMi45MiA6IE1hdGgucG93KCh4ICsgMC4wNTUpIC8gMS4wNTUsIDIuNCk7XG59XG5cbmZ1bmN0aW9uIGhjbENvbnZlcnQobykge1xuICBpZiAobyBpbnN0YW5jZW9mIEhjbCkgcmV0dXJuIG5ldyBIY2woby5oLCBvLmMsIG8ubCwgby5vcGFjaXR5KTtcbiAgaWYgKCEobyBpbnN0YW5jZW9mIExhYikpIG8gPSBsYWJDb252ZXJ0KG8pO1xuICB2YXIgaCA9IE1hdGguYXRhbjIoby5iLCBvLmEpICogcmFkMmRlZztcbiAgcmV0dXJuIG5ldyBIY2woaCA8IDAgPyBoICsgMzYwIDogaCwgTWF0aC5zcXJ0KG8uYSAqIG8uYSArIG8uYiAqIG8uYiksIG8ubCwgby5vcGFjaXR5KTtcbn1cblxuZnVuY3Rpb24gaGNsKGgsIGMsIGwsIG9wYWNpdHkpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBoY2xDb252ZXJ0KGgpIDogbmV3IEhjbChoLCBjLCBsLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7XG59XG5cbmZ1bmN0aW9uIEhjbChoLCBjLCBsLCBvcGFjaXR5KSB7XG4gIHRoaXMuaCA9ICtoO1xuICB0aGlzLmMgPSArYztcbiAgdGhpcy5sID0gK2w7XG4gIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5O1xufVxuXG5kZWZpbmUoSGNsLCBoY2wsIGV4dGVuZChDb2xvciwge1xuICBicmlnaHRlcjogZnVuY3Rpb24oaykge1xuICAgIHJldHVybiBuZXcgSGNsKHRoaXMuaCwgdGhpcy5jLCB0aGlzLmwgKyBLbiAqIChrID09IG51bGwgPyAxIDogayksIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIGRhcmtlcjogZnVuY3Rpb24oaykge1xuICAgIHJldHVybiBuZXcgSGNsKHRoaXMuaCwgdGhpcy5jLCB0aGlzLmwgLSBLbiAqIChrID09IG51bGwgPyAxIDogayksIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIHJnYjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGxhYkNvbnZlcnQodGhpcykucmdiKCk7XG4gIH1cbn0pKTtcblxudmFyIEEgPSAtMC4xNDg2MTtcbnZhciBCID0gKzEuNzgyNzc7XG52YXIgQyA9IC0wLjI5MjI3O1xudmFyIEQgPSAtMC45MDY0OTtcbnZhciBFID0gKzEuOTcyOTQ7XG52YXIgRUQgPSBFICogRDtcbnZhciBFQiA9IEUgKiBCO1xudmFyIEJDX0RBID0gQiAqIEMgLSBEICogQTtcblxuZnVuY3Rpb24gY3ViZWhlbGl4Q29udmVydChvKSB7XG4gIGlmIChvIGluc3RhbmNlb2YgQ3ViZWhlbGl4KSByZXR1cm4gbmV3IEN1YmVoZWxpeChvLmgsIG8ucywgby5sLCBvLm9wYWNpdHkpO1xuICBpZiAoIShvIGluc3RhbmNlb2YgUmdiKSkgbyA9IHJnYkNvbnZlcnQobyk7XG4gIHZhciByID0gby5yIC8gMjU1LFxuICAgICAgZyA9IG8uZyAvIDI1NSxcbiAgICAgIGIgPSBvLmIgLyAyNTUsXG4gICAgICBsID0gKEJDX0RBICogYiArIEVEICogciAtIEVCICogZykgLyAoQkNfREEgKyBFRCAtIEVCKSxcbiAgICAgIGJsID0gYiAtIGwsXG4gICAgICBrID0gKEUgKiAoZyAtIGwpIC0gQyAqIGJsKSAvIEQsXG4gICAgICBzID0gTWF0aC5zcXJ0KGsgKiBrICsgYmwgKiBibCkgLyAoRSAqIGwgKiAoMSAtIGwpKSwgLy8gTmFOIGlmIGw9MCBvciBsPTFcbiAgICAgIGggPSBzID8gTWF0aC5hdGFuMihrLCBibCkgKiByYWQyZGVnIC0gMTIwIDogTmFOO1xuICByZXR1cm4gbmV3IEN1YmVoZWxpeChoIDwgMCA/IGggKyAzNjAgOiBoLCBzLCBsLCBvLm9wYWNpdHkpO1xufVxuXG5mdW5jdGlvbiBjdWJlaGVsaXgoaCwgcywgbCwgb3BhY2l0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGN1YmVoZWxpeENvbnZlcnQoaCkgOiBuZXcgQ3ViZWhlbGl4KGgsIHMsIGwsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTtcbn1cblxuZnVuY3Rpb24gQ3ViZWhlbGl4KGgsIHMsIGwsIG9wYWNpdHkpIHtcbiAgdGhpcy5oID0gK2g7XG4gIHRoaXMucyA9ICtzO1xuICB0aGlzLmwgPSArbDtcbiAgdGhpcy5vcGFjaXR5ID0gK29wYWNpdHk7XG59XG5cbmRlZmluZShDdWJlaGVsaXgsIGN1YmVoZWxpeCwgZXh0ZW5kKENvbG9yLCB7XG4gIGJyaWdodGVyOiBmdW5jdGlvbihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGJyaWdodGVyIDogTWF0aC5wb3coYnJpZ2h0ZXIsIGspO1xuICAgIHJldHVybiBuZXcgQ3ViZWhlbGl4KHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICBkYXJrZXI6IGZ1bmN0aW9uKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gZGFya2VyIDogTWF0aC5wb3coZGFya2VyLCBrKTtcbiAgICByZXR1cm4gbmV3IEN1YmVoZWxpeCh0aGlzLmgsIHRoaXMucywgdGhpcy5sICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgcmdiOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgaCA9IGlzTmFOKHRoaXMuaCkgPyAwIDogKHRoaXMuaCArIDEyMCkgKiBkZWcycmFkLFxuICAgICAgICBsID0gK3RoaXMubCxcbiAgICAgICAgYSA9IGlzTmFOKHRoaXMucykgPyAwIDogdGhpcy5zICogbCAqICgxIC0gbCksXG4gICAgICAgIGNvc2ggPSBNYXRoLmNvcyhoKSxcbiAgICAgICAgc2luaCA9IE1hdGguc2luKGgpO1xuICAgIHJldHVybiBuZXcgUmdiKFxuICAgICAgMjU1ICogKGwgKyBhICogKEEgKiBjb3NoICsgQiAqIHNpbmgpKSxcbiAgICAgIDI1NSAqIChsICsgYSAqIChDICogY29zaCArIEQgKiBzaW5oKSksXG4gICAgICAyNTUgKiAobCArIGEgKiAoRSAqIGNvc2gpKSxcbiAgICAgIHRoaXMub3BhY2l0eVxuICAgICk7XG4gIH1cbn0pKTtcblxuZXhwb3J0cy5jb2xvciA9IGNvbG9yO1xuZXhwb3J0cy5yZ2IgPSByZ2I7XG5leHBvcnRzLmhzbCA9IGhzbDtcbmV4cG9ydHMubGFiID0gbGFiO1xuZXhwb3J0cy5oY2wgPSBoY2w7XG5leHBvcnRzLmN1YmVoZWxpeCA9IGN1YmVoZWxpeDtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxufSkpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9kMy1jb2xvci9idWlsZC9kMy1jb2xvci5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHsgaCB9IGZyb20gXCJwcmVhY3RcIjtcbmltcG9ydCB7IFJlbmRlcmVyIH0gZnJvbSBcIi4vaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBoaWVyYXJjaHksIGNsdXN0ZXIgYXMgZDNjbHVzdGVyLCB0cmVlIGFzIGQzdHJlZSwgSGllcmFyY2h5UG9pbnROb2RlIH0gZnJvbSBcImQzLWhpZXJhcmNoeVwiO1xuaW1wb3J0IHsgU3RhdGVWaXNOb2RlIH0gZnJvbSBcIi4vc3RhdGVWaXNOb2RlXCI7IC8vIGhhcyBvciBpcyB1c2luZ1xuXG5leHBvcnQgY29uc3QgUkVOREVSRVJfUFJFU0VUUyA9IHtcbiAgXCJUcmVlXCI6IHsgbGF5b3V0Rm46IFRSRUVfTEFZT1VULCBzb3J0Tm9kZXNGbjogVE9QX1RPX0JPVFRPTV9TT1JULCBsYWJlbFJlbmRlckZuOiBTTEFOVEVEX1RFWFQsIGVkZ2VSZW5kZXJGbjogVFJFRV9FREdFIH0sXG4gIFwiQ2x1c3RlclwiOiB7IGxheW91dEZuOiBDTFVTVEVSX0xBWU9VVCwgc29ydE5vZGVzRm46IFRPUF9UT19CT1RUT01fU09SVCwgbGFiZWxSZW5kZXJGbjogU0xBTlRFRF9URVhULCBlZGdlUmVuZGVyRm46IFRSRUVfRURHRSB9LFxuICBcIlJhZGlhbFwiOiB7IGxheW91dEZuOiBSQURJQUxfTEFZT1VULCBzb3J0Tm9kZXNGbjogQk9UVE9NX1RPX1RPUF9TT1JULCBsYWJlbFJlbmRlckZuOiBSQURJQUxfVEVYVCwgZWRnZVJlbmRlckZuOiBSQURJQUxfRURHRSB9LFxufTtcblxuY29uc3QgdHJlZSA9IFJFTkRFUkVSX1BSRVNFVFMuVHJlZTtcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfUkVOREVSRVI6IFJlbmRlcmVyID0ge1xuICBiYXNlUmFkaXVzOiAxMCxcbiAgYmFzZUZvbnRTaXplOiAxMixcbiAgYmFzZVN0cm9rZVdpZHRoOiAyLFxuICBiYXNlTm9kZVN0cm9rZVdpZHRoOiAyLFxuICB6b29tOiAxLjAsXG4gIFxuICBsYXlvdXRGbjogdHJlZS5sYXlvdXRGbixcbiAgc29ydE5vZGVzRm46IHRyZWUuc29ydE5vZGVzRm4sXG4gIGxhYmVsUmVuZGVyRm46IHRyZWUubGFiZWxSZW5kZXJGbixcbiAgZWRnZVJlbmRlckZuOiB0cmVlLmVkZ2VSZW5kZXJGbixcbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIE5PREUgUkVOREVSIE9SREVSXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmV4cG9ydCBmdW5jdGlvbiBCT1RUT01fVE9fVE9QX1NPUlQgKGE6IFN0YXRlVmlzTm9kZSwgYjogU3RhdGVWaXNOb2RlKSB7XG4gIGxldCBiMnQgPSBiLmxheW91dFkgLSBhLmxheW91dFk7IC8vIGJvdHRvbSB0byB0b3BcbiAgaWYgKGIydCAhPT0gMCkgcmV0dXJuIGIydDtcbiAgbGV0IGwyciA9IGEubGF5b3V0WCAtIGIubGF5b3V0WDsgLy8gbGVmdCB0byByaWdodFxuICByZXR1cm4gbDJyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gVE9QX1RPX0JPVFRPTV9TT1JUIChhOiBTdGF0ZVZpc05vZGUsIGI6IFN0YXRlVmlzTm9kZSkge1xuICBsZXQgdDJiID0gYS5sYXlvdXRZIC0gYi5sYXlvdXRZOyAvLyB0b3AgdG8gYm90dG9tXG4gIGlmICh0MmIgIT09IDApIHJldHVybiB0MmI7XG4gIGxldCBsMnIgPSBhLmxheW91dFggLSBiLmxheW91dFg7IC8vIGxlZnQgdG8gcmlnaHRcbiAgcmV0dXJuIGwycjtcbn1cblxuXG5cblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gTEFZT1VUU1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5leHBvcnQgZnVuY3Rpb24gVFJFRV9MQVlPVVQocm9vdE5vZGU6IFN0YXRlVmlzTm9kZSkge1xuICBsZXQgcm9vdCA9IGhpZXJhcmNoeShyb290Tm9kZSk7XG4gIGxldCB0cmVlID0gZDN0cmVlPFN0YXRlVmlzTm9kZT4oKTtcbiAgcmV0dXJuIHVwZGF0ZU5vZGVzKHRyZWUocm9vdCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQ0xVU1RFUl9MQVlPVVQocm9vdE5vZGU6IFN0YXRlVmlzTm9kZSkge1xuICBsZXQgcm9vdCA9IGhpZXJhcmNoeShyb290Tm9kZSk7XG4gIGxldCB0cmVlID0gZDNjbHVzdGVyPFN0YXRlVmlzTm9kZT4oKTtcbiAgcmV0dXJuIHVwZGF0ZU5vZGVzKHRyZWUocm9vdCkpO1xufVxuXG4vKiogRm9yIFJBRElBTF9MQVlPVVQ6IHByb2plY3RzIHgveSBjb29yZHMgZnJvbSBhIGNsdXN0ZXIgbGF5b3V0IHRvIGNpcmN1bGFyIGxheW91dCAqL1xuZnVuY3Rpb24gcHJvamVjdCh4LCB5KSB7XG4gIGxldCBhbmdsZSA9ICh4IC0gOTApIC8gMTgwICogTWF0aC5QSSwgcmFkaXVzID0geTtcbiAgY29uc3QgQ0VOVEVSID0gMC41O1xuICByZXR1cm4geyB4OiBDRU5URVIgKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSksIHk6IENFTlRFUiArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUkFESUFMX0xBWU9VVChyb290Tm9kZTogU3RhdGVWaXNOb2RlKSB7XG4gIGxldCByb290ID0gaGllcmFyY2h5KHJvb3ROb2RlKTtcblxuICBsZXQgbGF5b3V0ID0gZDNjbHVzdGVyPFN0YXRlVmlzTm9kZT4oKVxuICAgICAgLnNpemUoWzM2MCwgMC40XSlcbiAgICAgIC5zZXBhcmF0aW9uKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiAoYS5wYXJlbnQgPT0gYi5wYXJlbnQgPyAxIDogMikgLyBhLmRlcHRoO1xuICAgICAgfSk7XG5cbiAgbGV0IG5vZGVzID0gbGF5b3V0KHJvb3QpO1xuXG4gIG5vZGVzLmVhY2goZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBsZXQgcHJvamVjdGVkID0gcHJvamVjdChub2RlLngsIG5vZGUueSk7XG4gICAgbGV0IHZpc05vZGU6IFN0YXRlVmlzTm9kZSA9IG5vZGUuZGF0YTtcbiAgICB2aXNOb2RlLmxheW91dFggPSBub2RlLng7XG4gICAgdmlzTm9kZS5sYXlvdXRZID0gbm9kZS55O1xuICAgIHZpc05vZGUueCA9IHByb2plY3RlZC54O1xuICAgIHZpc05vZGUueSA9IHByb2plY3RlZC55O1xuICB9KTtcbn1cblxuLyoqIE11dGF0ZXMgZWFjaCBTdGF0ZVZpc05vZGUgYnkgY29weWluZyB0aGUgbmV3IHgveSB2YWx1ZXMgZnJvbSB0aGUgZDMgSGllcmFyY2h5UG9pbnROb2RlIHN0cnVjdHVyZSAqL1xuZnVuY3Rpb24gdXBkYXRlTm9kZXMgKG5vZGVzOiBIaWVyYXJjaHlQb2ludE5vZGU8U3RhdGVWaXNOb2RlPikge1xuICBub2Rlcy5lYWNoKG5vZGUgPT4ge1xuICAgIG5vZGUuZGF0YS5sYXlvdXRYID0gbm9kZS5kYXRhLnggPSBub2RlLng7XG4gICAgbm9kZS5kYXRhLmxheW91dFkgPSBub2RlLmRhdGEueSA9IG5vZGUueTtcbiAgfSk7XG4gIHJldHVybiBub2Rlcztcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBTVEFURSBOQU1FIExBQkVMXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmV4cG9ydCBmdW5jdGlvbiBSQURJQUxfVEVYVCh4LCB5LCBub2RlOiBTdGF0ZVZpc05vZGUsIHJlbmRlcmVyOiBSZW5kZXJlcikge1xuICBsZXQgeyBiYXNlRm9udFNpemUsIHpvb20gfSA9IHJlbmRlcmVyO1xuICBsZXQgZm9udFNpemUgPSBiYXNlRm9udFNpemUgKiB6b29tO1xuXG4gIGxldCBzZWdtZW50cyA9IG5vZGUubmFtZS5zcGxpdChcIi5cIik7XG4gIGxldCBuYW1lID0gc2VnbWVudHMucG9wKCk7XG4gIGlmIChuYW1lID09ICcqKicpIG5hbWUgPSBzZWdtZW50cy5wb3AoKSArIFwiLioqXCI7XG5cbiAgbGV0IGFuZ2xlID0gbm9kZS5sYXlvdXRYIHx8IDA7XG5cbiAgbGV0IHRleHRBbmNob3I6IHN0cmluZyA9IChhbmdsZSA8IDE4MCA9PT0gISFub2RlLmNoaWxkcmVuKSA/IFwic3RhcnRcIiA6IFwiZW5kXCI7XG4gIGxldCByb3RhdGlvbiA9IChhbmdsZSA8IDE4MCA/IGFuZ2xlIC0gOTAgOiBhbmdsZSArIDkwKTtcbiAgbGV0IHRyYW5zbGF0aW9uID0gKHRleHRBbmNob3IgPT09IFwic3RhcnRcIiA/IDE1IDogLTE1KSAqIHpvb207XG5cbiAgbGV0IHRyYW5zZm9ybSA9IGByb3RhdGUoJHtyb3RhdGlvbn0pLHRyYW5zbGF0ZSgke3RyYW5zbGF0aW9ufSwgMClgO1xuXG4gIHJldHVybiAoXG4gICAgICA8dGV4dFxuICAgICAgICAgIGNsYXNzTmFtZT1cIm5hbWVcIlxuICAgICAgICAgIHRleHQtYW5jaG9yPXt0ZXh0QW5jaG9yfVxuICAgICAgICAgIHRyYW5zZm9ybT17dHJhbnNmb3JtfVxuICAgICAgICAgIGZvbnQtc2l6ZT17Zm9udFNpemV9XG4gICAgICA+IHtuYW1lfSA8L3RleHQ+XG4gIClcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gU0xBTlRFRF9URVhUKHgsIHksIG5vZGU6IFN0YXRlVmlzTm9kZSwgcmVuZGVyZXI6IFJlbmRlcmVyKSB7XG4gIGxldCB7IGJhc2VSYWRpdXMsIGJhc2VGb250U2l6ZSwgYmFzZVN0cm9rZVdpZHRoLCBiYXNlTm9kZVN0cm9rZVdpZHRoLCB6b29tIH0gPSByZW5kZXJlcjtcbiAgbGV0IHIgPSBiYXNlUmFkaXVzICogem9vbTtcbiAgbGV0IGZvbnRTaXplID0gYmFzZUZvbnRTaXplICogem9vbTtcbiAgbGV0IHNlZ21lbnRzID0gbm9kZS5uYW1lLnNwbGl0KFwiLlwiKTtcbiAgbGV0IG5hbWUgPSBzZWdtZW50cy5wb3AoKTtcbiAgaWYgKG5hbWUgPT0gJyoqJykgbmFtZSA9IHNlZ21lbnRzLnBvcCgpICsgXCIuKipcIjtcblxuICBsZXQgdHJhbnNmb3JtID0gYHJvdGF0ZSgtMTUpLHRyYW5zbGF0ZSgwLCAkey0xNSAqIHpvb219KWA7XG5cbiAgcmV0dXJuIChcbiAgICAgIDx0ZXh0XG4gICAgICAgICAgY2xhc3NOYW1lPVwibmFtZVwiXG4gICAgICAgICAgdGV4dC1hbmNob3I9XCJtaWRkbGVcIlxuICAgICAgICAgIHRyYW5zZm9ybT17dHJhbnNmb3JtfVxuICAgICAgICAgIGZvbnQtc2l6ZT17Zm9udFNpemV9XG4gICAgICA+IHtuYW1lfSA8L3RleHQ+XG4gIClcbn1cblxuXG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIEdSQVBIIEVER0VTXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qKiBTdHJhaWdodCBsaW5lICovXG5leHBvcnQgZnVuY3Rpb24gUkFESUFMX0VER0Uobm9kZTogU3RhdGVWaXNOb2RlLCByZW5kZXJlcjogUmVuZGVyZXIpIHtcbiAgbGV0IHN0cm9rZVdpZHRoID0gcmVuZGVyZXIuYmFzZVN0cm9rZVdpZHRoICogcmVuZGVyZXIuem9vbTtcblxuICBjb25zdCBtYWtlTGlua1BhdGggPSAobm9kZTogU3RhdGVWaXNOb2RlKSA9PiB7XG4gICAgbGV0IHMgPSB7IHg6IG5vZGUuYW5pbVgsIHk6IG5vZGUuYW5pbVkgfTsgLy8gc3RhdGV2aXNub2RlXG4gICAgbGV0IHAgPSB7IHg6IG5vZGUuX3BhcmVudC5hbmltWCwgeTogbm9kZS5fcGFyZW50LmFuaW1ZIH07IC8vIHBhcmVudFxuXG4gICAgcmV0dXJuIFwiTVwiICsgW3MueCwgcy55XVxuICAgICAgICAvLyArIFwiQ1wiICArIFtzLngsIChzLnkgKyBwLnkpIC8gMi41XVxuICAgICAgICAvLyArIFwiIFwiICArIFtwLngsIChzLnkgKyBwLnkpIC8gMi41XVxuICAgICAgICArIFwiIFwiICArIFtwLngsIHAueV07XG4gIH07XG5cbiAgcmV0dXJuIDxwYXRoIGQ9e21ha2VMaW5rUGF0aChub2RlKX0gc3Ryb2tlLXdpZHRoPXtzdHJva2VXaWR0aH0gY2xhc3NOYW1lPSdsaW5rJy8+XG59XG5cbi8qKiBCZXppZXIgY3VydmUgKi9cbmV4cG9ydCBmdW5jdGlvbiBUUkVFX0VER0Uobm9kZTogU3RhdGVWaXNOb2RlLCByZW5kZXJlcjogUmVuZGVyZXIpIHtcbiAgbGV0IHN0cm9rZVdpZHRoID0gcmVuZGVyZXIuYmFzZVN0cm9rZVdpZHRoICogcmVuZGVyZXIuem9vbTtcblxuICBjb25zdCBtYWtlTGlua1BhdGggPSAobm9kZTogU3RhdGVWaXNOb2RlKSA9PiB7XG4gICAgbGV0IHMgPSB7IHg6IG5vZGUuYW5pbVgsIHk6IG5vZGUuYW5pbVkgfTsgLy8gc3RhdGV2aXNub2RlXG4gICAgbGV0IHAgPSB7IHg6IG5vZGUuX3BhcmVudC5hbmltWCwgeTogbm9kZS5fcGFyZW50LmFuaW1ZIH07IC8vIHBhcmVudFxuICAgIGxldCB5QXZnID0gKHMueSArIHAueSkgLyAyO1xuICAgIHJldHVybiBgTSAke3MueH0gJHtzLnl9IEMgJHtzLnh9ICR7eUF2Z30sICR7cC54fSAke3lBdmd9LCAke3AueH0gJHtwLnl9YDtcbiAgfTtcblxuICByZXR1cm4gPHBhdGggZD17bWFrZUxpbmtQYXRoKG5vZGUpfSBzdHJva2Utd2lkdGg9e3N0cm9rZVdpZHRofSBjbGFzc05hbWU9J2xpbmsnLz5cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc3RhdGUvcmVuZGVyZXIudHN4IiwiLy8gaHR0cHM6Ly9kM2pzLm9yZy9kMy1oaWVyYXJjaHkvIFZlcnNpb24gMS4xLjQuIENvcHlyaWdodCAyMDE3IE1pa2UgQm9zdG9jay5cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cykgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDpcblx0KGZhY3RvcnkoKGdsb2JhbC5kMyA9IGdsb2JhbC5kMyB8fCB7fSkpKTtcbn0odGhpcywgKGZ1bmN0aW9uIChleHBvcnRzKSB7ICd1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gZGVmYXVsdFNlcGFyYXRpb24oYSwgYikge1xuICByZXR1cm4gYS5wYXJlbnQgPT09IGIucGFyZW50ID8gMSA6IDI7XG59XG5cbmZ1bmN0aW9uIG1lYW5YKGNoaWxkcmVuKSB7XG4gIHJldHVybiBjaGlsZHJlbi5yZWR1Y2UobWVhblhSZWR1Y2UsIDApIC8gY2hpbGRyZW4ubGVuZ3RoO1xufVxuXG5mdW5jdGlvbiBtZWFuWFJlZHVjZSh4LCBjKSB7XG4gIHJldHVybiB4ICsgYy54O1xufVxuXG5mdW5jdGlvbiBtYXhZKGNoaWxkcmVuKSB7XG4gIHJldHVybiAxICsgY2hpbGRyZW4ucmVkdWNlKG1heFlSZWR1Y2UsIDApO1xufVxuXG5mdW5jdGlvbiBtYXhZUmVkdWNlKHksIGMpIHtcbiAgcmV0dXJuIE1hdGgubWF4KHksIGMueSk7XG59XG5cbmZ1bmN0aW9uIGxlYWZMZWZ0KG5vZGUpIHtcbiAgdmFyIGNoaWxkcmVuO1xuICB3aGlsZSAoY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuKSBub2RlID0gY2hpbGRyZW5bMF07XG4gIHJldHVybiBub2RlO1xufVxuXG5mdW5jdGlvbiBsZWFmUmlnaHQobm9kZSkge1xuICB2YXIgY2hpbGRyZW47XG4gIHdoaWxlIChjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW4pIG5vZGUgPSBjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXTtcbiAgcmV0dXJuIG5vZGU7XG59XG5cbnZhciBjbHVzdGVyID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzZXBhcmF0aW9uID0gZGVmYXVsdFNlcGFyYXRpb24sXG4gICAgICBkeCA9IDEsXG4gICAgICBkeSA9IDEsXG4gICAgICBub2RlU2l6ZSA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGNsdXN0ZXIocm9vdCkge1xuICAgIHZhciBwcmV2aW91c05vZGUsXG4gICAgICAgIHggPSAwO1xuXG4gICAgLy8gRmlyc3Qgd2FsaywgY29tcHV0aW5nIHRoZSBpbml0aWFsIHggJiB5IHZhbHVlcy5cbiAgICByb290LmVhY2hBZnRlcihmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuO1xuICAgICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgIG5vZGUueCA9IG1lYW5YKGNoaWxkcmVuKTtcbiAgICAgICAgbm9kZS55ID0gbWF4WShjaGlsZHJlbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlLnggPSBwcmV2aW91c05vZGUgPyB4ICs9IHNlcGFyYXRpb24obm9kZSwgcHJldmlvdXNOb2RlKSA6IDA7XG4gICAgICAgIG5vZGUueSA9IDA7XG4gICAgICAgIHByZXZpb3VzTm9kZSA9IG5vZGU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgbGVmdCA9IGxlYWZMZWZ0KHJvb3QpLFxuICAgICAgICByaWdodCA9IGxlYWZSaWdodChyb290KSxcbiAgICAgICAgeDAgPSBsZWZ0LnggLSBzZXBhcmF0aW9uKGxlZnQsIHJpZ2h0KSAvIDIsXG4gICAgICAgIHgxID0gcmlnaHQueCArIHNlcGFyYXRpb24ocmlnaHQsIGxlZnQpIC8gMjtcblxuICAgIC8vIFNlY29uZCB3YWxrLCBub3JtYWxpemluZyB4ICYgeSB0byB0aGUgZGVzaXJlZCBzaXplLlxuICAgIHJldHVybiByb290LmVhY2hBZnRlcihub2RlU2l6ZSA/IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIG5vZGUueCA9IChub2RlLnggLSByb290LngpICogZHg7XG4gICAgICBub2RlLnkgPSAocm9vdC55IC0gbm9kZS55KSAqIGR5O1xuICAgIH0gOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICBub2RlLnggPSAobm9kZS54IC0geDApIC8gKHgxIC0geDApICogZHg7XG4gICAgICBub2RlLnkgPSAoMSAtIChyb290LnkgPyBub2RlLnkgLyByb290LnkgOiAxKSkgKiBkeTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsdXN0ZXIuc2VwYXJhdGlvbiA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChzZXBhcmF0aW9uID0geCwgY2x1c3RlcikgOiBzZXBhcmF0aW9uO1xuICB9O1xuXG4gIGNsdXN0ZXIuc2l6ZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChub2RlU2l6ZSA9IGZhbHNlLCBkeCA9ICt4WzBdLCBkeSA9ICt4WzFdLCBjbHVzdGVyKSA6IChub2RlU2l6ZSA/IG51bGwgOiBbZHgsIGR5XSk7XG4gIH07XG5cbiAgY2x1c3Rlci5ub2RlU2l6ZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChub2RlU2l6ZSA9IHRydWUsIGR4ID0gK3hbMF0sIGR5ID0gK3hbMV0sIGNsdXN0ZXIpIDogKG5vZGVTaXplID8gW2R4LCBkeV0gOiBudWxsKTtcbiAgfTtcblxuICByZXR1cm4gY2x1c3Rlcjtcbn07XG5cbmZ1bmN0aW9uIGNvdW50KG5vZGUpIHtcbiAgdmFyIHN1bSA9IDAsXG4gICAgICBjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW4sXG4gICAgICBpID0gY2hpbGRyZW4gJiYgY2hpbGRyZW4ubGVuZ3RoO1xuICBpZiAoIWkpIHN1bSA9IDE7XG4gIGVsc2Ugd2hpbGUgKC0taSA+PSAwKSBzdW0gKz0gY2hpbGRyZW5baV0udmFsdWU7XG4gIG5vZGUudmFsdWUgPSBzdW07XG59XG5cbnZhciBub2RlX2NvdW50ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmVhY2hBZnRlcihjb3VudCk7XG59O1xuXG52YXIgbm9kZV9lYWNoID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIG5vZGUgPSB0aGlzLCBjdXJyZW50LCBuZXh0ID0gW25vZGVdLCBjaGlsZHJlbiwgaSwgbjtcbiAgZG8ge1xuICAgIGN1cnJlbnQgPSBuZXh0LnJldmVyc2UoKSwgbmV4dCA9IFtdO1xuICAgIHdoaWxlIChub2RlID0gY3VycmVudC5wb3AoKSkge1xuICAgICAgY2FsbGJhY2sobm9kZSksIGNoaWxkcmVuID0gbm9kZS5jaGlsZHJlbjtcbiAgICAgIGlmIChjaGlsZHJlbikgZm9yIChpID0gMCwgbiA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgICBuZXh0LnB1c2goY2hpbGRyZW5baV0pO1xuICAgICAgfVxuICAgIH1cbiAgfSB3aGlsZSAobmV4dC5sZW5ndGgpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbnZhciBub2RlX2VhY2hCZWZvcmUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgbm9kZSA9IHRoaXMsIG5vZGVzID0gW25vZGVdLCBjaGlsZHJlbiwgaTtcbiAgd2hpbGUgKG5vZGUgPSBub2Rlcy5wb3AoKSkge1xuICAgIGNhbGxiYWNrKG5vZGUpLCBjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47XG4gICAgaWYgKGNoaWxkcmVuKSBmb3IgKGkgPSBjaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgbm9kZXMucHVzaChjaGlsZHJlbltpXSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxudmFyIG5vZGVfZWFjaEFmdGVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIG5vZGUgPSB0aGlzLCBub2RlcyA9IFtub2RlXSwgbmV4dCA9IFtdLCBjaGlsZHJlbiwgaSwgbjtcbiAgd2hpbGUgKG5vZGUgPSBub2Rlcy5wb3AoKSkge1xuICAgIG5leHQucHVzaChub2RlKSwgY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuO1xuICAgIGlmIChjaGlsZHJlbikgZm9yIChpID0gMCwgbiA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgbm9kZXMucHVzaChjaGlsZHJlbltpXSk7XG4gICAgfVxuICB9XG4gIHdoaWxlIChub2RlID0gbmV4dC5wb3AoKSkge1xuICAgIGNhbGxiYWNrKG5vZGUpO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxudmFyIG5vZGVfc3VtID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaEFmdGVyKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICB2YXIgc3VtID0gK3ZhbHVlKG5vZGUuZGF0YSkgfHwgMCxcbiAgICAgICAgY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuLFxuICAgICAgICBpID0gY2hpbGRyZW4gJiYgY2hpbGRyZW4ubGVuZ3RoO1xuICAgIHdoaWxlICgtLWkgPj0gMCkgc3VtICs9IGNoaWxkcmVuW2ldLnZhbHVlO1xuICAgIG5vZGUudmFsdWUgPSBzdW07XG4gIH0pO1xufTtcblxudmFyIG5vZGVfc29ydCA9IGZ1bmN0aW9uKGNvbXBhcmUpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaEJlZm9yZShmdW5jdGlvbihub2RlKSB7XG4gICAgaWYgKG5vZGUuY2hpbGRyZW4pIHtcbiAgICAgIG5vZGUuY2hpbGRyZW4uc29ydChjb21wYXJlKTtcbiAgICB9XG4gIH0pO1xufTtcblxudmFyIG5vZGVfcGF0aCA9IGZ1bmN0aW9uKGVuZCkge1xuICB2YXIgc3RhcnQgPSB0aGlzLFxuICAgICAgYW5jZXN0b3IgPSBsZWFzdENvbW1vbkFuY2VzdG9yKHN0YXJ0LCBlbmQpLFxuICAgICAgbm9kZXMgPSBbc3RhcnRdO1xuICB3aGlsZSAoc3RhcnQgIT09IGFuY2VzdG9yKSB7XG4gICAgc3RhcnQgPSBzdGFydC5wYXJlbnQ7XG4gICAgbm9kZXMucHVzaChzdGFydCk7XG4gIH1cbiAgdmFyIGsgPSBub2Rlcy5sZW5ndGg7XG4gIHdoaWxlIChlbmQgIT09IGFuY2VzdG9yKSB7XG4gICAgbm9kZXMuc3BsaWNlKGssIDAsIGVuZCk7XG4gICAgZW5kID0gZW5kLnBhcmVudDtcbiAgfVxuICByZXR1cm4gbm9kZXM7XG59O1xuXG5mdW5jdGlvbiBsZWFzdENvbW1vbkFuY2VzdG9yKGEsIGIpIHtcbiAgaWYgKGEgPT09IGIpIHJldHVybiBhO1xuICB2YXIgYU5vZGVzID0gYS5hbmNlc3RvcnMoKSxcbiAgICAgIGJOb2RlcyA9IGIuYW5jZXN0b3JzKCksXG4gICAgICBjID0gbnVsbDtcbiAgYSA9IGFOb2Rlcy5wb3AoKTtcbiAgYiA9IGJOb2Rlcy5wb3AoKTtcbiAgd2hpbGUgKGEgPT09IGIpIHtcbiAgICBjID0gYTtcbiAgICBhID0gYU5vZGVzLnBvcCgpO1xuICAgIGIgPSBiTm9kZXMucG9wKCk7XG4gIH1cbiAgcmV0dXJuIGM7XG59XG5cbnZhciBub2RlX2FuY2VzdG9ycyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgbm9kZSA9IHRoaXMsIG5vZGVzID0gW25vZGVdO1xuICB3aGlsZSAobm9kZSA9IG5vZGUucGFyZW50KSB7XG4gICAgbm9kZXMucHVzaChub2RlKTtcbiAgfVxuICByZXR1cm4gbm9kZXM7XG59O1xuXG52YXIgbm9kZV9kZXNjZW5kYW50cyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgbm9kZXMgPSBbXTtcbiAgdGhpcy5lYWNoKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICB9KTtcbiAgcmV0dXJuIG5vZGVzO1xufTtcblxudmFyIG5vZGVfbGVhdmVzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBsZWF2ZXMgPSBbXTtcbiAgdGhpcy5lYWNoQmVmb3JlKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICBpZiAoIW5vZGUuY2hpbGRyZW4pIHtcbiAgICAgIGxlYXZlcy5wdXNoKG5vZGUpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBsZWF2ZXM7XG59O1xuXG52YXIgbm9kZV9saW5rcyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcm9vdCA9IHRoaXMsIGxpbmtzID0gW107XG4gIHJvb3QuZWFjaChmdW5jdGlvbihub2RlKSB7XG4gICAgaWYgKG5vZGUgIT09IHJvb3QpIHsgLy8gRG9u4oCZdCBpbmNsdWRlIHRoZSByb2904oCZcyBwYXJlbnQsIGlmIGFueS5cbiAgICAgIGxpbmtzLnB1c2goe3NvdXJjZTogbm9kZS5wYXJlbnQsIHRhcmdldDogbm9kZX0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBsaW5rcztcbn07XG5cbmZ1bmN0aW9uIGhpZXJhcmNoeShkYXRhLCBjaGlsZHJlbikge1xuICB2YXIgcm9vdCA9IG5ldyBOb2RlKGRhdGEpLFxuICAgICAgdmFsdWVkID0gK2RhdGEudmFsdWUgJiYgKHJvb3QudmFsdWUgPSBkYXRhLnZhbHVlKSxcbiAgICAgIG5vZGUsXG4gICAgICBub2RlcyA9IFtyb290XSxcbiAgICAgIGNoaWxkLFxuICAgICAgY2hpbGRzLFxuICAgICAgaSxcbiAgICAgIG47XG5cbiAgaWYgKGNoaWxkcmVuID09IG51bGwpIGNoaWxkcmVuID0gZGVmYXVsdENoaWxkcmVuO1xuXG4gIHdoaWxlIChub2RlID0gbm9kZXMucG9wKCkpIHtcbiAgICBpZiAodmFsdWVkKSBub2RlLnZhbHVlID0gK25vZGUuZGF0YS52YWx1ZTtcbiAgICBpZiAoKGNoaWxkcyA9IGNoaWxkcmVuKG5vZGUuZGF0YSkpICYmIChuID0gY2hpbGRzLmxlbmd0aCkpIHtcbiAgICAgIG5vZGUuY2hpbGRyZW4gPSBuZXcgQXJyYXkobik7XG4gICAgICBmb3IgKGkgPSBuIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgbm9kZXMucHVzaChjaGlsZCA9IG5vZGUuY2hpbGRyZW5baV0gPSBuZXcgTm9kZShjaGlsZHNbaV0pKTtcbiAgICAgICAgY2hpbGQucGFyZW50ID0gbm9kZTtcbiAgICAgICAgY2hpbGQuZGVwdGggPSBub2RlLmRlcHRoICsgMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcm9vdC5lYWNoQmVmb3JlKGNvbXB1dGVIZWlnaHQpO1xufVxuXG5mdW5jdGlvbiBub2RlX2NvcHkoKSB7XG4gIHJldHVybiBoaWVyYXJjaHkodGhpcykuZWFjaEJlZm9yZShjb3B5RGF0YSk7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRDaGlsZHJlbihkKSB7XG4gIHJldHVybiBkLmNoaWxkcmVuO1xufVxuXG5mdW5jdGlvbiBjb3B5RGF0YShub2RlKSB7XG4gIG5vZGUuZGF0YSA9IG5vZGUuZGF0YS5kYXRhO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlSGVpZ2h0KG5vZGUpIHtcbiAgdmFyIGhlaWdodCA9IDA7XG4gIGRvIG5vZGUuaGVpZ2h0ID0gaGVpZ2h0O1xuICB3aGlsZSAoKG5vZGUgPSBub2RlLnBhcmVudCkgJiYgKG5vZGUuaGVpZ2h0IDwgKytoZWlnaHQpKTtcbn1cblxuZnVuY3Rpb24gTm9kZShkYXRhKSB7XG4gIHRoaXMuZGF0YSA9IGRhdGE7XG4gIHRoaXMuZGVwdGggPVxuICB0aGlzLmhlaWdodCA9IDA7XG4gIHRoaXMucGFyZW50ID0gbnVsbDtcbn1cblxuTm9kZS5wcm90b3R5cGUgPSBoaWVyYXJjaHkucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogTm9kZSxcbiAgY291bnQ6IG5vZGVfY291bnQsXG4gIGVhY2g6IG5vZGVfZWFjaCxcbiAgZWFjaEFmdGVyOiBub2RlX2VhY2hBZnRlcixcbiAgZWFjaEJlZm9yZTogbm9kZV9lYWNoQmVmb3JlLFxuICBzdW06IG5vZGVfc3VtLFxuICBzb3J0OiBub2RlX3NvcnQsXG4gIHBhdGg6IG5vZGVfcGF0aCxcbiAgYW5jZXN0b3JzOiBub2RlX2FuY2VzdG9ycyxcbiAgZGVzY2VuZGFudHM6IG5vZGVfZGVzY2VuZGFudHMsXG4gIGxlYXZlczogbm9kZV9sZWF2ZXMsXG4gIGxpbmtzOiBub2RlX2xpbmtzLFxuICBjb3B5OiBub2RlX2NvcHlcbn07XG5cbmZ1bmN0aW9uIE5vZGUkMih2YWx1ZSkge1xuICB0aGlzLl8gPSB2YWx1ZTtcbiAgdGhpcy5uZXh0ID0gbnVsbDtcbn1cblxudmFyIHNodWZmbGUgPSBmdW5jdGlvbihhcnJheSkge1xuICB2YXIgaSxcbiAgICAgIG4gPSAoYXJyYXkgPSBhcnJheS5zbGljZSgpKS5sZW5ndGgsXG4gICAgICBoZWFkID0gbnVsbCxcbiAgICAgIG5vZGUgPSBoZWFkO1xuXG4gIHdoaWxlIChuKSB7XG4gICAgdmFyIG5leHQgPSBuZXcgTm9kZSQyKGFycmF5W24gLSAxXSk7XG4gICAgaWYgKG5vZGUpIG5vZGUgPSBub2RlLm5leHQgPSBuZXh0O1xuICAgIGVsc2Ugbm9kZSA9IGhlYWQgPSBuZXh0O1xuICAgIGFycmF5W2ldID0gYXJyYXlbLS1uXTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaGVhZDogaGVhZCxcbiAgICB0YWlsOiBub2RlXG4gIH07XG59O1xuXG52YXIgZW5jbG9zZSA9IGZ1bmN0aW9uKGNpcmNsZXMpIHtcbiAgcmV0dXJuIGVuY2xvc2VOKHNodWZmbGUoY2lyY2xlcyksIFtdKTtcbn07XG5cbmZ1bmN0aW9uIGVuY2xvc2VzKGEsIGIpIHtcbiAgdmFyIGR4ID0gYi54IC0gYS54LFxuICAgICAgZHkgPSBiLnkgLSBhLnksXG4gICAgICBkciA9IGEuciAtIGIucjtcbiAgcmV0dXJuIGRyICogZHIgKyAxZS02ID4gZHggKiBkeCArIGR5ICogZHk7XG59XG5cbi8vIFJldHVybnMgdGhlIHNtYWxsZXN0IGNpcmNsZSB0aGF0IGNvbnRhaW5zIGNpcmNsZXMgTCBhbmQgaW50ZXJzZWN0cyBjaXJjbGVzIEIuXG5mdW5jdGlvbiBlbmNsb3NlTihMLCBCKSB7XG4gIHZhciBjaXJjbGUsXG4gICAgICBsMCA9IG51bGwsXG4gICAgICBsMSA9IEwuaGVhZCxcbiAgICAgIGwyLFxuICAgICAgcDE7XG5cbiAgc3dpdGNoIChCLmxlbmd0aCkge1xuICAgIGNhc2UgMTogY2lyY2xlID0gZW5jbG9zZTEoQlswXSk7IGJyZWFrO1xuICAgIGNhc2UgMjogY2lyY2xlID0gZW5jbG9zZTIoQlswXSwgQlsxXSk7IGJyZWFrO1xuICAgIGNhc2UgMzogY2lyY2xlID0gZW5jbG9zZTMoQlswXSwgQlsxXSwgQlsyXSk7IGJyZWFrO1xuICB9XG5cbiAgd2hpbGUgKGwxKSB7XG4gICAgcDEgPSBsMS5fLCBsMiA9IGwxLm5leHQ7XG4gICAgaWYgKCFjaXJjbGUgfHwgIWVuY2xvc2VzKGNpcmNsZSwgcDEpKSB7XG5cbiAgICAgIC8vIFRlbXBvcmFyaWx5IHRydW5jYXRlIEwgYmVmb3JlIGwxLlxuICAgICAgaWYgKGwwKSBMLnRhaWwgPSBsMCwgbDAubmV4dCA9IG51bGw7XG4gICAgICBlbHNlIEwuaGVhZCA9IEwudGFpbCA9IG51bGw7XG5cbiAgICAgIEIucHVzaChwMSk7XG4gICAgICBjaXJjbGUgPSBlbmNsb3NlTihMLCBCKTsgLy8gTm90ZTogcmVvcmRlcnMgTCFcbiAgICAgIEIucG9wKCk7XG5cbiAgICAgIC8vIE1vdmUgbDEgdG8gdGhlIGZyb250IG9mIEwgYW5kIHJlY29ubmVjdCB0aGUgdHJ1bmNhdGVkIGxpc3QgTC5cbiAgICAgIGlmIChMLmhlYWQpIGwxLm5leHQgPSBMLmhlYWQsIEwuaGVhZCA9IGwxO1xuICAgICAgZWxzZSBsMS5uZXh0ID0gbnVsbCwgTC5oZWFkID0gTC50YWlsID0gbDE7XG4gICAgICBsMCA9IEwudGFpbCwgbDAubmV4dCA9IGwyO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIGwwID0gbDE7XG4gICAgfVxuICAgIGwxID0gbDI7XG4gIH1cblxuICBMLnRhaWwgPSBsMDtcbiAgcmV0dXJuIGNpcmNsZTtcbn1cblxuZnVuY3Rpb24gZW5jbG9zZTEoYSkge1xuICByZXR1cm4ge1xuICAgIHg6IGEueCxcbiAgICB5OiBhLnksXG4gICAgcjogYS5yXG4gIH07XG59XG5cbmZ1bmN0aW9uIGVuY2xvc2UyKGEsIGIpIHtcbiAgdmFyIHgxID0gYS54LCB5MSA9IGEueSwgcjEgPSBhLnIsXG4gICAgICB4MiA9IGIueCwgeTIgPSBiLnksIHIyID0gYi5yLFxuICAgICAgeDIxID0geDIgLSB4MSwgeTIxID0geTIgLSB5MSwgcjIxID0gcjIgLSByMSxcbiAgICAgIGwgPSBNYXRoLnNxcnQoeDIxICogeDIxICsgeTIxICogeTIxKTtcbiAgcmV0dXJuIHtcbiAgICB4OiAoeDEgKyB4MiArIHgyMSAvIGwgKiByMjEpIC8gMixcbiAgICB5OiAoeTEgKyB5MiArIHkyMSAvIGwgKiByMjEpIC8gMixcbiAgICByOiAobCArIHIxICsgcjIpIC8gMlxuICB9O1xufVxuXG5mdW5jdGlvbiBlbmNsb3NlMyhhLCBiLCBjKSB7XG4gIHZhciB4MSA9IGEueCwgeTEgPSBhLnksIHIxID0gYS5yLFxuICAgICAgeDIgPSBiLngsIHkyID0gYi55LCByMiA9IGIucixcbiAgICAgIHgzID0gYy54LCB5MyA9IGMueSwgcjMgPSBjLnIsXG4gICAgICBhMiA9IDIgKiAoeDEgLSB4MiksXG4gICAgICBiMiA9IDIgKiAoeTEgLSB5MiksXG4gICAgICBjMiA9IDIgKiAocjIgLSByMSksXG4gICAgICBkMiA9IHgxICogeDEgKyB5MSAqIHkxIC0gcjEgKiByMSAtIHgyICogeDIgLSB5MiAqIHkyICsgcjIgKiByMixcbiAgICAgIGEzID0gMiAqICh4MSAtIHgzKSxcbiAgICAgIGIzID0gMiAqICh5MSAtIHkzKSxcbiAgICAgIGMzID0gMiAqIChyMyAtIHIxKSxcbiAgICAgIGQzID0geDEgKiB4MSArIHkxICogeTEgLSByMSAqIHIxIC0geDMgKiB4MyAtIHkzICogeTMgKyByMyAqIHIzLFxuICAgICAgYWIgPSBhMyAqIGIyIC0gYTIgKiBiMyxcbiAgICAgIHhhID0gKGIyICogZDMgLSBiMyAqIGQyKSAvIGFiIC0geDEsXG4gICAgICB4YiA9IChiMyAqIGMyIC0gYjIgKiBjMykgLyBhYixcbiAgICAgIHlhID0gKGEzICogZDIgLSBhMiAqIGQzKSAvIGFiIC0geTEsXG4gICAgICB5YiA9IChhMiAqIGMzIC0gYTMgKiBjMikgLyBhYixcbiAgICAgIEEgPSB4YiAqIHhiICsgeWIgKiB5YiAtIDEsXG4gICAgICBCID0gMiAqICh4YSAqIHhiICsgeWEgKiB5YiArIHIxKSxcbiAgICAgIEMgPSB4YSAqIHhhICsgeWEgKiB5YSAtIHIxICogcjEsXG4gICAgICByID0gKC1CIC0gTWF0aC5zcXJ0KEIgKiBCIC0gNCAqIEEgKiBDKSkgLyAoMiAqIEEpO1xuICByZXR1cm4ge1xuICAgIHg6IHhhICsgeGIgKiByICsgeDEsXG4gICAgeTogeWEgKyB5YiAqIHIgKyB5MSxcbiAgICByOiByXG4gIH07XG59XG5cbmZ1bmN0aW9uIHBsYWNlKGEsIGIsIGMpIHtcbiAgdmFyIGF4ID0gYS54LFxuICAgICAgYXkgPSBhLnksXG4gICAgICBkYSA9IGIuciArIGMucixcbiAgICAgIGRiID0gYS5yICsgYy5yLFxuICAgICAgZHggPSBiLnggLSBheCxcbiAgICAgIGR5ID0gYi55IC0gYXksXG4gICAgICBkYyA9IGR4ICogZHggKyBkeSAqIGR5O1xuICBpZiAoZGMpIHtcbiAgICB2YXIgeCA9IDAuNSArICgoZGIgKj0gZGIpIC0gKGRhICo9IGRhKSkgLyAoMiAqIGRjKSxcbiAgICAgICAgeSA9IE1hdGguc3FydChNYXRoLm1heCgwLCAyICogZGEgKiAoZGIgKyBkYykgLSAoZGIgLT0gZGMpICogZGIgLSBkYSAqIGRhKSkgLyAoMiAqIGRjKTtcbiAgICBjLnggPSBheCArIHggKiBkeCArIHkgKiBkeTtcbiAgICBjLnkgPSBheSArIHggKiBkeSAtIHkgKiBkeDtcbiAgfSBlbHNlIHtcbiAgICBjLnggPSBheCArIGRiO1xuICAgIGMueSA9IGF5O1xuICB9XG59XG5cbmZ1bmN0aW9uIGludGVyc2VjdHMoYSwgYikge1xuICB2YXIgZHggPSBiLnggLSBhLngsXG4gICAgICBkeSA9IGIueSAtIGEueSxcbiAgICAgIGRyID0gYS5yICsgYi5yO1xuICByZXR1cm4gZHIgKiBkciAtIDFlLTYgPiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cblxuZnVuY3Rpb24gZGlzdGFuY2UyKG5vZGUsIHgsIHkpIHtcbiAgdmFyIGEgPSBub2RlLl8sXG4gICAgICBiID0gbm9kZS5uZXh0Ll8sXG4gICAgICBhYiA9IGEuciArIGIucixcbiAgICAgIGR4ID0gKGEueCAqIGIuciArIGIueCAqIGEucikgLyBhYiAtIHgsXG4gICAgICBkeSA9IChhLnkgKiBiLnIgKyBiLnkgKiBhLnIpIC8gYWIgLSB5O1xuICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG59XG5cbmZ1bmN0aW9uIE5vZGUkMShjaXJjbGUpIHtcbiAgdGhpcy5fID0gY2lyY2xlO1xuICB0aGlzLm5leHQgPSBudWxsO1xuICB0aGlzLnByZXZpb3VzID0gbnVsbDtcbn1cblxuZnVuY3Rpb24gcGFja0VuY2xvc2UoY2lyY2xlcykge1xuICBpZiAoIShuID0gY2lyY2xlcy5sZW5ndGgpKSByZXR1cm4gMDtcblxuICB2YXIgYSwgYiwgYywgbjtcblxuICAvLyBQbGFjZSB0aGUgZmlyc3QgY2lyY2xlLlxuICBhID0gY2lyY2xlc1swXSwgYS54ID0gMCwgYS55ID0gMDtcbiAgaWYgKCEobiA+IDEpKSByZXR1cm4gYS5yO1xuXG4gIC8vIFBsYWNlIHRoZSBzZWNvbmQgY2lyY2xlLlxuICBiID0gY2lyY2xlc1sxXSwgYS54ID0gLWIuciwgYi54ID0gYS5yLCBiLnkgPSAwO1xuICBpZiAoIShuID4gMikpIHJldHVybiBhLnIgKyBiLnI7XG5cbiAgLy8gUGxhY2UgdGhlIHRoaXJkIGNpcmNsZS5cbiAgcGxhY2UoYiwgYSwgYyA9IGNpcmNsZXNbMl0pO1xuXG4gIC8vIEluaXRpYWxpemUgdGhlIHdlaWdodGVkIGNlbnRyb2lkLlxuICB2YXIgYWEgPSBhLnIgKiBhLnIsXG4gICAgICBiYSA9IGIuciAqIGIucixcbiAgICAgIGNhID0gYy5yICogYy5yLFxuICAgICAgb2EgPSBhYSArIGJhICsgY2EsXG4gICAgICBveCA9IGFhICogYS54ICsgYmEgKiBiLnggKyBjYSAqIGMueCxcbiAgICAgIG95ID0gYWEgKiBhLnkgKyBiYSAqIGIueSArIGNhICogYy55LFxuICAgICAgY3gsIGN5LCBpLCBqLCBrLCBzaiwgc2s7XG5cbiAgLy8gSW5pdGlhbGl6ZSB0aGUgZnJvbnQtY2hhaW4gdXNpbmcgdGhlIGZpcnN0IHRocmVlIGNpcmNsZXMgYSwgYiBhbmQgYy5cbiAgYSA9IG5ldyBOb2RlJDEoYSksIGIgPSBuZXcgTm9kZSQxKGIpLCBjID0gbmV3IE5vZGUkMShjKTtcbiAgYS5uZXh0ID0gYy5wcmV2aW91cyA9IGI7XG4gIGIubmV4dCA9IGEucHJldmlvdXMgPSBjO1xuICBjLm5leHQgPSBiLnByZXZpb3VzID0gYTtcblxuICAvLyBBdHRlbXB0IHRvIHBsYWNlIGVhY2ggcmVtYWluaW5nIGNpcmNsZeKAplxuICBwYWNrOiBmb3IgKGkgPSAzOyBpIDwgbjsgKytpKSB7XG4gICAgcGxhY2UoYS5fLCBiLl8sIGMgPSBjaXJjbGVzW2ldKSwgYyA9IG5ldyBOb2RlJDEoYyk7XG5cbiAgICAvLyBGaW5kIHRoZSBjbG9zZXN0IGludGVyc2VjdGluZyBjaXJjbGUgb24gdGhlIGZyb250LWNoYWluLCBpZiBhbnkuXG4gICAgLy8g4oCcQ2xvc2VuZXNz4oCdIGlzIGRldGVybWluZWQgYnkgbGluZWFyIGRpc3RhbmNlIGFsb25nIHRoZSBmcm9udC1jaGFpbi5cbiAgICAvLyDigJxBaGVhZOKAnSBvciDigJxiZWhpbmTigJ0gaXMgbGlrZXdpc2UgZGV0ZXJtaW5lZCBieSBsaW5lYXIgZGlzdGFuY2UuXG4gICAgaiA9IGIubmV4dCwgayA9IGEucHJldmlvdXMsIHNqID0gYi5fLnIsIHNrID0gYS5fLnI7XG4gICAgZG8ge1xuICAgICAgaWYgKHNqIDw9IHNrKSB7XG4gICAgICAgIGlmIChpbnRlcnNlY3RzKGouXywgYy5fKSkge1xuICAgICAgICAgIGIgPSBqLCBhLm5leHQgPSBiLCBiLnByZXZpb3VzID0gYSwgLS1pO1xuICAgICAgICAgIGNvbnRpbnVlIHBhY2s7XG4gICAgICAgIH1cbiAgICAgICAgc2ogKz0gai5fLnIsIGogPSBqLm5leHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaW50ZXJzZWN0cyhrLl8sIGMuXykpIHtcbiAgICAgICAgICBhID0gaywgYS5uZXh0ID0gYiwgYi5wcmV2aW91cyA9IGEsIC0taTtcbiAgICAgICAgICBjb250aW51ZSBwYWNrO1xuICAgICAgICB9XG4gICAgICAgIHNrICs9IGsuXy5yLCBrID0gay5wcmV2aW91cztcbiAgICAgIH1cbiAgICB9IHdoaWxlIChqICE9PSBrLm5leHQpO1xuXG4gICAgLy8gU3VjY2VzcyEgSW5zZXJ0IHRoZSBuZXcgY2lyY2xlIGMgYmV0d2VlbiBhIGFuZCBiLlxuICAgIGMucHJldmlvdXMgPSBhLCBjLm5leHQgPSBiLCBhLm5leHQgPSBiLnByZXZpb3VzID0gYiA9IGM7XG5cbiAgICAvLyBVcGRhdGUgdGhlIHdlaWdodGVkIGNlbnRyb2lkLlxuICAgIG9hICs9IGNhID0gYy5fLnIgKiBjLl8ucjtcbiAgICBveCArPSBjYSAqIGMuXy54O1xuICAgIG95ICs9IGNhICogYy5fLnk7XG5cbiAgICAvLyBDb21wdXRlIHRoZSBuZXcgY2xvc2VzdCBjaXJjbGUgcGFpciB0byB0aGUgY2VudHJvaWQuXG4gICAgYWEgPSBkaXN0YW5jZTIoYSwgY3ggPSBveCAvIG9hLCBjeSA9IG95IC8gb2EpO1xuICAgIHdoaWxlICgoYyA9IGMubmV4dCkgIT09IGIpIHtcbiAgICAgIGlmICgoY2EgPSBkaXN0YW5jZTIoYywgY3gsIGN5KSkgPCBhYSkge1xuICAgICAgICBhID0gYywgYWEgPSBjYTtcbiAgICAgIH1cbiAgICB9XG4gICAgYiA9IGEubmV4dDtcbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIGVuY2xvc2luZyBjaXJjbGUgb2YgdGhlIGZyb250IGNoYWluLlxuICBhID0gW2IuX10sIGMgPSBiOyB3aGlsZSAoKGMgPSBjLm5leHQpICE9PSBiKSBhLnB1c2goYy5fKTsgYyA9IGVuY2xvc2UoYSk7XG5cbiAgLy8gVHJhbnNsYXRlIHRoZSBjaXJjbGVzIHRvIHB1dCB0aGUgZW5jbG9zaW5nIGNpcmNsZSBhcm91bmQgdGhlIG9yaWdpbi5cbiAgZm9yIChpID0gMDsgaSA8IG47ICsraSkgYSA9IGNpcmNsZXNbaV0sIGEueCAtPSBjLngsIGEueSAtPSBjLnk7XG5cbiAgcmV0dXJuIGMucjtcbn1cblxudmFyIHNpYmxpbmdzID0gZnVuY3Rpb24oY2lyY2xlcykge1xuICBwYWNrRW5jbG9zZShjaXJjbGVzKTtcbiAgcmV0dXJuIGNpcmNsZXM7XG59O1xuXG5mdW5jdGlvbiBvcHRpb25hbChmKSB7XG4gIHJldHVybiBmID09IG51bGwgPyBudWxsIDogcmVxdWlyZWQoZik7XG59XG5cbmZ1bmN0aW9uIHJlcXVpcmVkKGYpIHtcbiAgaWYgKHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgcmV0dXJuIGY7XG59XG5cbmZ1bmN0aW9uIGNvbnN0YW50WmVybygpIHtcbiAgcmV0dXJuIDA7XG59XG5cbnZhciBjb25zdGFudCA9IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB4O1xuICB9O1xufTtcblxuZnVuY3Rpb24gZGVmYXVsdFJhZGl1cyhkKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoZC52YWx1ZSk7XG59XG5cbnZhciBpbmRleCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcmFkaXVzID0gbnVsbCxcbiAgICAgIGR4ID0gMSxcbiAgICAgIGR5ID0gMSxcbiAgICAgIHBhZGRpbmcgPSBjb25zdGFudFplcm87XG5cbiAgZnVuY3Rpb24gcGFjayhyb290KSB7XG4gICAgcm9vdC54ID0gZHggLyAyLCByb290LnkgPSBkeSAvIDI7XG4gICAgaWYgKHJhZGl1cykge1xuICAgICAgcm9vdC5lYWNoQmVmb3JlKHJhZGl1c0xlYWYocmFkaXVzKSlcbiAgICAgICAgICAuZWFjaEFmdGVyKHBhY2tDaGlsZHJlbihwYWRkaW5nLCAwLjUpKVxuICAgICAgICAgIC5lYWNoQmVmb3JlKHRyYW5zbGF0ZUNoaWxkKDEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcm9vdC5lYWNoQmVmb3JlKHJhZGl1c0xlYWYoZGVmYXVsdFJhZGl1cykpXG4gICAgICAgICAgLmVhY2hBZnRlcihwYWNrQ2hpbGRyZW4oY29uc3RhbnRaZXJvLCAxKSlcbiAgICAgICAgICAuZWFjaEFmdGVyKHBhY2tDaGlsZHJlbihwYWRkaW5nLCByb290LnIgLyBNYXRoLm1pbihkeCwgZHkpKSlcbiAgICAgICAgICAuZWFjaEJlZm9yZSh0cmFuc2xhdGVDaGlsZChNYXRoLm1pbihkeCwgZHkpIC8gKDIgKiByb290LnIpKSk7XG4gICAgfVxuICAgIHJldHVybiByb290O1xuICB9XG5cbiAgcGFjay5yYWRpdXMgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAocmFkaXVzID0gb3B0aW9uYWwoeCksIHBhY2spIDogcmFkaXVzO1xuICB9O1xuXG4gIHBhY2suc2l6ZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChkeCA9ICt4WzBdLCBkeSA9ICt4WzFdLCBwYWNrKSA6IFtkeCwgZHldO1xuICB9O1xuXG4gIHBhY2sucGFkZGluZyA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChwYWRkaW5nID0gdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIiA/IHggOiBjb25zdGFudCgreCksIHBhY2spIDogcGFkZGluZztcbiAgfTtcblxuICByZXR1cm4gcGFjaztcbn07XG5cbmZ1bmN0aW9uIHJhZGl1c0xlYWYocmFkaXVzKSB7XG4gIHJldHVybiBmdW5jdGlvbihub2RlKSB7XG4gICAgaWYgKCFub2RlLmNoaWxkcmVuKSB7XG4gICAgICBub2RlLnIgPSBNYXRoLm1heCgwLCArcmFkaXVzKG5vZGUpIHx8IDApO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFja0NoaWxkcmVuKHBhZGRpbmcsIGspIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICBpZiAoY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuKSB7XG4gICAgICB2YXIgY2hpbGRyZW4sXG4gICAgICAgICAgaSxcbiAgICAgICAgICBuID0gY2hpbGRyZW4ubGVuZ3RoLFxuICAgICAgICAgIHIgPSBwYWRkaW5nKG5vZGUpICogayB8fCAwLFxuICAgICAgICAgIGU7XG5cbiAgICAgIGlmIChyKSBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSBjaGlsZHJlbltpXS5yICs9IHI7XG4gICAgICBlID0gcGFja0VuY2xvc2UoY2hpbGRyZW4pO1xuICAgICAgaWYgKHIpIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIGNoaWxkcmVuW2ldLnIgLT0gcjtcbiAgICAgIG5vZGUuciA9IGUgKyByO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gdHJhbnNsYXRlQ2hpbGQoaykge1xuICByZXR1cm4gZnVuY3Rpb24obm9kZSkge1xuICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudDtcbiAgICBub2RlLnIgKj0gaztcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBub2RlLnggPSBwYXJlbnQueCArIGsgKiBub2RlLng7XG4gICAgICBub2RlLnkgPSBwYXJlbnQueSArIGsgKiBub2RlLnk7XG4gICAgfVxuICB9O1xufVxuXG52YXIgcm91bmROb2RlID0gZnVuY3Rpb24obm9kZSkge1xuICBub2RlLngwID0gTWF0aC5yb3VuZChub2RlLngwKTtcbiAgbm9kZS55MCA9IE1hdGgucm91bmQobm9kZS55MCk7XG4gIG5vZGUueDEgPSBNYXRoLnJvdW5kKG5vZGUueDEpO1xuICBub2RlLnkxID0gTWF0aC5yb3VuZChub2RlLnkxKTtcbn07XG5cbnZhciB0cmVlbWFwRGljZSA9IGZ1bmN0aW9uKHBhcmVudCwgeDAsIHkwLCB4MSwgeTEpIHtcbiAgdmFyIG5vZGVzID0gcGFyZW50LmNoaWxkcmVuLFxuICAgICAgbm9kZSxcbiAgICAgIGkgPSAtMSxcbiAgICAgIG4gPSBub2Rlcy5sZW5ndGgsXG4gICAgICBrID0gcGFyZW50LnZhbHVlICYmICh4MSAtIHgwKSAvIHBhcmVudC52YWx1ZTtcblxuICB3aGlsZSAoKytpIDwgbikge1xuICAgIG5vZGUgPSBub2Rlc1tpXSwgbm9kZS55MCA9IHkwLCBub2RlLnkxID0geTE7XG4gICAgbm9kZS54MCA9IHgwLCBub2RlLngxID0geDAgKz0gbm9kZS52YWx1ZSAqIGs7XG4gIH1cbn07XG5cbnZhciBwYXJ0aXRpb24gPSBmdW5jdGlvbigpIHtcbiAgdmFyIGR4ID0gMSxcbiAgICAgIGR5ID0gMSxcbiAgICAgIHBhZGRpbmcgPSAwLFxuICAgICAgcm91bmQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBwYXJ0aXRpb24ocm9vdCkge1xuICAgIHZhciBuID0gcm9vdC5oZWlnaHQgKyAxO1xuICAgIHJvb3QueDAgPVxuICAgIHJvb3QueTAgPSBwYWRkaW5nO1xuICAgIHJvb3QueDEgPSBkeDtcbiAgICByb290LnkxID0gZHkgLyBuO1xuICAgIHJvb3QuZWFjaEJlZm9yZShwb3NpdGlvbk5vZGUoZHksIG4pKTtcbiAgICBpZiAocm91bmQpIHJvb3QuZWFjaEJlZm9yZShyb3VuZE5vZGUpO1xuICAgIHJldHVybiByb290O1xuICB9XG5cbiAgZnVuY3Rpb24gcG9zaXRpb25Ob2RlKGR5LCBuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIGlmIChub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgIHRyZWVtYXBEaWNlKG5vZGUsIG5vZGUueDAsIGR5ICogKG5vZGUuZGVwdGggKyAxKSAvIG4sIG5vZGUueDEsIGR5ICogKG5vZGUuZGVwdGggKyAyKSAvIG4pO1xuICAgICAgfVxuICAgICAgdmFyIHgwID0gbm9kZS54MCxcbiAgICAgICAgICB5MCA9IG5vZGUueTAsXG4gICAgICAgICAgeDEgPSBub2RlLngxIC0gcGFkZGluZyxcbiAgICAgICAgICB5MSA9IG5vZGUueTEgLSBwYWRkaW5nO1xuICAgICAgaWYgKHgxIDwgeDApIHgwID0geDEgPSAoeDAgKyB4MSkgLyAyO1xuICAgICAgaWYgKHkxIDwgeTApIHkwID0geTEgPSAoeTAgKyB5MSkgLyAyO1xuICAgICAgbm9kZS54MCA9IHgwO1xuICAgICAgbm9kZS55MCA9IHkwO1xuICAgICAgbm9kZS54MSA9IHgxO1xuICAgICAgbm9kZS55MSA9IHkxO1xuICAgIH07XG4gIH1cblxuICBwYXJ0aXRpb24ucm91bmQgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAocm91bmQgPSAhIXgsIHBhcnRpdGlvbikgOiByb3VuZDtcbiAgfTtcblxuICBwYXJ0aXRpb24uc2l6ZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChkeCA9ICt4WzBdLCBkeSA9ICt4WzFdLCBwYXJ0aXRpb24pIDogW2R4LCBkeV07XG4gIH07XG5cbiAgcGFydGl0aW9uLnBhZGRpbmcgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAocGFkZGluZyA9ICt4LCBwYXJ0aXRpb24pIDogcGFkZGluZztcbiAgfTtcblxuICByZXR1cm4gcGFydGl0aW9uO1xufTtcblxudmFyIGtleVByZWZpeCA9IFwiJFwiO1xudmFyIHByZXJvb3QgPSB7ZGVwdGg6IC0xfTtcbnZhciBhbWJpZ3VvdXMgPSB7fTtcblxuZnVuY3Rpb24gZGVmYXVsdElkKGQpIHtcbiAgcmV0dXJuIGQuaWQ7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRQYXJlbnRJZChkKSB7XG4gIHJldHVybiBkLnBhcmVudElkO1xufVxuXG52YXIgc3RyYXRpZnkgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGlkID0gZGVmYXVsdElkLFxuICAgICAgcGFyZW50SWQgPSBkZWZhdWx0UGFyZW50SWQ7XG5cbiAgZnVuY3Rpb24gc3RyYXRpZnkoZGF0YSkge1xuICAgIHZhciBkLFxuICAgICAgICBpLFxuICAgICAgICBuID0gZGF0YS5sZW5ndGgsXG4gICAgICAgIHJvb3QsXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgbm9kZSxcbiAgICAgICAgbm9kZXMgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIG5vZGVJZCxcbiAgICAgICAgbm9kZUtleSxcbiAgICAgICAgbm9kZUJ5S2V5ID0ge307XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBkID0gZGF0YVtpXSwgbm9kZSA9IG5vZGVzW2ldID0gbmV3IE5vZGUoZCk7XG4gICAgICBpZiAoKG5vZGVJZCA9IGlkKGQsIGksIGRhdGEpKSAhPSBudWxsICYmIChub2RlSWQgKz0gXCJcIikpIHtcbiAgICAgICAgbm9kZUtleSA9IGtleVByZWZpeCArIChub2RlLmlkID0gbm9kZUlkKTtcbiAgICAgICAgbm9kZUJ5S2V5W25vZGVLZXldID0gbm9kZUtleSBpbiBub2RlQnlLZXkgPyBhbWJpZ3VvdXMgOiBub2RlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIG5vZGUgPSBub2Rlc1tpXSwgbm9kZUlkID0gcGFyZW50SWQoZGF0YVtpXSwgaSwgZGF0YSk7XG4gICAgICBpZiAobm9kZUlkID09IG51bGwgfHwgIShub2RlSWQgKz0gXCJcIikpIHtcbiAgICAgICAgaWYgKHJvb3QpIHRocm93IG5ldyBFcnJvcihcIm11bHRpcGxlIHJvb3RzXCIpO1xuICAgICAgICByb290ID0gbm9kZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmVudCA9IG5vZGVCeUtleVtrZXlQcmVmaXggKyBub2RlSWRdO1xuICAgICAgICBpZiAoIXBhcmVudCkgdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZzogXCIgKyBub2RlSWQpO1xuICAgICAgICBpZiAocGFyZW50ID09PSBhbWJpZ3VvdXMpIHRocm93IG5ldyBFcnJvcihcImFtYmlndW91czogXCIgKyBub2RlSWQpO1xuICAgICAgICBpZiAocGFyZW50LmNoaWxkcmVuKSBwYXJlbnQuY2hpbGRyZW4ucHVzaChub2RlKTtcbiAgICAgICAgZWxzZSBwYXJlbnQuY2hpbGRyZW4gPSBbbm9kZV07XG4gICAgICAgIG5vZGUucGFyZW50ID0gcGFyZW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghcm9vdCkgdGhyb3cgbmV3IEVycm9yKFwibm8gcm9vdFwiKTtcbiAgICByb290LnBhcmVudCA9IHByZXJvb3Q7XG4gICAgcm9vdC5lYWNoQmVmb3JlKGZ1bmN0aW9uKG5vZGUpIHsgbm9kZS5kZXB0aCA9IG5vZGUucGFyZW50LmRlcHRoICsgMTsgLS1uOyB9KS5lYWNoQmVmb3JlKGNvbXB1dGVIZWlnaHQpO1xuICAgIHJvb3QucGFyZW50ID0gbnVsbDtcbiAgICBpZiAobiA+IDApIHRocm93IG5ldyBFcnJvcihcImN5Y2xlXCIpO1xuXG4gICAgcmV0dXJuIHJvb3Q7XG4gIH1cblxuICBzdHJhdGlmeS5pZCA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChpZCA9IHJlcXVpcmVkKHgpLCBzdHJhdGlmeSkgOiBpZDtcbiAgfTtcblxuICBzdHJhdGlmeS5wYXJlbnRJZCA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChwYXJlbnRJZCA9IHJlcXVpcmVkKHgpLCBzdHJhdGlmeSkgOiBwYXJlbnRJZDtcbiAgfTtcblxuICByZXR1cm4gc3RyYXRpZnk7XG59O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2VwYXJhdGlvbiQxKGEsIGIpIHtcbiAgcmV0dXJuIGEucGFyZW50ID09PSBiLnBhcmVudCA/IDEgOiAyO1xufVxuXG4vLyBmdW5jdGlvbiByYWRpYWxTZXBhcmF0aW9uKGEsIGIpIHtcbi8vICAgcmV0dXJuIChhLnBhcmVudCA9PT0gYi5wYXJlbnQgPyAxIDogMikgLyBhLmRlcHRoO1xuLy8gfVxuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gdHJhdmVyc2UgdGhlIGxlZnQgY29udG91ciBvZiBhIHN1YnRyZWUgKG9yXG4vLyBzdWJmb3Jlc3QpLiBJdCByZXR1cm5zIHRoZSBzdWNjZXNzb3Igb2YgdiBvbiB0aGlzIGNvbnRvdXIuIFRoaXMgc3VjY2Vzc29yIGlzXG4vLyBlaXRoZXIgZ2l2ZW4gYnkgdGhlIGxlZnRtb3N0IGNoaWxkIG9mIHYgb3IgYnkgdGhlIHRocmVhZCBvZiB2LiBUaGUgZnVuY3Rpb25cbi8vIHJldHVybnMgbnVsbCBpZiBhbmQgb25seSBpZiB2IGlzIG9uIHRoZSBoaWdoZXN0IGxldmVsIG9mIGl0cyBzdWJ0cmVlLlxuZnVuY3Rpb24gbmV4dExlZnQodikge1xuICB2YXIgY2hpbGRyZW4gPSB2LmNoaWxkcmVuO1xuICByZXR1cm4gY2hpbGRyZW4gPyBjaGlsZHJlblswXSA6IHYudDtcbn1cblxuLy8gVGhpcyBmdW5jdGlvbiB3b3JrcyBhbmFsb2dvdXNseSB0byBuZXh0TGVmdC5cbmZ1bmN0aW9uIG5leHRSaWdodCh2KSB7XG4gIHZhciBjaGlsZHJlbiA9IHYuY2hpbGRyZW47XG4gIHJldHVybiBjaGlsZHJlbiA/IGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdIDogdi50O1xufVxuXG4vLyBTaGlmdHMgdGhlIGN1cnJlbnQgc3VidHJlZSByb290ZWQgYXQgdysuIFRoaXMgaXMgZG9uZSBieSBpbmNyZWFzaW5nXG4vLyBwcmVsaW0odyspIGFuZCBtb2QodyspIGJ5IHNoaWZ0LlxuZnVuY3Rpb24gbW92ZVN1YnRyZWUod20sIHdwLCBzaGlmdCkge1xuICB2YXIgY2hhbmdlID0gc2hpZnQgLyAod3AuaSAtIHdtLmkpO1xuICB3cC5jIC09IGNoYW5nZTtcbiAgd3AucyArPSBzaGlmdDtcbiAgd20uYyArPSBjaGFuZ2U7XG4gIHdwLnogKz0gc2hpZnQ7XG4gIHdwLm0gKz0gc2hpZnQ7XG59XG5cbi8vIEFsbCBvdGhlciBzaGlmdHMsIGFwcGxpZWQgdG8gdGhlIHNtYWxsZXIgc3VidHJlZXMgYmV0d2VlbiB3LSBhbmQgdyssIGFyZVxuLy8gcGVyZm9ybWVkIGJ5IHRoaXMgZnVuY3Rpb24uIFRvIHByZXBhcmUgdGhlIHNoaWZ0cywgd2UgaGF2ZSB0byBhZGp1c3Rcbi8vIGNoYW5nZSh3KyksIHNoaWZ0KHcrKSwgYW5kIGNoYW5nZSh3LSkuXG5mdW5jdGlvbiBleGVjdXRlU2hpZnRzKHYpIHtcbiAgdmFyIHNoaWZ0ID0gMCxcbiAgICAgIGNoYW5nZSA9IDAsXG4gICAgICBjaGlsZHJlbiA9IHYuY2hpbGRyZW4sXG4gICAgICBpID0gY2hpbGRyZW4ubGVuZ3RoLFxuICAgICAgdztcbiAgd2hpbGUgKC0taSA+PSAwKSB7XG4gICAgdyA9IGNoaWxkcmVuW2ldO1xuICAgIHcueiArPSBzaGlmdDtcbiAgICB3Lm0gKz0gc2hpZnQ7XG4gICAgc2hpZnQgKz0gdy5zICsgKGNoYW5nZSArPSB3LmMpO1xuICB9XG59XG5cbi8vIElmIHZpLeKAmXMgYW5jZXN0b3IgaXMgYSBzaWJsaW5nIG9mIHYsIHJldHVybnMgdmkt4oCZcyBhbmNlc3Rvci4gT3RoZXJ3aXNlLFxuLy8gcmV0dXJucyB0aGUgc3BlY2lmaWVkIChkZWZhdWx0KSBhbmNlc3Rvci5cbmZ1bmN0aW9uIG5leHRBbmNlc3Rvcih2aW0sIHYsIGFuY2VzdG9yKSB7XG4gIHJldHVybiB2aW0uYS5wYXJlbnQgPT09IHYucGFyZW50ID8gdmltLmEgOiBhbmNlc3Rvcjtcbn1cblxuZnVuY3Rpb24gVHJlZU5vZGUobm9kZSwgaSkge1xuICB0aGlzLl8gPSBub2RlO1xuICB0aGlzLnBhcmVudCA9IG51bGw7XG4gIHRoaXMuY2hpbGRyZW4gPSBudWxsO1xuICB0aGlzLkEgPSBudWxsOyAvLyBkZWZhdWx0IGFuY2VzdG9yXG4gIHRoaXMuYSA9IHRoaXM7IC8vIGFuY2VzdG9yXG4gIHRoaXMueiA9IDA7IC8vIHByZWxpbVxuICB0aGlzLm0gPSAwOyAvLyBtb2RcbiAgdGhpcy5jID0gMDsgLy8gY2hhbmdlXG4gIHRoaXMucyA9IDA7IC8vIHNoaWZ0XG4gIHRoaXMudCA9IG51bGw7IC8vIHRocmVhZFxuICB0aGlzLmkgPSBpOyAvLyBudW1iZXJcbn1cblxuVHJlZU5vZGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShOb2RlLnByb3RvdHlwZSk7XG5cbmZ1bmN0aW9uIHRyZWVSb290KHJvb3QpIHtcbiAgdmFyIHRyZWUgPSBuZXcgVHJlZU5vZGUocm9vdCwgMCksXG4gICAgICBub2RlLFxuICAgICAgbm9kZXMgPSBbdHJlZV0sXG4gICAgICBjaGlsZCxcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgaSxcbiAgICAgIG47XG5cbiAgd2hpbGUgKG5vZGUgPSBub2Rlcy5wb3AoKSkge1xuICAgIGlmIChjaGlsZHJlbiA9IG5vZGUuXy5jaGlsZHJlbikge1xuICAgICAgbm9kZS5jaGlsZHJlbiA9IG5ldyBBcnJheShuID0gY2hpbGRyZW4ubGVuZ3RoKTtcbiAgICAgIGZvciAoaSA9IG4gLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICBub2Rlcy5wdXNoKGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXSA9IG5ldyBUcmVlTm9kZShjaGlsZHJlbltpXSwgaSkpO1xuICAgICAgICBjaGlsZC5wYXJlbnQgPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gICh0cmVlLnBhcmVudCA9IG5ldyBUcmVlTm9kZShudWxsLCAwKSkuY2hpbGRyZW4gPSBbdHJlZV07XG4gIHJldHVybiB0cmVlO1xufVxuXG4vLyBOb2RlLWxpbmsgdHJlZSBkaWFncmFtIHVzaW5nIHRoZSBSZWluZ29sZC1UaWxmb3JkIFwidGlkeVwiIGFsZ29yaXRobVxudmFyIHRyZWUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHNlcGFyYXRpb24gPSBkZWZhdWx0U2VwYXJhdGlvbiQxLFxuICAgICAgZHggPSAxLFxuICAgICAgZHkgPSAxLFxuICAgICAgbm9kZVNpemUgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIHRyZWUocm9vdCkge1xuICAgIHZhciB0ID0gdHJlZVJvb3Qocm9vdCk7XG5cbiAgICAvLyBDb21wdXRlIHRoZSBsYXlvdXQgdXNpbmcgQnVjaGhlaW0gZXQgYWwu4oCZcyBhbGdvcml0aG0uXG4gICAgdC5lYWNoQWZ0ZXIoZmlyc3RXYWxrKSwgdC5wYXJlbnQubSA9IC10Lno7XG4gICAgdC5lYWNoQmVmb3JlKHNlY29uZFdhbGspO1xuXG4gICAgLy8gSWYgYSBmaXhlZCBub2RlIHNpemUgaXMgc3BlY2lmaWVkLCBzY2FsZSB4IGFuZCB5LlxuICAgIGlmIChub2RlU2l6ZSkgcm9vdC5lYWNoQmVmb3JlKHNpemVOb2RlKTtcblxuICAgIC8vIElmIGEgZml4ZWQgdHJlZSBzaXplIGlzIHNwZWNpZmllZCwgc2NhbGUgeCBhbmQgeSBiYXNlZCBvbiB0aGUgZXh0ZW50LlxuICAgIC8vIENvbXB1dGUgdGhlIGxlZnQtbW9zdCwgcmlnaHQtbW9zdCwgYW5kIGRlcHRoLW1vc3Qgbm9kZXMgZm9yIGV4dGVudHMuXG4gICAgZWxzZSB7XG4gICAgICB2YXIgbGVmdCA9IHJvb3QsXG4gICAgICAgICAgcmlnaHQgPSByb290LFxuICAgICAgICAgIGJvdHRvbSA9IHJvb3Q7XG4gICAgICByb290LmVhY2hCZWZvcmUoZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBpZiAobm9kZS54IDwgbGVmdC54KSBsZWZ0ID0gbm9kZTtcbiAgICAgICAgaWYgKG5vZGUueCA+IHJpZ2h0LngpIHJpZ2h0ID0gbm9kZTtcbiAgICAgICAgaWYgKG5vZGUuZGVwdGggPiBib3R0b20uZGVwdGgpIGJvdHRvbSA9IG5vZGU7XG4gICAgICB9KTtcbiAgICAgIHZhciBzID0gbGVmdCA9PT0gcmlnaHQgPyAxIDogc2VwYXJhdGlvbihsZWZ0LCByaWdodCkgLyAyLFxuICAgICAgICAgIHR4ID0gcyAtIGxlZnQueCxcbiAgICAgICAgICBreCA9IGR4IC8gKHJpZ2h0LnggKyBzICsgdHgpLFxuICAgICAgICAgIGt5ID0gZHkgLyAoYm90dG9tLmRlcHRoIHx8IDEpO1xuICAgICAgcm9vdC5lYWNoQmVmb3JlKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgbm9kZS54ID0gKG5vZGUueCArIHR4KSAqIGt4O1xuICAgICAgICBub2RlLnkgPSBub2RlLmRlcHRoICoga3k7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcm9vdDtcbiAgfVxuXG4gIC8vIENvbXB1dGVzIGEgcHJlbGltaW5hcnkgeC1jb29yZGluYXRlIGZvciB2LiBCZWZvcmUgdGhhdCwgRklSU1QgV0FMSyBpc1xuICAvLyBhcHBsaWVkIHJlY3Vyc2l2ZWx5IHRvIHRoZSBjaGlsZHJlbiBvZiB2LCBhcyB3ZWxsIGFzIHRoZSBmdW5jdGlvblxuICAvLyBBUFBPUlRJT04uIEFmdGVyIHNwYWNpbmcgb3V0IHRoZSBjaGlsZHJlbiBieSBjYWxsaW5nIEVYRUNVVEUgU0hJRlRTLCB0aGVcbiAgLy8gbm9kZSB2IGlzIHBsYWNlZCB0byB0aGUgbWlkcG9pbnQgb2YgaXRzIG91dGVybW9zdCBjaGlsZHJlbi5cbiAgZnVuY3Rpb24gZmlyc3RXYWxrKHYpIHtcbiAgICB2YXIgY2hpbGRyZW4gPSB2LmNoaWxkcmVuLFxuICAgICAgICBzaWJsaW5ncyA9IHYucGFyZW50LmNoaWxkcmVuLFxuICAgICAgICB3ID0gdi5pID8gc2libGluZ3Nbdi5pIC0gMV0gOiBudWxsO1xuICAgIGlmIChjaGlsZHJlbikge1xuICAgICAgZXhlY3V0ZVNoaWZ0cyh2KTtcbiAgICAgIHZhciBtaWRwb2ludCA9IChjaGlsZHJlblswXS56ICsgY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV0ueikgLyAyO1xuICAgICAgaWYgKHcpIHtcbiAgICAgICAgdi56ID0gdy56ICsgc2VwYXJhdGlvbih2Ll8sIHcuXyk7XG4gICAgICAgIHYubSA9IHYueiAtIG1pZHBvaW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdi56ID0gbWlkcG9pbnQ7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh3KSB7XG4gICAgICB2LnogPSB3LnogKyBzZXBhcmF0aW9uKHYuXywgdy5fKTtcbiAgICB9XG4gICAgdi5wYXJlbnQuQSA9IGFwcG9ydGlvbih2LCB3LCB2LnBhcmVudC5BIHx8IHNpYmxpbmdzWzBdKTtcbiAgfVxuXG4gIC8vIENvbXB1dGVzIGFsbCByZWFsIHgtY29vcmRpbmF0ZXMgYnkgc3VtbWluZyB1cCB0aGUgbW9kaWZpZXJzIHJlY3Vyc2l2ZWx5LlxuICBmdW5jdGlvbiBzZWNvbmRXYWxrKHYpIHtcbiAgICB2Ll8ueCA9IHYueiArIHYucGFyZW50Lm07XG4gICAgdi5tICs9IHYucGFyZW50Lm07XG4gIH1cblxuICAvLyBUaGUgY29yZSBvZiB0aGUgYWxnb3JpdGhtLiBIZXJlLCBhIG5ldyBzdWJ0cmVlIGlzIGNvbWJpbmVkIHdpdGggdGhlXG4gIC8vIHByZXZpb3VzIHN1YnRyZWVzLiBUaHJlYWRzIGFyZSB1c2VkIHRvIHRyYXZlcnNlIHRoZSBpbnNpZGUgYW5kIG91dHNpZGVcbiAgLy8gY29udG91cnMgb2YgdGhlIGxlZnQgYW5kIHJpZ2h0IHN1YnRyZWUgdXAgdG8gdGhlIGhpZ2hlc3QgY29tbW9uIGxldmVsLiBUaGVcbiAgLy8gdmVydGljZXMgdXNlZCBmb3IgdGhlIHRyYXZlcnNhbHMgYXJlIHZpKywgdmktLCB2by0sIGFuZCB2byssIHdoZXJlIHRoZVxuICAvLyBzdXBlcnNjcmlwdCBvIG1lYW5zIG91dHNpZGUgYW5kIGkgbWVhbnMgaW5zaWRlLCB0aGUgc3Vic2NyaXB0IC0gbWVhbnMgbGVmdFxuICAvLyBzdWJ0cmVlIGFuZCArIG1lYW5zIHJpZ2h0IHN1YnRyZWUuIEZvciBzdW1taW5nIHVwIHRoZSBtb2RpZmllcnMgYWxvbmcgdGhlXG4gIC8vIGNvbnRvdXIsIHdlIHVzZSByZXNwZWN0aXZlIHZhcmlhYmxlcyBzaSssIHNpLSwgc28tLCBhbmQgc28rLiBXaGVuZXZlciB0d29cbiAgLy8gbm9kZXMgb2YgdGhlIGluc2lkZSBjb250b3VycyBjb25mbGljdCwgd2UgY29tcHV0ZSB0aGUgbGVmdCBvbmUgb2YgdGhlXG4gIC8vIGdyZWF0ZXN0IHVuY29tbW9uIGFuY2VzdG9ycyB1c2luZyB0aGUgZnVuY3Rpb24gQU5DRVNUT1IgYW5kIGNhbGwgTU9WRVxuICAvLyBTVUJUUkVFIHRvIHNoaWZ0IHRoZSBzdWJ0cmVlIGFuZCBwcmVwYXJlIHRoZSBzaGlmdHMgb2Ygc21hbGxlciBzdWJ0cmVlcy5cbiAgLy8gRmluYWxseSwgd2UgYWRkIGEgbmV3IHRocmVhZCAoaWYgbmVjZXNzYXJ5KS5cbiAgZnVuY3Rpb24gYXBwb3J0aW9uKHYsIHcsIGFuY2VzdG9yKSB7XG4gICAgaWYgKHcpIHtcbiAgICAgIHZhciB2aXAgPSB2LFxuICAgICAgICAgIHZvcCA9IHYsXG4gICAgICAgICAgdmltID0gdyxcbiAgICAgICAgICB2b20gPSB2aXAucGFyZW50LmNoaWxkcmVuWzBdLFxuICAgICAgICAgIHNpcCA9IHZpcC5tLFxuICAgICAgICAgIHNvcCA9IHZvcC5tLFxuICAgICAgICAgIHNpbSA9IHZpbS5tLFxuICAgICAgICAgIHNvbSA9IHZvbS5tLFxuICAgICAgICAgIHNoaWZ0O1xuICAgICAgd2hpbGUgKHZpbSA9IG5leHRSaWdodCh2aW0pLCB2aXAgPSBuZXh0TGVmdCh2aXApLCB2aW0gJiYgdmlwKSB7XG4gICAgICAgIHZvbSA9IG5leHRMZWZ0KHZvbSk7XG4gICAgICAgIHZvcCA9IG5leHRSaWdodCh2b3ApO1xuICAgICAgICB2b3AuYSA9IHY7XG4gICAgICAgIHNoaWZ0ID0gdmltLnogKyBzaW0gLSB2aXAueiAtIHNpcCArIHNlcGFyYXRpb24odmltLl8sIHZpcC5fKTtcbiAgICAgICAgaWYgKHNoaWZ0ID4gMCkge1xuICAgICAgICAgIG1vdmVTdWJ0cmVlKG5leHRBbmNlc3Rvcih2aW0sIHYsIGFuY2VzdG9yKSwgdiwgc2hpZnQpO1xuICAgICAgICAgIHNpcCArPSBzaGlmdDtcbiAgICAgICAgICBzb3AgKz0gc2hpZnQ7XG4gICAgICAgIH1cbiAgICAgICAgc2ltICs9IHZpbS5tO1xuICAgICAgICBzaXAgKz0gdmlwLm07XG4gICAgICAgIHNvbSArPSB2b20ubTtcbiAgICAgICAgc29wICs9IHZvcC5tO1xuICAgICAgfVxuICAgICAgaWYgKHZpbSAmJiAhbmV4dFJpZ2h0KHZvcCkpIHtcbiAgICAgICAgdm9wLnQgPSB2aW07XG4gICAgICAgIHZvcC5tICs9IHNpbSAtIHNvcDtcbiAgICAgIH1cbiAgICAgIGlmICh2aXAgJiYgIW5leHRMZWZ0KHZvbSkpIHtcbiAgICAgICAgdm9tLnQgPSB2aXA7XG4gICAgICAgIHZvbS5tICs9IHNpcCAtIHNvbTtcbiAgICAgICAgYW5jZXN0b3IgPSB2O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYW5jZXN0b3I7XG4gIH1cblxuICBmdW5jdGlvbiBzaXplTm9kZShub2RlKSB7XG4gICAgbm9kZS54ICo9IGR4O1xuICAgIG5vZGUueSA9IG5vZGUuZGVwdGggKiBkeTtcbiAgfVxuXG4gIHRyZWUuc2VwYXJhdGlvbiA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChzZXBhcmF0aW9uID0geCwgdHJlZSkgOiBzZXBhcmF0aW9uO1xuICB9O1xuXG4gIHRyZWUuc2l6ZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChub2RlU2l6ZSA9IGZhbHNlLCBkeCA9ICt4WzBdLCBkeSA9ICt4WzFdLCB0cmVlKSA6IChub2RlU2l6ZSA/IG51bGwgOiBbZHgsIGR5XSk7XG4gIH07XG5cbiAgdHJlZS5ub2RlU2l6ZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChub2RlU2l6ZSA9IHRydWUsIGR4ID0gK3hbMF0sIGR5ID0gK3hbMV0sIHRyZWUpIDogKG5vZGVTaXplID8gW2R4LCBkeV0gOiBudWxsKTtcbiAgfTtcblxuICByZXR1cm4gdHJlZTtcbn07XG5cbnZhciB0cmVlbWFwU2xpY2UgPSBmdW5jdGlvbihwYXJlbnQsIHgwLCB5MCwgeDEsIHkxKSB7XG4gIHZhciBub2RlcyA9IHBhcmVudC5jaGlsZHJlbixcbiAgICAgIG5vZGUsXG4gICAgICBpID0gLTEsXG4gICAgICBuID0gbm9kZXMubGVuZ3RoLFxuICAgICAgayA9IHBhcmVudC52YWx1ZSAmJiAoeTEgLSB5MCkgLyBwYXJlbnQudmFsdWU7XG5cbiAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICBub2RlID0gbm9kZXNbaV0sIG5vZGUueDAgPSB4MCwgbm9kZS54MSA9IHgxO1xuICAgIG5vZGUueTAgPSB5MCwgbm9kZS55MSA9IHkwICs9IG5vZGUudmFsdWUgKiBrO1xuICB9XG59O1xuXG52YXIgcGhpID0gKDEgKyBNYXRoLnNxcnQoNSkpIC8gMjtcblxuZnVuY3Rpb24gc3F1YXJpZnlSYXRpbyhyYXRpbywgcGFyZW50LCB4MCwgeTAsIHgxLCB5MSkge1xuICB2YXIgcm93cyA9IFtdLFxuICAgICAgbm9kZXMgPSBwYXJlbnQuY2hpbGRyZW4sXG4gICAgICByb3csXG4gICAgICBub2RlVmFsdWUsXG4gICAgICBpMCA9IDAsXG4gICAgICBpMSA9IDAsXG4gICAgICBuID0gbm9kZXMubGVuZ3RoLFxuICAgICAgZHgsIGR5LFxuICAgICAgdmFsdWUgPSBwYXJlbnQudmFsdWUsXG4gICAgICBzdW1WYWx1ZSxcbiAgICAgIG1pblZhbHVlLFxuICAgICAgbWF4VmFsdWUsXG4gICAgICBuZXdSYXRpbyxcbiAgICAgIG1pblJhdGlvLFxuICAgICAgYWxwaGEsXG4gICAgICBiZXRhO1xuXG4gIHdoaWxlIChpMCA8IG4pIHtcbiAgICBkeCA9IHgxIC0geDAsIGR5ID0geTEgLSB5MDtcblxuICAgIC8vIEZpbmQgdGhlIG5leHQgbm9uLWVtcHR5IG5vZGUuXG4gICAgZG8gc3VtVmFsdWUgPSBub2Rlc1tpMSsrXS52YWx1ZTsgd2hpbGUgKCFzdW1WYWx1ZSAmJiBpMSA8IG4pO1xuICAgIG1pblZhbHVlID0gbWF4VmFsdWUgPSBzdW1WYWx1ZTtcbiAgICBhbHBoYSA9IE1hdGgubWF4KGR5IC8gZHgsIGR4IC8gZHkpIC8gKHZhbHVlICogcmF0aW8pO1xuICAgIGJldGEgPSBzdW1WYWx1ZSAqIHN1bVZhbHVlICogYWxwaGE7XG4gICAgbWluUmF0aW8gPSBNYXRoLm1heChtYXhWYWx1ZSAvIGJldGEsIGJldGEgLyBtaW5WYWx1ZSk7XG5cbiAgICAvLyBLZWVwIGFkZGluZyBub2RlcyB3aGlsZSB0aGUgYXNwZWN0IHJhdGlvIG1haW50YWlucyBvciBpbXByb3Zlcy5cbiAgICBmb3IgKDsgaTEgPCBuOyArK2kxKSB7XG4gICAgICBzdW1WYWx1ZSArPSBub2RlVmFsdWUgPSBub2Rlc1tpMV0udmFsdWU7XG4gICAgICBpZiAobm9kZVZhbHVlIDwgbWluVmFsdWUpIG1pblZhbHVlID0gbm9kZVZhbHVlO1xuICAgICAgaWYgKG5vZGVWYWx1ZSA+IG1heFZhbHVlKSBtYXhWYWx1ZSA9IG5vZGVWYWx1ZTtcbiAgICAgIGJldGEgPSBzdW1WYWx1ZSAqIHN1bVZhbHVlICogYWxwaGE7XG4gICAgICBuZXdSYXRpbyA9IE1hdGgubWF4KG1heFZhbHVlIC8gYmV0YSwgYmV0YSAvIG1pblZhbHVlKTtcbiAgICAgIGlmIChuZXdSYXRpbyA+IG1pblJhdGlvKSB7IHN1bVZhbHVlIC09IG5vZGVWYWx1ZTsgYnJlYWs7IH1cbiAgICAgIG1pblJhdGlvID0gbmV3UmF0aW87XG4gICAgfVxuXG4gICAgLy8gUG9zaXRpb24gYW5kIHJlY29yZCB0aGUgcm93IG9yaWVudGF0aW9uLlxuICAgIHJvd3MucHVzaChyb3cgPSB7dmFsdWU6IHN1bVZhbHVlLCBkaWNlOiBkeCA8IGR5LCBjaGlsZHJlbjogbm9kZXMuc2xpY2UoaTAsIGkxKX0pO1xuICAgIGlmIChyb3cuZGljZSkgdHJlZW1hcERpY2Uocm93LCB4MCwgeTAsIHgxLCB2YWx1ZSA/IHkwICs9IGR5ICogc3VtVmFsdWUgLyB2YWx1ZSA6IHkxKTtcbiAgICBlbHNlIHRyZWVtYXBTbGljZShyb3csIHgwLCB5MCwgdmFsdWUgPyB4MCArPSBkeCAqIHN1bVZhbHVlIC8gdmFsdWUgOiB4MSwgeTEpO1xuICAgIHZhbHVlIC09IHN1bVZhbHVlLCBpMCA9IGkxO1xuICB9XG5cbiAgcmV0dXJuIHJvd3M7XG59XG5cbnZhciBzcXVhcmlmeSA9ICgoZnVuY3Rpb24gY3VzdG9tKHJhdGlvKSB7XG5cbiAgZnVuY3Rpb24gc3F1YXJpZnkocGFyZW50LCB4MCwgeTAsIHgxLCB5MSkge1xuICAgIHNxdWFyaWZ5UmF0aW8ocmF0aW8sIHBhcmVudCwgeDAsIHkwLCB4MSwgeTEpO1xuICB9XG5cbiAgc3F1YXJpZnkucmF0aW8gPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGN1c3RvbSgoeCA9ICt4KSA+IDEgPyB4IDogMSk7XG4gIH07XG5cbiAgcmV0dXJuIHNxdWFyaWZ5O1xufSkpKHBoaSk7XG5cbnZhciBpbmRleCQxID0gZnVuY3Rpb24oKSB7XG4gIHZhciB0aWxlID0gc3F1YXJpZnksXG4gICAgICByb3VuZCA9IGZhbHNlLFxuICAgICAgZHggPSAxLFxuICAgICAgZHkgPSAxLFxuICAgICAgcGFkZGluZ1N0YWNrID0gWzBdLFxuICAgICAgcGFkZGluZ0lubmVyID0gY29uc3RhbnRaZXJvLFxuICAgICAgcGFkZGluZ1RvcCA9IGNvbnN0YW50WmVybyxcbiAgICAgIHBhZGRpbmdSaWdodCA9IGNvbnN0YW50WmVybyxcbiAgICAgIHBhZGRpbmdCb3R0b20gPSBjb25zdGFudFplcm8sXG4gICAgICBwYWRkaW5nTGVmdCA9IGNvbnN0YW50WmVybztcblxuICBmdW5jdGlvbiB0cmVlbWFwKHJvb3QpIHtcbiAgICByb290LngwID1cbiAgICByb290LnkwID0gMDtcbiAgICByb290LngxID0gZHg7XG4gICAgcm9vdC55MSA9IGR5O1xuICAgIHJvb3QuZWFjaEJlZm9yZShwb3NpdGlvbk5vZGUpO1xuICAgIHBhZGRpbmdTdGFjayA9IFswXTtcbiAgICBpZiAocm91bmQpIHJvb3QuZWFjaEJlZm9yZShyb3VuZE5vZGUpO1xuICAgIHJldHVybiByb290O1xuICB9XG5cbiAgZnVuY3Rpb24gcG9zaXRpb25Ob2RlKG5vZGUpIHtcbiAgICB2YXIgcCA9IHBhZGRpbmdTdGFja1tub2RlLmRlcHRoXSxcbiAgICAgICAgeDAgPSBub2RlLngwICsgcCxcbiAgICAgICAgeTAgPSBub2RlLnkwICsgcCxcbiAgICAgICAgeDEgPSBub2RlLngxIC0gcCxcbiAgICAgICAgeTEgPSBub2RlLnkxIC0gcDtcbiAgICBpZiAoeDEgPCB4MCkgeDAgPSB4MSA9ICh4MCArIHgxKSAvIDI7XG4gICAgaWYgKHkxIDwgeTApIHkwID0geTEgPSAoeTAgKyB5MSkgLyAyO1xuICAgIG5vZGUueDAgPSB4MDtcbiAgICBub2RlLnkwID0geTA7XG4gICAgbm9kZS54MSA9IHgxO1xuICAgIG5vZGUueTEgPSB5MTtcbiAgICBpZiAobm9kZS5jaGlsZHJlbikge1xuICAgICAgcCA9IHBhZGRpbmdTdGFja1tub2RlLmRlcHRoICsgMV0gPSBwYWRkaW5nSW5uZXIobm9kZSkgLyAyO1xuICAgICAgeDAgKz0gcGFkZGluZ0xlZnQobm9kZSkgLSBwO1xuICAgICAgeTAgKz0gcGFkZGluZ1RvcChub2RlKSAtIHA7XG4gICAgICB4MSAtPSBwYWRkaW5nUmlnaHQobm9kZSkgLSBwO1xuICAgICAgeTEgLT0gcGFkZGluZ0JvdHRvbShub2RlKSAtIHA7XG4gICAgICBpZiAoeDEgPCB4MCkgeDAgPSB4MSA9ICh4MCArIHgxKSAvIDI7XG4gICAgICBpZiAoeTEgPCB5MCkgeTAgPSB5MSA9ICh5MCArIHkxKSAvIDI7XG4gICAgICB0aWxlKG5vZGUsIHgwLCB5MCwgeDEsIHkxKTtcbiAgICB9XG4gIH1cblxuICB0cmVlbWFwLnJvdW5kID0gZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHJvdW5kID0gISF4LCB0cmVlbWFwKSA6IHJvdW5kO1xuICB9O1xuXG4gIHRyZWVtYXAuc2l6ZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChkeCA9ICt4WzBdLCBkeSA9ICt4WzFdLCB0cmVlbWFwKSA6IFtkeCwgZHldO1xuICB9O1xuXG4gIHRyZWVtYXAudGlsZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/ICh0aWxlID0gcmVxdWlyZWQoeCksIHRyZWVtYXApIDogdGlsZTtcbiAgfTtcblxuICB0cmVlbWFwLnBhZGRpbmcgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyB0cmVlbWFwLnBhZGRpbmdJbm5lcih4KS5wYWRkaW5nT3V0ZXIoeCkgOiB0cmVlbWFwLnBhZGRpbmdJbm5lcigpO1xuICB9O1xuXG4gIHRyZWVtYXAucGFkZGluZ0lubmVyID0gZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHBhZGRpbmdJbm5lciA9IHR5cGVvZiB4ID09PSBcImZ1bmN0aW9uXCIgPyB4IDogY29uc3RhbnQoK3gpLCB0cmVlbWFwKSA6IHBhZGRpbmdJbm5lcjtcbiAgfTtcblxuICB0cmVlbWFwLnBhZGRpbmdPdXRlciA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRyZWVtYXAucGFkZGluZ1RvcCh4KS5wYWRkaW5nUmlnaHQoeCkucGFkZGluZ0JvdHRvbSh4KS5wYWRkaW5nTGVmdCh4KSA6IHRyZWVtYXAucGFkZGluZ1RvcCgpO1xuICB9O1xuXG4gIHRyZWVtYXAucGFkZGluZ1RvcCA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChwYWRkaW5nVG9wID0gdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIiA/IHggOiBjb25zdGFudCgreCksIHRyZWVtYXApIDogcGFkZGluZ1RvcDtcbiAgfTtcblxuICB0cmVlbWFwLnBhZGRpbmdSaWdodCA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChwYWRkaW5nUmlnaHQgPSB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiID8geCA6IGNvbnN0YW50KCt4KSwgdHJlZW1hcCkgOiBwYWRkaW5nUmlnaHQ7XG4gIH07XG5cbiAgdHJlZW1hcC5wYWRkaW5nQm90dG9tID0gZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHBhZGRpbmdCb3R0b20gPSB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiID8geCA6IGNvbnN0YW50KCt4KSwgdHJlZW1hcCkgOiBwYWRkaW5nQm90dG9tO1xuICB9O1xuXG4gIHRyZWVtYXAucGFkZGluZ0xlZnQgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAocGFkZGluZ0xlZnQgPSB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiID8geCA6IGNvbnN0YW50KCt4KSwgdHJlZW1hcCkgOiBwYWRkaW5nTGVmdDtcbiAgfTtcblxuICByZXR1cm4gdHJlZW1hcDtcbn07XG5cbnZhciBiaW5hcnkgPSBmdW5jdGlvbihwYXJlbnQsIHgwLCB5MCwgeDEsIHkxKSB7XG4gIHZhciBub2RlcyA9IHBhcmVudC5jaGlsZHJlbixcbiAgICAgIGksIG4gPSBub2Rlcy5sZW5ndGgsXG4gICAgICBzdW0sIHN1bXMgPSBuZXcgQXJyYXkobiArIDEpO1xuXG4gIGZvciAoc3Vtc1swXSA9IHN1bSA9IGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgc3Vtc1tpICsgMV0gPSBzdW0gKz0gbm9kZXNbaV0udmFsdWU7XG4gIH1cblxuICBwYXJ0aXRpb24oMCwgbiwgcGFyZW50LnZhbHVlLCB4MCwgeTAsIHgxLCB5MSk7XG5cbiAgZnVuY3Rpb24gcGFydGl0aW9uKGksIGosIHZhbHVlLCB4MCwgeTAsIHgxLCB5MSkge1xuICAgIGlmIChpID49IGogLSAxKSB7XG4gICAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgbm9kZS54MCA9IHgwLCBub2RlLnkwID0geTA7XG4gICAgICBub2RlLngxID0geDEsIG5vZGUueTEgPSB5MTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdmFsdWVPZmZzZXQgPSBzdW1zW2ldLFxuICAgICAgICB2YWx1ZVRhcmdldCA9ICh2YWx1ZSAvIDIpICsgdmFsdWVPZmZzZXQsXG4gICAgICAgIGsgPSBpICsgMSxcbiAgICAgICAgaGkgPSBqIC0gMTtcblxuICAgIHdoaWxlIChrIDwgaGkpIHtcbiAgICAgIHZhciBtaWQgPSBrICsgaGkgPj4+IDE7XG4gICAgICBpZiAoc3Vtc1ttaWRdIDwgdmFsdWVUYXJnZXQpIGsgPSBtaWQgKyAxO1xuICAgICAgZWxzZSBoaSA9IG1pZDtcbiAgICB9XG5cbiAgICBpZiAoKHZhbHVlVGFyZ2V0IC0gc3Vtc1trIC0gMV0pIDwgKHN1bXNba10gLSB2YWx1ZVRhcmdldCkgJiYgaSArIDEgPCBrKSAtLWs7XG5cbiAgICB2YXIgdmFsdWVMZWZ0ID0gc3Vtc1trXSAtIHZhbHVlT2Zmc2V0LFxuICAgICAgICB2YWx1ZVJpZ2h0ID0gdmFsdWUgLSB2YWx1ZUxlZnQ7XG5cbiAgICBpZiAoKHgxIC0geDApID4gKHkxIC0geTApKSB7XG4gICAgICB2YXIgeGsgPSAoeDAgKiB2YWx1ZVJpZ2h0ICsgeDEgKiB2YWx1ZUxlZnQpIC8gdmFsdWU7XG4gICAgICBwYXJ0aXRpb24oaSwgaywgdmFsdWVMZWZ0LCB4MCwgeTAsIHhrLCB5MSk7XG4gICAgICBwYXJ0aXRpb24oaywgaiwgdmFsdWVSaWdodCwgeGssIHkwLCB4MSwgeTEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgeWsgPSAoeTAgKiB2YWx1ZVJpZ2h0ICsgeTEgKiB2YWx1ZUxlZnQpIC8gdmFsdWU7XG4gICAgICBwYXJ0aXRpb24oaSwgaywgdmFsdWVMZWZ0LCB4MCwgeTAsIHgxLCB5ayk7XG4gICAgICBwYXJ0aXRpb24oaywgaiwgdmFsdWVSaWdodCwgeDAsIHlrLCB4MSwgeTEpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHNsaWNlRGljZSA9IGZ1bmN0aW9uKHBhcmVudCwgeDAsIHkwLCB4MSwgeTEpIHtcbiAgKHBhcmVudC5kZXB0aCAmIDEgPyB0cmVlbWFwU2xpY2UgOiB0cmVlbWFwRGljZSkocGFyZW50LCB4MCwgeTAsIHgxLCB5MSk7XG59O1xuXG52YXIgcmVzcXVhcmlmeSA9ICgoZnVuY3Rpb24gY3VzdG9tKHJhdGlvKSB7XG5cbiAgZnVuY3Rpb24gcmVzcXVhcmlmeShwYXJlbnQsIHgwLCB5MCwgeDEsIHkxKSB7XG4gICAgaWYgKChyb3dzID0gcGFyZW50Ll9zcXVhcmlmeSkgJiYgKHJvd3MucmF0aW8gPT09IHJhdGlvKSkge1xuICAgICAgdmFyIHJvd3MsXG4gICAgICAgICAgcm93LFxuICAgICAgICAgIG5vZGVzLFxuICAgICAgICAgIGksXG4gICAgICAgICAgaiA9IC0xLFxuICAgICAgICAgIG4sXG4gICAgICAgICAgbSA9IHJvd3MubGVuZ3RoLFxuICAgICAgICAgIHZhbHVlID0gcGFyZW50LnZhbHVlO1xuXG4gICAgICB3aGlsZSAoKytqIDwgbSkge1xuICAgICAgICByb3cgPSByb3dzW2pdLCBub2RlcyA9IHJvdy5jaGlsZHJlbjtcbiAgICAgICAgZm9yIChpID0gcm93LnZhbHVlID0gMCwgbiA9IG5vZGVzLmxlbmd0aDsgaSA8IG47ICsraSkgcm93LnZhbHVlICs9IG5vZGVzW2ldLnZhbHVlO1xuICAgICAgICBpZiAocm93LmRpY2UpIHRyZWVtYXBEaWNlKHJvdywgeDAsIHkwLCB4MSwgeTAgKz0gKHkxIC0geTApICogcm93LnZhbHVlIC8gdmFsdWUpO1xuICAgICAgICBlbHNlIHRyZWVtYXBTbGljZShyb3csIHgwLCB5MCwgeDAgKz0gKHgxIC0geDApICogcm93LnZhbHVlIC8gdmFsdWUsIHkxKTtcbiAgICAgICAgdmFsdWUgLT0gcm93LnZhbHVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwYXJlbnQuX3NxdWFyaWZ5ID0gcm93cyA9IHNxdWFyaWZ5UmF0aW8ocmF0aW8sIHBhcmVudCwgeDAsIHkwLCB4MSwgeTEpO1xuICAgICAgcm93cy5yYXRpbyA9IHJhdGlvO1xuICAgIH1cbiAgfVxuXG4gIHJlc3F1YXJpZnkucmF0aW8gPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIGN1c3RvbSgoeCA9ICt4KSA+IDEgPyB4IDogMSk7XG4gIH07XG5cbiAgcmV0dXJuIHJlc3F1YXJpZnk7XG59KSkocGhpKTtcblxuZXhwb3J0cy5jbHVzdGVyID0gY2x1c3RlcjtcbmV4cG9ydHMuaGllcmFyY2h5ID0gaGllcmFyY2h5O1xuZXhwb3J0cy5wYWNrID0gaW5kZXg7XG5leHBvcnRzLnBhY2tTaWJsaW5ncyA9IHNpYmxpbmdzO1xuZXhwb3J0cy5wYWNrRW5jbG9zZSA9IGVuY2xvc2U7XG5leHBvcnRzLnBhcnRpdGlvbiA9IHBhcnRpdGlvbjtcbmV4cG9ydHMuc3RyYXRpZnkgPSBzdHJhdGlmeTtcbmV4cG9ydHMudHJlZSA9IHRyZWU7XG5leHBvcnRzLnRyZWVtYXAgPSBpbmRleCQxO1xuZXhwb3J0cy50cmVlbWFwQmluYXJ5ID0gYmluYXJ5O1xuZXhwb3J0cy50cmVlbWFwRGljZSA9IHRyZWVtYXBEaWNlO1xuZXhwb3J0cy50cmVlbWFwU2xpY2UgPSB0cmVlbWFwU2xpY2U7XG5leHBvcnRzLnRyZWVtYXBTbGljZURpY2UgPSBzbGljZURpY2U7XG5leHBvcnRzLnRyZWVtYXBTcXVhcmlmeSA9IHNxdWFyaWZ5O1xuZXhwb3J0cy50cmVlbWFwUmVzcXVhcmlmeSA9IHJlc3F1YXJpZnk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZDMtaGllcmFyY2h5L2J1aWxkL2QzLWhpZXJhcmNoeS5qc1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICdAdWlyb3V0ZXIvY29yZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGVWaXNOb2RlIHtcbiAgbmFtZTogICAgICAgc3RyaW5nO1xuXG4gIGxhYmVsOiAgICAgIHN0cmluZztcbiAgaGlnaGxpZ2h0OiAgYm9vbGVhbjtcbiAgYWN0aXZlOiAgICAgYm9vbGVhbjtcbiAgcmV0YWluZWQ6ICAgYm9vbGVhbjtcbiAgZXhpdGVkOiAgICAgYm9vbGVhbjtcbiAgZW50ZXJlZDogICAgYm9vbGVhbjtcbiAgaW5hY3RpdmU6ICAgYm9vbGVhbjtcbiAgX2NvbGxhcHNlZDogYm9vbGVhbjtcbiAgcmVhZG9ubHkgY29sbGFwc2VkOiBib29sZWFuO1xuICByZWFkb25seSB2aXNpYmxlOiBib29sZWFuO1xuICBwYXJlbnQ6ICAgICBTdGF0ZU9iamVjdDtcbiAgX3BhcmVudDogICAgU3RhdGVWaXNOb2RlO1xuICBfY2hpbGRyZW46ICBTdGF0ZVZpc05vZGVbXTtcbiAgcmVhZG9ubHkgY2hpbGRyZW46IFN0YXRlVmlzTm9kZVtdO1xuICBmdXR1cmU6ICAgICBib29sZWFuO1xuICBsYXp5TG9hZDogICBhbnk7XG4gIHJlYWRvbmx5IHRvdGFsRGVzY2VuZGVudHM6IG51bWJlcjtcblxuICBfY2xhc3Nlczogc3RyaW5nO1xuXG4gIC8qKiBPcmlnaW5hbCB4IGNvb3JkaW5hdGUgZnJvbSBkMyBsYXlvdXQ6IHRyZWUoKSBvciBjbHVzdGVyKCkgKi9cbiAgbGF5b3V0WDogbnVtYmVyO1xuICAvKiogT3JpZ2luYWwgeSBjb29yZGluYXRlIGZyb20gZDMgbGF5b3V0OiB0cmVlKCkgb3IgY2x1c3RlcigpICovXG4gIGxheW91dFk6IG51bWJlcjtcblxuICAvKiogUHJvamVjdGVkIHggY29vcmRpbmF0ZSAoaS5lLiwgZm9yIHJhZGlhbCBwcm9qZWN0aW9uKSAqL1xuICB4OiBudW1iZXI7XG4gIC8qKiBQcm9qZWN0ZWQgeSBjb29yZGluYXRlIChpLmUuLCBmb3IgcmFkaWFsIHByb2plY3Rpb24pICovXG4gIHk6IG51bWJlcjtcblxuICAvKiogQ3VycmVudCBhbmltYXRpb24gZnJhbWUncyB4IGNvb3JkaW5hdGUgKi9cbiAgYW5pbVg6IG51bWJlcjtcbiAgLyoqIEN1cnJlbnQgYW5pbWF0aW9uIGZyYW1lJ3MgeSBjb29yZGluYXRlICovXG4gIGFuaW1ZOiBudW1iZXJcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3RhdGVWaXNOb2RlKHN0YXRlOiBTdGF0ZU9iamVjdCk6IFN0YXRlVmlzTm9kZSB7XG4gIGxldCBub2RlOiBTdGF0ZVZpc05vZGUgPSBPYmplY3QuY3JlYXRlKHN0YXRlKSBhcyBhbnk7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5vZGUsIFwidmlzaWJsZVwiLCB7XG4gICAgZ2V0KCkge1xuICAgICAgaWYgKHRoaXMuZW50ZXJlZCkgcmV0dXJuIHRydWU7XG4gICAgICBsZXQgYW5jZXN0b3JDb2xsYXBzZWQgPSB0aGlzLl9wYXJlbnQgJiYgKHRoaXMuX3BhcmVudC5jb2xsYXBzZWQgfHwgIXRoaXMuX3BhcmVudC52aXNpYmxlKTtcbiAgICAgIHJldHVybiAhYW5jZXN0b3JDb2xsYXBzZWQ7XG4gICAgfVxuICB9KTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobm9kZSwgXCJjaGlsZHJlblwiLCB7XG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NoaWxkcmVuLmZpbHRlcihjaGlsZCA9PiBjaGlsZC52aXNpYmxlKTtcbiAgICB9XG4gIH0pO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShub2RlLCBcInRvdGFsRGVzY2VuZGVudHNcIiwge1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbi5yZWR1Y2UoKGFjYywgY2hpbGQpID0+IGFjYyArIGNoaWxkLnRvdGFsRGVzY2VuZGVudHMsIHRoaXMuX2NoaWxkcmVuLmxlbmd0aCk7XG4gICAgfVxuICB9KTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobm9kZSwgXCJjb2xsYXBzZWRcIiwge1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiAhdGhpcy5lbnRlcmVkICYmIHRoaXMuX2NvbGxhcHNlZCAmJiB0aGlzLl9jaGlsZHJlbi5sZW5ndGg7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gbm9kZTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc3RhdGUvc3RhdGVWaXNOb2RlLnRzeCIsIm1vZHVsZS5leHBvcnRzID0gXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQm1KTFIwUUEvd0QvQVArZ3ZhZVRBQUFBZWtsRVFWUTRqZTJQd1FtQU1CQUVwd3VKTGZrU0pRK3R4QktzVDBSc3hRajZ1VUFNWGtUeDRjT0YrMlIzOWk3dzYxWDF3QUNZUk1aSXBvK05EdGhrSnFYRWlPZHpYV2lXZ0V1VXhMQVQ1cUFhV0lMUURPUkFCb3pCK3dxMDJoL3R5U1h4WnF2QjJpWGg1dVlLMWtwdXdWNlZsRHlDdlFxWkQyc0hUbjB4ZE8wQTlENEFBQUFBU1VWT1JLNUNZSUk9XCJcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2ltYWdlcy8xNi9jaGV2cm9uLWRvd24ucG5nXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgeyBoLCByZW5kZXIsIENvbXBvbmVudCB9IGZyb20gXCJwcmVhY3RcIjtcbmltcG9ydCBcIi4vdHJhbnNpdGlvblZpc3VhbGl6ZXIuY3NzXCI7XG5cbmltcG9ydCB7VHJhbnNpdGlvblZpZXd9IGZyb20gXCIuL3RyYW5zaXRpb25WaWV3XCI7XG5pbXBvcnQge2Vhc2luZ30gZnJvbSBcIi4uL3V0aWwvZWFzaW5nXCI7XG5pbXBvcnQge2FuaW1hdGVQYXRofSBmcm9tIFwiLi4vdXRpbC9hbmltYXRlcGF0aFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElQcm9wcyB7XG4gIHJvdXRlcjogYW55O1xuICBtYXhpbXVtVHJhbnNpdGlvbnM/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVN0YXRlIHtcbiAgdHJhbnNpdGlvbnM/OiBhbnlbXTtcbiAgcG9pbnRlckV2ZW50cz86IHN0cmluZztcbn1cblxuLyoqXG4gKiBUaGlzIG91dGVyIGNvbXBvbmVudCBtYW5hZ2VzIHRoZSBsaXN0IG9mIGFsbCB0cmFuc2l0aW9ucyAoaGlzdG9yeSksIGFuZCBwcm92aWRlcyBhIGZpeGVkLCBzY3JvbGxpbmcgdmlld3BvcnQuXG4gKiBJdCBhdHRhY2hlcyBob29rcyBmb3IgbGlmZWN5Y2xlIGV2ZW50cyBhbmQgZGVjb3JhdGVzIHRoZSB0cmFuc2l0aW9uIHdpdGggYSBkZXNjcmlwdGl2ZSBtZXNzYWdlLlxuICovXG5leHBvcnQgY2xhc3MgVHJhbnNpdGlvblZpc3VhbGl6ZXIgZXh0ZW5kcyBDb21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgVHJhbnNpdGlvblZpc3VhbGl6ZXIgYW5kIGFkZHMgaXQgdG8gdGhlIGRvY3VtZW50LlxuICAgKlxuICAgKiBAcGFyYW0gcm91dGVyIHRoZSBVSVJvdXRlciBvYmplY3RcbiAgICogQHBhcmFtIGVsZW1lbnQgKG9wdGlvbmFsKSB0aGUgZWxlbWVudCB3aGVyZSB0aGUgVHJhbnNpdGlvblZpc3VhbGl6ZXIgc2hvdWxkIGJlIHBsYWNlZC5cbiAgICogICAgICAgICAgICAgICAgSWYgbm8gZWxlbWVudCBpcyBwYXNzZWQsIGFuIGVsZW1lbnQgd2lsbCBiZSBjcmVhdGVkIGluIHRoZSBib2R5LlxuICAgKiBAcGFyYW0gcHJvcHMgbWF4aW11bSB0cmFuc2l0aW9ucyBkZWZhdWx0OiB7IG1heGltdW1UcmFuc2l0aW9uczogMTUgfVxuICAgKlxuICAgKlxuICAgKiAjIEFuZ3VsYXIgMSArIFVJLVJvdXRlciAoMS4wLjAtYmV0YS4yIGFuZCBoaWdoZXIpOlxuICAgKlxuICAgKiBJbmplY3QgdGhlIHJvdXRlciAoYCR1aVJvdXRlcmApIGluIGEgcnVuIGJsb2NrLCB0aGVuIGNhbGwgVHJhbnNpdGlvblZpc3VhbGl6ZXIuY3JlYXRlKCk7XG4gICAqXG4gICAqIGBgYFxuICAgKiBhcHAucnVuKGZ1bmN0aW9uKCR1aVJvdXRlcikge1xuICAgKiAgIFRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZSgkdWlSb3V0ZXIpO1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqICMgQW5ndWxhciAxICsgVUktUm91dGVyIDEuMC4wLWFscGhhLjEgdGhyb3VnaCAxLjAuMC1iZXRhLjE6XG4gICAqXG4gICAqIEluamVjdCB0aGUgcm91dGVyIChgbmcxVUlSb3V0ZXJgKSBpbiBhIHJ1biBibG9jaywgdGhlbiBjYWxsIFRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZSgpO1xuICAgKlxuICAgKiBgYGBcbiAgICogYXBwLnJ1bihmdW5jdGlvbihuZzFVSVJvdXRlcikge1xuICAgKiAgIFRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZShuZzFVSVJvdXRlcik7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQW5ndWxhciAyOlxuICAgKlxuICAgKiBDYWxsIFRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZSgpIGZyb20geW91ciBVSVJvdXRlckNvbmZpZ1xuICAgKlxuICAgKiBgYGBcbiAgICogZXhwb3J0IGNsYXNzIE15VUlSb3V0ZXJDb25maWcgZXh0ZW5kcyBVSVJvdXRlckNvbmZpZyB7XG4gICAqICAgY29uZmlndXJlKHJvdXRlcjogVUlSb3V0ZXIpIHtcbiAgICogICAgIFRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZShyb3V0ZXIpO1xuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogUmVhY3Q6XG4gICAqXG4gICAqIENhbGwgVHJhbnNpdGlvblZpc3VhbGl6ZXIuY3JlYXRlKCkgZnJvbSB5b3VyIGJvb3RzdHJhcFxuICAgKlxuICAgKiBgYGBcbiAgICogbGV0IHJvdXRlciA9IG5ldyBVSVJvdXRlclJlYWN0KCk7XG4gICAqIFRyYW5zaXRpb25WaXN1YWxpemVyLmNyZWF0ZShyb3V0ZXIpO1xuICAgKiByb3V0ZXIuc3RhcnQoKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIGVsZW1lbnQgdGhhdCB3YXMgYm9vdHN0cmFwcGVkLlxuICAgKiAgICAgICAgIFlvdSBjYW4gZGVzdHJveSB0aGUgY29tcG9uZW50IHVzaW5nOlxuICAgKiAgICAgICAgIFtSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlXShodHRwczovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3RvcC1sZXZlbC1hcGkuaHRtbCNyZWFjdGRvbS51bm1vdW50Y29tcG9uZW50YXRub2RlKVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZShyb3V0ZXIsIGVsZW1lbnQ/LCBwcm9wcyA9IHt9KSB7XG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGVsZW1lbnQuaWQgPSBcInVpclRyYW5zaXRpb25WaXN1YWxpemVyXCI7XG4gICAgfVxuXG4gICAgbGV0IGluaXRpYWxQcm9wcyA9IE9iamVjdC5hc3NpZ24oe30sIHByb3BzLCB7IHJvdXRlciB9KTtcbiAgICBjb25zdCBfcmVuZGVyID0gKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgIHJlbmRlcihoKFRyYW5zaXRpb25WaXN1YWxpemVyLCBpbml0aWFsUHJvcHMpLCBlbGVtZW50KTtcbiAgICB9O1xuXG4gICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgX3JlbmRlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgX3JlbmRlciBhcyBhbnksIGZhbHNlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxuXG4gIGRlcmVnaXN0ZXJGbnMgPSBbXTtcblxuICBzdGF0ZSA9IHtcbiAgICB0cmFuc2l0aW9uczogW10sXG4gICAgcG9pbnRlckV2ZW50czogXCJhdXRvXCIsXG4gIH07XG5cbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICByb3V0ZXI6IG51bGwsXG4gICAgbWF4aW11bVRyYW5zaXRpb25zOiAxNVxuICB9O1xuXG4gIF9kaXY7XG4gIGNhbmNlbFByZXZpb3VzQW5pbSA9IG51bGw7XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgbGV0IGRlcmVnID0gdGhpcy5wcm9wcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2Uub25CZWZvcmUoe30sICh0cmFucykgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHRyYW5zaXRpb25zOiB0aGlzLnN0YXRlLnRyYW5zaXRpb25zLmNvbmNhdCh0cmFucykgfSk7XG5cbiAgICAgIGxldCBkdXJhdGlvbiA9IDc1MCwgZWwgPSB0aGlzLl9kaXYuY2hpbGRyZW5bMF07XG5cbiAgICAgIGxldCBzY3JvbGxUb1JpZ2h0ID0gKCkgPT4ge1xuICAgICAgICBsZXQgdGFyZ2V0U2Nyb2xsWCA9IGVsLnNjcm9sbFdpZHRoIC0gZWwuY2xpZW50V2lkdGggKyAyMDA7XG4gICAgICAgIHRoaXMuY2FuY2VsUHJldmlvdXNBbmltICYmIHRoaXMuY2FuY2VsUHJldmlvdXNBbmltKCk7XG4gICAgICAgIGxldCBuZXdWYWwgPSBbdGFyZ2V0U2Nyb2xsWF0sIG9sZFZhbCA9IFtlbC5zY3JvbGxMZWZ0XTtcbiAgICAgICAgbGV0IG1heCA9IHRoaXMucHJvcHMubWF4aW11bVRyYW5zaXRpb25zO1xuXG4gICAgICAgIGxldCBlbmZvcmNlTWF4ID0gKCkgPT4ge1xuICAgICAgICAgIGxldCBsaXN0ID0gdGhpcy5zdGF0ZS50cmFuc2l0aW9ucztcbiAgICAgICAgICBpZiAobGlzdC5sZW5ndGggPD0gbWF4KSByZXR1cm47XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHRyYW5zaXRpb25zOiBsaXN0LnNsaWNlKGxpc3QubGVuZ3RoIC0gbWF4KX0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBjYWxsYmFjayA9ICh2YWxzKSA9PiBlbC5zY3JvbGxMZWZ0ID0gdmFsc1swXTtcbiAgICAgICAgdGhpcy5jYW5jZWxQcmV2aW91c0FuaW0gPSBhbmltYXRlUGF0aChuZXdWYWwsIG9sZFZhbCwgZHVyYXRpb24sIGNhbGxiYWNrLCBlbmZvcmNlTWF4LCBlYXNpbmcuZWFzZUluT3V0Q3ViaWMpO1xuICAgICAgfTtcblxuICAgICAgc2V0VGltZW91dChzY3JvbGxUb1JpZ2h0LCAyNSk7XG4gICAgfSk7XG4gICAgdGhpcy5kZXJlZ2lzdGVyRm5zLnB1c2goZGVyZWcpO1xuXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMub25Nb3VzZU1vdmUpO1xuICAgIHRoaXMuZGVyZWdpc3RlckZucy5wdXNoKCgpID0+IGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm9uTW91c2VNb3ZlKSk7XG4gIH1cblxuICAvKiogXG4gICAqIERpc2FibGUgcG9pbnRlciBldmVudHMgd2hlbiB0aGUgbW91c2UgaXMgYWJvdmUgdGhlIHRpbWVsaW5lXG4gICAqIFxuICAgKiBUaGlzIGFsbG93cyBjbGlja3MgdG8gcGFzcyB0aHJvdWdoIHRoZSBvdXRlciBkaXYgdG8gdGhlIHVzZXIncyBhcHAgY29tcG9uZW50c1xuICAgKiBldmVuIHdoZW4gYSB0cmFuc2l0aW9udmlldyBkZXRhaWxzIGJveCBpcyBvcGVuIGFuZCBwaW5uZWQuXG4gICAqIFxuICAgKiBFbmFibGUgcG9pbnRlciBldmVudHMgd2hlbiBtb3VzZSBpcyBpbnNpZGUgdGhlIHRpbWVsaW5lIHRvIGFsbG93IGhvcml6b250YWwgc2Nyb2xsICYgc2Nyb2xsIHdoZWVsXG4gICAqL1xuICBvbk1vdXNlTW92ZSA9IChldnQpID0+IHtcbiAgICBsZXQgd2luZG93SGVpZ2h0ID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCwgd2luZG93LmlubmVySGVpZ2h0IHx8IDApO1xuICAgIHZhciBwb2ludGVyRXZlbnRzID0gKHdpbmRvd0hlaWdodCAtIGV2dC5jbGllbnRZIDwgNjUgPyBcImF1dG9cIiA6IFwibm9uZVwiKTtcbiAgICBpZiAodGhpcy5zdGF0ZS5wb2ludGVyRXZlbnRzICE9IHBvaW50ZXJFdmVudHMpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3BvaW50ZXJFdmVudHN9KTtcbiAgICB9XG4gIH07XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgd2hpbGUgKHRoaXMuZGVyZWdpc3RlckZucy5sZW5ndGgpIHRoaXMuZGVyZWdpc3RlckZucy5wb3AoKSgpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCBwb2ludGVyRXZlbnRzID0gdGhpcy5zdGF0ZS5wb2ludGVyRXZlbnRzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgcmVmPXtlbCA9PiB0aGlzLl9kaXYgPSBlbH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidHJhbnNpdGlvbkhpc3RvcnlcIiBzdHlsZT17eyBwb2ludGVyRXZlbnRzIH19PlxuICAgICAgICAgIHsgdGhpcy5zdGF0ZS50cmFuc2l0aW9ucy5tYXAodHJhbnMgPT5cbiAgICAgICAgICAgIDxkaXYga2V5PXt0cmFucy4kaWR9PlxuICAgICAgICAgICAgICA8VHJhbnNpdGlvblZpZXcgdHJhbnNpdGlvbj17dHJhbnN9IC8+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ttaW5XaWR0aDogXCIxOGVtXCIsIGJvcmRlcjogXCIxcHggc29saWQgdHJhbnNwYXJlbnRcIn19PjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHdpZHRoOiBcIjIwMHB4XCIsIGhlaWdodDogXCIxcHhcIiB9fSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3RyYW5zaXRpb24vdHJhbnNpdGlvblZpc3VhbGl6ZXIudHN4IiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzP3NvdXJjZU1hcCEuL3RyYW5zaXRpb25WaXN1YWxpemVyLmNzc1wiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz9zb3VyY2VNYXAhLi90cmFuc2l0aW9uVmlzdWFsaXplci5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzP3NvdXJjZU1hcCEuL3RyYW5zaXRpb25WaXN1YWxpemVyLmNzc1wiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvdHJhbnNpdGlvbi90cmFuc2l0aW9uVmlzdWFsaXplci5jc3Ncbi8vIG1vZHVsZSBpZCA9IDIxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi50cmFuc2l0aW9uSGlzdG9yeXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1lbmQ7cG9zaXRpb246Zml4ZWQ7bGVmdDowO2JvdHRvbTowO3JpZ2h0OjA7cGFkZGluZzowIDFlbTtvdmVyZmxvdy14OnNjcm9sbDt6LWluZGV4OjI7cG9pbnRlci1ldmVudHM6bm9uZX0udHJhbnNpdGlvbkhpc3RvcnkgKntwb2ludGVyLWV2ZW50czphbGw7ZmxleDowIDAgYXV0b30uZnVsbFNjcmVlbiAudHJhbnNpdGlvbkhpc3Rvcnl7dG9wOjB9LnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnl7cG9zaXRpb246cmVsYXRpdmU7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzoxMnB4IDMwcHg7bWFyZ2luLWJvdHRvbTo2cHg7bWFyZ2luLXJpZ2h0OjZweDtjb2xvcjojMDAwO2N1cnNvcjpwb2ludGVyfS5oaXN0b3J5RW50cnk6YWZ0ZXIsLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXCI7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZDojYTlhOWE5O2xlZnQ6MDtoZWlnaHQ6NTAuMiU7d2lkdGg6MTAwJTtib3JkZXI6MXB4IHNvbGlkICMwMDA7Ym94LXNpemluZzpib3JkZXItYm94O3otaW5kZXg6LTF9LnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnk6YmVmb3Jle3RvcDowO2JvcmRlci1ib3R0b206MDstd2Via2l0LXRyYW5zZm9ybTpza2V3KDQwZGVnLDBkZWcpO3RyYW5zZm9ybTpza2V3KDQwZGVnLDBkZWcpfS50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5OmFmdGVye2JvdHRvbTowO2JvcmRlci10b3A6MDstd2Via2l0LXRyYW5zZm9ybTpza2V3KC00MGRlZywwZGVnKTt0cmFuc2Zvcm06c2tldygtNDBkZWcsMGRlZyl9Lmhpc3RvcnlFbnRyeSAuc3VtbWFyeXtjb2xvcjojZmZmO3doaXRlLXNwYWNlOm5vd3JhcDtmb250LXNpemU6c21hbGx9Lmhpc3RvcnlFbnRyeSAuc3VtbWFyeSAudHJhbnNpZHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LjFlbTtsZWZ0Oi44NWVtO2ZvbnQtc2l6ZTpzbWFsbGVyfS5oaXN0b3J5RW50cnkgLnN1bW1hcnkgLnN0YXR1c3twb3NpdGlvbjphYnNvbHV0ZTtib3R0b206LjFlbTtsZWZ0Oi44NWVtO2ZvbnQtc2l6ZTpzbWFsbGVyfS5oaXN0b3J5RW50cnkgLnN1bW1hcnkgLnRyYW5zbmFtZXtmb250LXdlaWdodDo3MDA7ZGlzcGxheTpmbGV4O2ZsZXgtZmxvdzpyb3cgbm93cmFwO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5oaXN0b3J5RW50cnk6YWZ0ZXIsLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnk6YmVmb3Jle2JhY2tncm91bmQ6IzczNzM3M30uaGlzdG9yeUVudHJ5OmhvdmVyOmFmdGVyLC50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5OmhvdmVyOmJlZm9yZXtiYWNrZ3JvdW5kOiNhNmE2YTZ9Lmhpc3RvcnlFbnRyeS5zdWNjZXNzOmFmdGVyLC50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5LnN1Y2Nlc3M6YmVmb3Jle2JhY2tncm91bmQ6IzQ1ODAzYn0uaGlzdG9yeUVudHJ5LnN1Y2Nlc3M6aG92ZXI6YWZ0ZXIsLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnkuc3VjY2Vzczpob3ZlcjpiZWZvcmV7YmFja2dyb3VuZDojMTlhNjAwfS5oaXN0b3J5RW50cnkuZXJyb3I6YWZ0ZXIsLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnkuZXJyb3I6YmVmb3Jle2JhY2tncm91bmQ6I2JmMWYxZH0uaGlzdG9yeUVudHJ5LmVycm9yOmhvdmVyOmFmdGVyLC50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5LmVycm9yOmhvdmVyOmJlZm9yZXtiYWNrZ3JvdW5kOiNlNjI2MjJ9Lmhpc3RvcnlFbnRyeS5pZ25vcmVkOmFmdGVyLC50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5Lmlnbm9yZWQ6YmVmb3Jle2JhY2tncm91bmQ6I2U2OGIwNX0uaGlzdG9yeUVudHJ5Lmlnbm9yZWQ6aG92ZXI6YWZ0ZXIsLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnkuaWdub3JlZDpob3ZlcjpiZWZvcmV7YmFja2dyb3VuZDojZmY5ODA4fS5oaXN0b3J5RW50cnkucmVkaXJlY3RlZDphZnRlciwudHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeS5yZWRpcmVjdGVkOmJlZm9yZXtiYWNrZ3JvdW5kOiNlNjhiMDV9Lmhpc3RvcnlFbnRyeS5yZWRpcmVjdGVkOmhvdmVyOmFmdGVyLC50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5LnJlZGlyZWN0ZWQ6aG92ZXI6YmVmb3Jle2JhY2tncm91bmQ6I2ZmOTgwOH0udHJhbnNpdGlvbkhpc3RvcnkgLmtleXZhbHVle2Rpc3BsYXk6ZmxleDtmbGV4LWZsb3c6cm93IG5vd3JhcDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn0udHJhbnNpdGlvbkRldGFpbHtib3JkZXI6MXB4IHNvbGlkICNkM2QzZDM7Zm9udC1zaXplOnNtYWxsO3RyYW5zaXRpb246Ym94LXNoYWRvdyAuNXMgZWFzZSxib3JkZXIgMXMgZWFzZX0udHJhbnNpdGlvbkRldGFpbCAuZG93bkFycm93e3Bvc2l0aW9uOnJlbGF0aXZlO3dpZHRoOjEwMCU7Ym90dG9tOi0xMHB4O21hcmdpbi1ib3R0b206MTBweH0udHJhbnNpdGlvbkRldGFpbCAuZG93bkFycm93OmFmdGVyLC50cmFuc2l0aW9uRGV0YWlsIC5kb3duQXJyb3c6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXCI7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLWxlZnQ6MTBweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmlnaHQ6MTBweCBzb2xpZCB0cmFuc3BhcmVudDt0b3A6MTAwJTtsZWZ0OjUwJTttYXJnaW4tbGVmdDotMTBweH0udHJhbnNpdGlvbkRldGFpbCAuZG93bkFycm93OmJlZm9yZXtib3JkZXItdG9wOjEwcHggc29saWQgI2QzZDNkM30udHJhbnNpdGlvbkRldGFpbCAuZG93bkFycm93OmFmdGVye2JvcmRlci10b3A6MTBweCBzb2xpZCAjZmZmO21hcmdpbi10b3A6LTFweDt6LWluZGV4OjF9LnRyYW5zaXRpb25EZXRhaWwgLnBhbmVsLWhlYWRpbmd7dGV4dC1hbGlnbjpjZW50ZXJ9LnRyYW5zaXRpb25EZXRhaWwgdGFibGV7Ym9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlfS50cmFuc2l0aW9uRGV0YWlsIHRoe3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZTpzbWFsbH0udHJhbnNpdGlvbkRldGFpbCAudWlyLWhlYWRlcj4qe2ZsZXg6MCAxIGF1dG99LnRyYW5zaXRpb25EZXRhaWwgLnVpci1oZWFkZXI+KiBpe3RyYW5zaXRpb246YWxsIC41cyBlYXNlfS50cmFuc2l0aW9uRGV0YWlsIHRhYmxlLnBhdGhze21pbi13aWR0aDoyNWVtfS50cmFuc2l0aW9uRGV0YWlsIHRhYmxlLnBhdGhzIHRke2NvbG9yOiNmZmY7Ym9yZGVyOjA7Zm9udC1zaXplOnNtYWxsO21pbi13aWR0aDoxMGVtfS50cmFuc2l0aW9uRGV0YWlsIC5zdW1tYXJ5IC5rZXl2YWx1ZXtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydCFpbXBvcnRhbnQ7YWxpZ24taXRlbXM6YmFzZWxpbmV9LnRyYW5zaXRpb25EZXRhaWwgLnN1bW1hcnkgLmtleXZhbHVlPmRpdjpudGgtY2hpbGQoMil7cGFkZGluZy1sZWZ0Oi41ZW07Zm9udC13ZWlnaHQ6NDAwfS50cmFuc2l0aW9uRGV0YWlsIHRhYmxlLnN1bW1hcnl7bWF4LXdpZHRoOjQwMHB4fS50cmFuc2l0aW9uRGV0YWlsIHRhYmxlLnN1bW1hcnkgdGR7Zm9udC1zaXplOnNtYWxsO3ZlcnRpY2FsLWFsaWduOnRvcH0udHJhbnNpdGlvbkRldGFpbCB0YWJsZS5zdW1tYXJ5IHRkOmZpcnN0LWNoaWxke3doaXRlLXNwYWNlOm5vd3JhcH0udHJhbnNpdGlvbkRldGFpbCB0YWJsZS5zdW1tYXJ5IHRkOm50aC1jaGlsZCgyKXtmb250LXdlaWdodDo3MDA7cGFkZGluZy1sZWZ0OjFlbX0udHJhbnNpdGlvbkRldGFpbCB0ZHtwYWRkaW5nOjB9LnRyYW5zaXRpb25EZXRhaWwgdGQgLmZsb3dBcnJvd0NlbGx7ZGlzcGxheTpmbGV4O2ZsZXgtZmxvdzpjb2x1bW4gbm93cmFwO2FsaWduLWl0ZW1zOnN0cmV0Y2g7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47d2lkdGg6MWVtO3RyYW5zaXRpb246d2lkdGggLjI1cyBlYXNlO2hlaWdodDphdXRvfS50cmFuc2l0aW9uRGV0YWlsLmV4cGFuZCB0ZCAuZmxvd0Fycm93Q2VsbHt3aWR0aDoyZW19LnRyYW5zaXRpb25EZXRhaWwgLmV4aXQgLmZsb3dBcnJvd1N2Z3tyaWdodDowfS50cmFuc2l0aW9uRGV0YWlsIC5lbnRlciAuZmxvd0Fycm93U3Zne2xlZnQ6MH0udHJhbnNpdGlvbkRldGFpbCAuZmxvd0Fycm93U3ZnLmJvdHRvbXtib3R0b206MH0udHJhbnNpdGlvbkRldGFpbCAuZmxvd0Fycm93U3ZnLnRvcHt0b3A6MH0udHJhbnNpdGlvbkRldGFpbCAuZmxvd0Fycm93U3Zne3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OmF1dG87dHJhbnNpdGlvbjp3aWR0aCAuMjVzIGVhc2V9LnRyYW5zaXRpb25EZXRhaWwgLnJldGFpbntiYWNrZ3JvdW5kLWNvbG9yOiM3MzcyNzN9LnRyYW5zaXRpb25EZXRhaWwgLmV4aXR7YmFja2dyb3VuZC1jb2xvcjojN2MxMDEwfS50cmFuc2l0aW9uRGV0YWlsIC5lbnRlcntiYWNrZ3JvdW5kLWNvbG9yOiMzMTU5MmF9LnRyYW5zaXRpb25EZXRhaWwgLmRlZW1waGFzaXple2NvbG9yOiNlYWVhZWE7Zm9udC1zaXplOngtc21hbGx9LnRyYW5zaXRpb25EZXRhaWwgLnBhcmFtc3tiYWNrZ3JvdW5kLWNvbG9yOmhzbGEoMCwwJSwxMDAlLC4xNSk7cGFkZGluZzowO29wYWNpdHk6MDtvdmVyZmxvdzpoaWRkZW47dHJhbnNpdGlvbjpvcGFjaXR5IDFzIGVhc2U7bWF4LWhlaWdodDowO21heC13aWR0aDoxNTBweH0udHJhbnNpdGlvbkRldGFpbC5leHBhbmQgLnBhcmFtc3tkaXNwbGF5OmJsb2NrO2JvcmRlci1yYWRpdXM6NHB4O2JveC1zaGFkb3c6MXB4IDFweCAycHggIzAwMDtwYWRkaW5nOi41ZW07bWF4LWhlaWdodDoyNTBweDttYXgtd2lkdGg6MzAwcHg7b3ZlcmZsb3cteTphdXRvO29wYWNpdHk6MTttYXJnaW46LjVlbSAwfS50cmFuc2l0aW9uRGV0YWlsLnBpbntib3gtc2hhZG93OjRweCA0cHggMTJweCByZ2JhKDAsMCwwLC4zKTtib3JkZXI6MXB4IHNvbGlkICMwMDB9LnRyYW5zaXRpb25EZXRhaWwucGluIC5kb3duQXJyb3c6YmVmb3Jle2JvcmRlci10b3AtY29sb3I6IzAwMH0udHJhbnNpdGlvbkRldGFpbC5leHBhbmQgdGFibGUucGF0aHMgdGR7bWF4LWhlaWdodDoxMDBweDt2ZXJ0aWNhbC1hbGlnbjp0b3B9LnRyYW5zaXRpb25EZXRhaWwgLnVpclRyYW5zVmlzUm93e2Rpc3BsYXk6ZmxleDtmbGV4LWZsb3c6cm93IG5vd3JhcDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpzdHJldGNofS50cmFuc2l0aW9uRGV0YWlsIC51aXJUcmFuc1Zpc1Jvdz5kaXZ7ZmxleDoxIDAgNTAlfS50cmFuc2l0aW9uRGV0YWlsIC51aXJOb2RlQ29udGVudHtkaXNwbGF5OmZsZXg7ZmxleC1mbG93OnJvdyBub3dyYXA7bWluLWhlaWdodDoxZW07dHJhbnNpdGlvbjptaW4taGVpZ2h0IC4yNXMgZWFzZX0udHJhbnNpdGlvbkRldGFpbC5leHBhbmQgLnVpck5vZGVDb250ZW50e21pbi1oZWlnaHQ6NWVtfS50cmFuc2l0aW9uRGV0YWlsIC51aXJOb2RlRGV0YWlse2ZsZXg6MSAwIGF1dG87cGFkZGluZzouMmVtIC41ZW19LnRyYW5zaXRpb25EZXRhaWwgLnN0YXRlbmFtZXtmb250LXdlaWdodDpib2xkZXI7bWFyZ2luLXJpZ2h0OjFlbTttYXJnaW4tbGVmdDowfS50cmFuc2l0aW9uRGV0YWlsIC5lbnRlciAuc3RhdGVuYW1le21hcmdpbi1yaWdodDowO21hcmdpbi1sZWZ0OjFlbX0udHJhbnNpdGlvbkRldGFpbCAubm93cmFwe3doaXRlLXNwYWNlOm5vd3JhcH0udHJhbnNpdGlvbkhpc3RvcnkgLnBhcmFtaWR7Zm9udC13ZWlnaHQ6Ym9sZGVyO2NvbG9yOiNlYWVhZWE7bWFyZ2luLXJpZ2h0Oi41ZW19LnRyYW5zaXRpb25IaXN0b3J5IC5wYXJhbXNsYWJlbCwudHJhbnNpdGlvbkhpc3RvcnkgLnJlc29sdmVsYWJlbHtjb2xvcjojZmZmO21hcmdpbi10b3A6LS41ZW07dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC13ZWlnaHQ6NzAwfS50cmFuc2l0aW9uSGlzdG9yeSAucGFyYW12YWx1ZXtjb2xvcjojZTZlNmU2fXNwYW4ubGlua3tjdXJzb3I6cG9pbnRlcjt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfS50b29sdGlwLXJpZ2h0e2Rpc3BsYXk6aW5saW5lO3Bvc2l0aW9uOnJlbGF0aXZlO3RyYW5zaXRpb246YWxsIDEuNXMgZWFzZX0udG9vbHRpcC1yaWdodDphZnRlcntjb2xvcjp0cmFuc3BhcmVudDt0ZXh0LWRlY29yYXRpb246bm9uZTt0cmFuc2l0aW9uOmFsbCAxLjVzIGVhc2V9LnRvb2x0aXAtcmlnaHQ6aG92ZXI6YWZ0ZXJ7Ym90dG9tOjA7Y29sb3I6cmdiYSgwLDAsMCwuNSk7Y29udGVudDphdHRyKHRpdGxlKTtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3doaXRlLXNwYWNlOm5vd3JhcDtmb250LXNpemU6c21hbGxlcn0udWlyLW1vZGFsIC5idG4tcHJpbWFyeXtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzMzN2FiNztib3JkZXItY29sb3I6IzJlNmRhNH0udWlyLW1vZGFsIC5idG57ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzo2cHggMTJweDttYXJnaW4tYm90dG9tOjA7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NDAwO2xpbmUtaGVpZ2h0OjEuNDI4NTcxNDM7dGV4dC1hbGlnbjpjZW50ZXI7d2hpdGUtc3BhY2U6bm93cmFwO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTstbXMtdG91Y2gtYWN0aW9uOm1hbmlwdWxhdGlvbjt0b3VjaC1hY3Rpb246bWFuaXB1bGF0aW9uO2N1cnNvcjpwb2ludGVyOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTtiYWNrZ3JvdW5kLWltYWdlOm5vbmU7Ym9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOjRweH0uYnRuLWdyb3VwLXhzPi5idG4sLnVpci1tb2RhbCAuYnRuLXhze3BhZGRpbmc6MXB4IDVweDtmb250LXNpemU6MTJweDtsaW5lLWhlaWdodDoxLjU7Ym9yZGVyLXJhZGl1czozcHh9LnRyYW5zaXRpb25EZXRhaWwgc3Bhbi5saW5re2NvbG9yOiNmZmZ9LnRyYW5zaXRpb25IaXN0b3J5IDpub3QoLmZhKTpub3QocHJlKXtmb250LWZhbWlseTpBcmlhbCxIZWx2ZXRpY2Esc2Fucy1zZXJpZn0udHJhbnNpdGlvbkRldGFpbCAuZW50ZXIgLnVpci1oZWFkZXJ7ZmxleC1mbG93OnJvdyBub3dyYXB9LnRyYW5zaXRpb25EZXRhaWwgLnVpci1oZWFkZXJ7ZGlzcGxheTpmbGV4O2ZsZXgtZmxvdzpyb3ctcmV2ZXJzZSBub3dyYXA7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6YmFzZWxpbmV9LnRyYW5zaXRpb25EZXRhaWwgLnJldGFpbiAudWlyLWhlYWRlcntqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS51aXItcGFuZWx7bWFyZ2luLWJvdHRvbToyMHB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNkM2QzZDM7Ym9yZGVyLXJhZGl1czo0cHg7Ym94LXNoYWRvdzowIDFweCAxcHggcmdiYSgwLDAsMCwuMDUpfS51aXItcGFuZWwtaGVhZGluZ3tjb2xvcjojMzMzO2JhY2tncm91bmQtY29sb3I6I2Y1ZjVmNTtib3JkZXItY29sb3I6I2RkZDtwYWRkaW5nOjEwcHggMTVweDtib3JkZXItYm90dG9tOjFweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItdG9wLWxlZnQtcmFkaXVzOjNweDtib3JkZXItdG9wLXJpZ2h0LXJhZGl1czozcHh9LnVpci1wYW5lbC10aXRsZXttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowO2ZvbnQtc2l6ZToxNnB4O2NvbG9yOmluaGVyaXR9LnVpci1wYW5lbC1ib2R5e3BhZGRpbmc6MTVweH0udWlyLWZhZGV7b3BhY2l0eTowO3RyYW5zaXRpb246b3BhY2l0eSAuMTVzIGxpbmVhcn0udWlyLWZhZGUuaW57b3BhY2l0eToxfS51aXItbW9kYWwtYmFja2Ryb3B7cG9zaXRpb246Zml4ZWQ7dG9wOjA7cmlnaHQ6MDtib3R0b206MDtsZWZ0OjA7ei1pbmRleDoxMDQwO2JhY2tncm91bmQtY29sb3I6IzAwMH0udWlyLW1vZGFsLWJhY2tkcm9wLmlue2ZpbHRlcjphbHBoYShvcGFjaXR5PTUwKTtvcGFjaXR5Oi41fS51aXItbW9kYWx7cG9zaXRpb246Zml4ZWQ7dG9wOjA7cmlnaHQ6MDtib3R0b206MDtsZWZ0OjA7ei1pbmRleDoxMDUwO2Rpc3BsYXk6YmxvY2s7b3ZlcmZsb3cteTphdXRvOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNoO291dGxpbmU6MH0udWlyLW1vZGFsLWRpYWxvZ3twb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDphdXRvO21hcmdpbjoxMHB4fS51aXItbW9kYWwtY29udGVudHtwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7YmFja2dyb3VuZC1jbGlwOnBhZGRpbmctYm94O2JvcmRlcjoxcHggc29saWQgIzk5OTtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMCwwLDAsLjIpO2JvcmRlci1yYWRpdXM6NnB4O291dGxpbmU6MDtib3gtc2hhZG93OjAgM3B4IDlweCByZ2JhKDAsMCwwLC41KX0udWlyLW1vZGFsLWhlYWRlcntwYWRkaW5nOjE1cHg7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2U1ZTVlNX0udWlyLXJlc29sdmUtaGVhZGVye2Rpc3BsYXk6ZmxleDtmbGV4LWZsb3c6cm93IG5vd3JhcDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtiYWNrZ3JvdW5kLWNvbG9yOiM2NDk1ZWR9LnVpci1tb2RhbC1ib2R5e2NvbG9yOiMwMDA7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzoxNXB4fS51aXItbW9kYWwtZm9vdGVye3BhZGRpbmc6MTVweDt0ZXh0LWFsaWduOnJpZ2h0O2JvcmRlci10b3A6MXB4IHNvbGlkICNlNWU1ZTV9LnVpci1pY29ue2Rpc3BsYXk6aW5saW5lLWJsb2NrO2hlaWdodDoxZW07d2lkdGg6MWVtO21hcmdpbjouMjVlbTtiYWNrZ3JvdW5kLXNpemU6Y292ZXI7YmFja2dyb3VuZC1wb3NpdGlvbjowIDB9LnVpci1zcGlue2FuaW1hdGlvbjp1aXJzcGluIDJzIGluZmluaXRlO3RyYW5zZm9ybTpyb3RhdGUoMGRlZyl9LnVpci1yb3RhdGUtMzV7dHJhbnNmb3JtOnJvdGF0ZSgzNWRlZyk7b3BhY2l0eTouNX1Aa2V5ZnJhbWVzIHVpcnNwaW57MCV7dHJhbnNmb3JtOnJvdGF0ZSgwZGVnKX10b3t0cmFuc2Zvcm06cm90YXRlKDF0dXJuKX19LnVpci1pY29udy1zcGlubmVye2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiICsgcmVxdWlyZShcIi4uLy4uL2ltYWdlcy93LzE2L3NwaW5uZXIucG5nXCIpICsgXCIpfS51aXItaWNvbnctY2hlY2t7YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyByZXF1aXJlKFwiLi4vLi4vaW1hZ2VzL3cvMTYvY2hlY2sucG5nXCIpICsgXCIpfS51aXItaWNvbnctY2lyY2xlLW97YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyByZXF1aXJlKFwiLi4vLi4vaW1hZ2VzL3cvMTYvY2lyY2xlLW8ucG5nXCIpICsgXCIpfS51aXItaWNvbnctc2hhcmV7YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyByZXF1aXJlKFwiLi4vLi4vaW1hZ2VzL3cvMTYvc2hhcmUucG5nXCIpICsgXCIpfS51aXItaWNvbnctY2xvc2V7YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyByZXF1aXJlKFwiLi4vLi4vaW1hZ2VzL3cvMTYvY2xvc2UucG5nXCIpICsgXCIpfS51aXItaWNvbi10aHVtYi10YWNre2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiICsgcmVxdWlyZShcIi4uLy4uL2ltYWdlcy8xNi90aHVtYi10YWNrLnBuZ1wiKSArIFwiKX0udWlyLWljb24tdG9nZ2xlLW9ue2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiICsgcmVxdWlyZShcIi4uLy4uL2ltYWdlcy8xNi90b2dnbGUtb24ucG5nXCIpICsgXCIpfS51aXItaWNvbi10b2dnbGUtb2Zme2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiICsgcmVxdWlyZShcIi4uLy4uL2ltYWdlcy8xNi90b2dnbGUtb2ZmLnBuZ1wiKSArIFwiKX1cIiwgXCJcIiwge1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wiLy4vc3JjL3RyYW5zaXRpb24vdHJhbnNpdGlvblZpc3VhbGl6ZXIuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQU1BLG1CQUNJLGFBQWMsQUFDZCxxQkFBc0IsQUFDdEIsZUFBZ0IsQUFDaEIsT0FBUSxBQUNSLFNBQVUsQUFDVixRQUFTLEFBQ1QsY0FBZSxBQUNmLGtCQUFtQixBQUNuQixVQUFXLEFBRVgsbUJBQXFCLENBQ3hCLEFBRUQscUJBRUksbUJBQW9CLEFBQ3BCLGFBQWUsQ0FDbEIsQUFJRCwrQkFDSSxLQUFPLENBQ1YsQUFHRCxpQ0FDSSxrQkFBbUIsQUFDbkIsa0JBQW1CLEFBQ25CLGtCQUFtQixBQUNuQixrQkFBbUIsQUFDbkIsaUJBQWtCLEFBQ2xCLFdBQVksQUFDWixjQUFnQixDQUNuQixBQUlELDREQUNJLFdBQVksQUFDWixrQkFBbUIsQUFDbkIsbUJBQXFCLEFBQ3JCLE9BQVEsQUFDUixhQUFjLEFBQ2QsV0FBWSxBQUNaLHNCQUF3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QUEyQiw4Q0FBd0QsQ0FBRVwiLFwiZmlsZVwiOlwidHJhbnNpdGlvblZpc3VhbGl6ZXIuY3NzXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIi8qXFxuICAgIC50cmFuc2l0aW9uSGlzdG9yeSBpcyB0aGUgYnJlYWRjcnVtYnMgYW5kIHRyYW5zaXRpb24gZGV0YWlscyBibG9jay5cXG4gICAgSXQgZmlsbHMgdGhlIGZvb3RlciBvZiB0aGUgc2NyZWVuLCBhbmQgc2Nyb2xscyBob3Jpem9udGFsbHkuXFxuICAgIE1vdXNlIGNsaWNrcyBzaG91bGQgcGFzcyB0aHJvdWdoIHRvIHRoZSBlbGVtZW50cyB1bmRlcm5lYXRoLlxcbiovXFxuXFxuLnRyYW5zaXRpb25IaXN0b3J5IHtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xcbiAgICBwb3NpdGlvbjogZml4ZWQ7XFxuICAgIGxlZnQ6IDA7XFxuICAgIGJvdHRvbTogMDtcXG4gICAgcmlnaHQ6IDA7XFxuICAgIHBhZGRpbmc6IDAgMWVtO1xcbiAgICBvdmVyZmxvdy14OiBzY3JvbGw7XFxuICAgIHotaW5kZXg6IDI7XFxuICAgIC8qIGRpc2FibGUgbW91c2UgY2xpY2tzLCBob3ZlciwgZXRjLCBmb3IgdGhlIG92ZXJhbGwgZGl2ICovXFxuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbn1cXG5cXG4udHJhbnNpdGlvbkhpc3RvcnkgKiB7XFxuICAgIC8qIEVuYWJsZSBtb3VzZSBmb3IgYW55IHN1Yi1lbGVtZW50cyAodGhlIGJyZWFkY3J1bWIgZWxlbWV0bnMgYW5kIGRldGFpbCBlbGVtZW50cykgKi9cXG4gICAgcG9pbnRlci1ldmVudHM6IGFsbDtcXG4gICAgZmxleDogMCAwIGF1dG87XFxufVxcblxcbi8qICB3b3JrYXJvdW5kIGZvciBtb2RhbCBzY3JlZW4sIGFuZCBjaHJvbWUgYW5kIHNhZmFyaSBub3QgYWxsb3dpbmcgaXQgdG8gYmVcXG4gICAgdmlzaWJsZSBvdXRzaWRlIHRoZSAudHJhbnNpdGlvbkhpc3Rvcnkgb3ZlcmZsb3cgd2hpbGUgdGhlIC50cmFuc2l0aW9uSGlzdG9yeSBkaXYgaXMgc2Nyb2xsZWQgKi9cXG4uZnVsbFNjcmVlbiAudHJhbnNpdGlvbkhpc3Rvcnkge1xcbiAgICB0b3A6IDA7XFxufVxcblxcbi8qIEEgc2luZ2xlIGhpc3RvcnkgZW50cnkgKGJyZWFkY3J1bWIpIGFycm93IGxvb2tpbmcgdGhpbmcgKi9cXG4udHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeSB7XFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICBwYWRkaW5nOiAxMnB4IDMwcHg7XFxuICAgIG1hcmdpbi1ib3R0b206IDZweDtcXG4gICAgbWFyZ2luLXJpZ2h0OiA2cHg7XFxuICAgIGNvbG9yOiAjMDAwO1xcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxufVxcblxcblxcbi8qIEhpc3RvcnkgZW50cnkgYXJyb3cgQ1NTICovXFxuLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnk6YmVmb3JlLC5oaXN0b3J5RW50cnk6YWZ0ZXIge1xcbiAgICBjb250ZW50OiAnJztcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICBiYWNrZ3JvdW5kOiBkYXJrZ3JleTtcXG4gICAgbGVmdDogMDtcXG4gICAgaGVpZ2h0OiA1MC4yJTsgLyogKzAuMiUgc28gZmlyZWZveCBkb2Vzbid0IHJlbmRlciBhIHdoaXRlIGxpbmUgZG93biB0aGUgY2VudGVyICovXFxuICAgIHdpZHRoOiAxMDAlO1xcbiAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gICAgei1pbmRleDogLTE7XFxufVxcblxcbi50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5OmJlZm9yZSB7XFxuICAgIHRvcDogMDtcXG4gICAgYm9yZGVyLWJvdHRvbTogMDtcXG4gICAgLXdlYmtpdC10cmFuc2Zvcm06IHNrZXcoNDBkZWcsIDBkZWcpO1xcbiAgICAtbXMtdHJhbnNmb3JtOiBza2V3KDQwZGVnLCAwZGVnKTtcXG4gICAgdHJhbnNmb3JtOiBza2V3KDQwZGVnLCAwZGVnKTtcXG59XFxuXFxuLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnk6YWZ0ZXIge1xcbiAgICBib3R0b206IDA7XFxuICAgIGJvcmRlci10b3A6IDA7XFxuICAgIC13ZWJraXQtdHJhbnNmb3JtOiBza2V3KC00MGRlZywgMGRlZyk7XFxuICAgIC1tcy10cmFuc2Zvcm06IHNrZXcoLTQwZGVnLCAwZGVnKTtcXG4gICAgdHJhbnNmb3JtOiBza2V3KC00MGRlZywgMGRlZyk7XFxufVxcblxcbi8qLmhpc3RvcnlFbnRyeTo6YmVmb3JlIGhlaWdodDogNTElICh8fCA6OmFmdGVyKSAqL1xcblxcbi8qIFN0eWxpbmcgZm9yIGJyZWFkY3J1bWIgY29udGVudHMgKi9cXG4uaGlzdG9yeUVudHJ5IC5zdW1tYXJ5IHtcXG4gICAgY29sb3I6IHdoaXRlO1xcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbiAgICBmb250LXNpemU6IHNtYWxsO1xcbn1cXG5cXG4uaGlzdG9yeUVudHJ5IC5zdW1tYXJ5IC50cmFuc2lkIHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB0b3A6IDAuMWVtO1xcbiAgICBsZWZ0OiAwLjg1ZW07XFxuICAgIGZvbnQtc2l6ZTogc21hbGxlcjtcXG59XFxuXFxuLmhpc3RvcnlFbnRyeSAuc3VtbWFyeSAuc3RhdHVzIHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICBib3R0b206IDAuMWVtO1xcbiAgICBsZWZ0OiAwLjg1ZW07XFxuICAgIGZvbnQtc2l6ZTogc21hbGxlcjtcXG59XFxuLmhpc3RvcnlFbnRyeSAuc3VtbWFyeSAudHJhbnNuYW1lIHtcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZmxvdzogcm93IG5vd3JhcDtcXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXJcXG59XFxuXFxuLyogYnJlYWRjcnVtYi9oaXN0b3J5IGVudHJ5IGNvbG9yIGNvZGluZyAqL1xcbi50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5OmJlZm9yZSwuaGlzdG9yeUVudHJ5OmFmdGVyIHtcXG4gICAgYmFja2dyb3VuZDogIzczNzM3MztcXG59XFxuLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnk6aG92ZXI6YmVmb3JlLC5oaXN0b3J5RW50cnk6aG92ZXI6YWZ0ZXIge1xcbiAgICBiYWNrZ3JvdW5kOiAjYTZhNmE2O1xcbn1cXG5cXG4udHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeS5zdWNjZXNzOmJlZm9yZSwuaGlzdG9yeUVudHJ5LnN1Y2Nlc3M6YWZ0ZXIge1xcbiAgICBiYWNrZ3JvdW5kOiAjNDU4MDNiO1xcbn1cXG4udHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeS5zdWNjZXNzOmhvdmVyOmJlZm9yZSwuaGlzdG9yeUVudHJ5LnN1Y2Nlc3M6aG92ZXI6YWZ0ZXIge1xcbiAgICBiYWNrZ3JvdW5kOiAjMTlhNjAwO1xcbn1cXG5cXG5cXG4udHJhbnNpdGlvbkhpc3RvcnkgLmhpc3RvcnlFbnRyeS5lcnJvcjpiZWZvcmUsLmhpc3RvcnlFbnRyeS5lcnJvcjphZnRlciB7XFxuICAgIGJhY2tncm91bmQ6ICNiZjFmMWQ7XFxufVxcbi50cmFuc2l0aW9uSGlzdG9yeSAuaGlzdG9yeUVudHJ5LmVycm9yOmhvdmVyOmJlZm9yZSwuaGlzdG9yeUVudHJ5LmVycm9yOmhvdmVyOmFmdGVyIHtcXG4gICAgYmFja2dyb3VuZDogI2U2MjYyMjtcXG59XFxuXFxuXFxuLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnkuaWdub3JlZDpiZWZvcmUsLmhpc3RvcnlFbnRyeS5pZ25vcmVkOmFmdGVyIHtcXG4gICAgYmFja2dyb3VuZDogI2U2OGIwNTtcXG59XFxuLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnkuaWdub3JlZDpob3ZlcjpiZWZvcmUsLmhpc3RvcnlFbnRyeS5pZ25vcmVkOmhvdmVyOmFmdGVyIHtcXG4gICAgYmFja2dyb3VuZDogI2ZmOTgwODtcXG59XFxuXFxuLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnkucmVkaXJlY3RlZDpiZWZvcmUsLmhpc3RvcnlFbnRyeS5yZWRpcmVjdGVkOmFmdGVyIHtcXG4gICAgYmFja2dyb3VuZDogI2U2OGIwNTtcXG59XFxuLnRyYW5zaXRpb25IaXN0b3J5IC5oaXN0b3J5RW50cnkucmVkaXJlY3RlZDpob3ZlcjpiZWZvcmUsLmhpc3RvcnlFbnRyeS5yZWRpcmVjdGVkOmhvdmVyOmFmdGVyIHtcXG4gICAgYmFja2dyb3VuZDogI2ZmOTgwODtcXG59XFxuXFxuLnRyYW5zaXRpb25IaXN0b3J5IC5rZXl2YWx1ZSB7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZmxvdzogcm93IG5vd3JhcDtcXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbn1cXG5cXG5cXG5cXG5cXG5cXG5cXG5cXG4vKiBUaGUgdHJhbnNpdGlvbiBkZXRhaWwgcG9wb3ZlciAod2hlbiBob3ZlcmluZyBvdmVyIGEgYnJlYWRjcnVtYikgKi9cXG4udHJhbnNpdGlvbkRldGFpbCB7XFxuICAgIGJvcmRlcjogMXB4IHNvbGlkIGxpZ2h0Z3JleTtcXG4gICAgZm9udC1zaXplOiBzbWFsbDtcXG4gICAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAwLjVzIGVhc2UsICBib3JkZXIgMS4wcyBlYXNlXFxufVxcblxcbi8qIFBvaW50ZXIgZWxlbWVudCBwb2ludHMgZnJvbSB0aGUgdHJhbnNpdGlvbkRldGFpbCB0byB0aGUgYnJlYWRjcnVtYiAqL1xcbi50cmFuc2l0aW9uRGV0YWlsIC5kb3duQXJyb3cge1xcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICAgIHdpZHRoOiAxMDAlO1xcbiAgICBib3R0b206IC0xMHB4O1xcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCAuZG93bkFycm93OmJlZm9yZSwgLnRyYW5zaXRpb25EZXRhaWwgLmRvd25BcnJvdzphZnRlciB7XFxuICAgIGNvbnRlbnQ6IFxcXCJcXFwiO1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIGJvcmRlci1sZWZ0OiAxMHB4IHNvbGlkIHRyYW5zcGFyZW50O1xcbiAgICBib3JkZXItcmlnaHQ6IDEwcHggc29saWQgdHJhbnNwYXJlbnQ7XFxuICAgIHRvcDogMTAwJTtcXG4gICAgbGVmdDogNTAlO1xcbiAgICBtYXJnaW4tbGVmdDogLTEwcHg7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIC5kb3duQXJyb3c6YmVmb3JlIHtcXG4gICAgYm9yZGVyLXRvcDogMTBweCBzb2xpZCBsaWdodGdyYXk7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIC5kb3duQXJyb3c6YWZ0ZXJ7XFxuICAgIGJvcmRlci10b3A6IDEwcHggc29saWQgd2hpdGU7XFxuICAgIG1hcmdpbi10b3A6IC0xcHg7XFxuICAgIHotaW5kZXg6IDE7XFxufVxcblxcblxcbi8qIFRoZSBsYXlvdXQgYW5kIHN0eWxpbmcgb2YgdGhlIHRyYW5zaXRpb24gZGV0YWlsIHBvcG92ZXIgKi9cXG4udHJhbnNpdGlvbkRldGFpbCAucGFuZWwtaGVhZGluZyB7XFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgdGFibGUge1xcbiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCB0aCB7XFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gICAgZm9udC1zaXplOiBzbWFsbDtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgLnVpci1oZWFkZXIge1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWZsb3c6IHJvdy1yZXZlcnNlIG5vd3JhcDtcXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgICBhbGlnbi1pdGVtczogYmFzZWxpbmU7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIC51aXItaGVhZGVyID4gKiAge1xcbiAgICBmbGV4OiAwIDEgYXV0bztcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgLnVpci1oZWFkZXIgPiAqIGkge1xcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC41cyBlYXNlO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCB0YWJsZS5wYXRocyB7XFxuICAgIG1pbi13aWR0aDogMjVlbTtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgdGFibGUucGF0aHMgdGQge1xcbiAgICBjb2xvcjogd2hpdGU7XFxuICAgIGJvcmRlcjogMDtcXG4gICAgZm9udC1zaXplOiBzbWFsbDtcXG4gICAgbWluLXdpZHRoOiAxMGVtO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCAuc3VtbWFyeSAua2V5dmFsdWUge1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQgIWltcG9ydGFudDtcXG4gICAgYWxpZ24taXRlbXM6IGJhc2VsaW5lO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCAuc3VtbWFyeSAua2V5dmFsdWUgPiBkaXY6bnRoLWNoaWxkKDIpe1xcbiAgICBwYWRkaW5nLWxlZnQ6IDAuNWVtO1xcbiAgICBmb250LXdlaWdodDogbm9ybWFsO1xcbn1cXG5cXG5cXG4udHJhbnNpdGlvbkRldGFpbCB0YWJsZS5zdW1tYXJ5IHtcXG4gICAgbWF4LXdpZHRoOiA0MDBweDtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgdGFibGUuc3VtbWFyeSB0ZCB7XFxuICAgIGZvbnQtc2l6ZTogc21hbGw7XFxuICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIHRhYmxlLnN1bW1hcnkgdGQ6bnRoLWNoaWxkKDEpIHtcXG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgdGFibGUuc3VtbWFyeSB0ZDpudGgtY2hpbGQoMikge1xcbiAgICBmb250LXdlaWdodDogYm9sZDtcXG4gICAgcGFkZGluZy1sZWZ0OiAxZW07XFxufVxcblxcblxcbi50cmFuc2l0aW9uRGV0YWlsIHRkIHtcXG4gICAgcGFkZGluZzogMDtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgdGQgLmZsb3dBcnJvd0NlbGwge1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWZsb3c6IGNvbHVtbiBub3dyYXA7XFxuICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XFxuICAgIHdpZHRoOiAxZW07XFxuICAgIHRyYW5zaXRpb246IHdpZHRoIDAuMjVzIGVhc2U7XFxuICAgIGhlaWdodDogYXV0bztcXG59XFxuLnRyYW5zaXRpb25EZXRhaWwuZXhwYW5kIHRkIC5mbG93QXJyb3dDZWxsIHsgd2lkdGg6IDJlbTsgfVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIC5leGl0ICAuZmxvd0Fycm93U3ZnICAgICAgICAgIHsgcmlnaHQ6IDA7IH1cXG4udHJhbnNpdGlvbkRldGFpbCAuZW50ZXIgLmZsb3dBcnJvd1N2ZyAgICAgICAgICB7IGxlZnQ6IDA7IH1cXG4udHJhbnNpdGlvbkRldGFpbCAgICAgICAgLmZsb3dBcnJvd1N2Zy5ib3R0b20gICB7IGJvdHRvbTogMCB9XFxuLnRyYW5zaXRpb25EZXRhaWwgICAgICAgIC5mbG93QXJyb3dTdmcudG9wICAgICAgeyB0b3A6IDAgfVxcbi50cmFuc2l0aW9uRGV0YWlsICAgICAgICAuZmxvd0Fycm93U3ZnIHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB3aWR0aDogMTAwJTtcXG4gICAgaGVpZ2h0OiBhdXRvO1xcbiAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjI1cyBlYXNlO1xcbn1cXG5cXG4vKiBjb2xvciBjb2RlIHBhdGggZWxlbWVudHMgYnkgcmV0YWluZWQvZXhpdGVkL2VudGVyZWQgKi9cXG4udHJhbnNpdGlvbkRldGFpbCAucmV0YWluIHtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzczNzI3MztcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgLmV4aXQge1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2MxMDEwO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCAuZW50ZXIge1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzE1OTJhO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCAuZGVlbXBoYXNpemUge1xcbiAgICBjb2xvcjogI2VhZWFlYTtcXG4gICAgZm9udC1zaXplOiB4LXNtYWxsO1xcbn1cXG5cXG4vKiBTdHlsaW5nIGZvciBwYXJhbWV0ZXIgdmFsdWVzIGFuZCByZXNvbHZlIHZhbHVlcyAqL1xcbi50cmFuc2l0aW9uRGV0YWlsIC5wYXJhbXMge1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LDAuMTUpO1xcbiAgICBwYWRkaW5nOiAwO1xcbiAgICBvcGFjaXR5OiAwO1xcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDFzIGVhc2U7XFxuICAgIG1heC1oZWlnaHQ6IDA7XFxuICAgIG1heC13aWR0aDogMTUwcHg7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsLmV4cGFuZCAucGFyYW1zIHtcXG4gICAgZGlzcGxheTogYmxvY2s7XFxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcXG4gICAgYm94LXNoYWRvdzogMXB4IDFweCAycHggYmxhY2s7XFxuICAgIHBhZGRpbmc6IDAuNWVtO1xcbiAgICBtYXgtaGVpZ2h0OiAyNTBweDtcXG4gICAgbWF4LXdpZHRoOiAzMDBweDtcXG4gICAgb3ZlcmZsb3cteTogYXV0bztcXG4gICAgb3BhY2l0eTogMTtcXG4gICAgbWFyZ2luOiAwLjVlbSAwO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbC5waW4ge1xcbiAgICBib3gtc2hhZG93OiA0cHggNHB4IDEycHggcmdiYSgwLDAsMCwwLjMpO1xcbiAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwucGluIC5kb3duQXJyb3c6YmVmb3JlIHtcXG4gICAgYm9yZGVyLXRvcC1jb2xvcjogYmxhY2s7XFxufVxcblxcblxcbi8qIFdoZW4gc2hvd2luZyBleHBhbmRlZCBkZXRhaWxzLCBwdXQgc3BhY2UgYmV0d2VlbiBwYXRoIGVsZW1lbnRzICovXFxuLnRyYW5zaXRpb25EZXRhaWwuZXhwYW5kIHRhYmxlLnBhdGhzIHRkIHtcXG4gICAgbWF4LWhlaWdodDogMTAwcHg7XFxuICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIC51aXJUcmFuc1Zpc1JvdyB7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZmxvdzogcm93IG5vd3JhcDtcXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgICBhbGlnbi1pdGVtczogc3RyZXRjaDtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgLnVpclRyYW5zVmlzUm93ID4gZGl2IHtcXG4gICAgZmxleDogMSAwIDUwJTtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgLnVpck5vZGVDb250ZW50IHtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1mbG93OiByb3cgbm93cmFwO1xcbiAgICBtaW4taGVpZ2h0OiAxZW07XFxuICAgIHRyYW5zaXRpb246IG1pbi1oZWlnaHQgMC4yNXMgZWFzZTtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwuZXhwYW5kIC51aXJOb2RlQ29udGVudCB7XFxuICAgIG1pbi1oZWlnaHQ6IDVlbTtcXG59XFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgLnVpck5vZGVEZXRhaWwge1xcbiAgICBmbGV4OiAxIDAgYXV0bztcXG4gICAgcGFkZGluZzogMC4yZW0gMC41ZW07XFxufVxcblxcbi50cmFuc2l0aW9uRGV0YWlsIC5zdGF0ZW5hbWUge1xcbiAgICBmb250LXdlaWdodDogYm9sZGVyO1xcbiAgICBtYXJnaW4tcmlnaHQ6IDFlbTtcXG4gICAgbWFyZ2luLWxlZnQ6IDA7XFxufVxcbi50cmFuc2l0aW9uRGV0YWlsIC5lbnRlciAuc3RhdGVuYW1lIHtcXG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xcbiAgICBtYXJnaW4tbGVmdDogMWVtO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCAubm93cmFwIHtcXG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcXG59XFxuXFxuLnRyYW5zaXRpb25IaXN0b3J5IC5wYXJhbWlkIHtcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcXG4gICAgY29sb3I6ICNlYWVhZWE7XFxuICAgIG1hcmdpbi1yaWdodDogMC41ZW07XFxufVxcblxcbi50cmFuc2l0aW9uSGlzdG9yeSAucGFyYW1zbGFiZWwge1xcbiAgICBjb2xvcjogd2hpdGU7XFxuICAgIG1hcmdpbi10b3A6IC0wLjVlbTtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICBmb250LXdlaWdodDogYm9sZDtcXG59XFxuXFxuLnRyYW5zaXRpb25IaXN0b3J5IC5yZXNvbHZlbGFiZWwge1xcbiAgICBjb2xvcjogd2hpdGU7XFxuICAgIG1hcmdpbi10b3A6IC0wLjVlbTtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICBmb250LXdlaWdodDogYm9sZDtcXG59XFxuXFxuLnRyYW5zaXRpb25IaXN0b3J5IC5wYXJhbXZhbHVlIHtcXG4gICAgY29sb3I6ICNlNmU2ZTY7XFxufVxcblxcblxcblxcbnNwYW4ubGluayB7XFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XFxufVxcblxcblxcbi50b29sdGlwLXJpZ2h0IHtcXG4gICAgZGlzcGxheTogaW5saW5lO1xcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICAgIHRyYW5zaXRpb246IGFsbCAxLjVzIGVhc2U7XFxufVxcblxcbi50b29sdGlwLXJpZ2h0OmFmdGVyIHtcXG4gICAgY29sb3I6IHJnYmEoMCwwLDAsMCk7XFxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXG4gICAgdHJhbnNpdGlvbjogYWxsIDEuNXMgZWFzZTtcXG59XFxuXFxuLnRvb2x0aXAtcmlnaHQ6aG92ZXI6YWZ0ZXIge1xcbiAgICBib3R0b206IDA7XFxuICAgIGNvbG9yOiByZ2JhKDAsMCwwLDAuNSk7XFxuICAgIGNvbnRlbnQ6IGF0dHIodGl0bGUpO1xcbiAgICBkaXNwbGF5OiBibG9jaztcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbiAgICBmb250LXNpemU6IHNtYWxsZXI7XFxufVxcblxcblxcblxcbi8qIEJvb3RzdHJhcCBzdHVmZiAqL1xcblxcbi51aXItbW9kYWwgLmJ0bi1wcmltYXJ5IHtcXG4gICAgY29sb3I6ICNmZmY7XFxuICAgIGJhY2tncm91bmQtY29sb3I6ICMzMzdhYjc7XFxuICAgIGJvcmRlci1jb2xvcjogIzJlNmRhNDtcXG59XFxuXFxuLnVpci1tb2RhbCAuYnRuIHtcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgICBwYWRkaW5nOiA2cHggMTJweDtcXG4gICAgbWFyZ2luLWJvdHRvbTogMDtcXG4gICAgZm9udC1zaXplOiAxNHB4O1xcbiAgICBmb250LXdlaWdodDogbm9ybWFsO1xcbiAgICBsaW5lLWhlaWdodDogMS40Mjg1NzE0MztcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcbiAgICAtbXMtdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XFxuICAgIHRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uO1xcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxuICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XFxuICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XFxuICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcXG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuICAgIGJhY2tncm91bmQtaW1hZ2U6IG5vbmU7XFxuICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50O1xcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XFxufVxcblxcbi51aXItbW9kYWwgLmJ0bi14cywgLmJ0bi1ncm91cC14cyA+IC5idG4ge1xcbiAgICBwYWRkaW5nOiAxcHggNXB4O1xcbiAgICBmb250LXNpemU6IDEycHg7XFxuICAgIGxpbmUtaGVpZ2h0OiAxLjU7XFxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcXG59XFxuXFxuXFxuLnRyYW5zaXRpb25EZXRhaWwgc3Bhbi5saW5rIHtcXG4gICAgY29sb3I6IHdoaXRlO1xcbn1cXG5cXG4udHJhbnNpdGlvbkhpc3RvcnkgKjpub3QoLmZhKTpub3QocHJlKSB7XFxuICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCAuZW50ZXIgLnVpci1oZWFkZXIge1xcbiAgICBmbGV4LWZsb3c6IHJvdyBub3dyYXA7XFxufVxcbi50cmFuc2l0aW9uRGV0YWlsIC51aXItaGVhZGVyIHtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1mbG93OiByb3ctcmV2ZXJzZSBub3dyYXA7XFxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcXG4gICAgYWxpZ24taXRlbXM6IGJhc2VsaW5lO1xcbn1cXG5cXG4udHJhbnNpdGlvbkRldGFpbCAucmV0YWluIC51aXItaGVhZGVyIHtcXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxufVxcblxcbi51aXItcGFuZWwge1xcbiAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xcbiAgICBib3JkZXI6IDFweCBzb2xpZCBsaWdodGdyZXk7XFxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcXG4gICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAuMDUpO1xcbiAgICBib3gtc2hhZG93OiAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAuMDUpO1xcbn1cXG5cXG4udWlyLXBhbmVsLWhlYWRpbmcge1xcbiAgICBjb2xvcjogIzMzMztcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcXG4gICAgYm9yZGVyLWNvbG9yOiAjZGRkO1xcblxcbiAgICBwYWRkaW5nOiAxMHB4IDE1cHg7XFxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcXG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogM3B4O1xcbiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogM3B4O1xcbn1cXG5cXG4udWlyLXBhbmVsLXRpdGxlIHtcXG4gICAgbWFyZ2luLXRvcDogMDtcXG4gICAgbWFyZ2luLWJvdHRvbTogMDtcXG4gICAgZm9udC1zaXplOiAxNnB4O1xcbiAgICBjb2xvcjogaW5oZXJpdDtcXG59XFxuXFxuLnVpci1wYW5lbC1ib2R5IHtcXG4gICAgcGFkZGluZzogMTVweDtcXG59XFxuXFxuXFxuXFxuXFxuXFxuLyogU3R5bGVzIGdvIGhlcmUgKi9cXG4udWlyLWZhZGUge1xcbiAgICBvcGFjaXR5OiAwO1xcbiAgICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgLjE1cyBsaW5lYXI7XFxuICAgIC1vLXRyYW5zaXRpb246IG9wYWNpdHkgLjE1cyBsaW5lYXI7XFxuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgLjE1cyBsaW5lYXI7XFxufVxcblxcbi51aXItZmFkZS5pbiB7XFxuICAgIG9wYWNpdHk6IDE7XFxufVxcblxcbi51aXItbW9kYWwtYmFja2Ryb3Age1xcbiAgICBwb3NpdGlvbjogZml4ZWQ7XFxuICAgIHRvcDogMDtcXG4gICAgcmlnaHQ6IDA7XFxuICAgIGJvdHRvbTogMDtcXG4gICAgbGVmdDogMDtcXG4gICAgei1pbmRleDogMTA0MDtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcXG59XFxuXFxuLnVpci1tb2RhbC1iYWNrZHJvcC5pbiB7XFxuICAgIGZpbHRlcjogYWxwaGEob3BhY2l0eT01MCk7XFxuICAgIG9wYWNpdHk6IC41O1xcbn1cXG5cXG4udWlyLW1vZGFsIHtcXG4gICAgcG9zaXRpb246IGZpeGVkO1xcbiAgICB0b3A6IDA7XFxuICAgIHJpZ2h0OiAwO1xcbiAgICBib3R0b206IDA7XFxuICAgIGxlZnQ6IDA7XFxuICAgIHotaW5kZXg6IDEwNTA7XFxuICAgIGRpc3BsYXk6IGJsb2NrO1xcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xcbiAgICAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7XFxuICAgIG91dGxpbmU6IDA7XFxufVxcblxcblxcbi51aXItbW9kYWwtZGlhbG9nIHtcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgICB3aWR0aDogYXV0bztcXG4gICAgbWFyZ2luOiAxMHB4O1xcbn1cXG5cXG4udWlyLW1vZGFsLWNvbnRlbnQge1xcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XFxuICAgIC13ZWJraXQtYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDtcXG4gICAgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDtcXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzk5OTtcXG4gICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAuMik7XFxuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcXG4gICAgb3V0bGluZTogMDtcXG4gICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDNweCA5cHggcmdiYSgwLCAwLCAwLCAuNSk7XFxuICAgIGJveC1zaGFkb3c6IDAgM3B4IDlweCByZ2JhKDAsIDAsIDAsIC41KTtcXG59XFxuXFxuLnVpci1tb2RhbC1oZWFkZXIge1xcbiAgICBwYWRkaW5nOiAxNXB4O1xcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2U1ZTVlNTtcXG59XFxuXFxuLnVpci1yZXNvbHZlLWhlYWRlciB7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZmxvdzogcm93IG5vd3JhcDtcXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBjb3JuZmxvd2VyYmx1ZTtcXG59XFxuXFxuLnVpci1tb2RhbC1ib2R5IHtcXG4gICAgY29sb3I6IGJsYWNrO1xcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICAgIHBhZGRpbmc6IDE1cHg7XFxufVxcblxcbi51aXItbW9kYWwtZm9vdGVyIHtcXG4gICAgcGFkZGluZzogMTVweDtcXG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XFxuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTVlNWU1O1xcbn1cXG5cXG4udWlyLWljb24ge1xcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICAgIGhlaWdodDogMWVtOyB3aWR0aDogMWVtO1xcbiAgICBtYXJnaW46IDAuMjVlbTtcXG4gICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcXG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAwO1xcbn1cXG5cXG4udWlyLXNwaW4ge1xcbiAgICBhbmltYXRpb246IHVpcnNwaW4gMnMgaW5maW5pdGU7XFxuICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xcbn1cXG5cXG4udWlyLXJvdGF0ZS0zNSB7XFxuICAgIHRyYW5zZm9ybTogcm90YXRlKDM1ZGVnKTtcXG4gICAgb3BhY2l0eTogMC41O1xcbn1cXG5cXG5Aa2V5ZnJhbWVzIHVpcnNwaW4ge1xcbiAgICAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9XFxuICAgIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XFxufVxcblxcblxcbi51aXItaWNvbnctc3Bpbm5lciAgICAgICB7IGJhY2tncm91bmQtaW1hZ2U6IHVybChcXFwiLi4vLi4vaW1hZ2VzL3cvMTYvc3Bpbm5lci5wbmdcXFwiKTsgfVxcbi51aXItaWNvbnctY2hlY2sgICAgICAgICB7IGJhY2tncm91bmQtaW1hZ2U6IHVybChcXFwiLi4vLi4vaW1hZ2VzL3cvMTYvY2hlY2sucG5nXFxcIik7IH1cXG4udWlyLWljb253LWNpcmNsZS1vICAgICAgeyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXFxcIi4uLy4uL2ltYWdlcy93LzE2L2NpcmNsZS1vLnBuZ1xcXCIpOyB9XFxuLnVpci1pY29udy1zaGFyZSAgICAgICAgIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKFxcXCIuLi8uLi9pbWFnZXMvdy8xNi9zaGFyZS5wbmdcXFwiKTsgfVxcbi51aXItaWNvbnctY2xvc2UgICAgICAgICB7IGJhY2tncm91bmQtaW1hZ2U6IHVybChcXFwiLi4vLi4vaW1hZ2VzL3cvMTYvY2xvc2UucG5nXFxcIik7IH1cXG5cXG4udWlyLWljb24tdGh1bWItdGFjayAgICAgeyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXFxcIi4uLy4uL2ltYWdlcy8xNi90aHVtYi10YWNrLnBuZ1xcXCIpOyB9XFxuLnVpci1pY29uLXRvZ2dsZS1vbiAgICAgIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKFxcXCIuLi8uLi9pbWFnZXMvMTYvdG9nZ2xlLW9uLnBuZ1xcXCIpOyB9XFxuLnVpci1pY29uLXRvZ2dsZS1vZmYgICAgIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKFxcXCIuLi8uLi9pbWFnZXMvMTYvdG9nZ2xlLW9mZi5wbmdcXFwiKTsgfVxcblwiXSxcInNvdXJjZVJvb3RcIjpcIndlYnBhY2s6Ly9cIn1dKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nzcy1sb2FkZXI/c291cmNlTWFwIS4vc3JjL3RyYW5zaXRpb24vdHJhbnNpdGlvblZpc3VhbGl6ZXIuY3NzXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUJtSkxSMFFBL3dEL0FQK2d2YWVUQUFBQkNFbEVRVlE0amEyU01VNENZUkNGMzREYjZSSVNtaTA0Z0NaYWNnRHVZRWxEWWNGWkxMV3gxYzRiNkJFMHNiYXlzQkVoMGFDZG0zdzJzektRLzFjVG1HU3orNzk1ODk3TXptL0tCR0NTanYxNGJXYmt1RG1CQ2N1WTVIaXRVTkFHeHNEUW9TcndLdUFBZUFUZWdWSEtjZXh1WDBBRmRJRUxmN3JBVmVqb3JhbmJDUnBQa21wSlUwa2ZadllwNlNRWXZBUnUvRjdwb2dKMk03azk0QlM0QlBiWGt3WVVTZFcwV09GYitnRnVnVmVnOTQvaUhqQURicVRsRmxoNy82bXp3dDE0aEswRTBBSHVnYk5mT09mQUhWQTJXTHdIcGFSRGhkbWFuMnBtYzRjR2tvNGtkU1F0VWc3OVJ0M25uUGwyQ3NkS29COXJZZ2N5cytkd3JDVTllRWUxNXhkSjUwM2lHem9qNGZPaURqMEZBQUFBQUVsRlRrU3VRbUNDXCJcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2ltYWdlcy93LzE2L3NwaW5uZXIucG5nXG4vLyBtb2R1bGUgaWQgPSAyM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUJtSkxSMFFBL3dEL0FQK2d2YWVUQUFBQWMwbEVRVlE0amVYUXV3bUFRQkNFNFN2RU93T3R3akswS0VFUURPek9SeUQyOFJ0NHduTG9QWXdFSjkzNUpsaWwvaFVnQjBhZ2ZJdFh6dXlBU2NGRzRDdTFXeXFBQWRBUnVIT3hCalo3bklGTTRNV0xiYkZ4U2hOUVJXRXgwdUpQSC9Pc3A1RXc5b3pFNDV1UmRDeEdkTGoxaFJ6cFF3TlAyQ3d2NndBQUFBQkpSVTVFcmtKZ2dnPT1cIlxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vaW1hZ2VzL3cvMTYvY2hlY2sucG5nXG4vLyBtb2R1bGUgaWQgPSAyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUJtSkxSMFFBL3dEL0FQK2d2YWVUQUFBQXpFbEVRVlE0amFXVFBRN0NNQXlGbnprTDdJVU5SdG9EbFB1Z1NreGNpd2xXRnJyMENIQ0dmZ3c0cUdyVEZCVkxVU1Q3K2ZubkpkS2ZaakVuWUpMV2twYnVhaVRkell4SlJ1QUExQXl0QnNxcDVCUFFlc0lGT1B1NXVLOEZxbFRsRm5nQ2VTU2VBeS9IbFAyZ2RkcmVKenJNSGZQd1BYMERtOUIyY3NZUE5veVRTZExDL1dIYjF5a0NTVGUvVjEyQzJSWUlHcjkzUCtSc2V6bURKUTRVNk9DSzZCSTlHR1I4amNoWWpNcllBVlUvUEtSamNrQ2c5QmI3OW9oVmpuNG1KOHJrVWtscXpPeWVyRHpYM3BEOUhna1lkV1RWQUFBQUFFbEZUa1N1UW1DQ1wiXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9pbWFnZXMvdy8xNi9jaXJjbGUtby5wbmdcbi8vIG1vZHVsZSBpZCA9IDI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQm1KTFIwUUEvd0QvQVArZ3ZhZVRBQUFBMFVsRVFWUTRqYjJTdlE0QlFSU0Z6L1dYU0VTRjBHNmo4ZzdpQVhRYTRRRTBhaStpcDlaSVJEVGVRVUdqVUpKNEJVcytoZGxrYlZpeEVxZVp5WjA1MzUyWk05Sy9CQ3lBemkrQUEzQUZ1dUY2NXMzbXZLU3FwTEtrb2l2bkphVWxUUUhmekdaUlV3NFlBR3ZnUXJ6OHArc0FGV0R6d2ZRSzBnd0F5eS9OQUVmQUUrQWxOTmVEN3IzSXNjWkFDNmdCMlVnS3oyYVhRc25OYjVMYVpyYUtTZk1rcVdWbSsvQUQ5aDE1SG1NVU1BcDNEaTgwSEdBWUIzaW5sSmx0SmUwa25STUIzRGpSNDVjbEUxQUF2TVNBWDNRSExicFBPYW9OV2EwQUFBQUFTVVZPUks1Q1lJST1cIlxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vaW1hZ2VzL3cvMTYvc2hhcmUucG5nXG4vLyBtb2R1bGUgaWQgPSAyNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUJtSkxSMFFBL3dEL0FQK2d2YWVUQUFBQWxFbEVRVlE0amQzUU1RcURRQmhFWVU4a3BCWmlvNDFwVEJvdjVCMzFJRUZFaEMrTmtrVTJhN3BBQnJZWmVJK2RQOHYrTDdnZ2ovUTVMbWR3Z3hrVDZxQ3Z0MjVHa3hLTTNwazJjSWYzakNsQmkrVWdDZUVGN2RtTTIvYlZZeGJjazNBZzZTT0MvbHY0aW1kRU1LRTZnNnZJNXVOTlBrc3dIT0RIOWtMSmtCSjBXSGM0NkhmSml1NXNSb2tpMGhjb2svQlA4Z0pjUzBBeWdQQm8rZ0FBQUFCSlJVNUVya0pnZ2c9PVwiXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9pbWFnZXMvdy8xNi9jbG9zZS5wbmdcbi8vIG1vZHVsZSBpZCA9IDI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQm1KTFIwUUEvd0QvQVArZ3ZhZVRBQUFBckVsRVFWUTRqYlhTUFE1QlFSaUY0Y2RmWlFXWHBkZ0JXMUxaamF1Z3Nnb3FEZEZmS3BWRVEyaHVNY2I5RTNHU1U4eVhNMi9PWkQ1K1ZLdGdsbUNNVGpSL1lJMVRIVFRGczhUekpxMG15SERCTGJpYzVjMGFLYzI5Q1FCcFViRGRsRmltdndKNnViOVNIeXZjZmY3QUhjczhVNnBad2NYWXM2b25qQnEwZk12RW01aGdFSndYT0dBYXpETEJObllqd01uN3F1NXd4TGFzVGd5SXRjZTVLbEFIT09CYWs2bFVnbUZWNEFWNXJUSmY3Uk9LdUFBQUFBQkpSVTVFcmtKZ2dnPT1cIlxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vaW1hZ2VzLzE2L3RodW1iLXRhY2sucG5nXG4vLyBtb2R1bGUgaWQgPSAyOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUJtSkxSMFFBL3dEL0FQK2d2YWVUQUFBQXBVbEVRVlE0amNYU1BRckNRQlFFNEU5QjhSZzJnbVcwVXZFeWVnUVA0MVhzRFdpcmhlRFBJYlFSdEJBdFRFQUN1NG9wTXJERnNqUHZ2Wmw5VkkxYTRkNUJGNjBBLzRZOVRzV0hQdFo0QnM0REc2UTRZNFZlTGg3aEdoRXYwUDVvMXNRc0t6U1FqUk1TTDlFSTJKbmdLQ0orWWh3UTg4NXZGeXR3UnoxU0FPYmZDRCtodElWWWlLbHdpRk1jWUtqa04wTGl2Unl4UmRwbUUxMHlicEw3K01UZnExd2RYaUlYV1dMSFpMVFVBQUFBQUVsRlRrU3VRbUNDXCJcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2ltYWdlcy8xNi90b2dnbGUtb24ucG5nXG4vLyBtb2R1bGUgaWQgPSAyOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUJtSkxSMFFBL3dEL0FQK2d2YWVUQUFBQTRVbEVRVlE0amNYU3NVb0RVUkFGMEpQRkRXbXNyT3hzaEJRS3djcUkrUmUzdHRMQ1QvQVA5RnNFSTJnVzB3cVNKVUViL1lLazB5YkVZcCt3YkhiWHdpSVhYdkZtN3AyWmQrZXhhYlJLOTMxMDBhbmhmMk9HOTNLQkk5d0U4UVRiT0VTRVozd0ZYZ2NIbU9JY0wzQ0NPUzdRTG5UYnd4MGVFQmZpYlZ3R3piRXdUbEl6Y293UnJpcHlDZDRncys1RkVhZjRySWkza0VWNHhLcWh3Qmk3MkNuRlYzaUtHb1RGVG8zNDZ3a0RmTlFVemlLNXEyYzE0aGpYdUszSUpkaUN2dVkxRG4rSkFXdHJoSjdjckFWU3ZHSXBOeXJGZlRocDRJeUQ1djlmZWZQNEFlRVFMN2F3K2VLL0FBQUFBRWxGVGtTdVFtQ0NcIlxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vaW1hZ2VzLzE2L3RvZ2dsZS1vZmYucG5nXG4vLyBtb2R1bGUgaWQgPSAzMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgeyBoLCByZW5kZXIsIENvbXBvbmVudCB9IGZyb20gXCJwcmVhY3RcIjtcbmltcG9ydCB7VHJhbnNpdGlvblBvcG92ZXJ9IGZyb20gXCIuL3RyYW5zaXRpb25Qb3BvdmVyXCI7XG5pbXBvcnQge0JyZWFkY3J1bWJBcnJvd30gZnJvbSBcIi4vYnJlYWRjcnVtYkFycm93XCI7XG5pbXBvcnQge21heExlbmd0aH0gZnJvbSBcIi4uL3V0aWwvc3RyaW5nc1wiO1xuaW1wb3J0IHttYWtlQ2FuY2VsYWJsZX0gZnJvbSBcIi4uL3V0aWwvY2FuY2VsYWJsZVByb21pc2VcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJUHJvcHMge1xuICB0cmFuc2l0aW9uOiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVN0YXRlIHtcbiAgc3RhdHVzPzogc3RyaW5nO1xuICBtZXNzYWdlPzogc3RyaW5nO1xuICByZWplY3Rpb24/OiBzdHJpbmc7XG4gIHBpbm5lZD86IGJvb2xlYW4sXG4gIGV4cGFuZGVkPzogYm9vbGVhbixcbiAgb3Blbj86IGJvb2xlYW4sXG4gIGRlcmVnaXN0ZXJGdW5jdGlvbnM/OiBGdW5jdGlvbltdLFxufVxuXG5leHBvcnQgY2xhc3MgVHJhbnNpdGlvblZpZXcgZXh0ZW5kcyBDb21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcbiAgdHJhbnNpdGlvblByb21pc2UgPSBudWxsO1xuXG4gIHN0YXRlID0ge1xuICAgIHN0YXR1czogJ3J1bm5pbmcnLFxuICAgIG1lc3NhZ2U6IG51bGwsXG4gICAgcmVqZWN0aW9uOiBudWxsLFxuICAgIHBpbm5lZDogZmFsc2UsXG4gICAgZXhwYW5kZWQ6IGZhbHNlLFxuICAgIG9wZW46IGZhbHNlLFxuICAgIGRlcmVnaXN0ZXJGdW5jdGlvbnM6IFtdXG4gIH07XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgbGV0IHRyYW5zID0gdGhpcy5wcm9wcy50cmFuc2l0aW9uO1xuXG4gICAgY29uc3Qgc2V0TWVzc2FnZSA9IG1lc3NhZ2UgPT4ge1xuICAgICAgLy8gVHJhbnNpdGlvbiBob29rcyBhcmUgY29tcHV0ZWQgd2hlbiB0aGUgdHJhbnMgc3RhcnRzOyB0aGV5IGNhbid0IGJlIHJlbW92ZWQgd2hpbGUgdGhlIHRyYW5zIGlzIHJ1bm5pbmcuXG4gICAgICBpZiAoIXRoaXMudHJhbnNpdGlvblByb21pc2UuaXNDYW5jZWxlZCkgIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bWVzc2FnZX0pO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc3RhdGVuYW1lID0gc3RhdGUgPT4gc3RhdGUubmFtZSB8fCBcIihyb290KVwiO1xuXG4gICAgbGV0IGZucyA9IFtdO1xuICAgIGZucy5wdXNoKHRyYW5zLm9uU3RhcnQoe30sICAoKSAgICAgICAgID0+IHNldE1lc3NhZ2UoXCJTdGFydGluZy4uLlwiKSwgICAgICAgICAgICAgICAgICB7cHJpb3JpdHk6IDEwMDAwfSkpO1xuICAgIGZucy5wdXNoKHRyYW5zLm9uRXhpdCh7fSwgICAodCwgc3RhdGUpID0+IHNldE1lc3NhZ2UoYEV4aXRpbmcgJHtzdGF0ZW5hbWUoc3RhdGUpfWApLCAge3ByaW9yaXR5OiAxMDAwMH0pKTtcbiAgICBmbnMucHVzaCh0cmFucy5vblJldGFpbih7fSwgKHQsIHN0YXRlKSA9PiBzZXRNZXNzYWdlKGBSZXRhaW5lZCAke3N0YXRlbmFtZShzdGF0ZSl9YCksIHtwcmlvcml0eTogMTAwMDB9KSk7XG4gICAgZm5zLnB1c2godHJhbnMub25FbnRlcih7fSwgICh0LCBzdGF0ZSkgPT4gc2V0TWVzc2FnZShgRW50ZXJpbmcgJHtzdGF0ZW5hbWUoc3RhdGUpfWApLCB7cHJpb3JpdHk6IDEwMDAwfSkpO1xuICAgIGZucy5wdXNoKHRyYW5zLm9uRmluaXNoKHt9LCAoKSAgICAgICAgID0+IHNldE1lc3NhZ2UoYEZpbmlzaGluZy4uLmApKSk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHsgZGVyZWdpc3RlckZ1bmN0aW9uczogZm5zIH0pO1xuXG4gICAgY29uc3Qgc3VjY2VzcyA9ICgpID0+IHRoaXMuc2V0U3RhdGUoe3N0YXR1czogXCJzdWNjZXNzXCIsIG1lc3NhZ2U6IG51bGx9KTtcbiAgICBjb25zdCBlcnJvciA9IChlcnIpID0+IHtcbiAgICAgIGlmIChlcnIgJiYgZXJyLmlzQ2FuY2VsZWQpIHJldHVybjtcblxuICAgICAgbGV0IHN0YXR1cyA9IFwiZXJyb3JcIiwgcmVqZWN0aW9uID0gbnVsbDtcblxuICAgICAgaWYgKGVycikge1xuICAgICAgICByZWplY3Rpb24gPSBlcnIgJiYgZXJyLm1lc3NhZ2U7XG5cbiAgICAgICAgbGV0IHR5cGUgPSBlcnIgJiYgZXJyLnR5cGU7XG4gICAgICAgIGlmICh0eXBlID09IDIgJiYgZXJyLnJlZGlyZWN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICBzdGF0dXMgPSBcInJlZGlyZWN0ZWRcIjtcbiAgICAgICAgICBsZXQgdGFyZ2V0U3RhdGUgPSBlcnJbJ2RldGFpbCddO1xuICAgICAgICAgIGxldCB0b1N0YXRlID0gdGFyZ2V0U3RhdGUubmFtZSgpO1xuICAgICAgICAgIGxldCB0b1BhcmFtcyA9IEpTT04uc3RyaW5naWZ5KHRhcmdldFN0YXRlLnBhcmFtcygpKTtcbiAgICAgICAgICByZWplY3Rpb24gPSBtYXhMZW5ndGgoMTAwLCBgJHt0b1N0YXRlfSgke3RvUGFyYW1zfWApICsgXCIpXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZSA9PSA1KSB7XG4gICAgICAgICAgc3RhdHVzID0gXCJpZ25vcmVkXCI7XG4gICAgICAgICAgcmVqZWN0aW9uID0gXCJBbGwgc3RhdGVzIGFuZCBwYXJhbWV0ZXJzIGluIHRoZSBUbyBhbmQgRnJvbSBwYXRocyBhcmUgaWRlbnRpY2FsLlwiXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7c3RhdHVzLCByZWplY3Rpb24sIG1lc3NhZ2U6IG51bGx9KTtcbiAgICB9O1xuXG4gICAgdGhpcy50cmFuc2l0aW9uUHJvbWlzZSA9IG1ha2VDYW5jZWxhYmxlKHRyYW5zLnByb21pc2UpO1xuICAgIHRoaXMudHJhbnNpdGlvblByb21pc2UucHJvbWlzZS50aGVuKHN1Y2Nlc3MsIGVycm9yKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMudHJhbnNpdGlvblByb21pc2UuY2FuY2VsKCk7XG4gICAgaWYgKHRoaXMuc3RhdGUuZGVyZWdpc3RlckZ1bmN0aW9ucykge1xuICAgICAgdGhpcy5zdGF0ZS5kZXJlZ2lzdGVyRnVuY3Rpb25zLmZvckVhY2goZm4gPT4gZm4oKSk7XG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlUGluID0gKCkgPT4gdGhpcy5zZXRTdGF0ZSh7cGlubmVkOiAhdGhpcy5zdGF0ZS5waW5uZWR9KTtcbiAgdG9nZ2xlRXhwYW5kID0gKCkgPT4gdGhpcy5zZXRTdGF0ZSh7ZXhwYW5kZWQ6ICF0aGlzLnN0YXRlLmV4cGFuZGVkfSk7XG4gIG9wZW4gPSAoKSA9PiB0aGlzLnNldFN0YXRlKHsgb3BlbjogdHJ1ZSB9KTtcbiAgY2xvc2UgPSAoKSA9PiB0aGlzLnNldFN0YXRlKHsgb3BlbjogZmFsc2UgfSk7XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgb25Nb3VzZUVudGVyPXsgdGhpcy5vcGVuIH0gb25Nb3VzZUxlYXZlPXsgdGhpcy5jbG9zZSB9PlxuXG4gICAgICAgICAgPFRyYW5zaXRpb25Qb3BvdmVyXG4gICAgICAgICAgICAgIHRyYW5zaXRpb249e3RoaXMucHJvcHMudHJhbnNpdGlvbn1cbiAgICAgICAgICAgICAgc3RhdHVzPXt0aGlzLnN0YXRlLnN0YXR1c31cbiAgICAgICAgICAgICAgcmVqZWN0aW9uPXt0aGlzLnN0YXRlLnJlamVjdGlvbn1cbiAgICAgICAgICAgICAgcGlubmVkPXt0aGlzLnN0YXRlLnBpbm5lZH1cbiAgICAgICAgICAgICAgZXhwYW5kZWQ9e3RoaXMuc3RhdGUuZXhwYW5kZWR9XG4gICAgICAgICAgICAgIG9wZW49e3RoaXMuc3RhdGUub3Blbn1cbiAgICAgICAgICAgICAgdG9nZ2xlUGlubmVkPXt0aGlzLnRvZ2dsZVBpbn1cbiAgICAgICAgICAgICAgdG9nZ2xlRXhwYW5kPXt0aGlzLnRvZ2dsZUV4cGFuZH0vPlxuXG4gICAgICAgICAgPEJyZWFkY3J1bWJBcnJvd1xuICAgICAgICAgICAgICB0cmFuc2l0aW9uPXt0aGlzLnByb3BzLnRyYW5zaXRpb259XG4gICAgICAgICAgICAgIHN0YXR1cz17dGhpcy5zdGF0ZS5zdGF0dXN9XG4gICAgICAgICAgICAgIG1lc3NhZ2U9e3RoaXMuc3RhdGUubWVzc2FnZX1cbiAgICAgICAgICAgICAgdG9nZ2xlRXhwYW5kPXt0aGlzLnRvZ2dsZUV4cGFuZH0vPlxuXG4gICAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3RyYW5zaXRpb24vdHJhbnNpdGlvblZpZXcudHN4IiwiaW1wb3J0IHsgaCwgcmVuZGVyLCBDb21wb25lbnQgfSBmcm9tIFwicHJlYWN0XCI7XG5pbXBvcnQge1BvcG92ZXJIZWFkaW5nfSBmcm9tIFwiLi9wb3BvdmVySGVhZGluZ1wiO1xuaW1wb3J0IHtUcmFuc1N1bW1hcnl9IGZyb20gXCIuL3RyYW5zU3VtbWFyeVwiO1xuaW1wb3J0IHtOb2RlUGF0aHN9IGZyb20gXCIuL25vZGVQYXRoc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElQcm9wcyB7XG4gIHRyYW5zaXRpb246IGFueTtcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIHJlamVjdGlvbjogc3RyaW5nO1xuXG4gIHBpbm5lZDogYm9vbGVhbjtcbiAgZXhwYW5kZWQ6IGJvb2xlYW47XG4gIG9wZW46IGJvb2xlYW47XG4gIHRvZ2dsZVBpbm5lZDogRnVuY3Rpb247XG4gIHRvZ2dsZUV4cGFuZDogRnVuY3Rpb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVN0YXRlIHtcbn1cblxuZXhwb3J0IGNsYXNzIFRyYW5zaXRpb25Qb3BvdmVyIGV4dGVuZHMgQ29tcG9uZW50PElQcm9wcywgSVN0YXRlPiB7XG4gIHJlbmRlcigpIHtcbiAgICBpZiAoIXRoaXMucHJvcHMub3BlbiAmJiAhdGhpcy5wcm9wcy5waW5uZWQpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgY2xhc3NlcyA9ICgpID0+IFwidHJhbnNpdGlvbkRldGFpbCB1aXItcGFuZWwgcGFuZWwtZGVmYXVsdCBcIiArXG4gICAgICAgICh0aGlzLnByb3BzLnBpbm5lZCA/IFwicGluIFwiIDogXCJcIikgK1xuICAgICAgICAodGhpcy5wcm9wcy5leHBhbmRlZCA/IFwiZXhwYW5kIFwiIDogXCJcIikgK1xuICAgICAgICAodGhpcy5wcm9wcy5vcGVuID8gXCJzaG93RGV0YWlsIFwiIDogXCJcIik7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9eyBjbGFzc2VzKCkgfT5cbiAgICAgICAgPFBvcG92ZXJIZWFkaW5nXG4gICAgICAgICAgICB0cmFuc2l0aW9uPXt0aGlzLnByb3BzLnRyYW5zaXRpb259XG4gICAgICAgICAgICBwaW5uZWQ9e3RoaXMucHJvcHMucGlubmVkfSBleHBhbmRlZD17dGhpcy5wcm9wcy5leHBhbmRlZH1cbiAgICAgICAgICAgIHRvZ2dsZVBpbm5lZD17dGhpcy5wcm9wcy50b2dnbGVQaW5uZWR9IHRvZ2dsZUV4cGFuZD17dGhpcy5wcm9wcy50b2dnbGVFeHBhbmR9XG4gICAgICAgIC8+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1aXItcGFuZWwtYm9keVwiPlxuICAgICAgICAgIDxUcmFuc1N1bW1hcnkgdHJhbnM9e3RoaXMucHJvcHMudHJhbnNpdGlvbn0gc3RhdHVzPXt0aGlzLnByb3BzLnN0YXR1c30gcmVqZWN0aW9uPXt0aGlzLnByb3BzLnJlamVjdGlvbn0gLz5cbiAgICAgICAgICA8aHIvPlxuICAgICAgICAgIDxOb2RlUGF0aHMgdHJhbnNpdGlvbj17dGhpcy5wcm9wcy50cmFuc2l0aW9ufSAvPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRvd25BcnJvd1wiIC8+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90cmFuc2l0aW9uL3RyYW5zaXRpb25Qb3BvdmVyLnRzeCIsImltcG9ydCB7IGgsIHJlbmRlciwgQ29tcG9uZW50IH0gZnJvbSBcInByZWFjdFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElQcm9wcyB7XG4gIHRyYW5zaXRpb246IGFueTtcblxuICBwaW5uZWQ6IGJvb2xlYW47XG4gIGV4cGFuZGVkOiBib29sZWFuO1xuICB0b2dnbGVQaW5uZWQ6IGFueTtcbiAgdG9nZ2xlRXhwYW5kOiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVN0YXRlIHtcbn1cblxuZXhwb3J0IGNsYXNzIFBvcG92ZXJIZWFkaW5nIGV4dGVuZHMgQ29tcG9uZW50PElQcm9wcywgSVN0YXRlPiB7XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB0YWNrQ2xhc3MgPSAoKSA9PiBcInVpci1pY29uIHVpci1pY29uLXRodW1iLXRhY2sgXCIgKyAodGhpcy5wcm9wcy5waW5uZWQgPyBcIlwiIDogXCJ1aXItcm90YXRlLTM1XCIpO1xuICAgIGNvbnN0IGV4cGFuZENsYXNzID0gKCkgPT4gXCJ1aXItaWNvbiB0b29sdGlwLXJpZ2h0IFwiICsgKHRoaXMucHJvcHMuZXhwYW5kZWQgPyBcInVpci1pY29uLXRvZ2dsZS1vblwiIDogXCJ1aXItaWNvbi10b2dnbGUtb2ZmXCIpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidWlyLXBhbmVsLWhlYWRpbmcgdWlyLWhlYWRlclwiPlxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGN1cnNvcjogXCJwb2ludGVyXCIgfX0gb25DbGljaz17dGhpcy5wcm9wcy50b2dnbGVQaW5uZWR9PlxuICAgICAgICAgIDxpIGNsYXNzTmFtZT17IHRhY2tDbGFzcygpIH0gLz5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGgzIGNsYXNzTmFtZT1cInVpci1wYW5lbC10aXRsZVwiPlRyYW5zaXRpb24gI3sgdGhpcy5wcm9wcy50cmFuc2l0aW9uLiRpZCB9PC9oMz5cblxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGN1cnNvcjogXCJwb2ludGVyXCIgfX0gb25DbGljaz17dGhpcy5wcm9wcy50b2dnbGVFeHBhbmR9PlxuICAgICAgICAgIDxpIGNsYXNzTmFtZT17IGV4cGFuZENsYXNzKCkgfS8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdHJhbnNpdGlvbi9wb3BvdmVySGVhZGluZy50c3giLCJpbXBvcnQgeyBoLCByZW5kZXIsIENvbXBvbmVudCB9IGZyb20gXCJwcmVhY3RcIjtcbmltcG9ydCB7S2V5c0FuZFZhbHVlc30gZnJvbSBcIi4va2V5c0FuZFZhbHVlc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElQcm9wcyB7XG4gIHRyYW5zOiBhbnk7XG4gIHN0YXR1czogc3RyaW5nO1xuICByZWplY3Rpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU3RhdGUgeyB9XG5cbmV4cG9ydCBjbGFzcyBUcmFuc1N1bW1hcnkgZXh0ZW5kcyBDb21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8dGFibGUgY2xhc3NOYW1lPVwic3VtbWFyeVwiPlxuICAgICAgPHRib2R5PlxuICAgICAgICA8dHI+PHRkPkZyb20gU3RhdGU6PC90ZD48dGQ+eyB0aGlzLnByb3BzLnRyYW5zLmZyb20oKS5uYW1lIHx8ICcocm9vdCknIH08L3RkPjwvdHI+XG4gICAgICAgIDx0cj48dGQ+VG8gU3RhdGU6PC90ZD48dGQ+e3RoaXMucHJvcHMudHJhbnMudG8oKS5uYW1lIHx8ICcocm9vdCknfTwvdGQ+PC90cj5cbiAgICAgICAgPHRyPlxuICAgICAgICAgIDx0ZCBjb2xTcGFuPXsxfT5QYXJhbWV0ZXJzOjwvdGQ+XG4gICAgICAgICAgPHRkIGNvbFNwYW49ezF9PlxuICAgICAgICAgICAgPEtleXNBbmRWYWx1ZXNcbiAgICAgICAgICAgICAgICBkYXRhPXt0aGlzLnByb3BzLnRyYW5zLnBhcmFtcygpfVxuICAgICAgICAgICAgICAgIGxhYmVscz17eyBzZWN0aW9uOiAnJywgbW9kYWxUaXRsZTogJ1BhcmFtZXRlciB2YWx1ZTogJyB9fVxuICAgICAgICAgICAgICAgIGNsYXNzZXM9e3sgb3V0ZXJkaXY6ICcnLCBrZXl2YWxkaXY6ICdrZXl2YWx1ZScsIHNlY3Rpb246ICcnLCBfa2V5OiAnJywgdmFsdWU6ICcnIH19PlxuICAgICAgICAgICAgPC9LZXlzQW5kVmFsdWVzPlxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgIDwvdHI+XG5cbiAgICAgICAgPHRyPlxuICAgICAgICAgIDx0ZD5PdXRjb21lOjwvdGQ+XG4gICAgICAgICAgPHRkPlxuICAgICAgICAgICAgeyB0aGlzLnByb3BzLnN0YXR1cyB9XG4gICAgICAgICAgICB7IHRoaXMucHJvcHMucmVqZWN0aW9uXG4gICAgICAgICAgICAgICAgPyA8c3Bhbj46IHt0aGlzLnByb3BzLnJlamVjdGlvbn08L3NwYW4+XG4gICAgICAgICAgICAgICAgOiBudWxsIH1cbiAgICAgICAgICA8L3RkPlxuICAgICAgICA8L3RyPlxuICAgICAgPC90Ym9keT5cbiAgICAgIDwvdGFibGU+XG4gICAgKVxuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdHJhbnNpdGlvbi90cmFuc1N1bW1hcnkudHN4IiwiaW1wb3J0IHsgaCwgcmVuZGVyLCBDb21wb25lbnQgfSBmcm9tIFwicHJlYWN0XCI7XG5pbXBvcnQge01vZGFsfSBmcm9tIFwiLi4vdXRpbC9tb2RhbFwiO1xuaW1wb3J0IHtSZXNvbHZlRGF0YX0gZnJvbSBcIi4vcmVzb2x2ZURhdGFcIjtcbmltcG9ydCB7bWF4TGVuZ3RofSBmcm9tIFwiLi4vdXRpbC9zdHJpbmdzXCI7XG5cbmNvbnN0IGlzT2JqZWN0ID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gJ29iamVjdCc7XG5cbmNvbnN0IGRpc3BsYXlWYWx1ZSA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgaWYgKG9iamVjdCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgaWYgKG9iamVjdCA9PT0gbnVsbCkgcmV0dXJuIFwibnVsbFwiO1xuICBpZiAodHlwZW9mIG9iamVjdCA9PT0gJ3N0cmluZycpIHJldHVybiAnXCInICsgbWF4TGVuZ3RoKDEwMCwgb2JqZWN0KSArICdcIic7XG4gIGlmIChBcnJheS5pc0FycmF5KG9iamVjdCkpIHJldHVybiBcIltBcnJheV1cIjtcbiAgaWYgKGlzT2JqZWN0KG9iamVjdCkpIHJldHVybiBcIltPYmplY3RdXCI7XG4gIGlmICh0eXBlb2Ygb2JqZWN0LnRvU3RyaW5nID09PSAnZnVuY3Rpb24nKSByZXR1cm4gbWF4TGVuZ3RoKDEwMCwgb2JqZWN0LnRvU3RyaW5nKCkpO1xuICByZXR1cm4gb2JqZWN0O1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBJUHJvcHMge1xuICBkYXRhOiBhbnk7XG4gIGxhYmVsczoge1xuICAgIHNlY3Rpb24/OiBzdHJpbmc7XG4gICAgbW9kYWxUaXRsZT86IHN0cmluZztcbiAgfVxuICBjbGFzc2VzOiB7XG4gICAgb3V0ZXJkaXY/OiBzdHJpbmc7XG4gICAgc2VjdGlvbj86IHN0cmluZztcbiAgICBrZXl2YWxkaXY/OiBzdHJpbmc7XG4gICAgX2tleT86IHN0cmluZztcbiAgICB2YWx1ZT86IHN0cmluZztcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTdGF0ZSB7XG5cbn1cblxubGV0IGRlZmF1bHRDbGFzcyA9IHtcbiAgb3V0ZXJkaXY6ICdwYXJhbScsXG4gIGtleXZhbGRpdjogJ2tleXZhbHVlJyxcbiAgc2VjdGlvbjogJ3BhcmFtc2xhYmVsIGRlZW1waGFzaXplJyxcbiAgX2tleTogJ3BhcmFtaWQnLFxuICB2YWx1ZTogJ3BhcmFtdmFsdWUnXG59O1xuXG5leHBvcnQgY2xhc3MgS2V5c0FuZFZhbHVlcyBleHRlbmRzIENvbXBvbmVudDxJUHJvcHMsIElTdGF0ZT4ge1xuICBpc0VtcHR5ID0gKCkgPT5cbiAgICAgICF0aGlzLnByb3BzLmRhdGEgfHwgT2JqZWN0LmtleXModGhpcy5wcm9wcy5kYXRhKS5sZW5ndGggPT09IDA7XG5cbiAgY2xhc3MgPSAobmFtZSkgPT5cbiAgICAgIHRoaXMucHJvcHMuY2xhc3NlcyAmJiB0aGlzLnByb3BzLmNsYXNzZXNbbmFtZV0gIT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgdGhpcy5wcm9wcy5jbGFzc2VzW25hbWVdIDpcbiAgICAgICAgICBkZWZhdWx0Q2xhc3NbbmFtZV07XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHJlbmRlclZhbHVlID0gKGtleSwgdmFsKSA9PiB7XG4gICAgICBpZiAoaXNPYmplY3QodmFsKSkgcmV0dXJuIChcbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibGlua1wiIG9uQ2xpY2s9eygpID0+IE1vZGFsLnNob3codGhpcy5wcm9wcy5sYWJlbHMsIGtleSwgdmFsLCBSZXNvbHZlRGF0YSl9PltPYmplY3RdPC9zcGFuPlxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3RoaXMucHJvcHMuY2xhc3Nlcy52YWx1ZX0+XG4gICAgICAgICAge2Rpc3BsYXlWYWx1ZSh2YWwpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLmlzRW1wdHkoKSA/IG51bGwgOiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17dGhpcy5jbGFzcygnb3V0ZXJkaXYnKX0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXt0aGlzLmNsYXNzKCdzZWN0aW9uJyl9PlxuICAgICAgICAgIHt0aGlzLnByb3BzLmxhYmVscy5zZWN0aW9ufVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7IE9iamVjdC5rZXlzKHRoaXMucHJvcHMuZGF0YSkubWFwKGtleSA9PlxuICAgICAgICAgIDxkaXYga2V5PXtrZXl9IGNsYXNzTmFtZT17dGhpcy5jbGFzcygna2V5dmFsZGl2Jyl9PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3RoaXMuY2xhc3MoJ19rZXknKX0+XG4gICAgICAgICAgICAgIHtrZXl9OlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXt0aGlzLmNsYXNzKCd2YWx1ZScpfT5cbiAgICAgICAgICAgICAge3JlbmRlclZhbHVlKGtleSwgdGhpcy5wcm9wcy5kYXRhW2tleV0pfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgfVxuXG4gICAgICA8L2Rpdj5cbiAgICApXG5cbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3RyYW5zaXRpb24va2V5c0FuZFZhbHVlcy50c3giLCJpbXBvcnQgeyBoLCByZW5kZXIsIENvbXBvbmVudCB9IGZyb20gXCJwcmVhY3RcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJUHJvcHMgeyB9XG5leHBvcnQgaW50ZXJmYWNlIElTdGF0ZSB7IH1cbmV4cG9ydCBjbGFzcyBNb2RhbCBleHRlbmRzIENvbXBvbmVudDxJUHJvcHMsIElTdGF0ZT4ge1xuICBfcmVmOiBhbnk7XG5cbiAgc3RhdGljIHNob3cgPSAobGFiZWxzLCBrZXksIHZhbHVlLCBjb21wb25lbnQpID0+IHtcbiAgICBsZXQgbW9kYWwgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCIjdWlyLW1vZGFsXCIpO1xuICAgIGlmICghbW9kYWwpIHtcbiAgICAgIG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIG1vZGFsLmlkID0gXCJ1aXItbW9kYWxcIjtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICAgIH1cblxuICAgIGNvbnN0IE5vdGhpbmcgPSAoKSA9PiBudWxsO1xuICAgIGNvbnN0IGNsb3NlID0gKCkgPT4gcmVuZGVyKDxOb3RoaW5nIC8+LCBkb2N1bWVudC5ib2R5LCBtb2RhbCk7XG4gICAgcmVuZGVyKGgoY29tcG9uZW50LCB7Y2xvc2UsIGxhYmVscywga2V5LCB2YWx1ZX0pLCBtb2RhbCk7XG4gIH07XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgbGV0IGVsID0gdGhpcy5fcmVmO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgbGV0IGZhZGVzID0gZWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInVpci1mYWRlXCIpO1xuICAgICAgW10uc2xpY2UuYXBwbHkoZmFkZXMpLmZvckVhY2gobm9kZSA9PiBub2RlLmNsYXNzTmFtZSArPSBcIiBpblwiKTtcbiAgICB9LCAzNSlcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiByZWY9eyByZWYgPT4gdGhpcy5fcmVmID0gcmVmIH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidWlyLW1vZGFsLWJhY2tkcm9wIHVpci1mYWRlXCIgc3R5bGU9e3t6SW5kZXg6IDEwNDB9fT48L2Rpdj5cblxuICAgICAgICA8ZGl2IHRhYkluZGV4PXstMX0gY2xhc3NOYW1lPVwidWlyLW1vZGFsIHVpci1mYWRlXCIgc3R5bGU9e3t6SW5kZXg6IDEwNTAsIGRpc3BsYXk6IFwiYmxvY2tcIn19PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidWlyLW1vZGFsLWRpYWxvZyBtb2RhbC1sZ1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1aXItbW9kYWwtY29udGVudFwiPlxuICAgICAgICAgICAgICB7IHRoaXMucHJvcHMuY2hpbGRyZW4gfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXRpbC9tb2RhbC50c3giLCJpbXBvcnQgeyBoLCByZW5kZXIsIENvbXBvbmVudCB9IGZyb20gXCJwcmVhY3RcIjtcbmltcG9ydCB7TW9kYWx9IGZyb20gXCIuLi91dGlsL21vZGFsXCI7XG5pbXBvcnQge1ByZXR0eX0gZnJvbSBcIi4uL3V0aWwvcHJldHR5XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVByb3BzIHtcbiAgdG9nZ2xlcz86IGFueTtcbiAgbGFiZWxzPzogYW55O1xuICBvcGVuPzogYm9vbGVhbjtcbiAgY2xvc2U/OiBGdW5jdGlvbjtcbiAgaWQ/OiBzdHJpbmc7XG4gIHZhbHVlPzogYW55O1xufVxuXG5leHBvcnQgY2xhc3MgUmVzb2x2ZURhdGEgZXh0ZW5kcyBDb21wb25lbnQ8SVByb3BzLGFueT4ge1xuICBjbG9zZSA9ICgpID0+IHRoaXMucHJvcHMuY2xvc2UoKTtcblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TW9kYWw+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInVpci1tb2RhbC1oZWFkZXIgdWlyLXJlc29sdmUtaGVhZGVyXCI+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tcImZvbnRTaXplXCI6IFwiMS41ZW1cIn19Pnt0aGlzLnByb3BzLmxhYmVscy5tb2RhbFRpdGxlfToge3RoaXMucHJvcHMuaWR9PC9kaXY+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuIGJ0bi14cyBidG4tcHJpbWFyeVwiIG9uQ2xpY2s9e3RoaXMuY2xvc2V9PlxuICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cInVpci1pY29uIHVpci1pY29udy1jbG9zZVwiLz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1aXItbW9kYWwtYm9keVwiPlxuICAgICAgICAgICAgICA8UHJldHR5IGRhdGE9e3RoaXMucHJvcHMudmFsdWV9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1aXItbW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuIGJ0bi1wcmltYXJ5XCIgb25DbGljaz17dGhpcy5jbG9zZX0+Q2xvc2U8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvTW9kYWw+XG4gICAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3RyYW5zaXRpb24vcmVzb2x2ZURhdGEudHN4IiwiaW1wb3J0IHsgaCwgcmVuZGVyLCBDb21wb25lbnQgfSBmcm9tIFwicHJlYWN0XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVByb3BzIHtcbiAgZGF0YTogYW55XG59XG5leHBvcnQgaW50ZXJmYWNlIElTdGF0ZSB7XG4gIHNob3c6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBQcmV0dHkgZXh0ZW5kcyBDb21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcbiAgcHJlU3R5bGUgPSB7XG4gICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICBwYWRkaW5nOiAnMTBweCAzMHB4JyxcbiAgICBtYXJnaW46ICcwJyxcbiAgfTtcblxuICBzdGF0ZSA9IHtzaG93OiB0cnVlfTtcblxuICB0b2dnbGUoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzaG93OiAhdGhpcy5zdGF0ZS5zaG93LFxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgeyggdGhpcy5zdGF0ZS5zaG93ID9cbiAgICAgICAgICAgICAgPHByZSBzdHlsZT17dGhpcy5wcmVTdHlsZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7SlNPTi5zdHJpbmdpZnkodGhpcy5wcm9wcy5kYXRhLCBudWxsLCAyKSB9XG4gICAgICAgICAgICAgICAgICAgIDwvcHJlPiA6IGZhbHNlICl9XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXRpbC9wcmV0dHkudHN4IiwiLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHNob3J0ZW5lZCB0byBhIG1heGltdW0gbGVuZ3RoXG4gKlxuICogSWYgdGhlIHN0cmluZyBpcyBhbHJlYWR5IGxlc3MgdGhhbiB0aGUgYG1heGAgbGVuZ3RoLCByZXR1cm4gdGhlIHN0cmluZy5cbiAqIEVsc2UgcmV0dXJuIHRoZSBzdHJpbmcsIHNob3J0ZW5lZCB0byBgbWF4IC0gM2AgYW5kIGFwcGVuZCB0aHJlZSBkb3RzIChcIi4uLlwiKS5cbiAqXG4gKiBAcGFyYW0gbWF4IHRoZSBtYXhpbXVtIGxlbmd0aCBvZiB0aGUgc3RyaW5nIHRvIHJldHVyblxuICogQHBhcmFtIHN0ciB0aGUgaW5wdXQgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXhMZW5ndGgobWF4OiBudW1iZXIsIHN0cjogc3RyaW5nKSB7XG4gIGlmIChzdHIubGVuZ3RoIDw9IG1heCkgcmV0dXJuIHN0cjtcbiAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgbWF4IC0gMykgKyBcIi4uLlwiO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnlQYXR0ZXJuKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gJ3VuZGVmaW5lZCc7XG4gIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuICdudWxsJztcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbicpIHJldHVybiAnW1Byb21pc2VdJztcbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5KG86IE9iamVjdCkge1xuICB2YXIgc2VlbjogYW55W10gPSBbXTtcblxuICBmdW5jdGlvbiBmb3JtYXQodmFsOiBhbnkpIHtcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGlmIChzZWVuLmluZGV4T2YodmFsKSAhPT0gLTEpIHJldHVybiAnW2NpcmN1bGFyIHJlZl0nO1xuICAgICAgc2Vlbi5wdXNoKHZhbCk7XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmdpZnlQYXR0ZXJuKHZhbCk7XG4gIH1cblxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobywgKGtleSwgdmFsKSA9PiBmb3JtYXQodmFsKSkucmVwbGFjZSgvXFxcXFwiL2csICdcIicpO1xufVxuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXRpbC9zdHJpbmdzLnRzIiwiaW1wb3J0IHsgaCwgcmVuZGVyLCBDb21wb25lbnQgfSBmcm9tIFwicHJlYWN0XCI7XG5pbXBvcnQge05vZGVEZXRhaWx9IGZyb20gXCIuL25vZGVEZXRhaWxcIjtcbmltcG9ydCB7Rmxvd0Fycm93fSBmcm9tIFwiLi9mbG93QXJyb3dcIjtcblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc1N0cnVjdCB7XG4gIGtleTogc3RyaW5nO1xuICB0bzogYW55O1xuICB0b1R5cGU6IHN0cmluZztcbiAgZnJvbTogYW55O1xuICBmcm9tVHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElQcm9wcyB7XG4gIHRyYW5zaXRpb246IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU3RhdGUge1xuICByZXRhaW5lZDogVHJhbnNTdHJ1Y3RbXTtcbiAgZW50ZXJFeGl0OiBUcmFuc1N0cnVjdFtdO1xufVxuXG5leHBvcnQgY2xhc3MgTm9kZVBhdGhzIGV4dGVuZHMgQ29tcG9uZW50PElQcm9wcywgSVN0YXRlPiB7XG4gIHN0YXRlID0ge1xuICAgIHJldGFpbmVkOiBbXSxcbiAgICBlbnRlckV4aXQ6IFtdXG4gIH07XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgbGV0IHRyYW5zID0gdGhpcy5wcm9wcy50cmFuc2l0aW9uO1xuICAgIGxldCB0Y1BhdGhzID0gT2JqZWN0LmFzc2lnbih7fSwgdHJhbnMudHJlZUNoYW5nZXMoKSk7XG5cbiAgICAvLyBJZ25vcmUgdGhlIHJvb3Qgc3RhdGUgd2hlbiBkcmF3aW5nIHBhdGhzLlxuICAgIFtcImVudGVyaW5nXCIsIFwiZXhpdGluZ1wiLCBcInJldGFpbmVkXCJdXG4gICAgICAgIC5mb3JFYWNoKGtleSA9PiB0Y1BhdGhzW2tleV0gPSB0Y1BhdGhzW2tleV0uZmlsdGVyKG5vZGUgPT4gISFub2RlLnN0YXRlLm5hbWUpKTtcblxuICAgIGNvbnN0IHBhcnRpYWxLZXkgPSAocGF0aG5hbWUsIGlkeCkgPT4ge1xuICAgICAgbGV0IG5vZGUgPSB0Y1BhdGhzW3BhdGhuYW1lXVtpZHhdO1xuICAgICAgcmV0dXJuIG5vZGUgPyBub2RlLnN0YXRlLm5hbWUgOiBcIlwiO1xuICAgIH07XG5cbiAgICBjb25zdCBrZXkgPSAocGF0aG5hbWUxLCBwYXRobmFtZTIsIGlkeCkgPT5cbiAgICAgICAgYCR7dHJhbnMuJGlkfS4ke3BhcnRpYWxLZXkocGF0aG5hbWUxLCBpZHgpfS0ke3BhcnRpYWxLZXkocGF0aG5hbWUyLCBpZHgpfWA7XG5cbiAgICBsZXQgcmV0YWluZWQ6IFRyYW5zU3RydWN0W10gPSB0Y1BhdGhzLnJldGFpbmVkXG4gICAgICAgIC5tYXAoKG5vZGUsIGlkeCkgPT4gKHtrZXk6IGtleSgncmV0YWluZWQnLCAncmV0YWluZWQnLCBpZHgpLCB0bzogbm9kZSwgdG9UeXBlOiAncmV0YWluJywgZnJvbTogbm9kZSwgZnJvbVR5cGU6ICdyZXRhaW4nfSkpO1xuICAgIGxldCBlbnRlckV4aXQ6IFRyYW5zU3RydWN0W10gPSBbXTtcblxuICAgIGxldCBtYXhQYXRoTGVuZ3RoID0gTWF0aC5tYXgodGNQYXRocy5leGl0aW5nLmxlbmd0aCwgdGNQYXRocy5lbnRlcmluZy5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4UGF0aExlbmd0aDsgaSsrKSB7XG4gICAgICBlbnRlckV4aXQucHVzaCh7XG4gICAgICAgIGtleToga2V5KCdleGl0aW5nJywgJ2VudGVyaW5nJywgaSksXG4gICAgICAgIHRvOiB0Y1BhdGhzLmVudGVyaW5nW2ldLFxuICAgICAgICB0b1R5cGU6IHRjUGF0aHMuZW50ZXJpbmdbaV0gJiYgJ2VudGVyJyxcbiAgICAgICAgZnJvbTogdGNQYXRocy5leGl0aW5nW2ldLFxuICAgICAgICBmcm9tVHlwZTogdGNQYXRocy5leGl0aW5nW2ldICYmICdleGl0J1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHJldGFpbmVkLCBlbnRlckV4aXQgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdmFyIGhlaWdodCA9IDIwMDA7XG4gICAgdmFyIHJldGFpbmVkID0gdGhpcy5zdGF0ZS5yZXRhaW5lZCB8fCBbXTtcbiAgICB2YXIgZW50ZXJFeGl0ID0gdGhpcy5zdGF0ZS5lbnRlckV4aXQgfHwgW107XG4gICAgdmFyIGxhc3RFbnRlcklkeCA9IGVudGVyRXhpdC5maWx0ZXIoeCA9PiAhIXgudG9UeXBlKS5sZW5ndGggLSAxO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInBhdGhzXCI+XG4gICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgIDx0aD5Gcm9tIFBhdGg8L3RoPlxuICAgICAgICAgICAgPHRoPlRvIFBhdGg8L3RoPlxuICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgPC90aGVhZD5cblxuICAgICAgICAgIDx0Ym9keT5cblxuICAgICAgICAgIHsgLy8gUmVuZGVyIHRoZSByZXRhaW5lZCBzdGF0ZXNcbiAgICAgICAgICAgIHJldGFpbmVkLm1hcChlbGVtID0+XG4gICAgICAgICAgICAgICAgPHRyIGtleT17ZWxlbS5rZXl9PlxuICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT17ZWxlbS5mcm9tVHlwZX0gY29sU3Bhbj17Mn0+XG4gICAgICAgICAgICAgICAgICAgIDxOb2RlRGV0YWlsIG5vZGU9e2VsZW0uZnJvbX0gdHlwZT17ZWxlbS5mcm9tVHlwZX0vPlxuICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgKSB9XG5cbiAgICAgICAgICB7IC8vIFJlbmRlciB0aGUgZW50ZXJlZC9leGl0ZWQgc3RhdGVzXG4gICAgICAgICAgICBlbnRlckV4aXQubWFwKChlbGVtLCBpZHgpID0+XG4gICAgICAgICAgICAgICAgPHRyIGtleT17ZWxlbS5rZXl9PlxuICAgICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49ezJ9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInVpclRyYW5zVmlzUm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2VsZW0uZnJvbVR5cGV9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ICFlbGVtLmZyb21UeXBlID8gbnVsbCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidWlyTm9kZUNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPE5vZGVEZXRhaWwgbm9kZT17ZWxlbS5mcm9tfSB0eXBlPXtlbGVtLmZyb21UeXBlfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGbG93QXJyb3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbT0nVidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcD17aWR4ID8gJ1YnIDogZWxlbS50b1R5cGUgPyAnUlUnIDogJ0FVJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2VsZW0udG9UeXBlfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgeyAhZWxlbS50b1R5cGUgPyBudWxsIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1aXJOb2RlQ29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rmxvd0Fycm93XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A9e2lkeCA/ICdWJyA6IGVsZW0uZnJvbVR5cGUgPyAnUkQnIDogJ1YnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tPXtpZHggPT0gbGFzdEVudGVySWR4ID8gJ0FEJyA6ICdWJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPE5vZGVEZXRhaWwgbm9kZT17ZWxlbS50b30gdHlwZT17ZWxlbS50b1R5cGV9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICkgfVxuICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgIDwvdGFibGU+XG4gICAgKVxuICB9XG59XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90cmFuc2l0aW9uL25vZGVQYXRocy50c3giLCJpbXBvcnQgeyBoLCByZW5kZXIsIENvbXBvbmVudCB9IGZyb20gXCJwcmVhY3RcIjtcbmltcG9ydCB7c3RyaW5naWZ5LCBtYXhMZW5ndGh9IGZyb20gXCIuLi91dGlsL3N0cmluZ3NcIjtcbmltcG9ydCB7S2V5c0FuZFZhbHVlc30gZnJvbSBcIi4va2V5c0FuZFZhbHVlc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElQcm9wcyB7XG4gIG5vZGU6IGFueTtcbiAgdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTdGF0ZSB7XG5cbn1cblxuZXhwb3J0IGNsYXNzIE5vZGVEZXRhaWwgZXh0ZW5kcyBDb21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcbiAgc3RhdGVOYW1lKCkge1xuICAgIGxldCBub2RlID0gdGhpcy5wcm9wcy5ub2RlO1xuICAgIGxldCBuYW1lID0gbm9kZSAmJiBub2RlLnN0YXRlICYmIG5vZGUuc3RhdGUubmFtZTtcbiAgICBpZiAobmFtZSA9PT0gXCJcIikgbmFtZSA9IFwiKHJvb3QpXCI7XG4gICAgcmV0dXJuIG5hbWUgJiYgbmFtZS5zcGxpdChcIi5cIikucmV2ZXJzZSgpWzBdO1xuICB9XG5cbiAgcGFyYW1zKCkge1xuICAgIGxldCBub2RlID0gdGhpcy5wcm9wcy5ub2RlO1xuICAgIHJldHVybiBub2RlICYmIG5vZGUucGFyYW1TY2hlbWEucmVkdWNlKChwYXJhbXMsIHBhcmFtKSA9PiB7XG4gICAgICBwYXJhbXNbcGFyYW0uaWRdID0gbm9kZS5wYXJhbVZhbHVlc1twYXJhbS5pZF07XG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH0sIHt9KTtcbiAgfVxuXG4gIHJlc29sdmVzKCkge1xuICAgIGNvbnN0IGFzU3RyaW5nID0gKHZhbCkgPT5cbiAgICAgICAgdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgPyB2YWwgOiBtYXhMZW5ndGgoMzAsIHN0cmluZ2lmeSh2YWwpKTtcblxuICAgIGxldCBub2RlID0gdGhpcy5wcm9wcy5ub2RlO1xuICAgIGxldCBpZ25vcmVkVG9rZW5zID0gWyckc3RhdGVQYXJhbXMnLCAnJHRyYW5zaXRpb24kJ107XG5cbiAgICByZXR1cm4gbm9kZSAmJiBub2RlLnJlc29sdmFibGVzXG4gICAgICAgICAgICAuZmlsdGVyKHIgPT4gaWdub3JlZFRva2Vucy5pbmRleE9mKHIudG9rZW4pID09PSAtMSlcbiAgICAgICAgICAgIC5yZWR1Y2UoKGFjYywgcikgPT4geyBhY2NbYXNTdHJpbmcoci50b2tlbildID0gci5kYXRhOyByZXR1cm4gYWNjOyB9LCB7fSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuICF0aGlzLnByb3BzLm5vZGUgPyBudWxsIDogKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInVpck5vZGVEZXRhaWxcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInVpci1oZWFkZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibm93cmFwIGRlZW1waGFzaXplXCI+KHsgdGhpcy5wcm9wcy50eXBlIH0gc3RhdGUpPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0YXRlbmFtZVwiPnsgdGhpcy5zdGF0ZU5hbWUoKSB9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8S2V5c0FuZFZhbHVlcyBkYXRhPXt0aGlzLnBhcmFtcygpfVxuICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM9e3sgb3V0ZXJkaXY6ICdwYXJhbXMnLCBzZWN0aW9uOiAncGFyYW1zbGFiZWwgZGVlbXBoYXNpemUnIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxzPXt7IHNlY3Rpb246ICdQYXJhbWV0ZXIgdmFsdWVzJywgbW9kYWxUaXRsZTogJ1BhcmFtZXRlciB2YWx1ZTogJyB9fVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICA8S2V5c0FuZFZhbHVlcyBkYXRhPXt0aGlzLnJlc29sdmVzKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3Nlcz17eyBvdXRlcmRpdjogJ3BhcmFtcyByZXNvbHZlJywgc2VjdGlvbjogJ3Jlc29sdmVsYWJlbCBkZWVtcGhhc2l6ZScgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbHM9e3sgc2VjdGlvbjogJ1Jlc29sdmVkIGRhdGEnLCBtb2RhbFRpdGxlOiAnUmVzb2x2ZWQgdmFsdWU6ICcgfX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICApXG4gIH1cblxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3RyYW5zaXRpb24vbm9kZURldGFpbC50c3giLCJpbXBvcnQgeyBoLCByZW5kZXIsIENvbXBvbmVudCB9IGZyb20gXCJwcmVhY3RcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJUHJvcHMge1xuICB0b3A6IHN0cmluZztcbiAgYm90dG9tOiBzdHJpbmc7XG59XG5leHBvcnQgY2xhc3MgRmxvd0Fycm93IGV4dGVuZHMgQ29tcG9uZW50PElQcm9wcyxhbnk+IHtcbiAgaGVpZ2h0ID0gMTAwMDtcblxuICByZW5kZXJDdXJ2ZSA9ICgpID0+IChcbiAgICAgIDxwYXRoIHN0cm9rZT1cIndoaXRlXCIgc3Ryb2tlLXdpZHRoPVwiMjBcIiBmaWxsPVwibm9uZVwiXG4gICAgICAgICAgICBkPXtgTTUwICR7dGhpcy5oZWlnaHR9IFYgNzAgUTUwIDIwLCAxMDAgMjAgUTE1MCAyMCwgMTUwIDcwIFYgJHt0aGlzLmhlaWdodH1gfSAvPlxuICApO1xuXG4gIHJlbmRlclZlcnRpY2FsTGluZSA9ICgpID0+IChcbiAgICAgIDxzdmcgdmlld0JveD17YDAgNzAgMTAwICR7dGhpcy5oZWlnaHQgLSA3MH1gfSBjbGFzc05hbWU9XCJmbG93QXJyb3dTdmdcIj5cbiAgICAgICAge3RoaXMucmVuZGVyQ3VydmUoKX1cbiAgICAgIDwvc3ZnPlxuICApO1xuXG4gIHJlbmRlckN1cnZlUlUgPSAoKSA9PiAoXG4gICAgICA8c3ZnIHZpZXdCb3g9e2AwIDAgMTAwICR7dGhpcy5oZWlnaHR9YH0gY2xhc3NOYW1lPVwiZmxvd0Fycm93U3ZnIHRvcFwiPlxuICAgICAgICB7dGhpcy5yZW5kZXJDdXJ2ZSgpfVxuICAgICAgPC9zdmc+XG4gICk7XG5cbiAgcmVuZGVyQ3VydmVSRCA9ICgpID0+IChcbiAgICAgIDxzdmcgdmlld0JveD17YDEwMCAwIDEwMCAke3RoaXMuaGVpZ2h0fWB9IGNsYXNzTmFtZT1cImZsb3dBcnJvd1N2ZyB0b3BcIj5cbiAgICAgICAge3RoaXMucmVuZGVyQ3VydmUoKX1cbiAgICAgIDwvc3ZnPlxuICApO1xuXG4gIHJlbmRlckFycm93VSA9ICgpID0+IChcbiAgICAgIDxzdmcgdmlld0JveD17YDAgMCAxMDAgJHt0aGlzLmhlaWdodH1gfSBjbGFzc05hbWU9XCJmbG93QXJyb3dTdmcgdG9wXCI+XG4gICAgICAgIDxwYXRoIHN0cm9rZT1cIndoaXRlXCIgc3Ryb2tlLXdpZHRoPVwiMjBcIiBmaWxsPVwibm9uZVwiIGQ9e2BNNTAgJHt0aGlzLmhlaWdodH0gViAyMCBgfSAvPlxuICAgICAgICA8cG9seWdvbiBmaWxsPVwid2hpdGVcIiBzdHJva2U9XCJ3aGl0ZVwiIHN0cm9rZS13aWR0aD1cIjIwXCIgcG9pbnRzPVwiNTAsMjAgMzUsNDAgNjUsNDBcIi8+XG4gICAgICA8L3N2Zz5cbiAgKTtcblxuICByZW5kZXJBcnJvd0QgPSAoKSA9PiAoXG4gICAgICA8c3ZnIHZpZXdCb3g9e2AwIDAgMTAwICR7dGhpcy5oZWlnaHR9YH0gY2xhc3NOYW1lPVwiZmxvd0Fycm93U3ZnIGJvdHRvbVwiPlxuICAgICAgICA8cGF0aCBzdHJva2U9XCJ3aGl0ZVwiIHN0cm9rZS13aWR0aD1cIjIwXCIgZmlsbD1cIm5vbmVcIiBkPXtgTTUwIDAgViAke3RoaXMuaGVpZ2h0IC0gMjB9YH0gLz5cbiAgICAgICAgPHBvbHlnb24gZmlsbD1cIndoaXRlXCIgc3Ryb2tlPVwid2hpdGVcIiBzdHJva2Utd2lkdGg9XCIyMFwiIHBvaW50cz17YDUwLCR7dGhpcy5oZWlnaHQgLSAyMH0gMzUsJHt0aGlzLmhlaWdodCAtIDQwfSA2NSwke3RoaXMuaGVpZ2h0IC0gNDB9YH0vPlxuICAgICAgPC9zdmc+XG4gICk7XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHJlbmRlclN2ZyA9ICh0eXBlKSA9PiB7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcIlZcIjogcmV0dXJuIHRoaXMucmVuZGVyVmVydGljYWxMaW5lKCk7XG4gICAgICAgIGNhc2UgXCJSVVwiOiByZXR1cm4gdGhpcy5yZW5kZXJDdXJ2ZVJVKCk7XG4gICAgICAgIGNhc2UgXCJSRFwiOiByZXR1cm4gdGhpcy5yZW5kZXJDdXJ2ZVJEKCk7XG4gICAgICAgIGNhc2UgXCJBVVwiOiByZXR1cm4gdGhpcy5yZW5kZXJBcnJvd1UoKTtcbiAgICAgICAgY2FzZSBcIkFEXCI6IHJldHVybiB0aGlzLnJlbmRlckFycm93RCgpO1xuICAgICAgICBkZWZhdWx0OiByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbG93QXJyb3dDZWxsXCIgPlxuXG4gICAgICAgICAgPGRpdiBzdHlsZT17eyBvdmVyZmxvdzogJ2hpZGRlbicsIHBvc2l0aW9uOiAncmVsYXRpdmUnLCBmbGV4OiAnMScgfX0+XG4gICAgICAgICAgICB7IHJlbmRlclN2Zyh0aGlzLnByb3BzLnRvcCkgfVxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBzdHlsZT17eyBvdmVyZmxvdzogJ2hpZGRlbicsIHBvc2l0aW9uOiAncmVsYXRpdmUnLCBmbGV4OiAnMScgfX0+XG4gICAgICAgICAgICB7IHJlbmRlclN2Zyh0aGlzLnByb3BzLmJvdHRvbSkgfVxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3RyYW5zaXRpb24vZmxvd0Fycm93LnRzeCIsImltcG9ydCB7IGgsIHJlbmRlciwgQ29tcG9uZW50IH0gZnJvbSBcInByZWFjdFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElQcm9wcyB7XG4gIHRyYW5zaXRpb246IGFueTtcbiAgdG9nZ2xlRXhwYW5kOiBGdW5jdGlvbjtcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU3RhdGUge1xufVxuXG5leHBvcnQgY2xhc3MgQnJlYWRjcnVtYkFycm93IGV4dGVuZHMgQ29tcG9uZW50PElQcm9wcywgSVN0YXRlPiB7XG4gIGhhbmRsZUNsaWNrID0gKCkgPT5cbiAgICAgIHRoaXMucHJvcHMudG9nZ2xlRXhwYW5kKCk7XG5cbiAgaWNvbkNsYXNzKCkge1xuICAgIGxldCBpY29uQ2xhc3NlcyA9IHtcbiAgICAgIHJ1bm5pbmc6ICd1aXItaWNvbiB1aXItc3BpbiB1aXItaWNvbnctc3Bpbm5lcicsXG4gICAgICBzdWNjZXNzOiAndWlyLWljb24gdWlyLWljb253LWNoZWNrJyxcbiAgICAgIHJlZGlyZWN0ZWQ6ICd1aXItaWNvbiB1aXItaWNvbnctc2hhcmUnLFxuICAgICAgaWdub3JlZDogJ3Vpci1pY29uIHVpci1pY29udy1jaXJjbGUtbycsXG4gICAgICBlcnJvcjogJ3Vpci1pY29uIHVpci1pY29udy1jbG9zZSdcbiAgICB9O1xuXG4gICAgcmV0dXJuIGljb25DbGFzc2VzW3RoaXMucHJvcHMuc3RhdHVzXTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gIXRoaXMucHJvcHMudHJhbnNpdGlvbiA/IG51bGwgOiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXt0aGlzLnByb3BzLnN0YXR1cyArIFwiIGhpc3RvcnlFbnRyeVwifSBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN1bW1hcnlcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidHJhbnNpZFwiPnt0aGlzLnByb3BzLnRyYW5zaXRpb24uJGlkfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdGF0dXNcIj5cbiAgICAgICAgICAgICAge3RoaXMucHJvcHMuc3RhdHVzfVxuICAgICAgICAgICAgICB7IXRoaXMucHJvcHMubWVzc2FnZSA/IG51bGwgOiA8c3Bhbj46IHt0aGlzLnByb3BzLm1lc3NhZ2V9PC9zcGFuPn1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0cmFuc25hbWVcIj5cbiAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPXt0aGlzLmljb25DbGFzcygpfSAvPiB7dGhpcy5wcm9wcy50cmFuc2l0aW9uLnRvKCkubmFtZX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICApXG4gIH1cblxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3RyYW5zaXRpb24vYnJlYWRjcnVtYkFycm93LnRzeCIsImV4cG9ydCBjb25zdCBtYWtlQ2FuY2VsYWJsZSA9IChwcm9taXNlKSA9PiB7XG4gIGxldCBoYXNDYW5jZWxlZF8gPSBmYWxzZTtcblxuICBjb25zdCB3cmFwcGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBwcm9taXNlLnRoZW4oXG4gICAgICAgICh2YWwpICAgPT4gaGFzQ2FuY2VsZWRfID8gcmVqZWN0KHtpc0NhbmNlbGVkOiB0cnVlfSkgOiByZXNvbHZlKHZhbCksXG4gICAgICAgIChlcnJvcikgPT4gaGFzQ2FuY2VsZWRfID8gcmVqZWN0KHtpc0NhbmNlbGVkOiB0cnVlfSkgOiByZWplY3QoZXJyb3IpXG4gICAgKTtcbiAgfSk7XG5cbiAgdmFyIGNhbmNlbGFibGVQcm9taXNlID0ge1xuICAgIHByb21pc2U6IHdyYXBwZWRQcm9taXNlLFxuICAgIGlzQ2FuY2VsZWQ6IGZhbHNlLFxuICAgIGNhbmNlbCgpIHtcbiAgICAgIGNhbmNlbGFibGVQcm9taXNlLmlzQ2FuY2VsZWQgPSBoYXNDYW5jZWxlZF8gPSB0cnVlO1xuICAgIH0sXG4gIH07XG5cbiAgcmV0dXJuIGNhbmNlbGFibGVQcm9taXNlO1xufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXRpbC9jYW5jZWxhYmxlUHJvbWlzZS50cyJdfQ==
